(function(){var e={542:function(){},8018:function(e,t,s){"use strict";var a=s(5130),i=s(6768);const o={class:"min-h-screen bg-[#121212] flex flex-col"},r={class:"flex-grow"};function l(e,t,s,a,l,n){const c=(0,i.g2)("router-view"),d=(0,i.g2)("MobileNav"),u=(0,i.g2)("ToastNotification"),h=(0,i.g2)("PopupModal");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",r,[(0,i.bF)(c),n.showMobileNav?((0,i.uX)(),(0,i.Wv)(d,{key:0})):(0,i.Q3)("",!0),(0,i.bF)(u),(0,i.bF)(h,{onPopupAction:n.handlePopupAction},null,8,["onPopupAction"])])])}s(4114),s(8111),s(116),s(7588);var n=s(4232);const c={class:"fixed bottom-0 left-0 right-0 bg-[#121212]/95 backdrop-blur-md border-t border-white/10 md:hidden z-40"},d={class:"flex items-center justify-around p-0"};function u(e,t,s,a,o,r){const l=(0,i.g2)("router-link"),u=(0,i.g2)("ProfileMenu");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",c,[(0,i.Lk)("div",d,[(0,i.bF)(l,{to:"/",class:"nav-link pb","active-class":"active"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-home text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Home",-1)])),_:1,__:[2]}),(0,i.bF)(l,{to:"/regional",class:"nav-link","active-class":"active"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-globe-asia text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Regional",-1)])),_:1,__:[3]}),(0,i.bF)(l,{to:"/search",class:"nav-link","active-class":"active"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-search text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Search",-1)])),_:1,__:[4]}),(0,i.bF)(l,{to:"/news",class:"nav-link","active-class":"active"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-newspaper text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"News",-1)])),_:1,__:[5]}),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.toggleMenu&&r.toggleMenu(...e)),class:(0,n.C4)(["nav-link",{active:o.isMenuOpen}])},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-user text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Profile",-1)]),2)])]),(0,i.bF)(u,{"is-open":o.isMenuOpen,onClose:t[1]||(t[1]=e=>o.isMenuOpen=!1)},null,8,["is-open"])],64)}const h={key:0,class:"fixed inset-0 bg-black/95 z-50 flex flex-col overflow-y-auto"},p={class:"flex justify-between items-center p-6"},m={key:0,class:"px-6 py-4 border-b border-white/10"},g={class:"flex items-center gap-4"},f={class:"w-16 h-16 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},v={class:"text-2xl font-semibold"},y={class:"text-xl font-semibold text-white"},b={class:"text-white/60"},k={class:"flex-1 px-6 py-4"},w={class:"space-y-6"},x={key:1,href:"#",class:"flex items-center gap-4 text-white/80 hover:text-white group"},L={class:"p-6 space-y-4 pb-24 md:pb-6"};function C(e,t,s,a,o,r){const l=(0,i.g2)("router-link");return s.isOpen?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",p,[t[5]||(t[5]=(0,i.Lk)("h1",{class:"text-4xl font-bold text-white"},[(0,i.eW)("MENU"),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},".")],-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e)),class:"text-white/80 hover:text-white"},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-times text-2xl"},null,-1)]))]),r.user?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("div",g,[(0,i.Lk)("div",f,[(0,i.Lk)("span",v,(0,n.v_)(r.userInitials),1)]),(0,i.Lk)("div",null,[(0,i.Lk)("h2",y,(0,n.v_)(r.userName),1),(0,i.Lk)("p",b,(0,n.v_)(r.user.phone),1)])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",k,[(0,i.Lk)("div",w,[r.user?((0,i.uX)(),(0,i.Wv)(l,{key:0,to:"/profile",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:r.handleProfileClick},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-user text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"My Profile",-1)])),_:1,__:[6]},8,["onClick"])):(0,i.Q3)("",!0),r.user?((0,i.uX)(),(0,i.CE)("a",x,t[7]||(t[7]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-heart text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"My List",-1)]))):(0,i.Q3)("",!0),r.user?((0,i.uX)(),(0,i.Wv)(l,{key:2,to:"/referral",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:r.close},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-users text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Referral",-1)])),_:1,__:[8]},8,["onClick"])):(0,i.Q3)("",!0),(0,i.bF)(l,{to:"/wallet",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:r.close},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-wallet text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Wallet",-1)])),_:1,__:[9]},8,["onClick"]),t[10]||(t[10]=(0,i.Fv)('<a href="#" class="flex items-center gap-4 text-white/80 hover:text-white group"><div class="w-8 h-8 flex items-center justify-center text-[#ff4d4d]"><i class="fas fa-headphones text-xl"></i></div><span class="text-lg">Help</span></a><a href="#" class="flex items-center gap-4 text-white/80 hover:text-white group"><div class="w-8 h-8 flex items-center justify-center text-[#ff4d4d]"><i class="fas fa-gift text-xl"></i></div><span class="text-lg">Offers</span></a><a href="#" class="flex items-center gap-4 text-white/80 hover:text-white group"><div class="w-8 h-8 flex items-center justify-center text-[#ff4d4d]"><i class="fas fa-file-alt text-xl"></i></div><span class="text-lg">Terms and Conditions</span></a>',3))])]),(0,i.Lk)("div",L,[r.user?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>r.handleLogout&&r.handleLogout(...e)),class:"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors"}," Logout ")):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.handleSignIn&&r.handleSignIn(...e)),class:"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors"}," Sign In "),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.handleSubscribe&&r.handleSubscribe(...e)),class:"w-full py-4 px-6 bg-[#ff4d4d] text-white font-semibold rounded-lg hover:opacity-90 transition-opacity"}," Subscribe Now ")],64)),t[11]||(t[11]=(0,i.Lk)("p",{class:"text-center text-white/40 text-sm"},"Version 0.1.38",-1))])])):(0,i.Q3)("",!0)}var S=s(4373),_=s(6892);const P=()=>({user:null,isAuthenticated:!1,token:null,subscription:null,isLoading:!1,toast:{show:!1,message:"",type:"info",duration:3e3},homePageData:null}),E=()=>{try{const e=localStorage.getItem("user"),t=localStorage.getItem("token"),s="true"===localStorage.getItem("isAuthenticated");if(e&&t&&s)return{user:JSON.parse(e),isAuthenticated:!0,token:t}}catch(e){console.error("Error loading user data from localStorage:",e),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("isAuthenticated")}return{user:null,isAuthenticated:!1,token:null}};var A=(0,_.y$)({state:{...P(),...E()},mutations:{setUser(e,t){e.user=t,e.isAuthenticated=!!t,localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("isAuthenticated","true")},setAuthenticated(e,t){e.isAuthenticated=t,localStorage.setItem("isAuthenticated",t.toString())},setToken(e,t){e.token=t,t?localStorage.setItem("token",t):localStorage.removeItem("token")},setLoading(e,t){e.isLoading=t},setSubscription(e,t){e.subscription=t},logout(e){localStorage.clear(),sessionStorage.clear(),localStorage.removeItem("user"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),localStorage.removeItem("csrfToken"),localStorage.removeItem("pending_payment"),localStorage.removeItem("registrationSuccess"),localStorage.removeItem("registrationMessage"),localStorage.removeItem("loginSuccess"),localStorage.removeItem("loginMessage"),localStorage.removeItem("hasCompletedRegistration"),localStorage.removeItem("app_version"),Object.assign(e,P()),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")})},RESET_STATE(e){Object.assign(e,P())},showToast(e,{message:t,type:s="info",duration:a=3e3}){e.toast={show:!0,message:t,type:s,duration:a}},hideToast(e){e.toast.show=!1},setHomePageData(e,t){e.homePageData=t},clearHomePageData(e){e.homePageData=null}},actions:{initializeStore({commit:e}){const t=JSON.parse(localStorage.getItem("user")),s=localStorage.getItem("token");t&&s&&(e("setUser",t),e("setToken",s))},logout({commit:e}){e("logout")},resetState({commit:e}){return new Promise(t=>{e("RESET_STATE"),t()})},setLoading({commit:e},t){e("setLoading",t)},showToast({commit:e},{message:t,type:s,duration:a}){e("showToast",{message:t,type:s,duration:a}),setTimeout(()=>{e("hideToast")},a||3e3)}},getters:{isLoading:e=>e.isLoading,isAuthenticated:e=>e.isAuthenticated,currentUser:e=>e.user,hasActiveSubscription:e=>!!e.subscription,subscriptionDetails:e=>e.subscription,token:e=>e.token,toast:e=>e.toast,homePageData:e=>e.homePageData}}),T=(s(3579),s(1387));const I={class:"min-h-screen bg-[#121212] text-white"},M={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/70"},V={class:"px-4 py-6 flex justify-between items-center"},D={class:"max-w-md mx-auto px-4 py-8"},R={class:"bg-[#1d1d1d] rounded-2xl overflow-hidden border border-[#c30059]/20 hover:border-[#c30059]/40 transition-all"},j={class:"p-6"},X={class:"flex items-center gap-3 mb-4"},$={class:"text-2xl font-bold"},F={class:"text-sm text-white/60"},U={class:"bg-[#c30059]/10 rounded-lg p-4 mb-6"},O={class:"flex items-baseline gap-2"},N={class:"text-3xl font-bold text-[#c30059]"},B={class:"text-sm text-[#c30059]"},W={class:"space-y-4 mb-6"},Q={class:"flex items-start gap-3"},q={class:"font-medium"},z=["disabled"],K={key:0,class:"fas fa-credit-card"},H={key:1,class:"fas fa-spinner fa-spin"},J={key:2},Y={key:3},G={class:"text-center text-sm text-white/60 mt-4"};function Z(e,t,s,a,o,r){const l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",I,[a.isProcessingPayment?((0,i.uX)(),(0,i.CE)("div",M,t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin text-5xl text-[#c30059] mb-4"},null,-1),(0,i.Lk)("div",{class:"text-lg font-semibold text-white"},"Processing Payment...",-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",V,[(0,i.bF)(l,{to:"/movie/"+a.movieId,class:"flex items-center gap-2 text-white/80 hover:text-white"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,i.Lk)("span",null,"Back to Movie",-1)])),_:1,__:[2]},8,["to"])]),(0,i.Lk)("div",D,[(0,i.Lk)("div",R,[(0,i.Lk)("div",j,[(0,i.Lk)("div",X,[t[3]||(t[3]=(0,i.Lk)("div",{class:"w-12 h-12 rounded-full bg-gradient-to-r from-[#c30059] to-[#7c1d44] flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-ticket-alt text-2xl text-white"})],-1)),(0,i.Lk)("div",null,[(0,i.Lk)("h3",$,(0,n.v_)(a.movieTitle),1),(0,i.Lk)("p",F,(0,n.v_)(a.rentalDuration)+" Days Rental",1)])]),(0,i.Lk)("div",U,[(0,i.Lk)("div",O,[(0,i.Lk)("span",N,"₹"+(0,n.v_)(a.rentalPrice),1),(0,i.Lk)("span",B,"/"+(0,n.v_)(a.rentalDuration)+" days",1)]),t[4]||(t[4]=(0,i.Lk)("p",{class:"text-sm text-white/60 mt-1"},"Watch anytime within rental period",-1))]),(0,i.Lk)("div",W,[(0,i.Lk)("div",Q,[t[6]||(t[6]=(0,i.Lk)("i",{class:"fas fa-clock text-[#c30059] mt-1"},null,-1)),(0,i.Lk)("div",null,[(0,i.Lk)("p",q,(0,n.v_)(a.rentalDuration)+" Days Access",1),t[5]||(t[5]=(0,i.Lk)("p",{class:"text-sm text-white/60"},"Watch unlimited times",-1))])]),t[7]||(t[7]=(0,i.Fv)('<div class="flex items-start gap-3"><i class="fas fa-tv text-[#c30059] mt-1"></i><div><p class="font-medium">Watch on Any Device</p><p class="text-sm text-white/60">TV, Mobile, Laptop</p></div></div><div class="flex items-start gap-3"><i class="fas fa-film text-[#c30059] mt-1"></i><div><p class="font-medium">High Quality</p><p class="text-sm text-white/60">HD Quality Available</p></div></div>',2))]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.handlePayment&&a.handlePayment(...e)),disabled:a.isProcessingPayment,class:"w-full py-3 px-6 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[a.isProcessingPayment?((0,i.uX)(),(0,i.CE)("i",H)):((0,i.uX)(),(0,i.CE)("i",K)),a.isProcessingPayment?((0,i.uX)(),(0,i.CE)("span",J,"Processing...")):((0,i.uX)(),(0,i.CE)("span",Y,"Pay ₹"+(0,n.v_)(a.rentalPrice),1))],8,z),(0,i.Lk)("p",G," Available to watch for "+(0,n.v_)(a.rentalDuration)+" days after payment ",1)])])])])}var ee=s(144),te={name:"RentalPayment",setup(){const e=(0,_.Pj)(),t=(0,T.rd)(),s=(0,T.lq)(),a=(0,ee.KR)(!1),o=(0,ee.KR)(s.params.id),r=(0,ee.KR)(""),l=(0,ee.KR)(0),n=(0,ee.KR)(0),c=(0,ee.KR)(localStorage.getItem("token")),d=(0,ee.KR)("true"===localStorage.getItem("isAuthenticated")),u=(0,ee.KR)(JSON.parse(localStorage.getItem("user")||"{}"));(0,i.sV)(async()=>{try{if(console.log("RentalPayment: onMounted started"),console.log("Current route:",s.fullPath),console.log("Movie ID:",o.value),e.dispatch("initializeStore"),console.log("Auth check - isAuthenticated:",d.value),console.log("Auth check - user:",u.value),console.log("Auth check - token:",c.value),!d.value||!u.value||!c.value)return console.log("User not authenticated, redirecting to login"),void t.push({path:"/login",query:{redirect:s.fullPath}});S.A.defaults.baseURL="https://ott.no1news.in/",S.A.defaults.headers.common["Content-Type"]="application/json",S.A.defaults.headers.common["Authorization"]=`Bearer ${c.value}`,S.A.defaults.withCredentials=!0,console.log("Token set:",c.value),console.log("Fetching movie details for ID:",o.value);const a=await S.A.get(`/api/videos/${o.value}/`);console.log("Movie details response:",a.data),a.data&&(r.value=a.data.title,a.data.prices&&a.data.prices.length>0&&(l.value=a.data.prices[0].rental_price,n.value=a.data.prices[0].rental_duration,console.log("Rental details set:",{price:l.value,duration:n.value})))}catch(a){console.error("Error in onMounted:",a),console.error("Error response:",a.response),e.dispatch("showToast",{message:"Error loading movie details. Please try again.",type:"error"})}});const h=async()=>{try{a.value=!0,console.log("Starting payment process...");const i=localStorage.getItem("token"),c=JSON.parse(localStorage.getItem("user")||"{}"),d="true"===localStorage.getItem("isAuthenticated");if(!d||!i||!c.phone)return console.log("Authentication check failed"),e.dispatch("showToast",{message:"Please login to continue",type:"warning"}),t.push({path:"/login",query:{redirect:s.fullPath}}),void(a.value=!1);const u=c.first_name&&c.last_name&&c.phone&&c.state&&c.district&&c.constituency;if(!u)return console.log("Profile incomplete, redirecting to profile update"),e.dispatch("showToast",{message:"Please complete your profile details first",type:"warning",duration:5e3}),t.push({path:"/profile/update",query:{redirect:s.fullPath}}),void(a.value=!1);const h=S.A.create({baseURL:"https://ott.no1news.in",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},withCredentials:!0});console.log("Creating rental order with token:",i);const p=await h.post("/users/api/rentals/create/",{phone:c.phone,video_id:o.value,rental_duration:n.value,rental_price:l.value});if(console.log("Order created:",p.data),!p.data||!p.data.key_id)throw new Error("Invalid order response");const m={key:p.data.key_id,amount:p.data.amount,currency:p.data.currency,name:"No1 OTT",description:`Rent ${r.value} for ${n.value} days`,order_id:p.data.order_id,prefill:{name:c.first_name+" "+c.last_name,email:c.email||"",contact:c.phone},theme:{color:"#c30059"},webview_intent:!0,handler:async s=>{try{console.log("Payment successful, verifying:",s);const a=localStorage.getItem("token");if(!a)throw new Error("Token missing for verification");const i=S.A.create({baseURL:"https://ott.no1news.in",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},withCredentials:!0}),r=await i.post("/users/api/rentals/verify/",{razorpay_payment_id:s.razorpay_payment_id,razorpay_order_id:s.razorpay_order_id,razorpay_signature:s.razorpay_signature,video_id:o.value,phone:c.phone,rental_duration:n.value});if("success"!==r.data.status)throw new Error("Payment verification failed");e.dispatch("showToast",{message:"Payment successful! You can now watch the movie.",type:"success"}),t.push(`/movie/${o.value}`)}catch(a){console.error("Payment verification failed:",a),e.dispatch("showToast",{message:"Payment verification failed. Please contact support.",type:"error"})}},modal:{ondismiss:()=>{a.value=!1}}},g=new window.Razorpay(m);g.on("payment.failed",function(t){a.value=!1,e.dispatch("showToast",{message:`Payment failed: ${t.error.description}`,type:"error"})}),g.open(),setTimeout(()=>{a.value=!1},1e3)}catch(i){console.error("Payment error:",i),401===i.response?.status?(e.dispatch("showToast",{message:"Session expired. Please login again.",type:"error"}),e.dispatch("logout"),t.push({path:"/login",query:{redirect:s.fullPath}})):400===i.response?.status?e.dispatch("showToast",{message:i.response.data?.message||"Invalid request. Please check your details.",type:"error"}):e.dispatch("showToast",{message:i.response?.data?.message||"Payment failed. Please try again.",type:"error"}),a.value=!1}};return{isProcessingPayment:a,movieId:o,movieTitle:r,rentalPrice:l,rentalDuration:n,handlePayment:h,isAuthenticated:d,user:u,token:c}}},se=s(1241);const ae=(0,se.A)(te,[["render",Z]]);var ie=ae;const oe={class:"bg-[#121212] text-white min-h-screen overflow-x-hidden"},re={class:"pt-[60px] md:pt-0"},le={class:"pl-4 sm:pl-6 md:pl-10 py-6 space-y-12 relative overflow-hidden"},ne={key:1,class:"loading-skeleton"},ce={key:3,class:"loading-skeleton"},de={key:5,class:"loading-skeleton"},ue={key:7,class:"loading-skeleton"};function he(e,t,s,a,o,r){const l=(0,i.g2)("AppHeader"),c=(0,i.g2)("HeroSection"),d=(0,i.g2)("AllCategoriesSection"),u=(0,i.g2)("MovieSection"),h=(0,i.g2)("CategorySection"),p=(0,i.g2)("StatesSection"),m=(0,i.g2)("AppFooter"),g=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",oe,[(0,i.bF)(l,{onToggleSearch:r.toggleSearch},null,8,["onToggleSearch"]),(0,i.Lk)("div",re,[(0,i.bF)(c),(0,i.Lk)("main",le,[(0,i.bF)(d,{title:"Categories"}),o.recentlyAdded.length>0?((0,i.uX)(),(0,i.Wv)(u,{key:0,title:"Recently Added","section-id":"recentlyAdded",movies:o.recentlyAdded,"show-view-all":!1},null,8,["movies"])):((0,i.uX)(),(0,i.CE)("div",ne)),r.paidVideos.length>0?((0,i.uX)(),(0,i.Wv)(u,{key:2,title:"Premium Videos","section-id":"paidVideos",movies:r.paidVideos,"show-view-all":!0,badge:"PAID"},null,8,["movies"])):o.dataLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ce)),r.freeVideos.length>0?((0,i.uX)(),(0,i.Wv)(u,{key:4,title:"Free Videos","section-id":"freeVideos",movies:r.freeVideos,"show-view-all":!0,badge:"FREE"},null,8,["movies"])):o.dataLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",de)),r.rentalVideos.length>0?((0,i.uX)(),(0,i.Wv)(u,{key:6,title:"Rental Videos","section-id":"rentalVideos",movies:r.rentalVideos,"show-view-all":!1,badge:"RENTAL"},null,8,["movies"])):o.dataLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ue)),(0,i.bF)(h,{title:"Live Channels"}),(0,i.bF)(p)])]),(0,i.Lk)("div",{class:(0,n.C4)(["mobile-search-bar",{active:o.isSearchActive}])},[t[2]||(t[2]=(0,i.Lk)("input",{type:"text",placeholder:"Search movies, shows and more..."},null,-1)),(0,i.Lk)("button",{class:"text-white",onClick:t[0]||(t[0]=(...e)=>r.toggleSearch&&r.toggleSearch(...e))},t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))],2),(0,i.bF)(m),(0,i.bF)(g)])}s(2489),s(1701);const pe={class:"header-container"},me={class:"main-nav"},ge={class:"nav-list"},fe={class:"auth-container"},ve={class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},ye={class:"text-sm font-semibold"};function be(e,t,s,a,o,r){const l=(0,i.g2)("router-link"),c=(0,i.g2)("ProfileMenu"),d=(0,i.g2)("LiveTVPlayer");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("header",{class:(0,n.C4)(["header",{scrolled:o.isScrolled}])},[(0,i.Lk)("div",pe,[r.shouldShowBackButton?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"back-btn","aria-label":"Go back",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"logo-container",onClick:t[1]||(t[1]=(...e)=>r.goToHome&&r.goToHome(...e))},t[7]||(t[7]=[(0,i.Lk)("img",{src:"/ott.jpg",alt:"Logo",class:"h-8"},null,-1)])),(0,i.Lk)("nav",me,[(0,i.Lk)("ul",ge,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.navItems,t=>((0,i.uX)(),(0,i.CE)("li",{class:"nav-item",key:t.name},[(0,i.bF)(l,{to:t.path,class:(0,n.C4)(["nav-link",{active:e.$route.path===t.path||"/regional"===t.path&&e.$route.path.startsWith("/regional")}])},{default:(0,i.k6)(()=>[(0,i.eW)((0,n.v_)(t.name),1)]),_:2},1032,["to","class"])]))),128))])]),(0,i.Lk)("div",fe,[r.isUserSubscribed?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:0,to:"/plans",class:"mobile-subscribe-btn"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.Lk)("span",{class:"crown-icon"},[(0,i.Lk)("i",{class:"fas fa-crown"})],-1),(0,i.Lk)("span",{class:"subscribe-text"},"Subscribe",-1)])),_:1,__:[8]})),(0,i.Lk)("button",{class:"search-btn",onClick:t[2]||(t[2]=(...e)=>r.toggleSearch&&r.toggleSearch(...e))},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-search"},null,-1)])),o.user?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[3]||(t[3]=(...e)=>r.toggleMenu&&r.toggleMenu(...e)),class:"profile-btn"},[(0,i.Lk)("div",ve,[(0,i.Lk)("span",ye,(0,n.v_)(r.userInitials),1)])])):((0,i.uX)(),(0,i.Wv)(l,{key:2,to:"/login",class:"profile-btn"},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.Lk)("div",{class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},[(0,i.Lk)("i",{class:"fas fa-user text-sm"})],-1)])),_:1,__:[10]})),r.isUserSubscribed?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:3,to:"/plans",class:"subscribe-btn"},{default:(0,i.k6)(()=>t[11]||(t[11]=[(0,i.eW)("Subscribe Now")])),_:1,__:[11]})),o.hasLiveStream?((0,i.uX)(),(0,i.CE)("button",{key:4,onClick:t[4]||(t[4]=(...e)=>r.toggleLiveTV&&r.toggleLiveTV(...e)),class:"live-tv"},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-tv"},null,-1),(0,i.Lk)("span",{class:"live-dot"},null,-1),(0,i.Lk)("span",{class:"live-text"},"LIVE",-1)]))):(0,i.Q3)("",!0)])])],2),(0,i.bF)(c,{"is-open":o.isMenuOpen,onClose:r.closeMenu},null,8,["is-open","onClose"]),(0,i.bF)(d,{"is-open":o.isLiveTVOpen,"video-url":o.videoUrl,"video-title":o.videoTitle,"is-direct-video":!1,onClose:t[5]||(t[5]=e=>o.isLiveTVOpen=!1)},null,8,["is-open","video-url","video-title"])],64)}const ke={key:0,class:"fixed inset-0 bg-black/95 z-50 flex flex-col overflow-y-auto profile-menu"},we={class:"flex justify-between items-center p-6"},xe={key:0,class:"px-6 py-4 border-b border-white/10"},Le={class:"flex items-center gap-4"},Ce={class:"w-16 h-16 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},Se={class:"text-2xl font-semibold"},_e={class:"text-xl font-semibold text-white"},Pe={class:"text-white/60"},Ee={class:"flex-1 px-6 py-4"},Ae={class:"space-y-6"},Te={class:"p-6 space-y-4 pb-24 md:pb-6"};function Ie(e,t,s,o,r,l){const c=(0,i.g2)("router-link");return s.isOpen?((0,i.uX)(),(0,i.CE)("div",ke,[(0,i.Lk)("div",we,[t[9]||(t[9]=(0,i.Lk)("h1",{class:"text-4xl font-bold text-white"},[(0,i.eW)("MENU"),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},".")],-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.close&&l.close(...e)),class:"text-white/80 hover:text-white"},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-times text-2xl"},null,-1)]))]),l.user?((0,i.uX)(),(0,i.CE)("div",xe,[(0,i.Lk)("div",Le,[(0,i.Lk)("div",Ce,[(0,i.Lk)("span",Se,(0,n.v_)(l.userInitials),1)]),(0,i.Lk)("div",null,[(0,i.Lk)("h2",_e,(0,n.v_)(l.userName),1),(0,i.Lk)("p",Pe,(0,n.v_)(l.user.phone),1)])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ee,[(0,i.Lk)("div",Ae,[l.user?((0,i.uX)(),(0,i.Wv)(c,{key:0,to:"/profile",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:l.handleProfileClick},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-user text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"My Profile",-1)])),_:1,__:[10]},8,["onClick"])):(0,i.Q3)("",!0),l.user?((0,i.uX)(),(0,i.CE)("a",{key:1,onClick:t[1]||(t[1]=(0,a.D$)(()=>{},["prevent"])),class:"flex items-center gap-4 text-white/80 hover:text-white group cursor-pointer"},t[11]||(t[11]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-heart text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"My List",-1)]))):(0,i.Q3)("",!0),l.user?((0,i.uX)(),(0,i.Wv)(c,{key:2,to:"/referral",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:l.close},{default:(0,i.k6)(()=>t[12]||(t[12]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-users text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Referral",-1)])),_:1,__:[12]},8,["onClick"])):(0,i.Q3)("",!0),(0,i.bF)(c,{to:"/wallet",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:l.close},{default:(0,i.k6)(()=>t[13]||(t[13]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-wallet text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Wallet",-1)])),_:1,__:[13]},8,["onClick"]),(0,i.Lk)("a",{onClick:t[2]||(t[2]=(0,a.D$)(()=>{},["prevent"])),class:"flex items-center gap-4 text-white/80 hover:text-white group cursor-pointer"},t[14]||(t[14]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-headphones text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Help",-1)])),(0,i.Lk)("a",{onClick:t[3]||(t[3]=(0,a.D$)(()=>{},["prevent"])),class:"flex items-center gap-4 text-white/80 hover:text-white group cursor-pointer"},t[15]||(t[15]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-gift text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Offers",-1)])),(0,i.Lk)("a",{onClick:t[4]||(t[4]=(0,a.D$)(()=>{},["prevent"])),class:"flex items-center gap-4 text-white/80 hover:text-white group cursor-pointer"},t[16]||(t[16]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-file-alt text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Terms and Conditions",-1)]))])]),(0,i.Lk)("div",Te,[l.user?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>l.handleLogout&&l.handleLogout(...e)),class:"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors"}," Logout ")):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.handleSignIn&&l.handleSignIn(...e)),class:"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors"}," Sign In "),(0,i.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.handleSubscribe&&l.handleSubscribe(...e)),class:"w-full py-4 px-6 bg-[#ff4d4d] text-white font-semibold rounded-lg hover:opacity-90 transition-opacity"}," Subscribe Now ")],64)),t[17]||(t[17]=(0,i.Lk)("p",{class:"text-center text-white/40 text-sm"},"Version 0.1.38",-1))])])):(0,i.Q3)("",!0)}var Me={name:"ProfileMenu",props:{isOpen:{type:Boolean,default:!1}},computed:{...(0,_.L8)(["currentUser"]),user(){return this.currentUser},userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},userName(){return this.user?this.user.first_name||this.user.last_name?`${this.user.first_name||""} ${this.user.last_name||""}`.trim():this.user.phone:""}},watch:{isOpen(e){e&&this.$store.dispatch("initializeStore")}},methods:{close(){this.$emit("close")},handleProfileClick(){this.close(),this.$nextTick(()=>{this.$router.push("/profile")})},handleSignIn(){this.$router.push("/login"),this.close()},handleSubscribe(){this.$router.push("/plans"),this.close()},async handleLogout(){try{this.$emit("loading",!0),await Pb(),this.$store.commit("setUser",null),this.$store.commit("setAuthenticated",!1),localStorage.removeItem("hasCompletedRegistration"),this.close(),this.$router.push("/login")}catch(e){console.error("Logout failed:",e),alert("Logout failed. Please try again.")}finally{this.$emit("loading",!1)}}}};const Ve=(0,se.A)(Me,[["render",Ie]]);var De=Ve,Re=s.p+"img/ott.1aa84a8f.jpg";const je={key:0,class:"fixed inset-0 z-[2000] bg-black flex items-center justify-center player-root"},Xe=["src"],$e=["src"],Fe={key:2,class:"absolute inset-0 z-10"},Ue={key:3,class:"absolute inset-0 z-20 bg-black/80 flex items-center justify-center"},Oe={key:4,class:"absolute inset-0 bg-black/50 flex items-center justify-center z-50"},Ne={key:5,class:"absolute inset-0 flex items-center justify-center z-40 bg-black/10"},Be={class:"w-20 h-20 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full"},We={class:"px-2 flex items-center justify-between"},Qe={class:"flex-1 flex flex-col items-center md:items-start mx-4"},qe={class:"text-white font-bold text-xl md:text-2xl tracking-wide"},ze={class:"flex items-center gap-2"},Ke={class:"relative px-8 pb-4"},He={class:"px-2 py-1 text-center text-xs text-white"},Je={class:"px-8 flex items-center justify-between"},Ye={class:"flex items-center gap-6"},Ge={class:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},Ze={class:"hidden md:flex items-center group/volume"},et={class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},tt={class:"w-0 overflow-hidden group-hover/volume:w-24 transition-all duration-200 h-10 flex items-center"},st={class:"flex items-center gap-3"},at={class:"relative group/settings"},it={key:0,class:"absolute bottom-full right-0 mb-2 bg-black/90 backdrop-blur-md rounded-lg overflow-hidden border border-white/10 w-48"},ot={class:"py-2"},rt={class:"mt-1"},lt=["onClick"],nt={key:0,class:"fas fa-check text-[#c30059]"},ct={class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},dt={class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"};function ut(e,t,s,o,r,l){return s.isOpen?((0,i.uX)(),(0,i.CE)("div",je,[(0,i.Lk)("div",{ref:"playerContainer",class:"relative w-full h-full max-h-screen overflow-hidden player-container",onMousemove:t[19]||(t[19]=(...e)=>l.handleMouseMove&&l.handleMouseMove(...e)),onMouseleave:t[20]||(t[20]=(...e)=>l.handleMouseLeave&&l.handleMouseLeave(...e))},[s.isDirectVideo?((0,i.uX)(),(0,i.CE)("video",{key:0,ref:"videoRef",class:"w-full h-full object-contain",src:s.videoUrl,preload:"auto",autoplay:"",muted:"",onTimeupdate:t[0]||(t[0]=(...e)=>l.updateProgress&&l.updateProgress(...e)),onLoadedmetadata:t[1]||(t[1]=(...e)=>l.onVideoLoaded&&l.onVideoLoaded(...e)),onEnded:t[2]||(t[2]=(...e)=>l.onVideoEnded&&l.onVideoEnded(...e)),onPlay:t[3]||(t[3]=e=>r.isPlaying=!0),onPause:t[4]||(t[4]=e=>r.isPlaying=!1),onVolumechange:t[5]||(t[5]=(...e)=>l.onVolumeChange&&l.onVolumeChange(...e))},null,40,Xe)):((0,i.uX)(),(0,i.CE)("iframe",{key:1,ref:"youtubePlayer",src:l.youtubeEmbedUrl,class:"w-full h-full",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,$e)),s.isDirectVideo?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Fe)),s.isDirectVideo||r.isPlaying?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ue,[(0,i.Lk)("div",{class:"w-20 h-20 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-full cursor-pointer",onClick:t[6]||(t[6]=(...e)=>l.togglePlayPause&&l.togglePlayPause(...e))},t[21]||(t[21]=[(0,i.Lk)("i",{class:"fas fa-play text-white text-3xl pl-1"},null,-1)]))])),r.isLoading?((0,i.uX)(),(0,i.CE)("div",Oe,t[22]||(t[22]=[(0,i.Fv)('<div class="w-20 h-20 relative" data-v-44d3645d><div class="absolute inset-0 rounded-full border-4 border-white/20" data-v-44d3645d></div><div class="absolute inset-0 rounded-full border-4 border-t-[#c30059] border-r-transparent border-b-transparent border-l-transparent animate-spin" data-v-44d3645d></div><div class="absolute inset-0 flex items-center justify-center" data-v-44d3645d><img src="'+Re+'" alt="Logo" class="h-10 w-10 rounded-full object-cover" data-v-44d3645d></div></div>',1)]))):(0,i.Q3)("",!0),r.showBigPlayButton?((0,i.uX)(),(0,i.CE)("div",Ne,[(0,i.Lk)("div",Be,[(0,i.Lk)("i",{class:(0,n.C4)([r.isPlaying?"fas fa-pause":"fas fa-play","text-white text-3xl pl-1"])},null,2)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,n.C4)(["absolute top-0 left-0 right-0 pt-4 pb-16 z-30 bg-gradient-to-b from-black/90 via-black/50 to-transparent transition-opacity duration-300",{"opacity-0":!r.showControls&&!r.isControlsLocked,"opacity-100":r.showControls||r.isControlsLocked}])},[(0,i.Lk)("div",We,[(0,i.Lk)("button",{onClick:t[7]||(t[7]=(0,a.D$)((...e)=>l.close&&l.close(...e),["stop"])),class:"flex items-center group"},t[23]||(t[23]=[(0,i.Lk)("div",{class:"w-10 h-10 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full mr-3 group-hover:bg-[#c30059]/80 transition-all"},[(0,i.Lk)("i",{class:"fas fa-arrow-left text-white/90 text-3xl"})],-1)])),(0,i.Lk)("div",Qe,[(0,i.Lk)("h1",qe,(0,n.v_)(s.videoTitle),1),t[24]||(t[24]=(0,i.Lk)("div",{class:"flex items-center mt-1"},null,-1))]),(0,i.Lk)("div",ze,[(0,i.Lk)("button",{onClick:t[8]||(t[8]=(0,a.D$)((...e)=>l.toggleCaptions&&l.toggleCaptions(...e),["stop"])),class:(0,n.C4)(["w-10 h-10 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full hover:bg-white/20 transition-all",{"bg-[#c30059]/80":r.hasCaptions}])},t[25]||(t[25]=[(0,i.Lk)("i",{class:"fas fa-closed-captioning text-white/90 text-lg"},null,-1)]),2),r.supportsPiP?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[9]||(t[9]=(0,a.D$)((...e)=>l.togglePictureInPicture&&l.togglePictureInPicture(...e),["stop"])),class:"w-10 h-10 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full hover:bg-white/20 transition-all"},t[26]||(t[26]=[(0,i.Lk)("i",{class:"fas fa-external-link-alt text-white/90 text-lg"},null,-1)]))):(0,i.Q3)("",!0)])])],2),(0,i.Lk)("div",{class:(0,n.C4)(["absolute left-0 right-0 bottom-0 z-30 transition-opacity duration-300 pb-6 pt-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent",{"opacity-0":!r.showControls&&!r.isControlsLocked,"opacity-100":r.showControls||r.isControlsLocked}])},[(0,i.Lk)("div",Ke,[(0,i.Lk)("div",{ref:"progressContainer",class:"h-1.5 bg-white/30 rounded-full cursor-pointer group/progress overflow-hidden hover:h-2.5 transition-all duration-150",onClick:t[10]||(t[10]=(...e)=>l.seekToPosition&&l.seekToPosition(...e)),onMousemove:t[11]||(t[11]=(...e)=>l.showProgressPreview&&l.showProgressPreview(...e))},[(0,i.Lk)("div",{class:"h-full bg-[#c30059] rounded-full relative",style:(0,n.Tr)({width:`${r.progressPercentage}%`})},t[27]||(t[27]=[(0,i.Lk)("div",{class:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-[#c30059] border-2 border-white rounded-full transform scale-0 opacity-0 group-hover/progress:scale-100 group-hover/progress:opacity-100 transition-all duration-150"},null,-1)]),4)],544),r.previewPosition>0?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"absolute bottom-8 transform -translate-x-1/2 bg-black/90 rounded overflow-hidden shadow-lg",style:(0,n.Tr)({left:`${r.previewPosition}%`})},[t[28]||(t[28]=(0,i.Lk)("div",{class:"w-32 h-20 bg-[#1a1a1a] flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-tv text-[#c30059] text-2xl"})],-1)),(0,i.Lk)("div",He,(0,n.v_)(l.formatTime(r.previewTime)),1)],4)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Je,[(0,i.Lk)("div",Ye,[(0,i.Lk)("button",{onClick:t[12]||(t[12]=(0,a.D$)((...e)=>l.togglePlayPause&&l.togglePlayPause(...e),["stop"])),class:"group cursor-pointer"},[(0,i.Lk)("div",Ge,[(0,i.Lk)("i",{class:(0,n.C4)([r.isPlaying?"fas fa-pause":"fas fa-play","text-white text-2xl group-hover:text-[#c30059] transition-colors"])},null,2)])]),(0,i.Lk)("div",Ze,[(0,i.Lk)("button",{onClick:t[13]||(t[13]=(0,a.D$)((...e)=>l.toggleMute&&l.toggleMute(...e),["stop"])),class:"group"},[(0,i.Lk)("div",et,[(0,i.Lk)("i",{class:(0,n.C4)([l.volumeIcon,"text-white text-xl group-hover:text-[#c30059] transition-colors"])},null,2)])]),(0,i.Lk)("div",tt,[(0,i.bo)((0,i.Lk)("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[14]||(t[14]=e=>r.volumeLevel=e),onInput:t[15]||(t[15]=(...e)=>l.updateVolume&&l.updateVolume(...e)),class:"ml-2 w-full h-1 bg-white/30 rounded-full appearance-none focus:outline-none volume-slider"},null,544),[[a.Jo,r.volumeLevel]])])]),t[29]||(t[29]=(0,i.Lk)("div",{class:"md:hidden flex items-center"},[(0,i.Lk)("span",{class:"h-2 w-2 bg-red-600 rounded-full animate-pulse mr-1.5"}),(0,i.Lk)("span",{class:"text-white/90 text-sm"},"LIVE")],-1))]),t[32]||(t[32]=(0,i.Lk)("div",{class:"hidden md:block absolute left-1/2 -translate-x-1/2 text-white flex items-center"},[(0,i.Lk)("div",{class:"flex items-center"},[(0,i.Lk)("span",{class:"h-2 w-2 bg-red-600 rounded-full animate-pulse mr-1.5"}),(0,i.Lk)("span",{class:"text-white/90 font-medium"},"LIVE")])],-1)),(0,i.Lk)("div",st,[(0,i.Lk)("div",at,[(0,i.Lk)("button",{onClick:t[16]||(t[16]=(0,a.D$)(e=>r.isQualityMenuOpen=!r.isQualityMenuOpen,["stop"])),class:"group"},t[30]||(t[30]=[(0,i.Lk)("div",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},[(0,i.Lk)("i",{class:"fas fa-cog text-white text-lg group-hover:text-[#c30059] transition-colors"})],-1)])),r.isQualityMenuOpen?((0,i.uX)(),(0,i.CE)("div",it,[(0,i.Lk)("div",ot,[t[31]||(t[31]=(0,i.Lk)("div",{class:"px-4 py-1 text-white/70 text-xs font-medium uppercase tracking-wider"},"Quality",-1)),(0,i.Lk)("div",rt,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(["Auto","1080p","720p","480p","360p"],e=>(0,i.Lk)("button",{key:e,onClick:(0,a.D$)(t=>l.setQuality(e),["stop"]),class:(0,n.C4)(["w-full px-4 py-2 text-left text-sm text-white flex items-center justify-between hover:bg-white/10",{"text-[#c30059]":r.currentQuality===e}])},[(0,i.Lk)("span",null,(0,n.v_)(e),1),r.currentQuality===e?((0,i.uX)(),(0,i.CE)("i",nt)):(0,i.Q3)("",!0)],10,lt)),64))])])])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[17]||(t[17]=(0,a.D$)((...e)=>l.toggleControlsLock&&l.toggleControlsLock(...e),["stop"])),class:"group"},[(0,i.Lk)("div",ct,[(0,i.Lk)("i",{class:(0,n.C4)([r.isControlsLocked?"fas fa-lock":"fas fa-lock-open","text-white text-lg group-hover:text-[#c30059] transition-colors",{"text-[#c30059]":r.isControlsLocked}])},null,2)])]),(0,i.Lk)("button",{onClick:t[18]||(t[18]=(0,a.D$)((...e)=>l.enterFullscreen&&l.enterFullscreen(...e),["stop"])),class:"group"},[(0,i.Lk)("div",dt,[(0,i.Lk)("i",{class:(0,n.C4)([r.isFullScreen?"fas fa-compress":"fas fa-expand","text-white text-lg group-hover:text-[#c30059] transition-colors"])},null,2)])])])])],2)],544)])):(0,i.Q3)("",!0)}var ht=s(1510),pt={name:"LiveTVPlayer",props:{isOpen:{type:Boolean,required:!0},videoUrl:{type:String,required:!0},videoTitle:{type:String,required:!0},isDirectVideo:{type:Boolean,default:!1}},data(){return{isPlaying:!0,isFullScreen:!1,orientationLock:null,showControls:!0,controlsTimeout:null,progressPercentage:0,duration:0,currentTime:0,volumeLevel:100,isMuted:!1,previousVolume:100,isQualityMenuOpen:!1,currentQuality:"Auto",supportsPiP:!1,isControlsLocked:!1,showBigPlayButton:!1,bigPlayButtonTimeout:null,isLoading:!0,previewPosition:0,previewTime:0,hasCaptions:!1}},computed:{youtubeEmbedUrl(){const e=this.extractVideoId(this.videoUrl);return`https://www.youtube.com/embed/${e}?autoplay=1&mute=0&rel=0&controls=0&disablekb=1&fs=0&modestbranding=1&showinfo=0&iv_load_policy=3&playsinline=1&enablejsapi=1&origin=${window.location.origin}&widget_referrer=${window.location.origin}&color=white&loop=1&wmode=transparent&vq=hd1080&cc_load_policy=3`},volumeIcon(){return this.isMuted||0===this.volumeLevel?"fas fa-volume-mute":this.volumeLevel<50?"fas fa-volume-down":"fas fa-volume-up"},formattedCurrentTime(){return this.formatTime(this.currentTime)},formattedDuration(){return this.formatTime(this.duration)}},watch:{isOpen(e){e?(document.addEventListener("keydown",this.handleKeyboardShortcuts),this.checkPiPSupport(),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1,this.ensureVideoIsPlaying()},2e3)):document.removeEventListener("keydown",this.handleKeyboardShortcuts)}},mounted(){const{lockOrientation:e,unlockOrientation:t}=(0,ht.KpY)();this.orientationLock={lockOrientation:e,unlockOrientation:t};try{const e=localStorage.getItem("player-volume");null!==e&&(this.volumeLevel=parseInt(e,10))}catch(s){}this.isOpen&&(document.addEventListener("keydown",this.handleKeyboardShortcuts),this.checkPiPSupport(),setTimeout(()=>{this.isLoading=!1,this.ensureVideoIsPlaying()},2e3)),this.resetControlsTimeout()},methods:{extractVideoId(e){const t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,s=e.match(t);return s&&11===s[7].length?s[7]:""},async close(){if(document.fullscreenElement)try{await this.toggleFullscreen(),this.$emit("close")}catch(e){console.error("Error during cleanup:",e),this.$emit("close")}else this.$emit("close")},togglePlayPause(){if(this.isDirectVideo){const e=this.$refs.videoRef;e&&(e.paused?e.play():e.pause(),this.isPlaying=!e.paused)}else{const e=this.$refs.youtubePlayer;if(e){const t=this.isPlaying?"pauseVideo":"playVideo";e.contentWindow.postMessage(JSON.stringify({event:"command",func:t}),"*"),this.isPlaying=!this.isPlaying}}this.showBigPlayButton=!0,clearTimeout(this.bigPlayButtonTimeout),this.bigPlayButtonTimeout=setTimeout(()=>{this.showBigPlayButton=!1},800)},toggleCaptions(){this.hasCaptions=!this.hasCaptions},handleMouseMove(){this.isControlsLocked||(this.showControls=!0,this.resetControlsTimeout())},handleMouseLeave(){this.isControlsLocked||(clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout(()=>{this.showControls=!1,this.previewPosition=0},1e3))},resetControlsTimeout(){this.isControlsLocked||(clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout(()=>{this.showControls=!1,this.previewPosition=0},3e3))},toggleControlsLock(){this.isControlsLocked=!this.isControlsLocked},updateProgress(){if(!this.isDirectVideo)return;const e=this.$refs.videoRef;e&&(this.currentTime=e.currentTime,this.duration=e.duration,this.progressPercentage=e.currentTime/e.duration*100||0)},showProgressPreview(e){if(!this.isDirectVideo)return;const t=this.$refs.progressContainer;if(!t)return;const s=t.getBoundingClientRect(),a=(e.clientX-s.left)/s.width*100;this.previewPosition=a,this.duration&&(this.previewTime=a/100*this.duration)},seekToPosition(e){if(!this.isDirectVideo)return;const t=this.$refs.progressContainer;if(!t)return;const s=t.getBoundingClientRect(),a=(e.clientX-s.left)/s.width,i=this.$refs.videoRef;i&&!isNaN(i.duration)&&(i.currentTime=a*i.duration),this.previewPosition=0},formatTime(e){if(isNaN(e)||!isFinite(e))return"0:00";const t=Math.floor(e/60),s=Math.floor(t/60),a=t%60,i=Math.floor(e%60);return s>0?`${s}:${a<10?"0":""}${a}:${i<10?"0":""}${i}`:`${t}:${i<10?"0":""}${i}`},toggleMute(){if(this.isDirectVideo){const e=this.$refs.videoRef;e&&(this.isMuted?(e.volume=this.previousVolume/100,this.volumeLevel=this.previousVolume):(this.previousVolume=this.volumeLevel,e.volume=0,this.volumeLevel=0),this.isMuted=!this.isMuted)}else{const e=this.$refs.youtubePlayer;if(e){const t=this.isMuted?"unMute":"mute";e.contentWindow.postMessage(JSON.stringify({event:"command",func:t}),"*"),this.isMuted=!this.isMuted}}},updateVolume(){if(this.isDirectVideo){const e=this.$refs.videoRef;e&&(e.volume=this.volumeLevel/100,e.muted=0===this.volumeLevel,this.isMuted=0===this.volumeLevel)}else{const t=this.$refs.youtubePlayer;if(t){const s=Math.max(0,Math.min(100,this.volumeLevel));try{this.isMuted&&s>0&&(t.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),this.isMuted=!1),t.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[s]}),"*"),0!==s||this.isMuted||(t.contentWindow.postMessage(JSON.stringify({event:"command",func:"mute"}),"*"),this.isMuted=!0)}catch(e){console.error("Error updating YouTube volume:",e)}}}try{localStorage.setItem("player-volume",this.volumeLevel.toString())}catch(t){}},onVolumeChange(){if(!this.isDirectVideo)return;const e=this.$refs.videoRef;e&&(this.volumeLevel=100*e.volume,this.isMuted=e.muted)},onVideoLoaded(){if(!this.isDirectVideo)return;const e=this.$refs.videoRef;e&&(this.duration=e.duration,this.isLoading=!1)},onVideoEnded(){this.isPlaying=!1},async enterFullscreen(){const e=this.$refs.playerContainer;if(e)if(document.fullscreenElement){document.exitFullscreen(),this.isFullScreen=!1;try{this.orientationLock.unlockOrientation()}catch(t){console.warn("Failed to unlock orientation:",t)}}else try{await e.requestFullscreen(),this.isFullScreen=!0;try{await this.orientationLock.lockOrientation("landscape")}catch(t){console.warn("Orientation lock failed:",t)}}catch(t){console.error(`Error attempting to enable full-screen mode: ${t.message}`)}},checkPiPSupport(){this.isDirectVideo?this.supportsPiP=document.pictureInPictureEnabled||this.$refs.videoRef&&"requestPictureInPicture"in HTMLVideoElement.prototype:this.supportsPiP=!1},async togglePictureInPicture(){if(this.isDirectVideo&&this.supportsPiP)try{if(document.pictureInPictureElement)await document.exitPictureInPicture();else{const e=this.$refs.videoRef;e&&await e.requestPictureInPicture()}}catch(e){console.error("PiP failed:",e)}},setQuality(e){if(this.currentQuality=e,this.isQualityMenuOpen=!1,this.isDirectVideo)console.log(`Setting quality to ${e}`);else{const t=this.$refs.youtubePlayer;if(t){let s;switch(e){case"1080p":s="hd1080";break;case"720p":s="hd720";break;case"480p":s="large";break;case"360p":s="medium";break;default:s="default"}t.contentWindow.postMessage(JSON.stringify({event:"command",func:"setPlaybackQuality",args:[s]}),"*")}}},handleKeyboardShortcuts(e){if(this.isOpen)switch(e.key.toLowerCase()){case" ":case"k":e.preventDefault(),this.togglePlayPause();break;case"f":e.preventDefault(),this.enterFullscreen();break;case"m":e.preventDefault(),this.toggleMute();break;case"c":e.preventDefault(),this.toggleCaptions();break;case"arrowright":if(this.isDirectVideo){e.preventDefault();const t=this.$refs.videoRef;t&&(t.currentTime+=10)}break;case"arrowleft":if(this.isDirectVideo){e.preventDefault();const t=this.$refs.videoRef;t&&(t.currentTime-=10)}break;case"arrowup":e.preventDefault(),this.volumeLevel=Math.min(100,this.volumeLevel+5),this.updateVolume();break;case"arrowdown":e.preventDefault(),this.volumeLevel=Math.max(0,this.volumeLevel-5),this.updateVolume();break;case"escape":document.fullscreenElement?(e.preventDefault(),document.exitFullscreen()):this.isQualityMenuOpen&&(e.preventDefault(),this.isQualityMenuOpen=!1);break}},ensureVideoIsPlaying(){if(this.isDirectVideo){const e=this.$refs.videoRef;if(e){e.muted=!0;const t=e.play();void 0!==t&&t.then(()=>{this.isPlaying=!0,setTimeout(()=>{this.volumeLevel>0&&!this.isMuted&&(e.muted=!1)},1e3)}).catch(e=>{console.error("Autoplay failed:",e)})}}else{const e=this.$refs.youtubePlayer;e&&(e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),this.isPlaying=!0)}},async toggleFullscreen(){const e=this.$refs.playerContainer;if(e)try{if(document.fullscreenElement)return await document.exitFullscreen(),new Promise(e=>{const t=()=>{document.removeEventListener("fullscreenchange",t),setTimeout(e,100)};document.addEventListener("fullscreenchange",t)});await e.requestFullscreen()}catch(t){console.error("Fullscreen error:",t)}}},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyboardShortcuts),clearTimeout(this.controlsTimeout),clearTimeout(this.bigPlayButtonTimeout),document.fullscreenElement&&document.exitFullscreen().catch(e=>{console.warn("Error exiting fullscreen:",e)}),document.pictureInPictureElement&&document.exitPictureInPicture().catch(e=>{console.warn("Error exiting PiP:",e)});try{this.orientationLock.unlockOrientation()}catch(e){console.warn("Failed to unlock orientation:",e)}}};const mt=(0,se.A)(pt,[["render",ut],["__scopeId","data-v-44d3645d"]]);var gt=mt;const ft="https://ott.no1news.in";var vt={name:"AppHeader",components:{ProfileMenu:De,LiveTVPlayer:gt},emits:["toggleSearch"],props:{hideBackButton:{type:Boolean,default:!1}},data(){return{isScrolled:!1,isMenuOpen:!1,isLiveTVOpen:!1,hasLiveStream:!1,liveStreamUrl:"",liveStreamTitle:"",navItems:[{name:"Home",path:"/"},{name:"About",path:"/about"},{name:"Regional Content",path:"/regional"},{name:"News",path:"/news"},{name:"Contact",path:"/contact"}],videoUrl:"",videoTitle:"",showProfileMenu:!1,showLanguageDropdown:!1,currentLanguage:"Telugu",languages:["Telugu","Hindi","Tamil","Kannada","Malayalam","English"],pollingInterval:null,user:null,isLoadingUser:!0}},computed:{showBackButton(){return"MovieDetails"===this.$route.name},shouldShowBackButton(){return this.showBackButton&&!this.hideBackButton},userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},isUserSubscribed(){return!!this.isLoadingUser||!!this.user&&(this.user.is_subscribed&&new Date(this.user.subscription_end_date)>new Date)}},mounted(){this.checkLiveStream(),this.startPolling(),window.addEventListener("scroll",this.handleScroll),document.addEventListener("click",e=>{const t=document.querySelector(".profile-btn"),s=document.querySelector(".language-selector button"),a=document.querySelector(".profile-menu");t&&!t.contains(e.target)&&a&&!a.contains(e.target)&&this.isMenuOpen&&this.closeMenu(),s&&!s.contains(e.target)&&this.showLanguageDropdown&&(this.showLanguageDropdown=!1)}),this.initializeUser()},beforeUnmount(){this.stopPolling(),window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.isScrolled=window.scrollY>0},toggleSearch(){this.$router.push("/search")},toggleMenu(){this.isMenuOpen=!this.isMenuOpen,console.log("Menu toggled:",this.isMenuOpen)},closeMenu(){this.isMenuOpen=!1,console.log("Menu closed")},toggleLiveTV(){this.hasLiveStream&&this.liveStreamUrl&&(this.videoUrl=this.liveStreamUrl,this.videoTitle=this.liveStreamTitle,this.isLiveTVOpen=!this.isLiveTVOpen)},toggleProfileMenu(){this.showProfileMenu=!this.showProfileMenu,this.showProfileMenu&&(this.showLanguageDropdown=!1)},toggleLanguageDropdown(){this.showLanguageDropdown=!this.showLanguageDropdown,this.showLanguageDropdown&&(this.showProfileMenu=!1)},selectLanguage(e){this.currentLanguage=e,this.showLanguageDropdown=!1},goBack(){this.$router.go(-1)},startPolling(){this.pollingInterval=setInterval(()=>{this.checkLiveStream()},1e4)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async checkLiveStream(){try{console.log("Checking for live streams...");const t=await S.A.get(`${ft}/api/frontend/categories/`);console.log("Categories Response:",t.data);let s=!1;if("success"===t.data.status&&t.data.data){for(const a of t.data.data){console.log("Checking category:",a.name,"ID:",a.id);try{const e=await S.A.get(`${ft}/api/live-streams/by_category/?category_id=${a.id}`);if(console.log("Live streams for category",a.id,":",e.data),e.data&&Array.isArray(e.data)){const t=e.data.find(e=>(console.log("Checking stream:",e),console.log("is_important:",e.is_important),console.log("is_active:",e.is_active),!0===e.is_important&&!0===e.is_active));if(t){console.log("Found important live stream:",t),this.liveStreamUrl===t.live_url&&this.liveStreamTitle===t.title||(console.log("Live stream details changed, updating..."),this.hasLiveStream=!0,this.liveStreamUrl=t.live_url,this.liveStreamTitle=t.title,this.videoUrl=t.live_url,this.videoTitle=t.title),s=!0;break}}}catch(e){console.error("Error fetching streams for category",a.id,":",e);continue}}!s&&this.hasLiveStream&&(console.log("Important live stream no longer available"),this.clearLiveStreamData())}}catch(t){console.error("Error checking live stream:",t),t.response&&console.error("Error response:",t.response.data)}},clearLiveStreamData(){this.hasLiveStream=!1,this.liveStreamUrl="",this.liveStreamTitle="",this.videoUrl="",this.videoTitle=""},async initializeUser(){this.isLoadingUser=!0;const e=localStorage.getItem("phone");if(!e)return this.user=null,void(this.isLoadingUser=!1);try{const t=await S.A.get(`${ft}/users/profile/?phone=${e}`);if(!t.data||"success"!==t.data.status)throw new Error("Failed to load user data");this.user=t.data.user,localStorage.setItem("user",JSON.stringify(t.data.user))}catch(t){console.error("Error loading user data:",t);const e=localStorage.getItem("user");if(e)try{this.user=JSON.parse(e)}catch(s){console.error("Error parsing user data:",s),this.user=null}}finally{this.isLoadingUser=!1}},goToHome(){this.$router.push("/")}}};const yt=(0,se.A)(vt,[["render",be],["__scopeId","data-v-0adc5f7b"]]);var bt=yt;const kt={id:"heroContainer"},wt={class:"hero-content"},xt={class:"hero-content-wrapper"},Lt={class:"hero-badges"},Ct={key:0,class:"hero-badge premium"},St={class:"hero-title"},_t={class:"hero-meta"},Pt={class:"hero-description"},Et={class:"hero-actions"},At={class:"hero-thumbnails"},Tt=["onClick"],It=["src","alt"],Mt={class:"hero-media-container"},Vt=["onClick"],Dt=["src","alt"],Rt=["onClick"],jt=["muted","onPlaying","onEnded","onError"],Xt={class:"carousel-dots"},$t=["data-index","onClick"],Ft=["aria-label"];function Ut(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("section",kt,[(0,i.Lk)("div",wt,[(0,i.Lk)("div",xt,[(0,i.Lk)("div",Lt,["paid"===l.currentVideo?.video_type?((0,i.uX)(),(0,i.CE)("span",Ct,"Premium")):(0,i.Q3)("",!0)]),(0,i.Lk)("h1",St,(0,n.v_)(l.capitalizeText(l.currentVideo?.title)),1),(0,i.Lk)("div",_t,[(0,i.Lk)("span",null,(0,n.v_)(l.getYear(l.currentVideo?.release_date)),1),t[4]||(t[4]=(0,i.Lk)("span",{class:"meta-dot"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(l.formatDuration(l.currentVideo?.duration)),1),t[5]||(t[5]=(0,i.Lk)("span",{class:"meta-dot"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(l.currentVideo?.category_name),1)]),(0,i.Lk)("p",Pt,(0,n.v_)(l.formatDescription(l.currentVideo?.description)),1),(0,i.Lk)("div",Et,[(0,i.Lk)("button",{class:"hero-button primary",onClick:t[0]||(t[0]=e=>l.navigateToMovie(l.currentVideo?.id))},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-play"},null,-1),(0,i.eW)(" Watch Now ")])),t[7]||(t[7]=(0,i.Lk)("button",{class:"hero-button secondary"},[(0,i.Lk)("i",{class:"fas fa-plus"}),(0,i.eW)(" Add to Watchlist ")],-1))]),(0,i.Lk)("div",At,[(0,i.Lk)("button",{class:"thumbnail-nav","aria-label":"Previous",onClick:t[1]||(t[1]=(...e)=>l.prevSlide&&l.prevSlide(...e))},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)])),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.slides,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:(0,n.C4)(["hero-thumbnail",{active:r.currentSlide===t}]),onClick:e=>l.showSlide(t)},[(0,i.Lk)("img",{src:e.thumbnail_url,alt:e.title},null,8,It)],10,Tt))),128)),(0,i.Lk)("button",{class:"thumbnail-nav","aria-label":"Next",onClick:t[2]||(t[2]=(...e)=>l.nextSlide&&l.nextSlide(...e))},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))])])]),(0,i.Lk)("div",Mt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.slides,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:(0,n.C4)(["carousel-slide",{active:r.currentSlide===t}])},[(0,i.Lk)("div",{class:"mobile-video-click-area",onClick:t=>l.handleMobileVideoClick(e)},[(0,i.bo)((0,i.Lk)("img",{src:e.thumbnail_url,alt:e.title,class:"hero-media"},null,8,Dt),[[a.aG,!r.isVideoPlaying||r.currentSlide!==t]]),(0,i.Lk)("div",{class:"video-wrapper",onClick:t=>l.handleMobileVideoClick(e)},[(0,i.bo)((0,i.Lk)("video",{ref_for:!0,ref:"videos",class:"video-js vjs-default-skin hero-media",playsinline:"",muted:r.isMuted,onPlaying:e=>l.handleVideoPlaying(t),onEnded:e=>l.handleVideoEnded(t),onError:e=>l.handleVideoError(t)},null,40,jt),[[a.aG,r.currentSlide===t]])],8,Rt)],8,Vt)],2))),128)),(0,i.Lk)("div",Xt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.slides,(e,t)=>((0,i.uX)(),(0,i.CE)("span",{key:t,class:(0,n.C4)(["carousel-dot",{active:r.currentSlide===t}]),"data-index":t,onClick:e=>l.showSlide(t)},null,10,$t))),128))]),t[10]||(t[10]=(0,i.Lk)("div",{id:"heroGradient"},null,-1))]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.toggleMute&&l.toggleMute(...e)),class:"mute-button","aria-label":r.isMuted?"Unmute":"Mute"},[(0,i.Lk)("i",{class:(0,n.C4)(["fas",r.isMuted?"fa-volume-mute":"fa-volume-up"])},null,2)],8,Ft)])}var Ot=s(6827),Nt={name:"HeroSection",setup(){const e=(0,T.rd)();return{router:e}},data(){return{currentSlide:0,isMuted:!0,isVideoPlaying:!1,videoTimeout:null,touchStartX:null,touchEndX:null,touchStartY:0,touchEndY:0,touchStartTime:0,isDragging:!1,dragOffset:0,minDragDistance:20,activeVideo:null,isManualNavigation:!1,slides:[],loading:!1,error:null,videojsPlayers:[]}},computed:{currentVideo(){return this.slides[this.currentSlide]||null}},async created(){await this.fetchHeroVideos()},mounted(){this.fetchHeroVideos();const e=document.getElementById("heroContainer");e&&(e.addEventListener("touchstart",this.handleTouchStart),e.addEventListener("touchmove",this.handleTouchMove),e.addEventListener("touchend",this.handleTouchEnd))},beforeUnmount(){this.cleanup()},methods:{async fetchHeroVideos(){try{this.loading=!0;const e=await S.A.get("https://ott.no1news.in/api/videos/hero/");e.data&&"success"===e.data.status&&(this.slides=e.data.data,this.$nextTick(()=>{setTimeout(()=>{this.initializeFirstVideo()},500)}))}catch(e){console.error("Error fetching hero videos:",e),this.error="Failed to load hero videos"}finally{this.loading=!1}},initializeFirstVideo(){if(!this.$refs.videos)return;let e=null;if(e=Array.isArray(this.$refs.videos)?this.$refs.videos[0]:this.$refs.videos,e){const t=(0,Ot.A)(e,{controls:!1,autoplay:!1,preload:"auto",muted:!0,fluid:!0,playsinline:!0});this.videojsPlayers[0]=t,this.startVideoPlayback(e)}},startVideoPlayback(e){if(e)try{e.muted=!0,this.isMuted=!0;const t=this.slides[this.currentSlide];if(t?.promo_hls_url){const e=this.videojsPlayers[this.currentSlide];e&&(e.src({src:t.promo_hls_url,type:"application/x-mpegURL"}),e.play().catch(e=>{console.error("Video playback failed:",e)}))}}catch(t){console.error("Error starting video playback:",t)}},getYear(e){return e?new Date(e).getFullYear():""},formatDuration(e){if(!e)return"";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}h ${s}m`:`${s}m`},formatTitle(e){return e?(e=e.trim(),e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()):""},capitalizeText(e){return e?e.split(/\s+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):""},formatDescription(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""},setupEventListeners(){const e=document.getElementById("heroContainer");e&&(e.addEventListener("mouseenter",this.pauseAutoplay),e.addEventListener("mouseleave",this.resumeAutoplay))},setupTouchEvents(){const e=document.getElementById("heroContainer");e&&(e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),e.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),e.addEventListener("touchend",this.handleTouchEnd,{passive:!0}))},handleTouchStart(e){this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.touchStartTime=Date.now(),this.isDragging=!1,this.dragOffset=0,this.videoTimeout&&clearTimeout(this.videoTimeout)},handleTouchMove(e){this.touchEndX=e.touches[0].clientX,this.touchEndY=e.touches[0].clientY;const t=this.touchEndX-this.touchStartX,s=this.touchEndY-this.touchStartY;if(!this.isDragging&&Math.abs(t)>this.minDragDistance&&(this.isDragging=!0),this.isDragging&&Math.abs(t)>Math.abs(s)){e.preventDefault();const s=document.querySelector(".carousel-slide.active"),a=document.querySelectorAll(".carousel-slide")[(this.currentSlide+1)%this.slides.length],i=document.querySelectorAll(".carousel-slide")[(this.currentSlide-1+this.slides.length)%this.slides.length],o=t/window.innerWidth,r=.1*Math.sin(o*Math.PI);s.style.transform=`translateX(${t+100*r}px) scale(${1.05-.1*Math.abs(o)})`,s.style.transition="none",t>0?(i.style.transform=`translateX(${100*o-100}%) scale(${.95+.1*o})`,i.style.opacity=Math.abs(o),i.style.transition="none",i.style.zIndex="1"):(a.style.transform=`translateX(${100+100*o}%) scale(${.95+.1*Math.abs(o)})`,a.style.opacity=Math.abs(o),a.style.transition="none",a.style.zIndex="1"),this.dragOffset=t}},handleTouchEnd(){if(!this.isDragging)return;this.isDragging=!1;const e=.3*window.innerWidth,t=this.touchEndX-this.touchStartX,s=Date.now()-this.touchStartTime,a=document.querySelector(".carousel-slide.active"),i=document.querySelectorAll(".carousel-slide")[(this.currentSlide+1)%this.slides.length],o=document.querySelectorAll(".carousel-slide")[(this.currentSlide-1+this.slides.length)%this.slides.length];a.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",i.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",o.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",Math.abs(t)>e||Math.abs(t)>50&&s<300?(this.isManualNavigation=!0,t>0?this.prevSlide():this.nextSlide()):(a.style.transform="translateX(0) scale(1.05)",i.style.transform="translateX(100%) scale(0.95)",o.style.transform="translateX(-100%) scale(0.95)",i.style.opacity="0",o.style.opacity="0")},cleanup(){this.videojsPlayers.forEach(e=>{e&&e.dispose()}),this.videojsPlayers=[];const e=document.getElementById("heroContainer");e&&(e.removeEventListener("touchstart",this.handleTouchStart),e.removeEventListener("touchmove",this.handleTouchMove),e.removeEventListener("touchend",this.handleTouchEnd)),this.videoTimeout&&clearTimeout(this.videoTimeout)},showSlide(e){if(e===this.currentSlide)return;const t=document.querySelector(".carousel-slide.active"),s=document.querySelectorAll(".carousel-slide")[e];if(t&&s){this.isDragging=!1,this.dragOffset=0;const a=e>this.currentSlide?"next":"prev";"next"===a?(t.classList.add("prev"),s.style.transform="translateX(100%) scale(0.95)"):(t.classList.add("prev"),s.style.transform="translateX(-100%) scale(0.95)"),requestAnimationFrame(()=>{t.style.opacity="0",t.style.transform="next"===a?"translateX(-100%) scale(0.95)":"translateX(100%) scale(0.95)",s.style.opacity="1",s.style.transform="translateX(0) scale(1.05)"}),setTimeout(()=>{this.stopAllVideos(),this.currentSlide=e,t.classList.remove("active","prev"),s.classList.add("active");const a=this.$refs.videos[e];a&&a.load()},800)}},handleAudioToggle(e){if(e.preventDefault(),e.stopPropagation(),this.isVideoPlaying&&this.activeVideo)try{this.isMuted=!this.isMuted,this.activeVideo.muted=this.isMuted,this.activeVideo.paused&&this.playVideo(),console.log("Audio state changed:",this.isMuted?"muted":"unmuted")}catch(t){console.error("Audio toggle error:",t),this.isMuted=!0,this.activeVideo&&(this.activeVideo.muted=!0)}else console.log("No active video to toggle audio")},toggleMute(){this.isMuted=!this.isMuted;const e=this.$refs.videos;e&&(Array.isArray(e)?e.forEach(e=>{e&&(e.muted=this.isMuted)}):e&&(e.muted=this.isMuted)),this.activeVideo&&(this.activeVideo.muted=this.isMuted),localStorage.setItem("videoMuted",this.isMuted.toString())},handleVideoPlaying(e){console.log("handleVideoPlaying","isVideoPlaying:",this.isVideoPlaying,"currentSlide:",this.currentSlide,"index:",e),this.isVideoPlaying=!0},handleVideoEnded(e){console.log("handleVideoEnded","isVideoPlaying:",this.isVideoPlaying,"currentSlide:",this.currentSlide,"index:",e),this.isVideoPlaying=!1;let t=(this.currentSlide+1)%this.slides.length;this.showSlide(t),setTimeout(()=>{this.playVideo()},800)},handleVideoError(e){console.log("handleVideoError","isVideoPlaying:",this.isVideoPlaying,"currentSlide:",this.currentSlide,"index:",e),this.isVideoPlaying=!1},handleVideoEnd(){console.log("Video ended naturally"),this.isManualNavigation||(this.stopVideo(),this.nextSlide(),setTimeout(()=>{this.playVideo()},1e3))},stopVideo(){this.activeVideo&&(this.activeVideo.pause(),this.activeVideo.currentTime=0,this.isVideoPlaying=!1,this.activeVideo=null)},stopAllVideos(){this.$refs.videos&&this.$refs.videos.forEach(e=>{e.pause(),e.currentTime=0}),this.isVideoPlaying=!1,this.activeVideo=null},nextSlide(){this.isManualNavigation=!1;const e=(this.currentSlide+1)%this.slides.length;this.showSlide(e)},prevSlide(){this.isManualNavigation=!0;const e=(this.currentSlide-1+this.slides.length)%this.slides.length;this.showSlide(e)},pauseAutoplay(){this.videoTimeout&&clearTimeout(this.videoTimeout)},resumeAutoplay(){this.videoTimeout||this.isVideoPlaying||this.startVideoPlayback()},navigateToMovie(e){e?(console.log("Navigating to movie:",e),this.$router.push({name:"MovieDetails",params:{id:e}})):console.log("No movie ID available")},handleMobileVideoClick(e){window.innerWidth<=768&&(this.stopVideo(),this.navigateToMovie(e.id))}}};const Bt=(0,se.A)(Nt,[["render",Ut],["__scopeId","data-v-29f31216"]]);var Wt=Bt;const Qt={class:"flex justify-between items-center mb-3 pr-4"},qt={class:"flex items-center gap-2"},zt={class:"gradient-text font-semibold text-base md:text-lg"},Kt={key:0,class:"badge px-2 py-1 text-xs font-bold rounded-full"},Ht={class:"relative"},Jt=["aria-label","id"],Yt=["id"],Gt={class:"flex gap-4 pr-4"},Zt=["aria-label","id"];function es(e,t,s,a,o,r){const l=(0,i.g2)("MovieCard");return(0,i.uX)(),(0,i.CE)("section",null,[(0,i.Lk)("div",Qt,[(0,i.Lk)("div",qt,[(0,i.Lk)("h2",zt,(0,n.v_)(s.title),1),s.badge?((0,i.uX)(),(0,i.CE)("span",Kt,(0,n.v_)(s.badge),1)):(0,i.Q3)("",!0)]),s.showViewAll?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"text-white font-semibold text-sm hover:underline whitespace-nowrap cursor-pointer",onClick:t[0]||(t[0]=(...e)=>r.handleViewAll&&r.handleViewAll(...e))}," View All ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ht,[o.canScrollLeft?((0,i.uX)(),(0,i.CE)("button",{key:0,"aria-label":"Previous "+s.title,id:"prev"+s.sectionId,class:"absolute -left-4 top-1/2 -translate-y-1/2 z-10 rounded-full hidden md:flex items-center justify-center p-2 text-white shadow-lg",style:{"background-color":"#c30059"},onClick:t[1]||(t[1]=(...e)=>r.scrollLeft&&r.scrollLeft(...e))},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),8,Jt)):(0,i.Q3)("",!0),(0,i.Lk)("div",{id:s.sectionId,class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-container snap-x snap-mandatory",ref:"scrollContainer"},[(0,i.Lk)("div",Gt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.movies,e=>((0,i.uX)(),(0,i.Wv)(l,(0,i.v6)({key:e.id},{ref_for:!0},e,{isWebSeries:"trendingWebSeries"===s.sectionId,class:"snap-start"}),null,16,["isWebSeries"]))),128))])],8,Yt),o.canScrollRight?((0,i.uX)(),(0,i.CE)("button",{key:1,"aria-label":"Next "+s.title,id:"next"+s.sectionId,class:"absolute right-0 top-1/2 -translate-y-1/2 z-10 rounded-full hidden md:flex items-center justify-center p-2 text-white shadow-lg",style:{"background-color":"#c30059"},onClick:t[2]||(t[2]=(...e)=>r.scrollRight&&r.scrollRight(...e))},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,Zt)):(0,i.Q3)("",!0)])])}const ts={key:0,class:"absolute inset-0 bg-[#1d1d1d] flex items-center justify-center"},ss=["alt","src"],as={key:1,class:"absolute inset-0 bg-[#1d1d1d] flex items-center justify-center flex-col p-2"},is={class:"text-xs text-center text-white/70"},os={key:2,class:"absolute top-1 right-1 badge-4k text-[10px] font-semibold uppercase px-1 rounded-sm flex items-center space-x-1"},rs={key:3,class:"absolute bottom-1 right-1 badge-premium flex items-center justify-center w-6 h-6 rounded-full backdrop-blur-sm"},ls={class:"mt-1 text-xs font-semibold truncate card-text"},ns={key:0,class:"fas fa-closed-captioning text-[9px]"};function cs(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",{class:"min-w-[160px] flex-shrink-0",onClick:t[2]||(t[2]=(...e)=>r.navigateToDetails&&r.navigateToDetails(...e))},[(0,i.Lk)("div",{class:(0,n.C4)(["relative rounded-md overflow-hidden card-container",{"w-[160px] h-[240px]":!s.isWebSeries,"w-[280px] h-[157.5px]":s.isWebSeries}])},[o.loading?((0,i.uX)(),(0,i.CE)("div",ts,t[3]||(t[3]=[(0,i.Lk)("div",{class:"w-8 h-8 border-2 border-[#c30059] border-t-transparent rounded-full animate-spin"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("img",{alt:s.title,class:"w-full h-full object-cover",src:s.portraitImage||s.image,onLoad:t[0]||(t[0]=e=>o.loading=!1),onError:t[1]||(t[1]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,ss),o.imageError?((0,i.uX)(),(0,i.CE)("div",as,[t[4]||(t[4]=(0,i.Lk)("i",{class:"fas fa-image text-2xl text-[#c30059] mb-2"},null,-1)),(0,i.Lk)("p",is,(0,n.v_)(s.title),1)])):(0,i.Q3)("",!0),s.is4K?((0,i.uX)(),(0,i.CE)("div",os,t[5]||(t[5]=[(0,i.Lk)("span",null,"4K",-1),(0,i.Lk)("i",{class:"fas fa-check-circle text-xs"},null,-1)]))):(0,i.Q3)("",!0),s.isPremium?((0,i.uX)(),(0,i.CE)("div",rs,t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-crown text-yellow-400"},null,-1)]))):(0,i.Q3)("",!0)],2),(0,i.Lk)("div",{class:(0,n.C4)({"w-[160px]":!s.isWebSeries,"w-[280px]":s.isWebSeries})},[(0,i.Lk)("p",ls,[(0,i.eW)((0,n.v_)(s.title)+" ",1),s.hasClosedCaptioning?((0,i.uX)(),(0,i.CE)("i",ns)):(0,i.Q3)("",!0)])],2)])}var ds={name:"MovieCard",props:{title:{type:String,required:!0},image:{type:String,required:!0},portraitImage:{type:String,default:""},isNewEpisode:{type:Boolean,default:!1},is4K:{type:Boolean,default:!1},isPremium:{type:Boolean,default:!1},premiumText:{type:String,default:"Premium"},hasClosedCaptioning:{type:Boolean,default:!1},isWebSeries:{type:Boolean,default:!1},id:{type:[Number,String],required:!0}},data(){return{loading:!0,imageError:!1}},methods:{handleImageError(){this.loading=!1,this.imageError=!0},navigateToDetails(){this.$router.push({name:"MovieDetails",params:{id:this.id}})}}};const us=(0,se.A)(ds,[["render",cs],["__scopeId","data-v-e1f2e664"]]);var hs=us,ps={name:"MovieSection",components:{MovieCard:hs},props:{title:{type:String,required:!0},sectionId:{type:String,required:!0},movies:{type:Array,required:!0},showViewAll:{type:Boolean,default:!0},badge:{type:String,default:null}},data(){return{canScrollLeft:!1,canScrollRight:!0}},mounted(){this.checkScrollButtons(),this.$refs.scrollContainer?.addEventListener("scroll",this.checkScrollButtons)},beforeUnmount(){this.$refs.scrollContainer?.removeEventListener("scroll",this.checkScrollButtons)},methods:{handleViewAll(){"paidVideos"===this.sectionId?this.$router.push("/premium-videos"):"freeVideos"===this.sectionId&&this.$router.push("/free-videos")},checkScrollButtons(){const e=this.$refs.scrollContainer;if(!e)return;this.canScrollLeft=e.scrollLeft>0;const t=e.scrollWidth-e.clientWidth;this.canScrollRight=e.scrollLeft<t-1},scrollLeft(){const e=this.$refs.scrollContainer;if(!e)return;const t=180,s=e.clientWidth,a=Math.floor(s/t),i=t*a,o=Math.max(0,e.scrollLeft-i);e.scrollTo({left:o,behavior:"smooth"})},scrollRight(){const e=this.$refs.scrollContainer;if(!e)return;const t=180,s=e.clientWidth,a=Math.floor(s/t),i=t*a,o=e.scrollWidth-e.clientWidth,r=Math.min(o,e.scrollLeft+i);e.scrollTo({left:r,behavior:"smooth"})}}};const ms=(0,se.A)(ps,[["render",es],["__scopeId","data-v-0ac46adf"]]);var gs=ms;const fs={class:"bg-[#181c23] text-white w-full min-w-full"},vs={class:"w-full px-4 sm:px-6 md:px-8 lg:px-10 pb-20 md:pb-0"},ys={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-5 gap-4 md:gap-8 py-10 border-b border-gray-700 mt-6"},bs={class:"rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1"},ks={class:"space-y-2 text-sm text-gray-300"},ws={class:"rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1"},xs={class:"space-y-2 text-sm text-gray-300"},Ls={class:"flex flex-col md:flex-row justify-between items-center py-6 text-xs text-gray-400 gap-4"},Cs={class:"flex flex-wrap items-center justify-center gap-4"};function Ss(e,t,s,a,o,r){const l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("footer",fs,[(0,i.Lk)("div",vs,[t[21]||(t[21]=(0,i.Fv)('<div class="w-full flex flex-col md:flex-row items-center justify-between p-3 md:p-4 gap-4" data-v-bf239a26><div class="w-full md:w-1/2 flex items-center justify-center md:justify-start mb-4 md:mb-0" data-v-bf239a26><div class="flex items-center gap-4" data-v-bf239a26><svg class="h-12 w-12 text-pink-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-bf239a26><path stroke-linecap="round" stroke-linejoin="round" d="M15 10l4.553-2.276A2 2 0 0122 9.618v4.764a2 2 0 01-2.447 1.894L15 14M4 6v12a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2z" data-v-bf239a26></path></svg><div data-v-bf239a26><div class="text-lg md:text-2xl font-bold" data-v-bf239a26>Stream the Latest Movies &amp; Shows</div><div class="text-sm md:text-base text-gray-300" data-v-bf239a26>Watch anywhere, anytime, on any device. Experience entertainment like never before!</div></div></div></div><div class="w-full md:w-1/2 flex justify-center md:justify-end" data-v-bf239a26><div class="flex flex-row gap-2 w-full md:w-auto justify-center" data-v-bf239a26><a href="https://play.google.com/store/apps/details?id=com.sagiam.vagmi.no1ott&amp;hl=en  " target="_blank" class="flex-1 flex justify-center md:justify-end" data-v-bf239a26><img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play" class="h-14 w-full max-w-xs object-contain" data-v-bf239a26></a><a href="https://www.apple.com/app-store/" target="_blank" class="flex-1 flex justify-center md:justify-end" data-v-bf239a26><img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store" class="h-14 w-full max-w-xs object-contain" data-v-bf239a26></a></div></div></div>',1)),(0,i.Lk)("div",ys,[t[13]||(t[13]=(0,i.Fv)('<div class="rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-2 md:col-span-1" data-v-bf239a26><div class="font-bold mb-3 text-lg" data-v-bf239a26>NEED HELP?</div><div class="text-sm text-gray-300" data-v-bf239a26><p class="mb-2" data-v-bf239a26>Having trouble? We&#39;re here to help you!</p><p class="mb-4" data-v-bf239a26>Contact our support team:</p><a href="mailto:support@https://no1ott.com" class="block text-white hover:text-blue-400 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 text-center font-semibold rounded-lg py-2.5 px-6 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5" data-v-bf239a26><div class="flex items-center justify-center gap-2" data-v-bf239a26><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-bf239a26><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-bf239a26></path></svg> support@no1ott.com </div></a></div></div>',1)),(0,i.Lk)("div",bs,[t[6]||(t[6]=(0,i.Lk)("div",{class:"font-bold mb-3 text-lg"},"HELP CENTER",-1)),(0,i.Lk)("ul",ks,[t[1]||(t[1]=(0,i.Lk)("li",null,"Account & Billing",-1)),(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/plans",class:"hover:text-white transition-colors"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Subscription Plans")])),_:1,__:[0]})]),t[2]||(t[2]=(0,i.Lk)("li",null,"Supported Devices",-1)),t[3]||(t[3]=(0,i.Lk)("li",null,"FAQs",-1)),t[4]||(t[4]=(0,i.Lk)("li",null,"Report a Problem",-1)),t[5]||(t[5]=(0,i.Lk)("li",null,"Accessibility",-1))])]),t[14]||(t[14]=(0,i.Lk)("div",{class:"rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1"},[(0,i.Lk)("div",{class:"font-bold mb-3 text-lg"},"COMPANY"),(0,i.Lk)("ul",{class:"space-y-2 text-sm text-gray-300"},[(0,i.Lk)("li",null,"About Us"),(0,i.Lk)("li",null,"Careers"),(0,i.Lk)("li",null,"Press & Media"),(0,i.Lk)("li",null,"Contact"),(0,i.Lk)("li",null,"Investor Relations")])],-1)),(0,i.Lk)("div",ws,[t[12]||(t[12]=(0,i.Lk)("div",{class:"font-bold mb-3 text-lg"},"LEGAL",-1)),(0,i.Lk)("ul",xs,[(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/terms-of-service",class:"hover:text-white transition-colors"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)("Terms of Service")])),_:1,__:[7]})]),(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/privacy-policy",class:"hover:text-white transition-colors"},{default:(0,i.k6)(()=>t[8]||(t[8]=[(0,i.eW)("Privacy Policy")])),_:1,__:[8]})]),(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/cookie-policy",class:"hover:text-white transition-colors"},{default:(0,i.k6)(()=>t[9]||(t[9]=[(0,i.eW)("Cookie Policy")])),_:1,__:[9]})]),t[10]||(t[10]=(0,i.Lk)("li",null,"Content Guidelines",-1)),t[11]||(t[11]=(0,i.Lk)("li",null,"DMCA",-1))])]),t[15]||(t[15]=(0,i.Lk)("div",{class:"rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1"},[(0,i.Lk)("div",{class:"font-bold mb-3 text-lg"},"EXPLORE"),(0,i.Lk)("ul",{class:"space-y-2 text-sm text-gray-300"},[(0,i.Lk)("li",null,"Trending Now"),(0,i.Lk)("li",null,"Top Rated"),(0,i.Lk)("li",null,"New Releases"),(0,i.Lk)("li",null,"Genres"),(0,i.Lk)("li",null,"Watchlist"),(0,i.Lk)("li",null,"Gift Cards")])],-1))]),(0,i.Lk)("div",Ls,[t[19]||(t[19]=(0,i.Lk)("div",{class:"flex items-center gap-2"},[(0,i.Lk)("span",null,"© 2025 No.1 OTT. All rights reserved.")],-1)),(0,i.Lk)("div",Cs,[t[18]||(t[18]=(0,i.Lk)("a",{href:"#",class:"hover:underline"},"Sitemap",-1)),(0,i.bF)(l,{to:"/privacy-policy",class:"hover:underline"},{default:(0,i.k6)(()=>t[16]||(t[16]=[(0,i.eW)("Privacy Policy")])),_:1,__:[16]}),(0,i.bF)(l,{to:"/terms-of-service",class:"hover:underline"},{default:(0,i.k6)(()=>t[17]||(t[17]=[(0,i.eW)("Terms of Service")])),_:1,__:[17]})]),t[20]||(t[20]=(0,i.Fv)('<div class="flex items-center gap-3 text-xl" data-v-bf239a26><a href="https://www.facebook.com/profile.php?id=61573190087478" target="_blank" aria-label="Facebook" data-v-bf239a26><i class="fab fa-facebook-f" data-v-bf239a26></i></a><a href="https://www.instagram.com/no1newsteluguofficial/" target="_blank" aria-label="Instagram" data-v-bf239a26><i class="fab fa-instagram" data-v-bf239a26></i></a><a href="https://www.youtube.com/@no1newstelugu5" target="_blank" aria-label="YouTube" data-v-bf239a26><i class="fab fa-youtube" data-v-bf239a26></i></a></div>',1))])])])}var _s={name:"AppFooter"};const Ps=(0,se.A)(_s,[["render",Ss],["__scopeId","data-v-bf239a26"]]);var Es=Ps;const As={class:"mb-8"},Ts={key:0,class:"fixed inset-0 z-50 overflow-y-auto bg-black/90"},Is={class:"min-h-screen px-4 py-6"},Ms={class:"relative max-w-7xl mx-auto"},Vs={class:"flex items-center justify-between mb-6"},Ds={class:"text-2xl font-bold text-white"},Rs={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},js=["onClick"],Xs={class:"aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden relative"},$s=["src","alt"],Fs={class:"absolute top-0 left-0 right-0 flex justify-between items-start p-2 bg-gradient-to-b from-black/70 to-transparent"},Us={class:"flex gap-2"},Os={key:0,class:"badge-premium flex items-center justify-center w-6 h-6 rounded-full backdrop-blur-sm"},Ns={key:1,class:"badge-rental flex items-center text-[10px] font-medium px-2 py-1 rounded backdrop-blur-sm"},Bs={class:"absolute bottom-2 right-2 bg-black/70 px-2 py-0.5 rounded text-xs text-white"},Ws={class:"mt-2"},Qs={class:"text-white text-sm font-medium truncate w-full"},qs={class:"text-gray-400 text-xs"},zs={class:"flex items-center justify-between mb-4 pr-4"},Ks={class:"text-lg font-medium gradient-text"},Hs={class:"flex items-center gap-2"},Js=["onClick"],Ys={class:"relative"},Gs=["onClick"],Zs=["onScroll"],ea=["onClick"],ta={class:"w-[200px] h-[120px] bg-gray-800 rounded-lg overflow-hidden relative"},sa=["src","alt"],aa={class:"absolute top-2 left-2 flex gap-2"},ia={key:0,class:"bg-purple-600 text-white text-xs px-2 py-0.5 rounded"},oa={class:"mt-2 w-[200px]"},ra={class:"text-white text-sm font-medium truncate"},la=["onClick"],na={class:"w-[200px] h-[120px] bg-gray-800 rounded-lg overflow-hidden relative"},ca=["src","alt"],da={class:"absolute top-0 left-0 right-0 flex justify-between items-start p-2 bg-gradient-to-b from-black/70 to-transparent"},ua={class:"flex gap-2"},ha={key:0,class:"badge-premium flex items-center justify-center w-6 h-6 rounded-full backdrop-blur-sm"},pa={key:1,class:"badge-rental flex items-center text-[10px] font-medium px-2 py-1 rounded backdrop-blur-sm"},ma={class:"mt-2 w-[200px]"},ga={class:"text-white text-sm font-medium truncate"},fa=["onClick"];function va(e,t,s,o,r,l){const c=(0,i.g2)("LiveTVPlayer"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("section",As,[o.showViewAllModal?((0,i.uX)(),(0,i.CE)("div",Ts,[(0,i.Lk)("div",Is,[(0,i.Lk)("div",Ms,[(0,i.Lk)("div",Vs,[(0,i.Lk)("h2",Ds,(0,n.v_)(o.selectedCategory?.name),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.closeViewAllModal&&l.closeViewAllModal(...e)),class:"text-white hover:text-gray-300"},t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-times text-xl"},null,-1)]))]),(0,i.Lk)("div",Rs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categoryVideos[o.selectedCategory?.id]?.data,s=>((0,i.uX)(),(0,i.CE)("div",{key:s.id,class:"cursor-pointer group",onClick:e=>l.playVideo(s)},[(0,i.Lk)("div",Xs,[(0,i.Lk)("img",{src:s.portrait_thumbnail_url||s.thumbnail_url,alt:s.title,class:"w-full h-full object-cover"},null,8,$s),(0,i.Lk)("div",Fs,[(0,i.Lk)("div",Us,[s.is_premium?((0,i.uX)(),(0,i.CE)("span",Os,t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-crown text-yellow-400"},null,-1)]))):(0,i.Q3)("",!0),"rental"===s.video_type?((0,i.uX)(),(0,i.CE)("span",Ns,t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-ticket mr-1"},null,-1),(0,i.eW)(" RENTAL ")]))):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Bs,(0,n.v_)(e.formatDuration(s.duration)),1),t[4]||(t[4]=(0,i.Lk)("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50"},[(0,i.Lk)("div",{class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"},[(0,i.Lk)("i",{class:"fas fa-play text-white"})])],-1))]),(0,i.Lk)("div",Ws,[(0,i.Lk)("h4",Qs,(0,n.v_)(s.title),1),(0,i.Lk)("p",qs,(0,n.v_)(l.formatViews(s.views_count))+" Views",1)])],8,js))),128))])])])])):(0,i.Q3)("",!0),(0,i.bF)(c,{"is-open":o.isPlayerOpen,"video-url":o.selectedVideoUrl,"video-title":o.selectedVideoTitle,"is-direct-video":!1,onClose:l.closePlayer},null,8,["is-open","video-url","video-title","onClose"]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categories,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"mb-8"},[(0,i.Lk)("div",zs,[(0,i.Lk)("h2",Ks,(0,n.v_)(e.name),1),(0,i.Lk)("div",Hs,[(0,i.bF)(d,{to:{name:"CategoryVideos",params:{id:e.id}},class:"text-white font-semibold text-sm hover:underline whitespace-nowrap"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)(" View All ")])),_:2,__:[5]},1032,["to"]),o.categoryVideos[e.id]?.pagination?.has_next?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>l.loadMoreVideos(e.id),class:"text-sm text-blue-500 hover:text-blue-400"}," View More ",8,Js)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Ys,[(0,i.bo)((0,i.Lk)("button",{onClick:t=>l.scroll("left",e.id),class:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),8,Gs),[[a.aG,o.scrollStates[e.id]?.canScrollLeft]]),(0,i.Lk)("div",{ref_for:!0,ref:t=>o.setContainerRef(t,e.id),class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-smooth",onScroll:t=>l.checkScroll(e.id)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categoryLiveStreams[e.id]||[],e=>((0,i.uX)(),(0,i.CE)("div",{key:"live-"+e.id,class:"flex-shrink-0 relative group cursor-pointer",onClick:t=>l.playLiveStream(e)},[(0,i.Lk)("div",ta,[(0,i.Lk)("img",{src:e.thumbnail||"https://via.placeholder.com/200x120",alt:e.title,class:"w-full h-full object-cover"},null,8,sa),(0,i.Lk)("div",aa,[t[7]||(t[7]=(0,i.Lk)("span",{class:"bg-red-600 text-white text-xs px-2 py-0.5 rounded animate-pulse"}," LIVE ",-1)),e.is_premium?((0,i.uX)(),(0,i.CE)("span",ia," PREMIUM ")):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",oa,[(0,i.Lk)("h4",ra,(0,n.v_)(e.title),1)])],8,ea))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categoryVideos[e.id]?.data||[],e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex-shrink-0 relative group cursor-pointer",onClick:t=>l.playVideo(e)},[(0,i.Lk)("div",na,[(0,i.Lk)("img",{src:e.thumbnail_url||"https://via.placeholder.com/200x120",alt:e.title,class:"w-full h-full object-cover"},null,8,ca),(0,i.Lk)("div",da,[(0,i.Lk)("div",ua,[e.is_premium?((0,i.uX)(),(0,i.CE)("span",ha,t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-crown text-yellow-400"},null,-1)]))):(0,i.Q3)("",!0),"rental"===e.video_type?((0,i.uX)(),(0,i.CE)("span",pa,t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-ticket mr-1"},null,-1),(0,i.eW)(" RENTAL ")]))):(0,i.Q3)("",!0)])]),t[10]||(t[10]=(0,i.Lk)("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50"},[(0,i.Lk)("div",{class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"},[(0,i.Lk)("i",{class:"fas fa-play text-white"})])],-1))]),(0,i.Lk)("div",ma,[(0,i.Lk)("h4",ga,(0,n.v_)(e.title),1)])],8,la))),128))],40,Zs),(0,i.bo)((0,i.Lk)("button",{onClick:t=>l.scroll("right",e.id),class:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70"},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,fa),[[a.aG,o.scrollStates[e.id]?.canScrollRight]])])]))),128))])}const ya="https://ott.no1news.in";var ba={name:"CategorySection",components:{LiveTVPlayer:gt},props:{title:{type:String,default:"Categories"}},setup(){const e=(0,ee.KR)([]),t=(0,ee.Kh)({}),s=(0,ee.Kh)({}),a=(0,ee.Kh)({}),i=(0,ee.Kh)({}),o=(0,ee.KR)(!1),r=(0,ee.KR)(""),l=(0,ee.KR)(""),n=(0,ee.KR)(null),c=(0,ee.KR)(!1),d=(0,ee.KR)(null),u=(e,t)=>{e&&(i[t]=e)};return{categories:e,categoryVideos:t,categoryLiveStreams:s,scrollStates:a,containerRefs:i,setContainerRef:u,isPlayerOpen:o,selectedVideoUrl:r,selectedVideoTitle:l,pollingInterval:n,showViewAllModal:c,selectedCategory:d}},mounted(){this.fetchCategories(),this.startPolling()},beforeUnmount(){this.stopPolling()},methods:{startPolling(){this.pollingInterval=setInterval(()=>{this.categories.length>0&&this.categories.forEach(e=>{this.fetchLiveStreams(e.id)})},5e3)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async fetchCategories(){try{const e=await S.A.get(`${ya}/api/frontend/categories/`);"success"===e.data.status&&(this.categories=e.data.data,this.categories.forEach(e=>{this.scrollStates[e.id]={canScrollLeft:!1,canScrollRight:!0},this.fetchCategoryVideos(e.id),this.fetchLiveStreams(e.id)}))}catch(e){console.error("Error fetching categories:",e)}},capitalizeText(e){return e?e.split(/[\s-]+/).map(e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):""},async fetchCategoryVideos(e,t=1){try{const s=await S.A.get(`${ya}/api/videos/category/${e}/?page=${t}&page_size=10`);if("success"===s.data.status){console.log("API Response Videos:",s.data.data.map(e=>({id:e.id,video_url:e.video_url,promo_url:e.promo_video_url,hls_url:e.promo_hls_url})));const a=s.data.data.map(e=>({...e,title:this.capitalizeText(e.title),description:this.capitalizeText(e.description),is_live:!1}));this.categoryVideos[e]=1===t?{...s.data,data:a}:{...s.data,data:[...this.categoryVideos[e]?.data||[],...a]}}}catch(s){console.error(`Error fetching videos for category ${e}:`,s)}},async fetchLiveStreams(e){try{const t=await S.A.get(`${ya}/api/live-streams/by_category/?category_id=${e}`),s=t.data.map(e=>({...e,title:this.capitalizeText(e.title),description:this.capitalizeText(e.description),is_live:!0}));this.categoryLiveStreams[e]=s.sort((e,t)=>e.order-t.order)}catch(t){console.error(`Error fetching live streams for category ${e}:`,t)}},async loadMoreVideos(e){const t=this.categoryVideos[e]?.pagination?.current_page||1;this.categoryVideos[e]?.pagination?.has_next&&await this.fetchCategoryVideos(e,t+1)},scroll(e,t){const s=this.containerRefs[t];if(!s)return;const a=300;"left"===e?s.scrollLeft-=a:s.scrollLeft+=a},checkScroll(e){const t=this.containerRefs[e];t&&(this.scrollStates[e]={canScrollLeft:t.scrollLeft>0,canScrollRight:t.scrollLeft<t.scrollWidth-t.clientWidth})},playVideo(e){if(!e.live_url){console.log("Playing video with URL:",{id:e.id,video_url:e.video_url,is_hls:e.video_url?.includes(".m3u8")});const t=e.video_url;if(!t||!t.includes(".m3u8"))return void console.error("Invalid or missing HLS URL:",e);this.$router.push({name:"MovieDetails",params:{id:e.id,videoUrl:t,videoType:"hls"}})}},playLiveStream(e){e.live_url&&(this.selectedVideoUrl=e.live_url,this.selectedVideoTitle=e.title,this.isPlayerOpen=!0)},closePlayer(){this.isPlayerOpen=!1,this.selectedVideoUrl="",this.selectedVideoTitle=""},isNewVideo(e){const t=new Date(e),s=new Date,a=Math.ceil((s-t)/864e5);return a<=7},formatViews(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()},showAllVideos(e){this.selectedCategory=e,this.showViewAllModal=!0,this.fetchCategoryVideos(e.id,1,100)},closeViewAllModal(){this.showViewAllModal=!1,this.selectedCategory=null}}};const ka=(0,se.A)(ba,[["render",va],["__scopeId","data-v-3358d1e3"]]);var wa=ka;const xa={key:0,class:"flex justify-center items-center h-[184px]"},La={key:1,class:"flex justify-center items-center h-[184px]"},Ca={class:"text-center"},Sa={class:"text-red-500"},_a={key:2,class:"relative group"},Pa={class:"overflow-x-auto hide-scrollbar"},Ea={class:"flex gap-3 px-2"},Aa=["onClick"],Ta={class:"aspect-[184/201] relative"},Ia=["src","alt"],Ma={class:"absolute bottom-0 left-0 right-0 p-3 transform translate-y-2 group-hover/card:translate-y-0 transition-transform"},Va={class:"text-white font-semibold text-base mb-1 drop-shadow-lg line-clamp-1"},Da={class:"flex items-center text-gray-300 text-xs space-x-2 opacity-0 group-hover/card:opacity-100 transition-opacity"};function Ra(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("section",null,[t[5]||(t[5]=(0,i.Fv)('<div class="flex items-center justify-between mb-4 px-2" data-v-72f3183c><div class="flex items-center gap-3" data-v-72f3183c><h2 class="text-lg font-medium" data-v-72f3183c>Regional Content (Comming Soon)</h2></div><button class="text-white hover:text-purple-400 flex items-center space-x-2 text-sm" data-v-72f3183c><span data-v-72f3183c>View All</span><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-72f3183c><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" data-v-72f3183c></path></svg></button></div>',1)),o.loading?((0,i.uX)(),(0,i.CE)("div",xa,t[0]||(t[0]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"},null,-1)]))):(0,i.Q3)("",!0),o.error?((0,i.uX)(),(0,i.CE)("div",La,[(0,i.Lk)("div",Ca,[t[1]||(t[1]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),(0,i.Lk)("p",Sa,(0,n.v_)(o.error),1)])])):(0,i.Q3)("",!0),o.loading||o.error?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",_a,[(0,i.Lk)("div",Pa,[(0,i.Lk)("div",Ea,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.states,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"group/card flex-shrink-0 w-[184px] relative rounded-lg overflow-hidden cursor-pointer",onClick:t=>r.goToRegionalPage(e)},[(0,i.Lk)("div",Ta,[(0,i.Lk)("img",{src:e.image||"https://via.placeholder.com/184x201?text=State",alt:e.name,class:"w-full h-full object-cover transition-transform duration-300 group-hover/card:scale-110"},null,8,Ia),t[3]||(t[3]=(0,i.Lk)("div",{class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-80 group-hover/card:opacity-70 transition-opacity"},null,-1)),(0,i.Lk)("div",Ma,[(0,i.Lk)("h3",Va,(0,n.v_)(e.name),1),(0,i.Lk)("div",Da,[t[2]||(t[2]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),(0,i.Lk)("span",null,(0,n.v_)(e.districts_count)+" Districts",1)])])])],8,Aa))),128))])]),t[4]||(t[4]=(0,i.Lk)("div",{class:"absolute top-0 right-0 bottom-0 w-24 bg-gradient-to-l from-black to-transparent pointer-events-none"},null,-1))]))])}var ja={name:"StatesSection",data(){return{states:[],loading:!0,error:null}},methods:{goToRegionalPage(e){this.$router.push({path:"/regional",query:{state_id:e.id}})}},async created(){try{const e=await S.A.get("https://ott.no1news.in/api/frontend/states/");"success"===e.data.status?this.states=e.data.data:this.error=e.data.message||"Failed to load states"}catch(e){console.error("Error fetching states:",e),this.error="Error loading states. Please try again later."}finally{this.loading=!1}}};const Xa=(0,se.A)(ja,[["render",Ra],["__scopeId","data-v-72f3183c"]]);var $a=Xa;const Fa={class:"mb-8"},Ua={class:"flex items-center justify-between mb-4"},Oa={class:"text-lg font-medium gradient-text"},Na={class:"relative"},Ba=["onClick","onKeydown"],Wa={class:"w-[256px] aspect-[16/9] bg-gray-800 rounded-lg overflow-hidden relative category-inner"},Qa=["src","alt"],qa={class:"absolute top-2 left-2 flex gap-2"},za={key:0,class:"flex items-center justify-center w-6 h-6 rounded-full backdrop-blur-sm",style:{background:"rgba(195, 0, 89, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)"}},Ka={class:"absolute inset-0 bg-gradient-to-t from-black via-black/75 to-transparent transition-opacity flex items-end justify-center pb-4 opacity-0 group-hover:opacity-100"},Ha={class:"text-center w-full px-4 py-2"},Ja={class:"text-white text-lg font-bold mb-1 drop-shadow-lg capitalize"},Ya={class:"text-white/80 text-xs font-medium drop-shadow-lg line-clamp-2"},Ga={class:"mt-2 text-center"},Za={class:"text-white text-sm font-medium truncate px-2 transition-colors duration-200"};function ei(e,t,s,o,r,l){const c=(0,i.gN)("spatial-nav");return(0,i.uX)(),(0,i.CE)("section",Fa,[(0,i.Lk)("div",Ua,[(0,i.Lk)("h2",Oa,(0,n.v_)(s.title),1)]),(0,i.Lk)("div",Na,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",{onClick:t[0]||(t[0]=e=>o.scroll("left")),class:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70 nav-button",tabindex:"0"},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]))),[[a.aG,o.canScrollLeft],[c]]),(0,i.Lk)("div",{ref:"containerRef",class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-smooth",onScroll:t[2]||(t[2]=(...e)=>o.checkScroll&&o.checkScroll(...e))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categories,e=>(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex-shrink-0 relative group cursor-pointer category-card",onClick:t=>o.selectCategory(e),onKeydown:(0,a.jR)(t=>o.selectCategory(e),["enter"]),tabindex:"0"},[(0,i.Lk)("div",Wa,[(0,i.Lk)("img",{src:e.image||"/images/placeholder.png",alt:e.name,class:"w-full h-full object-cover transition-transform duration-300",onError:t[1]||(t[1]=(...e)=>o.handleImageError&&o.handleImageError(...e))},null,40,Qa),(0,i.Lk)("div",qa,[e.is_premium?((0,i.uX)(),(0,i.CE)("span",za,t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-crown text-yellow-400"},null,-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ka,[(0,i.Lk)("div",Ha,[(0,i.Lk)("h3",Ja,(0,n.v_)(e.name),1),(0,i.Lk)("p",Ya,(0,n.v_)(e.description),1)])])]),(0,i.Lk)("div",Ga,[(0,i.Lk)("h3",Za,(0,n.v_)(e.name),1)])],40,Ba)),[[c]])),128))],544),(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",{onClick:t[3]||(t[3]=e=>o.scroll("right")),class:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70 nav-button",tabindex:"0"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))),[[a.aG,o.canScrollRight],[c]])])])}const ti="https://ott.no1news.in",si="/images/placeholder.png";var ai={name:"AllCategoriesSection",props:{title:{type:String,default:"Browse By Categories"}},setup(){const e=(0,T.rd)(),t=(0,ee.KR)([]),s=(0,ee.KR)(null),a=(0,ee.KR)(!1),o=(0,ee.KR)(!0),r=e=>{e.target.src=si,e.target.removeEventListener("error",r)},l=e=>e?e.split(/[\s-]+/).map(e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):"",n=async()=>{try{const e=await S.A.get("/api/categories/active/");t.value=e.data.filter(e=>![19].includes(e.id)).map(e=>({...e,name:l(e.name),description:l(e.description),image:e.image?e.image.startsWith("http")?e.image:`${ti}${e.image}`:si}))}catch(e){console.error("Error fetching categories:",e),t.value=[]}},c=e=>{if(!s.value)return;const t=300;s.value.scrollLeft+="left"===e?-t:t},d=()=>{s.value&&(a.value=s.value.scrollLeft>0,o.value=s.value.scrollLeft<s.value.scrollWidth-s.value.clientWidth)},u=t=>{e.push({name:"CategoryVideos",params:{id:t.id}})};return(0,i.sV)(()=>{n()}),{categories:t,containerRef:s,canScrollLeft:a,canScrollRight:o,scroll:c,checkScroll:d,selectCategory:u,handleImageError:r}}};const ii=(0,se.A)(ai,[["render",ei],["__scopeId","data-v-12f5dbbe"]]);var oi=ii,ri={name:"HomePage",components:{AppHeader:bt,HeroSection:Wt,MovieSection:gs,AppFooter:Es,CategorySection:wa,StatesSection:$a,AllCategoriesSection:oi},data(){return{isSearchActive:!1,recentlyAdded:[],canScrollLeft:!1,canScrollRight:!0,dataLoaded:!1}},computed:{freeVideos(){return this.recentlyAdded.filter(e=>"free"===e.video_type)},paidVideos(){return this.recentlyAdded.filter(e=>"paid"===e.video_type)},rentalVideos(){return this.recentlyAdded.filter(e=>"rental"===e.video_type)}},created(){const e=this.$store.state.homePageData;e&&e.recentlyAdded?(this.recentlyAdded=e.recentlyAdded,this.dataLoaded=!0):this.fetchRecentlyAdded()},mounted(){this.checkScrollButtons(),this.$refs.scrollContainer?.addEventListener("scroll",this.checkScrollButtons),this.ensureHomeScrollability()},beforeUnmount(){this.$refs.scrollContainer?.removeEventListener("scroll",this.checkScrollButtons)},methods:{capitalizeText(e){return e?e.split(/[\s-]+/).map(e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):""},async fetchRecentlyAdded(){if(!this.dataLoaded)try{const e=await S.A.get("https://ott.no1news.in/api/videos/?limit=15&ordering=-created_at");if(e.data){const t=e.data.map(e=>({id:e.id,title:this.capitalizeText(e.title),image:e.thumbnail_url,portraitImage:e.portrait_thumbnail_url,isNewEpisode:this.isNewVideo(e.created_at),is4K:e.is_4k||!1,isPremium:e.is_premium||!1,video_type:e.video_type||"free",description:this.capitalizeText(e.description),created_at:e.created_at}));t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),this.recentlyAdded=t,this.dataLoaded=!0,this.$store.commit("setHomePageData",{recentlyAdded:t,timestamp:Date.now()})}}catch(e){console.error("Error fetching recently added videos:",e)}},isNewVideo(e){const t=new Date(e),s=new Date,a=Math.ceil((s-t)/864e5);return a<=7},toggleSearch(){this.isSearchActive=!this.isSearchActive},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},scrollContent(e){const t=this.$refs.scrollContainer;if(!t)return;const s=.8*t.clientWidth;t.scrollBy({left:"left"===e?-s:s,behavior:"smooth"})},checkScrollButtons(){const e=this.$refs.scrollContainer;e&&(this.canScrollLeft=e.scrollLeft>0,this.canScrollRight=e.scrollLeft<e.scrollWidth-e.clientWidth)},ensureHomeScrollability(){console.log("🏠 Ensuring home page scrollability..."),document.body.style.overflow="auto",document.body.style.position="static",document.body.style.height="auto",document.body.style.width="auto",document.body.style.transform="none",document.body.style.willChange="auto",document.body.style.touchAction="auto",document.body.style.pointerEvents="auto",document.body.classList.remove("vjs-fullscreen","video-playing","no-scroll","force-scrollable"),document.documentElement.classList.remove("vjs-fullscreen","video-playing","no-scroll"),document.body.offsetHeight,window.scrollTo(0,1),window.scrollTo(0,0),console.log("✅ Home page scrollability ensured")}},activated(){const e=this.$store.state.homePageData;(!e||!e.timestamp||Date.now()-e.timestamp>3e5)&&(this.dataLoaded=!1,this.fetchRecentlyAdded()),this.$nextTick(()=>{this.ensureHomeScrollability()})}};const li=(0,se.A)(ri,[["render",he],["__scopeId","data-v-453731fa"]]);var ni=li,ci="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAllBMVEX/aCAEajj/////YwgAZS0HA40AAIsAAIgAAIMAAIYAAH8AAIEAAHv19foEAI0AAHrY2Or7+/7q6vTT0+dVVKfy8fnh4e5sa7C+vttiYaxmZa6DgrzIyODDw96wr9OlpNB6ebdbWqlPTqQ/Pp1xcLO2ttaRkMNFRJ8hH5SXlsUUEpCgn8s0MpqJib8SDpOpqdAsKphOTKgOf8qvAAAFUklEQVR4nO2ba1fqOBSGnczQpOmFXugFGqAgFQEF/f9/bnYKnuNy64fzJXHG91nLLNLqWuFxd++kae/uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP6Qv8FH7gT4CJxwvoOTpBweumbRdA9DmfgejPgGTrKHpzCUUgZBQG0YPj1kvofk10m+flQySCe/SQOpHk+511F5dfIgZTpqCCZSKSUnwSgolfLBpxWPTobAGpnI8Ol5r1dVXa30/vkplDZaZDD4G5g3J8lMkRFKIocqEclSiFKIJX2qDpRayIqaeUu3vpxkKcVDoJqNzIUZj6zG1ohcbhpFVmTqK9l6cjLYIJH35dhpx4hY2yZpxyPlvbSh4un68eNkRUrSYCGKyvaKMUT68URh26oQC0q2qVp5GZ0XJzZKgiDqbsEh5rZ5/fXJHu0iyiqeIsWHk9IqeUxsSNRjJGzsxXOmn2Rju6uamiJ5tFJKD+Pz4CQJrJL62mmsjoMNh5B+hoM931xP1VZK4KH6eHCypa+aJrc6U8+oMdTkiqZpM1uCZlddg0hSkrd1P0D3TlYhFeGIkms3djdUaRKdi0pXItcUFe14/dizVUQlOXSfZ507yWnyKhfWR761E/gionYyiEIXYpjQ0aj4da5bSJrSOp/mO3fyTKua/fVjcrZff7GgrDITdVyLWXPtiuJcXX9lTyuhZ9dDdO0kCVMqJsW1U4c0VS2mS7HWeanLXK/FckrnsvCWgQsqUWnoOs26dnKgMNmJYn390mVMC51GilK3RptWl0JSqCzjawUu1oXYUaAcHI/RtZMzlRJbay+7MVba6YUySiPUfBkt50o0lE0u03GCX+wu1DZUpM6Ox+jYSamokqT2U/W6sFZO02cSUd4fKU6O9yXpeZ6e6HjR7MeUklKVcj1xc+ykkxP5dhdtiBqy0ummimaDynQWDbOo2unOxkh0m9XnJ/qLzu0gHTs5pu9qa7KZ0hW00H0bZ8qERmVx22taGe6mm1951Sblo9tBunVSKSrEiVne6o5ow2hX9fHQd505mq7rh5j6Udi+/f7SJFSOVeV0lG6dmHCsIslqvjlcty2aSLVDnL2U/WtfvmTxsFTRwkZSXp7m80s1VqrQOB2lWycXqsTjDJW0bPW5WZei3MZ99nSSMpDy9JT18ZaOXXZHvV+N0hJaHsmL01G6dUIpdqLf/unJMNNa7duseznZ226TVJ1e+qzdK623w1tCMXriOsm6dWJnYO9vE+XD/KhUV8rrFk8qy05F5/nwfokzjLM8l7h1sgl+z9TzqqhLY5aZMb287XjJ3hjqG1MX1ZsXKjzBxuko3TqZkZOiXK2716NUkY61jujyOd4HNyfB62M4HotjrcLJ/e60MjU5mTkdpfc4MSxOlsaUPyhOkE84n9ad+mfXnS/nJ+sv5yf5/31+gnksB+udT6B1cfj1urj+Yl386HaQuH/CwX02zje6H2t+6P1Y3Lf/BOzvfAL2ATnjfvH83X6x+rBfrN7tF89/xn6xWKk/eq7Aw/NbeP6Eg+eUOHiejYPnHjl4PpaD56g5eN6eg/cyOHh/h/Nd3/PyOSy8D8jBe6Mc704E3i/+LwAnnLt/wEfu/gIfgRMOnHDghAMnHDjhwAkHTjhwwoETDpxw4IQDJxw44cAJB044cMKBEw6ccOCEAyccOOHACQdOOHDCgRMOnHDghAMnHDjhwAkHTjhwwoETDpxw4IQDJxw44cAJB044cMKBEw6ccOCEAyccOOHACQdOOHDCgRMOnHDghAMnHDjhwAkHTjhwwoETDpxw4ITzL675QprvfCfbAAAAAElFTkSuQmCC";const di={class:"min-h-screen bg-[#121212] flex items-center justify-center px-4"},ui={class:"w-full max-w-md"},hi={class:"space-y-6"},pi={key:0},mi={key:0,class:"pr-4 text-[#4CAF50]"},gi={key:0,class:"mt-2 text-[#ff4d4d] text-sm flex items-center"},fi={key:1,class:"space-y-4"},vi={class:"text-center"},yi={class:"text-white/60 text-sm"},bi={class:"flex flex-col items-center"},ki={class:"flex justify-center space-x-4 my-8"},wi=["onUpdate:modelValue","onInput","onKeydown","id"],xi={key:0,class:"mt-2 text-[#ff4d4d] text-sm flex items-center"},Li={class:"text-center"},Ci={class:"text-white/60 text-sm"},Si=["disabled"],_i=["disabled"],Pi={key:0},Ei={key:1,class:"flex items-center justify-center"},Ai={key:2,class:"mt-6"},Ti={class:"flex items-start space-x-3 bg-[#1d1d1d] p-4 rounded-lg border border-white/10"},Ii={class:"flex-shrink-0 mt-1"},Mi={class:"flex-grow"},Vi={for:"terms-consent",class:"block text-white/80 text-sm leading-relaxed cursor-pointer"},Di={key:0,class:"mt-2 text-[#ff4d4d] text-sm flex items-center"};function Ri(e,t,s,o,r,l){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",di,[r.showOTP?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>l.handleBack&&l.handleBack(...e)),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)]))):((0,i.uX)(),(0,i.Wv)(c,{key:0,to:"/",class:"absolute top-6 left-6 text-white/70 hover:text-white"},{default:(0,i.k6)(()=>t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),_:1,__:[10]})),(0,i.Lk)("div",ui,[t[24]||(t[24]=(0,i.Lk)("div",{class:"text-center mb-12"},[(0,i.Lk)("img",{src:Re,alt:"Logo",class:"h-12 mx-auto mb-8"}),(0,i.Lk)("h1",{class:"text-[2.5rem] font-bold text-white leading-tight"},[(0,i.eW)(" LET'S GET STARTED"),(0,i.Lk)("span",{class:"text-[#c30059]"},".")])],-1)),(0,i.Lk)("div",hi,[r.showOTP?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",pi,[t[15]||(t[15]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},"Mobile Number",-1)),(0,i.Lk)("div",{class:(0,n.C4)(["flex items-center bg-[#1d1d1d] rounded-lg overflow-hidden",l.phoneInputStyle])},[t[13]||(t[13]=(0,i.Lk)("div",{class:"flex items-center px-3 border-r border-white/10 h-14"},[(0,i.Lk)("img",{src:ci,alt:"India",class:"w-6 h-4"}),(0,i.Lk)("span",{class:"text-white ml-2"},"+91")],-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=e=>r.phoneNumber=e),class:(0,n.C4)(["flex-1 bg-transparent text-white h-14 px-4 focus:outline-none",{"shake-animation":r.showPhoneError,"text-[#4CAF50]":10===r.phoneNumber.length&&!r.phoneError}]),placeholder:"Enter your mobile number",maxlength:"10",onInput:t[2]||(t[2]=(...e)=>l.handlePhoneInput&&l.handlePhoneInput(...e))},null,34),[[a.Jo,r.phoneNumber]]),10!==r.phoneNumber.length||r.phoneError?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",mi,t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1)])))],2),(0,i.bF)(a.eB,{name:"fade"},{default:(0,i.k6)(()=>[r.phoneError?((0,i.uX)(),(0,i.CE)("p",gi,[t[14]||(t[14]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,i.eW)(" "+(0,n.v_)(r.phoneError),1)])):(0,i.Q3)("",!0)]),_:1})])),r.showOTP?((0,i.uX)(),(0,i.CE)("div",fi,[(0,i.Lk)("div",vi,[t[16]||(t[16]=(0,i.Lk)("h2",{class:"text-white text-xl font-medium mb-2"},"Enter Verification Code",-1)),(0,i.Lk)("p",yi,[(0,i.eW)(" We've sent a 4-digit code to +91 "+(0,n.v_)(r.phoneNumber)+" ",1),(0,i.Lk)("button",{onClick:t[3]||(t[3]=e=>r.showOTP=!1),class:"text-[#c30059] ml-2 hover:text-[#ff4d4d]"}," Change ")])]),(0,i.Lk)("div",bi,[(0,i.Lk)("div",ki,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,(e,s)=>(0,i.bo)((0,i.Lk)("input",{key:s,type:"text","onUpdate:modelValue":e=>r.otpDigits[s]=e,onInput:e=>l.handleOtpInput(e,s),onKeydown:e=>l.handleKeydown(e,s),onPaste:t[4]||(t[4]=(...e)=>l.handlePaste&&l.handlePaste(...e)),maxlength:"1",inputmode:"numeric",autocomplete:"one-time-code",id:0===s?"otp-input":"",class:(0,n.C4)(["w-14 h-14 bg-[#1d1d1d] border rounded-lg text-center text-white text-2xl font-medium focus:outline-none transition-all",r.otpError?"border-[#ff4d4d] shake-animation":"border-white/10 focus:border-[#c30059]"]),ref_for:!0,ref:"otpInput"+s},null,42,wi),[[a.Jo,r.otpDigits[s]]])),64))]),(0,i.bF)(a.eB,{name:"fade"},{default:(0,i.k6)(()=>[r.otpError?((0,i.uX)(),(0,i.CE)("p",xi,[t[17]||(t[17]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,i.eW)(" "+(0,n.v_)(r.otpError),1)])):(0,i.Q3)("",!0)]),_:1})]),(0,i.Lk)("div",Li,[(0,i.Lk)("p",Ci,[t[18]||(t[18]=(0,i.eW)(" Didn't receive the code? ")),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.resendOTP&&l.resendOTP(...e)),disabled:r.resendTimer>0,class:"text-[#c30059] ml-1 hover:text-[#ff4d4d] disabled:opacity-50"},(0,n.v_)(r.resendTimer>0?`Resend in ${r.resendTimer}s`:"Resend"),9,Si)])])])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.handleLogin&&l.handleLogin(...e)),disabled:r.isLoading,class:"w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white py-4 rounded-lg font-medium text-lg hover:opacity-90 transition-opacity disabled:opacity-50 relative"},[r.isLoading?((0,i.uX)(),(0,i.CE)("span",Ei,t[19]||(t[19]=[(0,i.Lk)("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,i.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),(0,i.eW)(" Verifying... ")]))):((0,i.uX)(),(0,i.CE)("span",Pi,(0,n.v_)(r.showOTP?"Verify":"Proceed"),1))],8,_i),r.showOTP?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ai,[(0,i.Lk)("div",Ti,[(0,i.Lk)("div",Ii,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"terms-consent","onUpdate:modelValue":t[7]||(t[7]=e=>r.termsAccepted=e),class:"w-4 h-4 rounded border-white/30 bg-transparent checked:bg-[#c30059] checked:border-[#c30059] focus:ring-[#c30059] focus:ring-offset-0 focus:ring-offset-transparent transition-all cursor-pointer"},null,512),[[a.lH,r.termsAccepted]])]),(0,i.Lk)("div",Mi,[(0,i.Lk)("label",Vi,[t[20]||(t[20]=(0,i.eW)(" I agree to the ")),(0,i.Lk)("a",{onClick:t[8]||(t[8]=(0,a.D$)(e=>r.showTermsModal=!0,["prevent"])),href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2 font-medium transition-colors"}," Terms & Conditions "),t[21]||(t[21]=(0,i.eW)(" and ")),(0,i.Lk)("a",{onClick:t[9]||(t[9]=(0,a.D$)(e=>r.showPrivacyModal=!0,["prevent"])),href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2 font-medium transition-colors"}," Privacy Policy ")]),t[22]||(t[22]=(0,i.Lk)("p",{class:"mt-1 text-white/50 text-xs"}," Your privacy matters to us. Read how we handle your data. ",-1))])]),r.showTermsError?((0,i.uX)(),(0,i.CE)("p",Di,t[23]||(t[23]=[(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1),(0,i.eW)(" Please accept the terms to continue ")]))):(0,i.Q3)("",!0)]))])])])}s(1148);var ji={name:"LoginPage",data(){return{phoneNumber:"",phoneError:"",showPhoneError:!1,showCookieNotice:!0,showOTP:!1,otpDigits:["","","",""],resendTimer:0,timerInterval:null,termsAccepted:!1,showTermsError:!1,showTermsModal:!1,showPrivacyModal:!1,isLoading:!1,apiBaseUrl:"https://ott.no1news.in",referralCode:"",otpError:"",smsReceiver:null}},methods:{getCSRFToken(){const e="csrftoken";let t=null;if(document.cookie&&""!==document.cookie){const s=document.cookie.split(";");for(let a=0;a<s.length;a++){const i=s[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t},validatePhoneNumber(){let e=this.phoneNumber.replace(/\D/g,"");return 12===e.length&&e.startsWith("91")&&(e=e.substring(2)),this.phoneNumber=e,0===e.length?(this.phoneError="",!1):10!==e.length?(this.phoneError=e.length>0?"Please enter a valid 10-digit mobile number":"",!1):/^[6-9]\d{9}$/.test(e)?(this.phoneError="",!0):(this.phoneError="Please enter a valid Indian mobile number",!1)},clearLoginPageData(){console.log("Clearing login page data");const e=["registrationSuccess","registrationMessage","loginSuccess","loginMessage","hasCompletedRegistration","app_version"];e.forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),localStorage.removeItem("pending_payment"),sessionStorage.removeItem("pending_payment"),console.log("Login page data cleared")},handlePhoneInput(e){let t=e.target.value.replace(/\D/g,"");12===t.length&&t.startsWith("91")&&(t=t.substring(2)),t.length>10&&(t=t.substring(0,10)),this.phoneNumber=t,this.validatePhoneNumber()},async handleLogin(){if(this.showOTP){const s=this.otpDigits.join("");if(4===s.length)try{this.isLoading=!0,this.otpError="";const t=await fetch(`${this.apiBaseUrl}/users/users/login/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.getCSRFToken()},credentials:"include",mode:"cors",body:JSON.stringify({phone:this.phoneNumber,otp:s,ref:this.referralCode})});if(!t.ok){const s=await t.text();let a;try{const e=JSON.parse(s);a=e.message||"Invalid OTP"}catch(e){a="Invalid OTP. Please try again."}throw new Error(a)}const a=await t.json();localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("csrfToken",a.csrf_token),localStorage.setItem("phone",this.phoneNumber),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("token",a.csrf_token);const i=a.user;if(i.first_name&&i.last_name&&i.state&&i.district){localStorage.setItem("hasCompletedRegistration","true");const e=i.first_name||"User";localStorage.setItem("loginSuccess","true"),localStorage.setItem("loginMessage",`Welcome back, ${e}! 👋`);const t=this.$route.query.redirect||"/";await this.$router.push(t)}else localStorage.setItem("hasCompletedRegistration","false"),await this.$router.push("/mini-register")}catch(t){console.error("Login Error:",t),this.otpError=t.message;const e=Array.from({length:4},(e,t)=>this.$refs["otpInput"+t][0]);e.forEach(e=>{e.classList.add("shake-animation"),setTimeout(()=>e.classList.remove("shake-animation"),650)}),this.otpDigits=["","","",""],this.$refs.otpInput0[0].focus()}finally{this.isLoading=!1}}else{if(this.phoneError="",this.showTermsError=!1,!this.validatePhoneNumber()){this.showPhoneError=!0;const e=document.querySelector('input[type="tel"]');return e.classList.add("shake-animation"),void setTimeout(()=>{this.showPhoneError=!1,e.classList.remove("shake-animation")},650)}if(!this.termsAccepted){this.showTermsError=!0;const e=document.querySelector("#terms-consent").parentElement.parentElement;return e.classList.add("shake-animation"),void setTimeout(()=>{e.classList.remove("shake-animation")},650)}try{this.isLoading=!0;const t=await fetch(`${this.apiBaseUrl}/users/request-otp/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.getCSRFToken()},credentials:"include",mode:"cors",body:JSON.stringify({phone:this.phoneNumber,otp_type:"login"})});if(!t.ok){const s=await t.text();let a;try{const e=JSON.parse(s);a=e.message||"Failed to send OTP"}catch(e){a="Server error. Please try again."}throw new Error(a)}await t.json(),this.showOTP=!0,this.startOTPDetection(),this.startResendTimer(),this.$nextTick(()=>{const e=this.$refs.otpInput0[0];e.focus(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&e.click()})}catch(t){console.error("Error requesting OTP:",t),this.phoneError=t.message||"Network error. Please check your connection.",this.showPhoneError=!0}finally{this.isLoading=!1}}},async resendOTP(){if(!(this.resendTimer>0))try{this.isLoading=!0,await fetch(`${this.apiBaseUrl}/users/request-otp/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.getCSRFToken()},credentials:"include",mode:"cors",body:JSON.stringify({phone:this.phoneNumber,otp_type:"login"})}),this.startResendTimer(),this.otpDigits=["","","",""],this.otpError="",this.$refs.otpInput0[0].focus()}catch(e){console.error("Error resending OTP:",e),this.otpError="Failed to resend OTP. Please try again."}finally{this.isLoading=!1}},handleOtpInput(e,t){this.clearOtpError();const s=e.target.value;/^\d*$/.test(s)?(this.otpDigits[t]=s,s&&t<3&&this.$refs["otpInput"+(t+1)][0].focus(),this.otpDigits.every(e=>""!==e)&&setTimeout(()=>{this.handleLogin()},300)):e.target.value=""},handleKeydown(e,t){"Backspace"===e.key&&!this.otpDigits[t]&&t>0&&this.$refs["otpInput"+(t-1)][0].focus()},handlePaste(e){e.preventDefault();const t=e.clipboardData.getData("text"),s=t.match(/\d/g);if(s){this.otpDigits=["","","",""],s.slice(0,4).forEach((e,t)=>{t<4&&(this.otpDigits[t]=e,this.$refs["otpInput"+t]&&(this.$refs["otpInput"+t][0].value=e))});const e=this.otpDigits.findIndex(e=>!e),t=-1===e?3:e;this.$refs["otpInput"+t][0].focus(),this.otpDigits.every(e=>""!==e)&&setTimeout(()=>{this.handleLogin()},300)}},setupSMSRetrieval(){try{if(!this.smsReceiver&&"OTPCredential"in window){const e=new AbortController;navigator.credentials.get({otp:{transport:["sms"]},signal:e.signal}).then(e=>{if(e&&e.code){const t=e.code;for(let e=0;e<Math.min(t.length,4);e++)this.otpDigits[e]=t[e],this.$refs["otpInput"+e]&&(this.$refs["otpInput"+e][0].value=t[e]);this.otpDigits.every(e=>""!==e)&&setTimeout(()=>this.handleLogin(),300)}}).catch(e=>{console.log("SMS Retrieval Error:",e)}),this.smsReceiver=e}}catch(e){console.log("SMS Setup Error:",e)}},startOTPDetection(){this.smsReceiver&&(this.smsReceiver.abort(),this.smsReceiver=null),this.setupSMSRetrieval();const e=document.getElementById("otp-input");e&&e.addEventListener("focus",()=>{"OTPCredential"in window&&navigator.credentials.get({otp:{transport:["sms"]},signal:this.smsReceiver?.signal}).catch(()=>{})})},startResendTimer(){this.resendTimer=30,this.timerInterval=setInterval(()=>{this.resendTimer>0?this.resendTimer--:clearInterval(this.timerInterval)},1e3)},closeCookieNotice(){this.showCookieNotice=!1},handleBack(){this.showOTP=!1,this.otpDigits=["","","",""],this.timerInterval&&(clearInterval(this.timerInterval),this.resendTimer=0)},beforeDestroy(){this.smsReceiver&&(this.smsReceiver.abort(),this.smsReceiver=null),this.timerInterval&&clearInterval(this.timerInterval)},clearOtpError(){this.otpError=""}},beforeUnmount(){this.timerInterval&&clearInterval(this.timerInterval)},async created(){console.log("Component created - Starting initialization"),this.clearLoginPageData();try{this.phoneNumber=this.$route.query.phone||localStorage.getItem("phone")||"";const e=new URLSearchParams(window.location.search);let t=e.get("ref");if(!t&&window.location.hash){const e=window.location.hash.split("?");if(e.length>1){const s=new URLSearchParams(e[1]);t=s.get("ref")}}this.referralCode=t||"",this.referralCode&&localStorage.setItem("referralCode",this.referralCode);const s=this.$route.query.token||localStorage.getItem("token")||localStorage.getItem("csrfToken")||localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).token;console.log("Initial token:",s),this.$route.query.phone&&!this.phoneNumber&&(console.error("Invalid phone number"),this.phoneError="Invalid phone number. Please try again."),this.$route.query.token&&!s&&(console.error("Invalid token"),this.phoneError="Authentication failed. Please try again."),s&&localStorage.setItem("token",s);let a=null;const i=new URLSearchParams(window.location.search);if(a=i.get("ref"),!a&&window.location.hash){const e=window.location.hash.split("?");if(e.length>1){const t=new URLSearchParams(e[1]);a=t.get("ref")}}this.referralCode=a||"",this.referralCode&&localStorage.setItem("referralCode",this.referralCode),this.phoneNumber&&this.validatePhoneNumber()}catch(e){console.error("Error in component creation:",e),"Failed to fetch"!==e.message&&console.error("Unexpected error:",e)}},watch:{phoneNumber:{handler(e){e?this.validatePhoneNumber():this.phoneError=""},immediate:!0}},computed:{phoneInputStyle(){return 10!==this.phoneNumber.length||this.phoneError?this.phoneError?"border-[#ff4d4d]":"border-white/10":"border-[#4CAF50] text-[#4CAF50]"}}};const Xi=(0,se.A)(ji,[["render",Ri],["__scopeId","data-v-2cba8aa7"]]);var $i=Xi;const Fi={class:"min-h-screen bg-[#121212] flex items-center justify-center px-4"},Ui={class:"w-full max-w-md"},Oi={key:0,class:"mb-4 bg-gradient-to-r from-green-500/20 to-green-600/20 border border-green-500/30 rounded-lg p-3 text-green-400 text-sm flex items-center gap-2"},Ni={class:"grid grid-cols-2 gap-4"},Bi={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Wi={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Qi={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},qi={class:"flex gap-2"},zi=["disabled"],Ki={key:0},Hi={key:1},Ji={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Yi={key:1,class:"mt-1 text-green-500 text-sm flex items-center gap-1"},Gi={key:2,class:"mt-1 text-[#ff4d4d] text-sm flex items-center gap-1"},Zi=["disabled"],eo={key:0},to={key:1,class:"flex items-center justify-center"};function so(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",Fi,[(0,i.Lk)("div",Ui,[o.autoFilledReferral&&o.referralSuccess?((0,i.uX)(),(0,i.CE)("div",Oi,t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-info-circle text-green-400"},null,-1),(0,i.Lk)("span",null,"Referral code was automatically applied from your invitation link!",-1)]))):(0,i.Q3)("",!0),t[15]||(t[15]=(0,i.Lk)("div",{class:"text-center mb-8"},[(0,i.Lk)("img",{src:Re,alt:"Logo",class:"h-12 mx-auto mb-4"}),(0,i.Lk)("h1",{class:"text-2xl font-bold text-white"},"Complete Your Profile"),(0,i.Lk)("p",{class:"text-white/60 mt-2"},"Just a few more details to get started")],-1)),(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)((...e)=>o.handleSubmit&&o.handleSubmit(...e),["prevent"])),class:"space-y-6"},[(0,i.Lk)("div",Ni,[(0,i.Lk)("div",null,[t[7]||(t[7]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" First Name "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.firstName=e),type:"text",class:(0,n.C4)(["w-full bg-[#1d1d1d] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":o.errors.firstName}]),required:""},null,2),[[a.Jo,o.form.firstName]]),o.errors.firstName?((0,i.uX)(),(0,i.CE)("p",Bi,(0,n.v_)(o.errors.firstName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[8]||(t[8]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" Last Name "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.lastName=e),type:"text",class:(0,n.C4)(["w-full bg-[#1d1d1d] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":o.errors.lastName}]),required:""},null,2),[[a.Jo,o.form.lastName]]),o.errors.lastName?((0,i.uX)(),(0,i.CE)("p",Wi,(0,n.v_)(o.errors.lastName),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",null,[t[9]||(t[9]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" City/Village "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.address=e),class:(0,n.C4)(["w-full bg-[#1d1d1d] border border-white/10 rounded-lg p-4 text-white focus:border-[#c30059] focus:outline-none transition-colors h-13 resize-none",{"border-[#ff4d4d]":o.errors.address}]),placeholder:"City or village name",required:""},null,2),[[a.Jo,o.form.address]]),o.errors.address?((0,i.uX)(),(0,i.CE)("p",Qi,(0,n.v_)(o.errors.address),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[13]||(t[13]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" Referral Phone Number"),(0,i.Lk)("span",{class:"text-gray-400"},"(Optional)")],-1)),(0,i.Lk)("div",qi,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.referralCode=e),ref:"referralField",type:"text",class:(0,n.C4)(["w-full bg-[#1d1d1d] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors uppercase",{"border-[#ff4d4d]":o.errors.referralCode,"border-green-500":o.autoFilledReferral}]),placeholder:"Enter Referral phone number",autocomplete:"off"},null,2),[[a.Jo,o.form.referralCode]]),(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>o.verifyReferralCode&&o.verifyReferralCode(...e)),disabled:!o.form.referralCode||o.isVerifyingReferral,class:"bg-[#c30059] text-white px-4 rounded-lg h-12 font-semibold hover:bg-[#ff4d4d] transition-colors disabled:opacity-50"},[o.isVerifyingReferral?((0,i.uX)(),(0,i.CE)("span",Hi,t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):((0,i.uX)(),(0,i.CE)("span",Ki,"Verify"))],8,zi)]),o.errors.referralCode?((0,i.uX)(),(0,i.CE)("p",Ji,(0,n.v_)(o.errors.referralCode),1)):(0,i.Q3)("",!0),o.referralSuccess?((0,i.uX)(),(0,i.CE)("p",Yi,[t[11]||(t[11]=(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,i.eW)(" Valid referral code "+(0,n.v_)(o.autoFilledReferral?"(Auto-filled from link)":""),1)])):(0,i.Q3)("",!0),o.referralError?((0,i.uX)(),(0,i.CE)("p",Gi,[t[12]||(t[12]=(0,i.Lk)("i",{class:"fas fa-times-circle"},null,-1)),(0,i.eW)(" "+(0,n.v_)(o.referralError),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{type:"submit",disabled:o.isLoading,class:"w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white py-4 rounded-lg font-medium text-lg hover:opacity-90 transition-opacity disabled:opacity-50 relative"},[o.isLoading?((0,i.uX)(),(0,i.CE)("span",to,t[14]||(t[14]=[(0,i.Lk)("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,i.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),(0,i.eW)(" Processing... ")]))):((0,i.uX)(),(0,i.CE)("span",eo,"Complete Registration"))],8,Zi)],32)])])}var ao={name:"MiniRegistration",setup(){const e=(0,ee.KR)(!1),t=(0,ee.KR)(!1),s=(0,ee.KR)(!1),a=(0,ee.KR)(""),o=(0,ee.KR)(null),r=(0,ee.KR)(!1),l=(0,ee.Kh)({firstName:"",lastName:"",address:"",referralCode:""}),n=(0,ee.Kh)({firstName:"",lastName:"",address:"",referralCode:""}),c=()=>{let e=!0;return Object.keys(n).forEach(e=>n[e]=""),l.firstName.trim()||(n.firstName="First name is required",e=!1),l.lastName.trim()||(n.lastName="Last name is required",e=!1),l.address.trim()||(n.address="Address is required",e=!1),e},d=async()=>{if(l.referralCode){t.value=!0,s.value=!1,a.value="",n.referralCode="";try{const e=l.referralCode.trim().toUpperCase();console.log("Verifying referral code:",e,"Auto-filled:",r.value);const t=await fetch(`https://ott.no1news.in/users/verify-referral/?code=${e}`,{headers:{Accept:"application/json"}}),i=await t.json();"success"===i.status?(s.value=!0,a.value="",console.log("Referral code verification successful")):(s.value=!1,a.value="Invalid referral code",console.log("Referral code verification failed:",i),r.value||(r.value=!1))}catch(e){console.error("Error verifying referral code:",e),s.value=!1,a.value="Error verifying referral code",r.value||(r.value=!1)}finally{t.value=!1}}},u=async()=>{let e=null;const t=new URLSearchParams(window.location.search);if(e=t.get("ref"),!e&&window.location.hash){const t=window.location.hash.split("?");if(t.length>1){const s=new URLSearchParams(t[1]);e=s.get("ref")}}e||(e=localStorage.getItem("referralCode")),e&&(console.log("Found referral code:",e),l.referralCode=e,r.value=!0,await d())};(0,i.sV)(()=>{u()});const h=async()=>{if(c())if(!l.referralCode||s.value){e.value=!0;try{const e=localStorage.getItem("csrfToken"),s=localStorage.getItem("phone");if(localStorage.removeItem("referralCode"),!s)throw new Error("Phone number is required. Please login again.");const a=await fetch("https://ott.no1news.in/users/complete-registration/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({first_name:l.firstName,last_name:l.lastName,address:l.address,phone:s,...l.referralCode?{referral_code:l.referralCode.trim().toUpperCase()}:{}})}),i=await a.json();if(!a.ok)throw new Error(i.message||"Registration failed");i.user&&localStorage.setItem("user",JSON.stringify(i.user)),i.csrf_token&&localStorage.setItem("csrfToken",i.csrf_token),localStorage.setItem("hasCompletedRegistration","true");try{const e=await fetch(`https://ott.no1news.in/users/profile/?phone=${s}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include"}),t=await e.json();t&&"success"===t.status&&localStorage.setItem("user",JSON.stringify(t.user))}catch(t){console.error("Error updating user data:",t)}localStorage.setItem("registrationSuccess","true"),localStorage.setItem("registrationMessage","Registration completed successfully!");const o=new URLSearchParams(window.location.search),r=o.get("redirect");window.location.href=r&&"/mini-register"!==r?`https://no1ott.com${r}`:"https://no1ott.com/"}catch(t){if(console.error("Registration error:",t),t.response?.data){const e=t.response.data;Object.keys(e).forEach(t=>{Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=e[t][0])}),e.referral_code&&void 0!==n.referralCode&&(n.referralCode=e.referral_code[0])}}finally{e.value=!1}}else n.referralCode="Please verify the referral code first"};return{form:l,errors:n,isLoading:e,handleSubmit:h,isVerifyingReferral:t,referralSuccess:s,referralError:a,verifyReferralCode:d,referralField:o,autoFilledReferral:r}}};const io=(0,se.A)(ao,[["render",so]]);var oo=io;const ro={class:"min-h-screen bg-gradient-to-br from-[#0a0a0a] via-[#1a1a1a] to-[#0f0f0f] text-white"},lo={key:0,class:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm"},no={class:"relative overflow-hidden"},co={class:"relative z-10 px-4 py-8"},uo={class:"max-w-7xl mx-auto"},ho={class:"flex items-center justify-between mb-8"},po={class:"relative px-4 py-1"},mo={class:"max-w-7xl mx-auto"},go={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 mb-16 max-w-6xl mx-auto place-items-center"},fo={key:0,class:"col-span-full w-full flex flex-col items-center py-16"},vo={key:1,class:"col-span-full text-center py-16"},yo={class:"bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] rounded-2xl border border-white/10 p-8"},bo=["onClick"],ko={class:"p-4 pb-2"},wo={key:0,class:"inline-block"},xo={class:"bg-[#c30059] text-white text-xs font-bold px-3 py-1 rounded-full"},Lo={key:1,class:"inline-block"},Co={class:"bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full"},So={key:0,class:"absolute top-4 right-4 z-10"},_o={class:"p-6 pt-2 flex flex-col h-full"},Po={class:"text-center mb-4"},Eo={class:"inline-flex items-center gap-2 mb-3"},Ao={class:"bg-gradient-to-r from-[#ffd700] to-[#ffed4e] bg-clip-text text-transparent font-bold text-lg"},To={class:"text-center mb-6"},Io={class:"text-white font-semibold text-sm mb-2"},Mo={class:"text-white/70 text-xs"},Vo={class:"text-center mb-6 flex-grow"},Do={class:"flex items-baseline justify-center gap-2 mb-2"},Ro={class:"text-2xl font-bold text-white"},jo={class:"text-white/60 text-sm"},Xo={class:"text-white/70 text-xs"},$o={class:"mt-auto"},Fo=["onClick","disabled"],Uo={key:0,class:"fas fa-credit-card"},Oo={key:1,class:"fas fa-spinner fa-spin"},No={key:2},Bo={key:3},Wo={class:"mb-6"},Qo={class:"flex flex-col md:flex-row items-center justify-between gap-3 bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] border border-white/10 rounded-2xl p-4 max-w-4xl mx-auto"},qo={key:0,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},zo={class:"bg-gradient-to-br from-[#1a1a1a] to-[#2a2a2a] rounded-3xl w-full max-w-md border border-white/10 overflow-hidden"},Ko={class:"bg-gradient-to-r from-[#c30059] to-[#ff6b9d] p-6"},Ho={class:"flex justify-between items-center"},Jo={class:"p-6 space-y-6"},Yo={key:0,class:"mt-3 text-sm text-red-400 flex items-center gap-2"},Go=["disabled"],Zo={key:0},er={key:1};function tr(e,t,s,o,r,l){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",ro,[o.isProcessingPayment?((0,i.uX)(),(0,i.CE)("div",lo,t[6]||(t[6]=[(0,i.Fv)('<div class="relative" data-v-3bdd93b7><div class="w-16 h-16 border-4 border-[#c30059]/30 border-t-[#c30059] rounded-full animate-spin" data-v-3bdd93b7></div><div class="absolute inset-0 flex items-center justify-center" data-v-3bdd93b7><i class="fas fa-play text-[#c30059] text-xl" data-v-3bdd93b7></i></div></div><div class="mt-6 text-center" data-v-3bdd93b7><div class="text-xl font-bold text-white mb-2" data-v-3bdd93b7>Processing Payment...</div><div class="w-64 h-1 bg-gray-700 rounded-full overflow-hidden" data-v-3bdd93b7><div class="h-full bg-gradient-to-r from-[#c30059] to-[#ff6b9d] animate-pulse" data-v-3bdd93b7></div></div><div class="mt-4 p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg max-w-md" data-v-3bdd93b7><div class="flex items-center justify-center gap-2 mb-2" data-v-3bdd93b7><i class="fas fa-shield-alt text-amber-400" data-v-3bdd93b7></i><span class="font-semibold text-amber-400" data-v-3bdd93b7>Secure Payment</span></div><p class="text-sm text-amber-300" data-v-3bdd93b7> Please wait while we process your payment securely. Do not close this window. </p></div></div>',2)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",no,[t[10]||(t[10]=(0,i.Lk)("div",{class:"absolute inset-0 opacity-10"},[(0,i.Lk)("div",{class:"absolute inset-0 bg-gradient-to-br from-[#c30059]/10 via-transparent to-[#ff6b9d]/10"}),(0,i.Lk)("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 25% 25%, rgba(195, 0, 89, 0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255, 107, 157, 0.1) 0%, transparent 50%)"}})],-1)),(0,i.Lk)("div",co,[(0,i.Lk)("div",uo,[(0,i.Lk)("div",ho,[(0,i.bF)(c,{to:"/",class:"flex items-center gap-3 text-white/80 hover:text-white transition-colors group"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.Lk)("div",{class:"w-10 h-10 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform"},[(0,i.Lk)("i",{class:"fas fa-arrow-left text-lg"})],-1),(0,i.Lk)("span",{class:"font-medium"},"Back to Home",-1)])),_:1,__:[7]}),t[8]||(t[8]=(0,i.Lk)("div",{class:"flex items-center gap-2 text-sm text-white/60"},[(0,i.Lk)("i",{class:"fas fa-shield-check text-green-400"}),(0,i.Lk)("span",null,"Secure Payment")],-1))]),t[9]||(t[9]=(0,i.Fv)('<div class="text-center max-w-4xl mx-auto" data-v-3bdd93b7><div class="inline-flex items-center gap-2 px-4 py-2 bg-[#c30059]/10 border border-[#c30059]/20 rounded-full text-[#c30059] text-sm font-medium mb-6" data-v-3bdd93b7><i class="fas fa-crown" data-v-3bdd93b7></i><span data-v-3bdd93b7>Premium Plans Available</span></div><h1 class="text-4xl md:text-6xl font-bold mb-1" data-v-3bdd93b7> Choose Your <span class="bg-gradient-to-r from-[#c30059] to-[#ff6b9d] bg-clip-text text-transparent" data-v-3bdd93b7> Entertainment </span><br data-v-3bdd93b7>Plan </h1></div>',1))])])]),(0,i.Lk)("div",po,[(0,i.Lk)("div",mo,[(0,i.Lk)("div",go,[o.isLoadingPlans?((0,i.uX)(),(0,i.CE)("div",fo,t[11]||(t[11]=[(0,i.Lk)("div",{class:"w-12 h-12 border-4 border-[#c30059]/30 border-t-[#c30059] rounded-full animate-spin"},null,-1),(0,i.Lk)("p",{class:"mt-4 text-white/70 text-sm"},"Loading plans...",-1)]))):0===o.plans.length?((0,i.uX)(),(0,i.CE)("div",vo,[(0,i.Lk)("div",yo,[t[13]||(t[13]=(0,i.Lk)("div",{class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] rounded-2xl flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle text-white text-3xl"})],-1)),t[14]||(t[14]=(0,i.Lk)("h3",{class:"text-2xl font-bold text-white mb-3"},"No Plans Available",-1)),t[15]||(t[15]=(0,i.Lk)("p",{class:"text-white/60 mb-4"},"Subscription plans are currently not available. Please try again later.",-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.fetchPlans&&o.fetchPlans(...e)),class:"px-6 py-3 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-[#c30059]/25 transition-all"},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-refresh mr-2"},null,-1),(0,i.eW)(" Refresh Plans ")]))])])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.plans,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,onClick:t=>o.selectPlan(e),class:(0,n.C4)(["relative group cursor-pointer transition-all duration-300 transform hover:scale-105",(o.selectedPlan&&o.selectedPlan.id)===e.id?"scale-105":""])},[(0,i.Lk)("div",{class:(0,n.C4)(["relative bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] rounded-2xl overflow-hidden border-2 transition-all duration-300 h-full",(o.selectedPlan&&o.selectedPlan.id)===e.id?"border-[#c30059] shadow-2xl shadow-[#c30059]/20":"border-white/10 hover:border-[#c30059]/50 group-hover:shadow-xl"])},[(0,i.Lk)("div",ko,[e.popular?((0,i.uX)(),(0,i.CE)("div",wo,[(0,i.Lk)("div",xo,(0,n.v_)(e.badge||"RECOMMENDED"),1)])):e.badge?((0,i.uX)(),(0,i.CE)("div",Lo,[(0,i.Lk)("div",Co,(0,n.v_)(e.badge),1)])):(0,i.Q3)("",!0)]),(o.selectedPlan&&o.selectedPlan.id)===e.id?((0,i.uX)(),(0,i.CE)("div",So,t[16]||(t[16]=[(0,i.Lk)("div",{class:"w-8 h-8 bg-[#c30059] rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-check text-white text-sm"})],-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",_o,[(0,i.Lk)("div",Po,[(0,i.Lk)("div",Eo,[t[17]||(t[17]=(0,i.Lk)("div",{class:"w-8 h-8 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] rounded-lg flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-sm"})],-1)),t[18]||(t[18]=(0,i.Lk)("span",{class:"text-[#c30059] font-bold text-lg"},"OTT",-1)),(0,i.Lk)("span",Ao,(0,n.v_)(e.brand_text||"GOLD"),1)])]),(0,i.Lk)("div",To,[(0,i.Lk)("div",Io,(0,n.v_)(e.features.join(" • ")),1),(0,i.Lk)("div",Mo,(0,n.v_)(e.description),1)]),t[19]||(t[19]=(0,i.Lk)("div",{class:"border-t border-white/10 my-4"},null,-1)),(0,i.Lk)("div",Vo,[(0,i.Lk)("div",Do,[(0,i.Lk)("span",Ro,"₹"+(0,n.v_)(e.price),1),(0,i.Lk)("span",jo,"/"+(0,n.v_)(e.duration_text||"month"),1)]),(0,i.Lk)("div",Xo," Just ₹"+(0,n.v_)(o.getPerDay(e))+" per day ",1)]),(0,i.Lk)("div",$o,[(0,i.Lk)("button",{onClick:(0,a.D$)(t=>o.handlePlanSubscription(e),["stop"]),disabled:o.isProcessingPayment,class:(0,n.C4)(["w-full py-3 px-4 rounded-xl font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2","bg-gradient-to-r from-[#c30059] to-[#ff6b9d] text-white hover:shadow-lg hover:shadow-[#c30059]/25 disabled:opacity-50"])},[o.isProcessingPayment?((0,i.uX)(),(0,i.CE)("i",Oo)):((0,i.uX)(),(0,i.CE)("i",Uo)),o.isProcessingPayment?((0,i.uX)(),(0,i.CE)("span",No,"Processing...")):((0,i.uX)(),(0,i.CE)("span",Bo,"Pay Online"))],8,Fo)])])],2)],10,bo))),128))])]),(0,i.Lk)("div",Wo,[(0,i.Lk)("div",Qo,[t[20]||(t[20]=(0,i.Fv)('<div class="flex items-center gap-3 text-white/80" data-v-3bdd93b7><div class="w-10 h-10 rounded-xl bg-gradient-to-r from-[#c30059] to-[#ff6b9d] flex items-center justify-center" data-v-3bdd93b7><i class="fas fa-ticket-alt text-white" data-v-3bdd93b7></i></div><div data-v-3bdd93b7><div class="font-semibold text-white" data-v-3bdd93b7>Have a subscription code?</div><div class="text-sm text-white/60" data-v-3bdd93b7>Redeem it to activate your plan instantly</div></div></div>',1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>o.showCodeInput=!0),class:"w-full md:w-auto px-5 py-2.5 rounded-xl font-semibold text-sm bg-gradient-to-r from-[#c30059] to-[#ff6b9d] text-white hover:shadow-lg hover:shadow-[#c30059]/25 transition-all"}," Redeem Code ")])]),o.showCodeInput?((0,i.uX)(),(0,i.CE)("div",qo,[(0,i.Lk)("div",zo,[(0,i.Lk)("div",Ko,[(0,i.Lk)("div",Ho,[t[22]||(t[22]=(0,i.Lk)("div",null,[(0,i.Lk)("h3",{class:"text-xl font-bold text-white"},"Subscription Code"),(0,i.Lk)("p",{class:"text-white/80 text-sm"},"Enter your redemption code")],-1)),(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>o.showCodeInput=!1),class:"w-8 h-8 bg-white/10 rounded-full flex items-center justify-center text-white hover:bg-white/20 transition-colors"},t[21]||(t[21]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])]),(0,i.Lk)("div",Jo,[(0,i.Lk)("div",null,[t[24]||(t[24]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/80 mb-3"},"Redemption Code",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.subscriptionCode=e),type:"text",class:"w-full bg-[#0a0a0a] border border-white/10 rounded-xl h-14 px-4 text-white text-lg font-mono tracking-wider focus:border-[#c30059] focus:outline-none focus:ring-2 focus:ring-[#c30059]/20 transition-all uppercase placeholder-white/40",placeholder:"ENTER-CODE-HERE",onInput:t[4]||(t[4]=(...e)=>o.validateCode&&o.validateCode(...e))},null,544),[[a.Jo,o.subscriptionCode]]),o.codeError?((0,i.uX)(),(0,i.CE)("p",Yo,[t[23]||(t[23]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,i.eW)(" "+(0,n.v_)(o.codeError),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>o.handleCodeSubmit&&o.handleCodeSubmit(...e)),disabled:!o.isValidCode,class:"w-full py-4 px-6 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] text-white font-bold rounded-xl hover:shadow-lg hover:shadow-[#c30059]/25 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none"},[o.isValidCode?((0,i.uX)(),(0,i.CE)("span",Zo,"Activate Subscription")):((0,i.uX)(),(0,i.CE)("span",er,"Enter Valid Code"))],8,Go)])])])):(0,i.Q3)("",!0)]),t[25]||(t[25]=(0,i.Fv)('<div class="bg-[#0a0a0a] py-16" data-v-3bdd93b7><div class="max-w-7xl mx-auto px-4" data-v-3bdd93b7><div class="text-center mb-12" data-v-3bdd93b7><h2 class="text-3xl md:text-4xl font-bold mb-4" data-v-3bdd93b7>Why Choose Our Platform?</h2><p class="text-lg text-white/70" data-v-3bdd93b7>Experience entertainment like never before</p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8" data-v-3bdd93b7><div class="text-center group" data-v-3bdd93b7><div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-3bdd93b7><i class="fas fa-video text-3xl text-white" data-v-3bdd93b7></i></div><h3 class="text-xl font-bold mb-3" data-v-3bdd93b7>Premium Content</h3><p class="text-white/60" data-v-3bdd93b7>Access thousands of movies, TV shows, and exclusive originals in HD quality</p></div><div class="text-center group" data-v-3bdd93b7><div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-3bdd93b7><i class="fas fa-mobile-alt text-3xl text-white" data-v-3bdd93b7></i></div><h3 class="text-xl font-bold mb-3" data-v-3bdd93b7>Multi-Device Support</h3><p class="text-white/60" data-v-3bdd93b7>Watch on TV, laptop, tablet, or smartphone. Stream on up to 2 devices simultaneously</p></div><div class="text-center group" data-v-3bdd93b7><div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-[#c30059] to-[#ff6b9d] rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300" data-v-3bdd93b7><i class="fas fa-download text-3xl text-white" data-v-3bdd93b7></i></div><h3 class="text-xl font-bold mb-3" data-v-3bdd93b7>Offline Viewing</h3><p class="text-white/60" data-v-3bdd93b7>Download content and watch offline anywhere, anytime without internet connection</p></div></div></div></div><div class="py-16" data-v-3bdd93b7><div class="max-w-4xl mx-auto px-4" data-v-3bdd93b7><div class="text-center mb-12" data-v-3bdd93b7><h2 class="text-3xl md:text-4xl font-bold mb-4" data-v-3bdd93b7>Frequently Asked Questions</h2><p class="text-lg text-white/70" data-v-3bdd93b7>Everything you need to know about our subscription plans</p></div><div class="space-y-4" data-v-3bdd93b7><div class="bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] rounded-2xl border border-white/10 overflow-hidden" data-v-3bdd93b7><button class="w-full p-6 text-left flex items-center justify-between hover:bg-white/5 transition-colors" data-v-3bdd93b7><div data-v-3bdd93b7><h3 class="font-semibold text-lg mb-1" data-v-3bdd93b7>What payment methods do you accept?</h3><p class="text-white/60 text-sm" data-v-3bdd93b7>Learn about our secure payment options</p></div><i class="fas fa-chevron-down text-[#c30059] text-lg" data-v-3bdd93b7></i></button></div><div class="bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] rounded-2xl border border-white/10 overflow-hidden" data-v-3bdd93b7><button class="w-full p-6 text-left flex items-center justify-between hover:bg-white/5 transition-colors" data-v-3bdd93b7><div data-v-3bdd93b7><h3 class="font-semibold text-lg mb-1" data-v-3bdd93b7>Can I cancel my subscription anytime?</h3><p class="text-white/60 text-sm" data-v-3bdd93b7>Understand our flexible cancellation policy</p></div><i class="fas fa-chevron-down text-[#c30059] text-lg" data-v-3bdd93b7></i></button></div><div class="bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] rounded-2xl border border-white/10 overflow-hidden" data-v-3bdd93b7><button class="w-full p-6 text-left flex items-center justify-between hover:bg-white/5 transition-colors" data-v-3bdd93b7><div data-v-3bdd93b7><h3 class="font-semibold text-lg mb-1" data-v-3bdd93b7>How many devices can I watch on simultaneously?</h3><p class="text-white/60 text-sm" data-v-3bdd93b7>Details about multi-device streaming</p></div><i class="fas fa-chevron-down text-[#c30059] text-lg" data-v-3bdd93b7></i></button></div><div class="bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] rounded-2xl border border-white/10 overflow-hidden" data-v-3bdd93b7><button class="w-full p-6 text-left flex items-center justify-between hover:bg-white/5 transition-colors" data-v-3bdd93b7><div data-v-3bdd93b7><h3 class="font-semibold text-lg mb-1" data-v-3bdd93b7>Is there a free trial available?</h3><p class="text-white/60 text-sm" data-v-3bdd93b7>Information about trial periods and offers</p></div><i class="fas fa-chevron-down text-[#c30059] text-lg" data-v-3bdd93b7></i></button></div></div></div></div>',2))])}var sr={name:"SubscriptionPlans",setup(){const e=(0,_.Pj)(),t=(0,T.rd)(),s=(0,ee.KR)(!1),a=(0,ee.KR)(""),o=(0,ee.KR)(""),r=(0,ee.KR)(!1),l=(0,ee.KR)(!1),n=(0,ee.KR)([]),c=(0,ee.KR)(null),d=(0,ee.KR)(!0),u=(0,i.EW)(()=>e.getters.isAuthenticated),h=(0,i.EW)(()=>e.getters.currentUser),p=(0,i.EW)(()=>e.getters.token),m=e=>{try{const t=localStorage.getItem("payment_order");if(t){const s=JSON.parse(t);s.plan_id&&s.plan_id!==e.id&&localStorage.removeItem("payment_order")}}catch(t){localStorage.removeItem("payment_order")}c.value=e},g=e=>{c.value=e,k()};(0,i.sV)(async()=>{await L(),e.dispatch("initializeStore");const t=new URLSearchParams(window.location.search),s=t.get("plan");if(s&&n.value.length>0){const e=n.value.find(e=>e.id===s);e&&(c.value=e)}f()});const f=(e=null)=>{const t=localStorage.getItem("payment_order");if(t)try{const s=JSON.parse(t);if(e&&s.plan_id&&s.plan_id!==e)return localStorage.removeItem("payment_order"),!1;const a=s.created_at,i=Date.now(),o=i-a;return!(o>18e5)||(localStorage.removeItem("payment_order"),console.log("Expired payment order removed"),!1)}catch(s){return localStorage.removeItem("payment_order"),!1}return!1},v=async()=>{try{const e=await S.A.post("/api/payment/create-order/",{amount:c.value.price,currency:"INR",plan_id:c.value.id,phone:h.value.phone});if(console.log("New order created:",e.data),!e.data||!e.data.key_id)throw new Error("Invalid order response from server");const t={...e.data,created_at:Date.now(),plan_id:c.value.id,phone:h.value.phone};return localStorage.setItem("payment_order",JSON.stringify(t)),t}catch(e){throw console.error("Error creating new order:",e),e}},y=e=>(console.log("Using existing order:",e.order_id),e),b=async(s,a)=>{console.log("Starting payment status polling for order:",s),console.log("Stored payment data:",a);let i=0;const o=10,r=setInterval(async()=>{try{i++,console.log(`Payment status check attempt ${i}/${o}`);const a=await S.A.get(`/users/payment/check-status/${s}/`);if("completed"===a.data.status)return console.log("Payment completed successfully!"),clearInterval(r),localStorage.removeItem("pending_payment"),e.commit("setLoading",!1),e.dispatch("showToast",{message:"Payment successful! Your subscription is now active.",type:"success"}),void t.push("/profile");i>=o&&(console.log("Max polling attempts reached"),clearInterval(r),console.log("Keeping payment data for later verification"),e.dispatch("showToast",{message:"Payment verification is taking longer than expected. We will notify you once confirmed.",type:"warning"}))}catch(a){console.error("Payment status check failed:",a),i>=o&&clearInterval(r)}},3e4)},k=async()=>{l.value=!0;try{if(console.log("Payment gateway initiated"),console.log("Auth status:",u.value),console.log("User:",h.value),console.log("Token:",p.value),!u.value||!h.value||!p.value)return console.log("User not authenticated or missing token, redirecting to login"),t.push({path:"/login",query:{redirect:"/plans",plan:c.value.id}}),void(l.value=!1);const a=h.value.first_name&&h.value.last_name&&h.value.address&&h.value.state&&h.value.district&&h.value.constituency;if(!a)return console.log("Registration or location details incomplete, redirecting to profile update"),e.dispatch("showToast",{message:"Please complete your profile with all location details",type:"warning",duration:5e3}),t.push({path:"/profile/update",query:{redirect:"/plans",plan:c.value.id}}),void(l.value=!1);S.A.defaults.headers.common["Authorization"]=`Bearer ${p.value}`,e.commit("setLoading",!0),console.log("Creating order for plan:",c.value);const i=f(c.value.id);let o;if(i){const e=JSON.parse(localStorage.getItem("payment_order"));o=y(e)}else o=await v();if(console.log("Order data:",o),e.commit("setLoading",!1),!o||!o.key_id)throw new Error("Invalid order response from server");try{const s={key:o.key_id,amount:o.amount,currency:o.currency,name:"No1 OTT",description:`${c.value.name} Subscription`,order_id:o.order_id,prefill:{name:h.value?.first_name||"",email:h.value?.email||"",contact:h.value?.phone||""},theme:{color:"#c30059"},config:{display:{blocks:{upi:{name:"Pay using UPI",instruments:[{method:"upi"}]},card:{name:"Credit/Debit Cards",instruments:[{method:"card"}]},netbanking:{name:"Net Banking",instruments:[{method:"netbanking"}]}},sequence:["upi","card","netbanking"],preferences:{show_default_blocks:!0}}},retry:{enabled:!0,max_count:3},timeout:300,modal:{ondismiss:async function(){console.log("Razorpay modal dismissed, starting payment status check"),setTimeout(async()=>{const e=localStorage.getItem("pending_payment");if(e){const t=JSON.parse(e);await b(o.order_id,t)}else await b(o.order_id,null)},2e3)},escape:!0,backdropclose:!1},method:{upi:{flow:"intent"}},handler:async s=>{try{e.commit("setLoading",!0),console.log("=== PAYMENT SUCCESSFUL ==="),console.log("Payment response:",s);const a={payment_id:s.razorpay_payment_id,order_id:s.razorpay_order_id,signature:s.razorpay_signature,plan_id:c.value.id,phone:h.value.phone,timestamp:Date.now(),retry_count:0,amount:c.value.price,plan_name:c.value.name};console.log("Storing payment data in localStorage:",a),localStorage.setItem("pending_payment",JSON.stringify(a)),console.log("Attempting immediate payment verification...");const i=await S.A.post("/users/verify-payment/",{razorpay_payment_id:s.razorpay_payment_id,razorpay_order_id:s.razorpay_order_id,razorpay_signature:s.razorpay_signature,plan_id:c.value.id,phone:h.value.phone});if(console.log("Verification response:",i.data),"success"!==i.data.status)throw new Error(i.data.message||"Payment verification failed");localStorage.removeItem("pending_payment"),e.commit("setSubscription",i.data.subscription),e.dispatch("showToast",{message:"Payment successful! Your subscription is now active.",type:"success"}),console.log("Payment verified successfully, redirecting to profile"),t.push("/profile")}catch(a){console.error("=== PAYMENT VERIFICATION FAILED ==="),console.error("Error details:",a),console.error("Error response:",a.response?.data),e.dispatch("showToast",{message:"Payment successful! Please wait a moment for verification. You will be notified once your subscription is active.",type:"warning"}),console.log("Redirecting to profile, payment data stored for retry"),t.push("/profile")}finally{e.commit("setLoading",!1)}},webview_intent:!0};console.log("Opening Razorpay with options:",s);const a=new window.Razorpay(s);a.on("payment.failed",function(t){l.value=!1,e.commit("setLoading",!1),alert(`Payment failed: ${t.error.description}`)}),a.open(),setTimeout(()=>{l.value=!1},1e3)}catch(s){console.error("Order creation failed:",s),e.commit("setLoading",!1),s.response?401===s.response.status?(e.dispatch("logout"),t.push({path:"/login",query:{redirect:"/plans",plan:c.value.id}})):alert(`Server error: ${s.response.data.message||"Please try again later"}`):s.request?alert("Network error. Please check your internet connection."):alert("Unable to create order. Please try again.")}}catch(s){console.error("Payment gateway error:",s),e.commit("setLoading",!1),alert("Something went wrong. Please try again.")}},w=async()=>{try{if(e.commit("setLoading",!0),!a.value)return o.value="Please enter a subscription code",void(r.value=!1);const s=e.getters.currentUser?.phone;if(!s)return e.dispatch("showToast",{message:"Please login to continue",type:"error"}),void t.push({name:"login",query:{redirect:t.currentRoute.value.fullPath}});const i=await S.A.post("/users/validate-coupon/",{code:a.value,phone:s,amount:c.value.price,plan_id:c.value.id});"success"===i.data.status?(r.value=!0,o.value="",e.dispatch("showToast",{message:"Code is valid! Click Activate to use it",type:"success"})):(r.value=!1,o.value=i.data.message||"Invalid code",e.dispatch("showToast",{message:o.value,type:"error"}))}catch(s){console.error("Code validation error:",s),r.value=!1,o.value=s.response?.data?.message||"Error validating code. Please try again.",e.dispatch("showToast",{message:o.value,type:"error"})}finally{e.commit("setLoading",!1)}},x=async()=>{if(r.value)try{e.commit("setLoading",!0);const i=e.getters.currentUser,o=i?.phone||localStorage.getItem("phone");if(!o)return e.dispatch("showToast",{message:"Please login to continue",type:"error"}),t.push({name:"login",query:{redirect:t.currentRoute.value.fullPath}}),void e.commit("setLoading",!1);const r=i&&i.first_name&&i.last_name&&i.address&&i.state&&i.district&&i.constituency;if(!r)return e.dispatch("showToast",{message:"Please complete your profile with all location details",type:"warning",duration:5e3}),t.push({path:"/profile/update",query:{redirect:t.currentRoute.value.fullPath,code:a.value}}),void e.commit("setLoading",!1);const l=await S.A.post("/users/apply-coupon/",{code:a.value,phone:o,plan_id:c.value.id});if("success"!==l.data.status)throw new Error(l.data.message||"Failed to activate subscription");e.commit("setSubscription",l.data.subscription),e.dispatch("showToast",{message:"Subscription activated successfully!",type:"success"}),s.value=!1,t.push("/profile")}catch(i){console.error("Code activation error:",i),e.dispatch("showToast",{message:i.response?.data?.message||"Error activating subscription. Please try again.",type:"error"}),404===i.response?.status?t.push({path:"/login",query:{redirect:t.currentRoute.value.fullPath,phone:localStorage.getItem("phone")}}):localStorage.getItem("phone")||t.push({name:"login",query:{redirect:t.currentRoute.value.fullPath}})}finally{e.commit("setLoading",!1)}},L=async()=>{d.value=!0;try{const e=await S.A.get("/users/api/subscription-plans/");if(n.value=e.data.plans||[],n.value.length>0){const e=n.value.find(e=>e.popular)||n.value[0];c.value=e}}catch(t){console.error("Failed to fetch plans:",t),n.value=[],e.dispatch("showToast",{message:"Failed to refresh plans. Please try again later.",type:"error"})}finally{d.value=!1}},C=e=>{if(!isFinite(e))return"0";const t=Math.round(100*(e+Number.EPSILON))/100;return Number.isInteger(t)?String(t):t.toFixed(2)},P=e=>{if(e&&e.per_day_text)return e.per_day_text.replace(/^\s*₹?\s*/,"");if(!e||!e.price||!e.duration)return"0";const t=Number(e.price)/Number(e.duration);return C(t)};return{plans:n,selectedPlan:c,showCodeInput:s,subscriptionCode:a,codeError:o,isValidCode:r,isProcessingPayment:l,handlePaymentGateway:k,validateCode:w,handleCodeSubmit:x,selectPlan:m,handlePlanSubscription:g,checkAndCleanExpiredOrders:f,fetchPlans:L,isLoadingPlans:d,getPerDay:P}}};const ar=(0,se.A)(sr,[["render",tr],["__scopeId","data-v-3bdd93b7"]]);var ir=ar;const or={class:"min-h-screen bg-[#121212] text-white"},rr={class:"px-4 py-5 flex items-center justify-between border-b border-white/10"},lr={class:"flex items-center gap-3"},nr={class:"container mx-auto px-4 py-6"},cr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},dr={class:"bg-white/5 rounded-lg overflow-hidden hover:bg-white/10 transition-colors"},ur={class:"relative aspect-video bg-black/40"},hr={class:"bg-white/5 rounded-lg overflow-hidden hover:bg-white/10 transition-colors"},pr={class:"relative aspect-video bg-black/40"},mr={class:"bg-white/5 rounded-lg overflow-hidden hover:bg-white/10 transition-colors"},gr={class:"relative aspect-video bg-black/40"},fr={key:0,class:"fixed inset-0 z-50 bg-black flex items-center justify-center"};function vr(e,t,s,a,o,r){const l=(0,i.g2)("router-link"),n=(0,i.g2)("BannerAd"),c=(0,i.g2)("AdvancedVideoPlayer"),d=(0,i.g2)("AdvertisementPlayer");return(0,i.uX)(),(0,i.CE)("div",or,[(0,i.Lk)("header",rr,[(0,i.Lk)("div",lr,[(0,i.bF)(l,{to:"/",class:"text-[#c30059] font-bold text-2xl"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)("OTTApp")])),_:1,__:[4]})])]),(0,i.Lk)("main",nr,[t[16]||(t[16]=(0,i.Lk)("div",{class:"mb-6"},[(0,i.Lk)("h1",{class:"text-2xl font-bold mb-2"},"Advanced Video Player"),(0,i.Lk)("p",{class:"text-white/70"},"Featuring HLS, DASH, and DRM support")],-1)),o.user?((0,i.uX)(),(0,i.Wv)(n,{key:0,"user-id":o.user.id,position:"top",class:"mb-6"},null,8,["user-id"])):(0,i.Q3)("",!0),(0,i.Lk)("div",cr,[(0,i.Lk)("div",dr,[(0,i.Lk)("div",ur,[t[6]||(t[6]=(0,i.Lk)("img",{src:"https://via.placeholder.com/640x360?text=HLS+Stream",alt:"HLS Stream",class:"w-full h-full object-cover opacity-70"},null,-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>r.openPlayer("hls",o.hlsStreamUrl,"HLS Live Stream",!0)),class:"absolute inset-0 flex items-center justify-center"},t[5]||(t[5]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-[#c30059]/80 rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-xl ml-1"})],-1)])),t[7]||(t[7]=(0,i.Lk)("div",{class:"absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded"},"LIVE",-1))]),t[8]||(t[8]=(0,i.Fv)('<div class="p-4"><h3 class="font-bold text-lg mb-1">HLS Live Stream</h3><p class="text-white/60 text-sm mb-2">Adaptive streaming with HLS</p><div class="text-xs text-white/50 flex items-center"><i class="fas fa-signal mr-1"></i> Adaptive Bitrate </div></div>',1))]),(0,i.Lk)("div",hr,[(0,i.Lk)("div",pr,[t[10]||(t[10]=(0,i.Lk)("img",{src:"https://via.placeholder.com/640x360?text=DASH+Stream",alt:"DASH Stream",class:"w-full h-full object-cover opacity-70"},null,-1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.openPlayer("dash",o.dashStreamUrl,"DASH VOD Stream")),class:"absolute inset-0 flex items-center justify-center"},t[9]||(t[9]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-[#c30059]/80 rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-xl ml-1"})],-1)]))]),t[11]||(t[11]=(0,i.Fv)('<div class="p-4"><h3 class="font-bold text-lg mb-1">DASH VOD Stream</h3><p class="text-white/60 text-sm mb-2">Dynamic Adaptive Streaming over HTTP</p><div class="text-xs text-white/50 flex items-center"><i class="fas fa-film mr-1"></i> On-Demand Content </div></div>',1))]),(0,i.Lk)("div",mr,[(0,i.Lk)("div",gr,[t[13]||(t[13]=(0,i.Lk)("img",{src:"https://via.placeholder.com/640x360?text=DRM+Protected",alt:"DRM Protected",class:"w-full h-full object-cover opacity-70"},null,-1)),(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>r.openPlayer("dash",o.drmStreamUrl,"DRM Protected Content",!1,o.drmConfig)),class:"absolute inset-0 flex items-center justify-center"},t[12]||(t[12]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-[#c30059]/80 rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-xl ml-1"})],-1)])),t[14]||(t[14]=(0,i.Lk)("div",{class:"absolute top-2 right-2 bg-yellow-600 text-white text-xs px-2 py-1 rounded flex items-center"},[(0,i.Lk)("i",{class:"fas fa-lock text-xs mr-1"}),(0,i.eW)(" DRM ")],-1))]),t[15]||(t[15]=(0,i.Fv)('<div class="p-4"><h3 class="font-bold text-lg mb-1">DRM Protected Content</h3><p class="text-white/60 text-sm mb-2">Secure streaming with DRM protection</p><div class="text-xs text-white/50 flex items-center"><i class="fas fa-shield-alt mr-1"></i> Content Protection </div></div>',1))])]),t[17]||(t[17]=(0,i.Fv)('<div class="mt-12 max-w-3xl mx-auto"><h2 class="text-xl font-bold mb-4">Features and Capabilities</h2><div class="space-y-6"><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-exchange-alt text-[#c30059] mr-2"></i> Adaptive Bitrate Streaming </h3><p class="text-white/70">Automatically adjusts video quality based on available bandwidth and device capabilities. Switch between qualities manually or let the player optimize for your connection.</p></div><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-signal text-[#c30059] mr-2"></i> DASH Support </h3><p class="text-white/70">Dynamic Adaptive Streaming over HTTP (DASH) provides a standards-based solution for high-quality streaming video delivery, with support for advanced features and content protection.</p></div><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-shield-alt text-[#c30059] mr-2"></i> Digital Rights Management (DRM) </h3><p class="text-white/70">Supports industry-standard DRM technologies including Widevine, PlayReady, and FairPlay to ensure secure delivery of premium content.</p></div><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-broadcast-tower text-[#c30059] mr-2"></i> Live Streaming </h3><p class="text-white/70">Low-latency live streaming with dynamic quality adaptation, perfect for live events, sports, and news broadcasts.</p></div></div></div>',1))]),o.playerVisible?((0,i.uX)(),(0,i.CE)("div",fr,[(0,i.bF)(c,{src:o.currentStream.url,title:o.currentStream.title,"stream-type":o.currentStream.type,"is-live":o.currentStream.isLive,"drm-config":o.currentStream.drmConfig,autoplay:!0,onClose:t[3]||(t[3]=e=>o.playerVisible=!1)},null,8,["src","title","stream-type","is-live","drm-config"])])):(0,i.Q3)("",!0),o.showAds&&o.user?((0,i.uX)(),(0,i.Wv)(d,{key:1,"video-id":o.currentVideoId,"user-id":o.user.id,"ad-type":o.currentAdType,onAdsFinished:r.onAdsFinished,onNoAds:r.onNoAds},null,8,["video-id","user-id","ad-type","onAdsFinished","onNoAds"])):(0,i.Q3)("",!0)])}const yr={class:"video-container"},br=["poster"],kr=["src"],wr={key:0,class:"loading-overlay"},xr={class:"top-controls"},Lr={class:"top-left"},Cr={key:0,class:"video-title"},Sr={class:"top-right"},_r={class:"center-controls"},Pr={key:0,xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"},Er={key:1,xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"},Ar={key:0,class:"rotation-hint"},Tr={class:"bottom-controls"},Ir={class:"progress-container"},Mr=["max","value"],Vr={class:"bottom-row"},Dr={class:"bottom-left"},Rr={class:"time-display"},jr={class:"bottom-right"},Xr={class:"quality-container"},$r={class:"control-label"},Fr=["value"],Ur={key:0,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Or={key:1,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Nr(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",{class:(0,n.C4)(["video-wrapper",{"mobile-view":r.isMobile}]),onClick:t[15]||(t[15]=(...e)=>l.handleVideoClick&&l.handleVideoClick(...e)),onTouchstart:t[16]||(t[16]=(...e)=>l.handleTouchStart&&l.handleTouchStart(...e)),onTouchmove:t[17]||(t[17]=(...e)=>l.handleTouchMove&&l.handleTouchMove(...e)),onTouchend:t[18]||(t[18]=(...e)=>l.handleTouchEnd&&l.handleTouchEnd(...e))},[(0,i.Lk)("div",yr,[(0,i.Lk)("video",{ref:"videoElement",class:"video-js vjs-big-play-centered vjs-theme-ott",poster:s.poster,preload:"auto",playsinline:"","webkit-playsinline":"",crossorigin:"anonymous","data-setup":"{}"},[(0,i.Lk)("source",{src:s.src,type:"application/x-mpegURL"},null,8,kr),t[19]||(t[19]=(0,i.Lk)("p",{class:"vjs-no-js"},"To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video",-1))],8,br),r.isLoading?((0,i.uX)(),(0,i.CE)("div",wr,t[20]||(t[20]=[(0,i.Lk)("div",{class:"loading-spinner"},[(0,i.Lk)("svg",{class:"spinner-svg",viewBox:"0 0 50 50"},[(0,i.Lk)("circle",{class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"4"})]),(0,i.Lk)("span",{class:"loading-text"},"Loading...")],-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,n.C4)(["custom-controls-overlay",{"controls-hidden":!r.showControls||r.isLoading}])},[(0,i.Lk)("div",xr,[(0,i.Lk)("div",Lr,[s.title?((0,i.uX)(),(0,i.CE)("h3",Cr,(0,n.v_)(s.title),1)):(0,i.Q3)("",!0)]),t[22]||(t[22]=(0,i.Lk)("div",{class:"top-center"},null,-1)),(0,i.Lk)("div",Sr,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.handleBackClick&&l.handleBackClick(...e)),class:"top-control-btn close-btn"},t[21]||(t[21]=[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,i.Lk)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,i.Lk)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))])]),(0,i.Lk)("div",_r,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.skipBackward&&l.skipBackward(...e)),class:"center-control-btn skip-backward"},t[23]||(t[23]=[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,i.Lk)("path",{d:"M11 17l-5-5 5-5"}),(0,i.Lk)("path",{d:"M17 17l-5-5 5-5"})],-1)])),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.togglePlay&&l.togglePlay(...e)),class:"center-control-btn play-pause-btn"},[r.isPlaying?((0,i.uX)(),(0,i.CE)("svg",Er,t[25]||(t[25]=[(0,i.Lk)("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),(0,i.Lk)("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)]))):((0,i.uX)(),(0,i.CE)("svg",Pr,t[24]||(t[24]=[(0,i.Lk)("polygon",{points:"5 3 19 12 5 21 5 3"},null,-1)])))]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.skipForward&&l.skipForward(...e)),class:"center-control-btn skip-forward"},t[26]||(t[26]=[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,i.Lk)("path",{d:"M7 17l5-5-5-5"}),(0,i.Lk)("path",{d:"M13 17l5-5-5-5"})],-1)]))]),!r.isMobile||r.isLandscape||r.hasShownRotationHint?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ar,t[27]||(t[27]=[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,i.Lk)("path",{d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9v-3m-9-9a9 9 0 019-9m-9 9v3"})],-1),(0,i.Lk)("span",null,"Rotate for fullscreen",-1)]))),(0,i.Lk)("div",Tr,[(0,i.Lk)("div",Ir,[(0,i.Lk)("div",{class:"progress-bar",onClick:t[7]||(t[7]=(...e)=>l.onProgressBarClick&&l.onProgressBarClick(...e)),onTouchstart:t[8]||(t[8]=(...e)=>l.handleProgressBarTouchStart&&l.handleProgressBarTouchStart(...e)),onTouchmove:t[9]||(t[9]=(...e)=>l.handleProgressBarTouchMove&&l.handleProgressBarTouchMove(...e)),onTouchend:t[10]||(t[10]=(...e)=>l.handleProgressBarTouchEnd&&l.handleProgressBarTouchEnd(...e))},[t[28]||(t[28]=(0,i.Lk)("div",{class:"progress-background"},null,-1)),(0,i.Lk)("div",{class:"progress-loaded",style:(0,n.Tr)({width:r.bufferedPercent+"%"})},null,4),(0,i.Lk)("div",{class:"progress-played",style:(0,n.Tr)({width:r.playedPercent+"%"})},null,4),(0,i.Lk)("div",{class:"progress-thumb",style:(0,n.Tr)({left:`calc(${r.playedPercent}% - 8px)`})},null,4),(0,i.Lk)("input",{type:"range",min:"0",max:r.duration,value:r.currentTime,onInput:t[4]||(t[4]=(...e)=>l.onProgressChange&&l.onProgressChange(...e)),onMousedown:t[5]||(t[5]=e=>r.isDragging=!0),onMouseup:t[6]||(t[6]=e=>r.isDragging=!1),class:"progress-slider"},null,40,Mr)],32),(0,i.Lk)("div",Vr,[(0,i.Lk)("div",Dr,[(0,i.Lk)("div",Rr,(0,n.v_)(l.formatTime(r.currentTime))+" / "+(0,n.v_)(l.formatTime(r.duration)),1)]),t[33]||(t[33]=(0,i.Lk)("div",{class:"bottom-center"},null,-1)),(0,i.Lk)("div",jr,[(0,i.Lk)("div",Xr,[(0,i.Lk)("button",{class:"bottom-control-btn quality-btn",onClick:t[11]||(t[11]=t=>e.$refs.qualitySelector&&e.$refs.qualitySelector.focus()),type:"button"},[t[29]||(t[29]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,i.Lk)("circle",{cx:"12",cy:"12",r:"3"}),(0,i.Lk)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 12 2.6V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)),(0,i.Lk)("span",$r,(0,n.v_)(r.selectedQuality),1)]),(0,i.bo)((0,i.Lk)("select",{ref:"qualitySelector","onUpdate:modelValue":t[12]||(t[12]=e=>r.selectedQuality=e),class:"quality-selector",onChange:t[13]||(t[13]=(...e)=>l.onQualityChange&&l.onQualityChange(...e))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.qualities,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Fr))),128))],544),[[a.u1,r.selectedQuality]])]),r.isMobile?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>l.toggleFullscreen&&l.toggleFullscreen(...e)),class:"bottom-control-btn fullscreen-btn"},[r.isFullscreen?((0,i.uX)(),(0,i.CE)("svg",Or,t[31]||(t[31]=[(0,i.Lk)("path",{d:"M8 3v3a2 2 0 0 1-2 2H3"},null,-1),(0,i.Lk)("path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"},null,-1),(0,i.Lk)("path",{d:"M3 16h3a2 2 0 0 1 2 2v3"},null,-1),(0,i.Lk)("path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"},null,-1)]))):((0,i.uX)(),(0,i.CE)("svg",Ur,t[30]||(t[30]=[(0,i.Lk)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"},null,-1),(0,i.Lk)("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"},null,-1),(0,i.Lk)("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"},null,-1),(0,i.Lk)("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"},null,-1)]))),t[32]||(t[32]=(0,i.Lk)("span",{class:"control-label"},null,-1))]))])])]),t[34]||(t[34]=(0,i.Lk)("div",{class:"controls-row"},[(0,i.Lk)("div",{class:"left-controls"}),(0,i.Lk)("div",{class:"right-controls"})],-1))])],2)])],34)}var Br={name:"AdvancedVideoPlayer",props:{src:{type:String,required:!0},poster:{type:String,default:""},autoplay:{type:Boolean,default:!1},title:{type:String,default:""},enableAutoRotate:{type:Boolean,default:!0}},emits:["close"],beforeRouteLeave(e,t,s){console.log("🎬 Route leaving detected, cleaning up video player"),this.handleNavigationCleanup(),s()},data(){return{player:null,isPlaying:!1,currentTime:0,duration:0,buffered:0,isMuted:!1,volume:1,isFullscreen:!1,showControls:!0,controlsTimeout:null,qualities:["Auto","1080p","720p","480p","360p"],selectedQuality:"Auto",bufferedPercent:0,playedPercent:0,isDragging:!1,isMobile:!1,isLandscape:!1,touchStartTime:0,touchStartX:0,touchStartY:0,touchMoved:!1,lastTapTime:0,controlsTimeoutDuration:2e3,seekThreshold:50,volumeThreshold:30,seekRate:10,isSeeking:!1,hasAutoRotated:!1,hasShownRotationHint:!1,isLoading:!0,loadingTimeout:null,userPaused:!1,continuousPlayback:!0,lastPlayTime:0,pauseRecoveryAttempts:0,wasPlayingBeforeSeek:!1,originalBodyStyles:{}}},computed:{volumeIconState(){return this.isMuted||0===this.volume?"muted":this.volume<.5?"low":"high"}},mounted(){console.log("🎬 AdvancedVideoPlayer mounted with props:",{src:this.src,title:this.title}),this.originalBodyStyles={overflow:document.body.style.overflow,position:document.body.style.position,height:document.body.style.height,touchAction:document.body.style.touchAction,userSelect:document.body.style.userSelect,pointerEvents:document.body.style.pointerEvents},this.initializePlayer(),this.checkMobileDevice(),this.checkOrientation(),this.initializeMobileAudioContext(),window.addEventListener("popstate",this.handleBackNavigation),this.isMobile&&(window.addEventListener("orientationchange",this.handleOrientationChange),window.addEventListener("resize",this.checkOrientation)),this.setupOrientationListener()},methods:{checkMobileDevice(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&("undefined"!==typeof window.orientation||navigator.maxTouchPoints>0),this.isMobile&&this.autoplay&&this.handleMobileAutoplay()},handleMobileAutoplay(){this.player&&(this.player.muted(!0),this.player.volume(.5),console.log("🎬 Mobile autoplay: Video muted for user interaction"))},handleMobileAudioInteraction(){if(this.isMobile&&this.player)try{const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume(),this.player.muted()&&(this.player.muted(!1),this.player.volume(.5),console.log("🎬 Mobile: Audio enabled after user interaction"))}catch(e){console.error("🎬 Mobile audio interaction error:",e)}},handleMobileAudioCleanup(){if(this.isMobile&&this.player)try{if(this.player.pause(),this.player.muted(!0),this.player.volume(0),/iPad|iPhone|iPod/.test(navigator.userAgent)){const e=new(window.AudioContext||window.webkitAudioContext);e.close()}console.log("🎬 Mobile audio cleanup completed")}catch(e){console.error("🎬 Mobile audio cleanup error:",e)}},initializeMobileAudioContext(){if(this.isMobile)try{const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume(),console.log("🎬 Mobile audio context initialized")}catch(e){console.error("🎬 Mobile audio context error:",e)}},setupOrientationListener(){this.isMobile&&this.enableAutoRotate&&(window.addEventListener("orientationchange",this.handleOrientationChange),document.addEventListener("fullscreenchange",this.handleFullscreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange),document.addEventListener("mozfullscreenchange",this.handleFullscreenChange),document.addEventListener("MSFullscreenChange",this.handleFullscreenChange),this.player.on("play",this.handleFirstPlay))},async handleFirstPlay(){!this.hasAutoRotated&&this.isMobile&&this.enableAutoRotate&&(this.hasAutoRotated=!0,await this.checkAndRotate()),this.player.off("play",this.handleFirstPlay)},async checkAndRotate(){let e=!1;e=window.screen?.orientation?.type?window.screen.orientation.type.includes("landscape"):void 0!==window.orientation?90===Math.abs(window.orientation):window.innerWidth>window.innerHeight,e||this.isFullscreen||await this.enterFullscreen()},async handleOrientationChange(){await new Promise(e=>setTimeout(e,150));const e=90===window.orientation||-90===window.orientation;e&&!this.isFullscreen?await this.enterFullscreen():!e&&this.isFullscreen&&await this.exitFullscreen()},async enterFullscreen(){if(!this.isFullscreen)try{const t=this.$el;if(t.requestFullscreen?await t.requestFullscreen():t.webkitRequestFullscreen?await t.webkitRequestFullscreen():t.mozRequestFullScreen?await t.mozRequestFullScreen():t.msRequestFullscreen&&await t.msRequestFullscreen(),this.isMobile&&window.screen?.orientation?.lock)try{await window.screen.orientation.lock("landscape")}catch(e){console.log("Orientation lock not supported")}}catch(t){console.error("Fullscreen error:",t)}},async exitFullscreen(){if(this.isFullscreen)try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen(),this.isFullscreen=!1,this.isMobile&&this.tryUnlockOrientation(),this.resetPageStyles()}catch(e){console.error("Exit fullscreen error:",e),this.isFullscreen=!1,this.resetPageStyles()}},async toggleFullscreen(){try{if(this.isFullscreen)document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen();else{const e=this.$refs.videoElement.parentElement;e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}}catch(e){console.error("Fullscreen toggle error:",e)}},handleFullscreenChange(){this.isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),this.isFullscreen&&this.isMobile?this.tryLockOrientation():!this.isFullscreen&&this.isMobile&&this.tryUnlockOrientation()},tryLockOrientation(){if(this.isMobile)try{if(window.screen?.orientation?.lock&&"function"===typeof window.screen.orientation.lock)window.screen.orientation.lock("landscape").catch(e=>{console.log("Orientation lock not supported or permission denied:",e)});else if(window.screen?.lockOrientation)try{window.screen.lockOrientation("landscape")}catch(e){console.log("Legacy orientation lock failed:",e)}}catch(e){console.log("Orientation lock not supported:",e)}},tryUnlockOrientation(){if(this.isMobile)try{if(window.screen?.orientation?.unlock&&"function"===typeof window.screen.orientation.unlock)Promise.resolve(window.screen.orientation.unlock()).catch(e=>{console.log("Orientation unlock error:",e)});else if(window.screen?.unlockOrientation&&"function"===typeof window.screen.unlockOrientation)try{window.screen.unlockOrientation()}catch(e){console.log("Legacy orientation unlock failed:",e)}}catch(e){console.log("Orientation unlock not supported:",e)}},initializePlayer(){const e=this.$refs.videoElement;document.addEventListener("fullscreenchange",this.handleFullscreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange),document.addEventListener("mozfullscreenchange",this.handleFullscreenChange),document.addEventListener("MSFullscreenChange",this.handleFullscreenChange),this.player=(0,Ot.A)(e,{controls:!1,autoplay:this.autoplay,preload:"auto",fluid:!0,html5:{hls:{enableLowInitialPlaylist:!0,smoothQualityChange:!0,overrideNative:!0,handlePartialData:!0,maxBufferLength:60,maxMaxBufferLength:120,maxBufferSize:12e7,maxBufferHole:.1,lowLatencyMode:!1,backBufferLength:60,limitRenditionByPlayerDimensions:!1},vhs:{limitRenditionByPlayerDimensions:!1,smoothQualityChange:!0,maxPlaylistRetries:10,bufferSize:60,enableLowInitialPlaylist:!0,allowSeeksWithinUnsafeLiveWindow:!0,handlePartialData:!0,overrideNative:!0,maxBufferLength:60,maxMaxBufferLength:120,maxBufferSize:12e7,maxBufferHole:.1,lowLatencyMode:!1,backBufferLength:60},nativeTextTracks:!1,nativeAudioTracks:!1,nativeVideoTracks:!1},techOrder:["html5"],playbackRates:[.5,1,1.5,2],responsive:!0,aspectRatio:"16:9",liveui:!0,inactivityTimeout:0,suppressNotSupportedError:!0,playsinline:!0,"webkit-playsinline":!0,errorDisplay:!1,muted:this.isMobile,volume:.5,poster:this.poster}),this.player.on("loadstart",()=>{console.log("🎬 Video loadstart event fired"),this.isLoading=!0}),this.player.on("loadeddata",()=>{console.log("🎬 Video loadeddata event fired"),this.isLoading=!1}),this.player.on("waiting",()=>{console.log("🎬 Video waiting event fired"),this.loadingTimeout=setTimeout(()=>{this.isLoading=!0},500),this.continuousPlayback&&!this.userPaused&&setTimeout(()=>{!this.player||this.isPlaying||this.userPaused||this.player.play().catch(e=>{console.log("Failed to resume after buffering:",e)})},2e3)}),this.player.on("playing",()=>{console.log("🎬 Video playing event fired"),this.isLoading=!1,this.loadingTimeout&&clearTimeout(this.loadingTimeout),this.player.muted()&&this.player.muted(!1),this.showControlsTemporarily()}),this.player.on("error",e=>{console.log("🎬 Video error event fired:",e),this.isLoading=!1,this.handleVideoError(e)}),this.player.on("canplay",()=>{console.log("🎬 Video canplay event fired"),this.isLoading=!1}),this.player.on("canplaythrough",()=>{console.log("🎬 Video canplaythrough event fired"),this.isLoading=!1}),this.player.on("stalled",()=>{console.log("🎬 Video stalled event fired"),this.isPlaying&&!this.userPaused&&setTimeout(()=>{this.player&&this.isPlaying&&!this.userPaused&&this.player.play().catch(e=>{console.log("Failed to resume after stall:",e)})},2e3)}),this.player.on("suspend",()=>{console.log("🎬 Video suspend event fired")}),this.player.on("abort",()=>{console.log("🎬 Video abort event fired")}),this.player.on("timeupdate",this.onTimeUpdate),this.player.on("progress",this.onProgress),this.player.on("play",()=>{console.log("🎬 Video play event fired"),this.isPlaying=!0,this.pauseRecoveryAttempts=0,this.isLoading=!1,this.showControlsTemporarily()}),this.player.on("pause",()=>{console.log("🎬 Video pause event fired"),this.isPlaying=!1,this.lastPlayTime=this.player.currentTime(),!this.userPaused&&this.continuousPlayback&&this.ensureContinuousPlayback()}),this.player.on("ended",()=>{console.log("🎬 Video ended event fired"),this.isPlaying=!1}),this.player.on("loadedmetadata",()=>{if(this.duration=this.player.duration(),console.log("🎬 Video duration:",this.duration),this.player.tech().hls){const e=this.player.tech().hls.representations();e.length>0&&(this.qualities=["Auto",...e.map(e=>`${e.height}p`)])}}),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("online",this.handleNetworkRecovery),window.addEventListener("beforeunload",this.handlePageUnload),window.addEventListener("pagehide",this.handlePageUnload)},handlePageUnload(){this.player&&(this.player.pause(),this.player.muted(!0),this.player.volume(0))},handleVideoError(e){console.log("🎬 Handling video error:",e),setTimeout(()=>{this.player&&(this.player.src(this.src),this.player.load(),this.player.play().catch(e=>{console.log("Failed to play after error recovery:",e),setTimeout(()=>{this.player&&this.player.play().catch(e=>{console.log("Second attempt to play after error failed:",e)})},3e3)}))},2e3)},handleNetworkRecovery(){this.player&&!this.isPlaying&&!this.userPaused&&this.continuousPlayback&&(console.log("🎬 Attempting network recovery"),this.player.play().catch(e=>{console.log("Network recovery failed:",e)}))},ensureContinuousPlayback(){this.continuousPlayback&&this.player&&!this.isPlaying&&!this.userPaused&&(console.log("🎬 Ensuring continuous playback"),this.pauseRecoveryAttempts++,this.pauseRecoveryAttempts<=3?setTimeout(()=>{!this.player||this.isPlaying||this.userPaused||this.player.play().catch(e=>{console.log("Continuous playback recovery failed:",e)})},1500*this.pauseRecoveryAttempts):(console.log("🎬 Max recovery attempts reached, resetting"),this.pauseRecoveryAttempts=0))},handleUnexpectedPause(){this.userPaused||!this.player||this.player.ended()||(console.log("🎬 Auto-resuming video after unexpected pause"),setTimeout(()=>{!this.player||this.isPlaying||this.userPaused||this.player.play().catch(e=>{console.log("Failed to auto-resume:",e),setTimeout(()=>{!this.player||this.isPlaying||this.userPaused||this.player.play().catch(e=>{console.log("Second auto-resume attempt failed:",e)})},1e3)})},1e3))},handleVisibilityChange(){document.hidden?this.player&&(this.player.pause(),this.player.muted(!0),this.player.volume(0)):!this.player||this.isPlaying||this.userPaused||(this.player.muted(!1),this.player.volume(.5),this.player.play().catch(e=>{console.log("Failed to resume after visibility change:",e)}))},showControlsTemporarily(){this.showControls=!0,this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.isPlaying&&(this.controlsTimeout=setTimeout(()=>{this.isDragging||this.isSeeking||(this.showControls=!1)},this.controlsTimeoutDuration))},hideControls(){this.isPlaying&&(this.showControls=!1)},togglePlay(){this.player&&"function"===typeof this.player.paused&&(this.isPlaying?(this.userPaused=!0,this.pauseRecoveryAttempts=0,this.player.pause()):(this.userPaused=!1,this.pauseRecoveryAttempts=0,this.handleMobileAudioInteraction(),this.player.play()),this.showControls=!0,this.showControlsTemporarily())},onTimeUpdate(){this.player&&"function"===typeof this.player.currentTime&&"function"===typeof this.player.duration&&(this.currentTime=this.player.currentTime(),this.playedPercent=this.currentTime/this.duration*100)},onProgress(){this.player&&"function"===typeof this.player.buffered&&"function"===typeof this.player.duration&&this.player.buffered().length>0&&(this.buffered=this.player.buffered().end(0),this.bufferedPercent=this.buffered/this.duration*100)},onProgressChange(e){if(!this.player||"function"!==typeof this.player.currentTime)return;const t=parseFloat(e.target.value);this.player.currentTime(t),this.isSeeking=!0,this.isLoading=!0},onVolumeChange(e){if(!this.player||"function"!==typeof this.player.volume)return;const t=parseFloat(e.target.value);this.volume=t,this.player.volume(t),this.isMuted=0===t},toggleMute(){this.isMuted=!this.isMuted,this.player.muted(this.isMuted)},skipForward(){this.player&&"function"===typeof this.player.currentTime&&(this.player.currentTime(this.currentTime+10),this.isLoading=!0)},skipBackward(){this.player&&"function"===typeof this.player.currentTime&&(this.player.currentTime(this.currentTime-10),this.isLoading=!0)},formatTime(e){const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s.toString().padStart(2,"0")}`},beforeDestroy(){console.log("🎬 Component destroying, starting cleanup"),this.performFullCleanup()},beforeUnmount(){console.log("🎬 Component unmounting, starting cleanup"),this.performFullCleanup()},async performFullCleanup(){try{await this.handleNavigationCleanup(),this.removeAllEventListeners(),console.log("🎬 Component cleanup completed successfully")}catch(e){console.error("🎬 Error during component cleanup:",e),this.removeAllEventListeners(),this.resetPageStyles()}},removeAllEventListeners(){try{window.removeEventListener("popstate",this.handleBackNavigation),this.isMobile&&this.enableAutoRotate&&(window.removeEventListener("orientationchange",this.handleOrientationChange),window.removeEventListener("resize",this.checkOrientation),document.removeEventListener("fullscreenchange",this.handleFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange),document.removeEventListener("mozfullscreenchange",this.handleFullscreenChange),document.removeEventListener("MSFullscreenChange",this.handleFullscreenChange)),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("online",this.handleNetworkRecovery),window.removeEventListener("beforeunload",this.handlePageUnload),window.removeEventListener("pagehide",this.handlePageUnload),console.log("🎬 All event listeners removed")}catch(e){console.error("🎬 Error removing event listeners:",e)}},onProgressBarClick(e){if(this.player&&"function"===typeof this.player.currentTime&&"function"===typeof this.player.duration&&!this.isDragging){const t=e.currentTarget,s=e.clientX-t.getBoundingClientRect().left,a=t.offsetWidth,i=s/a*this.duration;this.player.currentTime(i),this.isLoading=!0}},onQualityChange(){if(!this.player||!this.player.tech().hls)return;const e=this.player.tech().hls.representations(),t=parseInt(this.selectedQuality);"Auto"===this.selectedQuality?e.forEach(e=>e.enabled(!0)):e.forEach(e=>{e.enabled(e.height===t)})},handleTouch(e){this.touchStartTime=Date.now(),this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.showControls=!0,this.controlsTimeout&&clearTimeout(this.controlsTimeout);const t=Date.now(),s=t-this.lastTapTime;s<300&&s>0&&(this.togglePlay(),e.preventDefault()),this.lastTapTime=t},handleTouchEnd(e){const t=Date.now()-this.touchStartTime;!this.touchMoved&&t<200&&(e.target.closest(".custom-controls-overlay")||this.toggleControlsVisibility()),this.touchStartX=null,this.touchStartY=null,this.touchMoved=!1,this.isPlaying&&this.startHideTimer(),setTimeout(()=>{this.isSeeking=!1},200)},toggleControlsVisibility(){this.showControls=!this.showControls,this.showControls&&this.startHideTimer()},handleVideoClick(e){this.isSeeking?this.isSeeking=!1:e.target.closest(".custom-controls-overlay")||(this.handleMobileAudioInteraction(),this.toggleControlsVisibility())},handleTouchStart(e){this.touchStartTime=Date.now(),this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.touchMoved=!1,this.showControls=!0,this.handleMobileAudioInteraction();const t=this.touchStartTime-this.lastTapTime;t<300&&t>0&&(e.target.closest(".custom-controls-overlay")||(this.togglePlay(),e.preventDefault())),this.lastTapTime=this.touchStartTime},handleTouchMove(e){if(!this.touchStartX||!this.touchStartY||!this.isDragging)return;e.preventDefault();const t=e.touches[0].clientX,s=e.touches[0].clientY,a=t-this.touchStartX,i=s-this.touchStartY;(Math.abs(a)>3||Math.abs(i)>3)&&(this.touchMoved=!0);const o=e.currentTarget,r=o.getBoundingClientRect(),l=t-r.left,n=r.width,c=Math.max(0,Math.min(l,n)),d=c/n,u=d*this.duration;if(this.player&&"function"===typeof this.player.currentTime){const e=Math.max(0,Math.min(u,this.duration));Math.abs(e-this.currentTime)>.5&&(this.player.currentTime(e),this.currentTime=e,this.playedPercent=e/this.duration*100,this.isLoading=!0)}this.isSeeking=!0},startHideTimer(){this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.isPlaying&&(this.controlsTimeout=setTimeout(()=>{this.isDragging||this.isSeeking||(this.showControls=!1)},this.controlsTimeoutDuration))},async handleBackClick(){console.log("🎬 Back button clicked"),await this.handleNavigationCleanup(),this.$emit("close")},cleanupVideoPlayer(){if(console.log("🎬 Starting video player cleanup"),this.player)try{this.player.pause(),this.player.muted(!0),this.player.volume(0),this.handleMobileAudioCleanup(),this.player.off("timeupdate"),this.player.off("progress"),this.player.off("play"),this.player.off("pause"),this.player.off("ended"),this.player.off("loadedmetadata"),this.player.off("loadstart"),this.player.off("loadeddata"),this.player.off("waiting"),this.player.off("playing"),this.player.off("error"),this.player.off("canplay"),this.player.off("canplaythrough"),this.player.off("stalled"),this.player.off("suspend"),this.player.off("abort"),this.player.src(""),this.player.reset(),this.player.dispose(),this.player=null,console.log("🎬 Video player disposed successfully")}catch(e){console.error("🎬 Error disposing video player:",e),this.player=null}this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.controlsTimeout=null),this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=null),this.isPlaying=!1,this.currentTime=0,this.duration=0,this.isLoading=!1,this.isFullscreen=!1,this.showControls=!0,this.isDragging=!1,this.isSeeking=!1,this.userPaused=!1,this.pauseRecoveryAttempts=0,console.log("🎬 Video player cleanup completed")},handleBackNavigation(){console.log("🎬 Back navigation detected"),this.handleNavigationCleanup()},async handleNavigationCleanup(){console.log("🎬 Starting navigation cleanup");try{this.isFullscreen&&await this.exitFullscreen(),this.cleanupVideoPlayer(),this.emergencyScrollReset(),this.resetPageStyles(),this.restorePageScroll(),console.log("🎬 Navigation cleanup completed")}catch(e){console.error("🎬 Navigation cleanup error:",e),this.emergencyScrollReset()}},emergencyScrollReset(){try{console.log("🎬 EMERGENCY SCROLL RESET"),document.body.style.cssText="",document.documentElement.style.cssText="",document.body.style.overflow="auto",document.body.style.position="static",document.body.style.height="auto",document.body.style.width="auto",document.body.style.transform="none",document.body.style.willChange="auto",document.body.style.touchAction="auto",document.body.style.pointerEvents="auto",document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto",document.body.style.webkitOverflowScrolling="touch",document.documentElement.style.overflow="auto",document.documentElement.style.height="auto",document.documentElement.style.position="static",document.body.classList.remove("vjs-fullscreen","video-playing","no-scroll"),document.documentElement.classList.remove("vjs-fullscreen","video-playing","no-scroll"),window.scrollTo(0,1),window.scrollTo(0,0),console.log("🎬 Emergency scroll reset completed")}catch(e){console.error("🎬 Emergency scroll reset error:",e)}},resetPageStyles(){try{console.log("🎬 Starting page styles reset"),this.originalBodyStyles&&Object.keys(this.originalBodyStyles).length>0?(console.log("🎬 Restoring original body styles:",this.originalBodyStyles),document.body.style.overflow=this.originalBodyStyles.overflow||"auto",document.body.style.position=this.originalBodyStyles.position||"static",document.body.style.height=this.originalBodyStyles.height||"auto",document.body.style.touchAction=this.originalBodyStyles.touchAction||"auto",document.body.style.userSelect=this.originalBodyStyles.userSelect||"auto",document.body.style.pointerEvents=this.originalBodyStyles.pointerEvents||"auto"):(console.log("🎬 No original styles found, using fallback"),document.body.style.overflow="auto",document.body.style.position="static",document.body.style.height="auto",document.body.style.touchAction="auto",document.body.style.userSelect="auto",document.body.style.pointerEvents="auto"),document.body.style.transform="",document.body.style.willChange="",document.body.style.webkitOverflowScrolling="touch",document.body.style.minHeight="100vh",document.documentElement.style.overflow="auto",document.documentElement.style.height="auto",document.documentElement.style.position="static",document.documentElement.style.touchAction="auto",document.body.classList.remove("vjs-fullscreen","video-playing"),document.documentElement.classList.remove("vjs-fullscreen","video-playing"),document.body.classList.add("force-scrollable"),setTimeout(()=>{document.body.classList.remove("force-scrollable")},1e3);const e=document.querySelector('meta[name="viewport"]');e&&e.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=yes"),console.log("🎬 Page styles reset completed")}catch(e){console.error("🎬 Error resetting page styles:",e),document.body.style.overflow="auto",document.documentElement.style.overflow="auto",document.body.style.position="static",document.body.style.height="auto"}},restorePageScroll(){try{console.log("🎬 Starting scroll restoration");const e=[()=>(console.log("🎬 Scroll restore attempt 1"),document.body.style.overflow="auto",document.documentElement.style.overflow="auto",window.scrollTo(0,0),Promise.resolve()),()=>(console.log("🎬 Scroll restore attempt 2"),new Promise(e=>{setTimeout(()=>{document.body.style.height="auto",document.body.style.minHeight="100vh",document.body.style.position="static",document.body.offsetHeight,document.documentElement.offsetHeight,window.dispatchEvent(new Event("resize")),window.scrollTo(0,1),window.scrollTo(0,0),e()},50)})),()=>(console.log("🎬 Scroll restore attempt 3"),new Promise(e=>{setTimeout(()=>{const t=document.body,s=document.documentElement;["overflow","position","height","width","transform","touchAction"].forEach(e=>{t.style[e]="",s.style[e]=""}),t.style.overflow="auto",t.style.position="static",t.style.height="auto",s.style.overflow="auto",t.offsetHeight,e()},100)})),()=>(console.log("🎬 Scroll restore attempt 4 (nuclear)"),new Promise(e=>{setTimeout(()=>{document.body.className=document.body.className.replace(/vjs-\S+/g,""),document.documentElement.className=document.documentElement.className.replace(/vjs-\S+/g,""),document.body.style.cssText="overflow: auto !important; position: static !important; height: auto !important;",document.documentElement.style.cssText="overflow: auto !important; height: auto !important;",window.scrollTo(0,0),e()},200)}))];e.reduce((e,t)=>e.then(t),Promise.resolve()).then(()=>{console.log("🎬 All scroll restoration attempts completed")})}catch(e){console.error("🎬 Error restoring page scroll:",e),document.body.style.overflow="auto",document.documentElement.style.overflow="auto",document.body.style.position="static",document.body.style.height="auto"}},checkOrientation(){window.screen?.orientation?.type?this.isLandscape=window.screen.orientation.type.includes("landscape"):void 0!==window.orientation?this.isLandscape=90===Math.abs(window.orientation):this.isLandscape=window.innerWidth>window.innerHeight},handleProgressBarTouchStart(e){e.preventDefault(),this.isDragging=!0,this.touchStartTime=Date.now(),this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.touchMoved=!1,this.showControls=!0,this.showControlsTemporarily();const t=e.currentTarget;t.classList.add("progress-bar-active"),navigator.vibrate&&navigator.vibrate(50),this.player&&this.isPlaying&&(this.player.pause(),this.wasPlayingBeforeSeek=!0),this.isLoading=!0},handleProgressBarTouchMove(e){if(!this.touchStartX||!this.touchStartY||!this.isDragging)return;e.preventDefault();const t=e.touches[0].clientX,s=e.touches[0].clientY,a=t-this.touchStartX,i=s-this.touchStartY;(Math.abs(a)>3||Math.abs(i)>3)&&(this.touchMoved=!0);const o=e.currentTarget,r=o.getBoundingClientRect(),l=t-r.left,n=r.width,c=Math.max(0,Math.min(l,n)),d=c/n,u=d*this.duration;if(this.player&&"function"===typeof this.player.currentTime){const e=Math.max(0,Math.min(u,this.duration));Math.abs(e-this.currentTime)>.5&&(this.player.currentTime(e),this.currentTime=e,this.playedPercent=e/this.duration*100,this.isLoading=!0)}this.isSeeking=!0},handleProgressBarTouchEnd(e){this.isDragging=!1;const t=Date.now()-this.touchStartTime,s=e.currentTarget;if(s.classList.remove("progress-bar-active"),this.wasPlayingBeforeSeek&&this.player&&(this.player.play().catch(e=>{console.log("Failed to resume after seek:",e)}),this.wasPlayingBeforeSeek=!1),!this.touchMoved&&t<200){const t=e.currentTarget,s=t.getBoundingClientRect(),a=e.changedTouches[0].clientX-s.left,i=s.width,o=a/i,r=o*this.duration;this.player&&"function"===typeof this.player.currentTime&&this.player.currentTime(Math.max(0,Math.min(r,this.duration))),navigator.vibrate&&navigator.vibrate(30)}this.touchStartX=null,this.touchStartY=null,this.touchMoved=!1,setTimeout(()=>{this.player&&this.player.readyState()>=2&&(this.isLoading=!1)},500),setTimeout(()=>{this.isSeeking=!1},200)}}};const Wr=(0,se.A)(Br,[["render",Nr]]);var Qr=Wr;const qr={key:0,class:"advertisement-player"},zr={class:"ad-overlay"},Kr={class:"ad-container"},Hr={class:"ad-header"},Jr={class:"ad-controls"},Yr={key:0,class:"skip-timer"},Gr={class:"video-container"},Zr=["src"],el={class:"ad-info"},tl={class:"ad-title"},sl={class:"ad-description"};function al(e,t,s,a,o,r){return o.showAd?((0,i.uX)(),(0,i.CE)("div",qr,[(0,i.Lk)("div",zr,[(0,i.Lk)("div",Kr,[(0,i.Lk)("div",Hr,[t[8]||(t[8]=(0,i.Lk)("div",{class:"ad-badge"},[(0,i.Lk)("i",{class:"fas fa-ad"}),(0,i.eW)(" Advertisement ")],-1)),(0,i.Lk)("div",Jr,[o.canSkip?((0,i.uX)(),(0,i.CE)("span",Yr," Skip in "+(0,n.v_)(o.skipCountdown)+"s ",1)):(0,i.Q3)("",!0),o.canSkip&&o.skipCountdown<=0?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>r.skipAd&&r.skipAd(...e)),class:"skip-button"}," Skip Ad ")):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.closeAd&&r.closeAd(...e)),class:"close-button"},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])]),(0,i.Lk)("div",Gr,[(0,i.Lk)("video",{ref:"videoPlayer",src:o.currentAd.video_file,onLoadedmetadata:t[2]||(t[2]=(...e)=>r.onVideoLoad&&r.onVideoLoad(...e)),onTimeupdate:t[3]||(t[3]=(...e)=>r.onTimeUpdate&&r.onTimeUpdate(...e)),onEnded:t[4]||(t[4]=(...e)=>r.onAdEnd&&r.onAdEnd(...e)),onClick:t[5]||(t[5]=(...e)=>r.onAdClick&&r.onAdClick(...e)),class:"ad-video",controls:"",preload:"metadata"}," Your browser does not support the video tag. ",40,Zr)]),(0,i.Lk)("div",el,[(0,i.Lk)("h3",tl,(0,n.v_)(o.currentAd.title),1),(0,i.Lk)("p",sl,(0,n.v_)(o.currentAd.description),1),o.currentAd.external_url?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[6]||(t[6]=(...e)=>r.onAdClick&&r.onAdClick(...e)),class:"cta-button"},(0,n.v_)(o.currentAd.call_to_action||"Learn More"),1)):(0,i.Q3)("",!0)])])])])):(0,i.Q3)("",!0)}const il="https://ott.no1news.in",ol=S.A.create({baseURL:il,headers:{"Content-Type":"application/json"}});ol.interceptors.request.use(e=>{const t=localStorage.getItem("token");t&&(e.headers.Authorization=`Bearer ${t}`);const s=localStorage.getItem("csrfToken");return s&&["post","put","delete","patch"].includes(e.method?.toLowerCase())&&(e.headers["X-CSRFToken"]=s),e},e=>Promise.reject(e)),ol.interceptors.response.use(e=>e,e=>{if(401===e.response?.status){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.setItem("isAuthenticated","false");const e=window.location.hash.slice(1);window.location.href.includes("/login")||(window.location.href=`/#/login?redirect=${encodeURIComponent(e)}`)}return Promise.reject(e)});const rl={toggle:e=>ol.post("/api/watchlist/toggle/",{content_id:e}),getStatus:e=>ol.get(`/api/watchlist/status/?content_id=${e}`),getList:()=>ol.get("/api/watchlist/")};var ll=ol,nl={name:"AdvertisementPlayer",props:{videoId:{type:Number,required:!0},userId:{type:Number,required:!0},adType:{type:String,default:"pre_roll"}},data(){return{showAd:!1,currentAd:null,adQueue:[],currentAdIndex:0,skipCountdown:0,canSkip:!1,videoDuration:0,watchedDuration:0,impressionTracked:!1}},async mounted(){await this.loadAdvertisements()},methods:{async loadAdvertisements(){console.log("🔍 Loading advertisements for video:",this.videoId,"adType:",this.adType);try{const e=await ll.get(`/api/video/${this.videoId}/ads/`);console.log("📡 API Response:",e.data);const t=e.data[this.adType]||[];console.log("📺 Ads for",this.adType,":",t),t.length>0?(this.adQueue=t,this.showAd=!0,console.log("✅ Showing ads, queue length:",this.adQueue.length),this.playNextAd()):(console.log("❌ No ads found for type:",this.adType),this.$emit("no-ads"))}catch(e){console.error("❌ Error loading advertisements:",e),this.$emit("no-ads")}},playNextAd(){this.currentAdIndex<this.adQueue.length?(this.currentAd=this.adQueue[this.currentAdIndex],this.skipCountdown=this.currentAd.skip_after||0,this.canSkip=this.currentAd.skip_after>0,this.$nextTick(()=>{this.$refs.videoPlayer&&(this.$refs.videoPlayer.play(),this.trackImpression())})):this.finishAdSequence()},onVideoLoad(){this.videoDuration=this.$refs.videoPlayer.duration},onTimeUpdate(){this.$refs.videoPlayer&&(this.watchedDuration=this.$refs.videoPlayer.currentTime,this.canSkip&&this.skipCountdown>0&&(this.skipCountdown=Math.max(0,this.currentAd.skip_after-this.watchedDuration)))},onAdEnd(){this.currentAdIndex++,this.currentAdIndex<this.adQueue.length?this.playNextAd():this.finishAdSequence()},skipAd(){this.currentAdIndex++,this.currentAdIndex<this.adQueue.length?this.playNextAd():this.finishAdSequence()},closeAd(){this.finishAdSequence()},async onAdClick(){this.currentAd&&this.currentAd.external_url&&(await this.trackClick(),window.open(this.currentAd.external_url,"_blank"))},async trackImpression(){if(!this.impressionTracked&&this.currentAd)try{await ll.post(`/api/advertisements/${this.currentAd.id}/track_impression/`,{user_id:this.userId,video_id:this.videoId,impression_type:this.adType}),this.impressionTracked=!0}catch(e){console.error("Error tracking impression:",e)}},async trackClick(){if(this.currentAd)try{await ll.post(`/api/advertisements/${this.currentAd.id}/track_click/`,{user_id:this.userId,video_id:this.videoId})}catch(e){console.error("Error tracking click:",e)}},finishAdSequence(){this.showAd=!1,this.$emit("ads-finished")}}};const cl=(0,se.A)(nl,[["render",al],["__scopeId","data-v-3a41b2de"]]);var dl=cl;const ul={key:0,class:"banner-ad"},hl=["src","alt"],pl={class:"banner-overlay"},ml={class:"banner-content"},gl={class:"banner-title"},fl={class:"banner-description"},vl={class:"banner-cta"};function yl(e,t,s,a,o,r){return o.currentAd?((0,i.uX)(),(0,i.CE)("div",ul,[(0,i.Lk)("div",{class:"banner-container",onClick:t[0]||(t[0]=(...e)=>r.onAdClick&&r.onAdClick(...e))},[(0,i.Lk)("img",{src:o.currentAd.banner_image,alt:o.currentAd.title,class:"banner-image"},null,8,hl),(0,i.Lk)("div",pl,[(0,i.Lk)("div",ml,[(0,i.Lk)("h3",gl,(0,n.v_)(o.currentAd.title),1),(0,i.Lk)("p",fl,(0,n.v_)(o.currentAd.description),1),(0,i.Lk)("button",vl,(0,n.v_)(o.currentAd.call_to_action||"Learn More"),1)]),t[1]||(t[1]=(0,i.Lk)("div",{class:"banner-badge"},[(0,i.Lk)("i",{class:"fas fa-ad"}),(0,i.eW)(" Ad ")],-1))])])])):(0,i.Q3)("",!0)}var bl={name:"BannerAd",props:{position:{type:String,default:"top"},userId:{type:Number,required:!0}},data(){return{currentAd:null,ads:[],currentIndex:0,rotationInterval:null}},async mounted(){await this.loadBannerAds(),this.startRotation()},beforeUnmount(){this.rotationInterval&&clearInterval(this.rotationInterval)},methods:{async loadBannerAds(){try{const e=await ll.get("/api/ads/banner/");this.ads=e.data.filter(e=>e.is_active_now),this.ads.length>0&&(this.currentAd=this.ads[0],this.trackImpression())}catch(e){console.error("Error loading banner ads:",e)}},startRotation(){this.ads.length>1&&(this.rotationInterval=setInterval(()=>{this.rotateAd()},1e4))},rotateAd(){this.currentIndex=(this.currentIndex+1)%this.ads.length,this.currentAd=this.ads[this.currentIndex],this.trackImpression()},async onAdClick(){this.currentAd&&this.currentAd.external_url&&(await this.trackClick(),window.open(this.currentAd.external_url,"_blank"))},async trackImpression(){if(this.currentAd)try{await ll.post(`/api/advertisements/${this.currentAd.id}/track_impression/`,{user_id:this.userId,impression_type:"banner"})}catch(e){console.error("Error tracking banner impression:",e)}},async trackClick(){if(this.currentAd)try{await ll.post(`/api/advertisements/${this.currentAd.id}/track_click/`,{user_id:this.userId})}catch(e){console.error("Error tracking banner click:",e)}}}};const kl=(0,se.A)(bl,[["render",yl],["__scopeId","data-v-34b8934a"]]);var wl=kl,xl={name:"VideoPlayer",components:{AdvancedVideoPlayer:Qr,AdvertisementPlayer:dl,BannerAd:wl},data(){return{playerVisible:!1,showAds:!1,currentVideoId:null,currentAdType:"pre_roll",user:null,currentStream:{url:"",title:"",type:"hls",isLive:!1,drmConfig:null},hlsStreamUrl:"https://noonenews.s3.ap-south-1.amazonaws.com/videos/hls/7/hls/master.m3u8",dashStreamUrl:"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd",drmStreamUrl:"https://media.axprod.net/TestVectors/v7-MultiDRM-SingleKey/Manifest.mpd",drmConfig:{servers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},clearKeys:{e4a2359a99d24d5797d10c86da322026:"cb541084c99731aef4fff74500c12ead"}}}},mounted(){this.loadUserData()},methods:{loadUserData(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},openPlayer(e,t,s,a=!1,i=null){this.currentVideoId=1,this.currentAdType="pre_roll",this.showAds=!0,this.currentStream={url:t,title:s,type:e,isLive:a,drmConfig:i}},onAdsFinished(){this.showAds=!1,this.playerVisible=!0},onNoAds(){this.showAds=!1,this.playerVisible=!0}}};const Ll=(0,se.A)(xl,[["render",vr]]);var Cl=Ll;const Sl={class:"movie-details-wrapper bg-[#121212] text-white min-h-screen"},_l={class:"hide-on-mobile header-with-gradient"},Pl={class:"movie-detail-container"},El={class:"movie-backdrop"},Al=["src"],Tl={key:0,class:"video-container"},Il={key:0,class:"video-loading"},Ml=["poster"],Vl=["src"],Dl={class:"movie-info-container"},Rl={class:"movie-badges"},jl={key:0,class:"badge premium"},Xl={key:1,class:"badge quality"},$l={class:"movie-title"},Fl={class:"movie-meta"},Ul={class:"badge premium"},Ol={key:0},Nl={key:1,class:"premium-price ml-2"},Bl={key:0,class:"movie-tags"},Wl={key:0,class:"tag"},Ql={key:1,class:"tag"},ql={class:"movie-description"},zl={class:"action-buttons"},Kl={class:"pl-4 sm:pl-6 md:pl-10 py-4 space-y-8 relative overflow-hidden"},Hl={class:"flex justify-between items-center mb-3 pr-4"},Jl={class:"gradient-text font-semibold text-base md:text-lg"},Yl={class:"relative carousel-container"},Gl={class:"flex gap-4 pr-4 carousel-inner-container"},Zl=["onClick"],en={class:"relative rounded-md overflow-hidden card-container"},tn=["src","alt"],sn={key:0,class:"absolute top-2 right-2"},an={key:1,class:"absolute top-2 left-2"},on={class:"related-movie-title mt-1 text-xs font-semibold truncate card-text"},rn={class:"relative carousel-container"},ln={class:"flex gap-4 pr-4 carousel-inner-container"},nn=["onClick"],cn={class:"relative rounded-md overflow-hidden card-container"},dn=["src","alt"],un={key:0,class:"absolute top-2 right-2 flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff0062] shadow"},hn={key:1,class:"absolute bottom-2 left-2"},pn={class:"related-movie-title mt-1 text-xs font-semibold truncate card-text"},mn={key:1,class:"payment-popup-overlay"},gn={class:"payment-popup"},fn={class:"popup-header"},vn={class:"popup-content"},yn={class:"movie-preview"},bn=["src"],kn={class:"movie-info"},wn={class:"movie-title"},xn={class:"flex items-center gap-2 text-sm text-white/60"},Ln={key:0},Cn={key:1,class:"dot-divider"},Sn={key:2,class:"payment-popup-overlay"},_n={class:"payment-popup"},Pn={class:"popup-header"},En={class:"flex items-center gap-3"},An={class:"text-xl font-bold"},Tn={class:"text-sm text-white/60"},In={class:"popup-content"},Mn={class:"movie-preview"},Vn=["src"],Dn={class:"movie-info"},Rn={class:"movie-title"},jn={class:"flex items-center gap-2 text-sm text-white/60"},Xn={key:0},$n={key:1,class:"dot-divider"},Fn={class:"rental-details bg-white/5 rounded-lg p-4 my-4"},Un={class:"flex justify-between items-center mb-2"},On={class:"text-xl font-bold"},Nn={class:"flex justify-between items-center"},Bn={class:"text-center text-sm text-white/60 mt-4"},Wn={key:3,class:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},Qn={class:"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6"},qn={class:"flex justify-between items-center mb-6"},zn={class:"text-xl font-bold"},Kn={class:"flex items-center gap-4 mb-6 p-4 bg-[#121212] rounded-lg"},Hn=["src","alt"],Jn={class:"flex-1"},Yn={class:"font-semibold text-white mb-1"},Gn={class:"text-sm text-gray-400 line-clamp-2"},Zn={class:"grid grid-cols-2 gap-4 mb-6"},ec={class:"mb-6"},tc={class:"relative"},sc=["value"];function ac(e,t,s,o,r,l){const c=(0,i.g2)("AdvancedVideoPlayer"),d=(0,i.g2)("AppHeader"),u=(0,i.g2)("AppFooter");return(0,i.uX)(),(0,i.CE)("div",Sl,[r.isVideoPlaying?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"advanced-video-player-modal",onMousemove:t[0]||(t[0]=(...e)=>l.showControlsOnInteraction&&l.showControlsOnInteraction(...e)),onTouchstart:t[1]||(t[1]=(...e)=>l.showControlsOnInteraction&&l.showControlsOnInteraction(...e)),onClick:t[2]||(t[2]=(...e)=>l.toggleControlsVisibility&&l.toggleControlsVisibility(...e))},[(0,i.bF)(c,{ref:"videoPlayer",src:r.videoUrl,title:r.movie.title,"video-id":r.movie.id,"user-id":l.currentUserId,streamType:r.streamType,autoplay:!0,isLive:!1,drmConfig:r.drmConfig,controlsVisible:r.controlsVisible,onClose:l.closeVideo,onPlay:l.onVideoPlay,onPause:l.onVideoPause,onInteraction:l.showControlsOnInteraction,onError:l.handleVideoError},null,8,["src","title","video-id","user-id","streamType","drmConfig","controlsVisible","onClose","onPlay","onPause","onInteraction","onError"])],32)):(0,i.Q3)("",!0),(0,i.Lk)("div",_l,[(0,i.bF)(d,{onToggleSearch:l.toggleSearch,hideBackButton:!0},null,8,["onToggleSearch"])]),(0,i.Lk)("div",Pl,[(0,i.Lk)("div",El,[(0,i.bo)((0,i.Lk)("img",{src:r.isMobileDevice&&r.movie.portrait_thumbnail_url?r.movie.portrait_thumbnail_url:r.movie.thumbnail_url,alt:"Movie Thumbnail",class:(0,n.C4)(["backdrop-image",{"portrait-mobile":r.isMobileDevice&&r.movie.portrait_thumbnail_url}])},null,10,Al),[[a.aG,!r.isPromoPlaying&&!r.isPromoLoading]]),r.movie.promo_hls_url?((0,i.uX)(),(0,i.CE)("div",Tl,[r.isPromoLoading?((0,i.uX)(),(0,i.CE)("div",Il)):(0,i.Q3)("",!0),(0,i.bo)((0,i.Lk)("video",{ref:"heroVideo",class:"backdrop-video",poster:r.movie.thumbnail_url,autoplay:"",muted:"",loop:"",playsinline:"",preload:"auto",onLoadeddata:t[3]||(t[3]=(...e)=>l.onPromoVideoLoaded&&l.onPromoVideoLoaded(...e)),onEnded:t[4]||(t[4]=(...e)=>l.handlePromoVideoEnd&&l.handlePromoVideoEnd(...e)),onError:t[5]||(t[5]=(...e)=>l.handlePromoVideoError&&l.handlePromoVideoError(...e)),onWaiting:t[6]||(t[6]=(...e)=>l.onPromoVideoWaiting&&l.onPromoVideoWaiting(...e)),onPlaying:t[7]||(t[7]=(...e)=>l.onPromoVideoPlaying&&l.onPromoVideoPlaying(...e)),onCanplay:t[8]||(t[8]=(...e)=>l.onPromoVideoCanPlay&&l.onPromoVideoCanPlay(...e)),style:{width:"100vw","max-width":"100vw","aspect-ratio":"16/9","object-fit":"contain",background:"#000",display:"block",margin:"0 auto","max-height":"70vh"}},[(0,i.Lk)("source",{src:r.movie.promo_hls_url,type:"application/x-mpegURL"},null,8,Vl)],40,Ml),[[a.aG,r.isPromoPlaying&&!r.isPromoLoading]])])):(0,i.Q3)("",!0),t[33]||(t[33]=(0,i.Lk)("div",{class:"backdrop-gradient"},null,-1))]),(0,i.Lk)("button",{class:"back-btn mobile-only-element",onClick:t[9]||(t[9]=(...e)=>l.goBack&&l.goBack(...e))},t[34]||(t[34]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1)])),(0,i.Lk)("div",Dl,[(0,i.Lk)("div",Rl,["paid"===r.movie.video_type?((0,i.uX)(),(0,i.CE)("span",jl,t[35]||(t[35]=[(0,i.Lk)("i",{class:"fas fa-crown mr-1"},null,-1),(0,i.eW)(" Premium ")]))):(0,i.Q3)("",!0),r.movie.is4K?((0,i.uX)(),(0,i.CE)("span",Xl,"4K")):(0,i.Q3)("",!0)]),(0,i.Lk)("h1",$l,(0,n.v_)(r.movie.title),1),(0,i.Lk)("div",Fl,[(0,i.Lk)("span",null,(0,n.v_)(l.movieYear),1),t[39]||(t[39]=(0,i.Lk)("span",{class:"dot-divider"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(l.formattedDuration),1),t[40]||(t[40]=(0,i.Lk)("span",{class:"dot-divider"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(l.categoryName),1),"rental"===r.movie.video_type&&r.movie.prices&&r.movie.prices.length&&!r.isUserSubscribed?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[t[38]||(t[38]=(0,i.Lk)("span",{class:"dot-divider"},null,-1)),(0,i.Lk)("span",Ul,[t[36]||(t[36]=(0,i.Lk)("i",{class:"fas fa-ticket-alt mr-1"},null,-1)),t[37]||(t[37]=(0,i.eW)(" Rental: ")),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.movie.prices,(e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:e.id},[(0,i.eW)(" ₹"+(0,n.v_)(e.rental_price)+" for "+(0,n.v_)(l.formatWatchPeriod(e.rental_duration)),1),t<r.movie.prices.length-1?((0,i.uX)(),(0,i.CE)("span",Ol,", ")):(0,i.Q3)("",!0)],64))),128))])],64)):(0,i.Q3)("",!0),"paid"===r.movie.video_type&&r.movie.rental_price?((0,i.uX)(),(0,i.CE)("span",Nl," ₹"+(0,n.v_)(r.movie.rental_price),1)):(0,i.Q3)("",!0)]),r.movie.mood1||r.movie.mood2?((0,i.uX)(),(0,i.CE)("div",Bl,[r.movie.mood1?((0,i.uX)(),(0,i.CE)("span",Wl,(0,n.v_)(r.movie.mood1),1)):(0,i.Q3)("",!0),r.movie.mood2?((0,i.uX)(),(0,i.CE)("span",Ql,(0,n.v_)(r.movie.mood2),1)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.Lk)("p",ql,(0,n.v_)(r.movie.description),1),(0,i.Lk)("div",zl,[l.shouldShowPromoButton?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"play-button",onClick:t[10]||(t[10]=(...e)=>l.playPromo&&l.playPromo(...e))},t[41]||(t[41]=[(0,i.Lk)("i",{class:"fas fa-film"},null,-1),(0,i.Lk)("span",null,"Promo",-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"play-button",onClick:t[11]||(t[11]=(...e)=>l.playMovie&&l.playMovie(...e))},t[42]||(t[42]=[(0,i.Lk)("i",{class:"fas fa-play"},null,-1),(0,i.Lk)("span",null,"Full Video",-1)])),(0,i.Lk)("button",{class:(0,n.C4)(["secondary-button",{"in-watchlist":r.isInWatchlist}]),onClick:t[12]||(t[12]=(...e)=>l.toggleWatchlist&&l.toggleWatchlist(...e))},[(0,i.Lk)("i",{class:(0,n.C4)(["fas",r.isInWatchlist?"fa-bookmark":"fa-bookmark-o"])},null,2),(0,i.eW)(" "+(0,n.v_)(r.isInWatchlist?"Remove from Watchlist":"Add to Watchlist"),1)],2),(0,i.Lk)("button",{class:"action-button",onClick:t[13]||(t[13]=(...e)=>l.shareMovie&&l.shareMovie(...e))},t[43]||(t[43]=[(0,i.Lk)("i",{class:"fas fa-share-alt"},null,-1),(0,i.Lk)("span",{class:"action-label"},"Share",-1)]))])])]),(0,i.Lk)("main",Kl,[(0,i.Lk)("section",null,[(0,i.Lk)("div",Hl,[(0,i.Lk)("h2",Jl,(0,n.v_)(l.categoryName),1),(0,i.Lk)("a",{class:"text-white font-semibold text-sm hover:underline whitespace-nowrap cursor-pointer",onClick:t[14]||(t[14]=(...e)=>l.navigateToCategory&&l.navigateToCategory(...e))}," View All ")]),(0,i.Lk)("div",Yl,[r.canScrollLeft.category?((0,i.uX)(),(0,i.CE)("button",{key:0,"aria-label":"Previous Category Videos",class:"scroll-button left-scroll-button",onClick:t[15]||(t[15]=e=>l.scrollLeft("categoryContainer"))},t[44]||(t[44]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-container snap-x snap-mandatory",ref:"categoryContainer",onScroll:t[16]||(t[16]=e=>l.checkScrollButtons("categoryContainer","category"))},[(0,i.Lk)("div",Gl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.categoryVideos,(e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"related-movie-card snap-start",onClick:t=>l.navigateToMovie(e.id)},[(0,i.Lk)("div",en,[(0,i.Lk)("img",{src:e.portrait_thumbnail_url||e.thumbnail_url||e.poster_url,alt:e.title,class:"related-movie-image"},null,8,tn),"paid"===e.video_type?((0,i.uX)(),(0,i.CE)("div",sn,t[45]||(t[45]=[(0,i.Lk)("span",{class:"bg-gradient-to-r from-[#c30059] to-[#ff0062] text-white text-xs px-2 py-1 rounded-full font-semibold"},[(0,i.Lk)("i",{class:"fas fa-crown mr-1"}),(0,i.eW)("Premium ")],-1)]))):(0,i.Q3)("",!0),e.is4K?((0,i.uX)(),(0,i.CE)("div",an,t[46]||(t[46]=[(0,i.Lk)("span",{class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-semibold"}," 4K ",-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("p",on,(0,n.v_)(l.capitalizeText(e.title)),1)],8,Zl))),128))])],544),r.canScrollRight.category?((0,i.uX)(),(0,i.CE)("button",{key:1,"aria-label":"Next Category Videos",class:"scroll-button right-scroll-button",onClick:t[17]||(t[17]=e=>l.scrollRight("categoryContainer"))},t[47]||(t[47]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))):(0,i.Q3)("",!0)])]),(0,i.Lk)("section",null,[t[52]||(t[52]=(0,i.Lk)("div",{class:"flex justify-between items-center mb-3 pr-4"},[(0,i.Lk)("h2",{class:"gradient-text font-semibold text-base md:text-lg"}," Recently Added ")],-1)),(0,i.Lk)("div",rn,[r.canScrollLeft.recentlyAdded?((0,i.uX)(),(0,i.CE)("button",{key:0,"aria-label":"Previous Recently Added",class:"scroll-button left-scroll-button",onClick:t[18]||(t[18]=e=>l.scrollLeft("recentlyAddedContainer"))},t[48]||(t[48]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-container snap-x snap-mandatory",ref:"recentlyAddedContainer",onScroll:t[19]||(t[19]=e=>l.checkScrollButtons("recentlyAddedContainer","recentlyAdded"))},[(0,i.Lk)("div",ln,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.recentlyAddedVideos,(e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"related-movie-card snap-start",onClick:t=>l.navigateToMovie(e.id)},[(0,i.Lk)("div",cn,[(0,i.Lk)("img",{src:e.portrait_thumbnail_url||e.thumbnail_url||e.poster_url,alt:e.title,class:"related-movie-image"},null,8,dn),"paid"===e.video_type?((0,i.uX)(),(0,i.CE)("div",un,t[49]||(t[49]=[(0,i.Lk)("i",{class:"fas fa-crown text-white text-base"},null,-1)]))):(0,i.Q3)("",!0),e.is4K?((0,i.uX)(),(0,i.CE)("div",hn,t[50]||(t[50]=[(0,i.Lk)("span",{class:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-semibold"}," 4K ",-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("p",pn,(0,n.v_)(l.capitalizeText(e.title)),1)],8,nn))),128))])],544),r.canScrollRight.recentlyAdded?((0,i.uX)(),(0,i.CE)("button",{key:1,"aria-label":"Next Recently Added",class:"scroll-button right-scroll-button",onClick:t[20]||(t[20]=e=>l.scrollRight("recentlyAddedContainer"))},t[51]||(t[51]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))):(0,i.Q3)("",!0)])])]),(0,i.Lk)("div",{class:(0,n.C4)(["mobile-search-bar",{active:r.isSearchActive}])},[t[54]||(t[54]=(0,i.Lk)("input",{type:"text",placeholder:"Search movies, shows and more..."},null,-1)),(0,i.Lk)("button",{class:"text-white",onClick:t[21]||(t[21]=(...e)=>l.toggleSearch&&l.toggleSearch(...e))},t[53]||(t[53]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))],2),r.showPaymentPopup?((0,i.uX)(),(0,i.CE)("div",mn,[(0,i.Lk)("div",gn,[(0,i.Lk)("div",fn,[t[56]||(t[56]=(0,i.Fv)('<div class="flex items-center gap-3" data-v-277a9f42><div class="premium-badge" data-v-277a9f42><i class="fas fa-crown" data-v-277a9f42></i></div><div data-v-277a9f42><h2 class="text-xl font-bold" data-v-277a9f42>Premium Content</h2><p class="text-sm text-white/60" data-v-277a9f42>Subscribe to Continue Watching</p></div></div>',1)),(0,i.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>l.closePaymentPopup&&l.closePaymentPopup(...e)),class:"close-button"},t[55]||(t[55]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",vn,[(0,i.Lk)("div",yn,[(0,i.Lk)("img",{src:r.movie.thumbnail_url||r.movie.poster_url,alt:"Movie Thumbnail",class:"popup-thumbnail"},null,8,bn),(0,i.Lk)("div",kn,[(0,i.Lk)("h3",wn,(0,n.v_)(r.movie.title),1),(0,i.Lk)("div",xn,[l.formattedDuration?((0,i.uX)(),(0,i.CE)("span",Ln,(0,n.v_)(l.formattedDuration),1)):(0,i.Q3)("",!0),l.formattedDuration&&l.categoryName?((0,i.uX)(),(0,i.CE)("span",Cn)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,n.v_)(l.categoryName),1)])])]),t[58]||(t[58]=(0,i.Fv)('<div class="premium-features" data-v-277a9f42><h4 class="text-lg font-semibold mb-4" data-v-277a9f42>Premium Benefits</h4><div class="features-grid" data-v-277a9f42><div class="feature-item" data-v-277a9f42><i class="fas fa-film text-[#c30059]" data-v-277a9f42></i><div data-v-277a9f42><p class="font-medium" data-v-277a9f42>All Premium Content</p><p class="text-sm text-white/60" data-v-277a9f42>Unlimited access to premium movies &amp; shows</p></div></div><div class="feature-item" data-v-277a9f42><i class="fas fa-tv text-[#c30059]" data-v-277a9f42></i><div data-v-277a9f42><p class="font-medium" data-v-277a9f42>Watch on Any Device</p><p class="text-sm text-white/60" data-v-277a9f42>TV, laptop, phone, or tablet</p></div></div><div class="feature-item" data-v-277a9f42><i class="fas fa-ban text-[#c30059]" data-v-277a9f42></i><div data-v-277a9f42><p class="font-medium" data-v-277a9f42>Ad-Free Experience</p><p class="text-sm text-white/60" data-v-277a9f42>Uninterrupted entertainment</p></div></div></div></div>',1)),(0,i.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>l.handleSubscribe&&l.handleSubscribe(...e)),class:"subscribe-button"},t[57]||(t[57]=[(0,i.Lk)("span",null,"View Plans & Subscribe",-1),(0,i.Lk)("i",{class:"fas fa-arrow-right"},null,-1)])),t[59]||(t[59]=(0,i.Lk)("p",{class:"text-center text-sm text-white/60 mt-4"}," Plans start from ₹365/year (₹1/day) ",-1))])])])):(0,i.Q3)("",!0),r.showRentalPopup?((0,i.uX)(),(0,i.CE)("div",Sn,[(0,i.Lk)("div",_n,[(0,i.Lk)("div",Pn,[(0,i.Lk)("div",En,[t[60]||(t[60]=(0,i.Lk)("div",{class:"premium-badge"},[(0,i.Lk)("i",{class:"fas fa-ticket-alt"})],-1)),(0,i.Lk)("div",null,[(0,i.Lk)("h2",An,(0,n.v_)(r.movie.title),1),(0,i.Lk)("p",Tn,(0,n.v_)(l.formatWatchPeriod(r.movie.prices[0].rental_duration))+" Rental ",1)])]),(0,i.Lk)("button",{onClick:t[24]||(t[24]=e=>r.showRentalPopup=!1),class:"close-button"},t[61]||(t[61]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",In,[(0,i.Lk)("div",Mn,[(0,i.Lk)("img",{src:r.movie.thumbnail_url||r.movie.poster_url,alt:"Movie Thumbnail",class:"popup-thumbnail"},null,8,Vn),(0,i.Lk)("div",Dn,[(0,i.Lk)("h3",Rn,(0,n.v_)(r.movie.title),1),(0,i.Lk)("div",jn,[l.formattedDuration?((0,i.uX)(),(0,i.CE)("span",Xn,(0,n.v_)(l.formattedDuration),1)):(0,i.Q3)("",!0),l.formattedDuration&&l.categoryName?((0,i.uX)(),(0,i.CE)("span",$n)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,n.v_)(l.categoryName),1)])])]),(0,i.Lk)("div",Fn,[(0,i.Lk)("div",Un,[t[62]||(t[62]=(0,i.Lk)("span",{class:"text-white/60"},"Rental Price",-1)),(0,i.Lk)("span",On,"₹"+(0,n.v_)(r.movie.prices[0].rental_price),1)]),(0,i.Lk)("div",Nn,[t[63]||(t[63]=(0,i.Lk)("span",{class:"text-white/60"},"Watch Period",-1)),(0,i.Lk)("span",null,(0,n.v_)(l.formatWatchPeriod(r.movie.prices[0].rental_duration)),1)])]),(0,i.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>l.goToRentalPayment&&l.goToRentalPayment(...e)),class:"subscribe-button"},[(0,i.Lk)("span",null,"Rent for "+(0,n.v_)(l.formatWatchPeriod(r.movie.prices[0].rental_duration))+" at ₹"+(0,n.v_)(r.movie.prices[0].rental_price),1),t[64]||(t[64]=(0,i.Lk)("i",{class:"fas fa-arrow-right"},null,-1))]),(0,i.Lk)("p",Bn," Available to watch for "+(0,n.v_)(l.formatWatchPeriod(r.movie.prices[0].rental_duration))+" after payment ",1)])])])):(0,i.Q3)("",!0),(0,i.bF)(u),r.showShareDialog?((0,i.uX)(),(0,i.CE)("div",Wn,[(0,i.Lk)("div",Qn,[(0,i.Lk)("div",qn,[(0,i.Lk)("h3",zn,'Share "'+(0,n.v_)(r.movie.title)+'"',1),(0,i.Lk)("button",{onClick:t[26]||(t[26]=e=>r.showShareDialog=!1),class:"text-white/60 hover:text-white"},t[65]||(t[65]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",Kn,[(0,i.Lk)("img",{src:r.movie.thumbnail_url||r.movie.portrait_thumbnail_url||r.movie.poster_url,alt:r.movie.title,class:"w-16 h-24 object-cover rounded-lg"},null,8,Hn),(0,i.Lk)("div",Jn,[(0,i.Lk)("h4",Yn,(0,n.v_)(r.movie.title),1),(0,i.Lk)("p",Gn,(0,n.v_)(r.movie.description),1)])]),(0,i.Lk)("div",Zn,[(0,i.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>l.shareToWhatsAppWithImage&&l.shareToWhatsAppWithImage(...e)),class:"flex items-center gap-3 bg-[#25D366]/10 p-4 rounded-lg hover:bg-[#25D366]/20 transition-all"},t[66]||(t[66]=[(0,i.Lk)("i",{class:"fab fa-whatsapp text-[#25D366] text-2xl"},null,-1),(0,i.Lk)("span",null,"WhatsApp",-1)])),(0,i.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>l.shareToFacebook&&l.shareToFacebook(...e)),class:"flex items-center gap-3 bg-[#1877F2]/10 p-4 rounded-lg hover:bg-[#1877F2]/20 transition-all"},t[67]||(t[67]=[(0,i.Lk)("i",{class:"fab fa-facebook text-[#1877F2] text-2xl"},null,-1),(0,i.Lk)("span",null,"Facebook",-1)])),(0,i.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>l.shareToTwitter&&l.shareToTwitter(...e)),class:"flex items-center gap-3 bg-[#1DA1F2]/10 p-4 rounded-lg hover:bg-[#1DA1F2]/20 transition-all"},t[68]||(t[68]=[(0,i.Lk)("i",{class:"fab fa-twitter text-[#1DA1F2] text-2xl"},null,-1),(0,i.Lk)("span",null,"Twitter",-1)])),(0,i.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>l.copyShareLink&&l.copyShareLink(...e)),class:"flex items-center gap-3 bg-white/10 p-4 rounded-lg hover:bg-white/20 transition-all"},t[69]||(t[69]=[(0,i.Lk)("i",{class:"fas fa-link text-white text-2xl"},null,-1),(0,i.Lk)("span",null,"Copy Link",-1)]))]),(0,i.Lk)("div",ec,[(0,i.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>l.testSocialPreview&&l.testSocialPreview(...e)),class:"w-full flex items-center justify-center gap-3 bg-[#c30059]/10 p-4 rounded-lg hover:bg-[#c30059]/20 transition-all border border-[#c30059]/20"},t[70]||(t[70]=[(0,i.Lk)("i",{class:"fas fa-eye text-[#c30059] text-xl"},null,-1),(0,i.Lk)("span",{class:"text-[#c30059] font-medium"},"Test Social Media Preview",-1)]))]),(0,i.Lk)("div",tc,[(0,i.Lk)("input",{ref:"shareLink",type:"text",value:l.shareUrl,class:"w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 pr-24 text-white focus:border-[#c30059] focus:outline-none transition-colors",readonly:""},null,8,sc),(0,i.Lk)("button",{onClick:t[32]||(t[32]=(...e)=>l.copyShareLink&&l.copyShareLink(...e)),class:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-[#c30059] hover:text-[#a80048] transition-colors"},(0,n.v_)(r.copyStatus),1)])])])):(0,i.Q3)("",!0)])}const ic="https://ott.no1news.in",oc=S.A.create({baseURL:ic,headers:{"Content-Type":"application/json"}});oc.interceptors.request.use(e=>{const t=A.getters.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));var rc={name:"MovieDetails",components:{AppHeader:bt,AppFooter:Es,AdvancedVideoPlayer:Qr},props:{id:{type:[Number,String],required:!0}},data(){return{movie:{},inWatchlist:!1,isSearchActive:!1,isVideoPlaying:!1,controlsVisible:!0,isVideoPaused:!1,controlsTimeout:null,isMobileDevice:!1,videoInteractionDelay:2500,videoUrl:"",streamType:"hls",isUserSubscribed:!1,promoStartDelay:3e3,drmConfig:{servers:{"com.widevine.alpha":"https://license.url/widevine"},clearKeys:{}},playerSettings:{defaultQuality:"auto",preferredQualityIndex:1,skipInterval:10,keyboardShortcutsEnabled:!0,rememberLastPosition:!0,autoQualitySwitch:!0},canScrollLeft:{category:!1,related:!1,recentlyAdded:!1},canScrollRight:{category:!0,related:!0,recentlyAdded:!0},categoryVideos:[],recentlyAddedVideos:[],relatedMovies:[{id:101,title:"Midnight Mystery",thumbnail_url:"https://i.ibb.co/cDfWsvC/related1.jpg",portrait_thumbnail_url:"https://i.ibb.co/cDfWsvC/related1.jpg",video_type:"free"},{id:102,title:"The Stranger",thumbnail_url:"https://i.ibb.co/DkFnm7g/related2.jpg",portrait_thumbnail_url:"https://i.ibb.co/DkFnm7g/related2.jpg",video_type:"paid"},{id:103,title:"Dark Echo",thumbnail_url:"https://i.ibb.co/MRVvFDZ/related3.jpg",portrait_thumbnail_url:"https://i.ibb.co/MRVvFDZ/related3.jpg",video_type:"free"},{id:104,title:"Silent Night",thumbnail_url:"https://i.ibb.co/5cG2WXF/related4.jpg",portrait_thumbnail_url:"https://i.ibb.co/5cG2WXF/related4.jpg",video_type:"rental"},{id:105,title:"The Guilty",thumbnail_url:"https://i.ibb.co/mBVR2KM/related5.jpg",portrait_thumbnail_url:"https://i.ibb.co/mBVR2KM/related5.jpg",video_type:"free"},{id:106,title:"Trance",thumbnail_url:"https://i.ibb.co/hWD1BXg/related6.jpg",portrait_thumbnail_url:"https://i.ibb.co/hWD1BXg/related6.jpg",video_type:"paid"},{id:107,title:"Haunted House",thumbnail_url:"https://i.ibb.co/k8DQzTF/related7.jpg",portrait_thumbnail_url:"https://i.ibb.co/k8DQzTF/related7.jpg",video_type:"free"},{id:108,title:"Night Watch",thumbnail_url:"https://i.ibb.co/hyCJTBL/related8.jpg",portrait_thumbnail_url:"https://i.ibb.co/hyCJTBL/related8.jpg",video_type:"rental"},{id:109,title:"The Missing",thumbnail_url:"https://i.ibb.co/dj8rS0M/related9.jpg",portrait_thumbnail_url:"https://i.ibb.co/dj8rS0M/related9.jpg",video_type:"free"},{id:110,title:"Fear Factor",thumbnail_url:"https://i.ibb.co/8XvX1fL/related10.jpg",portrait_thumbnail_url:"https://i.ibb.co/8XvX1fL/related10.jpg",video_type:"paid"},{id:111,title:"Paranormal",thumbnail_url:"https://i.ibb.co/r57Kzc5/related11.jpg",portrait_thumbnail_url:"https://i.ibb.co/r57Kzc5/related11.jpg",video_type:"free"},{id:112,title:"Last Breath",thumbnail_url:"https://i.ibb.co/B6wS7HK/related12.jpg",portrait_thumbnail_url:"https://i.ibb.co/B6wS7HK/related12.jpg",video_type:"rental"}],heroVideo:null,hls:null,showPaymentPopup:!1,userSubscriptionStatus:null,showRentalPopup:!1,rentalInfo:null,isSubscribed:!1,isPromoLoading:!0,promoVideoError:null,isPlayingPromo:!1,isInWatchlist:!1,showShareDialog:!1,copyStatus:"Copy",promoHasError:!1,videojsPlayer:null,isPromoPlaying:!1}},computed:{currentUserId(){const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);return t.id||1}catch(t){return 1}return 1},computedStreamType(){return this.videoUrl.includes(".m3u8")?"hls":this.videoUrl.includes(".mpd")?"dash":(this.videoUrl.includes(".mp4"),"mp4")},movieYear(){return this.movie&&this.movie.created_at?new Date(this.movie.created_at).getFullYear():(new Date).getFullYear()},formattedDuration(){if(!this.movie||!this.movie.duration)return"";const e=parseInt(this.movie.duration);if(isNaN(e))return"";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return 0===t?`${s}m`:0===s?`${t}h`:`${t}h ${s}m`},categoryName(){return this.movie&&this.movie.category_name||""},formattedCategories(){return this.movie&&this.movie.categories?this.movie.categories.map(e=>e.name).join(", "):""},shareUrl(){return"undefined"!==typeof window?window.location.href:""},shouldShowPromoButton(){return this.movie&&this.movie.promo_hls_url&&""!==this.movie.promo_hls_url.trim()&&!this.promoHasError}},watch:{$route(){window.scrollTo(0,0),this.fetchMovieDetails().then(()=>{this.$nextTick(()=>{this.initializeHeroVideo()})})},videoUrl:{immediate:!0,handler(e){e&&(this.streamType=this.computedStreamType)}},movie:{immediate:!0,handler(e){e&&(e.promo_hls_url||e.promo_video_url)&&this.$nextTick(()=>{this.initializeHeroVideo()}),e&&this.$nextTick(()=>{this.updateMetaTags()})}},isPromoPlaying(e){console.log("isPromoPlaying changed:",e)}},mounted(){this.initializeHeroVideo(),this.$nextTick(()=>{this.checkScrollButtons("categoryContainer","category"),this.checkScrollButtons("relatedContainer","related"),this.checkScrollButtons("recentlyAddedContainer","recentlyAdded"),this.checkDeviceType(),window.addEventListener("resize",this.checkDeviceType),window.addEventListener("scroll",this.handleScroll),this.movie&&this.updateMetaTags()})},beforeUnmount(){this.hls&&this.hls.destroy(),window.removeEventListener("resize",this.checkDeviceType),window.removeEventListener("scroll",this.handleScroll),this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.videojsPlayer&&(this.videojsPlayer.dispose(),this.videojsPlayer=null)},created(){this.$route.params.videoUrl&&(this.videoUrl=this.$route.params.videoUrl,this.streamType=this.$route.params.videoType||"hls"),this.checkUserSubscription().then(e=>{this.isUserSubscribed=e}),this.fetchMovieDetails(),this.loadPlayerPreferences(),this.checkWatchlistStatus()},methods:{formatWatchPeriod(e){return e?`${e} ${1===e?"day":"days"}`:""},loadPlayerPreferences(){const e=localStorage.getItem("player-preferences");if(e)try{const t=JSON.parse(e);Object.keys(this.playerSettings).forEach(e=>{void 0!==t[e]&&(this.playerSettings[e]=t[e])})}catch(t){console.error("Error parsing saved player preferences",t)}},savePlayerPreferences(){localStorage.setItem("player-preferences",JSON.stringify(this.playerSettings))},initializeHeroVideo(){const e=this.$refs.heroVideo;if(!e)return void console.error("Video element not found");const t=this.movie.promo_hls_url||this.movie.video_url;t&&t.includes(".m3u8")?(this.videojsPlayer&&this.videojsPlayer.dispose(),e.muted=!0,this.videojsPlayer=(0,Ot.A)(e,{sources:[{src:t,type:"application/x-mpegURL"}],controls:!0,autoplay:!0,muted:!0,preload:"auto",fluid:!0}),this.videojsPlayer.ready(()=>{this.isPromoLoading=!1,this.videojsPlayer.muted(!0),this.videojsPlayer.play().catch(e=>{console.error("Auto-play prevented:",e)})}),this.videojsPlayer.on("error",()=>{this.promoVideoError=this.videojsPlayer.error(),console.error("Video.js error:",this.promoVideoError)})):console.error("Invalid or missing HLS URL")},onPromoVideoCanPlay(){console.log("Video can play");const e=this.$refs.heroVideo;e&&e.play().catch(e=>{console.error("Play failed:",e)})},onPromoVideoLoaded(){console.log("Promo video loaded successfully"),this.isPromoLoading=!1;const e=this.$refs.heroVideo;e&&(e.classList.add("playing"),e.muted=!0,e.play().catch(e=>{console.error("Play failed:",e)}))},onPromoVideoWaiting(){console.log("Promo video waiting/buffering"),this.isPromoLoading=!0},onPromoVideoPlaying(){this.isPromoPlaying=!0,this.isPromoLoading=!1;const e=this.$refs.heroVideo;e&&e.classList.add("playing")},handlePromoVideoError(e){console.error("Promo video error:",e),this.promoVideoError=e;const t=this.$refs.heroVideo;t&&t.classList.remove("playing")},async checkUserSubscription(){try{const e=localStorage.getItem("phone");if(!e)return!1;const t=await S.A.get(`${ic}/users/profile/?phone=${e}`);if(console.log("Subscription API response:",t.data),t.data&&"success"===t.data.status){const e=t.data.user;if(console.log("User from API:",e),e.is_subscribed&&e.subscription_end_date){const t=new Date(e.subscription_end_date),s=new Date,a=t>s;return console.log("is_subscribed:",e.is_subscribed,"endDate:",t,"now:",s,"isActive:",a),a}}return!1}catch(e){return console.error("Error checking subscription:",e),!1}},async checkRentalStatus(){try{const e=localStorage.getItem("phone");if(!e)return null;const t=await S.A.get(`${ic}/api/rentals/check/?phone=${e}&video_id=${this.movie.id}`);return t.data&&"success"===t.data.status?t.data.rental:null}catch(e){return console.error("Error checking rental status:",e),null}},goToRentalPayment(){this.showRentalPopup=!1,this.$router.push(`/movie/${this.movie.id}/rent`)},async playMovie(){try{if(console.log("playMovie() called - checking video URL"),!this.movie.hls_url)throw new Error("No video URL available");const e=await this.checkUserSubscription();if(console.log("User subscription status:",e),"rental"===this.movie.video_type){if(e)console.log("Premium user - playing directly"),this.controlsVisible=!0,this.isVideoPaused=!1,this.isVideoPlaying=!0,this.videoUrl=this.movie.hls_url,this.streamType="hls",document.body.style.overflow="hidden",this.$nextTick(()=>{if(!this.$refs.videoPlayer)throw console.error("Video player reference not found"),new Error("Video player initialization failed");this.resetControlsTimer()});else{console.log("Free user - checking rental status");const e=await this.checkRentalStatus();e&&e.is_active?(console.log("Active rental found - playing video"),this.controlsVisible=!0,this.isVideoPaused=!1,this.isVideoPlaying=!0,this.videoUrl=this.movie.hls_url,this.streamType="hls",document.body.style.overflow="hidden",this.$nextTick(()=>{if(!this.$refs.videoPlayer)throw console.error("Video player reference not found"),new Error("Video player initialization failed");this.resetControlsTimer()})):(console.log("No active rental - redirecting to rental page"),this.$router.push(`/movie/${this.movie.id}/rent`))}return}if("paid"===this.movie.video_type&&!e)return void this.$router.push({name:"SubscriptionPlans",query:{redirect:this.$route.fullPath,video_id:this.movie.id}});console.log("Playing free/paid video"),this.controlsVisible=!0,this.isVideoPaused=!1,this.isVideoPlaying=!0,this.videoUrl=this.movie.hls_url,this.streamType="hls",document.body.style.overflow="hidden",this.$nextTick(()=>{if(!this.$refs.videoPlayer)throw console.error("Video player reference not found"),new Error("Video player initialization failed");this.resetControlsTimer()})}catch(e){console.error("Error playing video:",e),this.$store.dispatch("showToast",{message:"Sorry, the video is not available at the moment. Please try again later.",type:"error"}),this.isVideoPlaying=!1,document.body.style.overflow="auto"}},closeVideo(){this.isVideoPlaying=!1,this.isPlayingPromo=!1,this.savePlayerPreferences(),document.body.style.overflow=""},async toggleWatchlist(){try{const e="true"===localStorage.getItem("isAuthenticated"),t=localStorage.getItem("token");if(!e||!t){const e=this.$route.fullPath;return void this.$router.push({path:"/login",query:{redirect:e}})}this.$store.commit("setLoading",!0);const s=await rl.toggle(this.id);"success"===s.data.status&&(this.isInWatchlist=s.data.in_watchlist,this.$store.dispatch("showToast",{message:s.data.message,type:"success"}))}catch(e){console.error("Error toggling watchlist:",e),this.$store.dispatch("showToast",{message:"Failed to update watchlist. Please try again.",type:"error"})}finally{this.$store.commit("setLoading",!1)}},async checkWatchlistStatus(){try{const e="true"===localStorage.getItem("isAuthenticated"),t=localStorage.getItem("token");if(!e||!t)return;const s=await rl.getStatus(this.id);this.isInWatchlist=s.data.in_watchlist}catch(e){console.error("Error checking watchlist status:",e)}},shareMovie(){const e=this.shareUrl,t=this.movie.thumbnail_url||this.movie.portrait_thumbnail_url||this.movie.poster_url,s={title:this.movie.title,text:this.movie.description,url:e};t&&(s.files=[t]),"undefined"!==typeof navigator&&navigator.share&&this.isMobileDevice?t&&navigator.canShare&&navigator.canShare(s)?navigator.share(s).then(()=>{this.$store.dispatch("showToast",{message:"Shared successfully with image!",type:"success"})}).catch(e=>{console.error("Error sharing with image:",e),this.shareWithoutImage(this.shareUrl)}):this.shareWithoutImage(this.shareUrl):this.showShareDialog=!0},shareWithoutImage(e){const t={title:this.movie.title,text:this.movie.description,url:e};navigator.share(t).then(()=>{this.$store.dispatch("showToast",{message:"Shared successfully!",type:"success"})}).catch(e=>{console.error("Error sharing:",e),this.showShareDialog=!0})},updateMetaTags(){if(!this.movie)return;const e=this.movie.thumbnail_url||this.movie.portrait_thumbnail_url||this.movie.poster_url,t=this.shareUrl,s=this.movie.title,a=this.movie.description;console.log("Updating meta tags for:",s),console.log("Image URL:",e),console.log("Share URL:",t),this.updateMetaTag("og:title",s),this.updateMetaTag("og:description",a),this.updateMetaTag("og:image",e),this.updateMetaTag("og:url",t),this.updateMetaTag("og:type","video.movie"),this.updateMetaTag("og:site_name","No1 OTT"),this.updateMetaTag("twitter:card","summary_large_image"),this.updateMetaTag("twitter:title",s),this.updateMetaTag("twitter:description",a),this.updateMetaTag("twitter:image",e),this.updateMetaTag("twitter:url",t),document.title=`${s} - No1 OTT`,console.log("Meta tags updated successfully")},updateMetaTag(e,t){if(!t)return;let s=document.querySelector(`meta[name="${e}"]`)||document.querySelector(`meta[property="${e}"]`);s||(s=document.createElement("meta"),e.startsWith("og:")?s.setAttribute("property",e):s.setAttribute("name",e),document.head.appendChild(s)),s.setAttribute("content",t)},toggleSearch(){this.isSearchActive=!this.isSearchActive},navigateToMovie(e){window.location.href=`/movie/${e}`},navigateToCategory(){console.log("Navigating to category. Movie data:",this.movie),console.log("Category ID:",this.movie.category_id),console.log("Category:",this.movie.category);const e=this.movie.category_id||this.movie.category;e?(console.log("Navigating to category ID:",e),this.$router.push({name:"CategoryVideos",params:{id:e}})):(console.error("No category ID found in movie data"),this.$store.dispatch("showToast",{message:"Category information not available",type:"error"}))},goBack(){this.$router.go(-1)},capitalizeText(e){return e?e.split(/[\s-]+/).map(e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):""},async fetchMovieDetails(){try{const e=await S.A.get(`${ic}/api/videos/${this.id}/`);if(console.log("API Response:",e.data),!e.data)throw new Error("Invalid response data");if(this.movie={...e.data,title:this.capitalizeText(e.data.title),description:this.capitalizeText(e.data.description)},this.updateMetaTags(),!e.data.hls_url)throw new Error("No video URL available");this.videoUrl=e.data.hls_url,this.streamType="hls",console.log("Set video URL:",this.videoUrl),console.log("Stream type:",this.streamType),await this.fetchCategoryVideos(),await this.fetchRecentlyAddedVideos()}catch(e){console.error("Error fetching movie details:",e),this.$store.dispatch("showToast",{message:"Error loading movie details. Please try again later.",type:"error"})}},async fetchCategoryVideos(){try{if(console.log("Fetching category videos for movie:",this.movie),console.log("Category ID:",this.movie.category_id),console.log("Category Name:",this.movie.category_name),!this.movie.category_id&&!this.movie.category_name)return console.log("No category information available"),void(this.categoryVideos=this.relatedMovies.slice(0,8));const e=this.movie.category_id||this.movie.category;if(!e)return console.log("No category ID found"),void(this.categoryVideos=this.relatedMovies.slice(0,8));const t=await S.A.get(`${ic}/api/videos/category/${e}/?page=1&page_size=12`);if(t.data&&"success"===t.data.status){console.log("Category videos API response:",t.data);let e=t.data.data||[];e=e.filter(e=>e.id!==this.movie.id),this.categoryVideos=e.slice(0,12).map(e=>({...e,title:this.capitalizeText(e.title)})),console.log("Processed category videos:",this.categoryVideos)}else console.log("No API response or invalid status, using fallback data"),this.categoryVideos=this.relatedMovies.slice(0,8);this.$nextTick(()=>{this.checkScrollButtons("categoryContainer","category")})}catch(e){console.error("Error fetching category videos:",e),console.log("Using fallback data due to error"),this.categoryVideos=this.relatedMovies.slice(0,8)}},async fetchRecentlyAddedVideos(){try{console.log("Fetching recently added videos");const e=await S.A.get(`${ic}/api/videos/`,{params:{ordering:"-created_at",limit:20}});let t=[];e.data&&(Array.isArray(e.data)?t=e.data:e.data.results?t=e.data.results:e.data.data&&(t=e.data.data)),t=t.filter(e=>e.id!==this.movie.id),this.recentlyAddedVideos=t.slice(0,12).map(e=>({...e,title:this.capitalizeText(e.title)})),console.log("Processed recently added videos:",this.recentlyAddedVideos),this.$nextTick(()=>{this.checkScrollButtons("recentlyAddedContainer","recentlyAdded")})}catch(e){console.error("Error fetching recently added videos:",e),this.recentlyAddedVideos=this.relatedMovies.slice(0,8)}},checkDeviceType(){this.isMobileDevice=window.innerWidth<768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.videoInteractionDelay=this.isMobileDevice?3500:2500},showControlsOnInteraction(){this.controlsVisible=!0,this.resetControlsTimer()},resetControlsTimer(){this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.isVideoPaused||(this.controlsTimeout=setTimeout(()=>{this.controlsVisible=!1},this.videoInteractionDelay))},toggleControlsVisibility(e){e.preventDefault(),this.controlsVisible=!this.controlsVisible,this.controlsVisible&&!this.isVideoPaused&&this.resetControlsTimer()},onVideoPlay(){this.isVideoPaused=!1,this.resetControlsTimer()},onVideoPause(){this.isVideoPaused=!0,this.controlsVisible=!0,this.controlsTimeout&&clearTimeout(this.controlsTimeout)},handleVideoError(e){console.error("Video playback error:",e),"dash"===this.streamType&&this.videoUrl.includes(".mpd")&&(this.streamType="mp4",this.videoUrl="https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",console.log("Falling back to MP4 format"),this.$refs.videoPlayer&&this.$refs.videoPlayer.retry())},checkScrollButtons(e,t){const s=this.$refs[e];if(!s)return;this.canScrollLeft[t]=s.scrollLeft>0;const a=s.scrollWidth-s.clientWidth;this.canScrollRight[t]=s.scrollLeft<a-1},scrollLeft(e){const t=this.$refs[e];if(!t)return;const s="categoryContainer"===e||"recentlyAddedContainer"===e?160:180,a=t.clientWidth,i=Math.floor(a/s),o=s*i,r=Math.max(0,t.scrollLeft-o);t.scrollTo({left:r,behavior:"smooth"})},scrollRight(e){const t=this.$refs[e];if(!t)return;const s="categoryContainer"===e||"recentlyAddedContainer"===e?160:180,a=t.clientWidth,i=Math.floor(a/s),o=s*i,r=t.scrollWidth-t.clientWidth,l=Math.min(r,t.scrollLeft+o);t.scrollTo({left:l,behavior:"smooth"})},handleScroll(){const e=document.querySelector(".header-with-gradient");e&&(window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled"))},handleSubscribe(){this.showPaymentPopup=!1,this.$router.push({name:"SubscriptionPlans",query:{redirect:this.$route.fullPath,video_id:this.movie.id}})},closePaymentPopup(){this.showPaymentPopup=!1},handlePromoVideoEnd(){console.log("Promo video ended");const e=this.$refs.heroVideo;e&&(e.currentTime=0,e.play().catch(e=>{console.log("Error replaying promo video:",e)})),this.isPromoPlaying=!1},initVideoJsPlayer(e,t){e&&(e._videojsPlayer||(e._videojsPlayer=(0,Ot.A)(e,{controls:!0,autoplay:!0,muted:!0,preload:"auto",fluid:!0}),e._videojsPlayer.on("error",()=>{this.promoVideoError=e._videojsPlayer.error(),console.error("Video.js error:",this.promoVideoError)})),e._videojsPlayer.currentSrc()!==t&&e._videojsPlayer.src({src:t,type:"application/x-mpegURL"}),this.isPromoPlaying=!1,e._videojsPlayer.off("playing"),e._videojsPlayer.on("playing",()=>{this.isPromoPlaying=!0,this.$forceUpdate(),console.log("video.js playing event fired, isPromoPlaying set to true")}),e._videojsPlayer.ready(()=>{e._videojsPlayer.muted(!0),e._videojsPlayer.play().then(()=>{console.log("Video should be playing"),console.log("Player state:",e._videojsPlayer.paused(),e._videojsPlayer.currentSrc())}).catch(e=>{console.error("Auto-play prevented:",e)})}),e.addEventListener("error",e=>{console.error("Native video error:",e)}))},async playPromo(){try{if(!this.movie.promo_hls_url)throw new Error("No promo video URL available");this.controlsVisible=!0,this.isVideoPaused=!1,this.isVideoPlaying=!0,this.isPlayingPromo=!0,this.videoUrl=this.movie.promo_hls_url,this.streamType="hls",document.body.style.overflow="hidden",this.$nextTick(()=>{const e=this.$refs.heroVideo;if(!e)throw new Error("Video player initialization failed");e.muted=!0,this.initVideoJsPlayer(e,this.movie.promo_hls_url)})}catch(e){console.error("Error playing promo video:",e),this.promoHasError=!0,this.$store.dispatch("showToast",{message:"Sorry, the promo video is not available at the moment. Please try again later.",type:"error"}),this.isVideoPlaying=!1,this.isPlayingPromo=!1,document.body.style.overflow="auto"}},shareToWhatsApp(){const e=this.movie.thumbnail_url||this.movie.portrait_thumbnail_url||this.movie.poster_url,t=`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n${this.shareUrl}`;if(e&&this.isMobileDevice){const s={title:this.movie.title,text:t,url:this.shareUrl,files:[e]};navigator.canShare&&navigator.canShare(s)?navigator.share(s).then(()=>{this.$store.dispatch("showToast",{message:"Shared to WhatsApp with image!",type:"success"})}).catch(e=>{console.error("WhatsApp share error:",e),this.shareToWhatsAppTextOnly(t)}):this.shareToWhatsAppTextOnly(t)}else this.shareToWhatsAppTextOnly(t);this.showShareDialog=!1},shareToWhatsAppTextOnly(e){const t=`${e}\n\n${this.shareUrl}`,s=`https://wa.me/?text=${encodeURIComponent(t)}`;"undefined"!==typeof window&&window.open(s,"_blank")},async shareToWhatsAppWithImage(){try{const e=this.movie.thumbnail_url||this.movie.portrait_thumbnail_url||this.movie.poster_url;if(!e)return void this.shareToWhatsAppTextOnly(`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n${this.shareUrl}`);const t=document.createElement("canvas"),s=t.getContext("2d");t.width=600,t.height=400;const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{s.drawImage(a,0,0,t.width,t.height),s.fillStyle="rgba(0, 0, 0, 0.6)",s.fillRect(0,t.height-120,t.width,120),s.fillStyle="white",s.font="bold 24px Arial",s.textAlign="center",s.fillText(this.movie.title,t.width/2,t.height-80),s.font="16px Arial",s.fillText("Watch on No1 OTT",t.width/2,t.height-50),t.toBlob(e=>{if(e){const t=new File([e],"movie-share.jpg",{type:"image/jpeg"}),s={title:this.movie.title,text:`Check out "${this.movie.title}" on No1 OTT!\n\n${this.shareUrl}`,files:[t]};navigator.canShare&&navigator.canShare(s)?navigator.share(s).then(()=>{this.$store.dispatch("showToast",{message:"Shared to WhatsApp with image!",type:"success"})}).catch(e=>{console.error("WhatsApp share error:",e),this.shareToWhatsAppTextOnly(`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n${this.shareUrl}`)}):this.shareToWhatsAppTextOnly(`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n${this.shareUrl}`)}},"image/jpeg",.8)},a.onerror=()=>{this.shareToWhatsAppTextOnly(`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n${this.shareUrl}`)},a.src=e}catch(e){console.error("Error creating WhatsApp image share:",e),this.shareToWhatsAppTextOnly(`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n${this.shareUrl}`)}},shareToFacebook(){const e=this.movie.thumbnail_url||this.movie.portrait_thumbnail_url||this.movie.poster_url;let t=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.shareUrl)}`;e&&(t+=`&picture=${encodeURIComponent(e)}`),"undefined"!==typeof window&&window.open(t,"_blank"),this.showShareDialog=!1},shareToTwitter(){const e=this.movie.thumbnail_url||this.movie.portrait_thumbnail_url||this.movie.poster_url,t=`Check out "${this.movie.title}" on No1 OTT!`;let s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(this.shareUrl)}`;e&&(s+=`&image=${encodeURIComponent(e)}`),"undefined"!==typeof window&&window.open(s,"_blank"),this.showShareDialog=!1},async copyShareLink(){if("undefined"!==typeof navigator)try{await navigator.clipboard.writeText(this.shareUrl),this.copyStatus="Copied!",this.$store.dispatch("showToast",{message:"Link copied to clipboard!",type:"success"}),setTimeout(()=>{this.copyStatus="Copy"},2e3)}catch(e){console.error("Failed to copy:",e),this.$refs.shareLink&&(this.$refs.shareLink.select(),document.execCommand("copy"),this.copyStatus="Copied!",setTimeout(()=>{this.copyStatus="Copy"},2e3))}},testSocialPreview(){const e=`${window.location.origin}/movie/${this.movie.id}?test=true`;console.log("Testing social preview with URL:",e),window.open(e,"_blank"),this.$store.dispatch("showToast",{message:"Social preview test opened in new tab!",type:"info"})}}};const lc=(0,se.A)(rc,[["render",ac],["__scopeId","data-v-277a9f42"]]);var nc=lc;const cc={class:"regional-content-page min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"},dc={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80"},uc={class:"container mx-auto px-4 pt-6 pb-2 flex items-center"},hc={class:"container mx-auto px-4 mb-4"},pc={class:"flex flex-wrap items-center gap-2"},mc=["onClick"],gc={key:1,class:"container mx-auto px-4 mb-8"},fc={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},vc=["onClick"],yc={class:"relative w-full pb-[100%] overflow-hidden"},bc={key:0,class:"absolute inset-0 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 animate-pulse"},kc=["src","alt","onLoad"],wc={class:"p-3"},xc={class:"font-bold text-sm text-center line-clamp-2 group-hover:text-blue-300 transition-colors duration-200"},Lc={key:2,class:"container mx-auto px-4 mb-8"},Cc={class:"mb-6"},Sc={class:"text-gray-300 text-center mb-6"},_c={key:0},Pc={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Ec={key:1,class:"flex flex-col items-center justify-center py-12"},Ac={class:"bg-red-600/20 border border-red-500/30 rounded-2xl p-8 max-w-md text-center"},Tc={class:"text-white/70 mb-6"},Ic={key:2,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},Mc=["onClick"],Vc={class:"relative w-full pb-[100%] overflow-hidden"},Dc={key:0,class:"absolute inset-0 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 animate-pulse"},Rc=["src","alt","onLoad"],jc={class:"p-3"},Xc={class:"font-bold text-sm text-center line-clamp-2 group-hover:text-green-300 transition-colors duration-200"},$c={key:3,class:"container mx-auto px-4 mb-8"},Fc={class:"grid grid-cols-2 gap-4 sm:grid-cols-3"},Uc={class:"filter-card-mobile"},Oc=["src"],Nc=["disabled"],Bc=["value"],Wc={class:"filter-card-mobile"},Qc=["src"],qc=["disabled"],zc=["value"],Kc={class:"filter-card-mobile col-span-2 sm:col-span-1"},Hc=["src"],Jc=["disabled"],Yc=["value"],Gc={key:4,class:"container mx-auto px-4 pb-20 md:pb-8"},Zc={class:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6"},ed=["onClick"],td={class:"relative w-full pb-[56.25%] overflow-hidden"},sd={key:0,class:"absolute inset-0 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 animate-pulse"},ad=["src","alt","onLoad"],id={class:"p-4"},od={class:"font-bold text-lg text-center line-clamp-2 group-hover:text-pink-300 transition-colors duration-200"},rd={key:5,class:"container mx-auto px-4 pb-20 md:pb-8"},ld={key:6,class:"container mx-auto px-4 pb-20 md:pb-8"},nd={class:"flex flex-col items-center justify-center py-12"},cd={class:"bg-red-500/10 border border-red-500/20 rounded-xl p-6 max-w-md text-center"},dd={class:"text-gray-300 mb-4"},ud={key:7,class:"container mx-auto px-4 pb-20 md:pb-8"},hd={class:"flex flex-col items-center justify-center py-16"},pd={class:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-8 max-w-md text-center"};function md(e,t,s,o,r,l){const c=(0,i.g2)("AdvancedVideoPlayer");return(0,i.uX)(),(0,i.CE)("div",cc,[r.showPlayer?((0,i.uX)(),(0,i.CE)("div",dc,[(0,i.bF)(c,{src:r.selectedVideo?.video_url,poster:r.selectedVideo?.thumbnail_url||r.selectedVideo?.thumbnail||r.defaultVideoImg,title:r.selectedVideo?.title,"video-id":r.selectedVideo?.id,"user-id":r.userId,autoplay:!0,onClose:l.closePlayer},null,8,["src","poster","title","video-id","user-id","onClose"]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.closePlayer&&l.closePlayer(...e)),class:"absolute top-4 right-4 text-white text-3xl font-bold"},"×")])):(0,i.Q3)("",!0),(0,i.Lk)("div",uc,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.goBack&&l.goBack(...e)),class:"flex items-center gap-2 px-3 py-1 bg-gray-800 text-white rounded-full text-sm font-medium hover:bg-purple-600 shadow transition-colors"},t[15]||(t[15]=[(0,i.Lk)("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19l-7-7 7-7"})],-1),(0,i.Lk)("span",null,"Back",-1)])),t[16]||(t[16]=(0,i.Lk)("div",{class:"flex-1"},null,-1))]),(0,i.Lk)("div",hc,[(0,i.Lk)("div",pc,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.resetFilters&&l.resetFilters(...e)),class:"flex items-center gap-1 px-3 py-1 bg-gray-700 text-white rounded-full text-sm font-medium hover:bg-blue-600"},t[17]||(t[17]=[(0,i.Lk)("span",null,"All Regions",-1)])),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.breadcrumbItems,(e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:s},[t[18]||(t[18]=(0,i.Lk)("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),(0,i.Lk)("button",{onClick:e=>l.navigateToBreadcrumb(s),class:"flex items-center gap-1 px-3 py-1 bg-gray-800 text-white rounded-full text-sm font-medium hover:bg-purple-600"},[(0,i.Lk)("span",null,(0,n.v_)(e.name),1)],8,mc)],64))),128))])]),r.selectedState?r.selectedState&&!r.selectedDistrict?((0,i.uX)(),(0,i.CE)("div",Lc,[(0,i.Lk)("div",Cc,[t[22]||(t[22]=(0,i.Lk)("h2",{class:"text-2xl font-bold text-white mb-4 text-center"},"Select Your District",-1)),(0,i.Lk)("p",Sc,"Choose your district in "+(0,n.v_)(l.selectedStateObj?.name),1)]),r.loadingDistricts?((0,i.uX)(),(0,i.CE)("div",_c,[t[24]||(t[24]=(0,i.Fv)('<div class="flex flex-col items-center justify-center py-8 mb-6" data-v-3edf604a><div class="relative" data-v-3edf604a><div class="animate-spin rounded-full h-16 w-16 border-4 border-green-600 border-t-transparent" data-v-3edf604a></div><div class="absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-ping" data-v-3edf604a></div></div><div class="mt-6 text-xl font-medium text-white/80" data-v-3edf604a>Loading Districts...</div><div class="mt-2 text-sm text-white/60" data-v-3edf604a>Please wait while we fetch district data</div></div>',1)),(0,i.Lk)("div",Pc,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(8,e=>(0,i.Lk)("div",{key:e,class:"loading-skeleton-card"},t[23]||(t[23]=[(0,i.Lk)("div",{class:"w-full pb-[100%] bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 animate-pulse rounded-t-xl"},null,-1),(0,i.Lk)("div",{class:"p-3"},[(0,i.Lk)("div",{class:"h-4 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 animate-pulse rounded"})],-1)]))),64))])])):r.errorDistricts?((0,i.uX)(),(0,i.CE)("div",Ec,[(0,i.Lk)("div",Ac,[t[25]||(t[25]=(0,i.Lk)("div",{class:"text-red-400 text-6xl mb-4"},"⚠️",-1)),t[26]||(t[26]=(0,i.Lk)("h3",{class:"text-xl font-bold mb-2"},"Error Loading Districts",-1)),(0,i.Lk)("p",Tc,(0,n.v_)(r.errorDistricts),1),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.retryLoadDistricts&&l.retryLoadDistricts(...e)),class:"px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl"}," Try Again ")])])):((0,i.uX)(),(0,i.CE)("div",Ic,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.districts,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.selectDistrict(e),class:"group relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 border border-white/10 hover:border-green-500/50 focus:outline-none focus:ring-2 focus:ring-green-500/30"},[(0,i.Lk)("div",Vc,[e.imageLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Dc)),(0,i.Lk)("img",{src:e.image||r.defaultDistrictImg,alt:e.name,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onLoad:t=>e.imageLoaded=!0,onError:t[5]||(t[5]=(...e)=>l.handleDistrictImageError&&l.handleDistrictImageError(...e)),loading:"lazy"},null,40,Rc),t[27]||(t[27]=(0,i.Fv)('<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-3edf604a></div><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-3edf604a><div class="w-12 h-12 bg-green-500/20 backdrop-blur-sm rounded-full flex items-center justify-center border-2 border-green-400/50" data-v-3edf604a><svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 24 24" data-v-3edf604a><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" data-v-3edf604a></path></svg></div></div>',2))]),(0,i.Lk)("div",jc,[(0,i.Lk)("h3",Xc,(0,n.v_)(e.name),1)]),t[28]||(t[28]=(0,i.Lk)("div",{class:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-green-500/50 transition-all duration-300"},null,-1))],8,Mc))),128))]))])):r.selectedDistrict?((0,i.uX)(),(0,i.CE)("div",$c,[(0,i.Lk)("div",Fc,[(0,i.Lk)("div",Uc,[(0,i.Lk)("img",{src:l.selectedConstituencyObj&&l.selectedConstituencyObj.image?l.selectedConstituencyObj.image:r.defaultConstituencyImg,class:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-yellow-400 shadow mb-2",alt:"Constituency Image"},null,8,Oc),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.selectedConstituency=e),onChange:t[7]||(t[7]=(...e)=>l.onConstituencyChange&&l.onConstituencyChange(...e)),class:"filter-select-mobile",disabled:!r.constituencies.length},[t[29]||(t[29]=(0,i.Lk)("option",{value:""},"Select Constituency",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.constituencies,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,Bc))),128))],40,Nc),[[a.u1,r.selectedConstituency]])]),(0,i.Lk)("div",Wc,[(0,i.Lk)("img",{src:l.selectedMandalObj&&l.selectedMandalObj.image?l.selectedMandalObj.image:r.defaultMandalImg,class:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-purple-400 shadow mb-2",alt:"Mandal Image"},null,8,Qc),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.selectedMandal=e),onChange:t[9]||(t[9]=(...e)=>l.onMandalChange&&l.onMandalChange(...e)),class:"filter-select-mobile",disabled:!r.mandals.length},[t[30]||(t[30]=(0,i.Lk)("option",{value:""},"Select Mandal",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.mandals,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,zc))),128))],40,qc),[[a.u1,r.selectedMandal]])]),(0,i.Lk)("div",Kc,[(0,i.Lk)("img",{src:l.selectedVillageObj&&l.selectedVillageObj.image?l.selectedVillageObj.image:r.defaultVillageImg,class:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-pink-400 shadow mb-2",alt:"Village Image"},null,8,Hc),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>r.selectedVillage=e),onChange:t[11]||(t[11]=(...e)=>l.fetchVideos&&l.fetchVideos(...e)),class:"filter-select-mobile",disabled:!r.villages.length},[t[31]||(t[31]=(0,i.Lk)("option",{value:""},"Select Village",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.villages,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,Yc))),128))],40,Jc),[[a.u1,r.selectedVillage]])])])])):(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",gc,[t[21]||(t[21]=(0,i.Lk)("div",{class:"mb-6"},[(0,i.Lk)("h2",{class:"text-2xl font-bold text-white mb-4 text-center"},"Select Your State"),(0,i.Lk)("p",{class:"text-gray-300 text-center mb-6"},"Choose your state to find regional videos")],-1)),(0,i.Lk)("div",fc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.states,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.selectState(e),class:"group relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 border border-white/10 hover:border-blue-500/50 focus:outline-none focus:ring-2 focus:ring-blue-500/30"},[(0,i.Lk)("div",yc,[e.imageLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",bc)),(0,i.Lk)("img",{src:e.image||r.defaultStateImg,alt:e.name,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onLoad:t=>e.imageLoaded=!0,onError:t[3]||(t[3]=(...e)=>l.handleStateImageError&&l.handleStateImageError(...e)),loading:"lazy"},null,40,kc),t[19]||(t[19]=(0,i.Fv)('<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-3edf604a></div><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-3edf604a><div class="w-12 h-12 bg-blue-500/20 backdrop-blur-sm rounded-full flex items-center justify-center border-2 border-blue-400/50" data-v-3edf604a><svg class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 24 24" data-v-3edf604a><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" data-v-3edf604a></path></svg></div></div>',2))]),(0,i.Lk)("div",wc,[(0,i.Lk)("h3",xc,(0,n.v_)(e.name),1)]),t[20]||(t[20]=(0,i.Lk)("div",{class:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-blue-500/50 transition-all duration-300"},null,-1))],8,vc))),128))])])),r.selectedDistrict&&!r.loadingVideos&&r.videos.length?((0,i.uX)(),(0,i.CE)("div",Gc,[(0,i.Lk)("div",Zc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.videos,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.playVideo(e),class:"group relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-102 hover:-translate-y-1 border border-white/10 hover:border-pink-500/50 focus:outline-none focus:ring-2 focus:ring-pink-500/30"},[(0,i.Lk)("div",td,[e.imageLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",sd)),e.thumbnail_url||e.thumbnail?((0,i.uX)(),(0,i.CE)("img",{key:1,src:e.thumbnail_url||e.thumbnail||r.defaultVideoImg,alt:e.title,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onLoad:t=>e.imageLoaded=!0,onError:t[12]||(t[12]=(...e)=>l.handleImageError&&l.handleImageError(...e)),loading:"lazy"},null,40,ad)):(0,i.Q3)("",!0),t[32]||(t[32]=(0,i.Fv)('<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-3edf604a></div><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-3edf604a><div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border-2 border-white/30" data-v-3edf604a><svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24" data-v-3edf604a><path d="M8 5v14l11-7z" data-v-3edf604a></path></svg></div></div>',2))]),(0,i.Lk)("div",id,[(0,i.Lk)("h3",od,(0,n.v_)(e.title),1)]),t[33]||(t[33]=(0,i.Lk)("div",{class:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-pink-500/50 transition-all duration-300"},null,-1))],8,ed))),128))])])):(0,i.Q3)("",!0),r.selectedDistrict&&r.loadingVideos?((0,i.uX)(),(0,i.CE)("div",rd,t[34]||(t[34]=[(0,i.Fv)('<div class="flex flex-col items-center justify-center py-12" data-v-3edf604a><div class="relative" data-v-3edf604a><div class="animate-spin rounded-full h-16 w-16 border-4 border-purple-500/20 border-t-purple-500" data-v-3edf604a></div><div class="absolute inset-0 flex items-center justify-center" data-v-3edf604a><div class="w-8 h-8 bg-purple-500 rounded-full animate-pulse" data-v-3edf604a></div></div></div><p class="mt-4 text-gray-400 text-lg" data-v-3edf604a>Loading videos...</p></div>',1)]))):(0,i.Q3)("",!0),r.selectedDistrict&&r.errorVideos?((0,i.uX)(),(0,i.CE)("div",ld,[(0,i.Lk)("div",nd,[(0,i.Lk)("div",cd,[t[35]||(t[35]=(0,i.Lk)("svg",{class:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),t[36]||(t[36]=(0,i.Lk)("h3",{class:"text-lg font-semibold text-red-400 mb-2"},"Error",-1)),(0,i.Lk)("p",dd,(0,n.v_)(r.errorVideos),1),(0,i.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>l.fetchVideos&&l.fetchVideos(...e)),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"},"Try Again")])])])):(0,i.Q3)("",!0),!r.selectedDistrict||r.loadingVideos||r.videos.length||r.errorVideos?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ud,[(0,i.Lk)("div",hd,[(0,i.Lk)("div",pd,[t[37]||(t[37]=(0,i.Lk)("svg",{class:"w-16 h-16 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),t[38]||(t[38]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-gray-300 mb-2"},"No Videos Found",-1)),t[39]||(t[39]=(0,i.Lk)("p",{class:"text-gray-400 mb-4"},"No videos found for the selected criteria. Please try selecting a different region.",-1)),(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>l.resetFilters&&l.resetFilters(...e)),class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors"},"View All Videos")])])]))])}const gd=S.A.create({baseURL:"https://ott.no1news.in/api/",timeout:15e3,headers:{"Content-Type":"application/json"}});var fd={name:"RegionalContent",data(){return{states:[],districts:[],constituencies:[],mandals:[],villages:[],videos:[],selectedState:"",selectedDistrict:"",selectedConstituency:"",selectedMandal:"",selectedVillage:"",loadingVideos:!1,loadingDistricts:!1,loadingConstituencies:!1,loadingMandals:!1,loadingVillages:!1,errorVideos:null,errorDistricts:null,errorConstituencies:null,errorMandals:null,errorVillages:null,defaultStateImg:"https://i.pinimg.com/736x/e4/26/4a/e4264af50836a4d71345ad3c6362a1bc.jpg",defaultDistrictImg:"https://i.pinimg.com/736x/e4/26/4a/e4264af50836a4d71345ad3c6362a1bc.jpg",defaultConstituencyImg:"https://i.pinimg.com/736x/e4/26/4a/e4264af50836a4d71345ad3c6362a1bc.jpg",defaultMandalImg:"https://i.pinimg.com/736x/e4/26/4a/e4264af50836a4d71345ad3c6362a1bc.jpg",defaultVillageImg:"https://i.pinimg.com/736x/e4/26/4a/e4264af50836a4d71345ad3c6362a1bc.jpg",defaultVideoImg:"https://i.pinimg.com/736x/e4/26/4a/e4264af50836a4d71345ad3c6362a1bc.jpg",showPlayer:!1,selectedVideo:null,userId:1}},computed:{selectedStateObj(){return this.states.find(e=>e.id===this.selectedState)||null},selectedDistrictObj(){return this.districts.find(e=>e.id===this.selectedDistrict)||null},selectedConstituencyObj(){return this.constituencies.find(e=>e.id===this.selectedConstituency)||null},selectedMandalObj(){return this.mandals.find(e=>e.id===this.selectedMandal)||null},selectedVillageObj(){return this.villages.find(e=>e.id===this.selectedVillage)||null},breadcrumbItems(){const e=[];return this.selectedStateObj&&e.push({name:this.selectedStateObj.name,image:this.selectedStateObj.image||this.defaultStateImg}),this.selectedDistrictObj&&e.push({name:this.selectedDistrictObj.name,image:this.selectedDistrictObj.image||this.defaultDistrictImg}),this.selectedConstituencyObj&&e.push({name:this.selectedConstituencyObj.name,image:this.selectedConstituencyObj.image||this.defaultConstituencyImg}),this.selectedMandalObj&&e.push({name:this.selectedMandalObj.name,image:this.selectedMandalObj.image||this.defaultMandalImg}),this.selectedVillageObj&&e.push({name:this.selectedVillageObj.name,image:this.selectedVillageObj.image||this.defaultVillageImg}),e}},watch:{"$route.query.state_id":{handler:async function(e){if(e&&this.states.length>0){const t=this.states.find(t=>String(t.id)===String(e));t&&this.selectedState!==t.id&&(console.log("🗺️ Route changed, auto-selecting state:",t.name),this.selectedState=t.id,await this.onStateChange())}else!e&&this.selectedState&&this.resetFilters()},immediate:!1}},async created(){await this.fetchStates();const e=this.$route.query.state_id;if(e&&this.states.length>0){const t=this.states.find(t=>String(t.id)===String(e));if(t)return console.log("🗺️ Auto-selecting state from URL:",t.name),this.selectedState=t.id,void await this.onStateChange()}this.fetchVideos()},methods:{goBack(){this.$router.back()},async fetchData(e,t={},s){this.loadingVideos=!0,this.errorVideos=null;try{const s=await gd.get(e,{params:t});if("success"===s.data.status)return s.data.data.map(e=>({...e,image:e.image||e.image_url||null}));throw new Error("Invalid response")}catch(a){return console.error("API Error:",a),this.errorVideos=s,[]}finally{this.loadingVideos=!1}},async fetchStates(){try{const e=await gd.get("frontend/states/");if("success"!==e.data.status)throw new Error("Invalid response");this.states=e.data.data.map(e=>({...e,image:e.image||e.image_url||null,imageLoaded:!1})),console.log("🗺️ States loaded:",this.states.length)}catch(e){console.error("States API Error:",e),this.errorVideos="States load చేయడంలో లోపం"}},async onStateChange(){if(this.selectedDistrict="",this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.districts=[],this.constituencies=[],this.mandals=[],this.villages=[],this.errorDistricts=null,this.selectedState){this.loadingDistricts=!0,console.log("🏛️ Loading districts for state:",this.selectedStateObj?.name);try{const e=await gd.get("frontend/districts/",{params:{state_id:this.selectedState}});if("success"!==e.data.status)throw new Error("Invalid response");this.districts=e.data.data.map(e=>({...e,image:e.image||e.image_url||null,imageLoaded:!1})),console.log("🏛️ Districts loaded:",this.districts.length)}catch(e){console.error("Districts API Error:",e),this.errorDistricts="Districts load చేయడంలో లోపం. దయచేసి మళ్లీ ప్రయత్నించండి."}finally{this.loadingDistricts=!1}}this.fetchVideos()},async onDistrictChange(){this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.constituencies=[],this.mandals=[],this.villages=[],this.selectedDistrict&&(this.constituencies=await this.fetchData("frontend/constituencies/",{district_id:this.selectedDistrict},"Constituencies load చేయడంలో లోపం")),this.fetchVideos()},async onConstituencyChange(){this.selectedMandal="",this.selectedVillage="",this.mandals=[],this.villages=[],this.selectedConstituency&&(this.mandals=await this.fetchData("frontend/mandals/",{constituency_id:this.selectedConstituency},"Mandals load చేయడంలో లోపం")),this.fetchVideos()},async onMandalChange(){this.selectedVillage="",this.villages=[],this.selectedMandal&&(this.villages=await this.fetchData("frontend/villages/",{mandal_id:this.selectedMandal},"Villages load చేయడంలో లోపం")),this.fetchVideos()},async fetchVideos(){this.loadingVideos=!0,this.errorVideos=null;try{let e="https://ott.no1news.in/api/regional-videos/by_location/?";this.selectedVillage?e+=`village_id=${this.selectedVillage}&`:this.selectedMandal?e+=`mandal_id=${this.selectedMandal}&`:this.selectedConstituency?e+=`constituency_id=${this.selectedConstituency}&`:this.selectedDistrict?e+=`district_id=${this.selectedDistrict}&`:this.selectedState&&(e+=`state_id=${this.selectedState}&`);const t=await S.A.get(e);this.videos=t.data?.data||t.data||[]}catch(e){this.errorVideos=e.response?.data?.message||"వీడియోలు లొడింగ్ లో లోపం. దయచేసి మళ్లీ ప్రయత్నించండి."}finally{this.loadingVideos=!1}},resetFilters(){this.selectedState="",this.selectedDistrict="",this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.districts=[],this.constituencies=[],this.mandals=[],this.villages=[],this.stateSearch="",this.districtSearch="",this.constituencySearch="",this.mandalSearch="",this.villageSearch="",this.fetchVideos()},navigateToBreadcrumb(e){0===e?(this.selectedDistrict="",this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.onStateChange()):1===e?(this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.onDistrictChange()):2===e?(this.selectedMandal="",this.selectedVillage="",this.onConstituencyChange()):3===e&&(this.selectedVillage="",this.onMandalChange())},handleImageError(e){e.target.src=this.defaultVideoImg;const t=this.videos.find(t=>t.thumbnail_url===e.target.src||t.thumbnail===e.target.src);t&&(t.imageLoaded=!0)},handleStateImageError(e){e.target.src=this.defaultStateImg;const t=this.states.find(t=>t.image===e.target.src||t.image_url===e.target.src);t&&(t.imageLoaded=!0)},handleDistrictImageError(e){e.target.src=this.defaultDistrictImg;const t=this.districts.find(t=>t.image===e.target.src||t.image_url===e.target.src);t&&(t.imageLoaded=!0)},async selectState(e){console.log("🗺️ State selected:",e.name),this.selectedState=e.id,this.selectedDistrict="",this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.districts=[],this.constituencies=[],this.mandals=[],this.villages=[],await this.onStateChange()},selectDistrict(e){this.selectedDistrict=e.id,this.selectedConstituency="",this.selectedMandal="",this.selectedVillage="",this.constituencies=[],this.mandals=[],this.villages=[],this.onDistrictChange()},formatDuration(e){if(!e)return"";if("number"===typeof e){const t=Math.floor(e/60),s=e%60;return`${t}:${s.toString().padStart(2,"0")}`}if("string"===typeof e&&e.includes(":")){const t=e.split(":").map(Number);let s=0;s=3===t.length?3600*t[0]+60*t[1]+t[2]:2===t.length?60*t[0]+t[1]:Number(t[0]);const a=Math.floor(s/60),i=s%60;return`${a}:${i.toString().padStart(2,"0")}`}return e},playVideo(e){this.selectedVideo=e,this.showPlayer=!0},closePlayer(){this.showPlayer=!1,this.selectedVideo=null},async retryLoadDistricts(){this.selectedState&&await this.onStateChange()}},components:{AdvancedVideoPlayer:Qr}};const vd=(0,se.A)(fd,[["render",md],["__scopeId","data-v-3edf604a"]]);var yd=vd;const bd={class:"search-page"},kd={class:"search-container"},wd={key:0,class:"quick-filters"},xd=["onClick"],Ld={key:1,class:"recent-searches"},Cd={class:"section-header"},Sd={class:"recent-list"},_d=["onClick"],Pd=["onClick"],Ed={key:2,class:"trending-section"},Ad={class:"trending-grid"},Td=["onClick"],Id={class:"trending-image"},Md=["src","alt"],Vd={key:0,class:"badges"},Dd={class:"trending-info"},Rd={key:3,class:"search-results"},jd={key:0,class:"loading-indicator"},Xd={key:1,class:"error-message"},$d={key:2,class:"search-suggestions"},Fd=["onClick"],Ud={key:3,class:"results-grid mt-10"},Od=["onClick"],Nd={class:"result-image"},Bd=["src","alt"],Wd={key:0,class:"badges"},Qd={key:0,class:"badge quality"},qd={key:1,class:"badge premium"},zd={class:"result-info"},Kd={key:4,class:"no-results"};function Hd(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",bd,[(0,i.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e)),"aria-label":"Go back"},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1)])),(0,i.Lk)("div",kd,[(0,i.Lk)("div",{class:(0,n.C4)(["search-input-wrapper",{focused:r.isInputFocused}])},[t[10]||(t[10]=(0,i.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),placeholder:"Search Title, Movie or Cast",onInput:t[2]||(t[2]=(...e)=>l.debouncedSearch&&l.debouncedSearch(...e)),onFocus:t[3]||(t[3]=e=>r.isInputFocused=!0),onBlur:t[4]||(t[4]=e=>r.isInputFocused=!1),class:"search-input",autofocus:""},null,544),[[a.Jo,r.searchQuery]]),r.searchQuery?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>l.clearSearch&&l.clearSearch(...e)),class:"clear-btn","aria-label":"Clear search"},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))):(0,i.Q3)("",!0)],2),r.searchQuery?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",wd,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.quickFilters,e=>((0,i.uX)(),(0,i.CE)("button",{key:e,class:"filter-chip",onClick:t=>l.applyFilter(e)},(0,n.v_)(e),9,xd))),128))])),!r.searchQuery&&r.recentSearches.length?((0,i.uX)(),(0,i.CE)("div",Ld,[(0,i.Lk)("div",Cd,[t[11]||(t[11]=(0,i.Lk)("h2",{class:"section-title"},"Recent Searches",-1)),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.clearRecentSearches&&l.clearRecentSearches(...e)),class:"clear-all-btn"},"Clear All")]),(0,i.Lk)("div",Sd,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.limitedRecentSearches,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"recent-item",onClick:t=>l.applyRecentSearch(e)},[t[13]||(t[13]=(0,i.Lk)("i",{class:"fas fa-history"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(e),1),(0,i.Lk)("button",{onClick:(0,a.D$)(t=>l.removeRecentSearch(e),["stop"]),class:"remove-btn"},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]),8,Pd)],8,_d))),128))])])):(0,i.Q3)("",!0),r.searchQuery?((0,i.uX)(),(0,i.CE)("div",Rd,[r.isLoading?((0,i.uX)(),(0,i.CE)("div",jd,t[16]||(t[16]=[(0,i.Lk)("div",{class:"spinner"},null,-1),(0,i.Lk)("p",null,"Searching...",-1)]))):(0,i.Q3)("",!0),r.searchError&&!r.isLoading?((0,i.uX)(),(0,i.CE)("div",Xd,[t[18]||(t[18]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle error-icon"},null,-1)),(0,i.Lk)("p",null,(0,n.v_)(r.searchError),1),(0,i.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>l.handleSearch&&l.handleSearch(...e)),class:"retry-btn"},t[17]||(t[17]=[(0,i.Lk)("i",{class:"fas fa-redo"},null,-1),(0,i.eW)(" Retry ")]))])):(0,i.Q3)("",!0),r.suggestions.length&&!r.searchResults.length?((0,i.uX)(),(0,i.CE)("div",$d,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.suggestions,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"suggestion-item",onClick:t=>l.applySuggestion(e)},[t[19]||(t[19]=(0,i.Lk)("i",{class:"fas fa-search"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(e),1)],8,Fd))),128))])):(0,i.Q3)("",!0),r.searchResults.length?((0,i.uX)(),(0,i.CE)("div",Ud,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.searchResults,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"result-card",onClick:t=>l.handleResultClick(e)},[(0,i.Lk)("div",Nd,[(0,i.Lk)("img",{src:e.thumbnail_url||e.portrait_thumbnail_url,alt:e.title},null,8,Bd),"rental"===e.video_type||"paid"===e.video_type?((0,i.uX)(),(0,i.CE)("div",Wd,["rental"===e.video_type?((0,i.uX)(),(0,i.CE)("span",Qd,"RENTAL")):(0,i.Q3)("",!0),"paid"===e.video_type?((0,i.uX)(),(0,i.CE)("span",qd,"PAID")):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",zd,[(0,i.Lk)("h3",null,(0,n.v_)(e.title),1)])],8,Od))),128))])):r.suggestions.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Kd,[t[20]||(t[20]=(0,i.Lk)("i",{class:"fas fa-search no-results-icon"},null,-1)),(0,i.Lk)("p",null,'No results found for "'+(0,n.v_)(r.searchQuery)+'"',1),t[21]||(t[21]=(0,i.Lk)("p",{class:"no-results-suggestion"},"Try different keywords or browse trending content",-1))]))])):((0,i.uX)(),(0,i.CE)("div",Ed,[t[15]||(t[15]=(0,i.Lk)("h2",{class:"section-title"},"Trending Now",-1)),(0,i.Lk)("div",Ad,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.trendingItems,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"trending-card",onClick:t=>l.handleTrendingClick(e)},[(0,i.Lk)("div",Id,[(0,i.Lk)("img",{src:e.image||e.thumbnail_url||e.portrait_thumbnail_url,alt:e.title},null,8,Md),e.isPremium?((0,i.uX)(),(0,i.CE)("div",Vd,t[14]||(t[14]=[(0,i.Lk)("span",{class:"badge quality"},"PREMIUM",-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Dd,[(0,i.Lk)("h3",null,(0,n.v_)(e.title),1),(0,i.eW)(" "+(0,n.v_)(e.type),1)])],8,Td))),128))])]))])])}var Jd={name:"SearchPage",beforeUnmount(){this.searchTimeout&&clearTimeout(this.searchTimeout)},data(){return{searchQuery:"",isInputFocused:!1,searchResults:[],suggestions:[],recentSearches:[],isLoading:!1,searchTimeout:null,searchError:null,trendingItems:[]}},mounted(){this.loadRecentSearches(),this.fetchTrendingItems();const e=localStorage.getItem("lastSearchState");if(e){const{query:t,results:s,scrollPosition:a}=JSON.parse(e);this.searchQuery=t,this.searchResults=s,setTimeout(()=>{window.scrollTo(0,a)},100),localStorage.removeItem("lastSearchState")}},computed:{limitedRecentSearches(){return window.innerWidth<=768?this.recentSearches.slice(0,3):this.recentSearches.slice(0,7)}},methods:{async fetchTrendingItems(){try{const e=await fetch("https://ott.no1news.in/api/videos?days=30",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch trending items");let t=await e.json();Array.isArray(t)?(t=t.sort(()=>Math.random()-.5),this.trendingItems=t.slice(0,10)):this.trendingItems=[]}catch(e){this.trendingItems=[]}},loadRecentSearches(){const e=localStorage.getItem("recentSearches");this.recentSearches=e?JSON.parse(e):[]},saveRecentSearches(){localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches))},addToRecentSearches(e){e.trim()&&(this.recentSearches=this.recentSearches.filter(t=>t!==e),this.recentSearches.unshift(e),this.recentSearches.length>10&&(this.recentSearches=this.recentSearches.slice(0,10)),this.saveRecentSearches())},debouncedSearch(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.handleSearch()},300)},async handleSearch(){const e=this.searchQuery.trim();if(e){this.isLoading=!0,this.searchError=null;try{this.addToRecentSearches(e);const t=await fetch(`https://ott.no1news.in/api/videos?title=${encodeURIComponent(e)}&description=${encodeURIComponent(e)}&category_name=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Search failed");const s=await t.json();if(!Array.isArray(s))throw new Error("Search failed");this.searchResults=s.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||t.category_name.toLowerCase().includes(e.toLowerCase())),this.suggestions=[],this.searchError=null}catch(t){console.error("Search error:",t),this.searchResults=[],this.suggestions=[],this.searchError="Error searching videos. Please try again."}}else this.searchResults=[],this.suggestions=[],this.searchError=null;this.isLoading=!1},updateSuggestions(){},clearSearch(){this.searchQuery="",this.searchResults=[],this.suggestions=[]},goBack(){this.$router.go(-1)},applyFilter(e){this.searchQuery=e,this.handleSearch()},applyRecentSearch(e){this.searchQuery=e,this.handleSearch()},removeRecentSearch(e){this.recentSearches=this.recentSearches.filter(t=>t!==e),this.saveRecentSearches()},clearRecentSearches(){this.recentSearches=[],localStorage.removeItem("recentSearches")},applySuggestion(e){this.searchQuery=e,this.handleSearch()},handleTrendingClick(e){this.$router.push({name:"MovieDetails",params:{id:e.id}})},handleResultClick(e){const t={query:this.searchQuery,results:this.searchResults,scrollPosition:window.pageYOffset};localStorage.setItem("lastSearchState",JSON.stringify(t)),this.$router.push({name:"MovieDetails",params:{id:e.id}})}}};const Yd=(0,se.A)(Jd,[["render",Hd],["__scopeId","data-v-5816b289"]]);var Gd=Yd;const Zd={class:"min-h-screen bg-[#111] text-white"},eu={class:"flex justify-center mt-8 mb-8 sm:hidden relative items-center min-h-[48px]"},tu={class:"w-full text-center text-lg font-bold flex items-center justify-center whitespace-normal break-words pl-12"},su={class:"hidden sm:flex justify-center mt-8 mb-8 items-center min-h-[48px]"},au={class:"w-full text-center text-2xl font-bold flex items-center justify-center"},iu={class:"max-w-7xl mx-auto px-4 py-8"},ou={key:0,class:"flex flex-col items-center justify-center py-20"},ru={key:1,class:"flex flex-col items-center justify-center py-20"},lu={class:"bg-red-600/20 border border-red-500/30 rounded-2xl p-8 max-w-md text-center"},nu={class:"text-white/70 mb-6"},cu={key:2},du={key:0,class:"flex flex-col items-center justify-center py-20"},uu={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},hu=["onClick"],pu={class:"relative w-full pb-[56.25%] overflow-hidden"},mu={key:0,class:"absolute inset-0 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 animate-pulse"},gu=["src","alt","onLoad","onError"],fu={key:2,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-700 to-gray-800"},vu={class:"text-4xl text-white/40"},yu={key:0},bu={key:1},ku={key:2},wu={key:3},xu={key:4},Lu={key:5},Cu={key:3,class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},Su={class:"p-4"},_u={class:"font-bold text-lg text-center line-clamp-2 group-hover:text-pink-300 transition-colors duration-200"},Pu={key:0,class:"mt-2 text-center"},Eu={class:"inline-block px-2 py-1 bg-black/50 rounded text-xs font-medium"};function Au(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",Zd,[(0,i.Lk)("div",eu,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.handleBack&&r.handleBack(...e)),class:"absolute left-4 top-1/2 -translate-y-1/2 z-10 flex items-center justify-center w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 shadow focus:outline-none","aria-label":"Back"},t[3]||(t[3]=[(0,i.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),(0,i.Lk)("h1",tu,(0,n.v_)(r.currentTitle),1)]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.handleBack&&r.handleBack(...e)),class:"hidden sm:flex fixed top-6 left-6 z-20 items-center justify-center w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 shadow focus:outline-none","aria-label":"Back"},t[4]||(t[4]=[(0,i.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),(0,i.Lk)("div",su,[(0,i.Lk)("h1",au,(0,n.v_)(r.currentTitle),1)]),(0,i.Lk)("main",iu,[o.loading?((0,i.uX)(),(0,i.CE)("div",ou,t[5]||(t[5]=[(0,i.Fv)('<div class="relative" data-v-98035dca><div class="animate-spin rounded-full h-16 w-16 border-4 border-pink-600 border-t-transparent" data-v-98035dca></div><div class="absolute inset-0 rounded-full border-4 border-purple-600 border-t-transparent animate-ping" data-v-98035dca></div></div><div class="mt-6 text-xl font-medium text-white/80" data-v-98035dca>Loading...</div><div class="mt-2 text-sm text-white/60" data-v-98035dca>Please wait</div>',3)]))):o.error?((0,i.uX)(),(0,i.CE)("div",ru,[(0,i.Lk)("div",lu,[t[6]||(t[6]=(0,i.Lk)("div",{class:"text-red-400 text-6xl mb-4"},"⚠️",-1)),t[7]||(t[7]=(0,i.Lk)("h3",{class:"text-xl font-bold mb-2"},"Something went wrong",-1)),(0,i.Lk)("p",nu,(0,n.v_)(o.error),1),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.retry&&r.retry(...e)),class:"px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl"}," Try Again ")])])):((0,i.uX)(),(0,i.CE)("div",cu,[0===r.items.length?((0,i.uX)(),(0,i.CE)("div",du,t[8]||(t[8]=[(0,i.Lk)("div",{class:"text-white/40 text-8xl mb-6"},"📭",-1),(0,i.Lk)("h3",{class:"text-2xl font-bold mb-2"},"No Data",-1),(0,i.Lk)("p",{class:"text-white/60 text-center max-w-md"}," Nothing found at this level. Please go back and try a different selection. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",uu,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.items,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>r.selectItem(e),class:"group relative bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-102 hover:-translate-y-1 border border-white/10 hover:border-pink-500/50 focus:outline-none focus:ring-2 focus:ring-pink-500/30"},[(0,i.Lk)("div",pu,[e.imageLoaded?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",mu)),e.image_url?((0,i.uX)(),(0,i.CE)("img",{key:1,src:e.image_url,alt:e.name,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onLoad:t=>e.imageLoaded=!0,onError:t=>r.handleImageError(e),loading:"lazy"},null,40,gu)):((0,i.uX)(),(0,i.CE)("div",fu,[(0,i.Lk)("div",vu,[o.selectedState?o.selectedDistrict?o.selectedConstituency?o.selectedMandal?o.selectedVillage?((0,i.uX)(),(0,i.CE)("span",Lu,"🎥")):((0,i.uX)(),(0,i.CE)("span",xu,"🏡")):((0,i.uX)(),(0,i.CE)("span",wu,"🏘️")):((0,i.uX)(),(0,i.CE)("span",ku,"🏘️")):((0,i.uX)(),(0,i.CE)("span",bu,"📍")):((0,i.uX)(),(0,i.CE)("span",yu,"🇮🇳"))])])),t[10]||(t[10]=(0,i.Lk)("div",{class:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),o.selectedVillage?((0,i.uX)(),(0,i.CE)("div",Cu,t[9]||(t[9]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border-2 border-white/30"},[(0,i.Lk)("svg",{class:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24"},[(0,i.Lk)("path",{d:"M8 5v14l11-7z"})])],-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Su,[(0,i.Lk)("h3",_u,(0,n.v_)(e.name),1),o.selectedVillage&&e.duration?((0,i.uX)(),(0,i.CE)("div",Pu,[(0,i.Lk)("span",Eu,(0,n.v_)(e.duration),1)])):(0,i.Q3)("",!0)]),t[11]||(t[11]=(0,i.Lk)("div",{class:"absolute inset-0 rounded-2xl border-2 border-transparent group-hover:border-pink-500/50 transition-all duration-300"},null,-1))],8,hu))),128))]))]))])])}const Tu=S.A.create({baseURL:"https://ott.no1news.in/api/",timeout:15e3,headers:{"Content-Type":"application/json"}});var Iu={name:"RegionalContent",data(){return{loading:!1,error:null,states:[],districts:[],constituencies:[],mandals:[],villages:[],videos:[],selectedState:null,selectedDistrict:null,selectedConstituency:null,selectedMandal:null,selectedVillage:null}},computed:{canGoBack(){return this.selectedVillage||this.selectedMandal||this.selectedConstituency||this.selectedDistrict||this.selectedState},currentTitle(){return this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?this.selectedVillage?`${this.selectedVillage.name} Videos`:`${this.selectedMandal.name} Villages`:`${this.selectedConstituency.name} Mandals`:`${this.selectedDistrict.name} Constituencies`:`${this.selectedState.name} Districts`:"States"},items(){return this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?this.selectedVillage?this.videos:this.villages:this.mandals:this.constituencies:this.districts:this.states}},methods:{handleImageError(e){e.image_url=null,e.imageLoaded=!0},async fetchData(e,t={},s){this.loading=!0,this.error=null;try{const s=await Tu.get(e,{params:t});if("success"===s.data.status)return s.data.data.map(e=>({...e,image_url:e.image_url||e.thumbnail||null,imageLoaded:!1}));throw new Error("Invalid response")}catch(a){return console.error("API Error:",a),this.error=s,[]}finally{this.loading=!1}},async fetchStates(){let e=await this.fetchData("frontend/states/",{},"Failed to load states data");this.states=e.map(e=>({...e,image_url:e.image||e.image_url||null}))},async fetchDistricts(e){this.districts=await this.fetchData("frontend/districts/",{state_id:e.id},"Failed to load districts data")},async fetchConstituencies(e){this.constituencies=await this.fetchData("frontend/constituencies/",{district_id:e.id},"Failed to load constituencies data")},async fetchMandals(e){this.mandals=await this.fetchData("frontend/mandals/",{constituency_id:e.id},"Failed to load mandals data")},async fetchVillages(e){this.villages=await this.fetchData("frontend/villages/",{mandal_id:e.id},"Failed to load villages data")},async fetchVideos(e){this.videos=await this.fetchData("frontend/videos/",{village_id:e.id},"Failed to load videos data")},async selectItem(e){try{this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?this.selectedVillage||(this.selectedVillage=e,await this.fetchVideos(e)):(this.selectedMandal=e,this.selectedVillage=null,await this.fetchVillages(e)):(this.selectedConstituency=e,this.selectedMandal=null,this.selectedVillage=null,await this.fetchMandals(e)):(this.selectedDistrict=e,this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,await this.fetchConstituencies(e)):(this.selectedState=e,this.selectedDistrict=null,this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,await this.fetchDistricts(e))}catch(t){console.error("Selection error:",t),this.error="Error occurred while selecting"}},async goBack(){this.selectedVillage?(this.selectedVillage=null,this.videos=[],this.selectedMandal&&await this.fetchVillages(this.selectedMandal)):this.selectedMandal?(this.selectedMandal=null,this.villages=[],this.selectedConstituency&&await this.fetchMandals(this.selectedConstituency)):this.selectedConstituency?(this.selectedConstituency=null,this.mandals=[],this.selectedDistrict&&await this.fetchConstituencies(this.selectedDistrict)):this.selectedDistrict?(this.selectedDistrict=null,this.constituencies=[],this.selectedState&&await this.fetchDistricts(this.selectedState)):this.selectedState&&(this.selectedState=null,this.districts=[],await this.fetchStates())},async retry(){this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?this.selectedVillage?await this.fetchVideos(this.selectedVillage):await this.fetchVillages(this.selectedMandal):await this.fetchMandals(this.selectedConstituency):await this.fetchConstituencies(this.selectedDistrict):await this.fetchDistricts(this.selectedState):await this.fetchStates()},handleBack(){this.selectedState?this.goBack():this.$router.push("/")}},mounted(){this.fetchStates().then(async()=>{const e=this.$route.query.state_id;if(e&&this.states.length>0){const t=this.states.find(t=>String(t.id)===String(e));t&&(this.selectedState=t,this.selectedDistrict=null,this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,await this.fetchDistricts(t))}})}};const Mu=(0,se.A)(Iu,[["render",Au],["__scopeId","data-v-98035dca"]]);var Vu=Mu;const Du={class:"min-h-screen bg-[#121212] flex items-center justify-center px-4 py-10"},Ru={class:"w-full max-w-4xl"},ju={class:"bg-[#1d1d1d] rounded-xl p-6 md:p-8"},Xu={class:"space-y-6"},$u={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fu={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Uu={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Ou={class:"md:col-span-2"},Nu={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Bu={class:"space-y-2 md:col-span-2"},Wu={class:"flex gap-4"},Qu={class:"relative flex-1"},qu=["disabled"],zu={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},Ku={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500"},Hu=["disabled"],Ju={key:0,class:"text-[#ff4d4d] text-sm mt-1 flex items-center gap-2"},Yu={key:1,class:"text-green-500 text-sm mt-1 flex items-center gap-2"},Gu={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zu={class:"relative"},eh=["disabled"],th={value:""},sh=["value"],ah={key:0,class:"absolute right-10 top-1/2 -translate-y-1/2"},ih={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},oh=["disabled"],rh=["value"],lh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},nh=["disabled"],ch=["value"],dh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},uh={class:"relative"},hh=["disabled"],ph=["value"],mh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},gh={class:"relative"},fh=["disabled"],vh=["value"],yh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},bh={class:"relative"},kh={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},wh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},xh={key:1,class:"mt-1 bg-[#1d1d1d] border border-white/10 rounded-lg shadow-lg max-h-40 overflow-y-auto"},Lh=["onClick"],Ch={class:"font-medium"},Sh={class:"text-sm text-white/60"},_h={class:"md:col-span-2"},Ph={class:"relative"},Eh={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},Ah={key:1,class:"absolute z-50 w-full mt-1 bg-[#1d1d1d] border border-white/10 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Th=["onClick"],Ih={class:"font-medium"},Mh={class:"text-sm text-white/60"},Vh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Dh={class:"space-y-6 pt-4"},Rh={class:"flex items-start space-x-3"},jh={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Xh=["disabled"],$h={key:0},Fh={key:1,class:"absolute inset-0 flex items-center justify-center"},Uh={key:1,class:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg"},Oh={class:"text-red-500 text-sm text-center"};function Nh(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",Du,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/home")),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[30]||(t[30]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),(0,i.Lk)("div",Ru,[t[57]||(t[57]=(0,i.Lk)("div",{class:"text-center mb-8"},[(0,i.Lk)("img",{src:Re,alt:"Logo",class:"h-12 mx-auto mb-4"}),(0,i.Lk)("h1",{class:"text-2xl font-bold text-white"},"Complete Your Profile"),(0,i.Lk)("p",{class:"text-white/60 mt-2"},"Please fill in your details to continue")],-1)),(0,i.Lk)("div",ju,[(0,i.Lk)("form",{onSubmit:t[29]||(t[29]=(0,a.D$)((...e)=>l.handleSubmit&&l.handleSubmit(...e),["prevent"])),class:"space-y-6",novalidate:""},[(0,i.Lk)("div",Xu,[t[40]||(t[40]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-[#c30059] border-b border-[#c30059] pb-2"}," Personal Information ",-1)),(0,i.Lk)("div",$u,[(0,i.Lk)("div",null,[t[31]||(t[31]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" First name "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.firstName=e),type:"text",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.firstName}])},null,2),[[a.Jo,r.form.firstName]]),r.errors.firstName?((0,i.uX)(),(0,i.CE)("p",Fu,(0,n.v_)(r.errors.firstName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[32]||(t[32]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" Last name "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.form.lastName=e),type:"text",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.lastName}])},null,2),[[a.Jo,r.form.lastName]]),r.errors.lastName?((0,i.uX)(),(0,i.CE)("p",Uu,(0,n.v_)(r.errors.lastName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ou,[t[33]||(t[33]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" Email Address "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.form.email=e),type:"email",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.email}]),placeholder:"Enter your email (optional)"},null,2),[[a.Jo,r.form.email]]),r.errors.email?((0,i.uX)(),(0,i.CE)("p",Nu,(0,n.v_)(r.errors.email),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Bu,[t[39]||(t[39]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},[(0,i.eW)(" Referral Code "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.Lk)("div",Wu,[(0,i.Lk)("div",Qu,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.form.referralCode=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white uppercase",placeholder:"Enter referral code",disabled:r.isValidatingReferral||r.referralStatus.valid,onInput:t[5]||(t[5]=(...e)=>l.handleReferralInput&&l.handleReferralInput(...e))},null,40,qu),[[a.Jo,r.form.referralCode]]),r.isValidatingReferral?((0,i.uX)(),(0,i.CE)("div",zu,t[34]||(t[34]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0),r.referralStatus.valid?((0,i.uX)(),(0,i.CE)("div",Ku,t[35]||(t[35]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1)]))):(0,i.Q3)("",!0)]),r.referralStatus.valid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",onClick:t[6]||(t[6]=(...e)=>l.verifyReferralCode&&l.verifyReferralCode(...e)),disabled:!r.form.referralCode||r.isValidatingReferral,class:"px-6 py-2 rounded-lg bg-[#c30059] text-white hover:bg-[#ff4d4d] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},t[36]||(t[36]=[(0,i.Lk)("span",null,"Verify",-1)]),8,Hu))]),r.errors.referralCode?((0,i.uX)(),(0,i.CE)("p",Ju,[t[37]||(t[37]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,i.eW)(" "+(0,n.v_)(r.errors.referralCode),1)])):(0,i.Q3)("",!0),r.referralStatus.valid?((0,i.uX)(),(0,i.CE)("p",Yu,t[38]||(t[38]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,i.eW)(" Valid referral code ")]))):(0,i.Q3)("",!0)])])]),(0,i.Lk)("div",Gu,[(0,i.Lk)("div",null,[t[42]||(t[42]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 1. State "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",Zu,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.form.state=e),onChange:t[8]||(t[8]=(...e)=>l.handleStateChange&&l.handleStateChange(...e)),class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.state}]),disabled:r.isLoadingStates},[(0,i.Lk)("option",th,(0,n.v_)(r.isLoadingStates?"Loading states...":"Select State"),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.states,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,sh))),128))],42,eh),[[a.u1,r.form.state]]),r.isLoadingStates?((0,i.uX)(),(0,i.CE)("div",ah,t[41]||(t[41]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),r.errors.state?((0,i.uX)(),(0,i.CE)("p",ih,(0,n.v_)(r.errors.state),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[44]||(t[44]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 2. District "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.form.district=e),onChange:t[10]||(t[10]=(...e)=>l.handleDistrictChange&&l.handleDistrictChange(...e)),class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.district}]),disabled:!r.form.state},[t[43]||(t[43]=(0,i.Lk)("option",{value:""},"Select District",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.districts,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,rh))),128))],42,oh),[[a.u1,r.form.district]]),r.errors.district?((0,i.uX)(),(0,i.CE)("p",lh,(0,n.v_)(r.errors.district),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[46]||(t[46]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 3. Constituency "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.form.constituency=e),onChange:t[12]||(t[12]=(...e)=>l.handleConstituencyChange&&l.handleConstituencyChange(...e)),class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.constituency}]),disabled:!r.form.district},[t[45]||(t[45]=(0,i.Lk)("option",{value:""},"Select Constituency",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.constituencies,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,ch))),128))],42,nh),[[a.u1,r.form.constituency]]),r.errors.constituency?((0,i.uX)(),(0,i.CE)("p",dh,(0,n.v_)(r.errors.constituency),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[48]||(t[48]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 4. Mandal "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",uh,[r.isManualMandal?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":t[15]||(t[15]=e=>r.form.manualMandal=e),type:"text",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.mandal}]),placeholder:"Enter Mandal name",onInput:t[16]||(t[16]=(...e)=>l.handleManualMandalChange&&l.handleManualMandalChange(...e))},null,34)),[[a.Jo,r.form.manualMandal]]):(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:0,"onUpdate:modelValue":t[13]||(t[13]=e=>r.form.mandal=e),onChange:t[14]||(t[14]=(...e)=>l.handleMandalChange&&l.handleMandalChange(...e)),class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.mandal}]),disabled:!r.form.constituency},[t[47]||(t[47]=(0,i.Lk)("option",{value:""},"Select Mandal",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.mandals,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,ph))),128))],42,hh)),[[a.u1,r.form.mandal]]),(0,i.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>l.toggleMandalInput&&l.toggleMandalInput(...e)),class:"absolute right-12 top-1/2 -translate-y-1/2 text-white/60 hover:text-white text-sm underline",type:"button"},(0,n.v_)(r.isManualMandal?"Select from list":"Enter manually"),1)]),r.errors.mandal?((0,i.uX)(),(0,i.CE)("p",mh,(0,n.v_)(r.errors.mandal),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[50]||(t[50]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 5. Village "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",gh,[r.isManualVillage?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":t[20]||(t[20]=e=>r.form.manualVillage=e),type:"text",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.village}]),placeholder:"Enter Village name",onInput:t[21]||(t[21]=(...e)=>l.handleManualVillageChange&&l.handleManualVillageChange(...e))},null,34)),[[a.Jo,r.form.manualVillage]]):(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:0,"onUpdate:modelValue":t[18]||(t[18]=e=>r.form.village=e),onChange:t[19]||(t[19]=(...e)=>l.handleVillageChange&&l.handleVillageChange(...e)),class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.village}]),disabled:!r.form.mandal},[t[49]||(t[49]=(0,i.Lk)("option",{value:""},"Select Village",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.villages,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,vh))),128))],42,fh)),[[a.u1,r.form.village]]),(0,i.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>l.toggleVillageInput&&l.toggleVillageInput(...e)),class:"absolute right-12 top-1/2 -translate-y-1/2 text-white/60 hover:text-white text-sm underline",type:"button"},(0,n.v_)(r.isManualVillage?"Select from list":"Enter manually"),1)]),r.errors.village?((0,i.uX)(),(0,i.CE)("p",yh,(0,n.v_)(r.errors.village),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[52]||(t[52]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 6. Pincode "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",bh,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>r.form.pincode=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",onInput:t[24]||(t[24]=(...e)=>l.validatePincode&&l.validatePincode(...e)),onKeypress:t[25]||(t[25]=(...e)=>l.allowOnlyNumbers&&l.allowOnlyNumbers(...e)),maxlength:"6",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",{"border-[#ff4d4d]":r.errors.pincode}]),placeholder:"Enter 6-digit pincode"},null,34),[[a.Jo,r.form.pincode]]),r.isLoadingPincode?((0,i.uX)(),(0,i.CE)("div",kh,t[51]||(t[51]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),r.errors.pincode?((0,i.uX)(),(0,i.CE)("p",wh,(0,n.v_)(r.errors.pincode),1)):(0,i.Q3)("",!0),r.pincodeSuggestions.length>0?((0,i.uX)(),(0,i.CE)("div",xh,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.pincodeSuggestions,(t,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,onClick:s=>e.selectPincode(t),class:"px-4 py-2 text-white hover:bg-[#2d2d2d] cursor-pointer"},[(0,i.Lk)("div",Ch,(0,n.v_)(t.pincode),1),(0,i.Lk)("div",Sh,(0,n.v_)(t.area),1)],8,Lh))),128))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",_h,[t[54]||(t[54]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 7. Address "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",Ph,[(0,i.bo)((0,i.Lk)("input",{ref:"addressInput","onUpdate:modelValue":t[26]||(t[26]=e=>r.form.address=e),type:"text",class:(0,n.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.address}]),placeholder:"Start typing your address...",onInput:t[27]||(t[27]=(...e)=>l.handleAddressInput&&l.handleAddressInput(...e))},null,34),[[a.Jo,r.form.address]]),r.isLoadingAddresses?((0,i.uX)(),(0,i.CE)("div",Eh,t[53]||(t[53]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0),r.addressSuggestions.length>0?((0,i.uX)(),(0,i.CE)("div",Ah,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.addressSuggestions,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,onClick:t=>l.selectAddress(e),class:"px-4 py-3 text-white hover:bg-[#2d2d2d] cursor-pointer flex items-start"},[(0,i.Lk)("div",null,[(0,i.Lk)("div",Ih,(0,n.v_)(e.structured_formatting?.main_text||e.description),1),(0,i.Lk)("div",Mh,(0,n.v_)(e.structured_formatting?.secondary_text),1)])],8,Th))),128))])):(0,i.Q3)("",!0)]),r.errors.address?((0,i.uX)(),(0,i.CE)("p",Vh,(0,n.v_)(r.errors.address),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Dh,[(0,i.Lk)("div",Rh,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"terms","onUpdate:modelValue":t[28]||(t[28]=e=>r.form.termsAccepted=e),class:"mt-1 rounded border-white/30 bg-transparent text-[#c30059] focus:ring-[#c30059] focus:ring-offset-0 focus:ring-offset-transparent"},null,512),[[a.lH,r.form.termsAccepted]]),t[55]||(t[55]=(0,i.Lk)("label",{for:"terms",class:"text-white/80 text-sm"},[(0,i.eW)(" I accept OTT's "),(0,i.Lk)("a",{href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2"},"Terms & Conditions"),(0,i.eW)(" and "),(0,i.Lk)("a",{href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2"},"Privacy Statement")],-1))]),r.errors.terms?((0,i.uX)(),(0,i.CE)("p",jh,(0,n.v_)(r.errors.terms),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{type:"submit",disabled:r.isLoading,class:"w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white py-4 rounded-lg font-medium text-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed relative"},[r.isLoading?((0,i.uX)(),(0,i.CE)("div",Fh,t[56]||(t[56]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-white/20 border-t-white"},null,-1)]))):((0,i.uX)(),(0,i.CE)("span",$h,"Complete Registration"))],8,Xh),r.errors.general?((0,i.uX)(),(0,i.CE)("div",Uh,[(0,i.Lk)("p",Oh,(0,n.v_)(r.errors.general),1)])):(0,i.Q3)("",!0)])],32)])])])}var Bh={name:"RegistrationPage",data(){return{form:{firstName:"",lastName:"",email:"",state:"",district:"",constituency:"",mandal:"",manualMandal:"",village:"",manualVillage:"",address:"",pincode:"",termsAccepted:!1,phone:"",referralCode:""},token:null,errors:{},districts:[],constituencies:[],mandals:[],villages:[],states:[],isLoadingStates:!1,isLoadingGoogleMaps:!1,apiBaseUrl:"https://ott.no1news.in",addressSuggestions:[],placesService:null,geocoder:null,googleMapsLoaded:!1,selectedPlace:null,googleMapsScriptLoaded:!1,isManualMandal:!1,isManualVillage:!1,isLoadingAddresses:!1,isLoadingPincode:!1,pincodeSuggestions:[],addressSearchTimeout:null,isLoading:!1,googleMapsApiKey:"AIzaSyAYUmDhZ4ZWfwL15I2pYhEKcxhKEzEh2No",isValidatingReferral:!1,referralStatus:{valid:!1,message:""}}},methods:{async fetchStates(){console.log("fetchStates method called");try{this.isLoadingStates=!0,this.errors.state=null;const e=`${this.apiBaseUrl}/api/states/`;console.log("Fetching states from URL:",e);const t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(console.log("API Response status:",t.status),!t.ok)throw new Error(`Server returned ${t.status}: ${t.statusText}`);const s=await t.json();if(console.log("Received states data:",s),!Array.isArray(s))throw new Error("Expected array of states but received different format");this.states=s.map(e=>({value:e.id,label:e.name})),console.log("Processed states:",this.states),0===this.states.length&&(this.errors.state="No states available. Please try again.")}catch(e){console.error("Error in fetchStates:",e),this.errors.state=`Failed to load states: ${e.message}`}finally{this.isLoadingStates=!1}},async handleSubmit(){if(console.log("Handle submit called"),this.validateForm()){let s=null;try{console.log("Form validation passed, proceeding with submission"),this.isLoading=!0,this.errors={};const e=localStorage.getItem("csrfToken"),t={first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:this.form.phone,state:this.form.state,district:this.form.district,constituency:this.form.constituency,mandal:this.isManualMandal?this.form.manualMandal:this.form.mandal,village:this.isManualVillage?this.form.manualVillage:this.form.village,address:this.form.address,pincode:this.form.pincode,referral_code:this.form.referralCode||null};console.log("Sending registration data:",t),console.log("Completing registration..."),s=await fetch(`${this.apiBaseUrl}/users/complete-registration/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify(t)}),console.log("Registration response status:",s.status);const a=await s.json();if(console.log("Registration response:",a),!s.ok)throw new Error(a.message||"Registration failed");console.log("Registration successful, updating local storage"),a.user&&localStorage.setItem("user",JSON.stringify(a.user)),a.csrf_token&&localStorage.setItem("csrfToken",a.csrf_token),localStorage.setItem("phone",this.form.phone),localStorage.setItem("registrationSuccess","true"),localStorage.setItem("registrationMessage","Registration completed successfully!"),window.location.href="/"}catch(e){console.error("Registration error:",e),this.errors.general=e.message||"An error occurred during registration. Please try again.";try{this.$toast&&this.$toast.error(this.errors.general,{position:"top-right",duration:3e3})}catch(t){console.warn("Toast notification failed:",t)}401===s?.status&&(window.location.href="/login")}finally{this.isLoading=!1}}},async registerDevice(e){try{const t={device_type:"web",device_name:navigator.userAgent,device_id:"web-"+Math.random().toString(36).substr(2,9),device_model:navigator.platform,os_version:navigator.userAgent,app_version:"1.0.0"},s=await fetch(`${this.apiBaseUrl}/devices/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)});s.ok||console.error("Failed to register device")}catch(t){console.error("Error registering device:",t)}},async handleAddressInput(){this.form.address&&this.googleMapsLoaded?(this.addressSearchTimeout&&clearTimeout(this.addressSearchTimeout),this.isLoadingAddresses=!0,this.addressSearchTimeout=setTimeout(async()=>{try{const e=this.states.find(e=>e.value===this.form.state)?.label||"",t=this.districts.find(e=>e.value===this.form.district)?.label||"",s=this.constituencies.find(e=>e.value===this.form.constituency)?.label||"",a=this.isManualMandal?this.form.manualMandal:this.mandals.find(e=>e.value===this.form.mandal)?.label||"",i=this.isManualVillage?this.form.manualVillage:this.villages.find(e=>e.value===this.form.village)?.label||"",o=`${this.form.address}, ${i}, ${a}, ${s} constituency, ${t}, ${e}, India`,r=await this.getPlacePredictions(o,!0);this.addressSuggestions=r}catch(e){console.error("Error fetching address suggestions:",e),this.errors.maps="Unable to fetch address suggestions. Please try again."}finally{this.isLoadingAddresses=!1}},300)):this.addressSuggestions=[]},async getPlacePredictions(e,t=!1){return this.placesService?new Promise((s,a)=>{const i={input:e,componentRestrictions:{country:"IN"},language:"en",types:t?["address","establishment"]:["geocode"]};this.placesService.getPlacePredictions(i,(t,i)=>{console.log("Places API response:",{status:i,results:t,query:e}),i===window.google.maps.places.PlacesServiceStatus.OK&&t?s(t):i===window.google.maps.places.PlacesServiceStatus.ZERO_RESULTS?s([]):(console.warn("Places API returned status:",i),a(new Error(`Places API returned status: ${i}`)))})}):(console.error("Places service not initialized"),[])},async selectAddress(e){this.isLoadingPincode=!0;try{const t=await this.getPlaceDetails(e.place_id);console.log("Selected place details:",t);const s=this.formatAddress(t);this.form.address=s;const a=await this.extractPincode(t);a&&(this.form.pincode=a,delete this.errors.pincode),this.addressSuggestions=[],this.selectedPlace=t}catch(t){console.error("Error in selectAddress:",t),this.errors.maps="Error retrieving address details. Please try again."}finally{this.isLoadingPincode=!1}},formatAddress(e){const t={street_number:"",route:"",sublocality_level_1:"",locality:"",administrative_area_level_2:"",administrative_area_level_1:"",postal_code:""};e.address_components.forEach(e=>{const s=e.types[0];Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e.long_name)});let s="";return t.street_number&&(s+=t.street_number+" "),t.route&&(s+=t.route+", "),t.sublocality_level_1&&(s+=t.sublocality_level_1+", "),t.locality&&(s+=t.locality+", "),t.administrative_area_level_2&&(s+=t.administrative_area_level_2+", "),t.administrative_area_level_1&&(s+=t.administrative_area_level_1),t.postal_code&&(s+=" - "+t.postal_code),s.trim().replace(/,\s*$/,"")},async getPlaceDetails(e){return new Promise((t,s)=>{this.detailedPlacesService.getDetails({placeId:e,fields:["address_components","formatted_address","geometry","name"]},(e,a)=>{"OK"===a?t(e):s(new Error(`Place details failed with status: ${a}`))})})},async extractPincode(e){for(const s of e.address_components)if(s.types.includes("postal_code"))return s.long_name;if(e.geometry?.location)try{return await this.getPincodeFromCoordinates(e.geometry.location.lat(),e.geometry.location.lng())}catch(t){console.warn("Failed to get pincode from coordinates:",t)}return null},async getPincodeFromCoordinates(e,t){return new Promise((s,a)=>{this.geocoder||(this.geocoder=new window.google.maps.Geocoder),this.geocoder.geocode({location:{lat:e,lng:t}},(e,t)=>{if("OK"===t){for(let t of e)for(let e of t.address_components)if(e.types.includes("postal_code"))return void s(e.long_name);a(new Error("No pincode found in geocoding results"))}else a(new Error(`Geocoding failed with status: ${t}`))})})},async fetchDistricts(e){try{console.log("Fetching districts for state:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/districts/?state_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Districts API response:",s),"success"===s.status?(this.districts=s.data.map(e=>({value:e.id,label:e.name})),console.log("Mapped districts:",this.districts)):(console.error("Error fetching districts:",s.message),this.errors.district="Failed to load districts. Please try again.")}catch(t){console.error("Error fetching districts:",t),this.errors.district="Failed to load districts. Please check your connection."}},async fetchConstituencies(e){try{console.log("Fetching constituencies for district:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/constituencies/?district_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Constituencies API response:",s),"success"===s.status?(this.constituencies=s.data.map(e=>({value:e.id,label:e.name})),console.log("Mapped constituencies:",this.constituencies)):(console.error("Error fetching constituencies:",s.message),this.errors.constituency="Failed to load constituencies. Please try again.")}catch(t){console.error("Error fetching constituencies:",t),this.errors.constituency="Failed to load constituencies. Please check your connection."}},async fetchMandals(e){try{console.log("Fetching mandals for constituency:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/mandals/?constituency_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Mandals API response:",s),"success"===s.status?(this.mandals=s.data.map(e=>({value:e.id,label:e.name})),console.log("Mapped mandals:",this.mandals)):(console.error("Error fetching mandals:",s.message),this.errors.mandal="Failed to load mandals. Please try again.")}catch(t){console.error("Error fetching mandals:",t),this.errors.mandal="Failed to load mandals. Please check your connection."}},async fetchVillages(e){try{console.log("Fetching villages for mandal:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/villages/?mandal_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Villages API response:",s),"success"===s.status?(this.villages=s.data.map(e=>({value:e.id,label:e.name})),console.log("Mapped villages:",this.villages)):(console.error("Error fetching villages:",s.message),this.errors.village="Failed to load villages. Please try again.")}catch(t){console.error("Error fetching villages:",t),this.errors.village="Failed to load villages. Please check your connection."}},async handleStateChange(){console.log("State changed to:",this.form.state),this.form.district="",this.form.constituency="",this.form.mandal="",this.form.village="",this.districts=[],this.constituencies=[],this.mandals=[],this.villages=[],this.form.state&&await this.fetchDistricts(this.form.state)},async handleDistrictChange(){console.log("District changed to:",this.form.district),this.form.constituency="",this.form.mandal="",this.form.village="",this.constituencies=[],this.mandals=[],this.villages=[],this.form.district&&await this.fetchConstituencies(this.form.district)},async handleConstituencyChange(){console.log("Constituency changed to:",this.form.constituency),this.form.mandal="",this.form.village="",this.mandals=[],this.villages=[],this.form.constituency&&await this.fetchMandals(this.form.constituency)},async handleMandalChange(){console.log("Mandal changed to:",this.form.mandal),this.form.village="",this.form.manualVillage="",this.villages=[],this.addressSuggestions=[],this.form.address="",this.form.pincode="",this.form.mandal&&await this.fetchVillages(this.form.mandal)},async handleVillageChange(){this.form.address="",this.form.pincode="",this.addressSuggestions=[],this.form.village&&await this.searchAddress()},allowOnlyNumbers(e){const t=/[0-9]/.test(e.key),s=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key);t||s||e.preventDefault(),this.form.pincode.length>=6&&!s&&e.preventDefault()},validatePincode(e){this.form.pincode=e.target.value.replace(/\D/g,"").slice(0,6),6===this.form.pincode.length?delete this.errors.pincode:this.form.pincode.length>0&&(this.errors.pincode="Pincode must be exactly 6 digits")},toggleMandalInput(){this.isManualMandal=!this.isManualMandal,this.isManualMandal?(this.form.mandal="",this.form.manualMandal=""):this.form.manualMandal="",this.form.village="",this.form.manualVillage="",this.villages=[]},toggleVillageInput(){this.isManualVillage=!this.isManualVillage,this.isManualVillage?(this.form.village="",this.form.manualVillage=""):this.form.manualVillage=""},handleManualMandalChange(){this.form.village="",this.form.manualVillage="",this.villages=[],this.form.manualMandal&&(delete this.errors.mandal,this.fetchManualMandal(this.form.manualMandal))},handleManualVillageChange(){this.form.manualVillage&&(delete this.errors.village,this.fetchManualVillage(this.form.manualVillage),this.searchAddressWithManualLocation())},async fetchManualMandal(e){try{const t=await fetch(`${this.apiBaseUrl}/mandals/search/?name=${encodeURIComponent(e)}&constituency_id=${this.form.constituency}`),s=await t.json();if("success"===s.status&&s.data.length>0){const t=s.data.find(t=>t.name.toLowerCase()===e.toLowerCase());t&&(this.form.mandal=t.id,await this.fetchVillages(t.id))}}catch(t){console.error("Error fetching manual mandal:",t)}},async fetchManualVillage(e){try{const t=this.form.mandal||"",s=await fetch(`${this.apiBaseUrl}/villages/search/?name=${encodeURIComponent(e)}&mandal_id=${t}`),a=await s.json();if("success"===a.status&&a.data.length>0){const t=a.data.find(t=>t.name.toLowerCase()===e.toLowerCase());t&&(this.form.village=t.id,this.searchAddress())}}catch(t){console.error("Error fetching manual village:",t)}},async searchAddressWithManualLocation(){if(this.googleMapsLoaded)try{const e=this.states.find(e=>e.value===this.form.state)?.label||"",t=this.districts.find(e=>e.value===this.form.district)?.label||"",s=this.constituencies.find(e=>e.value===this.form.constituency)?.label||"",a=this.isManualMandal?this.form.manualMandal:this.mandals.find(e=>e.value===this.form.mandal)?.label||"",i=this.isManualVillage?this.form.manualVillage:this.villages.find(e=>e.value===this.form.village)?.label||"";if(!i)return;let o=`${i}, ${a}, ${s} constituency, ${t}, ${e}, India`,r=await this.getPlacePredictions(o);r.length||(o=`${i}, ${a}, ${t}, ${e}, India`,r=await this.getPlacePredictions(o)),r.length||(o=`${i} village, ${s} constituency, ${t} district, ${e}, India`,r=await this.getPlacePredictions(o)),this.addressSuggestions=r,1===r.length&&await this.selectAddress(r[0])}catch(e){console.error("Error in manual location search:",e)}},validateForm(){console.log("Validating form..."),this.errors={};let e=!0;return this.form.firstName||(this.errors.firstName="First name is required",e=!1),this.form.lastName||(this.errors.lastName="Last name is required",e=!1),this.form.email&&!this.isValidEmail(this.form.email)&&(this.errors.email="Please enter a valid email address",e=!1),this.form.state||(this.errors.state="State is required",e=!1),this.form.district||(this.errors.district="District is required",e=!1),this.form.constituency||(this.errors.constituency="Constituency is required",e=!1),this.isManualMandal||this.form.mandal?this.isManualMandal&&!this.form.manualMandal&&(this.errors.mandal="Mandal name is required",e=!1):(this.errors.mandal="Mandal is required",e=!1),this.isManualVillage||this.form.village?this.isManualVillage&&!this.form.manualVillage&&(this.errors.village="Village name is required",e=!1):(this.errors.village="Village is required",e=!1),this.form.address||(this.errors.address="Address is required",e=!1),this.form.pincode?/^\d{6}$/.test(this.form.pincode)||(this.errors.pincode="Pincode must be exactly 6 digits",e=!1):(this.errors.pincode="Pincode is required",e=!1),this.form.termsAccepted||(this.errors.terms="You must accept the Terms & Conditions to continue",e=!1),this.form.referralCode&&!this.referralStatus.valid&&(this.errors.referralCode="Please verify the referral code",e=!1),console.log("Validation result:",{isValid:e,errors:this.errors}),e},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},initGoogleMaps(){return new Promise((e,t)=>{try{if(console.log("Starting Google Maps initialization"),this.isLoadingGoogleMaps=!0,window.google&&window.google.maps)return console.log("Google Maps already loaded, initializing services"),this.initPlacesService(),this.isLoadingGoogleMaps=!1,this.googleMapsLoaded=!0,void e();const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${this.googleMapsApiKey}&libraries=places&callback=initGoogleCallback`,s.async=!0,s.defer=!0,window.initGoogleCallback=()=>{console.log("Google Maps loaded successfully"),this.googleMapsScriptLoaded=!0,this.initPlacesService(),this.googleMapsLoaded=!0,this.isLoadingGoogleMaps=!1,e()},s.onerror=e=>{console.error("Error loading Google Maps:",e),this.errors.maps="Failed to load Google Maps. Please check your internet connection.",this.isLoadingGoogleMaps=!1,t(e)},document.head.appendChild(s),console.log("Google Maps script added to document")}catch(s){console.error("Error in initGoogleMaps:",s),this.errors.maps="Failed to initialize Google Maps.",this.isLoadingGoogleMaps=!1,t(s)}})},initPlacesService(){try{if(console.log("Initializing Places Service"),!window.google||!window.google.maps)throw new Error("Google Maps not loaded");const e=document.getElementById("places-service-map");e&&e.remove();const t=document.createElement("div");t.style.display="none",t.id="places-service-map",document.body.appendChild(t);const s=new window.google.maps.Map(t,{center:{lat:-34.397,lng:150.644},zoom:8});this.placesService=new window.google.maps.places.AutocompleteService,this.geocoder=new window.google.maps.Geocoder,this.detailedPlacesService=new window.google.maps.places.PlacesService(s),console.log("Places service initialized successfully"),this.googleMapsLoaded=!0,delete this.errors.maps}catch(e){console.error("Error initializing places service:",e),this.errors.maps="Failed to initialize location services.",this.googleMapsLoaded=!1}},async searchAddress(){if(console.log("searchAddress called with current state:",{googleMapsLoaded:this.googleMapsLoaded,placesService:!!this.placesService,village:this.form.village}),!this.googleMapsLoaded||!this.placesService){console.log("Reinitializing Google Maps");try{await this.initGoogleMaps()}catch(e){return void console.error("Failed to reinitialize Google Maps:",e)}}if(this.form.village)try{const e=this.states.find(e=>e.value===this.form.state)?.label||"",t=this.districts.find(e=>e.value===this.form.district)?.label||"",s=this.constituencies.find(e=>e.value===this.form.constituency)?.label||"",a=this.mandals.find(e=>e.value===this.form.mandal)?.label||"",i=this.villages.find(e=>e.value===this.form.village)?.label||"";console.log("Searching with location data:",{state:e,district:t,constituency:s,mandal:a,village:i});let o=`${i}, ${a}, ${s} constituency, ${t}, ${e}, India`;console.log("Trying search with query:",o);let r=await this.getPlacePredictions(o);r.length||(o=`${i}, ${a}, ${t}, ${e}, India`,console.log("Retrying with simplified query:",o),r=await this.getPlacePredictions(o)),this.addressSuggestions=r,console.log("Got address suggestions:",r),1===r.length&&await this.selectAddress(r[0])}catch(e){console.error("Error in searchAddress:",e),this.errors.maps="Unable to fetch address suggestions. Please try again."}else console.log("No village selected")},handleReferralInput(){this.form.referralCode=this.form.referralCode.toUpperCase(),this.referralStatus.valid=!1,this.referralStatus.message="",this.errors.referralCode=""},async verifyReferralCode(){if(this.form.referralCode){this.isValidatingReferral=!0,this.errors.referralCode="";try{const e=await S.A.get(`${this.apiBaseUrl}/users/verify-referral/`,{params:{code:this.form.referralCode},headers:{Accept:"application/json"}}),t=e.data;"success"===t.status?(this.referralStatus.valid=!0,this.referralStatus.message="Valid referral code",this.errors.referralCode=""):(this.referralStatus.valid=!1,this.errors.referralCode=t.message||"Invalid referral code")}catch(e){console.error("Error verifying referral code:",e),this.errors.referralCode=e.response?.data?.message||"Failed to verify referral code",this.referralStatus.valid=!1}finally{this.isValidatingReferral=!1}}}},async created(){console.log("Component created - Starting initialization");try{if(this.form.phone=this.$route.query.phone||localStorage.getItem("phone")||"",this.token=this.$route.query.token||localStorage.getItem("token")||localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).token,console.log("Initial token:",this.token),!this.form.phone)return console.error("Missing phone number"),this.errors.general="Missing phone number. Please try logging in again.",void this.$router.push("/login");if(!this.token)return console.error("Missing token"),this.errors.general="Authentication token is missing. Please try logging in again.",void this.$router.push("/login");localStorage.getItem("phone")||localStorage.setItem("phone",this.form.phone),console.log("Initializing Google Maps"),await this.initGoogleMaps(),console.log("Starting to fetch states"),await this.fetchStates();const e=new URLSearchParams(window.location.search),t=e.get("ref");t&&(this.form.referralCode=t.toUpperCase(),await this.verifyReferralCode())}catch(e){console.error("Error in component creation:",e),this.errors.general="Failed to initialize the form. Please refresh the page."}},mounted(){console.log("Component mounted - Checking states:",{statesLength:this.states.length,states:this.states}),0!==this.states.length||this.isLoadingStates||(console.log("States are empty, fetching again"),this.fetchStates())},beforeUnmount(){const e=document.getElementById("places-service-map");e&&e.remove()}};const Wh=(0,se.A)(Bh,[["render",Nh],["__scopeId","data-v-5eaeee9e"]]);var Qh=Wh;const qh={class:"min-h-screen bg-[#121212] text-white"},zh={class:"container mx-auto px-4 pt-12 md:pt-24 pb-32 md:pb-12 mb-safe"},Kh={class:"relative"},Hh={class:"relative -mt-12 md:-mt-16 px-4 sm:px-6"},Jh={class:"flex flex-col md:flex-row items-center md:items-end gap-4 md:gap-6"},Yh={class:"w-24 h-24 md:w-32 md:h-32 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white border-4 border-[#121212]"},Gh={class:"text-3xl md:text-4xl font-bold"},Zh={class:"text-center md:text-left flex-1"},ep={class:"text-xl md:text-3xl font-bold"},tp={class:"text-white/60 mt-1"},sp={class:"mt-8 md:mt-12 grid grid-cols-1 md:grid-cols-12 gap-6"},ap={class:"md:col-span-4 space-y-6"},ip={class:"bg-white/5 rounded-xl p-6"},op={class:"space-y-4"},rp={class:"font-medium"},lp={class:"font-medium"},np={class:"font-medium"},cp={key:0,class:"bg-white/10 rounded-lg p-3 text-center"},dp={class:"text-sm"},up={class:"text-[#c30059] font-bold"},hp={class:"md:col-span-8 space-y-6"},pp={class:"bg-white/5 rounded-xl p-6"},mp={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},gp={class:"bg-white/5 rounded-xl p-6"},fp={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},vp={class:"bg-white/5 rounded-xl p-6"},yp={class:"flex items-center justify-between mb-4"},bp={class:"text-sm text-white/60"},kp={key:0,class:"flex justify-center py-8"},wp={key:1,class:"text-center py-8 text-white/60"},xp={key:2,class:"space-y-4"},Lp={class:"flex items-center gap-4"},Cp={class:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center"},Sp={class:"font-medium"},_p={class:"text-sm text-white/60"},Pp={key:0,class:"text-xs text-white/40"},Ep={class:"flex items-center gap-4"},Ap=["onClick","disabled"],Tp={key:3,class:"mt-4 p-4 bg-red-500/20 text-red-500 rounded-lg text-sm"},Ip={key:0,class:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 mb-safe"},Mp={class:"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6"},Vp={class:"flex justify-between items-center mb-6"},Dp={key:0,class:"mt-1 text-sm text-red-500"},Rp={key:0,class:"mt-1 text-sm text-red-500"},jp={class:"pt-4"},Xp=["disabled"],$p={key:0,class:"fas fa-spinner fa-spin"};function Fp(e,t,s,o,r,l){const c=(0,i.g2)("AppHeader"),d=(0,i.g2)("ReferralCard");return(0,i.uX)(),(0,i.CE)("div",qh,[(0,i.bF)(c),(0,i.Lk)("main",zh,[(0,i.Lk)("div",Kh,[t[7]||(t[7]=(0,i.Lk)("div",{class:"h-32 md:h-64 w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl"},null,-1)),(0,i.Lk)("div",Hh,[(0,i.Lk)("div",Jh,[(0,i.Lk)("div",Yh,[(0,i.Lk)("span",Gh,(0,n.v_)(l.userInitials),1)]),(0,i.Lk)("div",Zh,[(0,i.Lk)("h1",ep,(0,n.v_)(l.userName),1),(0,i.Lk)("p",tp,(0,n.v_)(l.user?.phone||"No phone number"),1)]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/profile/update")),class:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex items-center gap-2"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1),(0,i.eW)(" Edit Profile ")]))])])]),(0,i.Lk)("div",sp,[(0,i.Lk)("div",ap,[(0,i.Lk)("div",ip,[t[13]||(t[13]=(0,i.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Membership Details",-1)),(0,i.Lk)("div",op,[(0,i.Lk)("div",null,[t[8]||(t[8]=(0,i.Lk)("p",{class:"text-white/60"},"Membership Plan",-1)),(0,i.Lk)("p",rp,(0,n.v_)(l.user?.subscription_type||"Free Plan"),1)]),(0,i.Lk)("div",null,[t[9]||(t[9]=(0,i.Lk)("p",{class:"text-white/60"},"Valid From",-1)),(0,i.Lk)("p",lp,(0,n.v_)(l.formatSubscriptionDate(l.user?.subscription_start_date)),1)]),(0,i.Lk)("div",null,[t[10]||(t[10]=(0,i.Lk)("p",{class:"text-white/60"},"Valid Until",-1)),(0,i.Lk)("p",np,(0,n.v_)(l.formatSubscriptionDate(l.user?.subscription_end_date)),1)]),(0,i.Lk)("div",null,[t[11]||(t[11]=(0,i.Lk)("p",{class:"text-white/60"},"Status",-1)),(0,i.Lk)("p",{class:(0,n.C4)([l.isSubscriptionActive?"text-green-500":"text-red-500","font-medium"])},(0,n.v_)(l.isSubscriptionActive?"Active":"Expired"),3)]),l.daysRemaining>0?((0,i.uX)(),(0,i.CE)("div",cp,[(0,i.Lk)("p",dp,[(0,i.Lk)("span",up,(0,n.v_)(l.daysRemaining),1),t[12]||(t[12]=(0,i.Lk)("span",{class:"text-white/60"},"days remaining",-1))])])):(0,i.Q3)("",!0)])]),t[14]||(t[14]=(0,i.Fv)('<div class="bg-white/5 rounded-xl p-6" data-v-46df0090><h2 class="text-xl font-semibold mb-4" data-v-46df0090>Account Settings</h2><div class="space-y-3" data-v-46df0090><button class="w-full py-3 px-4 bg-white/5 hover:bg-white/10 rounded-lg text-left flex items-center justify-between" data-v-46df0090><span data-v-46df0090>Language</span><span class="text-white/60" data-v-46df0090>English</span></button><button class="w-full py-3 px-4 bg-white/5 hover:bg-white/10 rounded-lg text-left flex items-center justify-between" data-v-46df0090><span data-v-46df0090>Video Quality</span><span class="text-white/60" data-v-46df0090>Auto</span></button><button class="w-full py-3 px-4 bg-white/5 hover:bg-white/10 rounded-lg text-left flex items-center justify-between" data-v-46df0090><span data-v-46df0090>Downloads</span><span class="text-white/60" data-v-46df0090>WiFi Only</span></button></div></div>',1)),(0,i.bF)(d,{isInProfilePage:!0})]),(0,i.Lk)("div",hp,[(0,i.Lk)("div",pp,[t[15]||(t[15]=(0,i.Lk)("div",{class:"flex items-center justify-between mb-4"},[(0,i.Lk)("h2",{class:"text-xl font-semibold"},"My List"),(0,i.Lk)("button",{class:"text-white/60 hover:text-white"},"View All")],-1)),(0,i.Lk)("div",mp,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,e=>(0,i.Lk)("div",{key:e,class:"aspect-[2/3] rounded-lg bg-white/10 animate-pulse"})),64))])]),(0,i.Lk)("div",gp,[t[16]||(t[16]=(0,i.Lk)("div",{class:"flex items-center justify-between mb-4"},[(0,i.Lk)("h2",{class:"text-xl font-semibold"},"Continue Watching"),(0,i.Lk)("button",{class:"text-white/60 hover:text-white"},"View All")],-1)),(0,i.Lk)("div",fp,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,e=>(0,i.Lk)("div",{key:e,class:"aspect-[2/3] rounded-lg bg-white/10 animate-pulse"})),64))])]),(0,i.Lk)("div",vp,[(0,i.Lk)("div",yp,[t[17]||(t[17]=(0,i.Lk)("h2",{class:"text-xl font-semibold"},"Device Management",-1)),(0,i.Lk)("div",bp,(0,n.v_)(r.devices.length)+"/3 Devices Active ",1)]),r.isLoadingDevices?((0,i.uX)(),(0,i.CE)("div",kp,t[18]||(t[18]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"},null,-1)]))):0===r.devices.length?((0,i.uX)(),(0,i.CE)("div",wp," No devices found ")):((0,i.uX)(),(0,i.CE)("div",xp,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.devices,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},[(0,i.Lk)("div",Lp,[(0,i.Lk)("div",Cp,[(0,i.Lk)("i",{class:(0,n.C4)([l.getDeviceIcon(e.device_type),"text-[#ff4d4d]"])},null,2)]),(0,i.Lk)("div",null,[(0,i.Lk)("p",Sp,(0,n.v_)(e.device_name),1),(0,i.Lk)("p",_p,(0,n.v_)(e.device_type)+" • Last active "+(0,n.v_)(l.formatDate(e.last_active)),1),e.device_model?((0,i.uX)(),(0,i.CE)("p",Pp,(0,n.v_)(e.device_model)+" • "+(0,n.v_)(e.os_version||"Unknown OS"),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Ep,[(0,i.Lk)("span",{class:(0,n.C4)([e.is_active?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500","px-3 py-1 rounded-full text-sm"])},(0,n.v_)(e.is_active?"Active":"Inactive"),3),e.is_active&&r.devices.length>1?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>l.deactivateDevice(e.id),class:"text-red-500 hover:text-red-400 transition-colors",disabled:r.isDeactivating},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-times-circle"},null,-1)]),8,Ap)):(0,i.Q3)("",!0)])]))),128))])),r.deviceError?((0,i.uX)(),(0,i.CE)("div",Tp,(0,n.v_)(r.deviceError),1)):(0,i.Q3)("",!0)])])])]),r.isEditModalOpen?((0,i.uX)(),(0,i.CE)("div",Ip,[(0,i.Lk)("div",Mp,[(0,i.Lk)("div",Vp,[t[21]||(t[21]=(0,i.Lk)("h2",{class:"text-xl font-semibold"},"Edit Profile",-1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.isEditModalOpen=!1),class:"text-white/60 hover:text-white"},t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)((...t)=>e.handleUpdateProfile&&e.handleUpdateProfile(...t),["prevent"])),class:"space-y-4"},[(0,i.Lk)("div",null,[t[22]||(t[22]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/60 mb-1"},"First Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.editForm.firstName=e),type:"text",class:(0,n.C4)(["w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-[#ff4d4d]",{"border-red-500":r.errors.firstName}]),placeholder:"Enter your first name",required:""},null,2),[[a.Jo,r.editForm.firstName]]),r.errors.firstName?((0,i.uX)(),(0,i.CE)("p",Dp,(0,n.v_)(r.errors.firstName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[23]||(t[23]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/60 mb-1"},"Last Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.editForm.lastName=e),type:"text",class:(0,n.C4)(["w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-[#ff4d4d]",{"border-red-500":r.errors.lastName}]),placeholder:"Enter your last name",required:""},null,2),[[a.Jo,r.editForm.lastName]]),r.errors.lastName?((0,i.uX)(),(0,i.CE)("p",Rp,(0,n.v_)(r.errors.lastName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[24]||(t[24]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/60 mb-1"},"Phone Number",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.editForm.phone=e),type:"tel",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-[#ff4d4d] opacity-50 cursor-not-allowed",placeholder:"Enter your phone number",disabled:""},null,512),[[a.Jo,r.editForm.phone]]),t[25]||(t[25]=(0,i.Lk)("p",{class:"mt-1 text-sm text-white/60"},"Phone number cannot be changed",-1))]),(0,i.Lk)("div",jp,[(0,i.Lk)("button",{type:"submit",class:"w-full py-3 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",disabled:e.isLoading||!e.isFormValid},[e.isLoading?((0,i.uX)(),(0,i.CE)("i",$p)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,n.v_)(e.isLoading?"Saving...":"Save Changes"),1)],8,Xp)])],32)])])):(0,i.Q3)("",!0)])}const Up={class:"min-h-screen bg-gradient-to-br from-[#1a1a1a] to-[#2d2d2d] p-4 pb-24 md:pb-8 flex items-center justify-center"},Op={class:"w-full max-w-md mb-safe"},Np={key:0,class:"absolute top-6 left-6"},Bp={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/10"},Wp={class:"text-center mb-6"},Qp={class:"text-3xl md:text-4xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 tracking-wider flex-1"},qp={class:"flex flex-col items-center gap-6 mb-5"},zp={class:"bg-gradient-to-r from-[#333] to-[#404040] rounded-xl p-8 transform hover:scale-105 transition-all duration-300"},Kp={key:0,class:"relative group"},Hp=["src"],Jp={key:1,class:"w-48 h-48 bg-[#444] rounded-xl flex items-center justify-center"},Yp={class:"mb-10"},Gp={class:"bg-gradient-to-r from-[#2a2a2a] to-[#333] rounded-xl p-4 border border-white/5"},Zp={class:"flex items-center justify-between"},em={class:"flex items-baseline gap-2"},tm={key:0,class:"mt-3 space-y-2 max-h-32 overflow-y-auto"},sm={class:"text-white/40"},am={class:"space-y-4"},im={key:1,class:"fixed bottom-24 md:bottom-4 right-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-fade-in-up"};function om(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",Up,[(0,i.Lk)("div",Op,[s.isInProfilePage?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Np,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/")),class:"text-white/70 hover:text-white"},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)]))])),t[21]||(t[21]=(0,i.Lk)("div",{class:"text-center mb-8"},[(0,i.Lk)("h1",{class:"text-3xl font-bold text-white mb-2"},"Invite Friends"),(0,i.Lk)("p",{class:"text-white/60"},"Share the joy of entertainment with your friends")],-1)),(0,i.Lk)("div",Bp,[(0,i.Lk)("div",Wp,[t[9]||(t[9]=(0,i.Lk)("h2",{class:"text-white/80 text-xl mb-4"},"Your Unique Code",-1)),(0,i.Lk)("div",{class:"bg-gradient-to-r from-[#333] to-[#404040] rounded-xl p-5 flex items-center justify-between gap-4 transform hover:scale-105 transition-all duration-300 cursor-pointer shadow-lg",onClick:t[1]||(t[1]=(...e)=>r.copyToClipboard&&r.copyToClipboard(...e))},[(0,i.Lk)("span",Qp,(0,n.v_)(o.referralCode||"Loading..."),1),t[8]||(t[8]=(0,i.Lk)("div",{class:"shrink-0 w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-pink-500 to-violet-500 hover:from-violet-500 hover:to-pink-500 transition-all duration-500"},[(0,i.Lk)("i",{class:"fas fa-copy text-white text-xl"})],-1))])]),(0,i.Lk)("div",qp,[(0,i.Lk)("div",zp,[o.qrCodeUrl?((0,i.uX)(),(0,i.CE)("div",Kp,[(0,i.Lk)("img",{src:o.qrCodeUrl,alt:"Referral QR Code",class:"w-48 h-48 rounded-xl"},null,8,Hp),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.downloadQR&&r.downloadQR(...e)),class:"absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded-xl flex flex-col items-center justify-center gap-2"},t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-download text-white text-2xl"},null,-1),(0,i.Lk)("span",{class:"text-white text-sm"},"Download QR",-1)]))])):((0,i.uX)(),(0,i.CE)("div",Jp,t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-qrcode text-4xl text-white/30"},null,-1)])))])]),(0,i.Lk)("div",Yp,[(0,i.Lk)("div",Gp,[(0,i.Lk)("div",Zp,[(0,i.Lk)("div",null,[t[16]||(t[16]=(0,i.Lk)("h3",{class:"text-white/70 text-sm mb-1"},"Total Referrals",-1)),(0,i.Lk)("div",em,[(0,i.Lk)("span",{class:(0,n.C4)(["text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 transition-all duration-300",{"animate-bounce":o.isCountUpdating}])},(0,n.v_)(o.totalReferrals),3),t[12]||(t[12]=(0,i.Lk)("span",{class:"text-white/50 text-sm"},"people joined",-1))]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$router.push("/referral/details")),class:"mt-3 text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 hover:opacity-80 transition-opacity flex items-center gap-1"},t[13]||(t[13]=[(0,i.eW)(" View Details "),(0,i.Lk)("i",{class:"fas fa-arrow-right text-xs"},null,-1)])),o.referredUsers.length>0?((0,i.uX)(),(0,i.CE)("div",tm,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.latestTwoReferrals,(e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"text-sm text-white/60 flex items-center gap-2 animate-fade-in"},[t[14]||(t[14]=(0,i.Lk)("i",{class:"fas fa-user-check text-green-500"},null,-1)),(0,i.Lk)("span",null,(0,n.v_)(r.maskPhone(e.phone))+" joined",1),(0,i.Lk)("span",sm,(0,n.v_)(r.formatDate(e.joined_at)),1)]))),128)),o.referredUsers.length>2?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"text-sm text-white/40 flex items-center gap-2 cursor-pointer hover:text-white/60 transition-colors",onClick:t[4]||(t[4]=t=>e.$router.push("/referral/details"))},[t[15]||(t[15]=(0,i.Lk)("i",{class:"fas fa-ellipsis-h"},null,-1)),(0,i.Lk)("span",null,"View "+(0,n.v_)(o.referredUsers.length-2)+" more",1)])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)]),t[17]||(t[17]=(0,i.Lk)("div",{class:"w-10 h-10 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-users text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1))])])]),(0,i.Lk)("div",am,[(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.shareWhatsApp&&r.shareWhatsApp(...e)),class:"w-full py-4 px-6 bg-gradient-to-r from-[#25D366] to-[#128C7E] hover:from-[#128C7E] hover:to-[#25D366] rounded-xl transition-all duration-500 flex items-center justify-center gap-3 transform hover:scale-105 shadow-lg"},t[18]||(t[18]=[(0,i.Lk)("i",{class:"fab fa-whatsapp text-xl"},null,-1),(0,i.Lk)("span",{class:"font-semibold"},"Share via WhatsApp",-1)])),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.shareGeneral&&r.shareGeneral(...e)),class:"w-full py-4 px-6 bg-gradient-to-r from-pink-500 to-violet-500 hover:from-violet-500 hover:to-pink-500 rounded-xl transition-all duration-500 flex items-center justify-center gap-3 transform hover:scale-105 shadow-lg"},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-share-alt text-xl"},null,-1),(0,i.Lk)("span",{class:"font-semibold"},"Share with Friends",-1)]))])]),o.showCopySuccess?((0,i.uX)(),(0,i.CE)("div",im,t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-check-circle text-xl"},null,-1),(0,i.Lk)("span",{class:"font-medium"},"Code copied successfully!",-1)]))):(0,i.Q3)("",!0)])])}var rm={name:"ReferralCard",props:{isInProfilePage:{type:Boolean,default:!1}},data(){return{referralCode:"",qrCodeUrl:"",totalReferrals:0,referredUsers:[],showCopySuccess:!1,baseUrl:"https://ott.no1news.in",websiteUrl:"https://no1ott.com",pollingInterval:null,isCountUpdating:!1}},computed:{referralUrl(){return`${this.websiteUrl}/#/login?ref=${this.referralCode}`},shareMessage(){return`🎬 Join our OTT platform!\n\nUse my referral code: *${this.referralCode}*\n\n📱 Join using this link: ${this.referralUrl}\n\nEnjoy unlimited entertainment!`},latestTwoReferrals(){return this.referredUsers.slice(0,2)}},async created(){await this.fetchReferralData(),this.startPolling()},beforeUnmount(){this.stopPolling()},methods:{async fetchReferralData(){try{const e=localStorage.getItem("phone");if(!e)return void console.error("Phone number not found in localStorage");const t=await fetch(`${this.baseUrl}/users/referral-info/?phone=${e}`,{headers:{Accept:"application/json"}}),s=await t.json();"success"===s.status?(this.totalReferrals!==s.total_referrals&&(this.isCountUpdating=!0,setTimeout(()=>{this.isCountUpdating=!1},1e3)),this.referralCode=s.referral_code,this.qrCodeUrl=s.qr_code_url,this.totalReferrals=s.total_referrals,this.referredUsers=s.referred_users):console.error("Error fetching referral data:",s.message)}catch(e){console.error("Error fetching referral data:",e)}},startPolling(){this.pollingInterval=setInterval(()=>{this.fetchReferralData()},3e4)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async copyToClipboard(){try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(this.referralCode);else{const t=document.createElement("textarea");t.value=this.referralCode,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),t.remove()}catch(e){return console.error("Fallback: Oops, unable to copy",e),void t.remove()}}this.showCopySuccess=!0,setTimeout(()=>{this.showCopySuccess=!1},2e3)}catch(e){console.error("Failed to copy text:",e)}},downloadQR(){if(!this.qrCodeUrl)return;const e=document.createElement("a");e.href=this.qrCodeUrl,e.download=`referral_qr_${this.referralCode}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},async downloadQRCodeImage(){try{const e=await fetch(this.qrCodeUrl),t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");return a.href=s,a.download=`referral_qr_${this.referralCode}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),!0}catch(e){return console.error("Error downloading QR code:",e),!1}},async shareWhatsApp(){try{const e=`https://wa.me/?text=${encodeURIComponent(this.shareMessage)}`;window.open(e,"_blank")}catch(e){console.error("Error sharing on WhatsApp:",e)}},shareGeneral(){navigator.share&&navigator.share({title:"Join our OTT Platform",text:this.shareMessage,url:this.referralUrl})},async share(){try{navigator.share?await navigator.share({title:"Join our OTT Platform",text:this.shareMessage,url:this.referralUrl}):(await navigator.clipboard.writeText(this.shareMessage),this.showCopySuccess=!0,setTimeout(()=>{this.showCopySuccess=!1},2e3))}catch(e){console.error("Error sharing:",e)}},maskPhone(e){return e?`${e.slice(0,4)}****${e.slice(-4)}`:""},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}};const lm=(0,se.A)(rm,[["render",om]]);var nm=lm,cm={name:"ProfilePage",components:{AppHeader:bt,ReferralCard:nm},data(){return{isEditModalOpen:!1,editForm:{firstName:"",lastName:"",email:"",phone:""},errors:{},devices:[],isLoadingDevices:!1,deviceError:null,isDeactivating:!1}},computed:{...(0,_.L8)(["currentUser"]),user(){return this.currentUser},userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},userName(){return this.user?this.user.first_name||this.user.last_name?`${this.user.first_name||""} ${this.user.last_name||""}`.trim():this.user.phone:""},isSubscriptionActive(){return!!this.user?.subscription_end_date&&new Date(this.user.subscription_end_date)>new Date},daysRemaining(){if(!this.user?.subscription_end_date)return 0;const e=new Date(this.user.subscription_end_date),t=new Date,s=e-t;return Math.max(0,Math.ceil(s/864e5))}},async created(){if(this.user||await this.$store.dispatch("initializeStore"),!this.user)return console.error("Failed to load user data"),void this.$router.push("/");this.loadDevices()},methods:{formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"},formatSubscriptionDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"},getDeviceIcon(e){const t={mobile:"fa-mobile-alt",tablet:"fa-tablet-alt",desktop:"fa-desktop",tv:"fa-tv",default:"fa-device"};return t[e.toLowerCase()]||t.default},async loadDevices(){this.isLoadingDevices=!0,this.deviceError=null;try{const e=await fetch(`https://ott.no1news.in/users/devices-info/?phone=${this.user.phone}`,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to load devices");const t=await e.json();"success"===t.status&&t.devices?this.devices=t.devices:(this.devices=[],this.deviceError=t.message||"No devices found")}catch(e){console.error("Failed to load devices:",e),this.deviceError="Failed to load devices. Please try again."}finally{this.isLoadingDevices=!1}},async deactivateDevice(e){if(!this.isDeactivating){this.isDeactivating=!0;try{const t=await fetch("https://ott.no1news.in/users/deactivate-device/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":localStorage.getItem("csrfToken")},credentials:"include",body:JSON.stringify({device_id:e,phone:this.user.phone})});if(!t.ok)throw new Error("Failed to deactivate device");await this.loadDevices()}catch(t){console.error("Failed to deactivate device:",t),this.deviceError="Failed to deactivate device. Please try again."}finally{this.isDeactivating=!1}}}}};const dm=(0,se.A)(cm,[["render",Fp],["__scopeId","data-v-46df0090"]]);var um=dm;const hm={class:"min-h-screen bg-[#121212] text-white relative"},pm={class:"max-w-4xl mx-auto p-4 md:p-6 pb-32 md:pb-12 mb-safe"},mm={class:"flex flex-col md:flex-row md:items-center justify-between mb-8 pt-16 md:pt-8"},gm={class:"relative mx-auto md:mx-0"},fm={class:"w-28 h-28 md:w-24 md:h-24 rounded-full overflow-hidden border-4 border-[#c30059] shadow-lg"},vm=["src"],ym={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-[#c30059] to-[#ff4d4d] text-white text-4xl md:text-3xl font-bold"},bm={class:"absolute bottom-0 right-0 bg-[#c30059] p-3 rounded-full cursor-pointer hover:bg-[#ff4d4d] transition-colors shadow-lg"},km={class:"bg-[#1a1a1a] rounded-xl shadow-2xl p-4 md:p-6 backdrop-blur-lg bg-opacity-50"},wm={class:"space-y-4 md:space-y-6"},xm={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},Lm={class:"space-y-2"},Cm={class:"space-y-2"},Sm={class:"space-y-2"},_m={class:"space-y-2"},Pm={class:"space-y-2"},Em={class:"space-y-2"},Am=["value"],Tm={class:"space-y-2 md:col-span-2"},Im={class:"flex gap-4"},Mm={class:"relative flex-1"},Vm=["readonly","disabled"],Dm={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},Rm=["disabled"],jm={key:0,class:"text-[#ff4d4d] text-sm mt-1"},Xm={key:1,class:"text-green-500 text-sm mt-1 flex items-center gap-2"},$m={class:"space-y-4 md:space-y-6"},Fm={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},Um={class:"space-y-2 relative"},Om=["disabled"],Nm={value:""},Bm=["value"],Wm={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},Qm={class:"space-y-2 relative"},qm=["disabled"],zm={value:""},Km=["value"],Hm={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},Jm={class:"space-y-2 relative"},Ym=["disabled"],Gm={value:""},Zm=["value"],eg={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},tg={class:"space-y-2"},sg={class:"space-y-2"},ag={class:"space-y-2"},ig={class:"space-y-2 md:col-span-2"},og={class:"fixed bottom-0 left-0 right-0 p-4 bg-[#121212]/95 backdrop-blur-md border-t border-white/10 flex justify-end space-x-4 md:relative md:bg-transparent md:border-0 md:p-0 md:mt-6 z-50"},rg=["disabled"],lg={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 md:h-5 md:w-5",viewBox:"0 0 20 20",fill:"currentColor"},ng={key:0,class:"fixed bottom-[88px] md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md bg-[#c30059] text-white px-4 py-3 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out"},cg={key:1,class:"fixed bottom-[88px] md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md bg-[#ff4d4d] text-white px-4 py-3 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out"},dg={class:"flex items-center space-x-2"},ug={class:"text-sm md:text-base"};function hg(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",hm,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/profile")),class:"fixed top-4 left-4 z-10 text-white/70 hover:text-white bg-[#1a1a1a] p-2 rounded-full shadow-lg"},t[23]||(t[23]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),(0,i.Lk)("div",pm,[(0,i.Lk)("div",mm,[t[25]||(t[25]=(0,i.Lk)("div",{class:"text-center md:text-left mb-6 md:mb-0"},[(0,i.Lk)("h2",{class:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-[#c30059] to-[#ff4d4d] bg-clip-text text-transparent"}," Profile Settings "),(0,i.Lk)("p",{class:"text-gray-400 mt-2 text-sm md:text-base"},"Manage your account information")],-1)),(0,i.Lk)("div",gm,[(0,i.Lk)("div",fm,[r.formData.profile_picture?((0,i.uX)(),(0,i.CE)("img",{key:0,src:r.formData.profile_picture,alt:"Profile Picture",class:"w-full h-full object-cover"},null,8,vm)):((0,i.uX)(),(0,i.CE)("div",ym,(0,n.v_)(l.getInitials),1))]),(0,i.Lk)("label",bm,[t[24]||(t[24]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[(0,i.Lk)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),(0,i.Lk)("input",{type:"file",onChange:t[1]||(t[1]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",class:"hidden"},null,32)])])]),(0,i.Lk)("div",km,[(0,i.Lk)("form",{onSubmit:t[22]||(t[22]=(0,a.D$)((...e)=>l.updateProfile&&l.updateProfile(...e),["prevent"])),class:"space-y-6 md:space-y-8"},[(0,i.Lk)("div",wm,[t[38]||(t[38]=(0,i.Lk)("h3",{class:"text-lg md:text-xl font-semibold text-[#c30059] border-b border-[#c30059] pb-2"}," Personal Information ",-1)),(0,i.Lk)("div",xm,[(0,i.Lk)("div",Lm,[t[26]||(t[26]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"First Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.first_name=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your first name",required:""},null,512),[[a.Jo,r.formData.first_name]])]),(0,i.Lk)("div",Cm,[t[27]||(t[27]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Last Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.formData.last_name=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your last name",required:""},null,512),[[a.Jo,r.formData.last_name]])]),(0,i.Lk)("div",Sm,[t[28]||(t[28]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},[(0,i.eW)("Email "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.formData.email=e),type:"email",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your email (optional)"},null,512),[[a.Jo,r.formData.email]])]),(0,i.Lk)("div",_m,[t[29]||(t[29]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Phone",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.formData.phone=e),type:"tel",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your phone number",required:"",readonly:""},null,512),[[a.Jo,r.formData.phone]])]),(0,i.Lk)("div",Pm,[t[31]||(t[31]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Gender",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.formData.gender=e),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white"},t[30]||(t[30]=[(0,i.Lk)("option",{value:"",class:"bg-[#2a2a2a]"},"Select Gender",-1),(0,i.Lk)("option",{value:"M",class:"bg-[#2a2a2a]"},"Male",-1),(0,i.Lk)("option",{value:"F",class:"bg-[#2a2a2a]"},"Female",-1),(0,i.Lk)("option",{value:"O",class:"bg-[#2a2a2a]"},"Other",-1)]),512),[[a.u1,r.formData.gender]])]),(0,i.Lk)("div",Em,[t[33]||(t[33]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Year of Birth",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.formData.date_of_birth=e),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white"},[t[32]||(t[32]=(0,i.Lk)("option",{value:""},"Select Year",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.years,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,n.v_)(e),9,Am))),128))],512),[[a.u1,r.formData.date_of_birth]])]),(0,i.Lk)("div",Tm,[t[37]||(t[37]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},[(0,i.eW)(" Referral Phone Number "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.Lk)("div",Im,[(0,i.Lk)("div",Mm,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.formData.referral_code=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white uppercase",placeholder:"Enter referral Phone Number",onInput:t[9]||(t[9]=(...e)=>l.handleReferralInput&&l.handleReferralInput(...e)),readonly:r.hasReferralCode,disabled:r.hasReferralCode},null,40,Vm),[[a.Jo,r.formData.referral_code]]),r.isValidatingReferral?((0,i.uX)(),(0,i.CE)("div",Dm,t[34]||(t[34]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),r.hasReferralCode?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",onClick:t[10]||(t[10]=(...e)=>l.verifyReferralCode&&l.verifyReferralCode(...e)),disabled:!r.formData.referral_code||r.isValidatingReferral,class:"px-6 py-2 rounded-lg bg-[#c30059] text-white hover:bg-[#ff4d4d] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},t[35]||(t[35]=[(0,i.Lk)("span",null,"Verify",-1)]),8,Rm))]),r.referralError?((0,i.uX)(),(0,i.CE)("p",jm,(0,n.v_)(r.referralError),1)):(0,i.Q3)("",!0),r.referralSuccess?((0,i.uX)(),(0,i.CE)("p",Xm,t[36]||(t[36]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,i.eW)(" Valid referral code ")]))):(0,i.Q3)("",!0)])])]),(0,i.Lk)("div",$m,[t[49]||(t[49]=(0,i.Lk)("h3",{class:"text-lg md:text-xl font-semibold text-[#c30059] border-b border-[#c30059] pb-2"}," Location Details ",-1)),(0,i.Lk)("div",Fm,[(0,i.Lk)("div",Um,[t[40]||(t[40]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"State",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.formData.state=e),onChange:t[12]||(t[12]=(...e)=>l.handleStateChange&&l.handleStateChange(...e)),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",disabled:r.isLoadingStates,required:""},[(0,i.Lk)("option",Nm,(0,n.v_)(r.isLoadingStates?"Loading states...":"Select State"),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.states,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,Bm))),128))],40,Om),[[a.u1,r.formData.state]]),r.isLoadingStates?((0,i.uX)(),(0,i.CE)("div",Wm,t[39]||(t[39]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Qm,[t[42]||(t[42]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"District",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>r.formData.district=e),onChange:t[14]||(t[14]=(...e)=>l.handleDistrictChange&&l.handleDistrictChange(...e)),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",disabled:!r.formData.state||r.isLoadingDistricts,required:""},[(0,i.Lk)("option",zm,(0,n.v_)(r.isLoadingDistricts?"Loading districts...":"Select District"),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.districts,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,Km))),128))],40,qm),[[a.u1,r.formData.district]]),r.isLoadingDistricts?((0,i.uX)(),(0,i.CE)("div",Hm,t[41]||(t[41]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Jm,[t[44]||(t[44]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Constituency",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>r.formData.constituency=e),onChange:t[16]||(t[16]=(...e)=>l.handleConstituencyChange&&l.handleConstituencyChange(...e)),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",disabled:!r.formData.district||r.isLoadingConstituencies,required:""},[(0,i.Lk)("option",Gm,(0,n.v_)(r.isLoadingConstituencies?"Loading constituencies...":"Select Constituency"),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.constituencies,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,Zm))),128))],40,Ym),[[a.u1,r.formData.constituency]]),r.isLoadingConstituencies?((0,i.uX)(),(0,i.CE)("div",eg,t[43]||(t[43]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",tg,[t[45]||(t[45]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Mandal",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>r.formData.mandal=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your mandal (optional)"},null,512),[[a.Jo,r.formData.mandal]])]),(0,i.Lk)("div",sg,[t[46]||(t[46]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Village",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>r.formData.village=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your village (optional)"},null,512),[[a.Jo,r.formData.village]])]),(0,i.Lk)("div",ag,[t[47]||(t[47]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Pincode",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>r.formData.pincode=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your pincode (optional)",maxlength:"6"},null,512),[[a.Jo,r.formData.pincode]])]),(0,i.Lk)("div",ig,[t[48]||(t[48]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Complete Address",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[20]||(t[20]=e=>r.formData.address=e),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your complete address",rows:"2"},null,512),[[a.Jo,r.formData.address]])])])]),t[51]||(t[51]=(0,i.Lk)("div",{class:"h-3 md:h-0"},null,-1)),(0,i.Lk)("div",og,[(0,i.Lk)("button",{type:"button",onClick:t[21]||(t[21]=t=>e.$router.push("/profile")),class:"flex-1 md:flex-none px-6 py-3 md:py-2 rounded-lg bg-[#2a2a2a] text-white hover:bg-[#3a3a3a] transition-colors text-sm md:text-base"}," Cancel "),(0,i.Lk)("button",{type:"submit",class:"flex-1 md:flex-none px-6 py-3 md:py-2 rounded-lg bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white hover:from-[#d40063] hover:to-[#ff5c5c] transition-colors flex items-center justify-center space-x-2 text-sm md:text-base",disabled:r.loading},[(0,i.Lk)("span",null,(0,n.v_)(r.loading?"Updating...":"Submit"),1),r.loading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("svg",lg,t[50]||(t[50]=[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])))],8,rg)])],32)]),r.success?((0,i.uX)(),(0,i.CE)("div",ng,t[52]||(t[52]=[(0,i.Lk)("div",{class:"flex items-center space-x-2"},[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),(0,i.Lk)("span",{class:"text-sm md:text-base"},"Profile updated successfully!")],-1)]))):(0,i.Q3)("",!0),r.error?((0,i.uX)(),(0,i.CE)("div",cg,[(0,i.Lk)("div",dg,[t[53]||(t[53]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 md:h-6 md:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),(0,i.Lk)("span",ug,(0,n.v_)(r.error),1)])])):(0,i.Q3)("",!0)])])}var pg={name:"ProfileUpdate",data(){return{formData:{first_name:"",last_name:"",email:"",phone:"",gender:"",date_of_birth:"",profile_picture:null,address:"",state:"",district:"",constituency:"",mandal:"",village:"",pincode:"",referral_code:""},baseUrl:"https://ott.no1news.in",loading:!1,success:!1,error:null,isValidatingReferral:!1,referralError:null,referralSuccess:!1,hasReferralCode:!1,states:[],districts:[],constituencies:[],mandals:[],villages:[],isLoadingStates:!1,isLoadingDistricts:!1,isLoadingConstituencies:!1,years:Array.from({length:(new Date).getFullYear()-1940+1},(e,t)=>(new Date).getFullYear()-t)}},computed:{getInitials(){const e=this.formData.first_name||"",t=this.formData.last_name||"";return`${e.charAt(0)}${t.charAt(0)}`.toUpperCase()}},methods:{handleFileUpload(e){const t=e.target.files[0];t&&(this.formData.profile_picture=t)},handleReferralInput(){this.formData.referral_code=this.formData.referral_code.toUpperCase(),this.referralError=null,this.referralSuccess=!1},async verifyReferralCode(){if(this.formData.referral_code){this.isValidatingReferral=!0,this.referralError=null,this.referralSuccess=!1;try{const e=await S.A.get(`${this.baseUrl}/users/verify-referral/`,{params:{code:this.formData.referral_code},headers:{Accept:"application/json"}});"success"===e.data.status?(this.referralSuccess=!0,this.referralError=null):(this.referralError="Invalid referral code",this.referralSuccess=!1)}catch(e){console.error("Error verifying referral code:",e),this.referralError="Error verifying referral code",this.referralSuccess=!1}finally{this.isValidatingReferral=!1}}},async updateProfile(){if(!this.formData.referral_code||this.referralSuccess||this.hasReferralCode){this.loading=!0,this.success=!1,this.error=null;try{const e=localStorage.getItem("phone");if(!e)throw new Error("Please login again");if(this.formData.email){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e.test(this.formData.email))throw new Error("Please enter a valid email address")}const t=new FormData;t.append("phone",e),Object.keys(this.formData).forEach(e=>{let s=this.formData[e];"referral_code"===e&&this.hasReferralCode||("date_of_birth"===e&&s&&4===s.toString().length&&(s=`${s}-01-01`),"profile_picture"!==e?"phone"!==e&&null!==s&&""!==s&&t.append(e,s):s&&"string"!==typeof s&&t.append(e,s))});const s=await S.A.post(`${this.baseUrl}/users/update-profile/`,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});if("success"!==s.data.status)throw new Error(s.data.message||"Failed to update profile");this.success=!0,this.error=null,setTimeout(()=>{this.$router.push("/profile")},2e3)}catch(e){console.error("Error updating profile:",e),this.error=e.response?.data?.message||e.message||"Failed to update profile. Please try again.",403===e.response?.status&&setTimeout(()=>{localStorage.removeItem("phone"),this.$router.push("/login")},2e3)}finally{this.loading=!1}}else this.error="Please verify the referral code first"},async loadUserProfile(){try{const e=localStorage.getItem("phone");if(!e)return void this.$router.push("/login");const t=await S.A.get(`${this.baseUrl}/users/profile/`,{params:{phone:e},headers:{Accept:"application/json"}});if(console.log("Profile Response:",t.data),t.data&&"success"===t.data.status&&t.data.user){const s=t.data.user;if(this.formData={first_name:s.first_name||"",last_name:s.last_name||"",email:s.email||"",phone:e,gender:s.gender||"",date_of_birth:s.date_of_birth?s.date_of_birth.substring(0,4):"",profile_picture:s.profile_picture||null,address:s.address||"",state:s.state||"",district:s.district||"",constituency:s.constituency||"",mandal:s.mandal||"",village:s.village||"",pincode:s.pincode||"",referral_code:s.referral_code||""},t.data.referral_relationships&&t.data.referral_relationships.referred_by&&t.data.referral_relationships.referred_by.length>0){const e=t.data.referral_relationships.referred_by[0];this.formData.referral_code=e.referral_code_used||"",this.hasReferralCode=!0}this.formData.state&&await this.fetchDistricts(this.formData.state),this.formData.district&&await this.fetchConstituencies(this.formData.district),this.formData.constituency&&await this.fetchMandals(this.formData.constituency)}}catch(e){console.error("Error loading profile:",e),403===e.response?.status?(this.error="Session expired. Please login again.",setTimeout(()=>{localStorage.removeItem("phone"),this.$router.push("/login")},2e3)):this.error=e.response?.data?.message||"Failed to load profile data. Please try again."}},async fetchStates(){this.isLoadingStates=!0;try{const e=await S.A.get(`${this.baseUrl}/api/states/`);this.states=e.data.map(e=>({value:e.id,label:e.name}))}catch(e){this.error="Failed to load states. Please try again."}finally{this.isLoadingStates=!1}},async fetchDistricts(e){if(this.isLoadingDistricts=!0,!e)return this.districts=[],this.formData.district="",void(this.isLoadingDistricts=!1);try{const t=await S.A.get(`${this.baseUrl}/api/frontend/districts/?state_id=${e}`);"success"===t.data.status?this.districts=t.data.data.map(e=>({value:e.id,label:e.name})):(this.districts=[],this.error="Failed to load districts. Please try again.")}catch(t){this.error="Failed to load districts. Please try again."}finally{this.isLoadingDistricts=!1}},async fetchConstituencies(e){if(this.isLoadingConstituencies=!0,!e)return this.constituencies=[],this.formData.constituency="",void(this.isLoadingConstituencies=!1);try{const t=await S.A.get(`${this.baseUrl}/api/frontend/constituencies/?district_id=${e}`);"success"===t.data.status?this.constituencies=t.data.data.map(e=>({value:e.id,label:e.name})):(this.constituencies=[],this.error="Failed to load constituencies. Please try again.")}catch(t){this.error="Failed to load constituencies. Please try again."}finally{this.isLoadingConstituencies=!1}},async fetchMandals(e){if(!e)return this.mandals=[],void(this.formData.mandal="");try{const t=await S.A.get(`${this.baseUrl}/api/mandals/?constituency=${e}`);this.mandals=t.data.map(e=>({value:e.id,label:e.name}))}catch(t){console.error("Error fetching mandals:",t),this.error="Failed to load mandals. Please try again."}},handleStateChange(){this.formData.district="",this.formData.constituency="",this.formData.mandal="",this.formData.village="",this.fetchDistricts(this.formData.state)},handleDistrictChange(){this.formData.constituency="",this.formData.mandal="",this.formData.village="",this.fetchConstituencies(this.formData.district)},handleConstituencyChange(){this.formData.mandal="",this.formData.village="",this.fetchMandals(this.formData.constituency)},handleMandalChange(){},handleVillageChange(){}},async created(){await this.loadUserProfile(),await this.fetchStates(),this.formData.state&&await this.fetchDistricts(this.formData.state),this.formData.district&&await this.fetchConstituencies(this.formData.district),this.formData.constituency&&await this.fetchMandals(this.formData.constituency),this.formData.mandal}};const mg=(0,se.A)(pg,[["render",hg],["__scopeId","data-v-69ed8aac"]]);var gg=mg;const fg={class:"min-h-screen bg-gradient-to-br from-[#1a1a1a] to-[#2d2d2d] pb-24 md:pb-8"},vg={class:"bg-[#1a1a1a]/50 p-4 pt-16 pb-8 md:p-8 text-center relative"},yg={class:"max-w-6xl mx-auto p-4 md:p-8"},bg={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},kg={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl p-6 border border-white/10"},wg={class:"flex items-center justify-between"},xg={class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 mt-1"},Lg={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl p-6 border border-white/10"},Cg={class:"flex items-center gap-3"},Sg={class:"text-xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"},_g={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl p-6 border border-white/10"},Pg={class:"flex items-center gap-3"},Eg=["src"],Ag={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden mb-safe"},Tg={class:"hidden md:block overflow-x-auto"},Ig={class:"w-full"},Mg={class:"divide-y divide-white/5"},Vg={class:"px-6 py-4"},Dg={class:"flex items-center gap-3"},Rg={class:"text-white font-medium"},jg={class:"px-6 py-4"},Xg={class:"text-white/90"},$g={class:"px-6 py-4 text-white/70"},Fg={class:"px-6 py-4"},Ug={class:"md:hidden"},Og={class:"flex items-start gap-4"},Ng={class:"relative"},Bg={class:"absolute -bottom-1 -right-1"},Wg={class:"flex-1"},Qg={class:"flex items-center justify-between"},qg={class:"text-white font-medium text-base"},zg={class:"text-white/50 text-sm mt-0.5"},Kg={class:"mt-4 pl-16"},Hg={class:"space-y-3"},Jg={class:"flex items-center justify-between"},Yg={class:"text-white font-medium"},Gg={class:"flex items-center justify-between"},Zg={class:"flex items-center justify-between"},ef={class:"text-white/80 text-sm"},tf={key:0,class:"p-12 text-center"},sf={key:0,class:"fixed bottom-24 md:bottom-4 right-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-fade-in-up"};function af(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",fg,[(0,i.Lk)("div",vg,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/referral")),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),t[4]||(t[4]=(0,i.Lk)("h1",{class:"text-3xl font-bold text-white mb-2"},"Referral Details",-1)),t[5]||(t[5]=(0,i.Lk)("p",{class:"text-white/60"},"View all your referral statistics and history",-1))]),(0,i.Lk)("div",yg,[(0,i.Lk)("div",bg,[(0,i.Lk)("div",kg,[(0,i.Lk)("div",wg,[(0,i.Lk)("div",null,[t[6]||(t[6]=(0,i.Lk)("p",{class:"text-white/60 text-sm"},"Total Referrals",-1)),(0,i.Lk)("h3",xg,(0,n.v_)(o.totalReferrals),1)]),t[7]||(t[7]=(0,i.Lk)("div",{class:"w-12 h-12 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-users text-2xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1))])]),(0,i.Lk)("div",Lg,[t[9]||(t[9]=(0,i.Lk)("p",{class:"text-white/60 text-sm mb-2"},"Your Referral Code",-1)),(0,i.Lk)("div",Cg,[(0,i.Lk)("span",Sg,(0,n.v_)(o.referralCode),1),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.copyToClipboard(o.referralCode)),class:"text-white/60 hover:text-white transition-colors"},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-copy"},null,-1)]))])]),(0,i.Lk)("div",_g,[t[11]||(t[11]=(0,i.Lk)("p",{class:"text-white/60 text-sm mb-2"},"QR Code",-1)),(0,i.Lk)("div",Pg,[o.qrCodeUrl?((0,i.uX)(),(0,i.CE)("img",{key:0,src:o.qrCodeUrl,alt:"Referral QR Code",class:"w-12 h-12 rounded-lg"},null,8,Eg)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.downloadQR&&r.downloadQR(...e)),class:"text-white/60 hover:text-white transition-colors"},t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-download"},null,-1)]))])])]),(0,i.Lk)("div",Ag,[t[21]||(t[21]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h2",{class:"text-xl font-semibold text-white"},"Referral History")],-1)),(0,i.Lk)("div",Tg,[(0,i.Lk)("table",Ig,[t[14]||(t[14]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",{class:"bg-[#1d1d1d]"},[(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Phone Number"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"First Name"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Joined Date"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Subscription"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Status")])],-1)),(0,i.Lk)("tbody",Mg,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.referredUsers,(e,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:s,class:"hover:bg-white/5 transition-colors"},[(0,i.Lk)("td",Vg,[(0,i.Lk)("div",Dg,[t[12]||(t[12]=(0,i.Lk)("div",{class:"w-8 h-8 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-user text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1)),(0,i.Lk)("span",Rg,(0,n.v_)(r.maskPhone(e.phone)),1)])]),(0,i.Lk)("td",jg,[(0,i.Lk)("span",Xg,(0,n.v_)(e.first_name||"-")+(0,n.v_)(e.last_name?" "+e.last_name:""),1)]),(0,i.Lk)("td",$g,(0,n.v_)(r.formatDate(e.joined_at)),1),(0,i.Lk)("td",Fg,[(0,i.Lk)("span",{class:(0,n.C4)([e.is_subscribed?"bg-green-500/10 text-green-500":"bg-yellow-500/10 text-yellow-500","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[(0,i.Lk)("i",{class:(0,n.C4)([e.is_subscribed?"fas fa-crown":"fas fa-user","mr-1"])},null,2),(0,i.eW)(" "+(0,n.v_)(e.is_subscribed?"Premium":"Free"),1)],2)]),t[13]||(t[13]=(0,i.Lk)("td",{class:"px-6 py-4"},[(0,i.Lk)("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500"},[(0,i.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,i.eW)(" Joined ")])],-1))]))),128))])])]),(0,i.Lk)("div",Ug,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.referredUsers,(e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"p-5 border-b border-white/5 hover:bg-white/5 transition-all duration-300 animate-fade-in"},[(0,i.Lk)("div",Og,[(0,i.Lk)("div",Ng,[t[15]||(t[15]=(0,i.Lk)("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center backdrop-blur-xl"},[(0,i.Lk)("i",{class:"fas fa-user text-lg text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1)),(0,i.Lk)("div",Bg,[(0,i.Lk)("span",{class:(0,n.C4)([e.is_subscribed?"bg-green-500 text-white":"bg-yellow-500 text-black","flex h-5 w-5 items-center justify-center rounded-full text-[10px]"])},[(0,i.Lk)("i",{class:(0,n.C4)(e.is_subscribed?"fas fa-crown":"fas fa-user")},null,2)],2)])]),(0,i.Lk)("div",Wg,[(0,i.Lk)("div",Qg,[(0,i.Lk)("div",null,[(0,i.Lk)("div",qg,(0,n.v_)(r.maskPhone(e.phone)),1),(0,i.Lk)("div",zg,(0,n.v_)(r.formatDate(e.joined_at)),1)]),t[16]||(t[16]=(0,i.Lk)("span",{class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500"},[(0,i.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,i.eW)(" Joined ")],-1))])])]),(0,i.Lk)("div",Kg,[(0,i.Lk)("div",Hg,[(0,i.Lk)("div",Jg,[t[17]||(t[17]=(0,i.Lk)("div",{class:"text-white/50 text-sm"},"Name",-1)),(0,i.Lk)("div",Yg,(0,n.v_)(e.first_name||"-")+(0,n.v_)(e.last_name?" "+e.last_name:""),1)]),(0,i.Lk)("div",Gg,[t[18]||(t[18]=(0,i.Lk)("div",{class:"text-white/50 text-sm"},"Subscription",-1)),(0,i.Lk)("div",null,[(0,i.Lk)("span",{class:(0,n.C4)([e.is_subscribed?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-yellow-500 to-orange-500","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium text-white shadow-lg"])},(0,n.v_)(e.is_subscribed?"Premium Member":"Free User"),3)])]),(0,i.Lk)("div",Zg,[t[19]||(t[19]=(0,i.Lk)("div",{class:"text-white/50 text-sm"},"Joined",-1)),(0,i.Lk)("div",ef,(0,n.v_)(r.formatTimeAgo(e.joined_at)),1)])])])]))),128))]),0===o.referredUsers.length?((0,i.uX)(),(0,i.CE)("div",tf,t[20]||(t[20]=[(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-users text-2xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1),(0,i.Lk)("h3",{class:"text-white font-medium mb-2"},"No Referrals Yet",-1),(0,i.Lk)("p",{class:"text-white/60 text-sm"},"Share your referral code to start earning rewards!",-1)]))):(0,i.Q3)("",!0)])]),o.showCopySuccess?((0,i.uX)(),(0,i.CE)("div",sf,t[22]||(t[22]=[(0,i.Lk)("i",{class:"fas fa-check-circle text-xl"},null,-1),(0,i.Lk)("span",{class:"font-medium"},"Copied to clipboard!",-1)]))):(0,i.Q3)("",!0)])}var of={name:"ReferralDetailsPage",data(){return{referralCode:"",qrCodeUrl:"",totalReferrals:0,referredUsers:[],showCopySuccess:!1,baseUrl:"https://ott.no1news.in"}},methods:{async fetchReferralData(){try{const e=localStorage.getItem("phone");if(!e)return void console.error("Phone number not found in localStorage");const t=await fetch(`${this.baseUrl}/users/referral-info/?phone=${e}`,{headers:{Accept:"application/json"}}),s=await t.json();"success"===s.status?(this.referralCode=s.referral_code,this.qrCodeUrl=s.qr_code_url,this.totalReferrals=s.total_referrals,this.referredUsers=s.referred_users.map(e=>({...e,first_name:e.first_name||"-",last_name:e.last_name||"",is_subscribed:e.is_subscribed||!1}))):console.error("Error fetching referral data:",s.message)}catch(e){console.error("Error fetching referral data:",e)}},maskPhone(e){return e?`${e.slice(0,4)}****${e.slice(-4)}`:""},formatDate(e){if(!e)return"";const t=new Date(e);return window.innerWidth<768?t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},async copyToClipboard(e){try{await navigator.clipboard.writeText(e),this.showCopySuccess=!0,setTimeout(()=>{this.showCopySuccess=!1},2e3)}catch(t){console.error("Failed to copy text:",t)}},downloadQR(){if(!this.qrCodeUrl)return;const e=document.createElement("a");e.href=this.qrCodeUrl,e.download=`referral_qr_${this.referralCode}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},formatTimeAgo(e){if(!e)return"";const t=new Date(e),s=new Date,a=Math.floor((s-t)/1e3);return a<60?"just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:this.formatDate(e)}},async created(){await this.fetchReferralData()}};const rf=(0,se.A)(of,[["render",af],["__scopeId","data-v-2098410e"]]);var lf=rf;const nf={class:"payment-container"},cf={key:0,class:"subscription-plans"},df={class:"plans"},uf=["onClick"],hf={class:"price"},pf={class:"duration"},mf={key:1,class:"payment-summary"},gf={key:2,class:"status-modal"};function ff(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",nf,[a.showPaymentForm?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",cf,[t[2]||(t[2]=(0,i.Lk)("h2",null,"Choose Your Plan",-1)),(0,i.Lk)("div",df,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.plans,e=>((0,i.uX)(),(0,i.CE)("div",{class:"plan",key:e.id,onClick:t=>a.selectPlan(e)},[(0,i.Lk)("h3",null,(0,n.v_)(e.name),1),(0,i.Lk)("p",hf,"₹"+(0,n.v_)(e.price),1),(0,i.Lk)("p",pf,(0,n.v_)(e.duration)+" days",1),t[1]||(t[1]=(0,i.Lk)("button",{class:"select-btn"},"Select",-1))],8,uf))),128))])])),a.selectedPlan?((0,i.uX)(),(0,i.CE)("div",mf,[t[3]||(t[3]=(0,i.Lk)("h3",null,"Payment Summary",-1)),(0,i.Lk)("p",null,"Plan: "+(0,n.v_)(a.selectedPlan.name),1),(0,i.Lk)("p",null,"Amount: ₹"+(0,n.v_)(a.selectedPlan.price),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.initiatePayment&&a.initiatePayment(...e)),class:"pay-btn"},"Pay Now")])):(0,i.Q3)("",!0),a.showStatusModal?((0,i.uX)(),(0,i.CE)("div",gf,t[4]||(t[4]=[(0,i.Lk)("div",{class:"modal-content"},[(0,i.Lk)("h3",null,"Checking Payment Status..."),(0,i.Lk)("p",null,"Please wait while we verify your payment."),(0,i.Lk)("div",{class:"loader"})],-1)]))):(0,i.Q3)("",!0)])}var vf={name:"PaymentPage",setup(){const e=(0,_.Pj)(),t=(0,T.rd)(),s=(0,T.lq)(),a=(0,ee.KR)([{id:1,name:"Basic Plan",price:199,duration:30},{id:2,name:"Standard Plan",price:499,duration:90},{id:3,name:"Premium Plan",price:999,duration:365}]),o=(0,ee.KR)(null),r=(0,ee.KR)(!1),l=(0,ee.KR)(!1),n=(0,ee.KR)(null),c=(0,i.EW)(()=>e.state.user),d=(0,i.EW)(()=>e.state.isAuthenticated);(0,i.sV)(()=>{if(console.log("Payment Component Mounted"),!d.value||!c.value)return void t.push({path:"/login",query:{redirect:s.fullPath}});u();const e=s.query.plan;if(e){const t=a.value.find(t=>t.name.toLowerCase().replace(" ","_")===e);t&&h(t)}});const u=()=>{const e=localStorage.getItem("pending_payment");if(e){const t=JSON.parse(e),s=(new Date).getTime()-t.timestamp;s<6e5?(l.value=!0,m(t.order_id)):localStorage.removeItem("pending_payment")}},h=e=>{console.log("Selected Plan:",e),o.value=e,r.value=!0},p=async()=>{try{console.log("Initiating payment for plan:",o.value);const e=await S.A.post("/api/payment/create-order/",{amount:o.value.price,plan_id:o.value.id,phone:c.value?.phone});console.log("Order created:",e.data),localStorage.setItem("pending_payment",JSON.stringify({order_id:e.data.order_id,plan_id:o.value.id,amount:o.value.price,timestamp:(new Date).getTime()}));const t={key:e.data.key_id,amount:e.data.amount,currency:e.data.currency,name:"Your OTT Platform",description:`${o.value.name} Subscription`,order_id:e.data.order_id,handler:g,prefill:{name:c.value?.name||"",email:c.value?.email||"",contact:c.value?.phone||""},theme:{color:"#3399cc"},modal:{ondismiss:function(){m(e.data.order_id)}},config:{display:{blocks:{upi:{preferred:!0,name:"UPI",instruments:[{targetApp:"phonepe"},{targetApp:"googlePay"},{targetApp:"paytm"},{targetApp:"upi"}]}}}}},s=new window.Razorpay(t);s.open()}catch(e){console.error("Payment initiation failed:",e),alert("Unable to initiate payment. Please try again.")}},m=async e=>{l.value=!0;let s=0;const a=10,i=async()=>{try{const i=await S.A.get(`/api/payment/check-status/${e}/`);if("completed"===i.data.status)return l.value=!1,clearInterval(n.value),localStorage.removeItem("pending_payment"),alert("Payment successful! Your subscription is now active."),void t.push("/profile");s++,s>=a&&(l.value=!1,clearInterval(n.value),alert("Payment status could not be verified. Please contact support."))}catch(i){console.error("Status check failed:",i)}};await i(),n.value=setInterval(i,3e4)},g=async e=>{try{console.log("Payment successful, verifying:",e);const s=await S.A.post("/api/payment/verify-payment/",{razorpay_payment_id:e.razorpay_payment_id,razorpay_order_id:e.razorpay_order_id,razorpay_signature:e.razorpay_signature,phone:c.value?.phone,plan_id:o.value.id});"success"===s.data.status&&(localStorage.removeItem("pending_payment"),alert("Payment successful! Your subscription is now active."),t.push("/profile"))}catch(s){console.error("Payment verification failed:",s),alert("Payment verification failed. Please contact support.")}};return(0,i.hi)(()=>{n.value&&clearInterval(n.value)}),{plans:a,selectedPlan:o,showPaymentForm:r,showStatusModal:l,selectPlan:h,initiatePayment:p}}};const yf=(0,se.A)(vf,[["render",ff],["__scopeId","data-v-72d34190"]]);var bf=yf;const kf={class:"min-h-screen bg-[#121212] text-white relative pb-24 md:pb-8"},wf={class:"max-w-6xl mx-auto px-4"},xf={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},Lf={class:"md:col-span-8 space-y-6"},Cf={class:"bg-gradient-to-br from-[#2a2a2a] to-[#1d1d1d] rounded-2xl p-6 border border-white/10 backdrop-blur-xl"},Sf={class:"flex items-baseline gap-2 mb-6"},_f={class:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"},Pf=["disabled"],Ef={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl border border-white/10"},Af={class:"divide-y divide-white/5"},Tf={key:0,class:"max-h-[400px] overflow-y-auto"},If={class:"flex items-center gap-4"},Mf={class:"flex-1"},Vf={class:"flex items-start justify-between"},Df={class:"font-medium text-white"},Rf={class:"text-sm text-white/50"},jf={class:"text-right"},Xf={key:1,class:"p-12 text-center"},$f={class:"md:col-span-4 space-y-6"},Ff={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl border border-white/10"},Uf={class:"p-4"},Of={key:0,class:"space-y-4"},Nf={class:"flex items-center justify-between"},Bf={class:"flex items-center gap-3"},Wf={class:"font-semibold"},Qf={class:"font-medium text-white"},qf={class:"text-sm text-white/50"},zf={key:1,class:"text-center py-8"},Kf={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl border border-white/10"},Hf={class:"p-6 border-b border-white/10 flex items-center justify-between"},Jf={class:"p-4"},Yf={key:0,class:"space-y-4"},Gf=["onClick"],Zf={class:"flex items-start gap-3"},ev={class:"flex-1"},tv={class:"font-medium text-white"},sv={class:"text-sm text-white/50"},av={class:"text-sm text-white/50"},iv=["onClick"],ov={key:1,class:"text-xs px-2 py-1 rounded-full bg-[#c30059]/10 text-[#ff4d4d]"},rv={key:1,class:"text-center py-8"},lv={key:0,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},nv={class:"bg-[#2a2a2a] rounded-2xl w-full max-w-lg border border-white/10 animate-modal-in"},cv={class:"space-y-4"},dv={class:"flex justify-end gap-4 mt-6"},uv={key:1,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},hv={class:"bg-[#2a2a2a] rounded-2xl w-full max-w-lg border border-white/10 animate-modal-in"},pv={class:"space-y-4"},mv=["value"],gv={class:"block text-sm font-medium text-white/70 mb-2"},fv={class:"flex flex-wrap gap-2 mt-1"},vv={class:"text-xs px-2 py-1 rounded-full bg-blue-500/10 text-blue-400"},yv={class:"text-xs px-2 py-1 rounded-full bg-green-500/10 text-green-400"},bv={class:"text-xs px-2 py-1 rounded-full bg-purple-500/10 text-purple-400"},kv={key:0,class:"text-xs px-2 py-1 rounded-full bg-orange-500/10 text-orange-400"},wv=["min","max","placeholder"],xv={key:0,class:"bg-red-500/10 text-red-500 p-3 rounded-xl text-sm"},Lv={class:"flex justify-end gap-4 mt-6"},Cv={key:2,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},Sv={class:"bg-[#2a2a2a] rounded-2xl w-full max-w-lg border border-white/10 animate-modal-in"},_v={class:"p-6 border-b border-white/10"},Pv={class:"flex items-center justify-between"},Ev={class:"p-6"},Av={class:"flex gap-2 mb-6"},Tv={key:0,class:"px-3 py-1.5 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white text-sm font-medium flex items-center gap-2"},Iv={key:1,class:"px-3 py-1.5 rounded-full bg-green-500/10 text-green-500 text-sm font-medium flex items-center gap-2"},Mv={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Vv={class:"space-y-2"},Dv={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Rv={class:"flex items-center gap-3"},jv={class:"text-white font-medium"},Xv={class:"space-y-2"},$v={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Fv={class:"flex items-center gap-3"},Uv={class:"text-white font-medium"},Ov={class:"space-y-2"},Nv={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Bv={class:"flex items-center gap-3"},Wv={class:"text-white font-medium tracking-wider"},Qv={class:"space-y-2"},qv={class:"bg-white/5 rounded-xl p-4 border border-white/10"},zv={class:"flex items-center gap-3"},Kv={class:"text-white font-medium tracking-wider"},Hv={class:"mt-6 pt-6 border-t border-white/10"},Jv={class:"text-sm text-white/50 flex items-center gap-2"},Yv={class:"mt-6 flex justify-end gap-3"};function Gv(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",kf,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[17]||(t[17]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),t[58]||(t[58]=(0,i.Lk)("div",{class:"pt-20 px-6 text-center mb-8"},[(0,i.Lk)("h1",{class:"text-3xl font-bold bg-gradient-to-r from-[#c30059] to-[#ff4d4d] bg-clip-text text-transparent"}," My Wallet "),(0,i.Lk)("p",{class:"text-white/60 mt-2"},"Manage your earnings and withdrawals")],-1)),(0,i.Lk)("div",wf,[(0,i.Lk)("div",xf,[(0,i.Lk)("div",Lf,[(0,i.Lk)("div",Cf,[t[20]||(t[20]=(0,i.Lk)("div",{class:"flex items-center justify-between mb-6"},[(0,i.Lk)("h2",{class:"text-xl font-semibold text-white/90"},"Wallet Balance"),(0,i.Lk)("div",{class:"w-10 h-10 rounded-full bg-gradient-to-r from-[#c30059]/10 to-[#ff4d4d]/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-wallet text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"})])],-1)),(0,i.Lk)("div",Sf,[(0,i.Lk)("span",_f," ₹"+(0,n.v_)(o.walletBalance),1),t[18]||(t[18]=(0,i.Lk)("span",{class:"text-white/50"},"available balance",-1))]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.showWithdrawModal&&o.showWithdrawModal(...e)),disabled:!o.walletBalance,class:"w-full py-3 px-6 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl text-white font-medium hover:opacity-90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-money-bill-wave"},null,-1),(0,i.eW)(" Withdraw Money ")]),8,Pf)]),(0,i.Lk)("div",Ef,[t[22]||(t[22]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white/90"},"Recent Transactions")],-1)),(0,i.Lk)("div",Af,[o.transactions.length?((0,i.uX)(),(0,i.CE)("div",Tf,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.transactions,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"p-4 hover:bg-white/5 transition-colors"},[(0,i.Lk)("div",If,[(0,i.Lk)("div",{class:(0,n.C4)(["w-12 h-12 rounded-xl flex items-center justify-center",o.getTransactionTypeClass(e.transaction_type)])},[(0,i.Lk)("i",{class:(0,n.C4)([o.getTransactionIcon(e.transaction_type),"text-xl"])},null,2)],2),(0,i.Lk)("div",Mf,[(0,i.Lk)("div",Vf,[(0,i.Lk)("div",null,[(0,i.Lk)("p",Df,(0,n.v_)(o.formatTransactionType(e.transaction_type)),1),(0,i.Lk)("p",Rf,(0,n.v_)(o.formatDate(e.created_at)),1)]),(0,i.Lk)("div",jf,[(0,i.Lk)("p",{class:(0,n.C4)(["font-medium",o.getAmountClass(e.transaction_type)])},(0,n.v_)(o.getAmountPrefix(e.transaction_type))+"₹"+(0,n.v_)(e.amount),3),(0,i.Lk)("span",{class:(0,n.C4)(["text-xs px-2 py-1 rounded-full",{"bg-green-500/10 text-green-500":"COMPLETED"===e.status,"bg-yellow-500/10 text-yellow-500":"PENDING"===e.status,"bg-red-500/10 text-red-500":"FAILED"===e.status}])},(0,n.v_)(e.status),3)])])])])]))),128))])):((0,i.uX)(),(0,i.CE)("div",Xf,t[21]||(t[21]=[(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-receipt text-2xl text-white/30"})],-1),(0,i.Lk)("p",{class:"text-white/60"},"No transactions yet",-1)])))])])]),(0,i.Lk)("div",$f,[(0,i.Lk)("div",Ff,[t[24]||(t[24]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white/90 flex items-center gap-2"},[(0,i.Lk)("i",{class:"fas fa-gift text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"}),(0,i.eW)(" Referral Bonus ")])],-1)),(0,i.Lk)("div",Uf,[o.bonusLevels.length?((0,i.uX)(),(0,i.CE)("div",Of,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.bonusLevels,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"bg-white/5 rounded-xl p-4"},[(0,i.Lk)("div",Nf,[(0,i.Lk)("div",Bf,[(0,i.Lk)("div",{class:(0,n.C4)(["w-10 h-10 rounded-full flex items-center justify-center",{"bg-blue-500/10 text-blue-500":1===e.level,"bg-green-500/10 text-green-500":2===e.level,"bg-purple-500/10 text-purple-500":3===e.level,"bg-orange-500/10 text-orange-500":4===e.level,"bg-pink-500/10 text-pink-500":5===e.level}])},[(0,i.Lk)("span",Wf,"L"+(0,n.v_)(e.level),1)],2),(0,i.Lk)("div",null,[(0,i.Lk)("p",Qf,"Level "+(0,n.v_)(e.level),1),(0,i.Lk)("p",qf,(0,n.v_)(e.description),1)])]),(0,i.Lk)("div",null,[(0,i.Lk)("span",{class:(0,n.C4)(["text-lg font-bold",{"text-blue-500":1===e.level,"text-green-500":2===e.level,"text-purple-500":3===e.level,"text-orange-500":4===e.level,"text-pink-500":5===e.level}])},(0,n.v_)(e.amount)+"% ",3)])])]))),128))])):((0,i.uX)(),(0,i.CE)("div",zf,t[23]||(t[23]=[(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-gift text-2xl text-white/30"})],-1),(0,i.Lk)("p",{class:"text-white/60"},"No bonus levels configured",-1)])))])]),(0,i.Lk)("div",Kf,[(0,i.Lk)("div",Hf,[t[26]||(t[26]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-white/90"},"Bank Accounts",-1)),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.showAddBankModal&&o.showAddBankModal(...e)),class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center hover:opacity-90 transition-opacity"},t[25]||(t[25]=[(0,i.Lk)("i",{class:"fas fa-plus text-white"},null,-1)]))]),(0,i.Lk)("div",Jf,[o.bankAccounts.length?((0,i.uX)(),(0,i.CE)("div",Yf,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.bankAccounts,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors cursor-pointer",onClick:t=>o.showBankDetails(e)},[(0,i.Lk)("div",Zf,[t[27]||(t[27]=(0,i.Lk)("div",{class:"w-10 h-10 rounded-full bg-gradient-to-r from-[#c30059]/10 to-[#ff4d4d]/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-university text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"})],-1)),(0,i.Lk)("div",ev,[(0,i.Lk)("p",tv,(0,n.v_)(e.bank_name),1),(0,i.Lk)("p",sv,(0,n.v_)(e.account_number),1),(0,i.Lk)("p",av,(0,n.v_)(e.account_holder_name),1)]),(0,i.Lk)("div",null,[e.is_primary?((0,i.uX)(),(0,i.CE)("span",ov," Primary ")):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:(0,a.D$)(t=>o.setPrimaryAccount(e.id),["stop"]),class:"text-sm text-[#c30059] hover:text-[#ff4d4d] transition-colors"}," Set Primary ",8,iv))])])],8,Gf))),128))])):((0,i.uX)(),(0,i.CE)("div",rv,[t[28]||(t[28]=(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-university text-2xl text-white/30"})],-1)),t[29]||(t[29]=(0,i.Lk)("p",{class:"text-white/60 mb-4"},"No bank accounts added",-1)),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.showAddBankModal&&o.showAddBankModal(...e)),class:"text-sm text-[#c30059] hover:text-[#ff4d4d] transition-colors"}," + Add Your First Bank Account ")]))])])])])]),o.showBankModal?((0,i.uX)(),(0,i.CE)("div",lv,[(0,i.Lk)("div",nv,[t[35]||(t[35]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white"},"Add Bank Account")],-1)),(0,i.Lk)("form",{onSubmit:t[9]||(t[9]=(0,a.D$)((...e)=>o.addBankAccount&&o.addBankAccount(...e),["prevent"])),class:"p-6"},[(0,i.Lk)("div",cv,[(0,i.Lk)("div",null,[t[30]||(t[30]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Account Holder Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newBank.account_holder_name=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter account holder name"},null,512),[[a.Jo,o.newBank.account_holder_name]])]),(0,i.Lk)("div",null,[t[31]||(t[31]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Account Number",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newBank.account_number=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter account number"},null,512),[[a.Jo,o.newBank.account_number]])]),(0,i.Lk)("div",null,[t[32]||(t[32]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"IFSC Code",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newBank.ifsc_code=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter IFSC code"},null,512),[[a.Jo,o.newBank.ifsc_code]])]),(0,i.Lk)("div",null,[t[33]||(t[33]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Bank Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newBank.bank_name=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter bank name"},null,512),[[a.Jo,o.newBank.bank_name]])])]),(0,i.Lk)("div",dv,[(0,i.Lk)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>o.closeBankModal&&o.closeBankModal(...e)),class:"px-6 py-3 rounded-xl bg-white/5 text-white hover:bg-white/10 transition-colors"}," Cancel "),t[34]||(t[34]=(0,i.Lk)("button",{type:"submit",class:"px-6 py-3 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl text-white hover:opacity-90 transition-opacity"}," Add Bank Account ",-1))])],32)])])):(0,i.Q3)("",!0),o.showWithdrawalModal?((0,i.uX)(),(0,i.CE)("div",uv,[(0,i.Lk)("div",hv,[t[43]||(t[43]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white"},"Withdraw Money")],-1)),(0,i.Lk)("form",{onSubmit:t[13]||(t[13]=(0,a.D$)((...e)=>o.withdrawMoney&&o.withdrawMoney(...e),["prevent"])),class:"p-6"},[(0,i.Lk)("div",pv,[(0,i.Lk)("div",null,[t[36]||(t[36]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Select Bank Account",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.withdrawal.bank_account=e),required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-[#c30059] transition-colors"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.bankAccounts,e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id,class:"bg-[#2a2a2a]"},(0,n.v_)(e.bank_name)+" - "+(0,n.v_)(e.account_number),9,mv))),128))],512),[[a.u1,o.withdrawal.bank_account]])]),(0,i.Lk)("div",null,[(0,i.Lk)("label",gv,[t[41]||(t[41]=(0,i.eW)(" Amount (₹) ")),(0,i.Lk)("div",fv,[(0,i.Lk)("span",vv,[t[37]||(t[37]=(0,i.Lk)("i",{class:"fas fa-arrow-down text-xs mr-1"},null,-1)),(0,i.eW)("Min: ₹"+(0,n.v_)(o.withdrawalLimits.min_amount),1)]),(0,i.Lk)("span",yv,[t[38]||(t[38]=(0,i.Lk)("i",{class:"fas fa-arrow-up text-xs mr-1"},null,-1)),(0,i.eW)("Max: ₹"+(0,n.v_)(o.withdrawalLimits.max_amount),1)]),(0,i.Lk)("span",bv,[t[39]||(t[39]=(0,i.Lk)("i",{class:"fas fa-clock text-xs mr-1"},null,-1)),(0,i.eW)("Daily Limit: "+(0,n.v_)(o.withdrawalLimits.daily_limit)+" withdrawals ",1)]),void 0!==o.withdrawalLimits.remaining_today?((0,i.uX)(),(0,i.CE)("span",kv,[t[40]||(t[40]=(0,i.Lk)("i",{class:"fas fa-refresh text-xs mr-1"},null,-1)),(0,i.eW)("Remaining Today: "+(0,n.v_)(o.withdrawalLimits.remaining_today),1)])):(0,i.Q3)("",!0)])]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.withdrawal.amount=e),type:"number",required:"",min:o.withdrawalLimits.min_amount,max:o.withdrawalLimits.max_amount,class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter amount between ₹"+o.withdrawalLimits.min_amount+" and ₹"+o.withdrawalLimits.max_amount},null,8,wv),[[a.Jo,o.withdrawal.amount]])]),o.withdrawalError?((0,i.uX)(),(0,i.CE)("div",xv,(0,n.v_)(o.withdrawalError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Lv,[(0,i.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>o.closeWithdrawModal&&o.closeWithdrawModal(...e)),class:"px-6 py-3 rounded-xl bg-white/5 text-white hover:bg-white/10 transition-colors"}," Cancel "),t[42]||(t[42]=(0,i.Lk)("button",{type:"submit",class:"px-6 py-3 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl text-white hover:opacity-90 transition-opacity"}," Withdraw ",-1))])],32)])])):(0,i.Q3)("",!0),o.showBankDetailsModal?((0,i.uX)(),(0,i.CE)("div",Cv,[(0,i.Lk)("div",Sv,[(0,i.Lk)("div",_v,[(0,i.Lk)("div",Pv,[t[45]||(t[45]=(0,i.Fv)('<div class="flex items-center gap-3" data-v-ada145ca><div class="w-12 h-12 rounded-xl bg-gradient-to-r from-[#c30059]/10 to-[#ff4d4d]/10 flex items-center justify-center" data-v-ada145ca><i class="fas fa-university text-2xl text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]" data-v-ada145ca></i></div><div data-v-ada145ca><h3 class="text-xl font-semibold text-white" data-v-ada145ca>Bank Account Details</h3><p class="text-sm text-white/50" data-v-ada145ca>View your bank account information</p></div></div>',1)),(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>o.closeBankDetailsModal&&o.closeBankDetailsModal(...e)),class:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors"},t[44]||(t[44]=[(0,i.Lk)("i",{class:"fas fa-times text-white/70"},null,-1)]))])]),(0,i.Lk)("div",Ev,[(0,i.Lk)("div",Av,[o.selectedBank.is_primary?((0,i.uX)(),(0,i.CE)("span",Tv,t[46]||(t[46]=[(0,i.Lk)("i",{class:"fas fa-star text-xs"},null,-1),(0,i.eW)(" Primary Account ")]))):(0,i.Q3)("",!0),o.selectedBank.is_verified?((0,i.uX)(),(0,i.CE)("span",Iv,t[47]||(t[47]=[(0,i.Lk)("i",{class:"fas fa-check-circle text-xs"},null,-1),(0,i.eW)(" Verified ")]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Mv,[(0,i.Lk)("div",Vv,[t[49]||(t[49]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"Bank Name",-1)),(0,i.Lk)("div",Dv,[(0,i.Lk)("div",Rv,[t[48]||(t[48]=(0,i.Lk)("i",{class:"fas fa-university text-[#c30059]"},null,-1)),(0,i.Lk)("p",jv,(0,n.v_)(o.selectedBank.bank_name),1)])])]),(0,i.Lk)("div",Xv,[t[51]||(t[51]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"Account Holder",-1)),(0,i.Lk)("div",$v,[(0,i.Lk)("div",Fv,[t[50]||(t[50]=(0,i.Lk)("i",{class:"fas fa-user text-[#c30059]"},null,-1)),(0,i.Lk)("p",Uv,(0,n.v_)(o.selectedBank.account_holder_name),1)])])]),(0,i.Lk)("div",Ov,[t[53]||(t[53]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"Account Number",-1)),(0,i.Lk)("div",Nv,[(0,i.Lk)("div",Bv,[t[52]||(t[52]=(0,i.Lk)("i",{class:"fas fa-credit-card text-[#c30059]"},null,-1)),(0,i.Lk)("p",Wv,(0,n.v_)(o.selectedBank.account_number),1)])])]),(0,i.Lk)("div",Qv,[t[55]||(t[55]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"IFSC Code",-1)),(0,i.Lk)("div",qv,[(0,i.Lk)("div",zv,[t[54]||(t[54]=(0,i.Lk)("i",{class:"fas fa-code text-[#c30059]"},null,-1)),(0,i.Lk)("p",Kv,(0,n.v_)(o.selectedBank.ifsc_code),1)])])])]),(0,i.Lk)("div",Hv,[(0,i.Lk)("p",Jv,[t[56]||(t[56]=(0,i.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),(0,i.eW)(" Added on "+(0,n.v_)(o.formatDate(o.selectedBank.created_at)),1)])]),(0,i.Lk)("div",Yv,[o.selectedBank.is_primary?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[15]||(t[15]=e=>o.setPrimaryAccount(o.selectedBank.id)),class:"px-4 py-2 rounded-xl bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white text-sm font-medium hover:opacity-90 transition-opacity flex items-center gap-2"},t[57]||(t[57]=[(0,i.Lk)("i",{class:"fas fa-star"},null,-1),(0,i.eW)(" Set as Primary ")]))),(0,i.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>o.closeBankDetailsModal&&o.closeBankDetailsModal(...e)),class:"px-4 py-2 rounded-xl bg-white/5 text-white text-sm font-medium hover:bg-white/10 transition-colors"}," Close ")])])])])):(0,i.Q3)("",!0)])}var Zv={name:"WalletDashboard",setup(){const e=(0,ee.KR)(0),t=(0,ee.KR)([]),s=(0,ee.KR)([]),a=(0,ee.KR)(!1),o=(0,ee.KR)(!1),r=(0,ee.KR)({account_holder_name:"",account_number:"",ifsc_code:"",bank_name:""}),l=(0,ee.KR)(""),n=(0,ee.KR)({bank_account:"",amount:""}),c=(0,ee.KR)(!1),d=(0,ee.KR)({}),u=(0,ee.KR)([]),h=(0,ee.KR)({min_amount:0,max_amount:0,daily_limit:0,remaining_today:0}),p=async()=>{try{const t=await S.A.get("/users/wallet/",{params:{phone:localStorage.getItem("phone")}});console.log("Wallet response:",t.data),e.value=t.data.balance,s.value=t.data.recent_transactions||[]}catch(t){console.error("Error fetching wallet data:",t),e.value=0,s.value=[]}},m=async()=>{try{const e=await S.A.get("/users/bank-accounts/",{params:{phone:localStorage.getItem("phone")}});t.value=e.data}catch(e){console.error("Error fetching bank accounts:",e)}},g=async()=>{try{const e=await S.A.get("/users/referral-bonus-levels/",{params:{phone:localStorage.getItem("phone")}});u.value=e.data}catch(e){console.error("Error fetching bonus levels:",e)}},f=async()=>{try{const e=await S.A.get("/users/withdrawal-limits/",{params:{phone:localStorage.getItem("phone")}});h.value=e.data}catch(e){console.error("Error fetching withdrawal limits:",e),h.value={min_amount:100,max_amount:1e4,daily_limit:3,remaining_today:3}}},v=async()=>{try{const e={...r.value,phone:localStorage.getItem("phone")};await S.A.post("/users/bank-accounts/",e),await m(),L()}catch(e){console.error("Error adding bank account:",e)}},y=async e=>{try{await S.A.post(`/users/bank-accounts/${e}/set-primary/`,{phone:localStorage.getItem("phone")}),await m()}catch(t){console.error("Error setting primary account:",t)}},b=async()=>{await f(),o.value=!0},k=()=>{const e=Number(n.value.amount);return e<h.value.min_amount?(l.value=`Minimum withdrawal amount is ₹${h.value.min_amount}`,!1):e>h.value.max_amount?(l.value=`Maximum withdrawal amount is ₹${h.value.max_amount}`,!1):!(h.value.remaining_today<=0)||(l.value="Daily withdrawal limit reached",!1)},w=async()=>{try{if(l.value="",!k())return;const e={...n.value,phone:localStorage.getItem("phone")};await S.A.post("/users/request-withdrawal/",e),await p(),await f(),C()}catch(e){console.error("Error requesting withdrawal:",e),l.value=e.response?.data?.error||"Failed to process withdrawal"}},x=()=>{a.value=!0},L=()=>{a.value=!1,r.value={account_holder_name:"",account_number:"",ifsc_code:"",bank_name:""}},C=()=>{o.value=!1,n.value={bank_account:"",amount:""}},_=e=>{d.value=e,c.value=!0},P=()=>{c.value=!1,d.value={}},E=e=>new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),A=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),T=e=>{const t={REFERRAL_BONUS:"bonus",WITHDRAWAL:"withdrawal",REFUND:"refund"};return t[e]||""},I=e=>{const t={REFERRAL_BONUS:"fas fa-gift",WITHDRAWAL:"fas fa-money-bill-wave",REFUND:"fas fa-undo"};return t[e]||"fas fa-exchange-alt"},M=e=>"WITHDRAWAL"===e?"amount-negative":"amount-positive",V=e=>"WITHDRAWAL"===e?"-":"+",D=()=>{window.history.back()};let R;return(0,i.sV)(()=>{p(),m(),g(),R=setInterval(()=>{p()},3e4)}),(0,i.hi)(()=>{R&&clearInterval(R)}),{walletBalance:e,bankAccounts:t,transactions:s,showBankModal:a,showWithdrawalModal:o,newBank:r,withdrawalError:l,withdrawal:n,addBankAccount:v,setPrimaryAccount:y,withdrawMoney:w,showAddBankModal:x,closeBankModal:L,showWithdrawModal:b,closeWithdrawModal:C,formatDate:E,formatTransactionType:A,getTransactionTypeClass:T,getTransactionIcon:I,getAmountClass:M,getAmountPrefix:V,goBack:D,showBankDetailsModal:c,selectedBank:d,showBankDetails:_,closeBankDetailsModal:P,bonusLevels:u,withdrawalLimits:h,validateWithdrawalAmount:k}}};const ey=(0,se.A)(Zv,[["render",Gv],["__scopeId","data-v-ada145ca"]]);var ty=ey;const sy={class:"min-h-screen bg-[#121212] text-white py-6"},ay={class:"w-full px-2 md:px-4"},iy={class:"flex items-center mb-8 relative px-2 md:px-6"},oy={class:"w-full text-center"},ry={class:"text-3xl font-bold relative inline-block px-4"},ly={key:0,class:"flex justify-center items-center py-8"},ny={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0"},cy={key:0,class:"col-span-full flex flex-col items-center justify-center py-16"},dy=["onClick"],uy={class:"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2"},hy=["src","alt"],py={class:"absolute top-1 left-1 flex gap-1"},my={key:0,class:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded"},gy={key:1,class:"bg-purple-600 text-white text-[10px] px-1.5 py-0.5 rounded"},fy={key:2,class:"bg-yellow-600 text-white text-[10px] px-1.5 py-0.5 rounded"},vy={class:"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white"},yy={class:"px-1"},by={class:"text-sm font-medium mb-0.5 line-clamp-2"},ky={key:2,class:"mt-6 text-center"};function wy(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",sy,[(0,i.Lk)("div",ay,[(0,i.Lk)("div",iy,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10"},t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-2xl"},null,-1)])),(0,i.Lk)("div",oy,[(0,i.Lk)("h1",ry,[(0,i.eW)((0,n.v_)(a.category?.name||"Loading...")+" ",1),t[3]||(t[3]=(0,i.Lk)("div",{class:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-red-500 to-red-800"},null,-1))])])]),a.category?((0,i.uX)(),(0,i.CE)("div",ny,[0===a.categoryVideos.length?((0,i.uX)(),(0,i.CE)("div",cy,t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-film text-6xl text-gray-600 mb-4"},null,-1),(0,i.Lk)("h2",{class:"text-2xl font-bold text-gray-400 mb-2"},"Coming Soon",-1),(0,i.Lk)("p",{class:"text-gray-500 text-center"},"Videos for this category will be available soon.",-1)]))):((0,i.uX)(!0),(0,i.CE)(i.FK,{key:1},(0,i.pI)(a.categoryVideos,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"cursor-pointer group transform hover:scale-105 transition-transform duration-200",onClick:t=>a.playVideo(e)},[(0,i.Lk)("div",uy,[(0,i.Lk)("img",{src:e.thumbnail_url,alt:e.title,class:"w-full h-full object-cover"},null,8,hy),(0,i.Lk)("div",py,[a.isNewVideo(e.created_at)?((0,i.uX)(),(0,i.CE)("span",my," NEW ")):(0,i.Q3)("",!0),e.is_premium?((0,i.uX)(),(0,i.CE)("span",gy," PREMIUM ")):(0,i.Q3)("",!0),"rental"===e.video_type?((0,i.uX)(),(0,i.CE)("span",fy," RENTAL ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",vy,(0,n.v_)(a.formatDuration(e.duration)),1),t[6]||(t[6]=(0,i.Lk)("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50"},[(0,i.Lk)("div",{class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"},[(0,i.Lk)("i",{class:"fas fa-play text-sm text-white"})])],-1))]),(0,i.Lk)("div",yy,[(0,i.Lk)("h3",by,(0,n.v_)(e.title),1)])],8,dy))),128))])):((0,i.uX)(),(0,i.CE)("div",ly,t[4]||(t[4]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white"},null,-1)]))),a.hasMoreVideos?((0,i.uX)(),(0,i.CE)("div",ky,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.loadMoreVideos&&a.loadMoreVideos(...e)),class:"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm"}," Load More ")])):(0,i.Q3)("",!0)])])}var xy={name:"CategoryVideos",setup(){const e=(0,T.lq)(),t=(0,T.rd)(),s=(0,ee.KR)(null),a=(0,ee.KR)([]),o=(0,ee.KR)(1),r=(0,ee.KR)(!0),l=20,n=async(t=1)=>{try{const i=await S.A.get(`https://ott.no1news.in/api/videos/category/${e.params.id}/?page=${t}&page_size=${l}`);if("success"===i.data.status){i.data.category&&(s.value={...i.data.category,name:u(i.data.category.name)});const e=i.data.data.map(e=>({...e,title:u(e.title),description:u(e.description)}));a.value=1===t?e:[...a.value,...e],r.value=i.data.pagination.has_next,o.value=t}}catch(i){console.error("Error fetching videos:",i)}},c=()=>{r.value&&n(o.value+1)},d=e=>{t.push({name:"MovieDetails",params:{id:e.id,videoUrl:e.video_url,videoType:"hls"}})},u=e=>e?e.split(/[\s-]+/).map(e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "):"",h=e=>{const t=new Date(e),s=new Date,a=Math.ceil((s-t)/864e5);return a<=7},p=e=>{const t=Math.floor(e/60),s=e%60;return`${t}:${s.toString().padStart(2,"0")}`},m=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return(0,i.sV)(()=>{n()}),{category:s,categoryVideos:a,hasMoreVideos:r,loadMoreVideos:c,playVideo:d,isNewVideo:h,formatDuration:p,formatViews:m}}};const Ly=(0,se.A)(xy,[["render",wy],["__scopeId","data-v-272a13ee"]]);var Cy=Ly;const Sy={class:"watchlist-container"},_y={key:0,class:"loading-state"},Py={key:1,class:"error-state"},Ey={key:2,class:"empty-state"},Ay={key:3,class:"watchlist-grid"},Ty={class:"video-card"},Iy=["onClick"],My=["src","alt"],Vy={class:"video-info"},Dy={class:"video-title"},Ry={class:"video-meta"},jy={class:"action-buttons"},Xy=["onClick"],$y=["onClick"];function Fy(e,t,s,a,o,r){const l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Sy,[t[9]||(t[9]=(0,i.Lk)("h1",{class:"watchlist-title"},"My Watchlist",-1)),o.loading?((0,i.uX)(),(0,i.CE)("div",_y,t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,i.eW)(" Loading your watchlist... ")]))):o.error?((0,i.uX)(),(0,i.CE)("div",Py,[t[1]||(t[1]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,i.eW)(" "+(0,n.v_)(o.error),1)])):0===o.watchlistItems.length?((0,i.uX)(),(0,i.CE)("div",Ey,[t[3]||(t[3]=(0,i.Lk)("i",{class:"fas fa-bookmark"},null,-1)),t[4]||(t[4]=(0,i.Lk)("p",null,"Your watchlist is empty",-1)),(0,i.bF)(l,{to:"/",class:"browse-link"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)("Browse Videos")])),_:1,__:[2]})])):((0,i.uX)(),(0,i.CE)("div",Ay,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.watchlistItems,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"watchlist-item"},[(0,i.Lk)("div",Ty,[(0,i.Lk)("div",{class:"thumbnail-container",onClick:t=>r.navigateToVideo(e.content_details.id)},[(0,i.Lk)("img",{src:e.content_details.thumbnail_url,alt:e.content_details.title},null,8,My),t[5]||(t[5]=(0,i.Lk)("div",{class:"overlay"},[(0,i.Lk)("button",{class:"play-button"},[(0,i.Lk)("i",{class:"fas fa-play"})])],-1))],8,Iy),(0,i.Lk)("div",Vy,[(0,i.Lk)("h3",Dy,(0,n.v_)(e.content_details.title),1),(0,i.Lk)("div",Ry,[(0,i.Lk)("span",null,(0,n.v_)(r.getYear(e.content_details.release_date)),1),t[6]||(t[6]=(0,i.Lk)("span",{class:"dot"},"•",-1)),(0,i.Lk)("span",null,(0,n.v_)(r.formatDuration(e.content_details.duration)),1)]),(0,i.Lk)("div",jy,[(0,i.Lk)("button",{class:"watch-now",onClick:t=>r.navigateToVideo(e.content_details.id)},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-play"},null,-1),(0,i.eW)(" Watch Now ")]),8,Xy),(0,i.Lk)("button",{class:"remove-button",onClick:t=>r.removeFromWatchlist(e.content)},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1),(0,i.eW)(" Remove ")]),8,$y)])])])]))),128))]))])}var Uy={name:"WatchList",data(){return{watchlistItems:[],loading:!0,error:null}},async created(){await this.fetchWatchlist()},methods:{async fetchWatchlist(){try{this.loading=!0;const e=await rl.getList();this.watchlistItems=e.data,this.loading=!1}catch(e){console.error("Error fetching watchlist:",e),this.error="Failed to load watchlist. Please try again later.",this.loading=!1}},async removeFromWatchlist(e){try{await rl.toggle(e),await this.fetchWatchlist()}catch(t){console.error("Error removing from watchlist:",t),this.$store.dispatch("showToast",{message:"Failed to remove from watchlist. Please try again.",type:"error"})}},navigateToVideo(e){this.$router.push(`/movie/${e}`)},getYear(e){return e?new Date(e).getFullYear():""},formatDuration(e){if(!e)return"";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}h ${s}m`:`${s}m`}}};const Oy=(0,se.A)(Uy,[["render",Fy],["__scopeId","data-v-83c575ce"]]);var Ny=Oy;const By={class:"min-h-screen bg-gray-900 text-white p-4 md:p-8 pt-32 md:pt-36 lg:pt-28"},Wy={class:"max-w-4xl mx-auto"},Qy={class:"space-y-6"},qy={class:"text-sm text-gray-400 mt-8"};function zy(e,t,s,a,o,r){const l=(0,i.g2)("Header"),c=(0,i.g2)("Footer");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",By,[(0,i.Lk)("div",Wy,[t[1]||(t[1]=(0,i.Lk)("h1",{class:"text-3xl font-bold mb-8"},"Privacy Policy",-1)),(0,i.Lk)("div",Qy,[t[0]||(t[0]=(0,i.Fv)('<section><h2 class="text-xl font-semibold mb-4">1. Information We Collect</h2><p class="text-gray-300">We collect information that you provide directly to us, including:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Name and contact information</li><li>Account credentials</li><li>Payment information</li><li>Viewing history and preferences</li><li>Device information and IP address</li></ul></section><section><h2 class="text-xl font-semibold mb-4">2. How We Use Your Information</h2><p class="text-gray-300">We use the collected information to:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Provide and maintain our services</li><li>Process your payments</li><li>Personalize your viewing experience</li><li>Send you updates and notifications</li><li>Improve our services</li></ul></section><section><h2 class="text-xl font-semibold mb-4">3. Data Security</h2><p class="text-gray-300">We implement appropriate security measures to protect your personal information from unauthorized access, alteration, or disclosure.</p></section><section><h2 class="text-xl font-semibold mb-4">4. Data Sharing</h2><p class="text-gray-300">We may share your information with:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Service providers and partners</li><li>Payment processors</li><li>Legal authorities when required</li></ul></section><section><h2 class="text-xl font-semibold mb-4">5. Your Rights</h2><p class="text-gray-300">You have the right to:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Access your personal data</li><li>Correct inaccurate data</li><li>Request data deletion</li><li>Opt-out of marketing communications</li></ul></section><section><h2 class="text-xl font-semibold mb-4">6. Contact Us</h2><p class="text-gray-300">If you have any questions about this Privacy Policy, please contact us at support@yourott.com</p></section>',6)),(0,i.Lk)("p",qy,"Last updated: "+(0,n.v_)(o.currentDate),1)])])]),(0,i.bF)(c)])}var Ky={name:"PrivacyPolicy",components:{Header:bt,Footer:Es},data(){return{currentDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}}};const Hy=(0,se.A)(Ky,[["render",zy]]);var Jy=Hy;const Yy={class:"min-h-screen bg-gray-900 text-white p-4 md:p-8 pt-32 md:pt-36 lg:pt-28"},Gy={class:"max-w-4xl mx-auto"},Zy={class:"space-y-6"},eb={class:"text-sm text-gray-400 mt-8"};function tb(e,t,s,a,o,r){const l=(0,i.g2)("Header"),c=(0,i.g2)("Footer");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",Yy,[(0,i.Lk)("div",Gy,[t[1]||(t[1]=(0,i.Lk)("h1",{class:"text-3xl font-bold mb-8"},"Terms of Service",-1)),(0,i.Lk)("div",Zy,[t[0]||(t[0]=(0,i.Fv)('<section><h2 class="text-xl font-semibold mb-4">1. Acceptance of Terms</h2><p class="text-gray-300">By accessing or using our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2 class="text-xl font-semibold mb-4">2. Subscription and Payments</h2><ul class="list-disc pl-6 text-gray-300"><li>Subscription fees are billed in advance</li><li>We may change subscription fees with 30 days notice</li><li>Refunds are provided according to our refund policy</li><li>You are responsible for all charges incurred under your account</li></ul></section><section><h2 class="text-xl font-semibold mb-4">3. User Account</h2><ul class="list-disc pl-6 text-gray-300"><li>You must be at least 18 years old to create an account</li><li>You are responsible for maintaining account security</li><li>Account sharing is not permitted</li><li>We may terminate accounts that violate our terms</li></ul></section><section><h2 class="text-xl font-semibold mb-4">4. Content Usage Rights</h2><ul class="list-disc pl-6 text-gray-300"><li>Content is for personal, non-commercial use only</li><li>You may not download or copy content unless explicitly permitted</li><li>Content availability may vary by region</li><li>We reserve the right to modify available content</li></ul></section><section><h2 class="text-xl font-semibold mb-4">5. Prohibited Activities</h2><ul class="list-disc pl-6 text-gray-300"><li>Sharing account credentials</li><li>Recording or redistributing content</li><li>Using VPNs to circumvent regional restrictions</li><li>Any form of harassment or abuse</li></ul></section><section><h2 class="text-xl font-semibold mb-4">6. Service Availability</h2><p class="text-gray-300">We strive to provide uninterrupted service but do not guarantee continuous, error-free access. We may modify or discontinue features without notice.</p></section><section><h2 class="text-xl font-semibold mb-4">7. Changes to Terms</h2><p class="text-gray-300">We may modify these terms at any time. Continued use of our service after changes constitutes acceptance of new terms.</p></section><section><h2 class="text-xl font-semibold mb-4">8. Contact Information</h2><p class="text-gray-300">For questions about these Terms of Service, please contact us at support@yourott.com</p></section>',8)),(0,i.Lk)("p",eb,"Last updated: "+(0,n.v_)(o.currentDate),1)])])]),(0,i.bF)(c)])}var sb={name:"TermsOfService",components:{Header:bt,Footer:Es},data(){return{currentDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}}};const ab=(0,se.A)(sb,[["render",tb]]);var ib=ab;const ob={class:"min-h-screen bg-gray-900 text-white p-4 md:p-8 pt-32 md:pt-36 lg:pt-28"},rb={class:"max-w-4xl mx-auto"},lb={class:"space-y-6"},nb={class:"text-sm text-gray-400 mt-8"};function cb(e,t,s,a,o,r){const l=(0,i.g2)("Header"),c=(0,i.g2)("Footer");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",ob,[(0,i.Lk)("div",rb,[t[1]||(t[1]=(0,i.Lk)("h1",{class:"text-3xl font-bold mb-8"},"Cookie Policy",-1)),(0,i.Lk)("div",lb,[t[0]||(t[0]=(0,i.Fv)('<section><h2 class="text-xl font-semibold mb-4">1. What Are Cookies?</h2><p class="text-gray-300">Cookies are small text files that are placed on your device when you visit our website. They help us provide you with a better experience by:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Remembering your preferences and settings</li><li>Keeping you signed in to your account</li><li>Understanding how you use our service</li><li>Improving our platform based on your behavior</li></ul></section><section><h2 class="text-xl font-semibold mb-4">2. Types of Cookies We Use</h2><div class="space-y-4"><div><h3 class="text-lg font-medium mb-2">Essential Cookies</h3><p class="text-gray-300">These cookies are necessary for the website to function properly. They enable basic functions like page navigation and access to secure areas of the website.</p></div><div><h3 class="text-lg font-medium mb-2">Preference Cookies</h3><p class="text-gray-300">These cookies remember your preferences and choices to provide a more personalized experience.</p></div><div><h3 class="text-lg font-medium mb-2">Analytics Cookies</h3><p class="text-gray-300">These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously.</p></div><div><h3 class="text-lg font-medium mb-2">Marketing Cookies</h3><p class="text-gray-300">These cookies track your online activity to help advertisers deliver more relevant advertising or to limit how many times you see an ad.</p></div></div></section><section><h2 class="text-xl font-semibold mb-4">3. How We Use Cookies</h2><p class="text-gray-300">We use cookies to:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Remember your login details</li><li>Remember your preferences (language, region, etc.)</li><li>Analyze how our website is used</li><li>Personalize content and ads</li><li>Provide social media features</li><li>Improve our services</li></ul></section><section><h2 class="text-xl font-semibold mb-4">4. Managing Cookies</h2><p class="text-gray-300">You can control and manage cookies in various ways:</p><ul class="list-disc pl-6 mt-2 text-gray-300"><li>Browser settings: You can modify your browser settings to accept or reject cookies</li><li>Our cookie preferences tool: Use our cookie settings to customize your preferences</li><li>Third-party tools: Various tools are available to manage cookies across all websites</li></ul><p class="text-gray-300 mt-4">Please note that blocking some types of cookies may impact your experience on our website.</p></section><section><h2 class="text-xl font-semibold mb-4">5. Third-Party Cookies</h2><p class="text-gray-300">Some cookies are placed by third-party services that appear on our pages. We do not control these third-party cookies. You can learn more about these cookies and how to manage them by visiting the respective third party&#39;s privacy policy.</p></section><section><h2 class="text-xl font-semibold mb-4">6. Updates to This Policy</h2><p class="text-gray-300">We may update this Cookie Policy from time to time. Any changes will be posted on this page with an updated revision date.</p></section><section><h2 class="text-xl font-semibold mb-4">7. Contact Us</h2><p class="text-gray-300">If you have any questions about our Cookie Policy, please contact us at support@yourott.com</p></section>',7)),(0,i.Lk)("p",nb,"Last updated: "+(0,n.v_)(o.currentDate),1)])])]),(0,i.bF)(c)])}var db={name:"CookiePolicy",components:{Header:bt,Footer:Es},data(){return{currentDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}}};const ub=(0,se.A)(db,[["render",cb]]);var hb=ub;const pb={class:"payment-verification"},mb={class:"verification-container"},gb={key:0,class:"loading"},fb={key:1,class:"error"};function vb(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",pb,[(0,i.Lk)("div",mb,[a.verifying?((0,i.uX)(),(0,i.CE)("div",gb,t[1]||(t[1]=[(0,i.Lk)("h2",null,"Verifying Payment...",-1),(0,i.Lk)("p",null,"Please wait while we confirm your payment.",-1)]))):a.error?((0,i.uX)(),(0,i.CE)("div",fb,[t[2]||(t[2]=(0,i.Lk)("h2",null,"Payment Verification Failed",-1)),(0,i.Lk)("p",null,(0,n.v_)(a.error),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.goToProfile&&a.goToProfile(...e)),class:"btn"},"Go to Profile")])):(0,i.Q3)("",!0)])])}var yb={name:"PaymentVerification",setup(){const e=(0,T.rd)(),t=(0,ee.KR)(!0),s=(0,ee.KR)(null),a=()=>{e.push("/profile")};return(0,i.sV)(async()=>{try{const i=localStorage.getItem("payment_success");if(!i)return s.value="No payment data found. Please try again.",void(t.value=!1);const{orderId:o,timestamp:r}=JSON.parse(i),l=(new Date).getTime();if(l-r>6e5)return s.value="Payment verification timeout. Please contact support.",void(t.value=!1);try{const a=await S.A.post("/api/payment/verify-upi-status/",{order_id:o});"success"===a.data.status?(localStorage.removeItem("payment_success"),e.push("/profile")):(s.value="Payment verification failed. Please contact support.",t.value=!1)}catch(a){console.error("Payment verification error:",a),s.value="Failed to verify payment status. Please check your subscription status in profile.",t.value=!1}}catch(a){console.error("Payment verification error:",a),s.value="An error occurred during payment verification. Please contact support.",t.value=!1}}),{verifying:t,error:s,goToProfile:a}}};const bb=(0,se.A)(yb,[["render",vb],["__scopeId","data-v-3b286384"]]);var kb=bb;const wb=[{path:"/",name:"Home",component:ni,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:$i},{path:"/register",name:"Register",component:Qh},{path:"/plans",name:"SubscriptionPlans",component:ir,meta:{requiresAuth:!0}},{path:"/player",name:"VideoPlayer",component:Cl,meta:{requiresAuth:!0}},{path:"/movie/:id",name:"MovieDetails",component:nc,props:!0,meta:{requiresAuth:!0}},{path:"/movie/:id/rent",name:"RentalPayment",component:ie,props:!0,meta:{requiresAuth:!0}},{path:"/regional",name:"RegionalContent",component:yd,meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:Gd,meta:{requiresAuth:!0}},{path:"/regional/:stateId",name:"RegionalState",component:Vu,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:um,meta:{requiresAuth:!0}},{path:"/profile/update",name:"ProfileUpdate",component:gg,meta:{requiresAuth:!0}},{path:"/referral",name:"Referral",component:nm,meta:{requiresAuth:!0}},{path:"/referral/details",name:"ReferralDetails",component:lf,meta:{requiresAuth:!0}},{path:"/downloads",name:"Downloads",component:()=>s.e(511).then(s.bind(s,9511)),meta:{requiresAuth:!0}},{path:"/payment",name:"Payment",component:bf,meta:{requiresAuth:!0}},{path:"/wallet",name:"Wallet",component:ty,meta:{requiresAuth:!0,title:"Wallet"}},{path:"/category/:id",name:"CategoryVideos",component:Cy,meta:{requiresAuth:!0}},{path:"/premium-videos",name:"PremiumVideos",component:()=>s.e(463).then(s.bind(s,7463)),meta:{requiresAuth:!0}},{path:"/free-videos",name:"FreeVideos",component:()=>s.e(222).then(s.bind(s,3222)),meta:{requiresAuth:!0}},{path:"/watchlist",name:"WatchList",component:Ny,meta:{requiresAuth:!0}},{path:"/privacy-policy",name:"PrivacyPolicy",component:Jy,meta:{requiresAuth:!0}},{path:"/terms-of-service",name:"TermsOfService",component:ib,meta:{requiresAuth:!0}},{path:"/cookie-policy",name:"CookiePolicy",component:hb,meta:{requiresAuth:!0}},{path:"/mini-register",name:"MiniRegister",component:oo,meta:{requiresAuth:!0}},{path:"/payment/verify",name:"PaymentVerification",component:kb,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>s.e(185).then(s.bind(s,5185)),meta:{requiresAuth:!0}}],xb=(0,T.aE)({history:(0,T.LA)(),routes:wb,scrollBehavior(){return{top:0}}});xb.beforeEach((e,t,s)=>{const a=A.state.isAuthenticated||"true"===localStorage.getItem("isAuthenticated");let i=null,o=localStorage.getItem("token"),r=localStorage.getItem("phone");try{const e=localStorage.getItem("user");e&&(i=JSON.parse(e))}catch(n){return console.error("Error parsing user data:",n),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("phone"),A.dispatch("logout"),void s("/login")}const l=i&&i.first_name&&i.address;console.log("Navigation:",{from:t.path,to:e.path,isAuthenticated:a,hasCompletedRegistration:l,user:i?"exists":"null",hasToken:!!o,hasPhone:!!r}),"/login"!==e.path?e.matched.some(e=>e.meta.requiresAuth)?a&&o&&r&&i?l||"/mini-register"===e.path?l&&"/mini-register"===e.path?s("/"):s():s("/mini-register"):(console.log("Authentication failed, redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("phone"),A.dispatch("logout"),s({path:"/login",query:{redirect:e.fullPath}})):s():a&&o&&r&&i?s(l?"/":"/mini-register"):s()});var Lb=xb;const Cb=()=>{const e=["theme"];Object.keys(localStorage).forEach(t=>{e.includes(t)||localStorage.removeItem(t)}),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{const t=e.split("=")[0].trim();document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`})},Sb=async()=>{await A.dispatch("resetState")},_b=async()=>{try{await S.A.post("/users/logout/")}catch(e){console.error("Logout API error:",e)}},Pb=async()=>{try{await _b(),Cb(),await Sb(),await Lb.replace("/login")}catch(e){console.error("Logout error:",e),await Lb.replace("/login")}};var Eb={name:"ProfileMenu",props:{isOpen:{type:Boolean,default:!1}},computed:{...(0,_.L8)(["currentUser"]),user(){return this.currentUser},userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},userName(){return this.user?this.user.first_name||this.user.last_name?`${this.user.first_name||""} ${this.user.last_name||""}`.trim():this.user.phone:""}},watch:{isOpen(e){e&&this.$store.dispatch("initializeStore")}},methods:{close(){this.$emit("close")},handleProfileClick(){this.close(),this.$nextTick(()=>{this.$router.push("/profile")})},handleSignIn(){this.$router.push("/login"),this.close()},handleSubscribe(){this.$router.push("/plans"),this.close()},async handleLogout(){try{this.$emit("loading",!0),await Pb(),this.$store.commit("setUser",null),this.$store.commit("setAuthenticated",!1),localStorage.removeItem("hasCompletedRegistration"),this.close(),this.$router.push("/login")}catch(e){console.error("Logout failed:",e),alert("Logout failed. Please try again.")}finally{this.$emit("loading",!1)}}}};const Ab=(0,se.A)(Eb,[["render",C]]);var Tb=Ab,Ib={name:"MobileNav",components:{ProfileMenu:Tb},computed:{...(0,_.L8)(["currentUser"]),isUserLoggedIn(){return!!this.currentUser}},data(){return{isMenuOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&this.$store.dispatch("initializeStore")}}};const Mb=(0,se.A)(Ib,[["render",u],["__scopeId","data-v-3b0dca04"]]);var Vb=Mb;const Db={class:"toast-content"};function Rb(e,t,s,o,r,l){return(0,i.uX)(),(0,i.Wv)(a.eB,{name:"toast"},{default:(0,i.k6)(()=>[e.toast.show?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,n.C4)(["toast",`toast-${e.toast.type}`])},[(0,i.Lk)("div",Db,[(0,i.Lk)("i",{class:(0,n.C4)(l.iconClass)},null,2),(0,i.Lk)("span",null,(0,n.v_)(e.toast.message),1)])],2)):(0,i.Q3)("",!0)]),_:1})}var jb={name:"ToastNotification",computed:{...(0,_.aH)(["toast"]),iconClass(){switch(this.toast.type){case"success":return"fas fa-check-circle";case"error":return"fas fa-exclamation-circle";case"warning":return"fas fa-exclamation-triangle";default:return"fas fa-info-circle"}}}};const Xb=(0,se.A)(jb,[["render",Rb],["__scopeId","data-v-459a8c06"]]);var $b=Xb;const Fb={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Ub={class:"p-0 flex flex-col items-center justify-center"},Ob={key:0,class:"flex justify-center mb-4 mt-2"},Nb=["src","alt"],Bb={key:1,class:"text-center mb-4"},Wb={class:"block text-3xl font-light tracking-wide text-white mb-1"},Qb={class:"block text-3xl font-black italic text-white",style:{"font-family":"'Arial Black', sans-serif"}},qb={key:2,class:"text-white/90 text-center mb-6 text-base leading-relaxed"},zb={class:"flex flex-col gap-3 w-full"};function Kb(e,t,s,a,o,r){return r.shouldShowOnThisPage&&o.showPopup?((0,i.uX)(),(0,i.CE)("div",Fb,[(0,i.Lk)("div",{class:"absolute inset-0 bg-[#000000E8] bg-opacity-95",onClick:t[0]||(t[0]=(...e)=>r.closePopup&&r.closePopup(...e))}),(0,i.Lk)("div",{class:(0,n.C4)(["relative w-auto h-auto max-w-full max-h-full transform transition-all duration-300 scale-100 rounded-xl p-0",{"scale-100 opacity-100":o.showPopup,"scale-95 opacity-0":!o.showPopup}])},[o.popupConfig.popupSettings?.dismissible?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>r.closePopup&&r.closePopup(...e)),class:"absolute -top-6 right-5 w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-gray-100 transition-colors duration-200",title:"Close popup","aria-label":"Close popup",style:{"margin-left":"8%"}},t[4]||(t[4]=[(0,i.Lk)("svg",{class:"w-5 h-5 text-gray-800",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[(0,i.Lk)("path",{d:"M6 6l12 12M6 18L18 6","stroke-linecap":"round"})],-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",Ub,[o.popupConfig.popupContent?.imageUrl&&!o.imageError?((0,i.uX)(),(0,i.CE)("div",Ob,[(0,i.Lk)("img",{src:o.popupConfig.popupContent.imageUrl,alt:o.popupConfig.popupContent.title,style:(0,n.Tr)({width:"string"===typeof o.popupConfig.popupContent.imageWidth?o.popupConfig.popupContent.imageWidth:(o.popupConfig.popupContent.imageWidth||80)+"px",height:"string"===typeof o.popupConfig.popupContent.imageHeight?o.popupConfig.popupContent.imageHeight:(o.popupConfig.popupContent.imageHeight||80)+"px"}),class:"object-cover rounded-none max-w-full h-auto",onError:t[2]||(t[2]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,44,Nb)])):(0,i.Q3)("",!0),o.popupConfig.popupContent?.title?((0,i.uX)(),(0,i.CE)("h2",Bb,[(0,i.Lk)("span",Wb,(0,n.v_)(o.popupConfig.popupContent.title.split(" ")[0]),1),(0,i.Lk)("span",Qb,(0,n.v_)(o.popupConfig.popupContent.title.split(" ").slice(1).join(" ")),1)])):(0,i.Q3)("",!0),o.popupConfig.popupContent?.message?((0,i.uX)(),(0,i.CE)("p",qb,(0,n.v_)(o.popupConfig.popupContent.message),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",zb,[o.popupConfig.popupContent?.buttonText?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>r.handleAction&&r.handleAction(...e)),class:"w-full bg-white text-indigo-700 py-3 rounded-lg font-semibold text-base hover:bg-gray-100 transition-colors duration-200 shadow"},(0,n.v_)(o.popupConfig.popupContent.buttonText),1)):(0,i.Q3)("",!0)])])],2)])):(0,i.Q3)("",!0)}class Hb{constructor(){this.config=null,this.isLoaded=!1}async loadConfig(){try{const e=await fetch("/popup-config.json");return e.ok?(this.config=await e.json(),this.isLoaded=!0,console.log("Popup config loaded successfully:",this.config),this.config):(console.warn("Failed to load popup config:",e.status),this.getDefaultConfig())}catch(e){return console.error("Error loading popup config:",e),this.getDefaultConfig()}}getDefaultConfig(){return{showPopup:!0,popupContent:{title:"Welcome to OTT Platform!",message:"Enjoy unlimited streaming of your favorite movies and TV shows.",imageUrl:"/images/placeholder.png",buttonText:"Get Started",closeButtonText:"Close"},popupSettings:{autoShow:!0,showOnLoad:!0,delay:2e3,dismissible:!0}}}shouldShowPopup(){if(!this.config)return!1;if(!this.config.showPopup)return!1;if(!this.config.popupSettings?.showOnLoad)return!1;if(!this.shouldShowOnCurrentDevice())return!1;const e=localStorage.getItem("popupShown");return"true"!==e}shouldShowOnCurrentDevice(){const e=this.config?.popupSettings?.deviceType;if(!e)return!0;const t=this.isMobileDevice();switch(e.toLowerCase()){case"desktop":return!t;case"mobile":return t;case"all":return!0;default:return!0}}isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}getPopupDelay(){return this.config?.popupSettings?.delay||0}markPopupAsShown(){localStorage.setItem("popupShown","true")}resetPopupState(){localStorage.removeItem("popupShown")}updateConfig(e){this.config={...this.config,...e}}getConfig(){return this.config}isDismissible(){return this.config?.popupSettings?.dismissible??!0}getPopupContent(){return this.config?.popupContent||{}}getPopupSettings(){return this.config?.popupSettings||{}}}const Jb=new Hb;var Yb=Jb,Gb={name:"PopupModal",data(){return{showPopup:!1,popupConfig:{showPopup:!1,popupContent:{},popupSettings:{}},imageError:!1,hasShownPopup:!1,currentDevice:"desktop"}},async mounted(){this.detectDevice(),await this.loadPopupConfig(),this.checkAndShowPopup()},computed:{shouldShowOnThisPage(){const e=this.popupConfig.popupSettings?.showOnPages;return!e||e.includes(this.$route?.name)}},watch:{showPopup(e){document.body.style.overflow=e?"hidden":""}},beforeUnmount(){document.body.style.overflow=""},methods:{async loadPopupConfig(){try{this.popupConfig=await Yb.loadConfig()}catch(e){console.error("Error loading popup config:",e),this.popupConfig=Yb.getDefaultConfig()}},detectDevice(){this.currentDevice=Yb.isMobileDevice()?"mobile":"desktop",console.log("Current device detected:",this.currentDevice)},checkAndShowPopup(){if(Yb.shouldShowPopup()){const e=Yb.getPopupDelay();setTimeout(()=>{this.showPopup=!0,this.hasShownPopup=!0,this.playPopupSound()},e)}else console.log("Popup not shown. Device type:",this.currentDevice,"Config device type:",this.popupConfig.popupSettings?.deviceType)},playPopupSound(){const e=this.popupConfig.popupContent?.soundUrl;if(e){const t=new Audio(e);t.play()}},closePopup(){this.showPopup=!1,Yb.markPopupAsShown()},handleAction(){this.closePopup(),this.$emit("popup-action")},handleImageError(){this.imageError=!0},showPopupManually(){this.showPopup=!0},resetPopup(){Yb.resetPopupState(),this.hasShownPopup=!1,this.showPopup=!1}}};const Zb=(0,se.A)(Gb,[["render",Kb],["__scopeId","data-v-5dd20d26"]]);var ek=Zb,tk={name:"App",data(){return{scrollCheckInterval:null}},components:{MobileNav:Vb,ToastNotification:$b,PopupModal:ek},computed:{showMobileNav(){const e=["/login","/register","/mini-register"];return!e.includes(this.$route.path)}},watch:{$route(){this.$nextTick(()=>{this.ensurePageScrollability()})}},mounted(){console.log("App mounted, checking authentication status"),this.ensurePageScrollability();const e=this.$store.getters.isAuthenticated,t=this.$store.getters.currentUser;console.log("Authentication status:",{isAuthenticated:e,user:t?"exists":"null"}),this.checkAndCleanExpiredOrders(),e&&t?(this.checkAndShowToast("registrationSuccess","registrationMessage"),this.checkAndShowToast("loginSuccess","loginMessage"),this.checkPendingPayments(),this.checkUserNotifications(),this.paymentCheckInterval=setInterval(()=>{this.checkPendingPayments()},3e4),this.subscriptionCheckInterval=setInterval(()=>{this.checkSubscriptionStatus()},12e4),window.addEventListener("focus",this.checkPendingPayments),window.addEventListener("focus",this.checkUserNotifications),window.addEventListener("focus",this.checkAndCleanExpiredOrders)):console.log("User not authenticated, skipping background checks"),window.addEventListener("beforeunload",this.ensurePageScrollability),window.addEventListener("pagehide",this.ensurePageScrollability),this.scrollCheckInterval=setInterval(()=>{"hidden"===document.body.style.overflow&&(console.log("⚠️ Scroll blocked detected, restoring..."),this.ensurePageScrollability())},5e3)},beforeUnmount(){this.paymentCheckInterval&&clearInterval(this.paymentCheckInterval),this.subscriptionCheckInterval&&clearInterval(this.subscriptionCheckInterval),window.removeEventListener("focus",this.checkPendingPayments),window.removeEventListener("focus",this.checkUserNotifications),window.removeEventListener("focus",this.checkAndCleanExpiredOrders),window.removeEventListener("beforeunload",this.ensurePageScrollability),window.removeEventListener("pagehide",this.ensurePageScrollability),this.scrollCheckInterval&&clearInterval(this.scrollCheckInterval)},methods:{checkAndShowToast(e,t){const s=localStorage.getItem(e);if("true"===s){try{this.$toast&&this.$toast.success(localStorage.getItem(t)||"Operation completed successfully!",{position:"top-right",duration:3e3})}catch(a){console.warn("Toast notification failed:",a)}localStorage.removeItem(e),localStorage.removeItem(t)}},async checkPendingPayments(){const e=localStorage.getItem("pending_payment");if(e)try{const t=JSON.parse(e);console.log("=== CHECKING PENDING PAYMENT ==="),console.log("Payment data:",t);const s=Date.now()-t.timestamp;if(console.log("Time difference:",s,"ms"),s<9e5){if(console.log("Payment is within time limit, proceeding with verification"),t.retry_count>=10)return console.log("Max retries reached, removing pending payment"),void localStorage.removeItem("pending_payment");console.log("Attempting payment verification...");const e=await this.$axios.post("/users/verify-payment/",{razorpay_payment_id:t.payment_id,razorpay_order_id:t.order_id,razorpay_signature:t.signature,plan_id:t.plan_id,phone:t.phone||this.$store.getters.currentUser?.phone});console.log("Verification response:",e.data),"success"===e.data.status?(localStorage.removeItem("pending_payment"),this.$store.commit("setSubscription",e.data.subscription),this.$store.dispatch("showToast",{message:"Payment successful! Your subscription is now active.",type:"success"}),console.log("Pending payment verified successfully")):(console.log("Payment verification failed:",e.data),t.retry_count=(t.retry_count||0)+1,localStorage.setItem("pending_payment",JSON.stringify(t)),console.log("Updated retry count:",t.retry_count))}else localStorage.removeItem("pending_payment"),console.log("Pending payment expired, removed from localStorage")}catch(t){console.error("Error checking pending payment:",t);try{const t=JSON.parse(e);t.retry_count=(t.retry_count||0)+1,localStorage.setItem("pending_payment",JSON.stringify(t)),console.log("Error occurred, updated retry count:",t.retry_count)}catch(s){console.error("Error updating retry count:",s)}}else console.log("No pending payment found in localStorage");await this.checkSubscriptionStatus()},checkAndCleanExpiredOrders(){try{const e=localStorage.getItem("payment_order");if(e){const t=JSON.parse(e),s=t.created_at,a=Date.now(),i=a-s;i>18e5?(localStorage.removeItem("payment_order"),console.log("Expired payment order removed from localStorage")):console.log("Valid payment order found, keeping it")}else console.log("No payment order found in localStorage")}catch(e){console.error("Error checking expired orders:",e),localStorage.removeItem("payment_order")}},async checkSubscriptionStatus(){try{const e=this.$store.getters.currentUser;if(!e||!e.phone)return void console.log("No user found, skipping subscription check");console.log("=== CHECKING SUBSCRIPTION STATUS ==="),console.log("User phone:",e.phone);const t=await this.$axios.get("/users/check-subscription-status/",{params:{phone:e.phone}});if(console.log("Subscription status response:",t.data),"success"===t.data.status)if(t.data.is_subscribed)console.log("User has active subscription:",t.data.subscription),this.$store.commit("setSubscription",t.data.subscription),localStorage.removeItem("pending_payment"),console.log("Cleared pending payment from localStorage"),this.$store.dispatch("showToast",{message:"Your subscription is active!",type:"success"});else{console.log("User has no active subscription");const e=localStorage.getItem("pending_payment");e&&console.log("Found pending payment, will retry verification")}else console.log("Subscription status check failed:",t.data)}catch(e){console.error("Error checking subscription status:",e),console.error("Error details:",e.response?.data)}},async checkUserNotifications(){try{const e=this.$store.getters.isAuthenticated,t=this.$store.getters.currentUser;if(!e||!t||!t.phone)return void console.log("User not authenticated, skipping notification check");console.log("Checking notifications for user:",t.phone);const s=await this.$axios.get(`/users/check-notifications/?phone=${t.phone}`);if("success"===s.data.status){if(!1===s.data.user_exists)return console.log("User no longer exists in database, logging out"),void this.performCompleteLogout("Your account has been deleted. You have been logged out.");if(s.data.has_notifications){console.log("Found notifications:",s.data.notifications);const e=s.data.notifications.find(e=>"account_deleted"===e.type);e&&(console.log("Account deletion notification found, logging out user"),this.performCompleteLogout("Your account has been deleted by admin. You have been logged out."))}else console.log("No notifications found")}}catch(e){console.error("Error checking user notifications:",e)}},performCompleteLogout(e){console.log("Performing complete logout"),localStorage.clear(),sessionStorage.clear();const t=["user","isAuthenticated","token","subscription","csrfToken","pending_payment","registrationSuccess","registrationMessage","loginSuccess","loginMessage","hasCompletedRegistration","app_version"];t.forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)}),this.$store.commit("logout"),document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),this.$axios&&this.$axios.defaults&&(this.$axios.defaults.headers.common["Authorization"]="",this.$axios.defaults.headers.common["X-CSRFToken"]=""),this.$store.dispatch("showToast",{message:e||"You have been logged out.",type:"error",duration:5e3}),this.$router.push("/login"),console.log("Complete logout finished")},handlePopupAction(){console.log("Popup action handled")},ensurePageScrollability(){console.log("🔧 Ensuring page scrollability..."),document.body.style.overflow="auto",document.body.style.position="static",document.body.style.height="auto",document.body.style.width="auto",document.body.style.transform="none",document.body.style.willChange="auto",document.body.style.touchAction="auto",document.body.style.pointerEvents="auto",document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto",document.body.style.webkitOverflowScrolling="touch",document.documentElement.style.overflow="auto",document.documentElement.style.height="auto",document.documentElement.style.position="static",document.documentElement.style.touchAction="auto",document.body.classList.remove("vjs-fullscreen","video-playing","no-scroll","force-scrollable"),document.documentElement.classList.remove("vjs-fullscreen","video-playing","no-scroll"),document.body.style.cssText=document.body.style.cssText.replace(/overflow:\s*[^;]+;?/g,"overflow: auto;"),document.documentElement.style.cssText=document.documentElement.style.cssText.replace(/overflow:\s*[^;]+;?/g,"overflow: auto;"),document.body.offsetHeight,document.documentElement.offsetHeight,window.scrollTo(0,1),window.scrollTo(0,0),console.log("✅ Page scrollability ensured")}}};const sk=(0,se.A)(tk,[["render",l]]);var ak=sk;const ik="1.0.17",ok=localStorage.getItem("app_version");if(ok&&ok!==ik){console.log("App version changed, clearing all data and logging out users");const e=window.location.pathname,t=ik,s=localStorage.getItem("token"),a=localStorage.getItem("user"),i=localStorage.getItem("isAuthenticated"),o=localStorage.getItem("phone");localStorage.clear(),sessionStorage.clear(),"true"===i&&s&&a&&(localStorage.setItem("token",s),localStorage.setItem("user",a),localStorage.setItem("isAuthenticated",i),o&&localStorage.setItem("phone",o)),localStorage.setItem("app_version",t),i&&s&&a||(A&&A.dispatch&&A.dispatch("logout"),"/login"!==e&&window.location.replace("/login"))}S.A.defaults.baseURL="https://ott.no1news.in/",S.A.defaults.withCredentials=!0;const rk=(0,a.Ef)(ak);rk.use(A),rk.use(Lb),rk.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var l=!0,n=0;n<a.length;n++)(!1&o||r>=o)&&Object.keys(s.O).every(function(e){return s.O[e](a[n])})?a.splice(n--,1):(l=!1,o<r&&(r=o));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce(function(t,a){return s.f[a](e,t),t},[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{185:"1675b554",222:"6f25bc65",463:"790d3bf1",511:"261e669b"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"css/"+e+"."+{185:"fd66d84b",222:"12be4832",463:"f9adcc5f",511:"298d2082"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="no1ott-vujs:";s.l=function(a,i,o,r){if(e[a])e[a].push(i);else{var l,n;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+o){l=u;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+o),l.src=a),e[a]=[i];var h=function(t,s){l.onerror=l.onload=null,clearTimeout(p);var i=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach(function(e){return e(s)}),t)return t(s)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,i,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",s.nc&&(r.nonce=s.nc);var l=function(s){if(r.onerror=r.onload=null,"load"===s.type)i();else{var a=s&&s.type,l=s&&s.target&&s.target.href||t,n=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+l+")");n.name="ChunkLoadError",n.code="CSS_CHUNK_LOAD_FAILED",n.type=a,n.request=l,r.parentNode&&r.parentNode.removeChild(r),o(n)}};return r.onerror=r.onload=l,r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var r=document.getElementsByTagName("style");for(a=0;a<r.length;a++){i=r[a],o=i.getAttribute("data-href");if(o===e||o===t)return i}},a=function(a){return new Promise(function(i,o){var r=s.miniCssF(a),l=s.p+r;if(t(r,l))return i();e(a,l,null,i,o)})},i={524:0};s.f.miniCss=function(e,t){var s={185:1,222:1,463:1,511:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then(function(){i[e]=0},function(t){throw delete i[e],t}))}}}(),function(){var e={524:0};s.f.j=function(t,a){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise(function(s,a){i=e[t]=[s,a]});a.push(i[2]=o);var r=s.p+s.u(t),l=new Error,n=function(a){if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,i[1](l)}};s.l(r,n,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],l=a[1],n=a[2],c=0;if(r.some(function(t){return 0!==e[t]})){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(n)var d=n(s)}for(t&&t(a);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunkno1ott_vujs"]=self["webpackChunkno1ott_vujs"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(8018)});a=s.O(a)})();
//# sourceMappingURL=app.a25ffc28.js.map