(self["webpackChunkno1ott_vujs"]=self["webpackChunkno1ott_vujs"]||[]).push([[504],{34:function(e,t,n){"use strict";var i=n(4901);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},59:function(e,t,n){"use strict";function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var a=function(){function e(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var t=e.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},t.addInterceptor=function(e,t){this.typeToInterceptorsMap_.has(e)||this.typeToInterceptorsMap_.set(e,new Set);var n=this.typeToInterceptorsMap_.get(e);return!n.has(t)&&(n.add(t),!0)},t.removeInterceptor=function(e,t){var n=this.typeToInterceptorsMap_.get(e);return!(!n||!n.has(t))&&(n.delete(t),!0)},t.clearInterceptorsByType=function(e){var t=this.typeToInterceptorsMap_.get(e);return!!t&&(this.typeToInterceptorsMap_.delete(e),this.typeToInterceptorsMap_.set(e,new Set),!0)},t.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},t.getForType=function(e){return this.typeToInterceptorsMap_.get(e)||new Set},t.execute=function(e,t){for(var n,r=this.getForType(e),s=i(r);!(n=s()).done;){var a=n.value;try{t=a(t)}catch(o){}}return t},e}();e.exports=a},81:function(e,t,n){"use strict";var i=n(9565),r=n(9306),s=n(8551),a=n(6823),o=n(851),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?o(e):t;if(r(n))return s(i(n,e));throw new l(a(e)+" is not iterable")}},116:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(2652),a=n(9306),o=n(8551),l=n(1767),u=n(9539),c=n(4549),d=c("find",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(e){o(this);try{a(e)}catch(i){u(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;return s(t,function(t,i){if(e(t,n++))return i(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},144:function(e,t,n){"use strict";n.d(t,{BA:function(){return Pe},C4:function(){return C},EW:function(){return je},Gc:function(){return be},IG:function(){return Ie},IJ:function(){return Re},KR:function(){return De},Kh:function(){return ve},Pr:function(){return Be},R1:function(){return Le},Tm:function(){return Se},X2:function(){return d},a1:function(){return ke},bl:function(){return I},fE:function(){return Ee},g8:function(){return we},hV:function(){return We},hZ:function(){return B},i9:function(){return Me},jr:function(){return u},ju:function(){return Ae},lJ:function(){return xe},o5:function(){return l},qA:function(){return j},u4:function(){return U},uY:function(){return o},ux:function(){return Ce},wB:function(){return qe},yC:function(){return a}});n(4114),n(8111),n(2489),n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(4232);let r,s;class a{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=r,!e&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=r;try{return r=this,e()}finally{r=t}}else 0}on(){1===++this._on&&(this.prevScope=r,r=this)}off(){this._on>0&&0===--this._on&&(r=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function o(e){return new a(e)}function l(){return r}function u(e,t=!1){r&&r.cleanups.push(e)}const c=new WeakSet;class d{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,r&&r.active&&r.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,c.has(this)&&(c.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||g(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,x(this),v(this);const e=s,t=E;s=this,E=!0;try{return this.fn()}finally{0,b(this),s=e,E=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)w(e);this.deps=this.depsTail=void 0,x(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){T(this)&&this.run()}get dirty(){return T(this)}}let h,p,f=0;function g(e,t=!1){if(e.flags|=8,t)return e.next=p,void(p=e);e.next=h,h=e}function m(){f++}function y(){if(--f>0)return;if(p){let e=p;p=void 0;while(e){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;while(h){let n=h;h=void 0;while(n){const i=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=i}}if(e)throw e}function v(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function b(e){let t,n=e.depsTail,i=n;while(i){const e=i.prevDep;-1===i.version?(i===n&&(n=e),w(i),S(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=e}e.deps=t,e.depsTail=n}function T(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===k)return;if(e.globalVersion=k,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!T(e)))return;e.flags|=2;const t=e.dep,n=s,r=E;s=e,E=!0;try{v(e);const n=e.fn(e._value);(0===t.version||(0,i.$H)(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(a){throw t.version++,a}finally{s=n,E=r,b(e),e.flags&=-3}}function w(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)w(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function S(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let E=!0;const A=[];function C(){A.push(E),E=!1}function I(){const e=A.pop();E=void 0===e||e}function x(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=s;s=void 0;try{t()}finally{s=e}}}let k=0;class M{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class D{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!s||!E||s===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==s)t=this.activeLink=new M(s,this),s.deps?(t.prevDep=s.depsTail,s.depsTail.nextDep=t,s.depsTail=t):s.deps=s.depsTail=t,R(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=s.depsTail,t.nextDep=void 0,s.depsTail.nextDep=t,s.depsTail=t,s.deps===t&&(s.deps=e)}return t}trigger(e){this.version++,k++,this.notify(e)}notify(e){m();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{y()}}}function R(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)R(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const O=new WeakMap,N=Symbol(""),L=Symbol(""),P=Symbol("");function U(e,t,n){if(E&&s){let t=O.get(e);t||O.set(e,t=new Map);let i=t.get(n);i||(t.set(n,i=new D),i.map=t,i.key=n),i.track()}}function B(e,t,n,r,s,a){const o=O.get(e);if(!o)return void k++;const l=e=>{e&&e.trigger()};if(m(),"clear"===t)o.forEach(l);else{const s=(0,i.cy)(e),a=s&&(0,i.yI)(n);if(s&&"length"===n){const e=Number(r);o.forEach((t,n)=>{("length"===n||n===P||!(0,i.Bm)(n)&&n>=e)&&l(t)})}else switch((void 0!==n||o.has(void 0))&&l(o.get(n)),a&&l(o.get(P)),t){case"add":s?a&&l(o.get("length")):(l(o.get(N)),(0,i.CE)(e)&&l(o.get(L)));break;case"delete":s||(l(o.get(N)),(0,i.CE)(e)&&l(o.get(L)));break;case"set":(0,i.CE)(e)&&l(o.get(N));break}}y()}function F(e){const t=Ce(e);return t===e?t:(U(t,"iterate",P),Ee(e)?t:t.map(xe))}function j(e){return U(e=Ce(e),"iterate",P),e}const V={__proto__:null,[Symbol.iterator](){return H(this,Symbol.iterator,xe)},concat(...e){return F(this).concat(...e.map(e=>(0,i.cy)(e)?F(e):e))},entries(){return H(this,"entries",e=>(e[1]=xe(e[1]),e))},every(e,t){return G(this,"every",e,t,void 0,arguments)},filter(e,t){return G(this,"filter",e,t,e=>e.map(xe),arguments)},find(e,t){return G(this,"find",e,t,xe,arguments)},findIndex(e,t){return G(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return G(this,"findLast",e,t,xe,arguments)},findLastIndex(e,t){return G(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return G(this,"forEach",e,t,void 0,arguments)},includes(...e){return W(this,"includes",e)},indexOf(...e){return W(this,"indexOf",e)},join(e){return F(this).join(e)},lastIndexOf(...e){return W(this,"lastIndexOf",e)},map(e,t){return G(this,"map",e,t,void 0,arguments)},pop(){return X(this,"pop")},push(...e){return X(this,"push",e)},reduce(e,...t){return q(this,"reduce",e,t)},reduceRight(e,...t){return q(this,"reduceRight",e,t)},shift(){return X(this,"shift")},some(e,t){return G(this,"some",e,t,void 0,arguments)},splice(...e){return X(this,"splice",e)},toReversed(){return F(this).toReversed()},toSorted(e){return F(this).toSorted(e)},toSpliced(...e){return F(this).toSpliced(...e)},unshift(...e){return X(this,"unshift",e)},values(){return H(this,"values",xe)}};function H(e,t,n){const i=j(e),r=i[t]();return i===e||Ee(e)||(r._next=r.next,r.next=()=>{const e=r._next();return e.value&&(e.value=n(e.value)),e}),r}const z=Array.prototype;function G(e,t,n,i,r,s){const a=j(e),o=a!==e&&!Ee(e),l=a[t];if(l!==z[t]){const t=l.apply(e,s);return o?xe(t):t}let u=n;a!==e&&(o?u=function(t,i){return n.call(this,xe(t),i,e)}:n.length>2&&(u=function(t,i){return n.call(this,t,i,e)}));const c=l.call(a,u,i);return o&&r?r(c):c}function q(e,t,n,i){const r=j(e);let s=n;return r!==e&&(Ee(e)?n.length>3&&(s=function(t,i,r){return n.call(this,t,i,r,e)}):s=function(t,i,r){return n.call(this,t,xe(i),r,e)}),r[t](s,...i)}function W(e,t,n){const i=Ce(e);U(i,"iterate",P);const r=i[t](...n);return-1!==r&&!1!==r||!Ae(n[0])?r:(n[0]=Ce(n[0]),i[t](...n))}function X(e,t,n=[]){C(),m();const i=Ce(e)[t].apply(e,n);return y(),I(),i}const K=(0,i.pD)("__proto__,__v_isRef,__isVue"),Y=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(i.Bm));function $(e){(0,i.Bm)(e)||(e=String(e));const t=Ce(this);return U(t,"has",e),t.hasOwnProperty(e)}class Q{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e["__v_skip"];const r=this._isReadonly,s=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return s;if("__v_raw"===t)return n===(r?s?ge:fe:s?pe:he).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=(0,i.cy)(e);if(!r){let e;if(a&&(e=V[t]))return e;if("hasOwnProperty"===t)return $}const o=Reflect.get(e,t,Me(e)?e:n);return((0,i.Bm)(t)?Y.has(t):K(t))?o:(r||U(e,"get",t),s?o:Me(o)?a&&(0,i.yI)(t)?o:o.value:(0,i.Gv)(o)?r?Te(o):ve(o):o)}}class Z extends Q{constructor(e=!1){super(!1,e)}set(e,t,n,r){let s=e[t];if(!this._isShallow){const t=Se(s);if(Ee(n)||Se(n)||(s=Ce(s),n=Ce(n)),!(0,i.cy)(e)&&Me(s)&&!Me(n))return!t&&(s.value=n,!0)}const a=(0,i.cy)(e)&&(0,i.yI)(t)?Number(t)<e.length:(0,i.$3)(e,t),o=Reflect.set(e,t,n,Me(e)?e:r);return e===Ce(r)&&(a?(0,i.$H)(n,s)&&B(e,"set",t,n,s):B(e,"add",t,n)),o}deleteProperty(e,t){const n=(0,i.$3)(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&B(e,"delete",t,void 0,r),s}has(e,t){const n=Reflect.has(e,t);return(0,i.Bm)(t)&&Y.has(t)||U(e,"has",t),n}ownKeys(e){return U(e,"iterate",(0,i.cy)(e)?"length":N),Reflect.ownKeys(e)}}class J extends Q{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const ee=new Z,te=new J,ne=new Z(!0),ie=e=>e,re=e=>Reflect.getPrototypeOf(e);function se(e,t,n){return function(...r){const s=this["__v_raw"],a=Ce(s),o=(0,i.CE)(a),l="entries"===e||e===Symbol.iterator&&o,u="keys"===e&&o,c=s[e](...r),d=n?ie:t?ke:xe;return!t&&U(a,"iterate",u?L:N),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function ae(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function oe(e,t){const n={get(n){const r=this["__v_raw"],s=Ce(r),a=Ce(n);e||((0,i.$H)(n,a)&&U(s,"get",n),U(s,"get",a));const{has:o}=re(s),l=t?ie:e?ke:xe;return o.call(s,n)?l(r.get(n)):o.call(s,a)?l(r.get(a)):void(r!==s&&r.get(n))},get size(){const t=this["__v_raw"];return!e&&U(Ce(t),"iterate",N),Reflect.get(t,"size",t)},has(t){const n=this["__v_raw"],r=Ce(n),s=Ce(t);return e||((0,i.$H)(t,s)&&U(r,"has",t),U(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)},forEach(n,i){const r=this,s=r["__v_raw"],a=Ce(s),o=t?ie:e?ke:xe;return!e&&U(a,"iterate",N),s.forEach((e,t)=>n.call(i,o(e),o(t),r))}};(0,i.X$)(n,e?{add:ae("add"),set:ae("set"),delete:ae("delete"),clear:ae("clear")}:{add(e){t||Ee(e)||Se(e)||(e=Ce(e));const n=Ce(this),i=re(n),r=i.has.call(n,e);return r||(n.add(e),B(n,"add",e,e)),this},set(e,n){t||Ee(n)||Se(n)||(n=Ce(n));const r=Ce(this),{has:s,get:a}=re(r);let o=s.call(r,e);o||(e=Ce(e),o=s.call(r,e));const l=a.call(r,e);return r.set(e,n),o?(0,i.$H)(n,l)&&B(r,"set",e,n,l):B(r,"add",e,n),this},delete(e){const t=Ce(this),{has:n,get:i}=re(t);let r=n.call(t,e);r||(e=Ce(e),r=n.call(t,e));const s=i?i.call(t,e):void 0,a=t.delete(e);return r&&B(t,"delete",e,void 0,s),a},clear(){const e=Ce(this),t=0!==e.size,n=void 0,i=e.clear();return t&&B(e,"clear",void 0,void 0,n),i}});const r=["keys","values","entries",Symbol.iterator];return r.forEach(i=>{n[i]=se(i,e,t)}),n}function le(e,t){const n=oe(e,t);return(t,r,s)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,i.$3)(n,r)&&r in t?n:t,r,s)}const ue={get:le(!1,!1)},ce={get:le(!1,!0)},de={get:le(!0,!1)};const he=new WeakMap,pe=new WeakMap,fe=new WeakMap,ge=new WeakMap;function me(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ye(e){return e["__v_skip"]||!Object.isExtensible(e)?0:me((0,i.Zf)(e))}function ve(e){return Se(e)?e:_e(e,!1,ee,ue,he)}function be(e){return _e(e,!1,ne,ce,pe)}function Te(e){return _e(e,!0,te,de,fe)}function _e(e,t,n,r,s){if(!(0,i.Gv)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const a=ye(e);if(0===a)return e;const o=s.get(e);if(o)return o;const l=new Proxy(e,2===a?r:n);return s.set(e,l),l}function we(e){return Se(e)?we(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Se(e){return!(!e||!e["__v_isReadonly"])}function Ee(e){return!(!e||!e["__v_isShallow"])}function Ae(e){return!!e&&!!e["__v_raw"]}function Ce(e){const t=e&&e["__v_raw"];return t?Ce(t):e}function Ie(e){return!(0,i.$3)(e,"__v_skip")&&Object.isExtensible(e)&&(0,i.yQ)(e,"__v_skip",!0),e}const xe=e=>(0,i.Gv)(e)?ve(e):e,ke=e=>(0,i.Gv)(e)?Te(e):e;function Me(e){return!!e&&!0===e["__v_isRef"]}function De(e){return Oe(e,!1)}function Re(e){return Oe(e,!0)}function Oe(e,t){return Me(e)?e:new Ne(e,t)}class Ne{constructor(e,t){this.dep=new D,this["__v_isRef"]=!0,this["__v_isShallow"]=!1,this._rawValue=t?e:Ce(e),this._value=t?e:xe(e),this["__v_isShallow"]=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this["__v_isShallow"]||Ee(e)||Se(e);e=n?e:Ce(e),(0,i.$H)(e,t)&&(this._rawValue=e,this._value=n?e:xe(e),this.dep.trigger())}}function Le(e){return Me(e)?e.value:e}function Pe(e){return(0,i.Tn)(e)?e():Le(e)}const Ue={get:(e,t,n)=>"__v_raw"===t?e:Le(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Me(r)&&!Me(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Be(e){return we(e)?e:new Proxy(e,Ue)}class Fe{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new D(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=k-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||s===this))return g(this,!0),!0}get value(){const e=this.dep.track();return _(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function je(e,t,n=!1){let r,s;(0,i.Tn)(e)?r=e:(r=e.get,s=e.set);const a=new Fe(r,s,n);return a}const Ve={},He=new WeakMap;let ze;function Ge(e,t=!1,n=ze){if(n){let t=He.get(n);t||He.set(n,t=[]),t.push(e)}else 0}function qe(e,t,n=i.MZ){const{immediate:r,deep:s,once:a,scheduler:o,augmentJob:u,call:c}=n,h=e=>s?e:Ee(e)||!1===s||0===s?We(e,1):We(e);let p,f,g,m,y=!1,v=!1;if(Me(e)?(f=()=>e.value,y=Ee(e)):we(e)?(f=()=>h(e),y=!0):(0,i.cy)(e)?(v=!0,y=e.some(e=>we(e)||Ee(e)),f=()=>e.map(e=>Me(e)?e.value:we(e)?h(e):(0,i.Tn)(e)?c?c(e,2):e():void 0)):f=(0,i.Tn)(e)?t?c?()=>c(e,2):e:()=>{if(g){C();try{g()}finally{I()}}const t=ze;ze=p;try{return c?c(e,3,[m]):e(m)}finally{ze=t}}:i.tE,t&&s){const e=f,t=!0===s?1/0:s;f=()=>We(e(),t)}const b=l(),T=()=>{p.stop(),b&&b.active&&(0,i.TF)(b.effects,p)};if(a&&t){const e=t;t=(...t)=>{e(...t),T()}}let _=v?new Array(e.length).fill(Ve):Ve;const w=e=>{if(1&p.flags&&(p.dirty||e))if(t){const e=p.run();if(s||y||(v?e.some((e,t)=>(0,i.$H)(e,_[t])):(0,i.$H)(e,_))){g&&g();const n=ze;ze=p;try{const n=[e,_===Ve?void 0:v&&_[0]===Ve?[]:_,m];_=e,c?c(t,3,n):t(...n)}finally{ze=n}}}else p.run()};return u&&u(w),p=new d(f),p.scheduler=o?()=>o(w,!1):w,m=e=>Ge(e,!1,p),g=p.onStop=()=>{const e=He.get(p);if(e){if(c)c(e,4);else for(const t of e)t();He.delete(p)}},t?r?w(!0):_=p.run():o?o(w.bind(null,!0),!0):p.run(),T.pause=p.pause.bind(p),T.resume=p.resume.bind(p),T.stop=T,T}function We(e,t=1/0,n){if(t<=0||!(0,i.Gv)(e)||e["__v_skip"])return e;if(n=n||new Set,n.has(e))return e;if(n.add(e),t--,Me(e))We(e.value,t,n);else if((0,i.cy)(e))for(let i=0;i<e.length;i++)We(e[i],t,n);else if((0,i.vM)(e)||(0,i.CE)(e))e.forEach(e=>{We(e,t,n)});else if((0,i.Qd)(e)){for(const i in e)We(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&We(e[i],t,n)}return e}},283:function(e,t,n){"use strict";var i=n(9504),r=n(9039),s=n(4901),a=n(9297),o=n(3724),l=n(350).CONFIGURABLE,u=n(3706),c=n(1181),d=c.enforce,h=c.get,p=String,f=Object.defineProperty,g=i("".slice),m=i("".replace),y=i([].join),v=o&&!r(function(){return 8!==f(function(){},"length",{value:8}).length}),b=String(String).split("String"),T=e.exports=function(e,t,n){"Symbol("===g(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(o?f(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&a(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?o&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var i=d(e);return a(i,"source")||(i.source=y(b,"string"==typeof t?t:"")),e};Function.prototype.toString=T(function(){return s(this)&&h(this).source||u(this)},"toString")},350:function(e,t,n){"use strict";var i=n(3724),r=n(9297),s=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,o=r(s,"name"),l=o&&"something"===function(){}.name,u=o&&(!i||i&&a(s,"name").configurable);e.exports={EXISTS:o,PROPER:l,CONFIGURABLE:u}},397:function(e,t,n){"use strict";var i=n(7751);e.exports=i("document","documentElement")},421:function(e){"use strict";e.exports={}},507:function(e,t,n){"use strict";var i=n(9565);e.exports=function(e,t,n){var r,s,a=n?e:e.iterator,o=e.next;while(!(r=i(o,a)).done)if(s=t(r.value),void 0!==s)return s}},531:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(9306),a=n(8551),o=n(1767),l=n(8646),u=n(9462),c=n(9539),d=n(6395),h=n(684),p=n(4549),f=!d&&!h("flatMap",function(){}),g=!d&&!f&&p("flatMap",TypeError),m=d||f||g,y=u(function(){var e,t,n=this.iterator,i=this.mapper;while(1){if(t=this.inner)try{if(e=a(r(t.next,t.iterator)),!e.done)return e.value;this.inner=null}catch(s){c(n,"throw",s)}if(e=a(r(this.next,n)),this.done=!!e.done)return;try{this.inner=l(i(e.value,this.counter++),!1)}catch(s){c(n,"throw",s)}}});i({target:"Iterator",proto:!0,real:!0,forced:m},{flatMap:function(e){a(this);try{s(e)}catch(t){c(this,"throw",t)}return g?r(g,this,e):new y(o(this),{mapper:e,inner:null})}})},616:function(e,t,n){"use strict";var i=n(9039);e.exports=!i(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},655:function(e,t,n){"use strict";var i=n(6955),r=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},679:function(e,t,n){"use strict";var i=n(1625),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw new r("Incorrect invocation")}},684:function(e){"use strict";e.exports=function(e,t){var n="function"==typeof Iterator&&Iterator.prototype[e];if(n)try{n.call({next:null},t).next()}catch(i){return!0}}},713:function(e,t,n){var i=n(8653),r=n(7801),s=n(8982),a=n(5157),o=r.DOMImplementation,l=i.NAMESPACE,u=a.ParseError,c=a.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function h(e){this.options=e||{locator:{}}}function p(e,t,n){if(!e){if(t instanceof f)return t;e=t}var i={},r=e instanceof Function;function s(t){var s=e[t];!s&&r&&(s=2==e.length?function(n){e(t,n)}:e),i[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+m(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),i}function f(){this.cdata=!1}function g(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function m(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function y(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function v(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}h.prototype.parseFromString=function(e,t){var n=this.options,i=new c,r=n.domBuilder||new f,a=n.errorHandler,o=n.locator,u=n.xmlns||{},h=/\/x?html?$/.test(t),g=h?s.HTML_ENTITIES:s.XML_ENTITIES;o&&r.setDocumentLocator(o),i.errorHandler=p(a,r,o),i.domBuilder=n.domBuilder||r,h&&(u[""]=l.HTML),u.xml=u.xml||l.XML;var m=n.normalizeLineEndings||d;return e&&"string"===typeof e?i.parse(m(e),u,g):i.errorHandler.error("invalid doc source"),r.doc},f.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,s=r.createElementNS(e,n||t),a=i.length;v(this,s),this.currentElement=s,this.locator&&g(this.locator,s);for(var o=0;o<a;o++){e=i.getURI(o);var l=i.getValue(o),u=(n=i.getQName(o),r.createAttributeNS(e,n));this.locator&&g(i.getLocator(o),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&g(this.locator,n),v(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=y.apply(this,arguments),e){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&g(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=y.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&g(this.locator,i),v(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&g(this.locator,r),v(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,m(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,m(this.locator))},fatalError:function(e){throw new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){f.prototype[e]=function(){return null}}),t.DOMParser=h},741:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},757:function(e,t,n){"use strict";var i=n(7751),r=n(4901),s=n(1625),a=n(7040),o=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&s(t.prototype,o(e))}},851:function(e,t,n){"use strict";var i=n(6955),r=n(5966),s=n(4117),a=n(6269),o=n(8227),l=o("iterator");e.exports=function(e){if(!s(e))return r(e,l)||r(e,"@@iterator")||a[i(e)]}},1072:function(e,t,n){"use strict";var i=n(1828),r=n(8727);e.exports=Object.keys||function(e){return i(e,r)}},1108:function(e,t,n){"use strict";var i=n(6955);e.exports=function(e){var t=i(e);return"BigInt64Array"===t||"BigUint64Array"===t}},1148:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(2652),a=n(9306),o=n(8551),l=n(1767),u=n(9539),c=n(4549),d=c("every",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(e){o(this);try{a(e)}catch(i){u(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;return!s(t,function(t,i){if(!e(t,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:function(e,t,n){"use strict";var i,r,s,a=n(8622),o=n(4576),l=n(34),u=n(6699),c=n(9297),d=n(7629),h=n(6119),p=n(421),f="Object already initialized",g=o.TypeError,m=o.WeakMap,y=function(e){return s(e)?r(e):i(e,{})},v=function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return n}};if(a||d.state){var b=d.state||(d.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,i=function(e,t){if(b.has(e))throw new g(f);return t.facade=e,b.set(e,t),t},r=function(e){return b.get(e)||{}},s=function(e){return b.has(e)}}else{var T=h("state");p[T]=!0,i=function(e,t){if(c(e,T))throw new g(f);return t.facade=e,u(e,T,t),t},r=function(e){return c(e,T)?e[T]:{}},s=function(e){return c(e,T)}}e.exports={set:i,get:r,has:s,enforce:y,getterFor:v}},1241:function(e,t){"use strict";t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n}},1291:function(e,t,n){"use strict";var i=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:i(t)}},1385:function(e,t,n){"use strict";var i=n(9539);e.exports=function(e,t,n){for(var r=e.length-1;r>=0;r--)if(void 0!==e[r])try{n=i(e[r].iterator,t,n)}catch(s){t="throw",n=s}if("throw"===t)throw n;return n}},1387:function(e,t,n){"use strict";n.d(t,{LA:function(){return le},aE:function(){return rt},lq:function(){return ot},rd:function(){return at}});n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(6768),r=n(144);
/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof document;function a(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function o(e){return e.__esModule||"Module"===e[Symbol.toStringTag]||e.default&&a(e.default)}const l=Object.assign;function u(e,t){const n={};for(const i in t){const r=t[i];n[i]=d(r)?r.map(e):e(r)}return n}const c=()=>{},d=Array.isArray;const h=/#/g,p=/&/g,f=/\//g,g=/=/g,m=/\?/g,y=/\+/g,v=/%5B/g,b=/%5D/g,T=/%5E/g,_=/%60/g,w=/%7B/g,S=/%7C/g,E=/%7D/g,A=/%20/g;function C(e){return encodeURI(""+e).replace(S,"|").replace(v,"[").replace(b,"]")}function I(e){return C(e).replace(w,"{").replace(E,"}").replace(T,"^")}function x(e){return C(e).replace(y,"%2B").replace(A,"+").replace(h,"%23").replace(p,"%26").replace(_,"`").replace(w,"{").replace(E,"}").replace(T,"^")}function k(e){return x(e).replace(g,"%3D")}function M(e){return C(e).replace(h,"%23").replace(m,"%3F")}function D(e){return null==e?"":M(e).replace(f,"%2F")}function R(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const O=/\/$/,N=e=>e.replace(O,"");function L(e,t,n="/"){let i,r={},s="",a="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,o>-1?o:t.length),r=e(s)),o>-1&&(i=i||t.slice(0,o),a=t.slice(o,t.length)),i=z(null!=i?i:t,n),{fullPath:i+(s&&"?")+s+a,path:i,query:r,hash:R(a)}}function P(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function U(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function B(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&F(t.matched[i],n.matched[r])&&j(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function F(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function j(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!V(e[n],t[n]))return!1;return!0}function V(e,t){return d(e)?H(e,t):d(t)?H(t,e):e===t}function H(e,t){return d(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}function z(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];".."!==r&&"."!==r||i.push("");let s,a,o=n.length-1;for(s=0;s<i.length;s++)if(a=i[s],"."!==a){if(".."!==a)break;o>1&&o--}return n.slice(0,o).join("/")+"/"+i.slice(s).join("/")}const G={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var q,W;(function(e){e["pop"]="pop",e["push"]="push"})(q||(q={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(W||(W={}));function X(e){if(!e)if(s){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),N(e)}const K=/^[^#]+#/;function Y(e,t){return e.replace(K,"#")+t}function $(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Q=()=>({left:window.scrollX,top:window.scrollY});function Z(e){let t;if("el"in e){const n=e.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=$(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function J(e,t){const n=history.state?history.state.position-t:-1;return n+e}const ee=new Map;function te(e,t){ee.set(e,t)}function ne(e){const t=ee.get(e);return ee.delete(e),t}let ie=()=>location.protocol+"//"+location.host;function re(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let t=r.includes(e.slice(s))?e.slice(s).length:1,n=r.slice(t);return"/"!==n[0]&&(n="/"+n),U(n,"")}const a=U(n,e);return a+i+r}function se(e,t,n,i){let r=[],s=[],a=null;const o=({state:s})=>{const o=re(e,location),l=n.value,u=t.value;let c=0;if(s){if(n.value=o,t.value=s,a&&a===l)return void(a=null);c=u?s.position-u.position:0}else i(o);r.forEach(e=>{e(n.value,l,{delta:c,type:q.pop,direction:c?c>0?W.forward:W.back:W.unknown})})};function u(){a=n.value}function c(e){r.push(e);const t=()=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)};return s.push(t),t}function d(){const{history:e}=window;e.state&&e.replaceState(l({},e.state,{scroll:Q()}),"")}function h(){for(const e of s)e();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:c,destroy:h}}function ae(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Q():null}}function oe(e){const{history:t,location:n}=window,i={value:re(e,n)},r={value:t.state};function s(i,s,a){const o=e.indexOf("#"),l=o>-1?(n.host&&document.querySelector("base")?e:e.slice(o))+i:ie()+e+i;try{t[a?"replaceState":"pushState"](s,"",l),r.value=s}catch(u){console.error(u),n[a?"replace":"assign"](l)}}function a(e,n){const a=l({},t.state,ae(r.value.back,e,r.value.forward,!0),n,{position:r.value.position});s(e,a,!0),i.value=e}function o(e,n){const a=l({},r.value,t.state,{forward:e,scroll:Q()});s(a.current,a,!0);const o=l({},ae(i.value,e,null),{position:a.position+1},n);s(e,o,!1),i.value=e}return r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:o,replace:a}}function le(e){e=X(e);const t=oe(e),n=se(e,t.state,t.location,t.replace);function i(e,t=!0){t||n.pauseListeners(),history.go(e)}const r=l({location:"",base:e,go:i,createHref:Y.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function ue(e){return"string"===typeof e||e&&"object"===typeof e}function ce(e){return"string"===typeof e||"symbol"===typeof e}const de=Symbol("");var he;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(he||(he={}));function pe(e,t){return l(new Error,{type:e,[de]:!0},t)}function fe(e,t){return e instanceof Error&&de in e&&(null==t||!!(e.type&t))}const ge="[^/]+?",me={sensitive:!1,strict:!1,start:!0,end:!0},ye=/[.+*?^${}()[\]/\\]/g;function ve(e,t){const n=l({},me,t),i=[];let r=n.start?"^":"";const s=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let t=0;t<l.length;t++){const i=l[t];let a=40+(n.sensitive?.25:0);if(0===i.type)t||(r+="/"),r+=i.value.replace(ye,"\\$&"),a+=40;else if(1===i.type){const{value:e,repeatable:n,optional:o,regexp:u}=i;s.push({name:e,repeatable:n,optional:o});const d=u||ge;if(d!==ge){a+=10;try{new RegExp(`(${d})`)}catch(c){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+c.message)}}let h=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(h=o&&l.length<2?`(?:/${h})`:"/"+h),o&&(h+="?"),r+=h,a+=20,o&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}e.push(a)}i.push(e)}if(n.strict&&n.end){const e=i.length-1;i[e][i[e].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,n.sensitive?"":"i");function o(e){const t=e.match(a),n={};if(!t)return null;for(let i=1;i<t.length;i++){const e=t[i]||"",r=s[i-1];n[r.name]=e&&r.repeatable?e.split("/"):e}return n}function u(t){let n="",i=!1;for(const r of e){i&&n.endsWith("/")||(n+="/"),i=!1;for(const e of r)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:a,optional:o}=e,l=s in t?t[s]:"";if(d(l)&&!a)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const u=d(l)?l.join("/"):l;if(!u){if(!o)throw new Error(`Missing required param "${s}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=u}}return n||"/"}return{re:a,score:i,keys:s,parse:o,stringify:u}}function be(e,t){let n=0;while(n<e.length&&n<t.length){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function Te(e,t){let n=0;const i=e.score,r=t.score;while(n<i.length&&n<r.length){const e=be(i[n],r[n]);if(e)return e;n++}if(1===Math.abs(r.length-i.length)){if(_e(i))return 1;if(_e(r))return-1}return r.length-i.length}function _e(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const we={type:0,value:""},Se=/[a-zA-Z0-9_]/;function Ee(e){if(!e)return[[]];if("/"===e)return[[we]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,i=n;const r=[];let s;function a(){s&&r.push(s),s=[]}let o,l=0,u="",c="";function d(){u&&(0===n?s.push({type:0,value:u}):1===n||2===n||3===n?(s.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),u="")}function h(){u+=o}while(l<e.length)if(o=e[l++],"\\"!==o||2===n)switch(n){case 0:"/"===o?(u&&d(),a()):":"===o?(d(),n=1):h();break;case 4:h(),n=i;break;case 1:"("===o?n=2:Se.test(o)?h():(d(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--);break;case 2:")"===o?"\\"==c[c.length-1]?c=c.slice(0,-1)+o:n=3:c+=o;break;case 3:d(),n=0,"*"!==o&&"?"!==o&&"+"!==o&&l--,c="";break;default:t("Unknown state");break}else i=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),r}function Ae(e,t,n){const i=ve(Ee(e.path),n);const r=l(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf===!t.record.aliasOf&&t.children.push(r),r}function Ce(e,t){const n=[],i=new Map;function r(e){return i.get(e)}function s(e,n,i){const r=!i,o=xe(e);o.aliasOf=i&&i.record;const d=Re(t,e),h=[o];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)h.push(xe(l({},o,{components:i?i.record.components:o.components,path:e,aliasOf:i?i.record:o})))}let p,f;for(const t of h){const{path:l}=t;if(n&&"/"!==l[0]){const e=n.record.path,i="/"===e[e.length-1]?"":"/";t.path=n.record.path+(l&&i+l)}if(p=Ae(t,n,d),i?i.alias.push(p):(f=f||p,f!==p&&f.alias.push(p),r&&e.name&&!Me(p)&&a(e.name)),Le(p)&&u(p),o.children){const e=o.children;for(let t=0;t<e.length;t++)s(e[t],p,i&&i.children[t])}i=i||p}return f?()=>{a(f)}:c}function a(e){if(ce(e)){const t=i.get(e);t&&(i.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&i.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function o(){return n}function u(e){const t=Oe(e,n);n.splice(t,0,e),e.record.name&&!Me(e)&&i.set(e.record.name,e)}function d(e,t){let r,s,a,o={};if("name"in e&&e.name){if(r=i.get(e.name),!r)throw pe(1,{location:e});0,a=r.record.name,o=l(Ie(t.params,r.keys.filter(e=>!e.optional).concat(r.parent?r.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&Ie(e.params,r.keys.map(e=>e.name))),s=r.stringify(o)}else if(null!=e.path)s=e.path,r=n.find(e=>e.re.test(s)),r&&(o=r.parse(s),a=r.record.name);else{if(r=t.name?i.get(t.name):n.find(e=>e.re.test(t.path)),!r)throw pe(1,{location:e,currentLocation:t});a=r.record.name,o=l({},t.params,e.params),s=r.stringify(o)}const u=[];let c=r;while(c)u.unshift(c.record),c=c.parent;return{name:a,path:s,params:o,matched:u,meta:De(u)}}function h(){n.length=0,i.clear()}return t=Re({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>s(e)),{addRoute:s,resolve:d,removeRoute:a,clearRoutes:h,getRoutes:o,getRecordMatcher:r}}function Ie(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function xe(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ke(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ke(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]="object"===typeof n?n[i]:n;return t}function Me(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function De(e){return e.reduce((e,t)=>l(e,t.meta),{})}function Re(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Oe(e,t){let n=0,i=t.length;while(n!==i){const r=n+i>>1,s=Te(e,t[r]);s<0?i=r:n=r+1}const r=Ne(e);return r&&(i=t.lastIndexOf(r,i-1)),i}function Ne(e){let t=e;while(t=t.parent)if(Le(t)&&0===Te(e,t))return t}function Le({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Pe(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],i=(n?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const e=i[r].replace(y," "),n=e.indexOf("="),s=R(n<0?e:e.slice(0,n)),a=n<0?null:R(e.slice(n+1));if(s in t){let e=t[s];d(e)||(e=t[s]=[e]),e.push(a)}else t[s]=a}return t}function Ue(e){let t="";for(let n in e){const i=e[n];if(n=k(n),null==i){void 0!==i&&(t+=(t.length?"&":"")+n);continue}const r=d(i)?i.map(e=>e&&x(e)):[i&&x(i)];r.forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function Be(e){const t={};for(const n in e){const i=e[n];void 0!==i&&(t[n]=d(i)?i.map(e=>null==e?null:""+e):null==i?i:""+i)}return t}const Fe=Symbol(""),je=Symbol(""),Ve=Symbol(""),He=Symbol(""),ze=Symbol("");function Ge(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function qe(e,t,n,i,r,s=e=>e()){const a=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,l)=>{const u=e=>{!1===e?l(pe(4,{from:n,to:t})):e instanceof Error?l(e):ue(e)?l(pe(2,{from:t,to:e})):(a&&i.enterCallbacks[r]===a&&"function"===typeof e&&a.push(e),o())},c=s(()=>e.call(i&&i.instances[r],t,n,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(e=>l(e))})}function We(e,t,n,i,r=e=>e()){const s=[];for(const l of e){0;for(const e in l.components){let u=l.components[e];if("beforeRouteEnter"===t||l.instances[e])if(a(u)){const a=u.__vccOpts||u,o=a[t];o&&s.push(qe(o,n,i,l,e,r))}else{let a=u();0,s.push(()=>a.then(s=>{if(!s)throw new Error(`Couldn't resolve component "${e}" at "${l.path}"`);const a=o(s)?s.default:s;l.mods[e]=s,l.components[e]=a;const u=a.__vccOpts||a,c=u[t];return c&&qe(c,n,i,l,e,r)()}))}}}return s}function Xe(e){const t=(0,i.WQ)(Ve),n=(0,i.WQ)(He);const s=(0,i.EW)(()=>{const n=(0,r.R1)(e.to);return t.resolve(n)}),a=(0,i.EW)(()=>{const{matched:e}=s.value,{length:t}=e,i=e[t-1],r=n.matched;if(!i||!r.length)return-1;const a=r.findIndex(F.bind(null,i));if(a>-1)return a;const o=Je(e[t-2]);return t>1&&Je(i)===o&&r[r.length-1].path!==o?r.findIndex(F.bind(null,e[t-2])):a}),o=(0,i.EW)(()=>a.value>-1&&Ze(n.params,s.value.params)),l=(0,i.EW)(()=>a.value>-1&&a.value===n.matched.length-1&&j(n.params,s.value.params));function u(n={}){if(Qe(n)){const n=t[(0,r.R1)(e.replace)?"replace":"push"]((0,r.R1)(e.to)).catch(c);return e.viewTransition&&"undefined"!==typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>n),n}return Promise.resolve()}return{route:s,href:(0,i.EW)(()=>s.value.href),isActive:o,isExactActive:l,navigate:u}}function Ke(e){return 1===e.length?e[0]:e}const Ye=(0,i.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Xe,setup(e,{slots:t}){const n=(0,r.Kh)(Xe(e)),{options:s}=(0,i.WQ)(Ve),a=(0,i.EW)(()=>({[et(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[et(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Ke(t.default(n));return e.custom?r:(0,i.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},r)}}}),$e=Ye;function Qe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ze(e,t){for(const n in t){const i=t[n],r=e[n];if("string"===typeof i){if(i!==r)return!1}else if(!d(r)||r.length!==i.length||i.some((e,t)=>e!==r[t]))return!1}return!0}function Je(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const et=(e,t,n)=>null!=e?e:null!=t?t:n,tt=(0,i.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=(0,i.WQ)(ze),a=(0,i.EW)(()=>e.route||s.value),o=(0,i.WQ)(je,0),u=(0,i.EW)(()=>{let e=(0,r.R1)(o);const{matched:t}=a.value;let n;while((n=t[e])&&!n.components)e++;return e}),c=(0,i.EW)(()=>a.value.matched[u.value]);(0,i.Gt)(je,(0,i.EW)(()=>u.value+1)),(0,i.Gt)(Fe,c),(0,i.Gt)(ze,a);const d=(0,r.KR)();return(0,i.wB)(()=>[d.value,c.value,e.name],([e,t,n],[i,r,s])=>{t&&(t.instances[n]=e,r&&r!==t&&e&&e===i&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&F(t,r)&&i||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const r=a.value,s=e.name,o=c.value,u=o&&o.components[s];if(!u)return nt(n.default,{Component:u,route:r});const h=o.props[s],p=h?!0===h?r.params:"function"===typeof h?h(r):h:null,f=e=>{e.component.isUnmounted&&(o.instances[s]=null)},g=(0,i.h)(u,l({},p,t,{onVnodeUnmounted:f,ref:d}));return nt(n.default,{Component:g,route:r})||g}}});function nt(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const it=tt;function rt(e){const t=Ce(e.routes,e),n=e.parseQuery||Pe,a=e.stringifyQuery||Ue,o=e.history;const h=Ge(),p=Ge(),f=Ge(),g=(0,r.IJ)(G);let m=G;s&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=u.bind(null,e=>""+e),v=u.bind(null,D),b=u.bind(null,R);function T(e,n){let i,r;return ce(e)?(i=t.getRecordMatcher(e),r=n):r=e,t.addRoute(r,i)}function _(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function w(){return t.getRoutes().map(e=>e.record)}function S(e){return!!t.getRecordMatcher(e)}function E(e,i){if(i=l({},i||g.value),"string"===typeof e){const r=L(n,e,i.path),s=t.resolve({path:r.path},i),a=o.createHref(r.fullPath);return l(r,s,{params:b(s.params),hash:R(r.hash),redirectedFrom:void 0,href:a})}let r;if(null!=e.path)r=l({},e,{path:L(n,e.path,i.path).path});else{const t=l({},e.params);for(const e in t)null==t[e]&&delete t[e];r=l({},e,{params:v(t)}),i.params=v(i.params)}const s=t.resolve(r,i),u=e.hash||"";s.params=y(b(s.params));const c=P(a,l({},e,{hash:I(u),path:s.path})),d=o.createHref(c);return l({fullPath:c,hash:u,query:a===Ue?Be(e.query):e.query||{}},s,{redirectedFrom:void 0,href:d})}function A(e){return"string"===typeof e?L(n,e,g.value.path):l({},e)}function C(e,t){if(m!==e)return pe(8,{from:t,to:e})}function x(e){return O(e)}function k(e){return x(l(A(e),{replace:!0}))}function M(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let i="function"===typeof n?n(e):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=A(i):{path:i},i.params={}),l({query:e.query,hash:e.hash,params:null!=i.path?{}:e.params},i)}}function O(e,t){const n=m=E(e),i=g.value,r=e.state,s=e.force,o=!0===e.replace,u=M(n);if(u)return O(l(A(u),{state:"object"===typeof u?l({},r,u.state):r,force:s,replace:o}),t||n);const c=n;let d;return c.redirectedFrom=t,!s&&B(a,i,n)&&(d=pe(16,{to:c,from:i}),ie(i,i,!0,!1)),(d?Promise.resolve(d):F(c,i)).catch(e=>fe(e)?fe(e,2)?e:ee(e):Y(e,c,i)).then(e=>{if(e){if(fe(e,2))return O(l({replace:o},A(e.to),{state:"object"===typeof e.to?l({},r,e.to.state):r,force:s}),t||c)}else e=V(c,i,!0,o,r);return j(c,i,e),e})}function N(e,t){const n=C(e,t);return n?Promise.reject(n):Promise.resolve()}function U(e){const t=ae.values().next().value;return t&&"function"===typeof t.runWithContext?t.runWithContext(e):e()}function F(e,t){let n;const[i,r,s]=st(e,t);n=We(i.reverse(),"beforeRouteLeave",e,t);for(const o of i)o.leaveGuards.forEach(i=>{n.push(qe(i,e,t))});const a=N.bind(null,e,t);return n.push(a),le(n).then(()=>{n=[];for(const i of h.list())n.push(qe(i,e,t));return n.push(a),le(n)}).then(()=>{n=We(r,"beforeRouteUpdate",e,t);for(const i of r)i.updateGuards.forEach(i=>{n.push(qe(i,e,t))});return n.push(a),le(n)}).then(()=>{n=[];for(const i of s)if(i.beforeEnter)if(d(i.beforeEnter))for(const r of i.beforeEnter)n.push(qe(r,e,t));else n.push(qe(i.beforeEnter,e,t));return n.push(a),le(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=We(s,"beforeRouteEnter",e,t,U),n.push(a),le(n))).then(()=>{n=[];for(const i of p.list())n.push(qe(i,e,t));return n.push(a),le(n)}).catch(e=>fe(e,8)?e:Promise.reject(e))}function j(e,t,n){f.list().forEach(i=>U(()=>i(e,t,n)))}function V(e,t,n,i,r){const a=C(e,t);if(a)return a;const u=t===G,c=s?history.state:{};n&&(i||u?o.replace(e.fullPath,l({scroll:u&&c&&c.scroll},r)):o.push(e.fullPath,r)),g.value=e,ie(e,t,n,u),ee()}let H;function z(){H||(H=o.listen((e,t,n)=>{if(!oe.listening)return;const i=E(e),r=M(i);if(r)return void O(l(r,{replace:!0,force:!0}),i).catch(c);m=i;const a=g.value;s&&te(J(a.fullPath,n.delta),Q()),F(i,a).catch(e=>fe(e,12)?e:fe(e,2)?(O(l(A(e.to),{force:!0}),i).then(e=>{fe(e,20)&&!n.delta&&n.type===q.pop&&o.go(-1,!1)}).catch(c),Promise.reject()):(n.delta&&o.go(-n.delta,!1),Y(e,i,a))).then(e=>{e=e||V(i,a,!1),e&&(n.delta&&!fe(e,8)?o.go(-n.delta,!1):n.type===q.pop&&fe(e,20)&&o.go(-1,!1)),j(i,a,e)}).catch(c)}))}let W,X=Ge(),K=Ge();function Y(e,t,n){ee(e);const i=K.list();return i.length?i.forEach(i=>i(e,t,n)):console.error(e),Promise.reject(e)}function $(){return W&&g.value!==G?Promise.resolve():new Promise((e,t)=>{X.add([e,t])})}function ee(e){return W||(W=!e,z(),X.list().forEach(([t,n])=>e?n(e):t()),X.reset()),e}function ie(t,n,r,a){const{scrollBehavior:o}=e;if(!s||!o)return Promise.resolve();const l=!r&&ne(J(t.fullPath,0))||(a||!r)&&history.state&&history.state.scroll||null;return(0,i.dY)().then(()=>o(t,n,l)).then(e=>e&&Z(e)).catch(e=>Y(e,t,n))}const re=e=>o.go(e);let se;const ae=new Set,oe={currentRoute:g,listening:!0,addRoute:T,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:S,getRoutes:w,resolve:E,options:e,push:x,replace:k,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:h.add,beforeResolve:p.add,afterEach:f.add,onError:K.add,isReady:$,install(e){const t=this;e.component("RouterLink",$e),e.component("RouterView",it),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.R1)(g)}),s&&!se&&g.value===G&&(se=!0,x(o.location).catch(e=>{0}));const n={};for(const r in G)Object.defineProperty(n,r,{get:()=>g.value[r],enumerable:!0});e.provide(Ve,t),e.provide(He,(0,r.Gc)(n)),e.provide(ze,g);const i=e.unmount;ae.add(e),e.unmount=function(){ae.delete(e),ae.size<1&&(m=G,H&&H(),H=null,g.value=G,se=!1,W=!1),i()}}};function le(e){return e.reduce((e,t)=>e.then(()=>U(t)),Promise.resolve())}return oe}function st(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const s=t.matched[a];s&&(e.matched.find(e=>F(e,s))?i.push(s):n.push(s));const o=e.matched[a];o&&(t.matched.find(e=>F(e,o))||r.push(o))}return[n,i,r]}function at(){return(0,i.WQ)(Ve)}function ot(e){return(0,i.WQ)(He)}},1510:function(e,t,n){"use strict";n.d(t,{KpY:function(){return b}});n(4114),n(8111),n(1148),n(2489),n(116),n(531),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(9577),n(4979);var i=n(144),r=n(6768);function s(e){return!!(0,i.o5)()&&((0,i.jr)(e),!0)}const a="undefined"!==typeof window&&"undefined"!==typeof document,o=("undefined"!==typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),Object.prototype.toString),l=e=>"[object Object]"===o.call(e);function u(e){return Array.isArray(e)?e:[e]}function c(e){const t=Object.create(null);return n=>{const i=t[n];return i||(t[n]=e(n))}}const d=/\B([A-Z])/g,h=(c(e=>e.replace(d,"-$1").toLowerCase()),/-(\w)/g);c(e=>e.replace(h,(e,t)=>t?t.toUpperCase():""));function p(e,t,n){return(0,r.wB)(e,t,{...n,immediate:!0})}const f=a?window:void 0;a&&window.document,a&&window.navigator,a&&window.location;function g(e){var t;const n=(0,i.BA)(e);return null!=(t=null==n?void 0:n.$el)?t:n}function m(...e){const t=[],n=()=>{t.forEach(e=>e()),t.length=0},a=(e,t,n,i)=>(e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)),o=(0,r.EW)(()=>{const t=u((0,i.BA)(e[0])).filter(e=>null!=e);return t.every(e=>"string"!==typeof e)?t:void 0}),c=p(()=>{var t,n;return[null!=(n=null==(t=o.value)?void 0:t.map(e=>g(e)))?n:[f].filter(e=>null!=e),u((0,i.BA)(o.value?e[1]:e[0])),u((0,i.R1)(o.value?e[2]:e[1])),(0,i.BA)(o.value?e[3]:e[2])]},([e,i,r,s])=>{if(n(),!(null==e?void 0:e.length)||!(null==i?void 0:i.length)||!(null==r?void 0:r.length))return;const o=l(s)?{...s}:s;t.push(...e.flatMap(e=>i.flatMap(t=>r.map(n=>a(e,t,n,o)))))},{flush:"post"}),d=()=>{c(),n()};return s(n),d}function y(){const e=(0,i.IJ)(!1),t=(0,r.nI)();return t&&(0,r.sV)(()=>{e.value=!0},t),e}function v(e){const t=y();return(0,r.EW)(()=>(t.value,Boolean(e())))}Symbol("vueuse-ssr-width");"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;function b(e={}){const{window:t=f}=e,n=v(()=>t&&"screen"in t&&"orientation"in t.screen),r=n.value?t.screen.orientation:{},s=(0,i.KR)(r.type),a=(0,i.IJ)(r.angle||0);n.value&&m(t,"orientationchange",()=>{s.value=r.type,a.value=r.angle},{passive:!0});const o=e=>n.value&&"function"===typeof r.lock?r.lock(e):Promise.reject(new Error("Not supported")),l=()=>{n.value&&"function"===typeof r.unlock&&r.unlock()};return{isSupported:n,orientation:s,angle:a,lockOrientation:o,unlockOrientation:l}}Number.POSITIVE_INFINITY},1625:function(e,t,n){"use strict";var i=n(9504);e.exports=i({}.isPrototypeOf)},1698:function(e,t,n){"use strict";var i=n(6518),r=n(4204),s=n(9835),a=n(4916),o=!a("union")||!s("union");i({target:"Set",proto:!0,real:!0,forced:o},{union:r})},1701:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(9306),a=n(8551),o=n(1767),l=n(9462),u=n(6319),c=n(9539),d=n(684),h=n(4549),p=n(6395),f=!p&&!d("map",function(){}),g=!p&&!f&&h("map",TypeError),m=p||f||g,y=l(function(){var e=this.iterator,t=a(r(this.next,e)),n=this.done=!!t.done;if(!n)return u(e,this.mapper,[t.value,this.counter++],!0)});i({target:"Iterator",proto:!0,real:!0,forced:m},{map:function(e){a(this);try{s(e)}catch(t){c(this,"throw",t)}return g?r(g,this,e):new y(o(this),{mapper:e})}})},1767:function(e){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},1779:function(e,t,n){n(4114),n(9577);var i=n(5749).getUint64,r=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=i(e.subarray(r)),n.firstOffset=i(e.subarray(r+8)),r+=16),r+=2;var s=t.getUint16(r);for(r+=2;s>0;r+=12,s--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n};e.exports=r},1806:function(e,t,n){"use strict";var i=n(6518),r=n(8551),s=n(2652),a=n(1767),o=[].push;i({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return s(a(r(this)),o,{that:e,IS_RECORD:!0}),e}})},1828:function(e,t,n){"use strict";var i=n(9504),r=n(9297),s=n(5397),a=n(9617).indexOf,o=n(421),l=i([].push);e.exports=function(e,t){var n,i=s(e),u=0,c=[];for(n in i)!r(o,n)&&r(i,n)&&l(c,n);while(t.length>u)r(i,n=t[u++])&&(~a(c,n)||l(c,n));return c}},2020:function(e){var t={"":!0,up:!0};function n(e){if("string"!==typeof e)return!1;var n=t[e.toLowerCase()];return!!n&&e.toLowerCase()}function i(e){return"number"===typeof e&&e>=0&&e<=100}function r(){var e=100,t=3,r=0,s=100,a=0,o=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!i(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!i(e))throw new Error("RegionAnchorX must be between 0 and 100.");s=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!i(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!i(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!i(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var t=n(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):l=t}}})}e.exports=r},2106:function(e,t,n){"use strict";var i=n(283),r=n(4913);e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),r.f(e,t,n)}},2140:function(e,t,n){"use strict";var i=n(8227),r=i("toStringTag"),s={};s[r]="z",e.exports="[object z]"===String(s)},2195:function(e,t,n){"use strict";var i=n(9504),r=i({}.toString),s=i("".slice);e.exports=function(e){return s(r(e),8,-1)}},2211:function(e,t,n){"use strict";var i=n(9039);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2281:function(e,t,n){var i;i="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},e.exports=i},2360:function(e,t,n){"use strict";var i,r=n(8551),s=n(6801),a=n(8727),o=n(421),l=n(397),u=n(4055),c=n(6119),d=">",h="<",p="prototype",f="script",g=c("IE_PROTO"),m=function(){},y=function(e){return h+f+d+e+h+"/"+f+d},v=function(e){e.write(y("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),n="java"+f+":";return t.style.display="none",l.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(y("document.F=Object")),e.close(),e.F},T=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}T="undefined"!=typeof document?document.domain&&i?v(i):b():v(i);var e=a.length;while(e--)delete T[p][a[e]];return T()};o[g]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[p]=r(e),n=new m,m[p]=null,n[g]=e):n=T(),void 0===t?n:s.f(n,t)}},2475:function(e,t,n){"use strict";var i=n(6518),r=n(8527),s=n(4916),a=!s("isSupersetOf",function(e){return!e});i({target:"Set",proto:!0,real:!0,forced:a},{isSupersetOf:r})},2489:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(9306),a=n(8551),o=n(1767),l=n(9462),u=n(6319),c=n(6395),d=n(9539),h=n(684),p=n(4549),f=!c&&!h("filter",function(){}),g=!c&&!f&&p("filter",TypeError),m=c||f||g,y=l(function(){var e,t,n,i=this.iterator,s=this.predicate,o=this.next;while(1){if(e=a(r(o,i)),t=this.done=!!e.done,t)return;if(n=e.value,u(i,s,[n,this.counter++],!0))return n}});i({target:"Iterator",proto:!0,real:!0,forced:m},{filter:function(e){a(this);try{s(e)}catch(t){d(this,"throw",t)}return g?r(g,this,e):new y(o(this),{predicate:e})}})},2529:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},2603:function(e,t,n){"use strict";var i=n(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},2646:function(e,t,n){"use strict";n(8111),n(8237),n(9577);var i=n(2281),r=function(e,t){return void 0===t&&(t=!1),function(n,r,a){if(n)e(n);else if(r.statusCode>=400&&r.statusCode<=599){var o=a;if(t)if(i.TextDecoder){var l=s(r.headers&&r.headers["content-type"]);try{o=new TextDecoder(l).decode(a)}catch(u){}}else o=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:o})}else e(null,a)}};function s(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce(function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e},"utf-8")}e.exports=r},2652:function(e,t,n){"use strict";var i=n(6080),r=n(9565),s=n(8551),a=n(6823),o=n(4209),l=n(6198),u=n(1625),c=n(81),d=n(851),h=n(9539),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,n){var m,y,v,b,T,_,w,S=n&&n.that,E=!(!n||!n.AS_ENTRIES),A=!(!n||!n.IS_RECORD),C=!(!n||!n.IS_ITERATOR),I=!(!n||!n.INTERRUPTED),x=i(t,S),k=function(e){return m&&h(m,"normal"),new f(!0,e)},M=function(e){return E?(s(e),I?x(e[0],e[1],k):x(e[0],e[1])):I?x(e,k):x(e)};if(A)m=e.iterator;else if(C)m=e;else{if(y=d(e),!y)throw new p(a(e)+" is not iterable");if(o(y)){for(v=0,b=l(e);b>v;v++)if(T=M(e[v]),T&&u(g,T))return T;return new f(!1)}m=c(e,y)}_=A?e.next:m.next;while(!(w=r(_,m)).done){try{T=M(w.value)}catch(D){h(m,"throw",D)}if("object"==typeof T&&T&&u(g,T))return T}return new f(!1)}},2710:function(e,t,n){n(4114),n(8111),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(9577),n(4979),function(e,n){n(t)}(0,function(e){"use strict";function t(e){return null===e||void 0===e}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function a(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var o,l=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.defineProperty(i,"name",{value:n.name,enumerable:!1}),s(i,n.prototype),a(i),i}return r(t,e),t}(Error);class u extends l{constructor(e=void 0){super(e),this.message=e}getKind(){const e=this.constructor;return e.kind}}u.kind="Exception";class c extends u{}c.kind="ArgumentException";class d extends u{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,i){const r=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new h(this.binarizer.createBinarizer(r))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class p extends u{static getChecksumInstance(){return new p}}p.kind="ChecksumException";class f{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(e,t,n,i,r){while(r--)n[i++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends u{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class v{static fill(e,t){for(let n=0,i=e.length;n<i;n++)e[n]=t}static fillWithin(e,t,n,i){v.rangeCheck(e.length,t,n);for(let r=t;r<n;r++)e[r]=i}static rangeCheck(e,t,n){if(t>n)throw new d("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(...e){return e}static create(e,t,n){let i=Array.from({length:e});return i.map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){let i=Array.from({length:e});return i.map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const i=n-t,r=new Int32Array(i);return g.arraycopy(e,t,r,0,i),r}static binarySearch(e,t,n){void 0===n&&(n=v.numberComparator);let i=0,r=e.length-1;while(i<=r){const s=r+i>>1,a=n(t,e[s]);if(a>0)i=s+1;else{if(!(a<0))return s;r=s-1}}return-i-1}static numberComparator(e,t){return e-t}}class b{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e+=e>>>8,e+=e>>>16,63&e}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class T{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?T.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=T.makeArray(e);g.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let i=Math.floor(e/32),r=n[i];r&=~((1<<(31&e))-1);const s=n.length;while(0===r){if(++i===s)return t;r=n[i]}const a=32*i+b.numberOfTrailingZeros(r);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let i=Math.floor(e/32),r=~n[i];r&=~((1<<(31&e))-1);const s=n.length;while(0===r){if(++i===s)return t;r=~n[i]}const a=32*i+b.numberOfTrailingZeros(r);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const n=Math.floor(e/32),i=Math.floor(t/32),r=this.bits;for(let s=n;s<=i;s++){const a=s>n?0:31&e,o=s<i?31:31&t,l=(2<<o)-(1<<a);r[s]|=l}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const i=Math.floor(e/32),r=Math.floor(t/32),s=this.bits;for(let a=i;a<=r;a++){const o=a>i?0:31&e,l=a<r?31:31&t,u=(2<<l)-(1<<o)&4294967295;if((s[a]&u)!==(n?u:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]}toBytes(e,t,n,i){for(let r=0;r<i;r++){let i=0;for(let t=0;t<8;t++)this.get(e)&&(i|=1<<7-t),e++;t[n+r]=i}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits;for(let r=0;r<n;r++){let n=i[r];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-r]=n}if(this.size!==32*n){const t=32*n-this.size;let i=e[0]>>>t;for(let r=1;r<n;r++){const n=e[r];i|=n<<32-t,e[r-1]=i,i=n>>>t}e[n-1]=i}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof T))return!1;const t=e;return this.size===t.size&&v.equals(this.bits,t.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new T(this.size,this.bits.slice())}}(function(e){e[e["OTHER"]=0]="OTHER",e[e["PURE_BARCODE"]=1]="PURE_BARCODE",e[e["POSSIBLE_FORMATS"]=2]="POSSIBLE_FORMATS",e[e["TRY_HARDER"]=3]="TRY_HARDER",e[e["CHARACTER_SET"]=4]="CHARACTER_SET",e[e["ALLOWED_LENGTHS"]=5]="ALLOWED_LENGTHS",e[e["ASSUME_CODE_39_CHECK_DIGIT"]=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e["ASSUME_GS1"]=7]="ASSUME_GS1",e[e["RETURN_CODABAR_START_END"]=8]="RETURN_CODABAR_START_END",e[e["NEED_RESULT_POINT_CALLBACK"]=9]="NEED_RESULT_POINT_CALLBACK",e[e["ALLOWED_EAN_EXTENSIONS"]=10]="ALLOWED_EAN_EXTENSIONS"})(o||(o={}));var _,w=o;class S extends u{static getFormatInstance(){return new S}}S.kind="FormatException",function(e){e[e["Cp437"]=0]="Cp437",e[e["ISO8859_1"]=1]="ISO8859_1",e[e["ISO8859_2"]=2]="ISO8859_2",e[e["ISO8859_3"]=3]="ISO8859_3",e[e["ISO8859_4"]=4]="ISO8859_4",e[e["ISO8859_5"]=5]="ISO8859_5",e[e["ISO8859_6"]=6]="ISO8859_6",e[e["ISO8859_7"]=7]="ISO8859_7",e[e["ISO8859_8"]=8]="ISO8859_8",e[e["ISO8859_9"]=9]="ISO8859_9",e[e["ISO8859_10"]=10]="ISO8859_10",e[e["ISO8859_11"]=11]="ISO8859_11",e[e["ISO8859_13"]=12]="ISO8859_13",e[e["ISO8859_14"]=13]="ISO8859_14",e[e["ISO8859_15"]=14]="ISO8859_15",e[e["ISO8859_16"]=15]="ISO8859_16",e[e["SJIS"]=16]="SJIS",e[e["Cp1250"]=17]="Cp1250",e[e["Cp1251"]=18]="Cp1251",e[e["Cp1252"]=19]="Cp1252",e[e["Cp1256"]=20]="Cp1256",e[e["UnicodeBigUnmarked"]=21]="UnicodeBigUnmarked",e[e["UTF8"]=22]="UTF8",e[e["ASCII"]=23]="ASCII",e[e["Big5"]=24]="Big5",e[e["GB18030"]=25]="GB18030",e[e["EUC_KR"]=26]="EUC_KR"}(_||(_={}));class E{constructor(e,t,n,...i){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t,this.otherEncodingNames=i,E.VALUE_IDENTIFIER_TO_ECI.set(e,this),E.NAME_TO_ECI.set(n,this);const r=this.values;for(let s=0,a=r.length;s!==a;s++){const e=r[s];E.VALUES_TO_ECI.set(e,this)}for(const s of i)E.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new S("incorect value");const t=E.VALUES_TO_ECI.get(e);if(void 0===t)throw new S("incorect value");return t}static getCharacterSetECIByName(e){const t=E.NAME_TO_ECI.get(e);if(void 0===t)throw new S("incorect value");return t}equals(e){if(!(e instanceof E))return!1;const t=e;return this.getName()===t.getName()}}E.VALUE_IDENTIFIER_TO_ECI=new Map,E.VALUES_TO_ECI=new Map,E.NAME_TO_ECI=new Map,E.Cp437=new E(_.Cp437,Int32Array.from([0,2]),"Cp437"),E.ISO8859_1=new E(_.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),E.ISO8859_2=new E(_.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),E.ISO8859_3=new E(_.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),E.ISO8859_4=new E(_.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),E.ISO8859_5=new E(_.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),E.ISO8859_6=new E(_.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),E.ISO8859_7=new E(_.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),E.ISO8859_8=new E(_.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),E.ISO8859_9=new E(_.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),E.ISO8859_10=new E(_.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),E.ISO8859_11=new E(_.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),E.ISO8859_13=new E(_.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),E.ISO8859_14=new E(_.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),E.ISO8859_15=new E(_.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),E.ISO8859_16=new E(_.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),E.SJIS=new E(_.SJIS,20,"SJIS","Shift_JIS"),E.Cp1250=new E(_.Cp1250,21,"Cp1250","windows-1250"),E.Cp1251=new E(_.Cp1251,22,"Cp1251","windows-1251"),E.Cp1252=new E(_.Cp1252,23,"Cp1252","windows-1252"),E.Cp1256=new E(_.Cp1256,24,"Cp1256","windows-1256"),E.UnicodeBigUnmarked=new E(_.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),E.UTF8=new E(_.UTF8,26,"UTF8","UTF-8"),E.ASCII=new E(_.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),E.Big5=new E(_.Big5,28,"Big5"),E.GB18030=new E(_.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),E.EUC_KR=new E(_.EUC_KR,30,"EUC_KR","EUC-KR");class A extends u{}A.kind="UnsupportedOperationException";class C{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!C.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof E?e:E.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(C.isDecodeFallbackSupported(n)){let t="";for(let n=0,i=e.length;n<i;n++){let i=e[n].toString(16);i.length<2&&(i="0"+i),t+="%"+i}return decodeURIComponent(t)}if(n.equals(E.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(E.UTF8)||e.equals(E.ISO8859_1)||e.equals(E.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[];for(let r=0;r<n.length;r++)i.push(n[r].charCodeAt(0));return new Uint8Array(i)}}class I{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return C.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(w.CHARACTER_SET))return t.get(w.CHARACTER_SET).toString();const n=e.length;let i=!0,r=!0,s=!0,a=0,o=0,l=0,u=0,c=0,d=0,h=0,p=0,f=0,g=0,m=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let v=0;v<n&&(i||r||s);v++){const t=255&e[v];s&&(a>0?0===(128&t)?s=!1:a--:0!==(128&t)&&(0===(64&t)?s=!1:(a++,0===(32&t)?o++:(a++,0===(16&t)?l++:(a++,0===(8&t)?u++:s=!1))))),i&&(t>127&&t<160?i=!1:t>159&&(t<192||215===t||247===t)&&m++),r&&(c>0?t<64||127===t||t>252?r=!1:c--:128===t||160===t||t>239?r=!1:t>160&&t<224?(d++,p=0,h++,h>f&&(f=h)):t>127?(c++,h=0,p++,p>g&&(g=p)):(h=0,p=0))}return s&&a>0&&(s=!1),r&&c>0&&(r=!1),s&&(y||o+l+u>0)?I.UTF8:r&&(I.ASSUME_SHIFT_JIS||f>=3||g>=3)?I.SHIFT_JIS:i&&r?2===f&&2===d||10*m>=n?I.SHIFT_JIS:I.ISO88591:i?I.ISO88591:r?I.SHIFT_JIS:s?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function i(e,i,r,s,a,o){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,u=a?parseInt(a.substr(1)):void 0;switch(o){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(u||16);break;case"d":l=parseFloat(parseInt(t[n],u||10).toPrecision(e)).toFixed(0);break}l="object"===typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";while(l.length<c)l=void 0!==i?l+d:d+l;return l}let r=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(r,i)}static getBytes(e,t){return C.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}I.SHIFT_JIS=E.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=E.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=E.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class x{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=I.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let i=t;t<t+n;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class k{constructor(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==i&&null!==i||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,i=new k(n,t);for(let r=0;r<t;r++){const t=e[r];for(let e=0;e<n;e++)t[e]&&i.set(e,r)}return i}static parseFromString(e,t,n){if(null===e)throw new d("stringRepresentation cannot be null");const i=new Array(e.length);let r=0,s=0,a=-1,o=0,l=0;while(l<e.length)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(r>s){if(-1===a)a=r-s;else if(r-s!==a)throw new d("row lengths do not match");s=r,o++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,i[r]=!0,r++;else{if(e.substring(l,l+n.length)!==n)throw new d("illegal character encountered: "+e.substring(l));l+=n.length,i[r]=!1,r++}if(r>s){if(-1===a)a=r-s;else if(r-s!==a)throw new d("row lengths do not match");o++}const u=new k(a,o);for(let c=0;c<r;c++)i[c]&&u.set(Math.floor(c%a),Math.floor(c/a));return u}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new T(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits;for(let r=0,s=this.height;r<s;r++){const s=r*n,a=e.getRow(r,t).getBitArray();for(let e=0;e<n;e++)i[s+e]^=a[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,i){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(i<1||n<1)throw new d("Height and width must be at least 1");const r=e+n,s=t+i;if(s>this.height||r>this.width)throw new d("The region must fit inside the matrix");const a=this.rowSize,o=this.bits;for(let l=t;l<s;l++){const t=l*a;for(let n=e;n<r;n++)o[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new T(this.width):t.clear();const n=this.rowSize,i=this.bits,r=e*n;for(let s=0;s<n;s++)t.setBulk(32*s,i[r+s]);return t}setRow(e,t){g.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new T(e),i=new T(e);for(let r=0,s=Math.floor((t+1)/2);r<s;r++)n=this.getRow(r,n),i=this.getRow(t-1-r,i),n.reverse(),i.reverse(),this.setRow(r,i),this.setRow(t-1-r,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,i=this.bits;let r=e,s=t,a=-1,o=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=i[l*n+e];if(0!==t){if(l<s&&(s=l),l>o&&(o=l),32*e<r){let n=0;while(0===(t<<31-n&4294967295))n++;32*e+n<r&&(r=32*e+n)}if(32*e+31>a){let n=31;while(t>>>n===0)n--;32*e+n>a&&(a=32*e+n)}}}return a<r||o<s?null:Int32Array.from([r,s,a-r+1,o-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;while(n<t.length&&0===t[n])n++;if(n===t.length)return null;const i=n/e;let r=n%e*32;const s=t[n];let a=0;while(0===(s<<31-a&4294967295))a++;return r+=a,Int32Array.from([r,i])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;while(n>=0&&0===t[n])n--;if(n<0)return null;const i=Math.floor(n/e);let r=32*Math.floor(n%e);const s=t[n];let a=31;while(s>>>a===0)a--;return r+=a,Int32Array.from([r,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof k))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&v.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+v.hashCode(this.bits),e}toString(e="X ",t="  ",n="\n"){return this.buildToString(e,t,n)}buildToString(e,t,n){let i=new x;for(let r=0,s=this.height;r<s;r++){for(let n=0,s=this.width;n<s;n++)i.append(this.get(n,r)?e:t);i.append(n)}return i.toString()}clone(){return new k(this.width,this.height,this.rowSize,this.bits.slice())}}class M extends u{static getNotFoundInstance(){return new M}}M.kind="NotFoundException";class D extends f{constructor(e){super(e),this.luminances=D.EMPTY,this.buckets=new Int32Array(D.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),i=n.getWidth();void 0===t||null===t||t.getSize()<i?t=new T(i):t.clear(),this.initArrays(i);const r=n.getRow(e,this.luminances),s=this.buckets;for(let o=0;o<i;o++)s[(255&r[o])>>D.LUMINANCE_SHIFT]++;const a=D.estimateBlackPoint(s);if(i<3)for(let o=0;o<i;o++)(255&r[o])<a&&t.set(o);else{let e=255&r[0],n=255&r[1];for(let s=1;s<i-1;s++){const i=255&r[s+1];(4*n-e-i)/2<a&&t.set(s),e=n,n=i}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),i=new k(t,n);this.initArrays(t);const r=this.buckets;for(let o=1;o<5;o++){const i=Math.floor(n*o/5),s=e.getRow(i,this.luminances),a=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<a;e++){const t=255&s[e];r[t>>D.LUMINANCE_SHIFT]++}}const s=D.estimateBlackPoint(r),a=e.getMatrix();for(let o=0;o<n;o++){const e=o*t;for(let n=0;n<t;n++){const t=255&a[e+n];t<s&&i.set(n,o)}}return i}createBinarizer(e){return new D(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<D.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,i=0,r=0;for(let u=0;u<t;u++)e[u]>r&&(i=u,r=e[u]),e[u]>n&&(n=e[u]);let s=0,a=0;for(let u=0;u<t;u++){const t=u-i,n=e[u]*t*t;n>a&&(s=u,a=n)}if(i>s){const e=i;i=s,s=e}if(s-i<=t/16)throw new M;let o=s-1,l=-1;for(let u=s-1;u>i;u--){const t=u-i,r=t*t*(s-u)*(n-e[u]);r>l&&(o=u,l=r)}return o<<D.LUMINANCE_SHIFT}}D.LUMINANCE_BITS=5,D.LUMINANCE_SHIFT=8-D.LUMINANCE_BITS,D.LUMINANCE_BUCKETS=1<<D.LUMINANCE_BITS,D.EMPTY=Uint8ClampedArray.from([0]);class R extends D{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=R.MINIMUM_DIMENSION&&n>=R.MINIMUM_DIMENSION){const i=e.getMatrix();let r=t>>R.BLOCK_SIZE_POWER;0!==(t&R.BLOCK_SIZE_MASK)&&r++;let s=n>>R.BLOCK_SIZE_POWER;0!==(n&R.BLOCK_SIZE_MASK)&&s++;const a=R.calculateBlackPoints(i,r,s,t,n),o=new k(t,n);R.calculateThresholdForBlock(i,r,s,t,n,a,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new R(e)}static calculateThresholdForBlock(e,t,n,i,r,s,a){const o=r-R.BLOCK_SIZE,l=i-R.BLOCK_SIZE;for(let u=0;u<n;u++){let r=u<<R.BLOCK_SIZE_POWER;r>o&&(r=o);const c=R.cap(u,2,n-3);for(let n=0;n<t;n++){let o=n<<R.BLOCK_SIZE_POWER;o>l&&(o=l);const u=R.cap(n,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=s[c+e];d+=t[u-2]+t[u-1]+t[u]+t[u+1]+t[u+2]}const h=d/25;R.thresholdBlock(e,o,r,h,i,a)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,i,r,s){for(let a=0,o=n*r+t;a<R.BLOCK_SIZE;a++,o+=r)for(let r=0;r<R.BLOCK_SIZE;r++)(255&e[o+r])<=i&&s.set(t+r,n+a)}static calculateBlackPoints(e,t,n,i,r){const s=r-R.BLOCK_SIZE,a=i-R.BLOCK_SIZE,o=new Array(n);for(let l=0;l<n;l++){o[l]=new Int32Array(t);let n=l<<R.BLOCK_SIZE_POWER;n>s&&(n=s);for(let r=0;r<t;r++){let t=r<<R.BLOCK_SIZE_POWER;t>a&&(t=a);let s=0,u=255,c=0;for(let r=0,a=n*i+t;r<R.BLOCK_SIZE;r++,a+=i){for(let t=0;t<R.BLOCK_SIZE;t++){const n=255&e[a+t];s+=n,n<u&&(u=n),n>c&&(c=n)}if(c-u>R.MIN_DYNAMIC_RANGE)for(r++,a+=i;r<R.BLOCK_SIZE;r++,a+=i)for(let t=0;t<R.BLOCK_SIZE;t++)s+=255&e[a+t]}let d=s>>2*R.BLOCK_SIZE_POWER;if(c-u<=R.MIN_DYNAMIC_RANGE&&(d=u/2,l>0&&r>0)){const e=(o[l-1][r]+2*o[l][r-1]+o[l-1][r-1])/4;u<e&&(d=e)}o[l][r]=d}}return o}}R.BLOCK_SIZE_POWER=3,R.BLOCK_SIZE=1<<R.BLOCK_SIZE_POWER,R.BLOCK_SIZE_MASK=R.BLOCK_SIZE-1,R.MINIMUM_DIMENSION=5*R.BLOCK_SIZE,R.MIN_DYNAMIC_RANGE=24;class O{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,i){throw new A("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new A("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new A("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new x;for(let n=0;n<this.height;n++){const i=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&i[e];let r;r=n<64?"#":n<128?"+":n<192?".":" ",t.append(r)}t.append("\n")}return t.toString()}}class N extends O{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),i=this.getWidth();for(let r=0;r<i;r++)n[r]=255-(255&n[r]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let i=0;i<t;i++)n[i]=255-(255&e[i]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,i){return new N(this.delegate.crop(e,t,n,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new N(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new N(this.delegate.rotateCounterClockwise45())}}class L extends O{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=L.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return L.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const i=new Uint8ClampedArray(t*n);for(let r=0,s=0,a=e.length;r<a;r+=4,s++){let t;const n=e[r+3];if(0===n)t=255;else{const n=e[r],i=e[r+1],s=e[r+2];t=306*n+601*i+117*s+512>>10}i[s]=t}return i}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth(),i=e*n;return null===t?t=this.buffer.slice(i,i+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(i,i+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,i){return super.crop(e,t,n,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),i=e*L.DEGREE_TO_RADIANS,r=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*r+Math.abs(Math.sin(i))*s),o=Math.ceil(Math.abs(Math.sin(i))*r+Math.abs(Math.cos(i))*s);return t.width=a,t.height=o,n.translate(a/2,o/2),n.rotate(i),n.drawImage(this.canvas,r/-2,s/-2),this.buffer=L.makeBufferFromCanvasImageData(t),this}invert(){return new N(this)}}L.DEGREE_TO_RADIANS=Math.PI/180;class P{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var U,B=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})};class F{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const i=n.deviceId||n.id,r=n.label||`Video device ${t.length+1}`,s=n.groupId,a={deviceId:i,label:r,kind:e,groupId:s};t.push(a)}return t})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){const e=yield this.listVideoInputDevices();return e.map(e=>new P(e.deviceId,e.label))})}findDeviceById(e){return B(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return B(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:n};return yield this.decodeOnceFromConstraints(i,t)})}decodeOnceFromConstraints(e,t){return B(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return B(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t),i=yield this.decodeOnce(n);return i})}decodeFromInputVideoDeviceContinuously(e,t,n){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return B(this,void 0,void 0,function*(){let i;i=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:i};return yield this.decodeFromConstraints(r,t,n)})}decodeFromConstraints(e,t,n){return B(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,t,n)})}decodeFromStream(e,t,n){return B(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(i,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return B(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new c(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new c(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new c("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new c("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new c("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new c("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new c("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new c("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new c("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new c("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const i=(r,s)=>{if(this._stopAsyncDecode)return s(new M("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{const t=this.decode(e);r(t)}catch(a){const e=t&&a instanceof M,o=a instanceof p||a instanceof S,l=o&&n;if(e||l)return setTimeout(i,this._timeBetweenDecodingAttempts,r,s);s(a)}};return new Promise((e,t)=>i(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const i=this.decode(e);t(i,null),setTimeout(n,this.timeBetweenScansMillis)}catch(i){t(null,i);const e=i instanceof p||i instanceof S,r=i instanceof M;(e||r)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){const t=e;return 0!==t.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e);this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new L(t),i=new R(n);return new h(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e),n=t.getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,i;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class j{constructor(e,t,n=(null==t?0:8*t.length),i,r,s=g.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=r,this.timestamp=s,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=i,this.format=r,this.resultMetadata=null,this.timestamp=void 0===s||null===s?g.currentTimeMillis():s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);g.arraycopy(t,0,n,0,t.length),g.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}(function(e){e[e["AZTEC"]=0]="AZTEC",e[e["CODABAR"]=1]="CODABAR",e[e["CODE_39"]=2]="CODE_39",e[e["CODE_93"]=3]="CODE_93",e[e["CODE_128"]=4]="CODE_128",e[e["DATA_MATRIX"]=5]="DATA_MATRIX",e[e["EAN_8"]=6]="EAN_8",e[e["EAN_13"]=7]="EAN_13",e[e["ITF"]=8]="ITF",e[e["MAXICODE"]=9]="MAXICODE",e[e["PDF_417"]=10]="PDF_417",e[e["QR_CODE"]=11]="QR_CODE",e[e["RSS_14"]=12]="RSS_14",e[e["RSS_EXPANDED"]=13]="RSS_EXPANDED",e[e["UPC_A"]=14]="UPC_A",e[e["UPC_E"]=15]="UPC_E",e[e["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(U||(U={}));var V,H=U;(function(e){e[e["OTHER"]=0]="OTHER",e[e["ORIENTATION"]=1]="ORIENTATION",e[e["BYTE_SEGMENTS"]=2]="BYTE_SEGMENTS",e[e["ERROR_CORRECTION_LEVEL"]=3]="ERROR_CORRECTION_LEVEL",e[e["ISSUE_NUMBER"]=4]="ISSUE_NUMBER",e[e["SUGGESTED_PRICE"]=5]="SUGGESTED_PRICE",e[e["POSSIBLE_COUNTRY"]=6]="POSSIBLE_COUNTRY",e[e["UPC_EAN_EXTENSION"]=7]="UPC_EAN_EXTENSION",e[e["PDF417_EXTRA_METADATA"]=8]="PDF417_EXTRA_METADATA",e[e["STRUCTURED_APPEND_SEQUENCE"]=9]="STRUCTURED_APPEND_SEQUENCE",e[e["STRUCTURED_APPEND_PARITY"]=10]="STRUCTURED_APPEND_PARITY"})(V||(V={}));var z,G,q,W,X,K,Y=V;class ${constructor(e,t,n,i,r=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=r,this.structuredAppendParity=s,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Q{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Z{constructor(e,t){if(0===t.length)throw new d;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;while(e<n&&0===t[e])e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,i=t.length;e!==i;e++){const i=t[e];n=Q.addOrSubtract(n,i)}return n}n=t[0];const i=t.length,r=this.field;for(let s=1;s<i;s++)n=Q.addOrSubtract(r.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let i=new Int32Array(n.length);const r=n.length-t.length;g.arraycopy(n,0,i,0,r);for(let s=r;s<n.length;s++)i[s]=Q.addOrSubtract(t[s-r],n[s]);return new Z(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,i=e.coefficients,r=i.length,s=new Int32Array(n+r-1),a=this.field;for(let o=0;o<n;o++){const e=t[o];for(let t=0;t<r;t++)s[o+t]=Q.addOrSubtract(s[o+t],a.multiply(e,i[t]))}return new Z(a,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,i=new Int32Array(t),r=this.coefficients;for(let s=0;s<t;s++)i[s]=n.multiply(r[s],e);return new Z(n,i)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const n=this.coefficients,i=n.length,r=new Int32Array(i+e),s=this.field;for(let a=0;a<i;a++)r[a]=s.multiply(n[a],t);return new Z(s,r)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let n=t.getZero(),i=this;const r=e.getCoefficient(e.getDegree()),s=t.inverse(r);while(i.getDegree()>=e.getDegree()&&!i.isZero()){const r=i.getDegree()-e.getDegree(),a=t.multiply(i.getCoefficient(i.getDegree()),s),o=e.multiplyByMonomial(r,a),l=t.buildMonomial(r,a);n=n.addOrSubtract(l),i=i.addOrSubtract(o)}return[n,i]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends u{}J.kind="ArithmeticException";class ee extends Q{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const i=new Int32Array(t);let r=1;for(let a=0;a<t;a++)i[a]=r,r*=2,r>=t&&(r^=e,r&=t-1);this.expTable=i;const s=new Int32Array(t);for(let a=0;a<t-1;a++)s[i[a]]=a;this.logTable=s,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Z(this,n)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends u{}te.kind="ReedSolomonException";class ne extends u{}ne.kind="IllegalStateException";class ie{constructor(e){this.field=e}decode(e,t){const n=this.field,i=new Z(n,e),r=new Int32Array(t);let s=!0;for(let h=0;h<t;h++){const e=i.evaluateAt(n.exp(h+n.getGeneratorBase()));r[r.length-1-h]=e,0!==e&&(s=!1)}if(s)return;const a=new Z(n,r),o=this.runEuclideanAlgorithm(n.buildMonomial(t,1),a,t),l=o[0],u=o[1],c=this.findErrorLocations(l),d=this.findErrorMagnitudes(u,c);for(let h=0;h<c.length;h++){const t=e.length-1-n.log(c[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const i=this.field;let r=e,s=t,a=i.getZero(),o=i.getOne();while(s.getDegree()>=(n/2|0)){let e=r,t=a;if(r=s,a=o,r.isZero())throw new te("r_{i-1} was zero");s=e;let n=i.getZero();const l=r.getCoefficient(r.getDegree()),u=i.inverse(l);while(s.getDegree()>=r.getDegree()&&!s.isZero()){const e=s.getDegree()-r.getDegree(),t=i.multiply(s.getCoefficient(s.getDegree()),u);n=n.addOrSubtract(i.buildMonomial(e,t)),s=s.addOrSubtract(r.multiplyByMonomial(e,t))}if(o=n.multiply(a).addOrSubtract(t),s.getDegree()>=r.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=o.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const u=i.inverse(l),c=o.multiplyScalar(u),d=s.multiplyScalar(u);return[c,d]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let i=0;const r=this.field;for(let s=1;s<r.getSize()&&i<t;s++)0===e.evaluateAt(s)&&(n[i]=r.inverse(s),i++);if(i!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,i=new Int32Array(n),r=this.field;for(let s=0;s<n;s++){const a=r.inverse(t[s]);let o=1;for(let e=0;e<n;e++)if(s!==e){const n=r.multiply(t[e],a),i=0===(1&n)?1|n:-2&n;o=r.multiply(o,i)}i[s]=r.multiply(e.evaluateAt(a),r.inverse(o)),0!==r.getGeneratorBase()&&(i[s]=r.multiply(i[s],a))}return i}}(function(e){e[e["UPPER"]=0]="UPPER",e[e["LOWER"]=1]="LOWER",e[e["MIXED"]=2]="MIXED",e[e["DIGIT"]=3]="DIGIT",e[e["PUNCT"]=4]="PUNCT",e[e["BINARY"]=5]="BINARY"})(z||(z={}));class re{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),r=re.convertBoolArrayToByteArray(i),s=re.getEncodedData(i),a=new $(r,s,null,null);return a.setNumBits(i.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=z.UPPER,i=z.UPPER,r="",s=0;while(s<t)if(i===z.BINARY){if(t-s<5)break;let a=re.readCode(e,s,5);if(s+=5,0===a){if(t-s<11)break;a=re.readCode(e,s,11)+31,s+=11}for(let n=0;n<a;n++){if(t-s<8){s=t;break}const n=re.readCode(e,s,8);r+=I.castAsNonUtf8Char(n),s+=8}i=n}else{let a=i===z.DIGIT?4:5;if(t-s<a)break;let o=re.readCode(e,s,a);s+=a;let l=re.getCharacter(i,o);l.startsWith("CTRL_")?(n=i,i=re.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=i)):(r+=l,i=n)}return r}static getTable(e){switch(e){case"L":return z.LOWER;case"P":return z.PUNCT;case"M":return z.MIXED;case"D":return z.DIGIT;case"B":return z.BINARY;case"U":default:return z.UPPER}}static getCharacter(e,t){switch(e){case z.UPPER:return re.UPPER_TABLE[t];case z.LOWER:return re.LOWER_TABLE[t];case z.MIXED:return re.MIXED_TABLE[t];case z.PUNCT:return re.PUNCT_TABLE[t];case z.DIGIT:return re.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),r=e.length/n;if(r<i)throw new S;let s=e.length%n,a=new Int32Array(r);for(let h=0;h<r;h++,s+=n)a[h]=re.readCode(e,s,n);try{let e=new ie(t);e.decode(a,r-i)}catch(d){throw new S(d)}let o=(1<<n)-1,l=0;for(let h=0;h<i;h++){let e=a[h];if(0===e||e===o)throw new S;1!==e&&e!==o-1||l++}let u=new Array(i*n-l),c=0;for(let h=0;h<i;h++){let e=a[h];if(1===e||e===o-1)u.fill(e>1,c,c+n-1),c+=n-1;else for(let t=n-1;t>=0;--t)u[c++]=0!==(e&1<<t)}return u}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+4*n,r=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let a=0;a<r.length;a++)r[a]=a;else{let e=i+1+2*b.truncDivision(b.truncDivision(i,2)-1,15),t=i/2,n=b.truncDivision(e,2);for(let i=0;i<t;i++){let e=i+b.truncDivision(i,15);r[t-i-1]=n-e-1,r[t+i]=n+e+1}}for(let a=0,o=0;a<n;a++){let l=4*(n-a)+(t?9:12),u=2*a,c=i-1-u;for(let t=0;t<l;t++){let n=2*t;for(let i=0;i<2;i++)s[o+n+i]=e.get(r[u+i],r[u+t]),s[o+2*l+n+i]=e.get(r[u+t],r[c-i]),s[o+4*l+n+i]=e.get(r[c-i],r[c-t]),s[o+6*l+n+i]=e.get(r[c-t],r[u+i])}o+=8*l}return s}static readCode(e,t,n){let i=0;for(let r=t;r<t+n;r++)i<<=1,e[r]&&(i|=1);return i}static readByte(e,t){let n=e.length-t;return n>=8?re.readCode(e,t,8):re.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=re.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}re.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],re.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],re.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],re.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],re.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class se{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,i){const r=e-n,s=t-i;return Math.sqrt(r*r+s*s)}static sum(e){let t=0;for(let n=0,i=e.length;n!==i;n++){const i=e[n];t+=i}return t}}class ae{static floatToIntBits(e){return e}}ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof oe){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ae.floatToIntBits(this.x)+ae.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let r,s,a;if(n>=t&&n>=i?(s=e[0],r=e[1],a=e[2]):i>=n&&i>=t?(s=e[1],r=e[0],a=e[2]):(s=e[2],r=e[0],a=e[1]),this.crossProductZ(r,s,a)<0){const e=r;r=a,a=e}e[0]=r,e[1]=s,e[2]=a}static distance(e,t){return se.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const i=t.x,r=t.y;return(n.x-i)*(e.y-r)-(n.y-r)*(e.x-i)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ue extends le{constructor(e,t,n,i,r){super(e,t),this.compact=n,this.nbDatablocks=i,this.nbLayers=r}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ce{constructor(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ce.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==i&&null!==i||(i=e.getHeight()/2|0);const r=t/2|0;if(this.leftInit=n-r,this.rightInit=n+r,this.upInit=i-r,this.downInit=i+r,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new M}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,r=!1,s=!0,a=!1,o=!1,l=!1,u=!1,c=!1;const d=this.width,h=this.height;while(s){s=!1;let p=!0;while((p||!o)&&t<d)p=this.containsBlackPoint(n,i,t,!1),p?(t++,s=!0,o=!0):o||t++;if(t>=d){r=!0;break}let f=!0;while((f||!l)&&i<h)f=this.containsBlackPoint(e,t,i,!0),f?(i++,s=!0,l=!0):l||i++;if(i>=h){r=!0;break}let g=!0;while((g||!u)&&e>=0)g=this.containsBlackPoint(n,i,e,!1),g?(e--,s=!0,u=!0):u||e--;if(e<0){r=!0;break}let m=!0;while((m||!c)&&n>=0)m=this.containsBlackPoint(e,t,n,!0),m?(n--,s=!0,c=!0):c||n--;if(n<0){r=!0;break}s&&(a=!0)}if(!r&&a){const r=t-e;let s=null;for(let t=1;null===s&&t<r;t++)s=this.getBlackPointOnSegment(e,i-t,e+t,i);if(null==s)throw new M;let a=null;for(let t=1;null===a&&t<r;t++)a=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==a)throw new M;let o=null;for(let e=1;null===o&&e<r;e++)o=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==o)throw new M;let l=null;for(let e=1;null===l&&e<r;e++)l=this.getBlackPointOnSegment(t,i-e,t-e,i);if(null==l)throw new M;return this.centerEdges(l,s,o,a)}throw new M}getBlackPointOnSegment(e,t,n,i){const r=se.round(se.distance(e,t,n,i)),s=(n-e)/r,a=(i-t)/r,o=this.image;for(let l=0;l<r;l++){const n=se.round(e+l*s),i=se.round(t+l*a);if(o.get(n,i))return new oe(n,i)}return null}centerEdges(e,t,n,i){const r=e.getX(),s=e.getY(),a=t.getX(),o=t.getY(),l=n.getX(),u=n.getY(),c=i.getX(),d=i.getY(),h=ce.CORR;return r<this.width/2?[new oe(c-h,d+h),new oe(a+h,o+h),new oe(l-h,u-h),new oe(r+h,s-h)]:[new oe(c+h,d+h),new oe(a+h,o-h),new oe(l-h,u+h),new oe(r-h,s-h)]}containsBlackPoint(e,t,n,i){const r=this.image;if(i){for(let s=e;s<=t;s++)if(r.get(s,n))return!0}else for(let s=e;s<=t;s++)if(r.get(n,s))return!0;return!1}}ce.INIT_SIZE=10,ce.CORR=1;class de{static checkAndNudgePoints(e,t){const n=e.getWidth(),i=e.getHeight();let r=!0;for(let s=0;s<t.length&&r;s+=2){const e=Math.floor(t[s]),a=Math.floor(t[s+1]);if(e<-1||e>n||a<-1||a>i)throw new M;r=!1,-1===e?(t[s]=0,r=!0):e===n&&(t[s]=n-1,r=!0),-1===a?(t[s+1]=0,r=!0):a===i&&(t[s+1]=i-1,r=!0)}r=!0;for(let s=t.length-2;s>=0&&r;s-=2){const e=Math.floor(t[s]),a=Math.floor(t[s+1]);if(e<-1||e>n||a<-1||a>i)throw new M;r=!1,-1===e?(t[s]=0,r=!0):e===n&&(t[s]=n-1,r=!0),-1===a?(t[s+1]=0,r=!0):a===i&&(t[s+1]=i-1,r=!0)}}}class he{constructor(e,t,n,i,r,s,a,o,l){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=r,this.a32=s,this.a13=a,this.a23=o,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f,g){const m=he.quadrilateralToSquare(e,t,n,i,r,s,a,o),y=he.squareToQuadrilateral(l,u,c,d,h,p,f,g);return y.times(m)}transformPoints(e){const t=e.length,n=this.a11,i=this.a12,r=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,u=this.a32,c=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],p=r*t+o*h+c;e[d]=(n*t+s*h+l)/p,e[d+1]=(i*t+a*h+u)/p}}transformPointsWithValues(e,t){const n=this.a11,i=this.a12,r=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,u=this.a32,c=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],p=t[h],f=r*d+o*p+c;e[h]=(n*d+s*p+l)/f,t[h]=(i*d+a*p+u)/f}}static squareToQuadrilateral(e,t,n,i,r,s,a,o){const l=e-n+r-a,u=t-i+s-o;if(0===l&&0===u)return new he(n-e,r-n,e,i-t,s-i,t,0,0,1);{const c=n-r,d=a-r,h=i-s,p=o-s,f=c*p-d*h,g=(l*p-d*u)/f,m=(c*u-l*h)/f;return new he(n-e+g*n,a-e+m*a,e,i-t+g*i,o-t+m*o,t,g,m,1)}}static quadrilateralToSquare(e,t,n,i,r,s,a,o){return he.squareToQuadrilateral(e,t,n,i,r,s,a,o).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class pe extends de{sampleGrid(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f,g,m,y,v){const b=he.quadrilateralToQuadrilateral(i,r,s,a,o,l,u,c,d,h,p,f,g,m,y,v);return this.sampleGridWithTransform(e,t,n,b)}sampleGridWithTransform(e,t,n,i){if(t<=0||n<=0)throw new M;const r=new k(t,n),s=new Float32Array(2*t);for(let o=0;o<n;o++){const t=s.length,n=o+.5;for(let e=0;e<t;e+=2)s[e]=e/2+.5,s[e+1]=n;i.transformPoints(s),de.checkAndNudgePoints(e,s);try{for(let n=0;n<t;n+=2)e.get(Math.floor(s[n]),Math.floor(s[n+1]))&&r.set(n/2,o)}catch(a){throw new M}}return r}}class fe{static setGridSampler(e){fe.gridSampler=e}static getInstance(){return fe.gridSampler}}fe.gridSampler=new pe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),r=this.getMatrixCornerPoints(n);return new ue(i,r,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new M;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let i=0;for(let s=0;s<4;s++){let e=n[(this.shift+s)%4];this.compact?(i<<=7,i+=e>>1&127):(i<<=10,i+=(e>>2&992)+(e>>1&31))}let r=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=1+(r>>6),this.nbDataBlocks=1+(63&r)):(this.nbLayers=1+(r>>11),this.nbDataBlocks=1+(2047&r))}getRotation(e,t){let n=0;e.forEach((e,i,r)=>{let s=(e>>t-2<<1)+(1&e);n=(n<<3)+s}),n=((1&n)<<11)+(n>>1);for(let i=0;i<4;i++)if(b.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new M}getCorrectedParameterData(e,t){let n,i;t?(n=7,i=2):(n=10,i=4);let r=n-i,s=new Int32Array(n);for(let l=n-1;l>=0;--l)s[l]=15&e,e>>=4;try{let e=new ie(ee.AZTEC_PARAM);e.decode(s,r)}catch(o){throw new M}let a=0;for(let l=0;l<i;l++)a=(a<<4)+s[l];return a}getBullsEyeCorners(e){let t=e,n=e,i=e,r=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),a=this.getFirstDifferent(n,s,1,1),o=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(r,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(r,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,a,o,l))break}t=e,n=a,i=o,r=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new M;this.compact=5===this.nbCenterLayers;let a=new oe(t.getX()+.5,t.getY()-.5),o=new oe(n.getX()+.5,n.getY()+.5),l=new oe(i.getX()-.5,i.getY()+.5),u=new oe(r.getX()-.5,r.getY()-.5);return this.expandSquare([a,o,l,u],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,i;try{let r=new ce(this.image).detect();e=r[0],t=r[1],n=r[2],i=r[3]}catch(a){let r=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(r+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(r+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(r-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ge(r-7,s-7),!1,-1,-1).toResultPoint()}let r=se.round((e.getX()+i.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{let a=new ce(this.image,15,r,s).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch(a){e=this.getFirstDifferent(new ge(r+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(r+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(r-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ge(r-7,s-7),!1,-1,-1).toResultPoint()}return r=se.round((e.getX()+i.getX()+t.getX()+n.getX())/4),s=se.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new ge(r,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,i,r){let s=fe.getInstance(),a=this.getDimension(),o=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,o,o,l,o,l,l,o,l,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),r.getX(),r.getY())}sampleLine(e,t,n){let i=0,r=this.distanceResultPoint(e,t),s=r/n,a=e.getX(),o=e.getY(),l=s*(t.getX()-e.getX())/r,u=s*(t.getY()-e.getY())/r;for(let c=0;c<n;c++)this.image.get(se.round(a+c*l),se.round(o+c*u))&&(i|=1<<n-c-1);return i}isWhiteOrBlackRectangle(e,t,n,i){let r=3;e=new ge(e.getX()-r,e.getY()+r),t=new ge(t.getX()-r,t.getY()-r),n=new ge(n.getX()+r,n.getY()-r),i=new ge(i.getX()+r,i.getY()+r);let s=this.getColor(i,e);if(0===s)return!1;let a=this.getColor(e,t);return a===s&&(a=this.getColor(t,n),a===s&&(a=this.getColor(n,i),a===s))}getColor(e,t){let n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,r=(t.getY()-e.getY())/n,s=0,a=e.getX(),o=e.getY(),l=this.image.get(e.getX(),e.getY()),u=Math.ceil(n);for(let d=0;d<u;d++)a+=i,o+=r,this.image.get(se.round(a),se.round(o))!==l&&s++;let c=s/n;return c>.1&&c<.9?0:c<=.1===l?1:-1}getFirstDifferent(e,t,n,i){let r=e.getX()+n,s=e.getY()+i;while(this.isValid(r,s)&&this.image.get(r,s)===t)r+=n,s+=i;r-=n,s-=i;while(this.isValid(r,s)&&this.image.get(r,s)===t)r+=n;r-=n;while(this.isValid(r,s)&&this.image.get(r,s)===t)s+=i;return s-=i,new ge(r,s)}expandSquare(e,t,n){let i=n/(2*t),r=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,l=new oe(a+i*r,o+i*s),u=new oe(a-i*r,o-i*s);r=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,o=(e[1].getY()+e[3].getY())/2;let c=new oe(a+i*r,o+i*s),d=new oe(a-i*r,o-i*s),h=[l,c,u,d];return h}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=se.round(e.getX()),n=se.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return se.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e,t=null){let n=null,i=new me(e.getBlackMatrix()),r=null,s=null;try{let e=i.detectMirror(!1);r=e.getPoints(),this.reportFoundResultPoints(t,r),s=(new re).decode(e)}catch(u){n=u}if(null==s)try{let e=i.detectMirror(!0);r=e.getPoints(),this.reportFoundResultPoints(t,r),s=(new re).decode(e)}catch(u){if(null!=n)throw n;throw u}let a=new j(s.getText(),s.getRawBytes(),s.getNumBits(),r,H.AZTEC,g.currentTimeMillis()),o=s.getByteSegments();null!=o&&a.putMetadata(Y.BYTE_SEGMENTS,o);let l=s.getECLevel();return null!=l&&a.putMetadata(Y.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(w.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,i)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class ve extends F{constructor(e=500){super(new ye,e)}}class be{decode(e,t){try{return this.doDecode(e,t)}catch(n){const i=t&&!0===t.get(w.TRY_HARDER);if(i&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),i=this.doDecode(n,t),r=i.getResultMetadata();let s=270;null!==r&&!0===r.get(Y.ORIENTATION)&&(s+=r.get(Y.ORIENTATION)%360),i.putMetadata(Y.ORIENTATION,s);const a=i.getResultPoints();if(null!==a){const e=n.getHeight();for(let t=0;t<a.length;t++)a[t]=new oe(e-a[t].getY()-1,a[t].getX())}return i}throw new M}}reset(){}doDecode(e,t){const n=e.getWidth(),i=e.getHeight();let r=new T(n);const s=t&&!0===t.get(w.TRY_HARDER),a=Math.max(1,i>>(s?8:5));let o;o=s?i:15;const l=Math.trunc(i/2);for(let d=0;d<o;d++){const s=Math.trunc((d+1)/2),o=0===(1&d),h=l+a*(o?s:-s);if(h<0||h>=i)break;try{r=e.getBlackRow(h,r)}catch(u){continue}for(let e=0;e<2;e++){if(1===e&&(r.reverse(),t&&!0===t.get(w.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(w.NEED_RESULT_POINT_CALLBACK),t=e}try{const i=this.decodeRow(h,r,t);if(1===e){i.putMetadata(Y.ORIENTATION,180);const e=i.getResultPoints();null!==e&&(e[0]=new oe(n-e[0].getX()-1,e[0].getY()),e[1]=new oe(n-e[1].getX()-1,e[1].getY()))}return i}catch(c){}}}throw new M}static recordPattern(e,t,n){const i=n.length;for(let l=0;l<i;l++)n[l]=0;const r=e.getSize();if(t>=r)throw new M;let s=!e.get(t),a=0,o=t;while(o<r){if(e.get(o)!==s)n[a]++;else{if(++a===i)break;n[a]=1,s=!s}o++}if(a!==i&&(a!==i-1||o!==r))throw new M}static recordPatternInReverse(e,t,n){let i=n.length,r=e.get(t);while(t>0&&i>=0)e.get(--t)!==r&&(i--,r=!r);if(i>=0)throw new M;be.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const i=e.length;let r=0,s=0;for(let l=0;l<i;l++)r+=e[l],s+=t[l];if(r<s)return Number.POSITIVE_INFINITY;const a=r/s;n*=a;let o=0;for(let l=0;l<i;l++){const i=e[l],r=t[l]*a,s=i>r?i-r:r-i;if(s>n)return Number.POSITIVE_INFINITY;o+=s}return o/r}}class Te extends be{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let i=0,r=Int32Array.from([0,0,0,0,0,0]),s=n,a=!1;const o=6;for(let l=n;l<t;l++)if(e.get(l)!==a)r[i]++;else{if(i===o-1){let t=Te.MAX_AVG_VARIANCE,n=-1;for(let e=Te.CODE_START_A;e<=Te.CODE_START_C;e++){const i=be.patternMatchVariance(r,Te.CODE_PATTERNS[e],Te.MAX_INDIVIDUAL_VARIANCE);i<t&&(t=i,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,n]);s+=r[0]+r[1],r=r.slice(2,r.length-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,a=!a}throw new M}static decodeCode(e,t,n){be.recordPattern(e,n,t);let i=Te.MAX_AVG_VARIANCE,r=-1;for(let s=0;s<Te.CODE_PATTERNS.length;s++){const e=Te.CODE_PATTERNS[s],n=this.patternMatchVariance(t,e,Te.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,r=s)}if(r>=0)return r;throw new M}decodeRow(e,t,n){const i=n&&!0===n.get(w.ASSUME_GS1),r=Te.findStartPattern(t),s=r[2];let a=0;const o=new Uint8Array(20);let l;switch(o[a++]=s,s){case Te.CODE_START_A:l=Te.CODE_CODE_A;break;case Te.CODE_START_B:l=Te.CODE_CODE_B;break;case Te.CODE_START_C:l=Te.CODE_CODE_C;break;default:throw new S}let u=!1,c=!1,d="",h=r[0],f=r[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,v=s,b=0,T=!0,_=!1,E=!1;while(!u){const e=c;switch(c=!1,m=y,y=Te.decodeCode(t,g,f),o[a++]=y,y!==Te.CODE_STOP&&(T=!0),y!==Te.CODE_STOP&&(b++,v+=b*y),h=f,f+=g.reduce((e,t)=>e+t,0),y){case Te.CODE_START_A:case Te.CODE_START_B:case Te.CODE_START_C:throw new S}switch(l){case Te.CODE_CODE_A:if(y<64)d+=E===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else if(y<96)d+=E===_?String.fromCharCode(y-64):String.fromCharCode(y+64),E=!1;else switch(y!==Te.CODE_STOP&&(T=!1),y){case Te.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_A:!_&&E?(_=!0,E=!1):_&&E?(_=!1,E=!1):E=!0;break;case Te.CODE_SHIFT:c=!0,l=Te.CODE_CODE_B;break;case Te.CODE_CODE_B:l=Te.CODE_CODE_B;break;case Te.CODE_CODE_C:l=Te.CODE_CODE_C;break;case Te.CODE_STOP:u=!0;break}break;case Te.CODE_CODE_B:if(y<96)d+=E===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),E=!1;else switch(y!==Te.CODE_STOP&&(T=!1),y){case Te.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_B:!_&&E?(_=!0,E=!1):_&&E?(_=!1,E=!1):E=!0;break;case Te.CODE_SHIFT:c=!0,l=Te.CODE_CODE_A;break;case Te.CODE_CODE_A:l=Te.CODE_CODE_A;break;case Te.CODE_CODE_C:l=Te.CODE_CODE_C;break;case Te.CODE_STOP:u=!0;break}break;case Te.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==Te.CODE_STOP&&(T=!1),y){case Te.CODE_FNC_1:i&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Te.CODE_CODE_A:l=Te.CODE_CODE_A;break;case Te.CODE_CODE_B:l=Te.CODE_CODE_B;break;case Te.CODE_STOP:u=!0;break}break}e&&(l=l===Te.CODE_CODE_A?Te.CODE_CODE_B:Te.CODE_CODE_A)}const A=f-h;if(f=t.getNextUnset(f),!t.isRange(f,Math.min(t.getSize(),f+(f-h)/2),!1))throw new M;if(v-=b*m,v%103!==m)throw new p;const C=d.length;if(0===C)throw new M;C>0&&T&&(d=l===Te.CODE_CODE_C?d.substring(0,C-2):d.substring(0,C-1));const I=(r[1]+r[0])/2,x=h+A/2,k=o.length,D=new Uint8Array(k);for(let p=0;p<k;p++)D[p]=o[p];const R=[new oe(I,e),new oe(x,e)];return new j(d,D,0,R,H.CODE_128,(new Date).getTime())}}Te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Te.MAX_AVG_VARIANCE=.25,Te.MAX_INDIVIDUAL_VARIANCE=.7,Te.CODE_SHIFT=98,Te.CODE_CODE_C=99,Te.CODE_CODE_B=100,Te.CODE_CODE_A=101,Te.CODE_FNC_1=102,Te.CODE_FNC_2=97,Te.CODE_FNC_3=96,Te.CODE_FNC_4_A=101,Te.CODE_FNC_4_B=100,Te.CODE_START_A=103,Te.CODE_START_B=104,Te.CODE_START_C=105,Te.CODE_STOP=106;class _e extends be{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let i=this.counters;i.fill(0),this.decodeRowResult="";let r,s,a=_e.findAsteriskPattern(t,i),o=t.getNextSet(a[1]),l=t.getSize();do{_e.recordPattern(t,o,i);let e=_e.toNarrowWidePattern(i);if(e<0)throw new M;r=_e.patternToChar(e),this.decodeRowResult+=r,s=o;for(let t of i)o+=t;o=t.getNextSet(o)}while("*"!==r);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let u=0;for(let p of i)u+=p;let c,d=o-s-u;if(o!==l&&2*d<u)throw new M;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=_e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==_e.ALPHABET_STRING.charAt(t%43))throw new p;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new M;c=this.extendedMode?_e.decodeExtended(this.decodeRowResult):this.decodeRowResult;let h=(a[1]+a[0])/2,f=s+u/2;return new j(c,null,0,[new oe(h,e),new oe(f,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),i=e.getNextSet(0),r=0,s=i,a=!1,o=t.length;for(let l=i;l<n;l++)if(e.get(l)!==a)t[r]++;else{if(r===o-1){if(this.toNarrowWidePattern(t)===_e.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+r-1),t[r-1]=0,t[r]=0,r--}else r++;t[r]=1,a=!a}throw new M}static toNarrowWidePattern(e){let t,n=e.length,i=0;do{let r=2147483647;for(let t of e)t<r&&t>i&&(r=t);i=r,t=0;let s=0,a=0;for(let o=0;o<n;o++){let r=e[o];r>i&&(a|=1<<n-1-o,t++,s+=r)}if(3===t){for(let r=0;r<n&&t>0;r++){let n=e[r];if(n>i&&(t--,2*n>=s))return-1}return a}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<_e.CHARACTER_ENCODINGS.length;t++)if(_e.CHARACTER_ENCODINGS[t]===e)return _e.ALPHABET_STRING.charAt(t);if(e===_e.ASTERISK_ENCODING)return"*";throw new M}static decodeExtended(e){let t=e.length,n="";for(let i=0;i<t;i++){let t=e.charAt(i);if("+"===t||"$"===t||"%"===t||"/"===t){let r=e.charAt(i+1),s="\0";switch(t){case"+":if(!(r>="A"&&r<="Z"))throw new S;s=String.fromCharCode(r.charCodeAt(0)+32);break;case"$":if(!(r>="A"&&r<="Z"))throw new S;s=String.fromCharCode(r.charCodeAt(0)-64);break;case"%":if(r>="A"&&r<="E")s=String.fromCharCode(r.charCodeAt(0)-38);else if(r>="F"&&r<="J")s=String.fromCharCode(r.charCodeAt(0)-11);else if(r>="K"&&r<="O")s=String.fromCharCode(r.charCodeAt(0)+16);else if(r>="P"&&r<="T")s=String.fromCharCode(r.charCodeAt(0)+43);else if("U"===r)s="\0";else if("V"===r)s="@";else if("W"===r)s="`";else{if("X"!==r&&"Y"!==r&&"Z"!==r)throw new S;s=""}break;case"/":if(r>="A"&&r<="O")s=String.fromCharCode(r.charCodeAt(0)-32);else{if("Z"!==r)throw new S;s=":"}break}n+=s,i++}else n+=t}return n}}_e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_e.ASTERISK_ENCODING=148;class we extends be{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let i=this.decodeStart(t),r=this.decodeEnd(t),s=new x;we.decodeMiddle(t,i[1],r[0],s);let a=s.toString(),o=null;null!=n&&(o=n.get(w.ALLOWED_LENGTHS)),null==o&&(o=we.DEFAULT_ALLOWED_LENGTHS);let l=a.length,u=!1,c=0;for(let p of o){if(l===p){u=!0;break}p>c&&(c=p)}if(!u&&l>c&&(u=!0),!u)throw new S;const d=[new oe(i[1],e),new oe(r[0],e)];let h=new j(a,null,0,d,H.ITF,(new Date).getTime());return h}static decodeMiddle(e,t,n,i){let r=new Int32Array(10),s=new Int32Array(5),a=new Int32Array(5);r.fill(0),s.fill(0),a.fill(0);while(t<n){be.recordPattern(e,t,r);for(let e=0;e<5;e++){let t=2*e;s[e]=r[t],a[e]=r[t+1]}let n=we.decodeDigit(s);i.append(n.toString()),n=this.decodeDigit(a),i.append(n.toString()),r.forEach(function(e){t+=e})}}decodeStart(e){let t=we.skipWhiteSpace(e),n=we.findGuardPattern(e,t,we.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let i=t-1;n>0&&i>=0;i--){if(e.get(i))break;n--}if(0!==n)throw new M}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new M;return n}decodeEnd(e){e.reverse();try{let n,i=we.skipWhiteSpace(e);try{n=we.findGuardPattern(e,i,we.END_PATTERN_REVERSED[0])}catch(t){t instanceof M&&(n=we.findGuardPattern(e,i,we.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let i=n.length,r=new Int32Array(i),s=e.getSize(),a=!1,o=0,l=t;r.fill(0);for(let u=t;u<s;u++)if(e.get(u)!==a)r[o]++;else{if(o===i-1){if(be.patternMatchVariance(r,n,we.MAX_INDIVIDUAL_VARIANCE)<we.MAX_AVG_VARIANCE)return[l,u];l+=r[0]+r[1],g.arraycopy(r,2,r,0,o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,a=!a}throw new M}static decodeDigit(e){let t=we.MAX_AVG_VARIANCE,n=-1,i=we.PATTERNS.length;for(let r=0;r<i;r++){let i=we.PATTERNS[r],s=be.patternMatchVariance(e,i,we.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=r):s===t&&(n=-1)}if(n>=0)return n%10;throw new M}}we.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],we.MAX_AVG_VARIANCE=.38,we.MAX_INDIVIDUAL_VARIANCE=.5,we.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],we.START_PATTERN=Int32Array.from([1,1,1,1]),we.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Se extends be{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,i=0,r=Int32Array.from([0,0,0]);while(!n){r=Int32Array.from([0,0,0]),t=Se.findGuardPattern(e,i,!1,this.START_END_PATTERN,r);let s=t[0];i=t[1];let a=s-(i-s);a>=0&&(n=e.isRange(a,s,!1))}return t}static checkChecksum(e){return Se.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Se.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let i=t-1;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}n*=3;for(let i=t-2;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Se.findGuardPattern(e,t,!1,Se.START_END_PATTERN,new Int32Array(Se.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,i){return this.findGuardPattern(e,t,n,i,new Int32Array(i.length))}static findGuardPattern(e,t,n,i,r){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let a=0,o=t,l=i.length,u=n;for(let c=t;c<s;c++)if(e.get(c)!==u)r[a]++;else{if(a===l-1){if(be.patternMatchVariance(r,i,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return Int32Array.from([o,c]);o+=r[0]+r[1];let e=r.slice(2,r.length-1);for(let t=0;t<a-1;t++)r[t]=e[t];r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,u=!u}throw new M}static decodeDigit(e,t,n,i){this.recordPattern(e,n,t);let r=this.MAX_AVG_VARIANCE,s=-1,a=i.length;for(let o=0;o<a;o++){let e=i[o],n=be.patternMatchVariance(t,e,Se.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,s=o)}if(s>=0)return s;throw new M}}Se.MAX_AVG_VARIANCE=.48,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.START_END_PATTERN=Int32Array.from([1,1,1]),Se.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Se.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Se.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ee{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let i=this.decodeRowStringBuffer,r=this.decodeMiddle(t,n,i),s=i.toString(),a=Ee.parseExtensionString(s),o=[new oe((n[0]+n[1])/2,e),new oe(r,e)],l=new j(s,null,0,o,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1],a=0;for(let l=0;l<5&&s<r;l++){let t=Se.decodeDigit(e,i,s,Se.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(a|=1<<4-l),4!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new M;let o=this.determineCheckDigit(a);if(Ee.extensionChecksum(n.toString())!==o)throw new M;return s}static extensionChecksum(e){let t=e.length,n=0;for(let i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new M}static parseExtensionString(e){if(5!==e.length)return null;let t=Ee.parseExtension5String(e);return null==t?null:new Map([[Y.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),i=(n/100).toString(),r=n%100,s=r<10?"0"+r:r.toString();return t+i+"."+s}}class Ae{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let i=this.decodeRowStringBuffer,r=this.decodeMiddle(t,n,i),s=i.toString(),a=Ae.parseExtensionString(s),o=[new oe((n[0]+n[1])/2,e),new oe(r,e)],l=new j(s,null,0,o,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1],a=0;for(let o=0;o<2&&s<r;o++){let t=Se.decodeDigit(e,i,s,Se.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(a|=1<<1-o),1!==o&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new M;if(parseInt(n.toString())%4!==a)throw new M;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[Y.ISSUE_NUMBER,parseInt(e)]])}}class Ce{static decodeRow(e,t,n){let i=Se.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{let n=new Ee;return n.decodeRow(e,t,i)}catch(r){let n=new Ae;return n.decodeRow(e,t,i)}}}Ce.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ie extends Se{constructor(){super(),this.decodeRowStringBuffer="",Ie.L_AND_G_PATTERNS=Ie.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ie.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Ie.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let i=Ie.findStartGuardPattern(t),r=null==n?null:n.get(w.NEED_RESULT_POINT_CALLBACK);if(null!=r){const t=new oe((i[0]+i[1])/2,e);r.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,i,this.decodeRowStringBuffer),a=s.rowOffset,o=s.resultString;if(null!=r){const t=new oe(a,e);r.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=r){const t=new oe((l[0]+l[1])/2,e);r.foundPossibleResultPoint(t)}let u=l[1],c=u+(u-l[0]);if(c>=t.getSize()||!t.isRange(u,c,!1))throw new M;let d=o.toString();if(d.length<8)throw new S;if(!Ie.checkChecksum(d))throw new p;let h=(i[1]+i[0])/2,f=(l[1]+l[0])/2,g=this.getBarcodeFormat(),m=[new oe(h,e),new oe(f,e)],y=new j(d,null,0,m,g,(new Date).getTime()),v=0;try{let n=Ce.decodeRow(e,t,l[1]);y.putMetadata(Y.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),v=n.getText().length}catch(T){}let b=null==n?null:n.get(w.ALLOWED_EAN_EXTENSIONS);if(null!=b){let e=!1;for(let t in b)if(v.toString()===t){e=!0;break}if(!e)throw new M}return y}decodeEnd(e,t){return Ie.findGuardPattern(e,t,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ie.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ie.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let i=t-1;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}n*=3;for(let i=t-2;i>=0;i-=2){let t=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}return(1e3-n)%10}}class xe extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1],a=0;for(let l=0;l<6&&s<r;l++){let t=Ie.decodeDigit(e,i,s,Ie.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(a|=1<<5-l)}n=xe.determineFirstDigit(n,a);let o=Ie.findGuardPattern(e,s,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0));s=o[1];for(let l=0;l<6&&s<r;l++){let t=Ie.decodeDigit(e,i,s,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of i)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e,e;throw new M}}xe.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ke extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r=e.getSize(),s=t[1];for(let o=0;o<4&&s<r;o++){let t=Ie.decodeDigit(e,i,s,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of i)s+=e}let a=Ie.findGuardPattern(e,s,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0));s=a[1];for(let o=0;o<4&&s<r;o++){let t=Ie.decodeDigit(e,i,s,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of i)s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class Me extends Ie{constructor(){super(...arguments),this.ean13Reader=new xe}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new j(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new M}reset(){this.ean13Reader.reset()}}class De extends Ie{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const i=this.decodeMiddleCounters.map(e=>e);i[0]=0,i[1]=0,i[2]=0,i[3]=0;const r=e.getSize();let s=t[1],a=0;for(let l=0;l<6&&s<r;l++){const t=De.decodeDigit(e,i,s,De.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of i)s+=e;t>=10&&(a|=1<<5-l)}let o=De.determineNumSysAndCheckDigit(n,a);return{rowOffset:s,resultString:o}}decodeEnd(e,t){return De.findGuardPatternWithoutCounters(e,t,!0,De.MIDDLE_END_PATTERN)}checkChecksum(e){return Ie.checkChecksum(De.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let i=0;i<10;i++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][i]){let t=String.fromCharCode("0".charCodeAt(0)+n),r=String.fromCharCode("0".charCodeAt(0)+i);return t+e+r}throw M.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new x;n.append(e.charAt(0));let i=t[5];switch(i){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(i),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(i);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}De.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),De.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Re extends be{constructor(e){super();let n=null==e?null:e.get(w.POSSIBLE_FORMATS),i=[];t(n)?(i.push(new xe),i.push(new Me),i.push(new ke),i.push(new De)):(n.indexOf(H.EAN_13)>-1&&i.push(new xe),n.indexOf(H.UPC_A)>-1&&i.push(new Me),n.indexOf(H.EAN_8)>-1&&i.push(new ke),n.indexOf(H.UPC_E)>-1&&i.push(new De)),this.readers=i}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===H.EAN_13&&"0"===i.getText().charAt(0),a=null==n?null:n.get(w.POSSIBLE_FORMATS),o=null==a||a.includes(H.UPC_A);if(s&&o){const e=i.getRawBytes(),t=new j(i.getText().substring(1),e,e?e.length:null,i.getResultPoints(),H.UPC_A);return t.putAllMetadata(i.getResultMetadata()),t}return i}catch(i){}throw new M}reset(){for(let e of this.readers)e.reset()}}class Oe extends be{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(be.patternMatchVariance(e,t[n],Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE)return n;throw new M}static count(e){return se.sum(new Int32Array(e))}static increment(e,t){let n=0,i=t[0];for(let r=1;r<e.length;r++)t[r]>i&&(i=t[r],n=r);e[n]++}static decrement(e,t){let n=0,i=t[0];for(let r=1;r<e.length;r++)t[r]<i&&(i=t[r],n=r);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],i=t/n;if(i>=Oe.MIN_FINDER_PATTERN_RATIO&&i<=Oe.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let i of e)i>n&&(n=i),i<t&&(t=i);return n<10*t}return!1}}Oe.MAX_AVG_VARIANCE=.2,Oe.MAX_INDIVIDUAL_VARIANCE=.45,Oe.MIN_FINDER_PATTERN_RATIO=9.5/12,Oe.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ne{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Ne))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Le{constructor(e,t,n,i,r){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new oe(n,r)),this.resultPoints.push(new oe(i,r))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Le))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Pe{constructor(){}static getRSSvalue(e,t,n){let i=0;for(let o of e)i+=o;let r=0,s=0,a=e.length;for(let o=0;o<a-1;o++){let l;for(l=1,s|=1<<o;l<e[o];l++,s&=~(1<<o)){let e=Pe.combins(i-l-1,a-o-2);if(n&&0===s&&i-l-(a-o-1)>=a-o-1&&(e-=Pe.combins(i-l-(a-o),a-o-2)),a-o-1>1){let n=0;for(let e=i-l-(a-o-2);e>t;e--)n+=Pe.combins(i-l-e-1,a-o-3);e-=n*(a-1-o)}else i-l>t&&e--;r+=e}i-=l}return r}static combins(e,t){let n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);let r=1,s=1;for(let a=e;a>n;a--)r*=a,s<=i&&(r/=s,s++);while(s<=i)r/=s,s++;return r}}class Ue{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=12*t,i=new T(n),r=0,s=e[0],a=s.getRightChar().getValue();for(let o=11;o>=0;--o)0!=(a&1<<o)&&i.set(r),r++;for(let o=1;o<e.length;++o){let t=e[o],n=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(n&1<<e)&&i.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&i.set(r),r++}}return i}}class Be{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fe{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class je extends Fe{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===je.FNC1}}je.FNC1="$";class Ve extends Fe{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Fe{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new S;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class ze{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new M;let t=e.substring(0,2);for(let r of ze.TWO_DIGIT_DATA_LENGTH)if(r[0]===t)return r[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(2,r[2],e):ze.processFixedAI(2,r[1],e);if(e.length<3)throw new M;let n=e.substring(0,3);for(let r of ze.THREE_DIGIT_DATA_LENGTH)if(r[0]===n)return r[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(3,r[2],e):ze.processFixedAI(3,r[1],e);for(let r of ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(r[0]===n)return r[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(4,r[2],e):ze.processFixedAI(4,r[1],e);if(e.length<4)throw new M;let i=e.substring(0,4);for(let r of ze.FOUR_DIGIT_DATA_LENGTH)if(r[0]===i)return r[1]===ze.VARIABLE_LENGTH?ze.processVariableAI(4,r[2],e):ze.processFixedAI(4,r[1],e);throw new M}static processFixedAI(e,t,n){if(n.length<e)throw new M;let i=n.substring(0,e);if(n.length<e+t)throw new M;let r=n.substring(e,e+t),s=n.substring(e+t),a="("+i+")"+r,o=ze.parseFieldsInGeneralPurpose(s);return null==o?a:a+o}static processVariableAI(e,t,n){let i,r=n.substring(0,e);i=n.length<e+t?n.length:e+t;let s=n.substring(e,i),a=n.substring(i),o="("+r+")"+s,l=ze.parseFieldsInGeneralPurpose(a);return null==l?o:o+l}}ze.VARIABLE_LENGTH=[],ze.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ze.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ze.VARIABLE_LENGTH,20],["22",ze.VARIABLE_LENGTH,29],["30",ze.VARIABLE_LENGTH,8],["37",ze.VARIABLE_LENGTH,8],["90",ze.VARIABLE_LENGTH,30],["91",ze.VARIABLE_LENGTH,30],["92",ze.VARIABLE_LENGTH,30],["93",ze.VARIABLE_LENGTH,30],["94",ze.VARIABLE_LENGTH,30],["95",ze.VARIABLE_LENGTH,30],["96",ze.VARIABLE_LENGTH,30],["97",ze.VARIABLE_LENGTH,3],["98",ze.VARIABLE_LENGTH,30],["99",ze.VARIABLE_LENGTH,30]],ze.THREE_DIGIT_DATA_LENGTH=[["240",ze.VARIABLE_LENGTH,30],["241",ze.VARIABLE_LENGTH,30],["242",ze.VARIABLE_LENGTH,6],["250",ze.VARIABLE_LENGTH,30],["251",ze.VARIABLE_LENGTH,30],["253",ze.VARIABLE_LENGTH,17],["254",ze.VARIABLE_LENGTH,20],["400",ze.VARIABLE_LENGTH,30],["401",ze.VARIABLE_LENGTH,30],["402",17],["403",ze.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ze.VARIABLE_LENGTH,20],["421",ze.VARIABLE_LENGTH,15],["422",3],["423",ze.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ze.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ze.VARIABLE_LENGTH,15],["391",ze.VARIABLE_LENGTH,18],["392",ze.VARIABLE_LENGTH,15],["393",ze.VARIABLE_LENGTH,18],["703",ze.VARIABLE_LENGTH,30]],ze.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ze.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ze.VARIABLE_LENGTH,20],["8003",ze.VARIABLE_LENGTH,30],["8004",ze.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ze.VARIABLE_LENGTH,30],["8008",ze.VARIABLE_LENGTH,12],["8018",18],["8020",ze.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ze.VARIABLE_LENGTH,70],["8200",ze.VARIABLE_LENGTH,70]];class Ge{constructor(e){this.buffer=new x,this.information=e}decodeAllCodes(e,t){let n=t,i=null;do{let t=this.decodeGeneralPurposeField(n,i),r=ze.parseFieldsInGeneralPurpose(t.getNewString());if(null!=r&&e.append(r),i=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}while(1);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,i=(t-8)%11;return new He(e+7,n,i)}extractNumericValueFromBitArray(e,t){return Ge.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let i=0;for(let r=0;r<n;++r)e.get(t+r)&&(i|=1<<n-r-1);return i}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ve(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ve(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());let i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){while(this.isStillNumeric(this.current.getPosition())){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ve(this.current.getPosition(),this.buffer.toString()):new Ve(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Be(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Be(!1)}parseIsoIec646Block(){while(this.isStillIsoIec646(this.current.getPosition())){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Be(!1)}parseAlphaBlock(){while(this.isStillAlpha(this.current.getPosition())){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ve(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Be(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new je(e+5,je.FNC1);if(t>=5&&t<15)return new je(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new je(e+7,""+(n+1));if(n>=90&&n<116)return new je(e+7,""+(n+7));let i,r=this.extractNumericValueFromBitArray(e,8);switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new S}return new je(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new je(e+5,je.FNC1);if(t>=5&&t<15)return new je(e+5,"0"+(t-5));let n,i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new je(e+6,""+(i+33));switch(i){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+i)}return new je(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class qe{constructor(e){this.information=e,this.generalDecoder=new Ge(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class We extends qe{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let i=0;i<4;++i){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*i,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}We.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let i=0;i<13;i++){let r=e.charAt(i+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&i)?3*r:r}n=10-n%10,10===n&&(n=0),e.append(n)}}We.GTIN_SIZE=40;class Xe extends We{constructor(e){super(e)}parseInformation(){let e=new x;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Xe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Xe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE+44)}}Xe.HEADER_SIZE=4;class Ke extends qe{constructor(e){super(e)}parseInformation(){let e=new x;return this.getGeneralDecoder().decodeAllCodes(e,Ke.HEADER_SIZE)}}Ke.HEADER_SIZE=5;class Ye extends We{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,i);let r=this.checkWeight(i),s=1e5;for(let a=0;a<5;++a)r/s===0&&e.append("0"),s/=10;e.append(r)}}class $e extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=$e.HEADER_SIZE+Ye.GTIN_SIZE+$e.WEIGHT_SIZE)throw new M;let e=new x;return this.encodeCompressedGtin(e,$e.HEADER_SIZE),this.encodeCompressedWeight(e,$e.HEADER_SIZE+Ye.GTIN_SIZE,$e.WEIGHT_SIZE),e.toString()}}$e.HEADER_SIZE=5,$e.WEIGHT_SIZE=15;class Qe extends $e{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ze extends $e{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends We{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+We.GTIN_SIZE)throw new M;let e=new x;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+We.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+We.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends We{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+We.GTIN_SIZE)throw new M;let e=new x;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+We.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+We.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let i=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+We.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Ye{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new M;let e=new x;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let i=n%32;n/=32;let r=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),r/10==0&&e.append("0"),e.append(r),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Xe(e);if(!e.get(2))return new Ke(e);let t=Ge.extractNumericValueFromBitArray(e,1,4);switch(t){case 4:return new Qe(e);case 5:return new Ze(e)}let n=Ge.extractNumericValueFromBitArray(e,1,5);switch(n){case 12:return new Je(e);case 13:return new et(e)}let i=Ge.extractNumericValueFromBitArray(e,1,7);switch(i){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class it{constructor(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof it&&(it.equalsOrNull(e.leftchar,t.leftchar)&&it.equalsOrNull(e.rightchar,t.rightchar)&&it.equalsOrNull(e.finderpattern,t.finderpattern))}static equalsOrNull(e,t){return null===e?null===t:it.equals(e,t)}hashCode(){let e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e}}class rt{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof rt&&(this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed)}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,i)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class st extends Oe{constructor(e){super(...arguments),this.pairs=new Array(st.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return st.constructResult(this.decodeRow2pairs(e,t))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,st.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,i=!1;while(!i)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(r){if(r instanceof M){if(!this.pairs.length)throw new M;i=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new M}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let i=t;i<this.rows.length;i++){let t=this.rows[i];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!st.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let r=new Array(e);r.push(t);try{return this.checkRows(r,i+1)}catch(n){this.verbose&&console.log(n)}}throw new M}static isValidSequence(e){for(let t of st.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=t[i]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,i=!1,r=!1;while(n<this.rows.length){let t=this.rows[n];if(t.getRowNumber()>e){r=t.isEquivalent(this.pairs);break}i=t.isEquivalent(this.pairs),n++}r||i||st.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new rt(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(it.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let i of e){let e=!1;for(let t of n.getPairs())if(i.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Ue.buildBitArray(e),n=nt(t),i=n.parseInformation(),r=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),a=[r[0],r[1],s[0],s[1]];return new j(i,null,null,a,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let i=n.getChecksumPortion(),r=2;for(let a=1;a<this.pairs.size();++a){let e=this.pairs.get(a);i+=e.getLeftChar().getChecksumPortion(),r++;let t=e.getRightChar();null!=t&&(i+=t.getChecksumPortion(),r++)}i%=211;let s=211*(r-4)+i;return s==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let i,r=t.length%2==0;this.startFromEven&&(r=!r);let s=!0,a=-1;do{this.findNextPair(e,t,a),i=this.parseFoundFinderPattern(e,n,r),null==i?a=st.getNextSecondBar(e,this.startEnd[0]):s=!1}while(s);let o,l=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new M;try{o=this.decodeDataCharacter(e,i,r,!1)}catch(u){o=null,this.verbose&&console.log(u)}return new it(l,o,i,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let r,s=e.getSize();if(n>=0)r=n;else if(this.isEmptyPair(t))r=0;else{let e=t[t.length-1];r=e.getFinderPattern().getStartEnd()[1]}let a=t.length%2!=0;this.startFromEven&&(a=!a);let o=!1;while(r<s){if(o=!e.get(r),!o)break;r++}let l=0,u=r;for(let c=r;c<s;c++)if(e.get(c)!=o)i[l]++;else{if(3==l){if(a&&st.reverseCounters(i),st.isFinderPattern(i))return this.startEnd[0]=u,void(this.startEnd[1]=c);a&&st.reverseCounters(i),u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new M}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let i=e[n];e[n]=e[t-n-1],e[t-n-1]=i}}parseFoundFinderPattern(e,t,n){let i,r,s;if(n){let t=this.startEnd[0]-1;while(t>=0&&!e.get(t))t--;t++,i=this.startEnd[0]-t,r=t,s=this.startEnd[1]}else r=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];let a,o=this.getDecodeFinderCounters();g.arraycopy(o,0,o,1,o.length-1),o[0]=i;try{a=this.parseFinderValue(o,st.FINDER_PATTERNS)}catch(l){return null}return new Le(a,[r,s],r,s,t)}decodeDataCharacter(e,t,n,i){let r=this.getDataCharacterCounters();for(let A=0;A<r.length;A++)r[A]=0;if(i)st.recordPatternInReverse(e,t.getStartEnd()[0],r);else{st.recordPattern(e,t.getStartEnd()[1],r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let s=17,a=se.sum(new Int32Array(r))/s,o=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-o)/o>.3)throw new M;let l=this.getOddCounts(),u=this.getEvenCounts(),c=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let A=0;A<r.length;A++){let e=1*r[A]/a,t=e+.5;if(t<1){if(e<.3)throw new M;t=1}else if(t>8){if(e>8.7)throw new M;t=8}let n=A/2;0==(1&A)?(l[n]=t,c[n]=e-t):(u[n]=t,d[n]=e-t)}this.adjustOddEvenCounts(s);let h=4*t.getValue()+(n?0:2)+(i?0:1)-1,p=0,f=0;for(let A=l.length-1;A>=0;A--){if(st.isNotA1left(t,n,i)){let e=st.WEIGHTS[h][2*A];f+=l[A]*e}p+=l[A]}let g=0;for(let A=u.length-1;A>=0;A--)if(st.isNotA1left(t,n,i)){let e=st.WEIGHTS[h][2*A+1];g+=u[A]*e}let m=f+g;if(0!=(1&p)||p>13||p<4)throw new M;let y=(13-p)/2,v=st.SYMBOL_WIDEST[y],b=9-v,T=Pe.getRSSvalue(l,v,!0),_=Pe.getRSSvalue(u,b,!1),w=st.EVEN_TOTAL_SUBSET[y],S=st.GSUM[y],E=T*w+_+S;return new Ne(E,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=se.sum(new Int32Array(this.getOddCounts())),n=se.sum(new Int32Array(this.getEvenCounts())),i=!1,r=!1;t>13?r=!0:t<4&&(i=!0);let s=!1,a=!1;n>13?a=!0:n<4&&(s=!0);let o=t+n-e,l=1==(1&t),u=0==(1&n);if(1==o)if(l){if(u)throw new M;r=!0}else{if(!u)throw new M;a=!0}else if(-1==o)if(l){if(u)throw new M;i=!0}else{if(!u)throw new M;s=!0}else{if(0!=o)throw new M;if(l){if(!u)throw new M;t<n?(i=!0,a=!0):(r=!0,s=!0)}else if(u)throw new M}if(i){if(r)throw new M;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(r&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new M;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.SYMBOL_WIDEST=[7,5,4,3,1],st.EVEN_TOTAL_SUBSET=[4,20,52,104,204],st.GSUM=[0,348,1388,2948,3988],st.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],st.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],st.FINDER_PAT_A=0,st.FINDER_PAT_B=1,st.FINDER_PAT_C=2,st.FINDER_PAT_D=3,st.FINDER_PAT_E=4,st.FINDER_PAT_F=5,st.FINDER_PATTERN_SEQUENCES=[[st.FINDER_PAT_A,st.FINDER_PAT_A],[st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B],[st.FINDER_PAT_A,st.FINDER_PAT_C,st.FINDER_PAT_B,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_C],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_E,st.FINDER_PAT_B,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F],[st.FINDER_PAT_A,st.FINDER_PAT_A,st.FINDER_PAT_B,st.FINDER_PAT_B,st.FINDER_PAT_C,st.FINDER_PAT_D,st.FINDER_PAT_D,st.FINDER_PAT_E,st.FINDER_PAT_E,st.FINDER_PAT_F,st.FINDER_PAT_F]],st.MAX_PAIRS=11;class at extends Ne{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ot extends Oe{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const i=this.decodePair(t,!1,e,n);ot.addOrTally(this.possibleLeftPairs,i),t.reverse();let r=this.decodePair(t,!0,e,n);ot.addOrTally(this.possibleRightPairs,r),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&ot.checkChecksum(s,e))return ot.constructResult(s,e);throw new M}static addOrTally(e,t){if(null==t)return;let n=!1;for(let i of e)if(i.getValue()===t.getValue()){i.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),i=new String(n).toString(),r=new x;for(let l=13-i.length;l>0;l--)r.append("0");r.append(i);let s=0;for(let l=0;l<13;l++){let e=r.charAt(l).charCodeAt(0)-"0".charCodeAt(0);s+=0===(1&l)?3*e:e}s=10-s%10,10===s&&(s=0),r.append(s.toString());let a=e.getFinderPattern().getResultPoints(),o=t.getFinderPattern().getResultPoints();return new j(r.toString(),null,0,[a[0],a[1],o[0],o[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,n===i}decodePair(e,t,n,i){try{let r=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,r),a=null==i?null:i.get(w.NEED_RESULT_POINT_CALLBACK);if(null!=a){let i=(r[0]+r[1])/2;t&&(i=e.getSize()-1-i),a.foundPossibleResultPoint(new oe(i,n))}let o=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new at(1597*o.getValue()+l.getValue(),o.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(r){return null}}decodeDataCharacter(e,t,n){let i=this.getDataCharacterCounters();for(let g=0;g<i.length;g++)i[g]=0;if(n)be.recordPatternInReverse(e,t.getStartEnd()[0],i);else{be.recordPattern(e,t.getStartEnd()[1]+1,i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let r=n?16:15,s=se.sum(new Int32Array(i))/r,a=this.getOddCounts(),o=this.getEvenCounts(),l=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let g=0;g<i.length;g++){let e=i[g]/s,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(g/2);0===(1&g)?(a[n]=t,l[n]=e-t):(o[n]=t,u[n]=e-t)}this.adjustOddEvenCounts(n,r);let c=0,d=0;for(let g=a.length-1;g>=0;g--)d*=9,d+=a[g],c+=a[g];let h=0,p=0;for(let g=o.length-1;g>=0;g--)h*=9,h+=o[g],p+=o[g];let f=d+3*h;if(n){if(0!==(1&c)||c>12||c<4)throw new M;let e=(12-c)/2,t=ot.OUTSIDE_ODD_WIDEST[e],n=9-t,i=Pe.getRSSvalue(a,t,!1),r=Pe.getRSSvalue(o,n,!0),s=ot.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=ot.OUTSIDE_GSUM[e];return new Ne(i*s+r+l,f)}{if(0!==(1&p)||p>10||p<4)throw new M;let e=(10-p)/2,t=ot.INSIDE_ODD_WIDEST[e],n=9-t,i=Pe.getRSSvalue(a,t,!0),r=Pe.getRSSvalue(o,n,!1),s=ot.INSIDE_ODD_TOTAL_SUBSET[e],l=ot.INSIDE_GSUM[e];return new Ne(r*s+i+l,f)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),r=!1,s=0;while(s<i){if(r=!e.get(s),t===r)break;s++}let a=0,o=s;for(let l=s;l<i;l++)if(e.get(l)!==r)n[a]++;else{if(3===a){if(Oe.isFinderPattern(n))return[o,l];o+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,r=!r}throw new M}parseFoundFinderPattern(e,t,n,i){let r=e.get(i[0]),s=i[0]-1;while(s>=0&&r!==e.get(s))s--;s++;const a=i[0]-s,o=this.getDecodeFinderCounters(),l=new Int32Array(o.length);g.arraycopy(o,0,l,1,o.length-1),l[0]=a;const u=this.parseFinderValue(l,ot.FINDER_PATTERNS);let c=s,d=i[1];return n&&(c=e.getSize()-1-c,d=e.getSize()-1-d),new Le(u,[s,i[1]],c,d,t)}adjustOddEvenCounts(e,t){let n=se.sum(new Int32Array(this.getOddCounts())),i=se.sum(new Int32Array(this.getEvenCounts())),r=!1,s=!1,a=!1,o=!1;e?(n>12?s=!0:n<4&&(r=!0),i>12?o=!0:i<4&&(a=!0)):(n>11?s=!0:n<5&&(r=!0),i>10?o=!0:i<4&&(a=!0));let l=n+i-t,u=(1&n)===(e?1:0),c=1===(1&i);if(1===l)if(u){if(c)throw new M;s=!0}else{if(!c)throw new M;o=!0}else if(-1===l)if(u){if(c)throw new M;r=!0}else{if(!c)throw new M;a=!0}else{if(0!==l)throw new M;if(u){if(!c)throw new M;n<i?(r=!0,o=!0):(s=!0,a=!0)}else if(c)throw new M}if(r){if(s)throw new M;Oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(o)throw new M;Oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&Oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ot.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ot.OUTSIDE_GSUM=[0,161,961,2015,2715],ot.INSIDE_GSUM=[0,336,1036,1516],ot.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ot.INSIDE_ODD_WIDEST=[2,4,6,8],ot.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends be{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(w.POSSIBLE_FORMATS):null,i=e&&void 0!==e.get(w.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new Re(e)),n.includes(H.CODE_39)&&this.readers.push(new _e(i)),n.includes(H.CODE_128)&&this.readers.push(new Te),n.includes(H.ITF)&&this.readers.push(new we),n.includes(H.RSS_14)&&this.readers.push(new ot),n.includes(H.RSS_EXPANDED)&&this.readers.push(new st(this.verbose))):(this.readers.push(new Re(e)),this.readers.push(new _e),this.readers.push(new Re(e)),this.readers.push(new Te),this.readers.push(new we),this.readers.push(new ot),this.readers.push(new st(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(i){}throw new M}reset(){this.readers.forEach(e=>e.reset())}}class ut extends F{constructor(e=500,t){super(new lt(t),e,t)}}class ct{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,i,r,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=r,this.ecBlocks=s;let a=0;const o=s.getECCodewords(),l=s.getECBlocks();for(let u of l)a+=u.getCount()*(u.getDataCodewords()+o);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new S;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new S}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ct(5,new dt(1,3))),new ht(2,12,12,10,10,new ct(7,new dt(1,5))),new ht(3,14,14,12,12,new ct(10,new dt(1,8))),new ht(4,16,16,14,14,new ct(12,new dt(1,12))),new ht(5,18,18,16,16,new ct(14,new dt(1,18))),new ht(6,20,20,18,18,new ct(18,new dt(1,22))),new ht(7,22,22,20,20,new ct(20,new dt(1,30))),new ht(8,24,24,22,22,new ct(24,new dt(1,36))),new ht(9,26,26,24,24,new ct(28,new dt(1,44))),new ht(10,32,32,14,14,new ct(36,new dt(1,62))),new ht(11,36,36,16,16,new ct(42,new dt(1,86))),new ht(12,40,40,18,18,new ct(48,new dt(1,114))),new ht(13,44,44,20,20,new ct(56,new dt(1,144))),new ht(14,48,48,22,22,new ct(68,new dt(1,174))),new ht(15,52,52,24,24,new ct(42,new dt(2,102))),new ht(16,64,64,14,14,new ct(56,new dt(2,140))),new ht(17,72,72,16,16,new ct(36,new dt(4,92))),new ht(18,80,80,18,18,new ct(48,new dt(4,114))),new ht(19,88,88,20,20,new ct(56,new dt(4,144))),new ht(20,96,96,22,22,new ct(68,new dt(4,174))),new ht(21,104,104,24,24,new ct(56,new dt(6,136))),new ht(22,120,120,18,18,new ct(68,new dt(6,175))),new ht(23,132,132,20,20,new ct(62,new dt(8,163))),new ht(24,144,144,22,22,new ct(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ct(7,new dt(1,5))),new ht(26,8,32,6,14,new ct(11,new dt(1,10))),new ht(27,12,26,10,24,new ct(14,new dt(1,16))),new ht(28,12,36,10,16,new ct(18,new dt(1,22))),new ht(29,16,36,14,16,new ct(24,new dt(1,32))),new ht(30,16,48,14,22,new ct(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class pt{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new S;this.version=pt.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new k(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,i=0;const r=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let a=!1,o=!1,l=!1,u=!1;do{if(n!==r||0!==i||a)if(n!==r-2||0!==i||0===(3&s)||o)if(n!==r+4||2!==i||0!==(7&s)||l)if(n!==r-2||0!==i||4!==(7&s)||u){do{n<r&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=255&this.readUtah(n,i,r,s)),n-=2,i+=2}while(n>=0&&i<s);n+=1,i+=3;do{n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=255&this.readUtah(n,i,r,s)),n+=2,i-=2}while(n<r&&i>=0);n+=3,i+=1}else e[t++]=255&this.readCorner4(r,s),n-=2,i+=2,u=!0;else e[t++]=255&this.readCorner3(r,s),n-=2,i+=2,l=!0;else e[t++]=255&this.readCorner2(r,s),n-=2,i+=2,o=!0;else e[t++]=255&this.readCorner1(r,s),n-=2,i+=2,a=!0}while(n<r||i<s);if(t!==this.version.getTotalCodewords())throw new S;return e}readModule(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,i){let r=0;return this.readModule(e-2,t-2,n,i)&&(r|=1),r<<=1,this.readModule(e-2,t-1,n,i)&&(r|=1),r<<=1,this.readModule(e-1,t-2,n,i)&&(r|=1),r<<=1,this.readModule(e-1,t-1,n,i)&&(r|=1),r<<=1,this.readModule(e-1,t,n,i)&&(r|=1),r<<=1,this.readModule(e,t-2,n,i)&&(r|=1),r<<=1,this.readModule(e,t-1,n,i)&&(r|=1),r<<=1,this.readModule(e,t,n,i)&&(r|=1),r}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),r=this.version.getDataRegionSizeColumns(),s=t/i|0,a=n/r|0,o=s*i,l=a*r,u=new k(l,o);for(let c=0;c<s;++c){const t=c*i;for(let n=0;n<a;++n){const s=n*r;for(let a=0;a<i;++a){const o=c*(i+2)+1+a,l=t+a;for(let t=0;t<r;++t){const i=n*(r+2)+1+t;if(e.get(i,o)){const e=s+t;u.set(e,l)}}}}}return u}}class ft{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let i=0;const r=n.getECBlocks();for(let d of r)i+=d.getCount();const s=new Array(i);let a=0;for(let d of r)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewords()+e;s[a++]=new ft(e,new Uint8Array(t))}const o=s[0].codewords.length,l=o-n.getECCodewords(),u=l-1;let c=0;for(let d=0;d<u;d++)for(let t=0;t<a;t++)s[t].codewords[d]=e[c++];const h=24===t.getVersionNumber(),p=h?8:a;for(let d=0;d<p;d++)s[d].codewords[l-1]=e[c++];const f=s[0].codewords.length;for(let d=l;d<f;d++)for(let t=0;t<a;t++){const n=h?(t+8)%a:t,i=h&&n>7?d-1:d;s[n].codewords[i]=e[c++]}if(c!==e.length)throw new d;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,n=this.bitOffset,i=this.byteOffset;const r=this.bytes;if(n>0){const s=8-n,a=e<s?e:s,o=s-a,l=255>>8-a<<o;t=(r[i]&l)>>o,e-=a,n+=a,8===n&&(n=0,i++)}if(e>0){while(e>=8)t=t<<8|255&r[i],i++,e-=8;if(e>0){const s=8-e,a=255>>s<<s;t=t<<e|(r[i]&a)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=i,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(function(e){e[e["PAD_ENCODE"]=0]="PAD_ENCODE",e[e["ASCII_ENCODE"]=1]="ASCII_ENCODE",e[e["C40_ENCODE"]=2]="C40_ENCODE",e[e["TEXT_ENCODE"]=3]="TEXT_ENCODE",e[e["ANSIX12_ENCODE"]=4]="ANSIX12_ENCODE",e[e["EDIFACT_ENCODE"]=5]="EDIFACT_ENCODE",e[e["BASE256_ENCODE"]=6]="BASE256_ENCODE"})(G||(G={}));class mt{static decode(e){const t=new gt(e),n=new x,i=new x,r=new Array;let s=G.ASCII_ENCODE;do{if(s===G.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case G.C40_ENCODE:this.decodeC40Segment(t,n);break;case G.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case G.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case G.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case G.BASE256_ENCODE:this.decodeBase256Segment(t,n,r);break;default:throw new S}s=G.ASCII_ENCODE}}while(s!==G.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new $(e,n.toString(),0===r.length?null:r,null)}static decodeAsciiSegment(e,t,n){let i=!1;do{let r=e.readBits(8);if(0===r)throw new S;if(r<=128)return i&&(r+=128),t.append(String.fromCharCode(r-1)),G.ASCII_ENCODE;if(129===r)return G.PAD_ENCODE;if(r<=229){const e=r-130;e<10&&t.append("0"),t.append(""+e)}else switch(r){case 230:return G.C40_ENCODE;case 231:return G.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return G.ANSIX12_ENCODE;case 239:return G.TEXT_ENCODE;case 240:return G.EDIFACT_ENCODE;case 241:break;default:if(254!==r||0!==e.available())throw new S;break}}while(e.available()>0);return G.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const i=[];let r=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),i);for(let e=0;e<3;e++){const s=i[e];switch(r){case 0:if(s<3)r=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new S;{const e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),r=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new S}r=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),r=0;break;default:throw new S}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,i=[],r=0;do{if(8===e.available())return;const s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),i);for(let e=0;e<3;e++){const s=i[e];switch(r){case 0:if(s<3)r=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new S;{const e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),r=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new S}r=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new S;{const e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),r=0}break;default:throw new S}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),n);for(let e=0;e<3;e++){const i=n[e];switch(i){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(i<14)t.append(String.fromCharCode(i+44));else{if(!(i<40))throw new S;t.append(String.fromCharCode(i+51))}break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let i=(e<<8)+t-1,r=Math.floor(i/1600);n[0]=r,i-=1600*r,r=Math.floor(i/40),n[1]=r,n[2]=i-40*r}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let i=1+e.getByteOffset();const r=this.unrandomize255State(e.readBits(8),i++);let s;if(s=0===r?e.available()/8|0:r<250?r:250*(r-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new S;const a=new Uint8Array(s);for(let l=0;l<s;l++){if(e.available()<8)throw new S;a[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{t.append(C.decode(a,I.ISO88591))}catch(o){throw new ne("Platform does not support required encoding: "+o.message)}}static unrandomize255State(e,t){const n=149*t%255+1,i=e-n;return i>=0?i:i+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new ie(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new pt(e),n=t.getVersion(),i=t.readCodewords(),r=ft.getDataBlocks(i,n);let s=0;for(let l of r)s+=l.getNumDataCodewords();const a=new Uint8Array(s),o=r.length;for(let l=0;l<o;l++){const e=r[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let i=0;i<n;i++)a[i*o+l]=t[i]}return mt.decode(a)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(i){throw new p}for(let r=0;r<t;r++)e[r]=n[r]}}class vt{constructor(e){this.image=e,this.rectangleDetector=new ce(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new M;t=this.shiftToModuleCenter(t);const n=t[0],i=t[1],r=t[2],s=t[3];let a=this.transitionsBetween(n,s)+1,o=this.transitionsBetween(r,s)+1;1===(1&a)&&(a+=1),1===(1&o)&&(o+=1),4*a<7*o&&4*o<7*a&&(a=o=Math.max(a,o));let l=vt.sampleGrid(this.image,n,i,r,s,a,o);return new le(l,[n,i,r,s])}static shiftPoint(e,t,n){let i=(t.getX()-e.getX())/(n+1),r=(t.getY()-e.getY())/(n+1);return new oe(e.getX()+i,e.getY()+r)}static moveAway(e,t,n){let i=e.getX(),r=e.getY();return i<t?i-=1:i+=1,r<n?r-=1:r+=1,new oe(i,r)}detectSolid1(e){let t=e[0],n=e[1],i=e[3],r=e[2],s=this.transitionsBetween(t,n),a=this.transitionsBetween(n,i),o=this.transitionsBetween(i,r),l=this.transitionsBetween(r,t),u=s,c=[r,t,n,i];return u>a&&(u=a,c[0]=t,c[1]=n,c[2]=i,c[3]=r),u>o&&(u=o,c[0]=n,c[1]=i,c[2]=r,c[3]=t),u>l&&(c[0]=i,c[1]=r,c[2]=t,c[3]=n),c}detectSolid2(e){let t=e[0],n=e[1],i=e[2],r=e[3],s=this.transitionsBetween(t,r),a=vt.shiftPoint(n,i,4*(s+1)),o=vt.shiftPoint(i,n,4*(s+1)),l=this.transitionsBetween(a,t),u=this.transitionsBetween(o,r);return l<u?(e[0]=t,e[1]=n,e[2]=i,e[3]=r):(e[0]=n,e[1]=i,e[2]=r,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],i=e[2],r=e[3],s=this.transitionsBetween(t,r),a=this.transitionsBetween(n,r),o=vt.shiftPoint(t,n,4*(a+1)),l=vt.shiftPoint(i,n,4*(s+1));s=this.transitionsBetween(o,r),a=this.transitionsBetween(l,r);let u=new oe(r.getX()+(i.getX()-n.getX())/(s+1),r.getY()+(i.getY()-n.getY())/(s+1)),c=new oe(r.getX()+(t.getX()-n.getX())/(a+1),r.getY()+(t.getY()-n.getY())/(a+1));if(!this.isValid(u))return this.isValid(c)?c:null;if(!this.isValid(c))return u;let d=this.transitionsBetween(o,u)+this.transitionsBetween(l,u),h=this.transitionsBetween(o,c)+this.transitionsBetween(l,c);return d>h?u:c}shiftToModuleCenter(e){let t=e[0],n=e[1],i=e[2],r=e[3],s=this.transitionsBetween(t,r)+1,a=this.transitionsBetween(i,r)+1,o=vt.shiftPoint(t,n,4*a),l=vt.shiftPoint(i,n,4*s);s=this.transitionsBetween(o,r)+1,a=this.transitionsBetween(l,r)+1,1===(1&s)&&(s+=1),1===(1&a)&&(a+=1);let u,c,d=(t.getX()+n.getX()+i.getX()+r.getX())/4,h=(t.getY()+n.getY()+i.getY()+r.getY())/4;return t=vt.moveAway(t,d,h),n=vt.moveAway(n,d,h),i=vt.moveAway(i,d,h),r=vt.moveAway(r,d,h),o=vt.shiftPoint(t,n,4*a),o=vt.shiftPoint(o,r,4*s),u=vt.shiftPoint(n,t,4*a),u=vt.shiftPoint(u,i,4*s),l=vt.shiftPoint(i,r,4*a),l=vt.shiftPoint(l,n,4*s),c=vt.shiftPoint(r,i,4*a),c=vt.shiftPoint(c,t,4*s),[o,u,l,c]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,i,r,s,a){const o=fe.getInstance();return o.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),r=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(r-n);if(a){let e=n;n=i,i=e,e=r,r=s,s=e}let o=Math.abs(r-n),l=Math.abs(s-i),u=-o/2,c=i<s?1:-1,d=n<r?1:-1,h=0,p=this.image.get(a?i:n,a?n:i);for(let f=n,g=i;f!==r;f+=d){let e=this.image.get(a?g:f,a?f:g);if(e!==p&&(h++,p=e),u+=l,u>0){if(g===s)break;g+=c,u-=o}}return h}}class bt{constructor(){this.decoder=new yt}decode(e,t=null){let n,i;if(null!=t&&t.has(w.PURE_BARCODE)){const t=bt.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(t),i=bt.NO_POINTS}else{const t=new vt(e.getBlackMatrix()).detect();n=this.decoder.decode(t.getBits()),i=t.getPoints()}const r=n.getRawBytes(),s=new j(n.getText(),r,8*r.length,i,H.DATA_MATRIX,g.currentTimeMillis()),a=n.getByteSegments();null!=a&&s.putMetadata(Y.BYTE_SEGMENTS,a);const o=n.getECLevel();return null!=o&&s.putMetadata(Y.ERROR_CORRECTION_LEVEL,o),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new M;const i=this.moduleSize(t,e);let r=t[1];const s=n[1];let a=t[0];const o=n[0],l=(o-a+1)/i,u=(s-r+1)/i;if(l<=0||u<=0)throw new M;const c=i/2;r+=c,a+=c;const d=new k(l,u);for(let h=0;h<u;h++){const t=r+h*i;for(let n=0;n<l;n++)e.get(a+n*i,t)&&d.set(n,h)}return d}static moduleSize(e,t){const n=t.getWidth();let i=e[0];const r=e[1];while(i<n&&t.get(i,r))i++;if(i===n)throw new M;const s=i-e[0];if(0===s)throw new M;return s}}bt.NO_POINTS=[];class Tt extends F{constructor(e=500){super(new bt,e)}}(function(e){e[e["L"]=0]="L",e[e["M"]=1]="M",e[e["Q"]=2]="Q",e[e["H"]=3]="H"})(q||(q={}));class _t{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,_t.FOR_BITS.set(n,this),_t.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return _t.L;case"M":return _t.M;case"Q":return _t.Q;case"H":return _t.H;default:throw new c(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=_t.FOR_BITS.size)throw new d;return _t.FOR_BITS.get(e)}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.L=new _t(q.L,"L",1),_t.M=new _t(q.M,"M",0),_t.Q=new _t(q.Q,"Q",3),_t.H=new _t(q.H,"H",2);class wt{constructor(e){this.errorCorrectionLevel=_t.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return b.bitCount(e^t)}static decodeFormatInformation(e,t){const n=wt.doDecodeFormatInformation(e,t);return null!==n?n:wt.doDecodeFormatInformation(e^wt.FORMAT_INFO_MASK_QR,t^wt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,i=0;for(const r of wt.FORMAT_INFO_DECODE_LOOKUP){const s=r[0];if(s===e||s===t)return new wt(r[1]);let a=wt.numBitsDiffering(e,s);a<n&&(i=r[1],n=a),e!==t&&(a=wt.numBitsDiffering(t,s),a<n&&(i=r[1],n=a))}return n<=3?new wt(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof wt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}wt.FORMAT_INFO_MASK_QR=21522,wt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class St{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Et{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let i=0;const r=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(const a of s)i+=a.getCount()*(a.getDataCodewords()+r);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new S;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new S}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return At.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let i=0;i<At.VERSION_DECODE_INFO.length;i++){const r=At.VERSION_DECODE_INFO[i];if(r===e)return At.getVersionForNumber(i+7);const s=wt.numBitsDiffering(e,r);s<t&&(n=i+7,t=s)}return t<=3?At.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new k(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let i=0;i<n;i++){const e=this.alignmentPatternCenters[i]-2;for(let r=0;r<n;r++)0===i&&(0===r||r===n-1)||i===n-1&&0===r||t.setRegion(this.alignmentPatternCenters[r]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new St(7,new Et(1,19)),new St(10,new Et(1,16)),new St(13,new Et(1,13)),new St(17,new Et(1,9))),new At(2,Int32Array.from([6,18]),new St(10,new Et(1,34)),new St(16,new Et(1,28)),new St(22,new Et(1,22)),new St(28,new Et(1,16))),new At(3,Int32Array.from([6,22]),new St(15,new Et(1,55)),new St(26,new Et(1,44)),new St(18,new Et(2,17)),new St(22,new Et(2,13))),new At(4,Int32Array.from([6,26]),new St(20,new Et(1,80)),new St(18,new Et(2,32)),new St(26,new Et(2,24)),new St(16,new Et(4,9))),new At(5,Int32Array.from([6,30]),new St(26,new Et(1,108)),new St(24,new Et(2,43)),new St(18,new Et(2,15),new Et(2,16)),new St(22,new Et(2,11),new Et(2,12))),new At(6,Int32Array.from([6,34]),new St(18,new Et(2,68)),new St(16,new Et(4,27)),new St(24,new Et(4,19)),new St(28,new Et(4,15))),new At(7,Int32Array.from([6,22,38]),new St(20,new Et(2,78)),new St(18,new Et(4,31)),new St(18,new Et(2,14),new Et(4,15)),new St(26,new Et(4,13),new Et(1,14))),new At(8,Int32Array.from([6,24,42]),new St(24,new Et(2,97)),new St(22,new Et(2,38),new Et(2,39)),new St(22,new Et(4,18),new Et(2,19)),new St(26,new Et(4,14),new Et(2,15))),new At(9,Int32Array.from([6,26,46]),new St(30,new Et(2,116)),new St(22,new Et(3,36),new Et(2,37)),new St(20,new Et(4,16),new Et(4,17)),new St(24,new Et(4,12),new Et(4,13))),new At(10,Int32Array.from([6,28,50]),new St(18,new Et(2,68),new Et(2,69)),new St(26,new Et(4,43),new Et(1,44)),new St(24,new Et(6,19),new Et(2,20)),new St(28,new Et(6,15),new Et(2,16))),new At(11,Int32Array.from([6,30,54]),new St(20,new Et(4,81)),new St(30,new Et(1,50),new Et(4,51)),new St(28,new Et(4,22),new Et(4,23)),new St(24,new Et(3,12),new Et(8,13))),new At(12,Int32Array.from([6,32,58]),new St(24,new Et(2,92),new Et(2,93)),new St(22,new Et(6,36),new Et(2,37)),new St(26,new Et(4,20),new Et(6,21)),new St(28,new Et(7,14),new Et(4,15))),new At(13,Int32Array.from([6,34,62]),new St(26,new Et(4,107)),new St(22,new Et(8,37),new Et(1,38)),new St(24,new Et(8,20),new Et(4,21)),new St(22,new Et(12,11),new Et(4,12))),new At(14,Int32Array.from([6,26,46,66]),new St(30,new Et(3,115),new Et(1,116)),new St(24,new Et(4,40),new Et(5,41)),new St(20,new Et(11,16),new Et(5,17)),new St(24,new Et(11,12),new Et(5,13))),new At(15,Int32Array.from([6,26,48,70]),new St(22,new Et(5,87),new Et(1,88)),new St(24,new Et(5,41),new Et(5,42)),new St(30,new Et(5,24),new Et(7,25)),new St(24,new Et(11,12),new Et(7,13))),new At(16,Int32Array.from([6,26,50,74]),new St(24,new Et(5,98),new Et(1,99)),new St(28,new Et(7,45),new Et(3,46)),new St(24,new Et(15,19),new Et(2,20)),new St(30,new Et(3,15),new Et(13,16))),new At(17,Int32Array.from([6,30,54,78]),new St(28,new Et(1,107),new Et(5,108)),new St(28,new Et(10,46),new Et(1,47)),new St(28,new Et(1,22),new Et(15,23)),new St(28,new Et(2,14),new Et(17,15))),new At(18,Int32Array.from([6,30,56,82]),new St(30,new Et(5,120),new Et(1,121)),new St(26,new Et(9,43),new Et(4,44)),new St(28,new Et(17,22),new Et(1,23)),new St(28,new Et(2,14),new Et(19,15))),new At(19,Int32Array.from([6,30,58,86]),new St(28,new Et(3,113),new Et(4,114)),new St(26,new Et(3,44),new Et(11,45)),new St(26,new Et(17,21),new Et(4,22)),new St(26,new Et(9,13),new Et(16,14))),new At(20,Int32Array.from([6,34,62,90]),new St(28,new Et(3,107),new Et(5,108)),new St(26,new Et(3,41),new Et(13,42)),new St(30,new Et(15,24),new Et(5,25)),new St(28,new Et(15,15),new Et(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new St(28,new Et(4,116),new Et(4,117)),new St(26,new Et(17,42)),new St(28,new Et(17,22),new Et(6,23)),new St(30,new Et(19,16),new Et(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new St(28,new Et(2,111),new Et(7,112)),new St(28,new Et(17,46)),new St(30,new Et(7,24),new Et(16,25)),new St(24,new Et(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new St(30,new Et(4,121),new Et(5,122)),new St(28,new Et(4,47),new Et(14,48)),new St(30,new Et(11,24),new Et(14,25)),new St(30,new Et(16,15),new Et(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new St(30,new Et(6,117),new Et(4,118)),new St(28,new Et(6,45),new Et(14,46)),new St(30,new Et(11,24),new Et(16,25)),new St(30,new Et(30,16),new Et(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new St(26,new Et(8,106),new Et(4,107)),new St(28,new Et(8,47),new Et(13,48)),new St(30,new Et(7,24),new Et(22,25)),new St(30,new Et(22,15),new Et(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new St(28,new Et(10,114),new Et(2,115)),new St(28,new Et(19,46),new Et(4,47)),new St(28,new Et(28,22),new Et(6,23)),new St(30,new Et(33,16),new Et(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new St(30,new Et(8,122),new Et(4,123)),new St(28,new Et(22,45),new Et(3,46)),new St(30,new Et(8,23),new Et(26,24)),new St(30,new Et(12,15),new Et(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new St(30,new Et(3,117),new Et(10,118)),new St(28,new Et(3,45),new Et(23,46)),new St(30,new Et(4,24),new Et(31,25)),new St(30,new Et(11,15),new Et(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new St(30,new Et(7,116),new Et(7,117)),new St(28,new Et(21,45),new Et(7,46)),new St(30,new Et(1,23),new Et(37,24)),new St(30,new Et(19,15),new Et(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new St(30,new Et(5,115),new Et(10,116)),new St(28,new Et(19,47),new Et(10,48)),new St(30,new Et(15,24),new Et(25,25)),new St(30,new Et(23,15),new Et(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new St(30,new Et(13,115),new Et(3,116)),new St(28,new Et(2,46),new Et(29,47)),new St(30,new Et(42,24),new Et(1,25)),new St(30,new Et(23,15),new Et(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new St(30,new Et(17,115)),new St(28,new Et(10,46),new Et(23,47)),new St(30,new Et(10,24),new Et(35,25)),new St(30,new Et(19,15),new Et(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new St(30,new Et(17,115),new Et(1,116)),new St(28,new Et(14,46),new Et(21,47)),new St(30,new Et(29,24),new Et(19,25)),new St(30,new Et(11,15),new Et(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new St(30,new Et(13,115),new Et(6,116)),new St(28,new Et(14,46),new Et(23,47)),new St(30,new Et(44,24),new Et(7,25)),new St(30,new Et(59,16),new Et(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new St(30,new Et(12,121),new Et(7,122)),new St(28,new Et(12,47),new Et(26,48)),new St(30,new Et(39,24),new Et(14,25)),new St(30,new Et(22,15),new Et(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new St(30,new Et(6,121),new Et(14,122)),new St(28,new Et(6,47),new Et(34,48)),new St(30,new Et(46,24),new Et(10,25)),new St(30,new Et(2,15),new Et(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new St(30,new Et(17,122),new Et(4,123)),new St(28,new Et(29,46),new Et(14,47)),new St(30,new Et(49,24),new Et(10,25)),new St(30,new Et(24,15),new Et(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new St(30,new Et(4,122),new Et(18,123)),new St(28,new Et(13,46),new Et(32,47)),new St(30,new Et(48,24),new Et(14,25)),new St(30,new Et(42,15),new Et(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new St(30,new Et(20,117),new Et(4,118)),new St(28,new Et(40,47),new Et(7,48)),new St(30,new Et(43,24),new Et(22,25)),new St(30,new Et(10,15),new Et(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new St(30,new Et(19,118),new Et(6,119)),new St(28,new Et(18,47),new Et(31,48)),new St(30,new Et(34,24),new Et(34,25)),new St(30,new Et(20,15),new Et(61,16)))],function(e){e[e["DATA_MASK_000"]=0]="DATA_MASK_000",e[e["DATA_MASK_001"]=1]="DATA_MASK_001",e[e["DATA_MASK_010"]=2]="DATA_MASK_010",e[e["DATA_MASK_011"]=3]="DATA_MASK_011",e[e["DATA_MASK_100"]=4]="DATA_MASK_100",e[e["DATA_MASK_101"]=5]="DATA_MASK_101",e[e["DATA_MASK_110"]=6]="DATA_MASK_110",e[e["DATA_MASK_111"]=7]="DATA_MASK_111"}(W||(W={}));class Ct{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)}}Ct.values=new Map([[W.DATA_MASK_000,new Ct(W.DATA_MASK_000,(e,t)=>0===(e+t&1))],[W.DATA_MASK_001,new Ct(W.DATA_MASK_001,(e,t)=>0===(1&e))],[W.DATA_MASK_010,new Ct(W.DATA_MASK_010,(e,t)=>t%3===0)],[W.DATA_MASK_011,new Ct(W.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[W.DATA_MASK_100,new Ct(W.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[W.DATA_MASK_101,new Ct(W.DATA_MASK_101,(e,t)=>e*t%6===0)],[W.DATA_MASK_110,new Ct(W.DATA_MASK_110,(e,t)=>e*t%6<3)],[W.DATA_MASK_111,new Ct(W.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class It{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new S;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let r=5;r>=0;r--)e=this.copyBit(8,r,e);const t=this.bitMatrix.getHeight();let n=0;const i=t-7;for(let r=t-1;r>=i;r--)n=this.copyBit(8,r,n);for(let r=t-8;r<t;r++)n=this.copyBit(r,8,n);if(this.parsedFormatInfo=wt.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new S}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);let n=0;const i=e-11;for(let s=5;s>=0;s--)for(let t=e-9;t>=i;t--)n=this.copyBit(t,s,n);let r=At.decodeVersionInformation(n);if(null!==r&&r.getDimensionForVersion()===e)return this.parsedVersion=r,r;n=0;for(let s=5;s>=0;s--)for(let t=e-9;t>=i;t--)n=this.copyBit(s,t,n);if(r=At.decodeVersionInformation(n),null!==r&&r.getDimensionForVersion()===e)return this.parsedVersion=r,r;throw new S}copyBit(e,t,n){const i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Ct.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);const r=t.buildFunctionPattern();let s=!0;const a=new Uint8Array(t.getTotalCodewords());let o=0,l=0,u=0;for(let c=i-1;c>0;c-=2){6===c&&c--;for(let e=0;e<i;e++){const t=s?i-1-e:e;for(let e=0;e<2;e++)r.get(c-e,t)||(u++,l<<=1,this.bitMatrix.get(c-e,t)&&(l|=1),8===u&&(a[o++]=l,u=0,l=0))}s=!s}if(o!==t.getTotalCodewords())throw new S;return a}remask(){if(null===this.parsedFormatInfo)return;const e=Ct.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let i=t+1,r=e.getHeight();i<r;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))}}class xt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new d;const i=t.getECBlocksForLevel(n);let r=0;const s=i.getECBlocks();for(const d of s)r+=d.getCount();const a=new Array(r);let o=0;for(const d of s)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=i.getECCodewordsPerBlock()+e;a[o++]=new xt(e,new Uint8Array(t))}const l=a[0].codewords.length;let u=a.length-1;while(u>=0){const e=a[u].codewords.length;if(e===l)break;u--}u++;const c=l-i.getECCodewordsPerBlock();let h=0;for(let d=0;d<c;d++)for(let t=0;t<o;t++)a[t].codewords[d]=e[h++];for(let d=u;d<o;d++)a[d].codewords[c]=e[h++];const p=a[0].codewords.length;for(let d=c;d<p;d++)for(let t=0;t<o;t++){const n=t<u?d:d+1;a[t].codewords[n]=e[h++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(function(e){e[e["TERMINATOR"]=0]="TERMINATOR",e[e["NUMERIC"]=1]="NUMERIC",e[e["ALPHANUMERIC"]=2]="ALPHANUMERIC",e[e["STRUCTURED_APPEND"]=3]="STRUCTURED_APPEND",e[e["BYTE"]=4]="BYTE",e[e["ECI"]=5]="ECI",e[e["KANJI"]=6]="KANJI",e[e["FNC1_FIRST_POSITION"]=7]="FNC1_FIRST_POSITION",e[e["FNC1_SECOND_POSITION"]=8]="FNC1_SECOND_POSITION",e[e["HANZI"]=9]="HANZI"})(X||(X={}));class kt{constructor(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,kt.FOR_BITS.set(i,this),kt.FOR_VALUE.set(e,this)}static forBits(e){const t=kt.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof kt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}kt.FOR_BITS=new Map,kt.FOR_VALUE=new Map,kt.TERMINATOR=new kt(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),kt.NUMERIC=new kt(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),kt.ALPHANUMERIC=new kt(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),kt.STRUCTURED_APPEND=new kt(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),kt.BYTE=new kt(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),kt.ECI=new kt(X.ECI,"ECI",Int32Array.from([0,0,0]),7),kt.KANJI=new kt(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),kt.FNC1_FIRST_POSITION=new kt(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),kt.FNC1_SECOND_POSITION=new kt(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),kt.HANZI=new kt(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Mt{static decode(e,t,n,i){const r=new gt(e);let s=new x;const a=new Array;let o=-1,l=-1;try{let e,n=null,u=!1;do{if(r.available()<4)e=kt.TERMINATOR;else{const t=r.readBits(4);e=kt.forBits(t)}switch(e){case kt.TERMINATOR:break;case kt.FNC1_FIRST_POSITION:case kt.FNC1_SECOND_POSITION:u=!0;break;case kt.STRUCTURED_APPEND:if(r.available()<16)throw new S;o=r.readBits(8),l=r.readBits(8);break;case kt.ECI:const c=Mt.parseECIValue(r);if(n=E.getCharacterSetECIByValue(c),null===n)throw new S;break;case kt.HANZI:const d=r.readBits(4),h=r.readBits(e.getCharacterCountBits(t));d===Mt.GB2312_SUBSET&&Mt.decodeHanziSegment(r,s,h);break;default:const p=r.readBits(e.getCharacterCountBits(t));switch(e){case kt.NUMERIC:Mt.decodeNumericSegment(r,s,p);break;case kt.ALPHANUMERIC:Mt.decodeAlphanumericSegment(r,s,p,u);break;case kt.BYTE:Mt.decodeByteSegment(r,s,p,n,a,i);break;case kt.KANJI:Mt.decodeKanjiSegment(r,s,p);break;default:throw new S}break}}while(e!==kt.TERMINATOR)}catch(u){throw new S}return new $(e,s.toString(),0===a.length?null:a,null===n?null:n.toString(),o,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new S;const i=new Uint8Array(2*n);let r=0;while(n>0){const t=e.readBits(13);let s=t/96<<8&4294967295|t%96;s+=s<959?41377:42657,i[r]=s>>8&255,i[r+1]=255&s,r+=2,n--}try{t.append(C.decode(i,I.GB2312))}catch(s){throw new S(s)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new S;const i=new Uint8Array(2*n);let r=0;while(n>0){const t=e.readBits(13);let s=t/192<<8&4294967295|t%192;s+=s<7936?33088:49472,i[r]=s>>8,i[r+1]=s,r+=2,n--}try{t.append(C.decode(i,I.SHIFT_JIS))}catch(s){throw new S(s)}}static decodeByteSegment(e,t,n,i,r,s){if(8*n>e.available())throw new S;const a=new Uint8Array(n);for(let u=0;u<n;u++)a[u]=e.readBits(8);let o;o=null===i?I.guessEncoding(a,s):i.getName();try{t.append(C.decode(a,o))}catch(l){throw new S(l)}r.push(a)}static toAlphaNumericChar(e){if(e>=Mt.ALPHANUMERIC_CHARS.length)throw new S;return Mt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,i){const r=t.length();while(n>1){if(e.available()<11)throw new S;const i=e.readBits(11);t.append(Mt.toAlphaNumericChar(Math.floor(i/45))),t.append(Mt.toAlphaNumericChar(i%45)),n-=2}if(1===n){if(e.available()<6)throw new S;t.append(Mt.toAlphaNumericChar(e.readBits(6)))}if(i)for(let s=r;s<t.length();s++)"%"===t.charAt(s)&&(s<t.length()-1&&"%"===t.charAt(s+1)?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){while(n>=3){if(e.available()<10)throw new S;const i=e.readBits(10);if(i>=1e3)throw new S;t.append(Mt.toAlphaNumericChar(Math.floor(i/100))),t.append(Mt.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(Mt.toAlphaNumericChar(i%10)),n-=3}if(2===n){if(e.available()<7)throw new S;const n=e.readBits(7);if(n>=100)throw new S;t.append(Mt.toAlphaNumericChar(Math.floor(n/10))),t.append(Mt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new S;const n=e.readBits(4);if(n>=10)throw new S;t.append(Mt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t)){const n=e.readBits(8);return(63&t)<<8&4294967295|n}if(192===(224&t)){const n=e.readBits(16);return(31&t)<<16&4294967295|n}throw new S}}Mt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Mt.GB2312_SUBSET=1;class Dt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Rt{constructor(){this.rsDecoder=new ie(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(k.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new It(e);let i=null;try{return this.decodeBitMatrixParser(n,t)}catch(r){i=r}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Dt(!0)),e}catch(r){if(null!==i)throw i;throw r}}decodeBitMatrixParser(e,t){const n=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),r=e.readCodewords(),s=xt.getDataBlocks(r,n,i);let a=0;for(const u of s)a+=u.getNumDataCodewords();const o=new Uint8Array(a);let l=0;for(const u of s){const e=u.getCodewords(),t=u.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)o[l++]=e[n]}return Mt.decode(o,n,i,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(i){throw new p}for(let r=0;r<t;r++)e[r]=n[r]}}class Ot extends oe{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const i=(this.getX()+t)/2,r=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Ot(i,r,s)}}class Nt{constructor(e,t,n,i,r,s,a){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=r,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,i=e+n,r=this.startY+t/2,s=new Int32Array(3),a=this.image;for(let o=0;o<t;o++){const t=r+(0===(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));s[0]=0,s[1]=0,s[2]=0;let n=e;while(n<i&&!a.get(n,t))n++;let l=0;while(n<i){if(a.get(n,t))if(1===l)s[1]++;else if(2===l){if(this.foundPatternCross(s)){const e=this.handlePossibleCenter(s,t,n);if(null!==e)return e}s[0]=s[2],s[1]=1,s[2]=0,l=1}else s[++l]++;else 1===l&&l++,s[l]++;n++}if(this.foundPatternCross(s)){const e=this.handlePossibleCenter(s,t,i);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new M}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0}crossCheckVertical(e,t,n,i){const r=this.image,s=r.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let o=e;while(o>=0&&r.get(t,o)&&a[1]<=n)a[1]++,o--;if(o<0||a[1]>n)return NaN;while(o>=0&&!r.get(t,o)&&a[0]<=n)a[0]++,o--;if(a[0]>n)return NaN;o=e+1;while(o<s&&r.get(t,o)&&a[1]<=n)a[1]++,o++;if(o===s||a[1]>n)return NaN;while(o<s&&!r.get(t,o)&&a[2]<=n)a[2]++,o++;if(a[2]>n)return NaN;const l=a[0]+a[1]+a[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(a)?Nt.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,n){const i=e[0]+e[1]+e[2],r=Nt.centerFromEnd(e,n),s=this.crossCheckVertical(t,r,2*e[1],i);if(!isNaN(s)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,s,r))return e.combineEstimate(s,r,t);const n=new Ot(r,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Lt extends oe{constructor(e,t,n,i){super(e,t),this.estimatedModuleSize=n,this.count=i,void 0===i&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const i=this.count+1,r=(this.count*this.getX()+t)/i,s=(this.count*this.getY()+e)/i,a=(this.count*this.estimatedModuleSize+n)/i;return new Lt(r,s,a,i)}}class Pt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ut{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(w.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(w.PURE_BARCODE),i=this.image,r=i.getHeight(),s=i.getWidth();let a=Math.floor(3*r/(4*Ut.MAX_MODULES));(a<Ut.MIN_SKIP||t)&&(a=Ut.MIN_SKIP);let o=!1;const l=new Int32Array(5);for(let c=a-1;c<r&&!o;c+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<s;t++)if(i.get(t,c))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Ut.foundPatternCross(l)){const i=this.handlePossibleCenter(l,c,t,n);if(!0!==i){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(a=2,!0===this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(c+=e-l[2]-a,t=s-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;if(Ut.foundPatternCross(l)){const e=this.handlePossibleCenter(l,c,s,n);!0===e&&(a=l[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}}const u=this.selectBestPatterns();return oe.orderBestPatterns(u),new Pt(u)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let r=0;r<5;r++){const n=e[r];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,i=n/2;return Math.abs(n-e[0])<i&&Math.abs(n-e[1])<i&&Math.abs(3*n-e[2])<3*i&&Math.abs(n-e[3])<i&&Math.abs(n-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,i){const r=this.getCrossCheckStateCount();let s=0;const a=this.image;while(e>=s&&t>=s&&a.get(t-s,e-s))r[2]++,s++;if(e<s||t<s)return!1;while(e>=s&&t>=s&&!a.get(t-s,e-s)&&r[1]<=n)r[1]++,s++;if(e<s||t<s||r[1]>n)return!1;while(e>=s&&t>=s&&a.get(t-s,e-s)&&r[0]<=n)r[0]++,s++;if(r[0]>n)return!1;const o=a.getHeight(),l=a.getWidth();s=1;while(e+s<o&&t+s<l&&a.get(t+s,e+s))r[2]++,s++;if(e+s>=o||t+s>=l)return!1;while(e+s<o&&t+s<l&&!a.get(t+s,e+s)&&r[3]<n)r[3]++,s++;if(e+s>=o||t+s>=l||r[3]>=n)return!1;while(e+s<o&&t+s<l&&a.get(t+s,e+s)&&r[4]<n)r[4]++,s++;if(r[4]>=n)return!1;const u=r[0]+r[1]+r[2]+r[3]+r[4];return Math.abs(u-i)<2*i&&Ut.foundPatternCross(r)}crossCheckVertical(e,t,n,i){const r=this.image,s=r.getHeight(),a=this.getCrossCheckStateCount();let o=e;while(o>=0&&r.get(t,o))a[2]++,o--;if(o<0)return NaN;while(o>=0&&!r.get(t,o)&&a[1]<=n)a[1]++,o--;if(o<0||a[1]>n)return NaN;while(o>=0&&r.get(t,o)&&a[0]<=n)a[0]++,o--;if(a[0]>n)return NaN;o=e+1;while(o<s&&r.get(t,o))a[2]++,o++;if(o===s)return NaN;while(o<s&&!r.get(t,o)&&a[3]<n)a[3]++,o++;if(o===s||a[3]>=n)return NaN;while(o<s&&r.get(t,o)&&a[4]<n)a[4]++,o++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=2*i?NaN:Ut.foundPatternCross(a)?Ut.centerFromEnd(a,o):NaN}crossCheckHorizontal(e,t,n,i){const r=this.image,s=r.getWidth(),a=this.getCrossCheckStateCount();let o=e;while(o>=0&&r.get(o,t))a[2]++,o--;if(o<0)return NaN;while(o>=0&&!r.get(o,t)&&a[1]<=n)a[1]++,o--;if(o<0||a[1]>n)return NaN;while(o>=0&&r.get(o,t)&&a[0]<=n)a[0]++,o--;if(a[0]>n)return NaN;o=e+1;while(o<s&&r.get(o,t))a[2]++,o++;if(o===s)return NaN;while(o<s&&!r.get(o,t)&&a[3]<n)a[3]++,o++;if(o===s||a[3]>=n)return NaN;while(o<s&&r.get(o,t)&&a[4]<n)a[4]++,o++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=i?NaN:Ut.foundPatternCross(a)?Ut.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,n,i){const r=e[0]+e[1]+e[2]+e[3]+e[4];let s=Ut.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(s),e[2],r);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],r),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],r)))){const e=r/7;let t=!1;const n=this.possibleCenters;for(let i=0,r=n.length;i<r;i++){const r=n[i];if(r.aboutEquals(e,a,s)){n[i]=r.combineEstimate(a,s,e),t=!0;break}}if(!t){const t=new Lt(s,a,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){const e=this.possibleCenters.length;if(e<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=Ut.CENTER_QUORUM){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);t=n}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Ut.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const i=t/n;let r=0;for(const s of this.possibleCenters)r+=Math.abs(s.getEstimatedModuleSize()-i);return r<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new M;const t=this.possibleCenters;let n;if(e>3){let i=0,r=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();i+=t,r+=t*t}n=i/e;let s=Math.sqrt(r/e-n*n);t.sort((e,t)=>{const i=Math.abs(t.getEstimatedModuleSize()-n),r=Math.abs(e.getEstimatedModuleSize()-n);return i<r?-1:i>r?1:0});const a=Math.max(.2*n,s);for(let e=0;e<t.length&&t.length>3;e++){const i=t[e];Math.abs(i.getEstimatedModuleSize()-n)>a&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const i=Math.abs(t.getEstimatedModuleSize()-n),r=Math.abs(e.getEstimatedModuleSize()-n);return i<r?1:i>r?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Ut.CENTER_QUORUM=2,Ut.MIN_SKIP=3,Ut.MAX_MODULES=57;class Bt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(w.NEED_RESULT_POINT_CALLBACK);const t=new Ut(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),r=this.calculateModuleSize(t,n,i);if(r<1)throw new M("No pattern found in proccess finder.");const s=Bt.computeDimension(t,n,i,r),a=At.getProvisionalVersionForDimension(s),o=a.getDimensionForVersion()-7;let l=null;if(a.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+i.getX(),s=n.getY()-t.getY()+i.getY(),a=1-3/o,u=Math.floor(t.getX()+a*(e-t.getX())),c=Math.floor(t.getY()+a*(s-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(r,u,c,t);break}catch(h){if(!(h instanceof M))throw h}}const u=Bt.createTransform(t,n,i,l,s),c=Bt.sampleGrid(this.image,u,s);let d;return d=null===l?[i,t,n]:[i,t,n,l],new le(c,d)}static createTransform(e,t,n,i,r){const s=r-3.5;let a,o,l,u;return null!==i?(a=i.getX(),o=i.getY(),l=s-3,u=l):(a=t.getX()-e.getX()+n.getX(),o=t.getY()-e.getY()+n.getY(),l=s,u=s),he.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,u,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,o,n.getX(),n.getY())}static sampleGrid(e,t,n){const i=fe.getInstance();return i.sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,i){const r=se.round(oe.distance(e,t)/i),s=se.round(oe.distance(e,n)/i);let a=Math.floor((r+s)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new M("Dimensions could be not found.")}return a}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,i){let r=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,a=e-(n-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let o=Math.floor(t-(i-t)*s);return s=1,o<0?(s=t/(t-o),o=0):o>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),r+=this.sizeOfBlackWhiteBlackRun(e,t,a,o),r-1}sizeOfBlackWhiteBlackRun(e,t,n,i){const r=Math.abs(i-t)>Math.abs(n-e);if(r){let r=e;e=t,t=r,r=n,n=i,i=r}const s=Math.abs(n-e),a=Math.abs(i-t);let o=-s/2;const l=e<n?1:-1,u=t<i?1:-1;let c=0;const d=n+l;for(let h=e,p=t;h!==d;h+=l){const n=r?p:h,l=r?h:p;if(1===c===this.image.get(n,l)){if(2===c)return se.distance(h,p,e,t);c++}if(o+=a,o>0){if(p===i)break;p+=u,o-=s}}return 2===c?se.distance(n+l,i,e,t):NaN}findAlignmentInRegion(e,t,n,i){const r=Math.floor(i*e),s=Math.max(0,t-r),a=Math.min(this.image.getWidth()-1,t+r);if(a-s<3*e)throw new M("Alignment top exceeds estimated module size.");const o=Math.max(0,n-r),l=Math.min(this.image.getHeight()-1,n+r);if(l-o<3*e)throw new M("Alignment bottom exceeds estimated module size.");const u=new Nt(this.image,s,o,a-s,l-o,e,this.resultPointCallback);return u.find()}}class Ft{constructor(){this.decoder=new Rt}getDecoder(){return this.decoder}decode(e,t){let n,i;if(void 0!==t&&null!==t&&void 0!==t.get(w.PURE_BARCODE)){const r=Ft.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(r,t),i=Ft.NO_POINTS}else{const r=new Bt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(r.getBits(),t),i=r.getPoints()}n.getOther()instanceof Dt&&n.getOther().applyMirroredCorrection(i);const r=new j(n.getText(),n.getRawBytes(),void 0,i,H.QR_CODE,void 0),s=n.getByteSegments();null!==s&&r.putMetadata(Y.BYTE_SEGMENTS,s);const a=n.getECLevel();return null!==a&&r.putMetadata(Y.ERROR_CORRECTION_LEVEL,a),n.hasStructuredAppend()&&(r.putMetadata(Y.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),r.putMetadata(Y.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),r}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new M;const i=this.moduleSize(t,e);let r=t[1],s=n[1],a=t[0],o=n[0];if(a>=o||r>=s)throw new M;if(s-r!==o-a&&(o=a+(s-r),o>=e.getWidth()))throw new M;const l=Math.round((o-a+1)/i),u=Math.round((s-r+1)/i);if(l<=0||u<=0)throw new M;if(u!==l)throw new M;const c=Math.floor(i/2);r+=c,a+=c;const d=a+Math.floor((l-1)*i)-o;if(d>0){if(d>c)throw new M;a-=d}const h=r+Math.floor((u-1)*i)-s;if(h>0){if(h>c)throw new M;r-=h}const p=new k(l,u);for(let f=0;f<u;f++){const t=r+Math.floor(f*i);for(let n=0;n<l;n++)e.get(a+Math.floor(n*i),t)&&p.set(n,f)}return p}static moduleSize(e,t){const n=t.getHeight(),i=t.getWidth();let r=e[0],s=e[1],a=!0,o=0;while(r<i&&s<n){if(a!==t.get(r,s)){if(5===++o)break;a=!a}r++,s++}if(r===i||s===n)throw new M;return(r-e[0])/7}}Ft.NO_POINTS=new Array;class jt{PDF417Common(){}static getBitCountSum(e){return se.sum(e)}static toIntArray(e){if(null==e||!e.length)return jt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const i of e)t[n++]=i;return t}static getCodeword(e){const t=v.binarySearch(jt.SYMBOL_TABLE,262143&e);return t<0?-1:(jt.CODEWORD_TABLE[t]-1)%jt.NUMBER_OF_CODEWORDS}}jt.NUMBER_OF_CODEWORDS=929,jt.MAX_CODEWORDS_IN_BARCODE=jt.NUMBER_OF_CODEWORDS-1,jt.MIN_ROWS_IN_BARCODE=3,jt.MAX_ROWS_IN_BARCODE=90,jt.MODULES_IN_CODEWORD=17,jt.MODULES_IN_STOP_PATTERN=18,jt.BARS_IN_MODULE=8,jt.EMPTY_INT_ARRAY=new Int32Array([]),jt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),jt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Vt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,n){let i=e.getBlackMatrix(),r=Ht.detect(n,i);return r.length||(i=i.clone(),i.rotate180(),r=Ht.detect(n,i)),new Vt(i,r)}static detect(e,t){const n=new Array;let i=0,r=0,s=!1;while(i<t.getHeight()){const a=Ht.findVertices(t,i,r);if(null!=a[0]||null!=a[3]){if(s=!0,n.push(a),!e)break;null!=a[2]?(r=Math.trunc(a[2].getX()),i=Math.trunc(a[2].getY())):(r=Math.trunc(a[4].getX()),i=Math.trunc(a[4].getY()))}else{if(!s)break;s=!1,r=0;for(const e of n)null!=e[1]&&(i=Math.trunc(Math.max(i,e[1].getY()))),null!=e[3]&&(i=Math.max(i,Math.trunc(e[3].getY())));i+=Ht.ROW_STEP}}return n}static findVertices(e,t,n){const i=e.getHeight(),r=e.getWidth(),s=new Array(8);return Ht.copyToResult(s,Ht.findRowsWithPattern(e,i,r,t,n,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Ht.copyToResult(s,Ht.findRowsWithPattern(e,i,r,t,n,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let i=0;i<n.length;i++)e[n[i]]=t[i]}static findRowsWithPattern(e,t,n,i,r,s){const a=new Array(4);let o=!1;const l=new Int32Array(s.length);for(;i<t;i+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,r,i,n,!1,s,l);if(null!=t){while(i>0){const a=Ht.findGuardPattern(e,r,--i,n,!1,s,l);if(null==a){i++;break}t=a}a[0]=new oe(t[0],i),a[1]=new oe(t[1],i),o=!0;break}}let u=i+1;if(o){let i=0,r=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;u<t;u++){const t=Ht.findGuardPattern(e,r[0],u,n,!1,s,l);if(null!=t&&Math.abs(r[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(r[1]-t[1])<Ht.MAX_PATTERN_DRIFT)r=t,i=0;else{if(i>Ht.SKIPPED_ROW_COUNT_MAX)break;i++}}u-=i+1,a[2]=new oe(r[0],u),a[3]=new oe(r[1],u)}return u-i<Ht.BARCODE_MIN_HEIGHT&&v.fill(a,null),a}static findGuardPattern(e,t,n,i,r,s,a){v.fillWithin(a,0,a.length,0);let o=t,l=0;while(e.get(o,n)&&o>0&&l++<Ht.MAX_PIXEL_DRIFT)o--;let u=o,c=0,d=s.length;for(let h=r;u<i;u++){let t=e.get(u,n);if(t!==h)a[c]++;else{if(c===d-1){if(Ht.patternMatchVariance(a,s,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([o,u]);o+=a[0]+a[1],g.arraycopy(a,2,a,0,c-1),a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,h=!h}}return c===d-1&&Ht.patternMatchVariance(a,s,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([o,u-1]):null}static patternMatchVariance(e,t,n){let i=e.length,r=0,s=0;for(let l=0;l<i;l++)r+=e[l],s+=t[l];if(r<s)return 1/0;let a=r/s;n*=a;let o=0;for(let l=0;l<i;l++){let i=e[l],r=t[l]*a,s=i>r?i-r:r-i;if(s>n)return 1/0;o+=s}return o/r}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class zt{constructor(e,t){if(0===t.length)throw new d;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;while(e<n&&0===t[e])e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let i=1;i<n;i++)t=this.field.add(this.field.multiply(e,t),this.coefficients[i]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let i=new Int32Array(n.length),r=n.length-t.length;g.arraycopy(n,0,i,0,r);for(let s=r;s<n.length;s++)i[s]=this.field.add(t[s-r],n[s]);return new zt(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof zt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new zt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,i=e.coefficients,r=i.length,s=new Int32Array(n+r-1);for(let a=0;a<n;a++){let e=t[a];for(let t=0;t<r;t++)s[a+t]=this.field.add(s[a+t],this.field.multiply(e,i[t]))}return new zt(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new zt(this.field,t)}multiplyScalar(e){if(0===e)return new zt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new zt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new zt(this.field,new Int32Array([0]));let n=this.coefficients.length,i=new Int32Array(n+e);for(let r=0;r<n;r++)i[r]=this.field.multiply(this.coefficients[r],t);return new zt(this.field,i)}toString(){let e=new x;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Gt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class qt extends Gt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let i=0;i<e;i++)this.expTable[i]=n,n=n*t%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new zt(this,new Int32Array([0])),this.one=new zt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new zt(this,n)}}qt.PDF417_GF=new qt(jt.NUMBER_OF_CODEWORDS,3);class Wt{constructor(){this.field=qt.PDF417_GF}decode(e,t,n){let i=new zt(this.field,e),r=new Int32Array(t),s=!1;for(let p=t;p>0;p--){let e=i.evaluateAt(this.field.exp(p));r[t-p]=e,0!==e&&(s=!0)}if(!s)return 0;let a=this.field.getOne();if(null!=n)for(const p of n){let t=this.field.exp(e.length-1-p),n=new zt(this.field,new Int32Array([this.field.subtract(0,t),1]));a=a.multiply(n)}let o=new zt(this.field,r),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),u=l[0],c=l[1],d=this.findErrorLocations(u),h=this.findErrorMagnitudes(c,u,d);for(let f=0;f<d.length;f++){let t=e.length-1-this.field.log(d[f]);if(t<0)throw p.getChecksumInstance();e[t]=this.field.subtract(e[t],h[f])}return d.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let i=e,r=t,s=this.field.getZero(),a=this.field.getOne();while(r.getDegree()>=Math.round(n/2)){let e=i,t=s;if(i=r,s=a,i.isZero())throw p.getChecksumInstance();r=e;let n=this.field.getZero(),o=i.getCoefficient(i.getDegree()),l=this.field.inverse(o);while(r.getDegree()>=i.getDegree()&&!r.isZero()){let e=r.getDegree()-i.getDegree(),t=this.field.multiply(r.getCoefficient(r.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),r=r.subtract(i.multiplyByMonomial(e,t))}a=n.multiply(s).subtract(t).negative()}let o=a.getCoefficient(0);if(0===o)throw p.getChecksumInstance();let l=this.field.inverse(o),u=a.multiply(l),c=r.multiply(l);return[u,c]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),i=0;for(let r=1;r<this.field.getSize()&&i<t;r++)0===e.evaluateAt(r)&&(n[i]=this.field.inverse(r),i++);if(i!==t)throw p.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let i=t.getDegree(),r=new Int32Array(i);for(let l=1;l<=i;l++)r[i-l]=this.field.multiply(l,t.getCoefficient(l));let s=new zt(this.field,r),a=n.length,o=new Int32Array(a);for(let l=0;l<a;l++){let t=this.field.inverse(n[l]),i=this.field.subtract(0,e.evaluateAt(t)),r=this.field.inverse(s.evaluateAt(t));o[l]=this.field.multiply(i,r)}return o}}class Xt{constructor(e,t,n,i,r){e instanceof Xt?this.constructor_2(e):this.constructor_1(e,t,n,i,r)}constructor_1(e,t,n,i,r){const s=null==t||null==n,a=null==i||null==r;if(s&&a)throw new M;s?(t=new oe(0,i.getY()),n=new oe(0,r.getY())):a&&(i=new oe(e.getWidth()-1,t.getY()),r=new oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=r,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),r.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),r.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Xt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let i=this.topLeft,r=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,r=Math.trunc(t.getY()-e);r<0&&(r=0);let a=new oe(t.getX(),r);n?i=a:s=a}if(t>0){let e=n?this.bottomLeft:this.bottomRight,i=Math.trunc(e.getY()+t);i>=this.image.getHeight()&&(i=this.image.getHeight()-1);let s=new oe(e.getX(),i);n?r=s:a=s}return new Xt(this.image,i,r,s,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Kt{constructor(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Yt{constructor(){this.buffer=""}static form(e,t){let n=-1;function i(e,i,r,s,a,o){if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let l,u=a?parseInt(a.substr(1)):void 0;switch(o){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(u||16);break;case"d":l=parseFloat(parseInt(t[n],u||10).toPrecision(e)).toFixed(0);break}l="object"===typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";while(l.length<c)l=void 0!==i?l+d:d+l;return l}let r=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(r,i)}format(e,...t){this.buffer+=Yt.form(e,t)}toString(){return this.buffer}}class $t{constructor(e){this.boundingBox=new Xt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<$t.MAX_NEARBY_DISTANCE;n++){let i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],null!=t))return t;if(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Yt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}$t.MAX_NEARBY_DISTANCE=5;class Qt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,i]of this.values.entries()){const r={getKey:()=>n,getValue:()=>i};r.getValue()>e?(e=r.getValue(),t=[],t.push(r.getKey())):r.getValue()===e&&t.push(r.getKey())}return jt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Zt extends $t{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),r=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=-1,l=1,u=0;for(let c=s;c<a;c++){if(null==t[c])continue;let n=t[c],i=n.getRowNumber()-o;if(0===i)u++;else if(1===i)l=Math.max(l,u),u=1,o=n.getRowNumber();else if(i<0||n.getRowNumber()>=e.getRowCount()||i>c)t[c]=null;else{let e;e=l>2?(l-2)*i:i;let r=e>=c;for(let n=1;n<=e&&!r;n++)r=null!=t[c-n];r?t[c]=null:(o=n.getRowNumber(),u=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),i=this._isLeft?t.getBottomLeft():t.getBottomRight(),r=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.getCodewords(),o=-1;for(let l=r;l<s;l++){if(null==a[l])continue;let t=a[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-o;0===n||(1===n?o=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?a[l]=null:o=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Qt,n=new Qt,i=new Qt,r=new Qt;for(let a of e){if(null==a)continue;a.setRowNumberAsRowIndicatorColumn();let e=a.getValue()%30,s=a.getRowNumber();switch(this._isLeft||(s+=2),s%3){case 0:n.setValue(3*e+1);break;case 1:r.setValue(e/3),i.setValue(e%3);break;case 2:t.setValue(e+1);break}}if(0===t.getValue().length||0===n.getValue().length||0===i.getValue().length||0===r.getValue().length||t.getValue()[0]<1||n.getValue()[0]+i.getValue()[0]<jt.MIN_ROWS_IN_BARCODE||n.getValue()[0]+i.getValue()[0]>jt.MAX_ROWS_IN_BARCODE)return null;let s=new Kt(t.getValue()[0],n.getValue()[0],i.getValue()[0],r.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let i=e[n];if(null==e[n])continue;let r=i.getValue()%30,s=i.getRowNumber();if(s>t.getRowCount())e[n]=null;else switch(this._isLeft||(s+=2),s%3){case 0:3*r+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(r/3)===t.getErrorCorrectionLevel()&&r%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:r+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=jt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){this.adjustRowNumbersFromBothRI();let e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let i=this.detectionResultColumns[t].getCodewords()[n];null!=i&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let i=t[n].getRowNumber(),r=0;for(let t=this.barcodeColumnCount+1;t>0&&r<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(r=Jt.adjustRowNumberIfValid(i,r,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let i=t[n].getRowNumber(),r=0;for(let t=1;t<this.barcodeColumnCount+1&&r<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(r=Jt.adjustRowNumberIfValid(i,r,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let i=n[t],r=this.detectionResultColumns[e-1].getCodewords(),s=r;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=r[t],a[3]=s[t],t>0&&(a[0]=n[t-1],a[4]=r[t-1],a[5]=s[t-1]),t>1&&(a[8]=n[t-2],a[10]=r[t-2],a[11]=s[t-2]),t<n.length-1&&(a[1]=n[t+1],a[6]=r[t+1],a[7]=s[t+1]),t<n.length-2&&(a[9]=n[t+2],a[12]=r[t+2],a[13]=s[t+2]);for(let o of a)if(Jt.adjustRowNumber(i,o))return}static adjustRowNumber(e,t){return null!=t&&(!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Yt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let i=this.detectionResultColumns[e].getCodewords()[n];null!=i?t.format(" %3d|%3d",i.getRowNumber(),i.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,i){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<jt.SYMBOL_TABLE.length;e++){let t=jt.SYMBOL_TABLE[e],n=1&t;for(let i=0;i<jt.BARS_IN_MODULE;i++){let r=0;while((1&t)===n)r+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(jt.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][jt.BARS_IN_MODULE-i-1]=Math.fround(r/jt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=se.sum(e),n=new Int32Array(jt.BARS_IN_MODULE),i=0,r=0;for(let s=0;s<jt.MODULES_IN_CODEWORD;s++){let a=t/(2*jt.MODULES_IN_CODEWORD)+s*t/jt.MODULES_IN_CODEWORD;r+e[i]<=a&&(r+=e[i],i++),n[i]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===jt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=se.sum(e),n=new Array(jt.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let i=ae.MAX_VALUE,r=-1;this.bSymbolTableReady||tn.initialize();for(let s=0;s<tn.RATIOS_TABLE.length;s++){let e=0,t=tn.RATIOS_TABLE[s];for(let r=0;r<jt.BARS_IN_MODULE;r++){let s=Math.fround(t[r]-n[r]);if(e+=Math.fround(s*s),e>=i)break}e<i&&(i=e,r=jt.SYMBOL_TABLE[s])}return r}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(jt.SYMBOL_TABLE.length).map(e=>new Array(jt.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e,t=void 0){return parseInt(e,t)}}class sn extends u{}sn.kind="NullPointerException";class an{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new sn;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let i=0;i<n;i++)this.write(e[t+i])}flush(){}close(){}}class on extends u{}class ln extends an{constructor(e=32){if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length,n=t<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new on;n=b.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),g.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function un(){if("undefined"!==typeof window)return window["BigInt"]||null;if("undefined"!==typeof n.g)return n.g["BigInt"]||null;if("undefined"!==typeof self)return self["BigInt"]||null;throw new Error("Can't search globals for BigInt!")}let cn;function dn(e){if("undefined"===typeof cn&&(cn=un()),null===cn)throw new Error("BigInt is not supported!");return cn(e)}function hn(){let e=[];e[0]=dn(1);let t=dn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}(function(e){e[e["ALPHA"]=0]="ALPHA",e[e["LOWER"]=1]="LOWER",e[e["MIXED"]=2]="MIXED",e[e["PUNCT"]=3]="PUNCT",e[e["ALPHA_SHIFT"]=4]="ALPHA_SHIFT",e[e["PUNCT_SHIFT"]=5]="PUNCT_SHIFT"})(K||(K={}));class pn{static decode(e,t){let n=new x(""),i=E.ISO8859_1;n.enableDecoding(i);let r=1,s=e[r++],a=new nn;while(r<e[0]){switch(s){case pn.TEXT_COMPACTION_MODE_LATCH:r=pn.textCompaction(e,r,n);break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:r=pn.byteCompaction(s,e,i,r,n);break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[r++]);break;case pn.NUMERIC_COMPACTION_MODE_LATCH:r=pn.numericCompaction(e,r,n);break;case pn.ECI_CHARSET:E.getCharacterSetECIByValue(e[r++]);break;case pn.ECI_GENERAL_PURPOSE:r+=2;break;case pn.ECI_USER_DEFINED:r++;break;case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:r=pn.decodeMacroBlock(e,r,a);break;case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:throw new S;default:r--,r=pn.textCompaction(e,r,n);break}if(!(r<e.length))throw S.getFormatInstance();s=e[r++]}if(0===n.length())throw S.getFormatInstance();let o=new $(null,n.toString(),null,t);return o.setOther(a),o}static decodeMacroBlock(e,t,n){if(t+pn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw S.getFormatInstance();let i=new Int32Array(pn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<pn.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];n.setSegmentIndex(b.parseInt(pn.decodeBase900toBase10(i,pn.NUMBER_OF_SEQUENCE_CODEWORDS)));let r=new x;t=pn.textCompaction(e,t,r),n.setFileId(r.toString());let s=-1;e[t]===pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);while(t<e[0])switch(e[t]){case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let i=new x;t=pn.textCompaction(e,t+1,i),n.setFileName(i.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let r=new x;t=pn.textCompaction(e,t+1,r),n.setSender(r.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new x;t=pn.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new x;t=pn.numericCompaction(e,t+1,a),n.setSegmentCount(b.parseInt(a.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let o=new x;t=pn.numericCompaction(e,t+1,o),n.setTimestamp(rn.parseLong(o.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new x;t=pn.numericCompaction(e,t+1,l),n.setChecksum(b.parseInt(l.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let u=new x;t=pn.numericCompaction(e,t+1,u),n.setFileSize(rn.parseLong(u.toString()));break;default:throw S.getFormatInstance()}break;case pn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw S.getFormatInstance()}if(-1!==s){let i=t-s;n.isLastSegment()&&i--,n.setOptionalData(v.copyOfRange(e,s,s+i))}return t}static textCompaction(e,t,n){let i=new Int32Array(2*(e[0]-t)),r=new Int32Array(2*(e[0]-t)),s=0,a=!1;while(t<e[0]&&!a){let n=e[t++];if(n<pn.TEXT_COMPACTION_MODE_LATCH)i[s]=n/30,i[s+1]=n%30,s+=2;else switch(n){case pn.TEXT_COMPACTION_MODE_LATCH:i[s++]=pn.TEXT_COMPACTION_MODE_LATCH;break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],r[s]=n,s++;break}}return pn.decodeTextCompaction(i,r,s,n),t}static decodeTextCompaction(e,t,n,i){let r=K.ALPHA,s=K.ALPHA,a=0;while(a<n){let n=e[a],o="";switch(r){case K.ALPHA:if(n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case pn.LL:r=K.LOWER;break;case pn.ML:r=K.MIXED;break;case pn.PS:s=r,r=K.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA;break}break;case K.LOWER:if(n<26)o=String.fromCharCode(97+n);else switch(n){case 26:o=" ";break;case pn.AS:s=r,r=K.ALPHA_SHIFT;break;case pn.ML:r=K.MIXED;break;case pn.PS:s=r,r=K.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA;break}break;case K.MIXED:if(n<pn.PL)o=pn.MIXED_CHARS[n];else switch(n){case pn.PL:r=K.PUNCT;break;case 26:o=" ";break;case pn.LL:r=K.LOWER;break;case pn.AL:r=K.ALPHA;break;case pn.PS:s=r,r=K.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA;break}break;case K.PUNCT:if(n<pn.PAL)o=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:r=K.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA;break}break;case K.ALPHA_SHIFT:if(r=s,n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA;break}break;case K.PUNCT_SHIFT:if(r=s,n<pn.PAL)o=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:r=K.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case pn.TEXT_COMPACTION_MODE_LATCH:r=K.ALPHA;break}break}""!==o&&i.append(o),a++}}static byteCompaction(e,t,n,i,r){let s=new ln,a=0,o=0,l=!1;switch(e){case pn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[i++];while(i<t[0]&&!l)switch(e[a++]=n,o=900*o+n,n=t[i++],n){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(a%5===0&&a>0){for(let e=0;e<6;++e)s.write(Number(dn(o)>>dn(8*(5-e))));o=0,a=0}break}i===t[0]&&n<pn.TEXT_COMPACTION_MODE_LATCH&&(e[a++]=n);for(let t=0;t<a;t++)s.write(e[t]);break;case pn.BYTE_COMPACTION_MODE_LATCH_6:while(i<t[0]&&!l){let e=t[i++];if(e<pn.TEXT_COMPACTION_MODE_LATCH)a++,o=900*o+e;else switch(e){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:i--,l=!0;break}if(a%5===0&&a>0){for(let e=0;e<6;++e)s.write(Number(dn(o)>>dn(8*(5-e))));o=0,a=0}}break}return r.append(C.decode(s.toByteArray(),n)),i}static numericCompaction(e,t,n){let i=0,r=!1,s=new Int32Array(pn.MAX_NUMERIC_CODEWORDS);while(t<e[0]&&!r){let a=e[t++];if(t===e[0]&&(r=!0),a<pn.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,r=!0;break}(i%pn.MAX_NUMERIC_CODEWORDS===0||a===pn.NUMERIC_COMPACTION_MODE_LATCH||r)&&i>0&&(n.append(pn.decodeBase900toBase10(s,i)),i=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let r=0;r<t;r++)n+=pn.EXP900[t-r-1]*dn(e[r]);let i=n.toString();if("1"!==i.charAt(0))throw new S;return i.substring(1)}}pn.TEXT_COMPACTION_MODE_LATCH=900,pn.BYTE_COMPACTION_MODE_LATCH=901,pn.NUMERIC_COMPACTION_MODE_LATCH=902,pn.BYTE_COMPACTION_MODE_LATCH_6=924,pn.ECI_USER_DEFINED=925,pn.ECI_GENERAL_PURPOSE=926,pn.ECI_CHARSET=927,pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pn.MACRO_PDF417_TERMINATOR=922,pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pn.MAX_NUMERIC_CODEWORDS=15,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pn.PL=25,pn.LL=27,pn.AS=27,pn.ML=28,pn.AL=28,pn.PS=29,pn.PAL=29,pn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",pn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",pn.EXP900=un()?hn():[],pn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class fn{constructor(){}static decode(e,t,n,i,r,s,a){let o,l=new Xt(e,t,n,i,r),u=null,c=null;for(let p=!0;;p=!1){if(null!=t&&(u=fn.getRowIndicatorColumn(e,l,t,!0,s,a)),null!=i&&(c=fn.getRowIndicatorColumn(e,l,i,!1,s,a)),o=fn.merge(u,c),null==o)throw M.getNotFoundInstance();let n=o.getBoundingBox();if(!p||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}o.setBoundingBox(l);let d=o.getBarcodeColumnCount()+1;o.setDetectionResultColumn(0,u),o.setDetectionResultColumn(d,c);let h=null!=u;for(let p=1;p<=d;p++){let t,n=h?p:d-p;if(void 0!==o.getDetectionResultColumn(n))continue;t=0===n||n===d?new Zt(l,0===n):new $t(l),o.setDetectionResultColumn(n,t);let i=-1,r=i;for(let u=l.getMinY();u<=l.getMaxY();u++){if(i=fn.getStartColumn(o,n,u,h),i<0||i>l.getMaxX()){if(-1===r)continue;i=r}let c=fn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,i,u,s,a);null!=c&&(t.setCodeword(u,c),r=i,s=Math.min(s,c.getWidth()),a=Math.max(a,c.getWidth()))}}return fn.createDecoderResult(o)}static merge(e,t){if(null==e&&null==t)return null;let n=fn.getBarcodeMetadata(e,t);if(null==n)return null;let i=Xt.merge(fn.adjustBoundingBox(e),fn.adjustBoundingBox(t));return new Jt(n,i)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=fn.getMax(t),i=0;for(let a of t)if(i+=n-a,a>0)break;let r=e.getCodewords();for(let a=0;i>0&&null==r[a];a++)i--;let s=0;for(let a=t.length-1;a>=0;a--)if(s+=n-t[a],t[a]>0)break;for(let a=r.length-1;s>0&&null==r[a];a--)s--;return e.getBoundingBox().addMissingRows(i,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,i;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(i=t.getBarcodeMetadata())?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,i,r,s){let a=new Zt(t,i);for(let o=0;o<2;o++){let l=0===o?1:-1,u=Math.trunc(Math.trunc(n.getX()));for(let o=Math.trunc(Math.trunc(n.getY()));o<=t.getMaxY()&&o>=t.getMinY();o+=l){let t=fn.detectCodeword(e,0,e.getWidth(),i,u,o,r,s);null!=t&&(a.setCodeword(o,t),u=i?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let n=t[0][1],i=n.getValue(),r=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-fn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===i.length){if(r<1||r>jt.MAX_CODEWORDS_IN_BARCODE)throw M.getNotFoundInstance();n.setValue(r)}else i[0]!==r&&n.setValue(r)}static createDecoderResult(e){let t=fn.createBarcodeMatrix(e);fn.adjustCodewordCount(e,t);let n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),r=[],s=new Array;for(let o=0;o<e.getBarcodeRowCount();o++)for(let a=0;a<e.getBarcodeColumnCount();a++){let l=t[o][a+1].getValue(),u=o*e.getBarcodeColumnCount()+a;0===l.length?n.push(u):1===l.length?i[u]=l[0]:(s.push(u),r.push(l))}let a=new Array(r.length);for(let o=0;o<a.length;o++)a[o]=r[o];return fn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,jt.toIntArray(n),jt.toIntArray(s),a)}static createDecoderResultFromAmbiguousValues(e,t,n,i,r){let s=new Int32Array(i.length),a=100;while(a-- >0){for(let e=0;e<s.length;e++)t[i[e]]=r[e][s[e]];try{return fn.decodeCodewords(t,e,n)}catch(o){let e=o instanceof p;if(!e)throw o}if(0===s.length)throw p.getChecksumInstance();for(let e=0;e<s.length;e++){if(s[e]<r[e].length-1){s[e]++;break}if(s[e]=0,e===s.length-1)throw p.getChecksumInstance()}}throw p.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let i=0;i<t.length;i++)for(let e=0;e<t[i].length;e++)t[i][e]=new Qt;let n=0;for(let i of e.getDetectionResultColumns()){if(null!=i)for(let e of i.getCodewords())if(null!=e){let i=e.getRowNumber();if(i>=0){if(i>=t.length)continue;t[i][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,i){let r=i?1:-1,s=null;if(fn.isValidBarcodeColumn(e,t-r)&&(s=e.getDetectionResultColumn(t-r).getCodeword(n)),null!=s)return i?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=s)return i?s.getStartX():s.getEndX();if(fn.isValidBarcodeColumn(e,t-r)&&(s=e.getDetectionResultColumn(t-r).getCodewordNearby(n)),null!=s)return i?s.getEndX():s.getStartX();let a=0;while(fn.isValidBarcodeColumn(e,t-r)){t-=r;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(i?n.getEndX():n.getStartX())+r*a*(n.getEndX()-n.getStartX());a++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,i,r,s,a,o){r=fn.adjustCodewordStartColumn(e,t,n,i,r,s);let l,u=fn.getModuleBitCount(e,t,n,i,r,s);if(null==u)return null;let c=se.sum(u);if(i)l=r+c;else{for(let e=0;e<u.length/2;e++){let t=u[e];u[e]=u[u.length-1-e],u[u.length-1-e]=t}l=r,r=l-c}if(!fn.checkCodewordSkew(c,a,o))return null;let d=tn.getDecodedValue(u),h=jt.getCodeword(d);return-1===h?null:new en(r,l,fn.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,n,i,r,s){let a=r,o=new Int32Array(8),l=0,u=i?1:-1,c=i;while((i?a<n:a>=t)&&l<o.length)e.get(a,s)===c?(o[l]++,a+=u):(l++,c=!c);return l===o.length||a===(i?n:t)&&l===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,i,r,s){let a=r,o=i?-1:1;for(let l=0;l<2;l++){while((i?a>=t:a<n)&&i===e.get(a,s)){if(Math.abs(r-a)>fn.CODEWORD_SKEW_SIZE)return r;a+=o}o=-o,i=!i}return a}static checkCodewordSkew(e,t,n){return t-fn.CODEWORD_SKEW_SIZE<=e&&e<=n+fn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw S.getFormatInstance();let i=1<<t+1,r=fn.correctErrors(e,n,i);fn.verifyCodewordCount(e,i);let s=pn.decode(e,""+t);return s.setErrorsCorrected(r),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+fn.MAX_ERRORS||n<0||n>fn.MAX_EC_CODEWORDS)throw p.getChecksumInstance();return fn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw S.getFormatInstance();let n=e[0];if(n>e.length)throw S.getFormatInstance();if(0===n){if(!(t<e.length))throw S.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,i=t.length-1;while(1){if((1&e)!==n&&(n=1&e,i--,i<0))break;t[i]++,e>>=1}return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return fn.getCodewordBucketNumber(fn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Yt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let i=0;i<e[n].length;i++){let r=e[n][i];0===r.getValue().length?t.format("        ",null):t.format("%4d(%2d)",r.getValue()[0],r.getConfidence(r.getValue()[0]))}t.format("%n")}return t.toString()}}fn.CODEWORD_SKEW_SIZE=2,fn.MAX_ERRORS=3,fn.MAX_EC_CODEWORDS=512,fn.errorCorrection=new Wt;class gn{decode(e,t=null){let n=gn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw M.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return gn.decode(e,t,!0)}catch(n){if(n instanceof S||n instanceof p)throw M.getNotFoundInstance();throw n}}static decode(e,t,n){const i=new Array,r=Ht.detectMultiple(e,t,n);for(const s of r.getPoints()){const e=fn.decode(r.getBits(),s[4],s[5],s[6],s[7],gn.getMinCodewordWidth(s),gn.getMaxCodewordWidth(s)),t=new j(e.getText(),e.getRawBytes(),void 0,s,H.PDF_417);t.putMetadata(Y.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(Y.PDF417_EXTRA_METADATA,n),i.push(t)}return i.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?b.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*jt.MODULES_IN_CODEWORD/jt.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*jt.MODULES_IN_CODEWORD/jt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*jt.MODULES_IN_CODEWORD/jt.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*jt.MODULES_IN_CODEWORD/jt.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends u{}mn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(w.TRY_HARDER),i=t(e)?null:e.get(w.POSSIBLE_FORMATS),r=new Array;if(!t(i)){const t=i.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!n&&r.push(new lt(e,this.verbose)),i.includes(H.QR_CODE)&&r.push(new Ft),i.includes(H.DATA_MATRIX)&&r.push(new bt),i.includes(H.AZTEC)&&r.push(new ye),i.includes(H.PDF_417)&&r.push(new gn),t&&n&&r.push(new lt(e,this.verbose))}0===r.length&&(n||r.push(new lt(e,this.verbose)),r.push(new Ft),r.push(new bt),r.push(new ye),r.push(new gn),n&&r.push(new lt(e,this.verbose))),this.readers=r}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new M("No MultiFormat Readers were able to detect the code.")}}class vn extends F{constructor(e=null,t=500){const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class bn extends F{constructor(e=500){super(new gn,e)}}class Tn extends F{constructor(e=500){super(new Ft,e)}}var _n;(function(e){e[e["ERROR_CORRECTION"]=0]="ERROR_CORRECTION",e[e["CHARACTER_SET"]=1]="CHARACTER_SET",e[e["DATA_MATRIX_SHAPE"]=2]="DATA_MATRIX_SHAPE",e[e["MIN_SIZE"]=3]="MIN_SIZE",e[e["MAX_SIZE"]=4]="MAX_SIZE",e[e["MARGIN"]=5]="MARGIN",e[e["PDF417_COMPACT"]=6]="PDF417_COMPACT",e[e["PDF417_COMPACTION"]=7]="PDF417_COMPACTION",e[e["PDF417_DIMENSIONS"]=8]="PDF417_DIMENSIONS",e[e["AZTEC_LAYERS"]=9]="AZTEC_LAYERS",e[e["QR_VERSION"]=10]="QR_VERSION"})(_n||(_n={}));var wn=_n;class Sn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Z(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const i=this.field;for(let r=t.length;r<=e;r++){const e=n.multiply(new Z(i,Int32Array.from([1,i.exp(r-1+i.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const n=e.length-t;if(n<=0)throw new d("No data bytes provided");const i=this.buildGenerator(t),r=new Int32Array(n);g.arraycopy(e,0,r,0,n);let s=new Z(this.field,r);s=s.multiplyByMonomial(t,1);const a=s.divide(i)[1],o=a.getCoefficients(),l=t-o.length;for(let u=0;u<l;u++)e[n+u]=0;g.arraycopy(o,0,e,n+l,o.length)}}class En{constructor(){}static applyMaskPenaltyRule1(e){return En.applyMaskPenaltyRule1Internal(e,!0)+En.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),i=e.getWidth(),r=e.getHeight();for(let s=0;s<r-1;s++){const e=n[s];for(let r=0;r<i-1;r++){const i=e[r];i===e[r+1]&&i===n[s+1][r]&&i===n[s+1][r+1]&&t++}}return En.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),i=e.getWidth(),r=e.getHeight();for(let s=0;s<r;s++)for(let e=0;e<i;e++){const a=n[s];e+6<i&&1===a[e]&&0===a[e+1]&&1===a[e+2]&&1===a[e+3]&&1===a[e+4]&&0===a[e+5]&&1===a[e+6]&&(En.isWhiteHorizontal(a,e-4,e)||En.isWhiteHorizontal(a,e+7,e+11))&&t++,s+6<r&&1===n[s][e]&&0===n[s+1][e]&&1===n[s+2][e]&&1===n[s+3][e]&&1===n[s+4][e]&&0===n[s+5][e]&&1===n[s+6][e]&&(En.isWhiteVertical(n,e,s-4,s)||En.isWhiteVertical(n,e,s+7,s+11))&&t++}return t*En.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let i=t;i<n;i++)if(1===e[i])return!1;return!0}static isWhiteVertical(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(let r=n;r<i;r++)if(1===e[r][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),i=e.getWidth(),r=e.getHeight();for(let o=0;o<r;o++){const e=n[o];for(let n=0;n<i;n++)1===e[n]&&t++}const s=e.getHeight()*e.getWidth(),a=Math.floor(10*Math.abs(2*t-s)/s);return a*En.N4}static getDataMaskBit(e,t,n){let i,r;switch(e){case 0:i=n+t&1;break;case 1:i=1&n;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=n*t,i=(1&r)+r%3;break;case 6:r=n*t,i=(1&r)+r%3&1;break;case 7:r=n*t,i=r%3+(n+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===i}static applyMaskPenaltyRule1Internal(e,t){let n=0;const i=t?e.getHeight():e.getWidth(),r=t?e.getWidth():e.getHeight(),s=e.getArray();for(let a=0;a<i;a++){let e=0,i=-1;for(let o=0;o<r;o++){const r=t?s[a][o]:s[o][a];r===i?e++:(e>=5&&(n+=En.N1+(e-5)),e=1,i=r)}e>=5&&(n+=En.N1+(e-5))}return n}}En.N1=3,En.N2=3,En.N3=40,En.N4=10;class An{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)v.fill(t,e)}equals(e){if(!(e instanceof An))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,i=this.height;n<i;++n){const e=this.bytes[n],i=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==i[t])return!1}return!0}toString(){const e=new x;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,i=this.width;t<i;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append("\n")}return e.toString()}}class Cn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new x;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Cn.NUM_MASK_PATTERNS}}Cn.NUM_MASK_PATTERNS=8;class In extends u{}In.kind="WriterException";class xn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,i,r){xn.clearMatrix(r),xn.embedBasicPatterns(n,r),xn.embedTypeInfo(t,i,r),xn.maybeEmbedVersionInfo(n,r),xn.embedDataBits(e,i,r)}static embedBasicPatterns(e,t){xn.embedPositionDetectionPatternsAndSeparators(t),xn.embedDarkDotAtLeftBottomCorner(t),xn.maybeEmbedPositionAdjustmentPatterns(e,t),xn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const i=new T;xn.makeTypeInfoBits(e,t,i);for(let r=0,s=i.getSize();r<s;++r){const e=i.get(i.getSize()-1-r),t=xn.TYPE_INFO_COORDINATES[r],s=t[0],a=t[1];if(n.setBoolean(s,a,e),r<8){const t=n.getWidth()-r-1,i=8;n.setBoolean(t,i,e)}else{const t=8,i=n.getHeight()-7+(r-8);n.setBoolean(t,i,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new T;xn.makeVersionInfoBits(e,n);let i=17;for(let r=0;r<6;++r)for(let e=0;e<3;++e){const s=n.get(i);i--,t.setBoolean(r,t.getHeight()-11+e,s),t.setBoolean(t.getHeight()-11+e,r,s)}}static embedDataBits(e,t,n){let i=0,r=-1,s=n.getWidth()-1,a=n.getHeight()-1;while(s>0){6===s&&(s-=1);while(a>=0&&a<n.getHeight()){for(let r=0;r<2;++r){const o=s-r;if(!xn.isEmpty(n.get(o,a)))continue;let l;i<e.getSize()?(l=e.get(i),++i):l=!1,255!==t&&En.getDataMaskBit(t,o,a)&&(l=!l),n.setBoolean(o,a,l)}a+=r}r=-r,a+=r,s-=2}if(i!==e.getSize())throw new In("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-b.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const n=xn.findMSBSet(t);e<<=n-1;while(xn.findMSBSet(e)>=n)e^=t<<xn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Cn.isValidMaskPattern(t))throw new In("Invalid mask pattern");const i=e.getBits()<<3|t;n.appendBits(i,5);const r=xn.calculateBCHCode(i,xn.TYPE_INFO_POLY);n.appendBits(r,10);const s=new T;if(s.appendBits(xn.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new In("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=xn.calculateBCHCode(e.getVersionNumber(),xn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new In("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;xn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),xn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new In;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let i=0;i<8;++i){if(!xn.isEmpty(n.get(e+i,t)))throw new In;n.setNumber(e+i,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let i=0;i<7;++i){if(!xn.isEmpty(n.get(e,t+i)))throw new In;n.setNumber(e,t+i,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let i=0;i<5;++i){const r=xn.POSITION_ADJUSTMENT_PATTERN[i];for(let s=0;s<5;++s)n.setNumber(e+s,t+i,r[s])}}static embedPositionDetectionPattern(e,t,n){for(let i=0;i<7;++i){const r=xn.POSITION_DETECTION_PATTERN[i];for(let s=0;s<7;++s)n.setNumber(e+s,t+i,r[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=xn.POSITION_DETECTION_PATTERN[0].length;xn.embedPositionDetectionPattern(0,0,e),xn.embedPositionDetectionPattern(e.getWidth()-t,0,e),xn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;xn.embedHorizontalSeparationPattern(0,n-1,e),xn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),xn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const i=7;xn.embedVerticalSeparationPattern(i,0,e),xn.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),xn.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,i=xn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let r=0,s=i.length;r!==s;r++){const e=i[r];if(e>=0)for(let n=0;n!==s;n++){const r=i[n];r>=0&&xn.isEmpty(t.get(r,e))&&xn.embedPositionAdjustmentPattern(r-2,e-2,t)}}}}xn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xn.VERSION_INFO_POLY=7973,xn.TYPE_INFO_POLY=1335,xn.TYPE_INFO_MASK_PATTERN=21522;class kn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Mn{constructor(){}static calculateMaskPenalty(e){return En.applyMaskPenaltyRule1(e)+En.applyMaskPenaltyRule2(e)+En.applyMaskPenaltyRule3(e)+En.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let i=Mn.DEFAULT_BYTE_MODE_ENCODING;const r=null!==n&&void 0!==n.get(wn.CHARACTER_SET);r&&(i=n.get(wn.CHARACTER_SET).toString());const s=this.chooseMode(e,i),a=new T;if(s===kt.BYTE&&(r||Mn.DEFAULT_BYTE_MODE_ENCODING!==i)){const e=E.getCharacterSetECIByName(i);void 0!==e&&this.appendECI(e,a)}this.appendModeInfo(s,a);const o=new T;let l;if(this.appendBytes(e,s,o,i),null!==n&&void 0!==n.get(wn.QR_VERSION)){const e=Number.parseInt(n.get(wn.QR_VERSION).toString(),10);l=At.getVersionForNumber(e);const i=this.calculateBitsNeeded(s,a,o,l);if(!this.willFit(i,l,t))throw new In("Data too big for requested version")}else l=this.recommendVersion(t,s,a,o);const u=new T;u.appendBitArray(a);const c=s===kt.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(c,l,s,u),u.appendBitArray(o);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,u);const p=this.interleaveWithECBytes(u,l.getTotalCodewords(),h,d.getNumBlocks()),f=new Cn;f.setECLevel(t),f.setMode(s),f.setVersion(l);const g=l.getDimensionForVersion(),m=new An(g,g),y=this.chooseMaskPattern(p,t,l,m);return f.setMaskPattern(y),xn.buildMatrix(p,t,l,y,m),f.setMatrix(m),f}static recommendVersion(e,t,n,i){const r=this.calculateBitsNeeded(t,n,i,At.getVersionForNumber(1)),s=this.chooseVersion(r,e),a=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()}static getAlphanumericCode(e){return e<Mn.ALPHANUMERIC_TABLE.length?Mn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(E.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return kt.KANJI;let n=!1,i=!1;for(let r=0,s=e.length;r<s;++r){const t=e.charAt(r);if(Mn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return kt.BYTE;i=!0}}return i?kt.ALPHANUMERIC:n?kt.NUMERIC:kt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=C.encode(e,E.SJIS)}catch(i){return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const e=255&t[r];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,i){let r=Number.MAX_SAFE_INTEGER,s=-1;for(let a=0;a<Cn.NUM_MASK_PATTERNS;a++){xn.buildMatrix(e,t,n,a,i);let o=this.calculateMaskPenalty(i);o<r&&(r=o,s=a)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const i=At.getVersionForNumber(n);if(Mn.willFit(e,i,t))return i}throw new In("Data too big")}static willFit(e,t,n){const i=t.getTotalCodewords(),r=t.getECBlocksForLevel(n),s=r.getTotalECCodewords(),a=i-s,o=(e+7)/8;return a>=o}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new In("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const i=7&t.getSize();if(i>0)for(let s=i;s<8;s++)t.appendBit(!1);const r=e-t.getSizeInBytes();for(let s=0;s<r;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new In("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,i,r,s){if(i>=n)throw new In("Block ID too large");const a=e%n,o=n-a,l=Math.floor(e/n),u=l+1,c=Math.floor(t/n),d=c+1,h=l-c,p=u-d;if(h!==p)throw new In("EC bytes mismatch");if(n!==o+a)throw new In("RS blocks mismatch");if(e!==(c+h)*o+(d+p)*a)throw new In("Total bytes mismatch");i<o?(r[0]=c,s[0]=h):(r[0]=d,s[0]=p)}static interleaveWithECBytes(e,t,n,i){if(e.getSizeInBytes()!==n)throw new In("Number of bits and data bytes does not match");let r=0,s=0,a=0;const o=new Array;for(let u=0;u<i;++u){const l=new Int32Array(1),c=new Int32Array(1);Mn.getNumDataBytesAndNumECBytesForBlockID(t,n,i,u,l,c);const d=l[0],h=new Uint8Array(d);e.toBytes(8*r,h,0,d);const p=Mn.generateECBytes(h,c[0]);o.push(new kn(h,p)),s=Math.max(s,d),a=Math.max(a,p.length),r+=l[0]}if(n!==r)throw new In("Data bytes does not match offset");const l=new T;for(let u=0;u<s;++u)for(const e of o){const t=e.getDataBytes();u<t.length&&l.appendBits(t[u],8)}for(let u=0;u<a;++u)for(const e of o){const t=e.getErrorCorrectionBytes();u<t.length&&l.appendBits(t[u],8)}if(t!==l.getSizeInBytes())throw new In("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,i=new Int32Array(n+t);for(let s=0;s<n;s++)i[s]=255&e[s];new Sn(ee.QR_CODE_FIELD_256).encode(i,t);const r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=i[n+s];return r}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,i){const r=n.getCharacterCountBits(t);if(e>=1<<r)throw new In(e+" is bigger than "+((1<<r)-1));i.appendBits(e,r)}static appendBytes(e,t,n,i){switch(t){case kt.NUMERIC:Mn.appendNumericBytes(e,n);break;case kt.ALPHANUMERIC:Mn.appendAlphanumericBytes(e,n);break;case kt.BYTE:Mn.append8BitBytes(e,n,i);break;case kt.KANJI:Mn.appendKanjiBytes(e,n);break;default:throw new In("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Mn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let i=0;while(i<n){const r=Mn.getDigit(e.charAt(i));if(i+2<n){const n=Mn.getDigit(e.charAt(i+1)),s=Mn.getDigit(e.charAt(i+2));t.appendBits(100*r+10*n+s,10),i+=3}else if(i+1<n){const n=Mn.getDigit(e.charAt(i+1));t.appendBits(10*r+n,7),i+=2}else t.appendBits(r,4),i++}}static appendAlphanumericBytes(e,t){const n=e.length;let i=0;while(i<n){const r=Mn.getAlphanumericCode(e.charCodeAt(i));if(-1===r)throw new In;if(i+1<n){const n=Mn.getAlphanumericCode(e.charCodeAt(i+1));if(-1===n)throw new In;t.appendBits(45*r+n,11),i+=2}else t.appendBits(r,6),i++}}static append8BitBytes(e,t,n){let i;try{i=C.encode(e,n)}catch(r){throw new In(r)}for(let s=0,a=i.length;s!==a;s++){const e=i[s];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=C.encode(e,E.SJIS)}catch(r){throw new In(r)}const i=n.length;for(let s=0;s<i;s+=2){const e=255&n[s],i=255&n[s+1],r=e<<8&4294967295|i;let a=-1;if(r>=33088&&r<=40956?a=r-33088:r>=57408&&r<=60351&&(a=r-49472),-1===a)throw new In("Invalid byte sequence");const o=192*(a>>8)+(255&a);t.appendBits(o,13)}}static appendECI(e,t){t.appendBits(kt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Mn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Mn.DEFAULT_BYTE_MODE_ENCODING=E.UTF8.getName();class Dn{write(e,t,n,i=null){if(0===e.length)throw new d("Found empty contents");if(t<0||n<0)throw new d("Requested dimensions are too small: "+t+"x"+n);let r=_t.L,s=Dn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(wn.ERROR_CORRECTION)&&(r=_t.fromString(i.get(wn.ERROR_CORRECTION).toString())),void 0!==i.get(wn.MARGIN)&&(s=Number.parseInt(i.get(wn.MARGIN).toString(),10)));const a=Mn.encode(e,r,i);return this.renderResult(a,t,n,s)}writeToDom(e,t,n,i,r=null){"string"===typeof e&&(e=document.querySelector(e));const s=this.write(t,n,i,r);e&&e.appendChild(s)}renderResult(e,t,n,i){const r=e.getMatrix();if(null===r)throw new ne;const s=r.getWidth(),a=r.getHeight(),o=s+2*i,l=a+2*i,u=Math.max(t,o),c=Math.max(n,l),d=Math.min(Math.floor(u/o),Math.floor(c/l)),h=Math.floor((u-s*d)/2),p=Math.floor((c-a*d)/2),f=this.createSVGElement(u,c);for(let g=0,m=p;g<a;g++,m+=d)for(let e=0,t=h;e<s;e++,t+=d)if(1===r.get(e,g)){const e=this.createSvgRectElement(t,m,d,d);f.appendChild(e)}return f}createSVGElement(e,t){const n=document.createElementNS(Dn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,i){const r=document.createElementNS(Dn.SVG_NS,"rect");return r.setAttributeNS(null,"x",e.toString()),r.setAttributeNS(null,"y",t.toString()),r.setAttributeNS(null,"height",n.toString()),r.setAttributeNS(null,"width",i.toString()),r.setAttributeNS(null,"fill","#000000"),r}}Dn.QUIET_ZONE_SIZE=4,Dn.SVG_NS="http://www.w3.org/2000/svg";class Rn{encode(e,t,n,i,r){if(0===e.length)throw new d("Found empty contents");if(t!==H.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(n<0||i<0)throw new d(`Requested dimensions are too small: ${n}x${i}`);let s=_t.L,a=Rn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(wn.ERROR_CORRECTION)&&(s=_t.fromString(r.get(wn.ERROR_CORRECTION).toString())),void 0!==r.get(wn.MARGIN)&&(a=Number.parseInt(r.get(wn.MARGIN).toString(),10)));const o=Mn.encode(e,s,r);return Rn.renderResult(o,n,i,a)}static renderResult(e,t,n,i){const r=e.getMatrix();if(null===r)throw new ne;const s=r.getWidth(),a=r.getHeight(),o=s+2*i,l=a+2*i,u=Math.max(t,o),c=Math.max(n,l),d=Math.min(Math.floor(u/o),Math.floor(c/l)),h=Math.floor((u-s*d)/2),p=Math.floor((c-a*d)/2),f=new k(u,c);for(let g=0,m=p;g<a;g++,m+=d)for(let e=0,t=h;e<s;e++,t+=d)1===r.get(e,g)&&f.setRegion(t,m,d,d);return f}}Rn.QUIET_ZONE_SIZE=4;class On{encode(e,t,n,i,r){let s;switch(t){case H.QR_CODE:s=new Rn;break;default:throw new d("No encoder available for format "+t)}return s.encode(e,t,n,i,r)}}class Nn extends O{constructor(e,t,n,i,r,s,a,o){if(super(s,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=i,this.top=r,i+s>t||r+a>n)throw new d("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(s,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const i=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,i,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,i=new Uint8ClampedArray(n);let r=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.yuvData,r,i,0,n),i;for(let s=0;s<t;s++){const t=s*e;g.arraycopy(this.yuvData,r,i,t,e),r+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,t,n,i){return new Nn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,i,!1)}renderThumbnail(){const e=this.getWidth()/Nn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Nn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),i=this.yuvData;let r=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const t=s*e;for(let s=0;s<e;s++){const e=255&i[r+s*Nn.THUMBNAIL_SCALE_FACTOR];n[t+s]=4278190080|65793*e}r+=this.dataWidth*Nn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Nn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Nn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let i=0,r=this.top*this.dataWidth+this.left;i<t;i++,r+=this.dataWidth){const t=r+e/2;for(let i=r,s=r+e-1;i<t;i++,s--){const e=n[i];n[i]=n[s],n[s]=e}}}invert(){return new N(this)}}Nn.THUMBNAIL_SCALE_FACTOR=2;class Ln extends O{constructor(e,t,n,i,r,s,a){if(super(t,n),this.dataWidth=i,this.dataHeight=r,this.left=s,this.top=a,4===e.BYTES_PER_ELEMENT){const i=t*n,r=new Uint8ClampedArray(i);for(let t=0;t<i;t++){const n=e[t],i=n>>16&255,s=n>>7&510,a=255&n;r[t]=(i+s+a)/4&255}this.luminances=r}else this.luminances=e;if(void 0===i&&(this.dataWidth=t),void 0===r&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const i=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,i,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,i=new Uint8ClampedArray(n);let r=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.luminances,r,i,0,n),i;for(let s=0;s<t;s++){const t=s*e;g.arraycopy(this.luminances,r,i,t,e),r+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,t,n,i){return new Ln(this.luminances,n,i,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new N(this)}}class Pn extends E{static forName(e){return this.getCharacterSetECIByName(e)}}class Un{}Un.ISO_8859_1=E.ISO8859_1;class Bn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Fn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class jn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Vn extends jn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Vn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+b.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends Vn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function zn(e,t,n){return new Hn(e,t,n)}function Gn(e,t,n){return new Vn(e,t,n)}const qn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wn=0,Xn=1,Kn=2,Yn=3,$n=4,Qn=new Vn(null,0,0),Zn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jn(e){for(let t of e)v.fill(t,-1);return e[Wn][$n]=0,e[Xn][$n]=0,e[Xn][Wn]=28,e[Yn][$n]=0,e[Kn][$n]=0,e[Kn][Wn]=15,e}const ei=Jn(v.createInt32Array(6,6));class ti{constructor(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,i=this.token;if(e!==this.mode){let t=Zn[this.mode][e];i=Gn(i,65535&t,t>>16),n+=t>>16}let r=e===Kn?4:5;return i=Gn(i,t,r),new ti(i,e,0,n+r)}shiftAndAppend(e,t){let n=this.token,i=this.mode===Kn?4:5;return n=Gn(n,ei[this.mode][e],i),n=Gn(n,t,5),new ti(n,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,i=this.bitCount;if(this.mode===$n||this.mode===Kn){let e=Zn[n][Wn];t=Gn(t,65535&e,e>>16),i+=e>>16,n=Wn}let r=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new ti(t,n,this.binaryShiftByteCount+1,i+r);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=zn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new ti(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Zn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=ti.calculateBinaryShiftCost(e)-ti.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let i=this.endBinaryShift(e.length).token;null!==i;i=i.getPrevious())t.unshift(i);let n=new T;for(const i of t)i.appendTo(n,e);return n}toString(){return I.format("%s bits=%d bytes=%d",qn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function ni(e){const t=I.getCharCode(" "),n=I.getCharCode("."),i=I.getCharCode(",");e[Wn][t]=1;const r=I.getCharCode("Z"),s=I.getCharCode("A");for(let h=s;h<=r;h++)e[Wn][h]=h-s+2;e[Xn][t]=1;const a=I.getCharCode("z"),o=I.getCharCode("a");for(let h=o;h<=a;h++)e[Xn][h]=h-o+2;e[Kn][t]=1;const l=I.getCharCode("9"),u=I.getCharCode("0");for(let h=u;h<=l;h++)e[Kn][h]=h-u+2;e[Kn][i]=12,e[Kn][n]=13;const c=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(let h=0;h<c.length;h++)e[Yn][I.getCharCode(c[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)I.getCharCode(d[h])>0&&(e[$n][I.getCharCode(d[h])]=h);return e}ti.INITIAL_STATE=new ti(Qn,Wn,0,0);const ii=ni(v.createInt32Array(5,256));class ri{constructor(e){this.text=e}encode(){const e=I.getCharCode(" "),t=I.getCharCode("\n");let n=Fn.singletonList(ti.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,s=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case I.getCharCode("\r"):i=s===t?2:0;break;case I.getCharCode("."):i=s===e?3:0;break;case I.getCharCode(","):i=s===e?4:0;break;case I.getCharCode(":"):i=s===e?5:0;break;default:i=0}i>0?(n=ri.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}const i=Fn.min(n,(e,t)=>e.getBitCount()-t.getBitCount());return i.toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let i of e)this.updateStateForChar(i,t,n);return ri.simplifyStates(n)}updateStateForChar(e,t,n){let i=255&this.text[t],r=ii[e.getMode()][i]>0,s=null;for(let a=0;a<=$n;a++){let o=ii[a][i];if(o>0){if(null==s&&(s=e.endBinaryShift(t)),!r||a===e.getMode()||a===Kn){const e=s.latchAndAppend(a,o);n.push(e)}if(!r&&ei[e.getMode()][a]>=0){const e=s.shiftAndAppend(a,o);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===ii[e.getMode()][i]){let i=e.addBinaryShiftChar(t);n.push(i)}}static updateStateListForPair(e,t,n){const i=[];for(let r of e)this.updateStateForPair(r,t,n,i);return this.simplifyStates(i)}static updateStateForPair(e,t,n,i){let r=e.endBinaryShift(t);if(i.push(r.latchAndAppend($n,n)),e.getMode()!==$n&&i.push(r.shiftAndAppend($n,n)),3===n||4===n){let e=r.latchAndAppend(Kn,16-n).latchAndAppend(Kn,1);i.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(e=>e!==i))}e&&t.push(n)}return t}}class si{constructor(){}static encodeBytes(e){return si.encode(e,si.DEFAULT_EC_PERCENT,si.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let i,r,s,a,o,l=new ri(e).encode(),u=b.truncDivision(l.getSize()*t,100)+11,c=l.getSize()+u;if(n!==si.DEFAULT_AZTEC_LAYERS){if(i=n<0,r=Math.abs(n),r>(i?si.MAX_NB_BITS_COMPACT:si.MAX_NB_BITS))throw new d(I.format("Illegal value %s for layers",n));s=si.totalBitsInLayer(r,i),a=si.WORD_SIZE[r];let e=s-s%a;if(o=si.stuffBits(l,a),o.getSize()+u>e)throw new d("Data to large for user specified layer");if(i&&o.getSize()>64*a)throw new d("Data to large for user specified layer")}else{a=0,o=null;for(let e=0;;e++){if(e>si.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(i=e<=3,r=i?e+1:e,s=si.totalBitsInLayer(r,i),c>s)continue;null!=o&&a===si.WORD_SIZE[r]||(a=si.WORD_SIZE[r],o=si.stuffBits(l,a));let t=s-s%a;if(!(i&&o.getSize()>64*a)&&o.getSize()+u<=t)break}}let h,p=si.generateCheckWords(o,s,a),f=o.getSize()/a,g=si.generateModeMessage(i,r,f),m=(i?11:14)+4*r,y=new Int32Array(m);if(i){h=m;for(let e=0;e<y.length;e++)y[e]=e}else{h=m+1+2*b.truncDivision(b.truncDivision(m,2)-1,15);let e=b.truncDivision(m,2),t=b.truncDivision(h,2);for(let n=0;n<e;n++){let i=n+b.truncDivision(n,15);y[e-n-1]=t-i-1,y[e+n]=t+i+1}}let v=new k(h);for(let d=0,b=0;d<r;d++){let e=4*(r-d)+(i?9:12);for(let t=0;t<e;t++){let n=2*t;for(let i=0;i<2;i++)p.get(b+n+i)&&v.set(y[2*d+i],y[2*d+t]),p.get(b+2*e+n+i)&&v.set(y[2*d+t],y[m-1-2*d-i]),p.get(b+4*e+n+i)&&v.set(y[m-1-2*d-i],y[m-1-2*d-t]),p.get(b+6*e+n+i)&&v.set(y[m-1-2*d-t],y[2*d+i])}b+=8*e}if(si.drawModeMessage(v,i,h,g),i)si.drawBullsEye(v,b.truncDivision(h,2),5);else{si.drawBullsEye(v,b.truncDivision(h,2),7);for(let e=0,t=0;e<b.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&b.truncDivision(h,2);n<h;n+=2)v.set(b.truncDivision(h,2)-t,n),v.set(b.truncDivision(h,2)+t,n),v.set(n,b.truncDivision(h,2)-t),v.set(n,b.truncDivision(h,2)+t)}let T=new Bn;return T.setCompact(i),T.setSize(h),T.setLayers(r),T.setCodeWords(f),T.setMatrix(v),T}static drawBullsEye(e,t,n){for(let i=0;i<n;i+=2)for(let n=t-i;n<=t+i;n++)e.set(n,t-i),e.set(n,t+i),e.set(t-i,n),e.set(t+i,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let i=new T;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=si.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=si.generateCheckWords(i,40,4)),i}static drawModeMessage(e,t,n,i){let r=b.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let t=r-3+s;i.get(s)&&e.set(t,r-5),i.get(s+7)&&e.set(r+5,t),i.get(20-s)&&e.set(t,r+5),i.get(27-s)&&e.set(r-5,t)}else for(let s=0;s<10;s++){let t=r-5+s+b.truncDivision(s,5);i.get(s)&&e.set(t,r-7),i.get(s+10)&&e.set(r+7,t),i.get(29-s)&&e.set(t,r+7),i.get(39-s)&&e.set(r-7,t)}}static generateCheckWords(e,t,n){let i=e.getSize()/n,r=new Sn(si.getGF(n)),s=b.truncDivision(t,n),a=si.bitsToWords(e,n,s);r.encode(a,s-i);let o=t%n,l=new T;l.appendBits(0,o);for(const u of Array.from(a))l.appendBits(u,n);return l}static bitsToWords(e,t,n){let i,r,s=new Int32Array(n);for(i=0,r=e.getSize()/t;i<r;i++){let n=0;for(let r=0;r<t;r++)n|=e.get(i*t+r)?1<<t-r-1:0;s[i]=n}return s}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let n=new T,i=e.getSize(),r=(1<<t)-2;for(let s=0;s<i;s+=t){let a=0;for(let n=0;n<t;n++)(s+n>=i||e.get(s+n))&&(a|=1<<t-1-n);(a&r)===r?(n.appendBits(a&r,t),s--):0===(a&r)?(n.appendBits(1|a,t),s--):n.appendBits(a,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}si.DEFAULT_EC_PERCENT=33,si.DEFAULT_AZTEC_LAYERS=0,si.MAX_NB_BITS=32,si.MAX_NB_BITS_COMPACT=4,si.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ai{encode(e,t,n,i){return this.encodeWithHints(e,t,n,i,null)}encodeWithHints(e,t,n,i,r){let s=Un.ISO_8859_1,a=si.DEFAULT_EC_PERCENT,o=si.DEFAULT_AZTEC_LAYERS;return null!=r&&(r.has(wn.CHARACTER_SET)&&(s=Pn.forName(r.get(wn.CHARACTER_SET).toString())),r.has(wn.ERROR_CORRECTION)&&(a=b.parseInt(r.get(wn.ERROR_CORRECTION).toString())),r.has(wn.AZTEC_LAYERS)&&(o=b.parseInt(r.get(wn.AZTEC_LAYERS).toString()))),ai.encodeLayers(e,t,n,i,s,a,o)}static encodeLayers(e,t,n,i,r,s,a){if(t!==H.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let o=si.encode(I.getBytes(e,r),s,a);return ai.renderResult(o,n,i)}static renderResult(e,t,n){let i=e.getMatrix();if(null==i)throw new ne;let r=i.getWidth(),s=i.getHeight(),a=Math.max(t,r),o=Math.max(n,s),l=Math.min(a/r,o/s),u=(a-r*l)/2,c=(o-s*l)/2,d=new k(a,o);for(let h=0,p=c;h<s;h++,p+=l)for(let e=0,t=u;e<r;e++,t+=l)i.get(e,h)&&d.setRegion(t,p,l,l);return d}}e.AbstractExpandedDecoder=qe,e.ArgumentException=c,e.ArithmeticException=J,e.AztecCode=Bn,e.AztecCodeReader=ye,e.AztecCodeWriter=ai,e.AztecDecoder=re,e.AztecDetector=me,e.AztecDetectorResult=ue,e.AztecEncoder=si,e.AztecHighLevelEncoder=ri,e.AztecPoint=ge,e.BarcodeFormat=H,e.Binarizer=f,e.BinaryBitmap=h,e.BitArray=T,e.BitMatrix=k,e.BitSource=gt,e.BrowserAztecCodeReader=ve,e.BrowserBarcodeReader=ut,e.BrowserCodeReader=F,e.BrowserDatamatrixCodeReader=Tt,e.BrowserMultiFormatReader=vn,e.BrowserPDF417Reader=bn,e.BrowserQRCodeReader=Tn,e.BrowserQRCodeSvgWriter=Dn,e.CharacterSetECI=E,e.ChecksumException=p,e.Code128Reader=Te,e.Code39Reader=_e,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=bt,e.DecodeHintType=w,e.DecoderResult=$,e.DefaultGridSampler=pe,e.DetectorResult=le,e.EAN13Reader=xe,e.EncodeHintType=wn,e.Exception=u,e.FormatException=S,e.GenericGF=ee,e.GenericGFPoly=Z,e.GlobalHistogramBinarizer=D,e.GridSampler=de,e.GridSamplerInstance=fe,e.HTMLCanvasElementLuminanceSource=L,e.HybridBinarizer=R,e.ITFReader=we,e.IllegalArgumentException=d,e.IllegalStateException=ne,e.InvertedLuminanceSource=N,e.LuminanceSource=O,e.MathUtils=se,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=On,e.NotFoundException=M,e.OneDReader=be,e.PDF417DecodedBitStreamParser=pn,e.PDF417DecoderErrorCorrection=Wt,e.PDF417Reader=gn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=Nn,e.QRCodeByteMatrix=An,e.QRCodeDataMask=Ct,e.QRCodeDecodedBitStreamParser=Mt,e.QRCodeDecoderErrorCorrectionLevel=_t,e.QRCodeDecoderFormatInformation=wt,e.QRCodeEncoder=Mn,e.QRCodeEncoderQRCode=Cn,e.QRCodeMaskUtil=En,e.QRCodeMatrixUtil=xn,e.QRCodeMode=kt,e.QRCodeReader=Ft,e.QRCodeVersion=At,e.QRCodeWriter=Rn,e.RGBLuminanceSource=Ln,e.RSS14Reader=ot,e.RSSExpandedReader=st,e.ReaderException=mn,e.ReedSolomonDecoder=ie,e.ReedSolomonEncoder=Sn,e.ReedSolomonException=te,e.Result=j,e.ResultMetadataType=Y,e.ResultPoint=oe,e.StringUtils=I,e.UnsupportedOperationException=A,e.VideoInputDevice=P,e.WhiteRectangleDetector=ce,e.WriterException=In,e.ZXingArrays=v,e.ZXingCharset=Pn,e.ZXingInteger=b,e.ZXingStandardCharsets=Un,e.ZXingStringBuilder=x,e.ZXingStringEncoding=C,e.ZXingSystem=g,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})})},2777:function(e,t,n){"use strict";var i=n(9565),r=n(34),s=n(757),a=n(5966),o=n(4270),l=n(8227),u=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,l=a(e,c);if(l){if(void 0===t&&(t="default"),n=i(l,e,t),!r(n)||s(n))return n;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},2787:function(e,t,n){"use strict";var i=n(9297),r=n(4901),s=n(8981),a=n(6119),o=n(2211),l=a("IE_PROTO"),u=Object,c=u.prototype;e.exports=o?u.getPrototypeOf:function(e){var t=s(e);if(i(t,l))return t[l];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof u?c:null}},2796:function(e,t,n){"use strict";var i=n(9039),r=n(4901),s=/#|\.prototype\./,a=function(e,t){var n=l[o(e)];return n===c||n!==u&&(r(t)?i(t):!!t)},o=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},2839:function(e,t,n){"use strict";var i=n(4576),r=i.navigator,s=r&&r.userAgent;e.exports=s?String(s):""},2967:function(e,t,n){"use strict";var i=n(6706),r=n(34),s=n(7750),a=n(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=i(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(o){}return function(n,i){return s(n),a(i),r(n)?(t?e(n,i):n.__proto__=i,n):n}}():void 0)},3167:function(e,t,n){"use strict";var i=n(4901),r=n(34),s=n(2967);e.exports=function(e,t,n){var a,o;return s&&i(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&s(e,o),e}},3392:function(e,t,n){"use strict";var i=n(9504),r=0,s=Math.random(),a=i(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+s,36)}},3440:function(e,t,n){"use strict";var i=n(7080),r=n(4402),s=n(9286),a=n(5170),o=n(3789),l=n(8469),u=n(507),c=r.has,d=r.remove;e.exports=function(e){var t=i(this),n=o(e),r=s(t);return a(t)<=n.size?l(t,function(e){n.includes(e)&&d(r,e)}):u(n.getIterator(),function(e){c(r,e)&&d(r,e)}),r}},3471:function(e,t,n){"use strict";n(4114),n(8111),n(7588);var i=n(2281),r=n(8019),s=n(9553),a=n(59),o=n(7969);h.httpHandler=n(2646),h.requestInterceptorsStorage=new a,h.responseInterceptorsStorage=new a,h.retryManager=new o;
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
var l=function(e){var t={};return e?(e.trim().split("\n").forEach(function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();"undefined"===typeof t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]}),t):t};function u(e,t){for(var n=0;n<e.length;n++)t(e[n])}function c(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function d(e,t,n){var i=e;return s(t)?(n=t,"string"===typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function h(e,t,n){return t=d(e,t,n),p(t)}function p(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");if(e.requestType&&h.requestInterceptorsStorage.getIsEnabled()){var t={uri:e.uri||e.url,headers:e.headers||{},body:e.body,metadata:e.metadata||{},retry:e.retry,timeout:e.timeout},n=h.requestInterceptorsStorage.execute(e.requestType,t);e.uri=n.uri,e.headers=n.headers,e.body=n.body,e.metadata=n.metadata,e.retry=n.retry,e.timeout=n.timeout}var i=!1,r=function(t,n,r){i||(i=!0,e.callback(t,n,r))};function s(){4!==m.readyState||h.responseInterceptorsStorage.getIsEnabled()||setTimeout(u,0)}function a(){var e=void 0;if(e=m.response?m.response:m.responseText||f(m),S)try{e=JSON.parse(e)}catch(t){}return e}function o(t){if(clearTimeout(y),clearTimeout(e.retryTimeout),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,g||!h.retryManager.getIsEnabled()||!e.retry||!e.retry.shouldRetry()){if(e.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var n={headers:E.headers||{},body:E.body,responseUrl:m.responseURL,responseType:m.responseType},i=h.responseInterceptorsStorage.execute(e.requestType,n);E.body=i.body,E.headers=i.headers}return r(t,E)}e.retryTimeout=setTimeout(function(){e.retry.moveToNextAttempt(),e.xhr=m,p(e)},e.retry.getCurrentFuzzedDelay())}function u(){if(!g){var t;clearTimeout(y),clearTimeout(e.retryTimeout),t=e.useXDR&&void 0===m.status?200:1223===m.status?204:m.status;var n=E,i=null;if(0!==t?(n={body:a(),statusCode:t,method:b,headers:{},url:v,rawRequest:m},m.getAllResponseHeaders&&(n.headers=l(m.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),e.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var s={headers:n.headers||{},body:n.body,responseUrl:m.responseURL,responseType:m.responseType},o=h.responseInterceptorsStorage.execute(e.requestType,s);n.body=o.body,n.headers=o.headers}return r(i,n,n.body)}}var d,g,m=e.xhr||null;m||(m=e.cors||e.useXDR?new h.XDomainRequest:new h.XMLHttpRequest);var y,v=m.url=e.uri||e.url,b=m.method=e.method||"GET",T=e.body||e.data,_=m.headers=e.headers||{},w=!!e.sync,S=!1,E={body:void 0,headers:{},statusCode:0,method:b,url:v,rawRequest:m};if("json"in e&&!1!==e.json&&(S=!0,_["accept"]||_["Accept"]||(_["Accept"]="application/json"),"GET"!==b&&"HEAD"!==b&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),T=JSON.stringify(!0===e.json?T:e.json))),m.onreadystatechange=s,m.onload=u,m.onerror=o,m.onprogress=function(){},m.onabort=function(){g=!0,clearTimeout(e.retryTimeout)},m.ontimeout=o,m.open(b,v,!w,e.username,e.password),w||(m.withCredentials=!!e.withCredentials),!w&&e.timeout>0&&(y=setTimeout(function(){if(!g){g=!0,m.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),m.setRequestHeader)for(d in _)_.hasOwnProperty(d)&&m.setRequestHeader(d,_[d]);else if(e.headers&&!c(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(m.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(m),m.send(T||null),m}function f(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}function g(){}e.exports=h,e.exports["default"]=h,h.XMLHttpRequest=i.XMLHttpRequest||g,h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:i.XDomainRequest,u(["get","put","post","patch","head","delete"],function(e){h["delete"===e?"del":e]=function(t,n,i){return n=d(t,n,i),n.method=e.toUpperCase(),p(n)}})},3506:function(e,t,n){"use strict";var i=n(3925),r=String,s=TypeError;e.exports=function(e){if(i(e))return e;throw new s("Can't set "+r(e)+" as a prototype")}},3579:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(2652),a=n(9306),o=n(8551),l=n(1767),u=n(9539),c=n(4549),d=c("some",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(e){o(this);try{a(e)}catch(i){u(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;return s(t,function(t,i){if(e(t,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:function(e,t,n){"use strict";var i=n(7080),r=n(4402),s=n(9286),a=n(3789),o=n(507),l=r.add,u=r.has,c=r.remove;e.exports=function(e){var t=i(this),n=a(e).getIterator(),r=s(t);return o(n,function(e){u(t,e)?c(r,e):l(r,e)}),r}},3706:function(e,t,n){"use strict";var i=n(9504),r=n(4901),s=n(7629),a=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return a(e)}),e.exports=s.inspectSource},3717:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},3724:function(e,t,n){"use strict";var i=n(9039);e.exports=!i(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:function(e,t,n){"use strict";var i=n(9306),r=n(8551),s=n(9565),a=n(1291),o=n(1767),l="Invalid size",u=RangeError,c=TypeError,d=Math.max,h=function(e,t){this.set=e,this.size=d(t,0),this.has=i(e.has),this.keys=i(e.keys)};h.prototype={getIterator:function(){return o(r(s(this.keys,this.set)))},includes:function(e){return s(this.has,this.set,e)}},e.exports=function(e){r(e);var t=+e.size;if(t!==t)throw new c(l);var n=a(t);if(n<0)throw new u(l);return new h(e,n)}},3838:function(e,t,n){"use strict";var i=n(7080),r=n(5170),s=n(8469),a=n(3789);e.exports=function(e){var t=i(this),n=a(e);return!(r(t)>n.size)&&!1!==s(t,function(e){if(!n.includes(e))return!1},!0)}},3853:function(e,t,n){"use strict";var i=n(6518),r=n(4449),s=n(4916),a=!s("isDisjointFrom",function(e){return!e});i({target:"Set",proto:!0,real:!0,forced:a},{isDisjointFrom:r})},3909:function(e){var t,n,i,r,s,a,o,l=9e4;t=function(e){return e*l},n=function(e,t){return e*t},i=function(e){return e/l},r=function(e,t){return e/t},s=function(e,n){return t(r(e,n))},a=function(e,t){return n(i(e),t)},o=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o}},3925:function(e,t,n){"use strict";var i=n(34);e.exports=function(e){return i(e)||null===e}},4055:function(e,t,n){"use strict";var i=n(4576),r=n(34),s=i.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},4114:function(e,t,n){"use strict";var i=n(6518),r=n(8981),s=n(6198),a=n(4527),o=n(6837),l=n(9039),u=l(function(){return 4294967297!==[].push.call({length:4294967296},1)}),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=u||!c();i({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=r(this),n=s(t),i=arguments.length;o(n+i);for(var l=0;l<i;l++)t[n]=arguments[l],n++;return a(t,n),n}})},4117:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},4204:function(e,t,n){"use strict";var i=n(7080),r=n(4402).add,s=n(9286),a=n(3789),o=n(507);e.exports=function(e){var t=i(this),n=a(e).getIterator(),l=s(t);return o(n,function(e){r(l,e)}),l}},4209:function(e,t,n){"use strict";var i=n(8227),r=n(6269),s=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[s]===e)}},4215:function(e,t,n){"use strict";var i=n(4576),r=n(2839),s=n(2195),a=function(e){return r.slice(0,e.length)===e};e.exports=function(){return a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"}()},4232:function(e,t,n){"use strict";n.d(t,{$3:function(){return p},$H:function(){return U},BH:function(){return q},BX:function(){return ne},Bm:function(){return _},C4:function(){return Q},CE:function(){return g},CP:function(){return u},DY:function(){return B},Gv:function(){return w},J$:function(){return J},Kg:function(){return T},MZ:function(){return r},Mp:function(){return l},NO:function(){return o},Oj:function(){return s},PT:function(){return R},Qd:function(){return I},Ro:function(){return V},SU:function(){return k},TF:function(){return d},Tg:function(){return N},Tn:function(){return b},Tr:function(){return W},We:function(){return z},X$:function(){return c},Y2:function(){return ee},ZH:function(){return L},Zf:function(){return C},bB:function(){return j},cy:function(){return f},gd:function(){return v},pD:function(){return i},rU:function(){return P},tE:function(){return a},u3:function(){return ie},vM:function(){return m},v_:function(){return se},yI:function(){return x},yL:function(){return S},yQ:function(){return F}});n(4114),n(8111),n(2489),n(7588);
/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function i(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}const r={},s=[],a=()=>{},o=()=>!1,l=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),u=e=>e.startsWith("onUpdate:"),c=Object.assign,d=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},h=Object.prototype.hasOwnProperty,p=(e,t)=>h.call(e,t),f=Array.isArray,g=e=>"[object Map]"===A(e),m=e=>"[object Set]"===A(e),y=e=>"[object Date]"===A(e),v=e=>"[object RegExp]"===A(e),b=e=>"function"===typeof e,T=e=>"string"===typeof e,_=e=>"symbol"===typeof e,w=e=>null!==e&&"object"===typeof e,S=e=>(w(e)||b(e))&&b(e.then)&&b(e.catch),E=Object.prototype.toString,A=e=>E.call(e),C=e=>A(e).slice(8,-1),I=e=>"[object Object]"===A(e),x=e=>T(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,k=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),M=e=>{const t=Object.create(null);return n=>{const i=t[n];return i||(t[n]=e(n))}},D=/-(\w)/g,R=M(e=>e.replace(D,(e,t)=>t?t.toUpperCase():"")),O=/\B([A-Z])/g,N=M(e=>e.replace(O,"-$1").toLowerCase()),L=M(e=>e.charAt(0).toUpperCase()+e.slice(1)),P=M(e=>{const t=e?`on${L(e)}`:"";return t}),U=(e,t)=>!Object.is(e,t),B=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},F=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},j=e=>{const t=parseFloat(e);return isNaN(t)?e:t},V=e=>{const t=T(e)?Number(e):NaN;return isNaN(t)?e:t};let H;const z=()=>H||(H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const G="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",q=i(G);function W(e){if(f(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=T(i)?$(i):W(i);if(r)for(const e in r)t[e]=r[e]}return t}if(T(e)||w(e))return e}const X=/;(?![^(]*\))/g,K=/:([^]+)/,Y=/\/\*[^]*?\*\//g;function $(e){const t={};return e.replace(Y,"").split(X).forEach(e=>{if(e){const n=e.split(K);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Q(e){let t="";if(T(e))t=e;else if(f(e))for(let n=0;n<e.length;n++){const i=Q(e[n]);i&&(t+=i+" ")}else if(w(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Z="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J=i(Z);function ee(e){return!!e||""===e}function te(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=ne(e[i],t[i]);return n}function ne(e,t){if(e===t)return!0;let n=y(e),i=y(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=_(e),i=_(t),n||i)return e===t;if(n=f(e),i=f(t),n||i)return!(!n||!i)&&te(e,t);if(n=w(e),i=w(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!ne(e[n],t[n]))return!1}}return String(e)===String(t)}function ie(e,t){return e.findIndex(e=>ne(e,t))}const re=e=>!(!e||!0!==e["__v_isRef"]),se=e=>T(e)?e:null==e?"":f(e)||w(e)&&(e.toString===E||!b(e.toString))?re(e)?se(e.value):JSON.stringify(e,ae,2):String(e),ae=(e,t)=>re(t)?ae(e,t.value):g(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],i)=>(e[oe(t,i)+" =>"]=n,e),{})}:m(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>oe(e))}:_(t)?oe(t):!w(t)||f(t)||I(t)?t:String(t),oe=(e,t="")=>{var n;return _(e)?`Symbol(${null!=(n=e.description)?n:t})`:e}},4236:function(e,t,n){var i,r="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:{},s=n(542);"undefined"!==typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=s)),e.exports=i},4252:function(e,t,n){n(4114),n(8111),n(7588);var i=n(4236),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function s(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function a(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function o(){this.values=r(null)}function l(e,t,n,i){var r=i?e.split(i):[e];for(var s in r)if("string"===typeof r[s]){var a=r[s].split(n);if(2===a.length){var o=a[0].trim(),l=a[1].trim();t(o,l)}}}function u(e,t,n){var i=e;function r(){var t=a(e);if(null===t)throw new s(s.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(e,t){var i=new o;l(e,function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),a=s[0];i.integer(e,a),i.percent(e,a)&&i.set("snapToLines",!1),i.alt(e,a,["auto"]),2===s.length&&i.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=t.split(","),i.percent(e,s[0]),2===s.length&&i.alt("positionAlign",s[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"]);break}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(r){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(r){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(r){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=r(),c(),"--\x3e"!==e.substr(0,3))throw new s(s.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),c(),t.endTime=r(),c(),u(e,t)}s.prototype=r(Error.prototype),s.prototype.constructor=s,s.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var c=i.createElement&&i.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function g(e,t){function n(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var n=t.match(/^([^<]*)(<[^>]*>?)?/);return e(n[1]?n[1]:n[2])}function i(e){return c.innerHTML=e,e=c.textContent,c.textContent="",e}function r(e,t){return!f[t.localName]||f[t.localName]===e.localName}function s(t,n){var i=d[t];if(!i)return null;var r=e.document.createElement(i),s=p[t];return s&&n&&(r[s]=n.trim()),r}var o,l=e.document.createElement("div"),u=l,g=[];while(null!==(o=n()))if("<"!==o[0])u.appendChild(e.document.createTextNode(i(o)));else{if("/"===o[1]){g.length&&g[g.length-1]===o.substr(2).replace(">","")&&(g.pop(),u=u.parentNode);continue}var m,y=a(o.substr(1,o.length-2));if(y){m=e.document.createProcessingInstruction("timestamp",y),u.appendChild(m);continue}var v=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(m=s(v[1],v[3]),!m)continue;if(!r(u,m))continue;if(v[2]){var b=v[2].split(".");b.forEach(function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(h.hasOwnProperty(n)){var i=t?"background-color":"color",r=h[n];m.style[i]=r}}),m.className=b.join(" ")}g.push(v[1]),u.appendChild(m),u=m}return l}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(e){for(var t=0;t<m.length;t++){var n=m[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function v(e){var t,n=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function s(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):n}return"ruby"===t.tagName?s(e):t.childNodes?(r(e,t),s(e)):void 0}r(n,e);while(i=s(n))for(var a=0;a<i.length;a++)if(t=i.charCodeAt(a),y(t))return"rtl";return"ltr"}function b(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}function T(){}function _(e,t,n){T.call(this),this.cue=t,this.cueDiv=g(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:v(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":case"line-left":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":case"line-right":r=t.position-t.size;break}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function S(e,t,n,i){function r(e,t){for(var r,s=new w(e),a=1,o=0;o<t.length;o++){while(e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(i))e.move(t[o]);if(e.within(n))return e;var l=e.intersectPercentage(n);a>l&&(r=new w(e),a=l),e=new w(s)}return r||s}var s=new w(t),a=t.cue,o=b(a),l=[];if(a.snapToLines){var u;switch(a.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=s.lineHeight,d=c*Math.round(o),h=n[u]+c,p=l[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/c)*c),o<0&&(d+=""===a.vertical?n.height:n.width,l=l.reverse()),s.move(p,d)}else{var f=s.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=f/2;break;case"end":o-=f;break}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],s=new w(t)}var g=r(s,l);t.move(g.toCSSCompatValues(n))}function E(){}T.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},T.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=r(T.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),n=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),i=t*n;return i/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var r={left:e.left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n};return r},E.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},E.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null};var A=.05,C="sans-serif",I="1.5%";E.processCues=function(e,t,n){if(!e||!t||!n)return null;while(n.firstChild)n.removeChild(n.firstChild);var i=e.document.createElement("div");function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=I,n.appendChild(i),r(t)){var s=[],a=w.getSimpleBoxPosition(i),o=Math.round(a.height*A*100)/100,l={font:o+"px "+C};(function(){for(var n,r,o=0;o<t.length;o++)r=t[o],n=new _(e,r,l),i.appendChild(n.div),S(e,n,a,s),r.displayState=n.div,s.push(w.getSimpleBoxPosition(n))})()}else for(var u=0;u<t.length;u++)i.appendChild(t[u].displayState)},E.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},E.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof s))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){var e=t.buffer,n=0;while(n<e.length&&"\r"!==e[n]&&"\n"!==e[n])++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){var n=new o;if(l(e,function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new o;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"]);break}},/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}function r(e){var n=new o;l(e,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",a(t));break}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}function c(e){e.match(/X-TIMESTAMP-MAP/)?l(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":r(t);break}},/=/):l(e,function(e,t){switch(e){case"Region":i(t);break}},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var d;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;d=n();var h=d.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new s(s.Errors.BadSignature);t.state="HEADER"}var p=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(p?p=!1:d=n(),t.state){case"HEADER":/:/.test(d)?c(d):d||(t.state="ID");continue;case"NOTE":d||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){t.state="NOTE";break}if(!d)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(g){t.cue.align="middle"}if(t.state="CUE",-1===d.indexOf("--\x3e")){t.cue.id=d;continue}case"CUE":try{u(d,t.cue,t.regionList)}catch(g){t.reportOrThrowError(g),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var f=-1!==d.indexOf("--\x3e");if(!d||f&&(p=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=d.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":d||(t.state="ID");continue}}}catch(g){t.reportOrThrowError(g),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new s(s.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=E},4270:function(e,t,n){"use strict";var i=n(9565),r=n(4901),s=n(34),a=TypeError;e.exports=function(e,t){var n,o;if("string"===t&&r(n=e.toString)&&!s(o=i(n,e)))return o;if(r(n=e.valueOf)&&!s(o=i(n,e)))return o;if("string"!==t&&r(n=e.toString)&&!s(o=i(n,e)))return o;throw new a("Can't convert object to primitive value")}},4373:function(e,t,n){"use strict";n.d(t,{A:function(){return vn}});var i={};n.r(i),n.d(i,{hasBrowserEnv:function(){return Ue},hasStandardBrowserEnv:function(){return Fe},hasStandardBrowserWebWorkerEnv:function(){return je},navigator:function(){return Be},origin:function(){return Ve}});n(4114),n(8111),n(7588),n(9577),n(9848);function r(e,t){return function(){return e.apply(t,arguments)}}const{toString:s}=Object.prototype,{getPrototypeOf:a}=Object,{iterator:o,toStringTag:l}=Symbol,u=(e=>t=>{const n=s.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),c=e=>(e=e.toLowerCase(),t=>u(t)===e),d=e=>t=>typeof t===e,{isArray:h}=Array,p=d("undefined");function f(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=c("ArrayBuffer");function m(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t}const y=d("string"),v=d("function"),b=d("number"),T=e=>null!==e&&"object"===typeof e,_=e=>!0===e||!1===e,w=e=>{if("object"!==u(e))return!1;const t=a(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(o in e)},S=c("Date"),E=c("File"),A=c("Blob"),C=c("FileList"),I=e=>T(e)&&v(e.pipe),x=e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||v(e.append)&&("formdata"===(t=u(e))||"object"===t&&v(e.toString)&&"[object FormData]"===e.toString()))},k=c("URLSearchParams"),[M,D,R,O]=["ReadableStream","Request","Response","Headers"].map(c),N=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function L(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let i,r;if("object"!==typeof e&&(e=[e]),h(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let a;for(i=0;i<s;i++)a=r[i],t.call(null,e[a],a,e)}}function P(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;while(r-- >0)if(i=n[r],t===i.toLowerCase())return i;return null}const U=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),B=e=>!p(e)&&e!==U;function F(){const{caseless:e}=B(this)&&this||{},t={},n=(n,i)=>{const r=e&&P(t,i)||i;w(t[r])&&w(n)?t[r]=F(t[r],n):w(n)?t[r]=F({},n):h(n)?t[r]=n.slice():t[r]=n};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&L(arguments[i],n);return t}const j=(e,t,n,{allOwnKeys:i}={})=>(L(t,(t,i)=>{n&&v(t)?e[i]=r(t,n):e[i]=t},{allOwnKeys:i}),e),V=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),H=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},z=(e,t,n,i)=>{let r,s,o;const l={};if(t=t||{},null==e)return t;do{r=Object.getOwnPropertyNames(e),s=r.length;while(s-- >0)o=r[s],i&&!i(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==n&&a(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},G=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},q=e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!b(t))return null;const n=new Array(t);while(t-- >0)n[t]=e[t];return n},W=(e=>t=>e&&t instanceof e)("undefined"!==typeof Uint8Array&&a(Uint8Array)),X=(e,t)=>{const n=e&&e[o],i=n.call(e);let r;while((r=i.next())&&!r.done){const n=r.value;t.call(e,n[0],n[1])}},K=(e,t)=>{let n;const i=[];while(null!==(n=e.exec(t)))i.push(n);return i},Y=c("HTMLFormElement"),$=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),Q=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Z=c("RegExp"),J=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};L(n,(n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)}),Object.defineProperties(e,i)},ee=e=>{J(e,(t,n)=>{if(v(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];v(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},te=(e,t)=>{const n={},i=e=>{e.forEach(e=>{n[e]=!0})};return h(e)?i(e):i(String(e).split(t)),n},ne=()=>{},ie=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function re(e){return!!(e&&v(e.append)&&"FormData"===e[l]&&e[o])}const se=e=>{const t=new Array(10),n=(e,i)=>{if(T(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=h(e)?[]:{};return L(e,(e,t)=>{const s=n(e,i+1);!p(s)&&(r[t]=s)}),t[i]=void 0,r}}return e};return n(e,0)},ae=c("AsyncFunction"),oe=e=>e&&(T(e)||v(e))&&v(e.then)&&v(e.catch),le=((e,t)=>e?setImmediate:t?((e,t)=>(U.addEventListener("message",({source:n,data:i})=>{n===U&&i===e&&t.length&&t.shift()()},!1),n=>{t.push(n),U.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))("function"===typeof setImmediate,v(U.postMessage)),ue="undefined"!==typeof queueMicrotask?queueMicrotask.bind(U):"undefined"!==typeof process&&process.nextTick||le,ce=e=>null!=e&&v(e[o]);var de={isArray:h,isArrayBuffer:g,isBuffer:f,isFormData:x,isArrayBufferView:m,isString:y,isNumber:b,isBoolean:_,isObject:T,isPlainObject:w,isReadableStream:M,isRequest:D,isResponse:R,isHeaders:O,isUndefined:p,isDate:S,isFile:E,isBlob:A,isRegExp:Z,isFunction:v,isStream:I,isURLSearchParams:k,isTypedArray:W,isFileList:C,forEach:L,merge:F,extend:j,trim:N,stripBOM:V,inherits:H,toFlatObject:z,kindOf:u,kindOfTest:c,endsWith:G,toArray:q,forEachEntry:X,matchAll:K,isHTMLForm:Y,hasOwnProperty:Q,hasOwnProp:Q,reduceDescriptors:J,freezeMethods:ee,toObjectSet:te,toCamelCase:$,noop:ne,toFiniteNumber:ie,findKey:P,global:U,isContextDefined:B,isSpecCompliantForm:re,toJSONObject:se,isAsyncFn:ae,isThenable:oe,setImmediate:le,asap:ue,isIterable:ce};n(1701),n(3579),n(1806);function he(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}de.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.status}}});const pe=he.prototype,fe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{fe[e]={value:e}}),Object.defineProperties(he,fe),Object.defineProperty(pe,"isAxiosError",{value:!0}),he.from=(e,t,n,i,r,s)=>{const a=Object.create(pe);return de.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),he.call(a,e.message,t,n,i,r),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};var ge=he,me=null;function ye(e){return de.isPlainObject(e)||de.isArray(e)}function ve(e){return de.endsWith(e,"[]")?e.slice(0,-2):e}function be(e,t,n){return e?e.concat(t).map(function(e,t){return e=ve(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}function Te(e){return de.isArray(e)&&!e.some(ye)}const _e=de.toFlatObject(de,{},null,function(e){return/^is[A-Z]/.test(e)});function we(e,t,n){if(!de.isObject(e))throw new TypeError("target must be an object");t=t||new(me||FormData),n=de.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!de.isUndefined(t[e])});const i=n.metaTokens,r=n.visitor||c,s=n.dots,a=n.indexes,o=n.Blob||"undefined"!==typeof Blob&&Blob,l=o&&de.isSpecCompliantForm(t);if(!de.isFunction(r))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(de.isDate(e))return e.toISOString();if(de.isBoolean(e))return e.toString();if(!l&&de.isBlob(e))throw new ge("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(e)||de.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let o=e;if(e&&!r&&"object"===typeof e)if(de.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(de.isArray(e)&&Te(e)||(de.isFileList(e)||de.endsWith(n,"[]"))&&(o=de.toArray(e)))return n=ve(n),o.forEach(function(e,i){!de.isUndefined(e)&&null!==e&&t.append(!0===a?be([n],i,s):null===a?n:n+"[]",u(e))}),!1;return!!ye(e)||(t.append(be(r,n,s),u(e)),!1)}const d=[],h=Object.assign(_e,{defaultVisitor:c,convertValue:u,isVisitable:ye});function p(e,n){if(!de.isUndefined(e)){if(-1!==d.indexOf(e))throw Error("Circular reference detected in "+n.join("."));d.push(e),de.forEach(e,function(e,i){const s=!(de.isUndefined(e)||null===e)&&r.call(t,e,de.isString(i)?i.trim():i,n,h);!0===s&&p(e,n?n.concat(i):[i])}),d.pop()}}if(!de.isObject(e))throw new TypeError("data must be an object");return p(e),t}var Se=we;function Ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Ae(e,t){this._pairs=[],e&&Se(e,this,t)}const Ce=Ae.prototype;Ce.append=function(e,t){this._pairs.push([e,t])},Ce.toString=function(e){const t=e?function(t){return e.call(this,t,Ee)}:Ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var Ie=Ae;function xe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ke(e,t,n){if(!t)return e;const i=n&&n.encode||xe;de.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):de.isURLSearchParams(t)?t.toString():new Ie(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}class Me{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){de.forEach(this.handlers,function(t){null!==t&&e(t)})}}var De=Me,Re={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oe="undefined"!==typeof URLSearchParams?URLSearchParams:Ie,Ne="undefined"!==typeof FormData?FormData:null,Le="undefined"!==typeof Blob?Blob:null,Pe={isBrowser:!0,classes:{URLSearchParams:Oe,FormData:Ne,Blob:Le},protocols:["http","https","file","blob","url","data"]};const Ue="undefined"!==typeof window&&"undefined"!==typeof document,Be="object"===typeof navigator&&navigator||void 0,Fe=Ue&&(!Be||["ReactNative","NativeScript","NS"].indexOf(Be.product)<0),je=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)(),Ve=Ue&&window.location.href||"http://localhost";var He={...i,...Pe};function ze(e,t){return Se(e,new He.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return He.isNode&&de.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Ge(e){return de.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function qe(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}function We(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=r>=e.length;if(s=!s&&de.isArray(i)?i.length:s,o)return de.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a;i[s]&&de.isObject(i[s])||(i[s]=[]);const l=t(e,n,i[s],r);return l&&de.isArray(i[s])&&(i[s]=qe(i[s])),!a}if(de.isFormData(e)&&de.isFunction(e.entries)){const n={};return de.forEachEntry(e,(e,i)=>{t(Ge(e),i,n,0)}),n}return null}var Xe=We;function Ke(e,t,n){if(de.isString(e))try{return(t||JSON.parse)(e),de.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}const Ye={transitional:Re,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=de.isObject(e);r&&de.isHTMLForm(e)&&(e=new FormData(e));const s=de.isFormData(e);if(s)return i?JSON.stringify(Xe(e)):e;if(de.isArrayBuffer(e)||de.isBuffer(e)||de.isStream(e)||de.isFile(e)||de.isBlob(e)||de.isReadableStream(e))return e;if(de.isArrayBufferView(e))return e.buffer;if(de.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return ze(e,this.formSerializer).toString();if((a=de.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Se(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),Ke(e)):e}],transformResponse:[function(e){const t=this.transitional||Ye.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(de.isResponse(e)||de.isReadableStream(e))return e;if(e&&de.isString(e)&&(n&&!this.responseType||i)){const n=t&&t.silentJSONParsing,s=!n&&i;try{return JSON.parse(e)}catch(r){if(s){if("SyntaxError"===r.name)throw ge.from(r,ge.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:He.classes.FormData,Blob:He.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],e=>{Ye.headers[e]={}});var $e=Ye;const Qe=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ze=e=>{const t={};let n,i,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&Qe[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t};const Je=Symbol("internals");function et(e){return e&&String(e).trim().toLowerCase()}function tt(e){return!1===e||null==e?e:de.isArray(e)?e.map(tt):String(e)}function nt(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;while(i=n.exec(e))t[i[1]]=i[2];return t}const it=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rt(e,t,n,i,r){return de.isFunction(i)?i.call(this,t,n):(r&&(t=n),de.isString(t)?de.isString(i)?-1!==t.indexOf(i):de.isRegExp(i)?i.test(t):void 0:void 0)}function st(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function at(e,t){const n=de.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})})}class ot{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=et(t);if(!r)throw new Error("header name must be a non-empty string");const s=de.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=tt(e))}const s=(e,t)=>de.forEach(e,(e,n)=>r(e,n,t));if(de.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(de.isString(e)&&(e=e.trim())&&!it(e))s(Ze(e),t);else if(de.isObject(e)&&de.isIterable(e)){let n,i,r={};for(const t of e){if(!de.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?de.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=et(e),e){const n=de.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return nt(e);if(de.isFunction(t))return t.call(this,e,n);if(de.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=et(e),e){const n=de.findKey(this,e);return!(!n||void 0===this[n]||t&&!rt(this,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=et(e),e){const r=de.findKey(n,e);!r||t&&!rt(n,n[r],r,t)||(delete n[r],i=!0)}}return de.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;while(n--){const r=t[n];e&&!rt(this,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return de.forEach(this,(i,r)=>{const s=de.findKey(n,r);if(s)return t[s]=tt(i),void delete t[r];const a=e?st(r):String(r).trim();a!==r&&delete t[r],t[a]=tt(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return de.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&de.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=this[Je]=this[Je]={accessors:{}},n=t.accessors,i=this.prototype;function r(e){const t=et(e);n[t]||(at(i,e),n[t]=!0)}return de.isArray(e)?e.forEach(r):r(e),this}}ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),de.reduceDescriptors(ot.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),de.freezeMethods(ot);var lt=ot;function ut(e,t){const n=this||$e,i=t||n,r=lt.from(i.headers);let s=i.data;return de.forEach(e,function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function ct(e){return!(!e||!e.__CANCEL__)}function dt(e,t,n){ge.call(this,null==e?"canceled":e,ge.ERR_CANCELED,t,n),this.name="CanceledError"}de.inherits(dt,ge,{__CANCEL__:!0});var ht=dt;function pt(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new ge("Request failed with status code "+n.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function ft(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function gt(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),u=i[a];r||(r=l),n[s]=o,i[s]=l;let c=a,d=0;while(c!==s)d+=n[c++],c%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-r<t)return;const h=u&&l-u;return h?Math.round(1e3*d/h):void 0}}var mt=gt;function yt(e,t){let n,i,r=0,s=1e3/t;const a=(t,s=Date.now())=>{r=s,n=null,i&&(clearTimeout(i),i=null),e.apply(null,t)},o=(...e)=>{const t=Date.now(),o=t-r;o>=s?a(e,t):(n=e,i||(i=setTimeout(()=>{i=null,a(n)},s-o)))},l=()=>n&&a(n);return[o,l]}var vt=yt;const bt=(e,t,n=3)=>{let i=0;const r=mt(50,250);return vt(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-i,l=r(o),u=s<=a;i=s;const c={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&u?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0};e(c)},n)},Tt=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},_t=e=>(...t)=>de.asap(()=>e(...t));n(2489),n(4979);var wt=He.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,He.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(He.origin),He.navigator&&/(msie|trident)/i.test(He.navigator.userAgent)):()=>!0,St=He.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const a=[e+"="+encodeURIComponent(t)];de.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),de.isString(i)&&a.push("path="+i),de.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Et(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function At(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ct(e,t,n){let i=!Et(t);return e&&(i||0==n)?At(e,t):t}const It=e=>e instanceof lt?{...e}:e;function xt(e,t){t=t||{};const n={};function i(e,t,n,i){return de.isPlainObject(e)&&de.isPlainObject(t)?de.merge.call({caseless:i},e,t):de.isPlainObject(t)?de.merge({},t):de.isArray(t)?t.slice():t}function r(e,t,n,r){return de.isUndefined(t)?de.isUndefined(e)?void 0:i(void 0,e,n,r):i(e,t,n,r)}function s(e,t){if(!de.isUndefined(t))return i(void 0,t)}function a(e,t){return de.isUndefined(t)?de.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>r(It(e),It(t),n,!0)};return de.forEach(Object.keys(Object.assign({},e,t)),function(i){const s=l[i]||r,a=s(e[i],t[i],i);de.isUndefined(a)&&s!==o||(n[i]=a)}),n}var kt=e=>{const t=xt({},e);let n,{data:i,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=lt.from(o),t.url=ke(Ct(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),de.isFormData(i))if(He.hasStandardBrowserEnv||He.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(He.hasStandardBrowserEnv&&(r&&de.isFunction(r)&&(r=r(t)),r||!1!==r&&wt(t.url))){const e=s&&a&&St.read(a);e&&o.set(s,e)}return t};const Mt="undefined"!==typeof XMLHttpRequest;var Dt=Mt&&function(e){return new Promise(function(t,n){const i=kt(e);let r=i.data;const s=lt.from(i.headers).normalize();let a,o,l,u,c,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=i;function f(){u&&u(),c&&c(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const i=lt.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),r=d&&"text"!==d&&"json"!==d?g.response:g.responseText,s={data:r,status:g.status,statusText:g.statusText,headers:i,config:e,request:g};pt(function(e){t(e),f()},function(e){n(e),f()},s),g=null}g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new ge("Request aborted",ge.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new ge("Network Error",ge.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||Re;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new ge(t,r.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,e,g)),g=null},void 0===r&&s.setContentType(null),"setRequestHeader"in g&&de.forEach(s.toJSON(),function(e,t){g.setRequestHeader(t,e)}),de.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),d&&"json"!==d&&(g.responseType=i.responseType),p&&([l,c]=bt(p,!0),g.addEventListener("progress",l)),h&&g.upload&&([o,u]=bt(h),g.upload.addEventListener("progress",o),g.upload.addEventListener("loadend",u)),(i.cancelToken||i.signal)&&(a=t=>{g&&(n(!t||t.type?new ht(null,e,g):t),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const y=ft(i.url);y&&-1===He.protocols.indexOf(y)?n(new ge("Unsupported protocol "+y+":",ge.ERR_BAD_REQUEST,e)):g.send(r||null)})};const Rt=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof ge?t:new ht(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,r(new ge(`timeout ${t} of ms exceeded`,ge.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:o}=i;return o.unsubscribe=()=>de.asap(a),o}};var Ot=Rt;const Nt=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;while(r<n)i=r+t,yield e.slice(r,i),r=i},Lt=async function*(e,t){for await(const n of Pt(e))yield*Nt(n,t)},Pt=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Ut=(e,t,n,i)=>{const r=Lt(e,t);let s,a=0,o=e=>{s||(s=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return o(),void e.close();let s=i.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel(e){return o(e),r.return()}},{highWaterMark:2})},Bt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Ft=Bt&&"function"===typeof ReadableStream,jt=Bt&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Vt=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},Ht=Ft&&Vt(()=>{let e=!1;const t=new Request(He.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),zt=65536,Gt=Ft&&Vt(()=>de.isReadableStream(new Response("").body)),qt={stream:Gt&&(e=>e.body)};Bt&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qt[t]&&(qt[t]=de.isFunction(e[t])?e=>e[t]():(e,n)=>{throw new ge(`Response type '${t}' is not supported`,ge.ERR_NOT_SUPPORT,n)})})})(new Response);const Wt=async e=>{if(null==e)return 0;if(de.isBlob(e))return e.size;if(de.isSpecCompliantForm(e)){const t=new Request(He.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return de.isArrayBufferView(e)||de.isArrayBuffer(e)?e.byteLength:(de.isURLSearchParams(e)&&(e+=""),de.isString(e)?(await jt(e)).byteLength:void 0)},Xt=async(e,t)=>{const n=de.toFiniteNumber(e.getContentLength());return null==n?Wt(t):n};var Kt=Bt&&(async e=>{let{url:t,method:n,data:i,signal:r,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=kt(e);u=u?(u+"").toLowerCase():"text";let p,f=Ot([r,s&&s.toAbortSignal()],a);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&Ht&&"get"!==n&&"head"!==n&&0!==(m=await Xt(c,i))){let e,n=new Request(t,{method:"POST",body:i,duplex:"half"});if(de.isFormData(i)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=Tt(m,bt(_t(l)));i=Ut(n.body,zt,e,t)}}de.isString(d)||(d=d?"include":"omit");const r="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:r?d:void 0});let s=await fetch(p,h);const a=Gt&&("stream"===u||"response"===u);if(Gt&&(o||a&&g)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=de.toFiniteNumber(s.headers.get("content-length")),[n,i]=o&&Tt(t,bt(_t(o),!0))||[];s=new Response(Ut(s.body,zt,n,()=>{i&&i(),g&&g()}),e)}u=u||"text";let y=await qt[de.findKey(qt,u)||"text"](s,e);return!a&&g&&g(),await new Promise((t,n)=>{pt(t,n,{data:y,headers:lt.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})})}catch(y){if(g&&g(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new ge("Network Error",ge.ERR_NETWORK,e,p),{cause:y.cause||y});throw ge.from(y,y&&y.code,e,p)}});const Yt={http:me,xhr:Dt,fetch:Kt};de.forEach(Yt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const $t=e=>`- ${e}`,Qt=e=>de.isFunction(e)||null===e||!1===e;var Zt={getAdapter:e=>{e=de.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],i=n,!Qt(n)&&(i=Yt[(t=String(n)).toLowerCase()],void 0===i))throw new ge(`Unknown adapter '${t}'`);if(i)break;r[t||"#"+s]=i}if(!i){const e=Object.entries(r).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let n=t?e.length>1?"since :\n"+e.map($t).join("\n"):" "+$t(e[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i},adapters:Yt};function Jt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ht(null,e)}function en(e){Jt(e),e.headers=lt.from(e.headers),e.data=ut.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);const t=Zt.getAdapter(e.adapter||$e.adapter);return t(e).then(function(t){return Jt(e),t.data=ut.call(e,e.transformResponse,t),t.headers=lt.from(t.headers),t},function(t){return ct(t)||(Jt(e),t&&t.response&&(t.response.data=ut.call(e,e.transformResponse,t.response),t.response.headers=lt.from(t.response.headers))),Promise.reject(t)})}const tn="1.10.0",nn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const rn={};function sn(e,t,n){if("object"!==typeof e)throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;while(r-- >0){const s=i[r],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new ge("option "+s+" must be "+n,ge.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ge("Unknown option "+s,ge.ERR_BAD_OPTION)}}nn.transitional=function(e,t,n){function i(e,t){return"[Axios v"+tn+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new ge(i(r," has been removed"+(t?" in "+t:"")),ge.ERR_DEPRECATED);return t&&!rn[r]&&(rn[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},nn.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};var an={assertOptions:sn,validators:nn};const on=an.validators;class ln{constructor(e){this.defaults=e||{},this.interceptors={request:new De,response:new De}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(i){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=xt(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&an.assertOptions(n,{silentJSONParsing:on.transitional(on.boolean),forcedJSONParsing:on.transitional(on.boolean),clarifyTimeoutError:on.transitional(on.boolean)},!1),null!=i&&(de.isFunction(i)?t.paramsSerializer={serialize:i}:an.assertOptions(i,{encode:on.function,serialize:on.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),an.assertOptions(t,{baseUrl:on.spelling("baseURL"),withXsrfToken:on.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&de.merge(r.common,r[t.method]);r&&de.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=lt.concat(s,r);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let u;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let c,d=0;if(!o){const e=[en.bind(this),void 0];e.unshift.apply(e,a),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);while(d<c)u=u.then(e[d++],e[d++]);return u}c=a.length;let h=t;d=0;while(d<c){const e=a[d++],t=a[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{u=en.call(this,h)}catch(p){return Promise.reject(p)}d=0,c=l.length;while(d<c)u=u.then(l[d++],l[d++]);return u}getUri(e){e=xt(this.defaults,e);const t=Ct(e.baseURL,e.url,e.allowAbsoluteUrls);return ke(t,e.params,e.paramsSerializer)}}de.forEach(["delete","get","head","options"],function(e){ln.prototype[e]=function(t,n){return this.request(xt(n||{},{method:e,url:t,data:(n||{}).data}))}}),de.forEach(["post","put","patch"],function(e){function t(t){return function(n,i,r){return this.request(xt(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ln.prototype[e]=t(),ln.prototype[e+"Form"]=t(!0)});var un=ln;class cn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;while(t-- >0)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const i=new Promise(e=>{n.subscribe(e),t=e}).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e(function(e,i,r){n.reason||(n.reason=new ht(e,i,r),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new cn(function(t){e=t});return{token:t,cancel:e}}}var dn=cn;function hn(e){return function(t){return e.apply(null,t)}}function pn(e){return de.isObject(e)&&!0===e.isAxiosError}const fn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fn).forEach(([e,t])=>{fn[t]=e});var gn=fn;function mn(e){const t=new un(e),n=r(un.prototype.request,t);return de.extend(n,un.prototype,t,{allOwnKeys:!0}),de.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return mn(xt(e,t))},n}const yn=mn($e);yn.Axios=un,yn.CanceledError=ht,yn.CancelToken=dn,yn.isCancel=ct,yn.VERSION=tn,yn.toFormData=Se,yn.AxiosError=ge,yn.Cancel=yn.CanceledError,yn.all=function(e){return Promise.all(e)},yn.spread=hn,yn.isAxiosError=pn,yn.mergeConfig=xt,yn.AxiosHeaders=lt,yn.formToJSON=e=>Xe(de.isHTMLForm(e)?new FormData(e):e),yn.getAdapter=Zt.getAdapter,yn.HttpStatusCode=gn,yn.default=yn;var vn=yn},4376:function(e,t,n){"use strict";var i=n(2195);e.exports=Array.isArray||function(e){return"Array"===i(e)}},4402:function(e,t,n){"use strict";var i=n(9504),r=Set.prototype;e.exports={Set:Set,add:i(r.add),has:i(r.has),remove:i(r["delete"]),proto:r}},4449:function(e,t,n){"use strict";var i=n(7080),r=n(4402).has,s=n(5170),a=n(3789),o=n(8469),l=n(507),u=n(9539);e.exports=function(e){var t=i(this),n=a(e);if(s(t)<=n.size)return!1!==o(t,function(e){if(n.includes(e))return!1},!0);var c=n.getIterator();return!1!==l(c,function(e){if(r(t,e))return u(c,"normal",!1)})}},4495:function(e,t,n){"use strict";var i=n(9519),r=n(9039),s=n(4576),a=s.String;e.exports=!!Object.getOwnPropertySymbols&&!r(function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41})},4527:function(e,t,n){"use strict";var i=n(3724),r=n(4376),s=TypeError,a=Object.getOwnPropertyDescriptor,o=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(r(e)&&!a(e,"length").writable)throw new s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4549:function(e,t,n){"use strict";var i=n(4576);e.exports=function(e,t){var n=i.Iterator,r=n&&n.prototype,s=r&&r[e],a=!1;if(s)try{s.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(o){o instanceof t||(a=!1)}if(!a)return s}},4576:function(e,t,n){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4621:function(e){var t="auto",n={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){if("string"!==typeof e)return!1;var t=n[e.toLowerCase()];return!!t&&e.toLowerCase()}function s(e){if("string"!==typeof e)return!1;var t=i[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e,n,i){this.hasBeenReset=!1;var a="",o=!1,l=e,u=n,c=i,d=null,h="",p=!0,f="auto",g="start",m="auto",y="auto",v=100,b="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(e){a=""+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var t=r(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!==typeof e&&e!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=s(e);t?(g=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(e){var t=s(e);t?(y=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(e){var t=s(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");b=t,this.hasBeenReset=!0}}}),this.displayState=void 0}a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=a},4644:function(e,t,n){"use strict";var i,r,s,a=n(7811),o=n(3724),l=n(4576),u=n(4901),c=n(34),d=n(9297),h=n(6955),p=n(6823),f=n(6699),g=n(6840),m=n(2106),y=n(1625),v=n(2787),b=n(2967),T=n(8227),_=n(3392),w=n(1181),S=w.enforce,E=w.get,A=l.Int8Array,C=A&&A.prototype,I=l.Uint8ClampedArray,x=I&&I.prototype,k=A&&v(A),M=C&&v(C),D=Object.prototype,R=l.TypeError,O=T("toStringTag"),N=_("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",P=a&&!!b&&"Opera"!==h(l.opera),U=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},j=function(e){if(!c(e))return!1;var t=h(e);return"DataView"===t||d(B,t)||d(F,t)},V=function(e){var t=v(e);if(c(t)){var n=E(t);return n&&d(n,L)?n[L]:V(t)}},H=function(e){if(!c(e))return!1;var t=h(e);return d(B,t)||d(F,t)},z=function(e){if(H(e))return e;throw new R("Target is not a typed array")},G=function(e){if(u(e)&&(!b||y(k,e)))return e;throw new R(p(e)+" is not a typed array constructor")},q=function(e,t,n,i){if(o){if(n)for(var r in B){var s=l[r];if(s&&d(s.prototype,e))try{delete s.prototype[e]}catch(a){try{s.prototype[e]=t}catch(u){}}}M[e]&&!n||g(M,e,n?t:P&&C[e]||t,i)}},W=function(e,t,n){var i,r;if(o){if(b){if(n)for(i in B)if(r=l[i],r&&d(r,e))try{delete r[e]}catch(s){}if(k[e]&&!n)return;try{return g(k,e,n?t:P&&k[e]||t)}catch(s){}}for(i in B)r=l[i],!r||r[e]&&!n||g(r,e,t)}};for(i in B)r=l[i],s=r&&r.prototype,s?S(s)[L]=r:P=!1;for(i in F)r=l[i],s=r&&r.prototype,s&&(S(s)[L]=r);if((!P||!u(k)||k===Function.prototype)&&(k=function(){throw new R("Incorrect invocation")},P))for(i in B)l[i]&&b(l[i],k);if((!P||!M||M===D)&&(M=k.prototype,P))for(i in B)l[i]&&b(l[i].prototype,M);if(P&&v(x)!==M&&b(x,M),o&&!d(M,O))for(i in U=!0,m(M,O,{configurable:!0,get:function(){return c(this)?this[N]:void 0}}),B)l[i]&&f(l[i],N,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:U&&N,aTypedArray:z,aTypedArrayConstructor:G,exportTypedArrayMethod:q,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:V,isView:j,isTypedArray:H,TypedArray:k,TypedArrayPrototype:M}},4659:function(e,t,n){"use strict";var i=n(3724),r=n(4913),s=n(6980);e.exports=function(e,t,n){i?r.f(e,t,s(0,n)):e[t]=n}},4901:function(e){"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},4913:function(e,t,n){"use strict";var i=n(3724),r=n(5917),s=n(8686),a=n(8551),o=n(6969),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=i?s?function(e,t,n){if(a(e),t=o(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var i=c(e,t);i&&i[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:d in n?n[d]:i[d],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=o(t),a(n),r)try{return u(e,t,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},4916:function(e,t,n){"use strict";var i=n(7751),r=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},s=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var n=i("Set");try{(new n)[e](r(0));try{return(new n)[e](r(-1)),!1}catch(o){if(!t)return!0;try{return(new n)[e](s(-1/0)),!1}catch(l){var a=new n;return a.add(1),a.add(2),t(a[e](s(1/0)))}}}catch(l){return!1}}},4979:function(e,t,n){"use strict";var i=n(6518),r=n(4576),s=n(7751),a=n(6980),o=n(4913).f,l=n(9297),u=n(679),c=n(3167),d=n(2603),h=n(5002),p=n(8574),f=n(3724),g=n(6395),m="DOMException",y=s("Error"),v=s(m),b=function(){u(this,T);var e=arguments.length,t=d(e<1?void 0:arguments[0]),n=d(e<2?void 0:arguments[1],"Error"),i=new v(t,n),r=new y(t);return r.name=m,o(i,"stack",a(1,p(r.stack,1))),c(i,this,b),i},T=b.prototype=v.prototype,_="stack"in new y(m),w="stack"in new v(1,2),S=v&&f&&Object.getOwnPropertyDescriptor(r,m),E=!!S&&!(S.writable&&S.configurable),A=_&&!E&&!w;i({global:!0,constructor:!0,forced:g||A},{DOMException:A?b:v});var C=s(m),I=C.prototype;if(I.constructor!==C)for(var x in g||o(I,"constructor",a(1,C)),h)if(l(h,x)){var k=h[x],M=k.s;l(C,M)||o(C,M,a(6,k.c))}},5002:function(e){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:function(e,t,n){"use strict";var i=n(6518),r=n(3650),s=n(9835),a=n(4916),o=!a("symmetricDifference")||!s("symmetricDifference");i({target:"Set",proto:!0,real:!0,forced:o},{symmetricDifference:r})},5031:function(e,t,n){"use strict";var i=n(7751),r=n(9504),s=n(8480),a=n(3717),o=n(8551),l=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(o(e)),n=a.f;return n?l(t,n(e)):t}},5130:function(e,t,n){"use strict";n.d(t,{D$:function(){return Se},Ef:function(){return ke},Jo:function(){return fe},aG:function(){return U},eB:function(){return b},jR:function(){return Ae},lH:function(){return ge},u1:function(){return ye}});n(4114),n(8111),n(2489),n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(6768),r=n(4232);n(144);
/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let s;const a="undefined"!==typeof window&&window.trustedTypes;if(a)try{s=a.createPolicy("vue",{createHTML:e=>e})}catch(Re){}const o=s?e=>s.createHTML(e):e=>e,l="http://www.w3.org/2000/svg",u="http://www.w3.org/1998/Math/MathML",c="undefined"!==typeof document?document:null,d=c&&c.createElement("template"),h={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r="svg"===t?c.createElementNS(l,e):"mathml"===t?c.createElementNS(u,e):n?c.createElement(e,{is:n}):c.createElement(e);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>c.createTextNode(e),createComment:e=>c.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>c.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const a=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),n),r===s||!(r=r.nextSibling))break}else{d.innerHTML=o("svg"===i?`<svg>${e}</svg>`:"mathml"===i?`<math>${e}</math>`:e);const r=d.content;if("svg"===i||"mathml"===i){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},p="transition",f="animation",g=Symbol("_vtc"),m={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},y=(0,r.X$)({},i.QP,m),v=e=>(e.displayName="Transition",e.props=y,e),b=v((e,{slots:t})=>(0,i.h)(i.pR,w(e),t)),T=(e,t=[])=>{(0,r.cy)(e)?e.forEach(e=>e(...t)):e&&e(...t)},_=e=>!!e&&((0,r.cy)(e)?e.some(e=>e.length>1):e.length>1);function w(e){const t={};for(const r in e)r in m||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:s,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:u=a,appearActiveClass:c=o,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,g=S(s),y=g&&g[0],v=g&&g[1],{onBeforeEnter:b,onEnter:w,onEnterCancelled:E,onLeave:x,onLeaveCancelled:M,onBeforeAppear:D=b,onAppear:R=w,onAppearCancelled:N=E}=t,L=(e,t,n,i)=>{e._enterCancelled=i,C(e,t?d:l),C(e,t?c:o),n&&n()},P=(e,t)=>{e._isLeaving=!1,C(e,h),C(e,f),C(e,p),t&&t()},U=e=>(t,n)=>{const r=e?R:w,s=()=>L(t,e,n);T(r,[t,s]),I(()=>{C(t,e?u:a),A(t,e?d:l),_(r)||k(t,i,y,s)})};return(0,r.X$)(t,{onBeforeEnter(e){T(b,[e]),A(e,a),A(e,o)},onBeforeAppear(e){T(D,[e]),A(e,u),A(e,c)},onEnter:U(!1),onAppear:U(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>P(e,t);A(e,h),e._enterCancelled?(A(e,p),O()):(O(),A(e,p)),I(()=>{e._isLeaving&&(C(e,h),A(e,f),_(x)||k(e,i,v,n))}),T(x,[e,n])},onEnterCancelled(e){L(e,!1,void 0,!0),T(E,[e])},onAppearCancelled(e){L(e,!0,void 0,!0),T(N,[e])},onLeaveCancelled(e){P(e),T(M,[e])}})}function S(e){if(null==e)return null;if((0,r.Gv)(e))return[E(e.enter),E(e.leave)];{const t=E(e);return[t,t]}}function E(e){const t=(0,r.Ro)(e);return t}function A(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[g]||(e[g]=new Set)).add(t)}function C(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const n=e[g];n&&(n.delete(t),n.size||(e[g]=void 0))}function I(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let x=0;function k(e,t,n,i){const r=e._endId=++x,s=()=>{r===e._endId&&i()};if(null!=n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=M(e,t);if(!a)return i();const u=a+"end";let c=0;const d=()=>{e.removeEventListener(u,h),s()},h=t=>{t.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),e.addEventListener(u,h)}function M(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${p}Delay`),s=i(`${p}Duration`),a=D(r,s),o=i(`${f}Delay`),l=i(`${f}Duration`),u=D(o,l);let c=null,d=0,h=0;t===p?a>0&&(c=p,d=a,h=s.length):t===f?u>0&&(c=f,d=u,h=l.length):(d=Math.max(a,u),c=d>0?a>u?p:f:null,h=c?c===p?s.length:l.length:0);const g=c===p&&/\b(transform|all)(,|$)/.test(i(`${p}Property`).toString());return{type:c,timeout:d,propCount:h,hasTransform:g}}function D(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,n)=>R(t)+R(e[n])))}function R(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function O(){return document.body.offsetHeight}function N(e,t,n){const i=e[g];i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const L=Symbol("_vod"),P=Symbol("_vsh"),U={beforeMount(e,{value:t},{transition:n}){e[L]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):B(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!==!n&&(i?t?(i.beforeEnter(e),B(e,!0),i.enter(e)):i.leave(e,()=>{B(e,!1)}):B(e,t))},beforeUnmount(e,{value:t}){B(e,t)}};function B(e,t){e.style.display=t?e[L]:"none",e[P]=!t}const F=Symbol("");const j=/(^|;)\s*display\s*:/;function V(e,t,n){const i=e.style,s=(0,r.Kg)(n);let a=!1;if(n&&!s){if(t)if((0,r.Kg)(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&z(i,t,"")}else for(const e in t)null==n[e]&&z(i,e,"");for(const e in n)"display"===e&&(a=!0),z(i,e,n[e])}else if(s){if(t!==n){const e=i[F];e&&(n+=";"+e),i.cssText=n,a=j.test(n)}}else t&&e.removeAttribute("style");L in e&&(e[L]=a?i.display:"",e[P]&&(i.display="none"))}const H=/\s*!important$/;function z(e,t,n){if((0,r.cy)(n))n.forEach(n=>z(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=W(e,t);H.test(n)?e.setProperty((0,r.Tg)(i),n.replace(H,""),"important"):e[i]=n}}const G=["Webkit","Moz","ms"],q={};function W(e,t){const n=q[t];if(n)return n;let i=(0,r.PT)(t);if("filter"!==i&&i in e)return q[t]=i;i=(0,r.ZH)(i);for(let r=0;r<G.length;r++){const n=G[r]+i;if(n in e)return q[t]=n}return t}const X="http://www.w3.org/1999/xlink";function K(e,t,n,i,s,a=(0,r.J$)(t)){i&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(X,t.slice(6,t.length)):e.setAttributeNS(X,t,n):null==n||a&&!(0,r.Y2)(n)?e.removeAttribute(t):e.setAttribute(t,a?"":(0,r.Bm)(n)?String(n):n)}function Y(e,t,n,i,s){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?o(n):n));const a=e.tagName;if("value"===t&&"PROGRESS"!==a&&!a.includes("-")){const i="OPTION"===a?e.getAttribute("value")||"":e.value,r=null==n?"checkbox"===e.type?"on":"":String(n);return i===r&&"_value"in e||(e.value=r),null==n&&e.removeAttribute(t),void(e._value=n)}let l=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=(0,r.Y2)(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{e[t]=n}catch(Re){0}l&&e.removeAttribute(s||t)}function $(e,t,n,i){e.addEventListener(t,n,i)}function Q(e,t,n,i){e.removeEventListener(t,n,i)}const Z=Symbol("_vei");function J(e,t,n,i,r=null){const s=e[Z]||(e[Z]={}),a=s[t];if(i&&a)a.value=i;else{const[n,o]=te(t);if(i){const a=s[t]=se(i,r);$(e,n,a,o)}else a&&(Q(e,n,a,o),s[t]=void 0)}}const ee=/(?:Once|Passive|Capture)$/;function te(e){let t;if(ee.test(e)){let n;t={};while(n=e.match(ee))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,r.Tg)(e.slice(2));return[n,t]}let ne=0;const ie=Promise.resolve(),re=()=>ne||(ie.then(()=>ne=0),ne=Date.now());function se(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,i.qL)(ae(e,n.value),t,5,[e])};return n.value=e,n.attached=re(),n}function ae(e,t){if((0,r.cy)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}const oe=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,le=(e,t,n,i,s,a)=>{const o="svg"===s;"class"===t?N(e,i,o):"style"===t?V(e,n,i):(0,r.Mp)(t)?(0,r.CP)(t)||J(e,t,n,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):ue(e,t,i,o))?(Y(e,t,i),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||K(e,t,i,o,a,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&(0,r.Kg)(i)?("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),K(e,t,i,o)):Y(e,(0,r.PT)(t),i,a,t)};function ue(e,t,n,i){if(i)return"innerHTML"===t||"textContent"===t||!!(t in e&&oe(t)&&(0,r.Tn)(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!oe(t)||!(0,r.Kg)(n))&&t in e}
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;Symbol("_moveCb"),Symbol("_enterCb");const ce=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.cy)(t)?e=>(0,r.DY)(t,e):t};function de(e){e.target.composing=!0}function he(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pe=Symbol("_assign"),fe={created(e,{modifiers:{lazy:t,trim:n,number:i}},s){e[pe]=ce(s);const a=i||s.props&&"number"===s.props.type;$(e,t?"change":"input",t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),a&&(i=(0,r.bB)(i)),e[pe](i)}),n&&$(e,"change",()=>{e.value=e.value.trim()}),t||($(e,"compositionstart",de),$(e,"compositionend",he),$(e,"change",he))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:s,number:a}},o){if(e[pe]=ce(o),e.composing)return;const l=!a&&"number"!==e.type||/^0\d/.test(e.value)?e.value:(0,r.bB)(e.value),u=null==t?"":t;if(l!==u){if(document.activeElement===e&&"range"!==e.type){if(i&&t===n)return;if(s&&e.value.trim()===u)return}e.value=u}}},ge={deep:!0,created(e,t,n){e[pe]=ce(n),$(e,"change",()=>{const t=e._modelValue,n=be(e),i=e.checked,s=e[pe];if((0,r.cy)(t)){const e=(0,r.u3)(t,n),a=-1!==e;if(i&&!a)s(t.concat(n));else if(!i&&a){const n=[...t];n.splice(e,1),s(n)}}else if((0,r.vM)(t)){const e=new Set(t);i?e.add(n):e.delete(n),s(e)}else s(Te(e,i))})},mounted:me,beforeUpdate(e,t,n){e[pe]=ce(n),me(e,t,n)}};function me(e,{value:t,oldValue:n},i){let s;if(e._modelValue=t,(0,r.cy)(t))s=(0,r.u3)(t,i.props.value)>-1;else if((0,r.vM)(t))s=t.has(i.props.value);else{if(t===n)return;s=(0,r.BX)(t,Te(e,!0))}e.checked!==s&&(e.checked=s)}const ye={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const a=(0,r.vM)(t);$(e,"change",()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?(0,r.bB)(be(e)):be(e));e[pe](e.multiple?a?new Set(t):t:t[0]),e._assigning=!0,(0,i.dY)(()=>{e._assigning=!1})}),e[pe]=ce(s)},mounted(e,{value:t}){ve(e,t)},beforeUpdate(e,t,n){e[pe]=ce(n)},updated(e,{value:t}){e._assigning||ve(e,t)}};function ve(e,t){const n=e.multiple,i=(0,r.cy)(t);if(!n||i||(0,r.vM)(t)){for(let s=0,a=e.options.length;s<a;s++){const a=e.options[s],o=be(a);if(n)if(i){const e=typeof o;a.selected="string"===e||"number"===e?t.some(e=>String(e)===String(o)):(0,r.u3)(t,o)>-1}else a.selected=t.has(o);else if((0,r.BX)(be(a),t))return void(e.selectedIndex!==s&&(e.selectedIndex=s))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function be(e){return"_value"in e?e._value:e.value}function Te(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const _e=["ctrl","shift","alt","meta"],we={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>_e.some(n=>e[`${n}Key`]&&!t.includes(n))},Se=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(n,...i)=>{for(let e=0;e<t.length;e++){const i=we[t[e]];if(i&&i(n,t))return}return e(n,...i)})},Ee={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ae=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=n=>{if(!("key"in n))return;const i=(0,r.Tg)(n.key);return t.some(e=>e===i||Ee[e]===i)?e(n):void 0})},Ce=(0,r.X$)({patchProp:le},h);let Ie;function xe(){return Ie||(Ie=(0,i.K9)(Ce))}const ke=(...e)=>{const t=xe().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=De(e);if(!i)return;const s=t._component;(0,r.Tn)(s)||s.render||s.template||(s.template=i.innerHTML),1===i.nodeType&&(i.textContent="");const a=n(i,!1,Me(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function Me(e){return e instanceof SVGElement?"svg":"function"===typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function De(e){if((0,r.Kg)(e)){const t=document.querySelector(e);return t}return e}},5157:function(e,t,n){n(4114);var i=n(8653).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+r.source+s.source+"*(?::"+r.source+s.source+"*)?$"),o=0,l=1,u=2,c=3,d=4,h=5,p=6,f=7;function g(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,g)}function m(){}function y(e,t,n,r,s){function a(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function o(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?a(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function l(t){if(t>y){var n=e.substring(y,t).replace(/&#?\w+;/g,o);p&&u(y),r.characters(n,0,t-y),y=t}}function u(t,n){while(t>=d&&(n=h.exec(e)))c=n.index,d=c+n[0].length,p.lineNumber++;p.columnNumber=t-c+1}var c=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,p=r.locator,f=[{currentNSMap:t}],m={},y=0;while(1){try{var S=e.indexOf("<",y);if(S<0){if(!e.substr(y).match(/^\s*$/)){var I=r.doc,x=I.createTextNode(e.substr(y));I.appendChild(x),r.currentElement=x}return}switch(S>y&&l(S),e.charAt(S+1)){case"/":var k=e.indexOf(">",S+3),M=e.substring(S+2,k).replace(/[ \t\n\r]+$/g,""),D=f.pop();k<0?(M=e.substring(S+2).replace(/[\s<].*/,""),s.error("end tag name: "+M+" is not complete:"+D.tagName),k=S+1+M.length):M.match(/\s</)&&(M=M.replace(/[\s<].*/,""),s.error("end tag name: "+M+" maybe not complete"),k=S+1+M.length);var R=D.localNSMap,O=D.tagName==M,N=O||D.tagName&&D.tagName.toLowerCase()==M.toLowerCase();if(N){if(r.endElement(D.uri,D.localName,M),R)for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&r.endPrefixMapping(L);O||s.fatalError("end tag name: "+M+" is not match the current start tagName:"+D.tagName)}else f.push(D);k++;break;case"?":p&&u(S),k=A(e,S,r);break;case"!":p&&u(S),k=E(e,S,r,s);break;default:p&&u(S);var P=new C,U=f[f.length-1].currentNSMap,B=(k=b(e,S,P,U,o,s),P.length);if(!P.closed&&w(e,k,P.tagName,m)&&(P.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),p&&B){for(var F=v(p,{}),j=0;j<B;j++){var V=P[j];u(V.offset),V.locator=v(p,{})}r.locator=F,T(P,r,U)&&f.push(P),r.locator=p}else T(P,r,U)&&f.push(P);i.isHTML(P.uri)&&!P.closed?k=_(e,k,P.tagName,o,r):k++}}catch(H){if(H instanceof g)throw H;s.error("element parse error: "+H),k=-1}k>y?y=k:l(Math.max(S,y)+1)}}function v(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function b(e,t,n,r,s,a){function g(e,t,i){n.attributeNames.hasOwnProperty(e)&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),i)}var m,y=++t,v=o;while(1){var b=e.charAt(y);switch(b){case"=":if(v===l)m=e.slice(t,y),v=c;else{if(v!==u)throw new Error("attribute equal must after attrName");v=c}break;case"'":case'"':if(v===c||v===l){if(v===l&&(a.warning('attribute value must after "="'),m=e.slice(t,y)),t=y+1,y=e.indexOf(b,t),!(y>0))throw new Error("attribute value no end '"+b+"' match");T=e.slice(t,y),g(m,T,t-1),v=h}else{if(v!=d)throw new Error('attribute value must after "="');T=e.slice(t,y),g(m,T,t),a.warning('attribute "'+m+'" missed start quot('+b+")!!"),t=y+1,v=h}break;case"/":switch(v){case o:n.setTagName(e.slice(t,y));case h:case p:case f:v=f,n.closed=!0;case d:case l:break;case u:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),v==o&&n.setTagName(e.slice(t,y)),y;case">":switch(v){case o:n.setTagName(e.slice(t,y));case h:case p:case f:break;case d:case l:T=e.slice(t,y),"/"===T.slice(-1)&&(n.closed=!0,T=T.slice(0,-1));case u:v===u&&(T=m),v==d?(a.warning('attribute "'+T+'" missed quot(")!'),g(m,T,t)):(i.isHTML(r[""])&&T.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+T+'" missed value!! "'+T+'" instead!!'),g(T,T,t));break;case c:throw new Error("attribute value missed!!")}return y;case"":b=" ";default:if(b<=" ")switch(v){case o:n.setTagName(e.slice(t,y)),v=p;break;case l:m=e.slice(t,y),v=u;break;case d:var T=e.slice(t,y);a.warning('attribute "'+T+'" missed quot(")!!'),g(m,T,t);case h:v=p;break}else switch(v){case u:n.tagName;i.isHTML(r[""])&&m.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+m+'" missed value!! "'+m+'" instead2!!'),g(m,m,t),t=y,v=l;break;case h:a.warning('attribute space is required"'+m+'"!!');case p:v=l,t=y;break;case c:v=d,t=y;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}y++}}function T(e,t,n){var r=e.tagName,s=null,a=e.length;while(a--){var o=e[a],l=o.qName,u=o.value,c=l.indexOf(":");if(c>0)var d=o.prefix=l.slice(0,c),h=l.slice(c+1),p="xmlns"===d&&h;else h=l,d=null,p="xmlns"===l&&"";o.localName=h,!1!==p&&(null==s&&(s={},S(n,n={})),n[p]=s[p]=u,o.uri=i.XMLNS,t.startPrefixMapping(p,u))}a=e.length;while(a--){o=e[a];d=o.prefix;d&&("xml"===d&&(o.uri=i.XML),"xmlns"!==d&&(o.uri=n[d||""]))}c=r.indexOf(":");c>0?(d=e.prefix=r.slice(0,c),h=e.localName=r.slice(c+1)):(d=null,h=e.localName=r);var f=e.uri=n[d||""];if(t.startElement(f,h,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(f,h,r),s)for(d in s)Object.prototype.hasOwnProperty.call(s,d)&&t.endPrefixMapping(d)}function _(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var s=e.indexOf("</"+n+">",t),a=e.substring(t+1,s);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return t+1}function w(e,t,n,i){var r=i[n];return null==r&&(r=e.lastIndexOf("</"+n+">"),r<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function S(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function E(e,t,n,i){var r=e.charAt(t+2);switch(r){case"-":if("-"===e.charAt(t+3)){var s=e.indexOf("--\x3e",t+4);return s>t?(n.comment(e,t+4,s-t-4),s+3):(i.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){s=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,s-t-9),n.endCDATA(),s+3}var a=I(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var d=a[o-1];return n.startDTD(l,u,c),n.endDTD(),d.index+d[0].length}}return-1}function A(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function C(){this.attributeNames={}}function I(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);while(n=r.exec(e))if(i.push(n),n[1])return i}g.prototype=new Error,g.prototype.name=g.name,m.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),S(t,t={}),y(e,t,n,i,this.errorHandler),i.endDocument()}},C.prototype={setTagName:function(e){if(!a.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!a.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=m,t.ParseError=g},5170:function(e,t,n){"use strict";var i=n(6706),r=n(4402);e.exports=i(r.proto,"size","get")||function(e){return e.size}},5397:function(e,t,n){"use strict";var i=n(7055),r=n(7750);e.exports=function(e){return i(r(e))}},5610:function(e,t,n){"use strict";var i=n(1291),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},5745:function(e,t,n){"use strict";var i=n(7629);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},5749:function(e){var t=Math.pow(2,32),n=function(e){var n,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(n=i.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):i.getUint32(0)*t+i.getUint32(4)};e.exports={getUint64:n,MAX_UINT32:t}},5854:function(e,t,n){"use strict";var i=n(2777),r=TypeError;e.exports=function(e){var t=i(e,"number");if("number"==typeof t)throw new r("Can't convert number to bigint");return BigInt(t)}},5876:function(e,t,n){"use strict";var i=n(6518),r=n(3838),s=n(4916),a=!s("isSubsetOf",function(e){return e});i({target:"Set",proto:!0,real:!0,forced:a},{isSubsetOf:r})},5917:function(e,t,n){"use strict";var i=n(3724),r=n(9039),s=n(4055);e.exports=!i&&!r(function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},5966:function(e,t,n){"use strict";var i=n(9306),r=n(4117);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},6080:function(e,t,n){"use strict";var i=n(7476),r=n(9306),s=n(616),a=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:s?a(e,t):function(){return e.apply(t,arguments)}}},6119:function(e,t,n){"use strict";var i=n(5745),r=n(3392),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},6193:function(e,t,n){"use strict";var i=n(4215);e.exports="NODE"===i},6198:function(e,t,n){"use strict";var i=n(8014);e.exports=function(e){return i(e.length)}},6269:function(e){"use strict";e.exports={}},6279:function(e,t,n){"use strict";var i=n(6840);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},6319:function(e,t,n){"use strict";var i=n(8551),r=n(9539);e.exports=function(e,t,n,s){try{return s?t(i(n)[0],n[1]):t(n)}catch(a){r(e,"throw",a)}}},6368:function(e,t,n){"use strict";var i=n(6518),r=n(4576),s=n(9225).clear;i({global:!0,bind:!0,enumerable:!0,forced:r.clearImmediate!==s},{clearImmediate:s})},6395:function(e){"use strict";e.exports=!1},6518:function(e,t,n){"use strict";var i=n(4576),r=n(7347).f,s=n(6699),a=n(6840),o=n(9433),l=n(7740),u=n(2796);e.exports=function(e,t){var n,c,d,h,p,f,g=e.target,m=e.global,y=e.stat;if(c=m?i:y?i[g]||o(g,{}):i[g]&&i[g].prototype,c)for(d in t){if(p=t[d],e.dontCallGetSet?(f=r(c,d),h=f&&f.value):h=c[d],n=u(m?d:g+(y?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;l(p,h)}(e.sham||h&&h.sham)&&s(p,"sham",!0),a(c,d,p,e)}}},6699:function(e,t,n){"use strict";var i=n(3724),r=n(4913),s=n(6980);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},6706:function(e,t,n){"use strict";var i=n(9504),r=n(9306);e.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(s){}}},6768:function(e,t,n){"use strict";n.d(t,{$u:function(){return de},CE:function(){return nn},Df:function(){return X},EW:function(){return Gn},FK:function(){return qt},Fv:function(){return gn},Gt:function(){return $e},Gy:function(){return L},K9:function(){return vt},Lk:function(){return un},MZ:function(){return W},OW:function(){return z},Q3:function(){return mn},QP:function(){return U},WQ:function(){return Qe},Wv:function(){return rn},bF:function(){return cn},bo:function(){return k},dY:function(){return m},eW:function(){return fn},g2:function(){return Te},gN:function(){return we},h:function(){return qn},hi:function(){return pe},k6:function(){return x},nI:function(){return Cn},pI:function(){return Ae},pM:function(){return K},pR:function(){return V},qL:function(){return a},sV:function(){return ue},uX:function(){return Qt},v6:function(){return Tn},wB:function(){return kt}});n(4114),n(8111),n(1148),n(2489),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var i=n(144),r=n(4232);function s(e,t,n,i){try{return i?e(...i):e()}catch(r){o(r,t,n)}}function a(e,t,n,i){if((0,r.Tn)(e)){const a=s(e,t,n,i);return a&&(0,r.yL)(a)&&a.catch(e=>{o(e,t,n)}),a}if((0,r.cy)(e)){const r=[];for(let s=0;s<e.length;s++)r.push(a(e[s],t,n,i));return r}}function o(e,t,n,a=!0){const o=t?t.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||r.MZ;if(t){let r=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,a,o))return;r=r.parent}if(u)return(0,i.C4)(),s(u,null,10,[e,a,o]),void(0,i.bl)()}l(e,n,o,a,c)}function l(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const u=[];let c=-1;const d=[];let h=null,p=0;const f=Promise.resolve();let g=null;function m(e){const t=g||f;return e?t.then(this?e.bind(this):e):t}function y(e){let t=c+1,n=u.length;while(t<n){const i=t+n>>>1,r=u[i],s=S(r);s<e||s===e&&2&r.flags?t=i+1:n=i}return t}function v(e){if(!(1&e.flags)){const t=S(e),n=u[u.length-1];!n||!(2&e.flags)&&t>=S(n)?u.push(e):u.splice(y(t),0,e),e.flags|=1,b()}}function b(){g||(g=f.then(E))}function T(e){(0,r.cy)(e)?d.push(...e):h&&-1===e.id?h.splice(p+1,0,e):1&e.flags||(d.push(e),e.flags|=1),b()}function _(e,t,n=c+1){for(0;n<u.length;n++){const t=u[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;0,u.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function w(e){if(d.length){const e=[...new Set(d)].sort((e,t)=>S(e)-S(t));if(d.length=0,h)return void h.push(...e);for(h=e,p=0;p<h.length;p++){const e=h[p];0,4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}h=null,p=0}}const S=e=>null==e.id?2&e.flags?-1:1/0:e.id;function E(e){r.tE;try{for(c=0;c<u.length;c++){const e=u[c];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),s(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;c<u.length;c++){const e=u[c];e&&(e.flags&=-2)}c=-1,u.length=0,w(e),g=null,(u.length||d.length)&&E(e)}}let A=null,C=null;function I(e){const t=A;return A=e,C=e&&e.type.__scopeId||null,t}function x(e,t=A,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&en(-1);const r=I(t);let s;try{s=e(...n)}finally{I(r),i._d&&en(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function k(e,t){if(null===A)return e;const n=Vn(A),s=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[e,o,l,u=r.MZ]=t[a];e&&((0,r.Tn)(e)&&(e={mounted:e,updated:e}),e.deep&&(0,i.hV)(o),s.push({dir:e,instance:n,value:o,oldValue:void 0,arg:l,modifiers:u}))}return e}function M(e,t,n,r){const s=e.dirs,o=t&&t.dirs;for(let l=0;l<s.length;l++){const u=s[l];o&&(u.oldValue=o[l].value);let c=u.dir[r];c&&((0,i.C4)(),a(c,n,8,[e.el,u,e,t]),(0,i.bl)())}}const D=Symbol("_vte"),R=e=>e.__isTeleport;const O=Symbol("_leaveCb"),N=Symbol("_enterCb");function L(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ue(()=>{e.isMounted=!0}),he(()=>{e.isUnmounting=!0}),e}const P=[Function,Array],U={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:P,onEnter:P,onAfterEnter:P,onEnterCancelled:P,onBeforeLeave:P,onLeave:P,onAfterLeave:P,onLeaveCancelled:P,onBeforeAppear:P,onAppear:P,onAfterAppear:P,onAppearCancelled:P},B=e=>{const t=e.subTree;return t.component?B(t.component):t},F={name:"BaseTransition",props:U,setup(e,{slots:t}){const n=Cn(),r=L();return()=>{const s=t.default&&X(t.default(),!0);if(!s||!s.length)return;const a=j(s),o=(0,i.ux)(e),{mode:l}=o;if(r.isLeaving)return G(a);const u=q(a);if(!u)return G(a);let c=z(u,o,r,n,e=>c=e);u.type!==Xt&&W(u,c);let d=n.subTree&&q(n.subTree);if(d&&d.type!==Xt&&!an(u,d)&&B(n).type!==Xt){let e=z(d,o,r,n);if(W(d,e),"out-in"===l&&u.type!==Xt)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,8&n.job.flags||n.update(),delete e.afterLeave,d=void 0},G(a);"in-out"===l&&u.type!==Xt?e.delayLeave=(e,t,n)=>{const i=H(r,d);i[String(d.key)]=d,e[O]=()=>{t(),e[O]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{n(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return a}}};function j(e){let t=e[0];if(e.length>1){let n=!1;for(const i of e)if(i.type!==Xt){0,t=i,n=!0;break}}return t}const V=F;function H(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function z(e,t,n,i,s){const{appear:o,mode:l,persisted:u=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:f,onLeave:g,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:v,onAppear:b,onAfterAppear:T,onAppearCancelled:_}=t,w=String(e.key),S=H(n,e),E=(e,t)=>{e&&a(e,i,9,t)},A=(e,t)=>{const n=t[1];E(e,t),(0,r.cy)(e)?e.every(e=>e.length<=1)&&n():e.length<=1&&n()},C={mode:l,persisted:u,beforeEnter(t){let i=c;if(!n.isMounted){if(!o)return;i=v||c}t[O]&&t[O](!0);const r=S[w];r&&an(e,r)&&r.el[O]&&r.el[O](),E(i,[t])},enter(e){let t=d,i=h,r=p;if(!n.isMounted){if(!o)return;t=b||d,i=T||h,r=_||p}let s=!1;const a=e[N]=t=>{s||(s=!0,E(t?r:i,[e]),C.delayedLeave&&C.delayedLeave(),e[N]=void 0)};t?A(t,[e,a]):a()},leave(t,i){const r=String(e.key);if(t[N]&&t[N](!0),n.isUnmounting)return i();E(f,[t]);let s=!1;const a=t[O]=n=>{s||(s=!0,i(),E(n?y:m,[t]),t[O]=void 0,S[r]===e&&delete S[r])};S[r]=e,g?A(g,[t,a]):a()},clone(e){const r=z(e,t,n,i,s);return s&&s(r),r}};return C}function G(e){if(Z(e))return e=pn(e),e.children=null,e}function q(e){if(!Z(e))return R(e.type)&&e.children?j(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&(0,r.Tn)(n.default))return n.default()}}function W(e,t){6&e.shapeFlag&&e.component?(e.transition=t,W(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function X(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let a=e[s];const o=null==n?a.key:String(n)+String(null!=a.key?a.key:s);a.type===qt?(128&a.patchFlag&&r++,i=i.concat(X(a.children,t,o))):(t||a.type!==Xt)&&i.push(null!=o?pn(a,{key:o}):a)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}
/*! #__NO_SIDE_EFFECTS__ */function K(e,t){return(0,r.Tn)(e)?(()=>(0,r.X$)({name:e.name},t,{setup:e}))():e}function Y(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function $(e,t,n,a,o=!1){if((0,r.cy)(e))return void e.forEach((e,i)=>$(e,t&&((0,r.cy)(t)?t[i]:t),n,a,o));if(Q(a)&&!o)return void(512&a.shapeFlag&&a.type.__asyncResolved&&a.component.subTree.component&&$(e,t,n,a.component.subTree));const l=4&a.shapeFlag?Vn(a.component):a.el,u=o?null:l,{i:c,r:d}=e;const h=t&&t.r,p=c.refs===r.MZ?c.refs={}:c.refs,f=c.setupState,g=(0,i.ux)(f),m=f===r.MZ?()=>!1:e=>(0,r.$3)(g,e);if(null!=h&&h!==d&&((0,r.Kg)(h)?(p[h]=null,m(h)&&(f[h]=null)):(0,i.i9)(h)&&(h.value=null)),(0,r.Tn)(d))s(d,c,12,[u,p]);else{const t=(0,r.Kg)(d),s=(0,i.i9)(d);if(t||s){const i=()=>{if(e.f){const n=t?m(d)?f[d]:p[d]:d.value;o?(0,r.cy)(n)&&(0,r.TF)(n,l):(0,r.cy)(n)?n.includes(l)||n.push(l):t?(p[d]=[l],m(d)&&(f[d]=p[d])):(d.value=[l],e.k&&(p[e.k]=d.value))}else t?(p[d]=u,m(d)&&(f[d]=u)):s&&(d.value=u,e.k&&(p[e.k]=u))};u?(i.id=-1,yt(i,n)):i()}else 0}}(0,r.We)().requestIdleCallback,(0,r.We)().cancelIdleCallback;const Q=e=>!!e.type.__asyncLoader;
/*! #__NO_SIDE_EFFECTS__ */const Z=e=>e.type.__isKeepAlive;RegExp,RegExp;function J(e,t){return(0,r.cy)(e)?e.some(e=>J(e,t)):(0,r.Kg)(e)?e.split(",").includes(t):!!(0,r.gd)(e)&&(e.lastIndex=0,e.test(t))}function ee(e,t){ne(e,"a",t)}function te(e,t){ne(e,"da",t)}function ne(e,t,n=An){const i=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(ae(t,i,n),n){let e=n.parent;while(e&&e.parent)Z(e.parent.vnode)&&ie(i,t,n,e),e=e.parent}}function ie(e,t,n,i){const s=ae(t,e,i,!0);pe(()=>{(0,r.TF)(i[t],s)},n)}function re(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function se(e){return 128&e.shapeFlag?e.ssContent:e}function ae(e,t,n=An,r=!1){if(n){const s=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{(0,i.C4)();const s=kn(n),o=a(t,n,e,r);return s(),(0,i.bl)(),o});return r?s.unshift(o):s.push(o),o}}const oe=e=>(t,n=An)=>{Nn&&"sp"!==e||ae(e,(...e)=>t(...e),n)},le=oe("bm"),ue=oe("m"),ce=oe("bu"),de=oe("u"),he=oe("bum"),pe=oe("um"),fe=oe("sp"),ge=oe("rtg"),me=oe("rtc");function ye(e,t=An){ae("ec",e,t)}const ve="components",be="directives";function Te(e,t){return Se(ve,e,!0,t)||e}const _e=Symbol.for("v-ndc");function we(e){return Se(be,e)}function Se(e,t,n=!0,i=!1){const s=A||An;if(s){const n=s.type;if(e===ve){const e=Hn(n,!1);if(e&&(e===t||e===(0,r.PT)(t)||e===(0,r.ZH)((0,r.PT)(t))))return n}const a=Ee(s[e]||n[e],t)||Ee(s.appContext[e],t);return!a&&i?n:a}}function Ee(e,t){return e&&(e[t]||e[(0,r.PT)(t)]||e[(0,r.ZH)((0,r.PT)(t))])}function Ae(e,t,n,s){let a;const o=n&&n[s],l=(0,r.cy)(e);if(l||(0,r.Kg)(e)){const n=l&&(0,i.g8)(e);let r=!1,s=!1;n&&(r=!(0,i.fE)(e),s=(0,i.Tm)(e),e=(0,i.qA)(e)),a=new Array(e.length);for(let l=0,u=e.length;l<u;l++)a[l]=t(r?s?(0,i.a1)((0,i.lJ)(e[l])):(0,i.lJ)(e[l]):e[l],l,void 0,o&&o[l])}else if("number"===typeof e){0,a=new Array(e);for(let n=0;n<e;n++)a[n]=t(n+1,n,void 0,o&&o[n])}else if((0,r.Gv)(e))if(e[Symbol.iterator])a=Array.from(e,(e,n)=>t(e,n,void 0,o&&o[n]));else{const n=Object.keys(e);a=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];a[i]=t(e[r],r,i,o&&o[i])}}else a=[];return n&&(n[s]=a),a}const Ce=e=>e?Dn(e)?Vn(e):Ce(e.parent):null,Ie=(0,r.X$)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ce(e.parent),$root:e=>Ce(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Pe(e),$forceUpdate:e=>e.f||(e.f=()=>{v(e.update)}),$nextTick:e=>e.n||(e.n=m.bind(e.proxy)),$watch:e=>Dt.bind(e)}),xe=(e,t)=>e!==r.MZ&&!e.__isScriptSetup&&(0,r.$3)(e,t),ke={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:s,data:a,props:o,accessCache:l,type:u,appContext:c}=e;let d;if("$"!==t[0]){const i=l[t];if(void 0!==i)switch(i){case 1:return s[t];case 2:return a[t];case 4:return n[t];case 3:return o[t]}else{if(xe(s,t))return l[t]=1,s[t];if(a!==r.MZ&&(0,r.$3)(a,t))return l[t]=2,a[t];if((d=e.propsOptions[0])&&(0,r.$3)(d,t))return l[t]=3,o[t];if(n!==r.MZ&&(0,r.$3)(n,t))return l[t]=4,n[t];De&&(l[t]=0)}}const h=Ie[t];let p,f;return h?("$attrs"===t&&(0,i.u4)(e.attrs,"get",""),h(e)):(p=u.__cssModules)&&(p=p[t])?p:n!==r.MZ&&(0,r.$3)(n,t)?(l[t]=4,n[t]):(f=c.config.globalProperties,(0,r.$3)(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:s,ctx:a}=e;return xe(s,t)?(s[t]=n,!0):i!==r.MZ&&(0,r.$3)(i,t)?(i[t]=n,!0):!(0,r.$3)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:a}},o){let l;return!!n[o]||e!==r.MZ&&(0,r.$3)(e,o)||xe(t,o)||(l=a[0])&&(0,r.$3)(l,o)||(0,r.$3)(i,o)||(0,r.$3)(Ie,o)||(0,r.$3)(s.config.globalProperties,o)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,r.$3)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Me(e){return(0,r.cy)(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let De=!0;function Re(e){const t=Pe(e),n=e.proxy,s=e.ctx;De=!1,t.beforeCreate&&Ne(t.beforeCreate,e,"bc");const{data:a,computed:o,methods:l,watch:u,provide:c,inject:d,created:h,beforeMount:p,mounted:f,beforeUpdate:g,updated:m,activated:y,deactivated:v,beforeDestroy:b,beforeUnmount:T,destroyed:_,unmounted:w,render:S,renderTracked:E,renderTriggered:A,errorCaptured:C,serverPrefetch:I,expose:x,inheritAttrs:k,components:M,directives:D,filters:R}=t,O=null;if(d&&Oe(d,s,O),l)for(const i in l){const e=l[i];(0,r.Tn)(e)&&(s[i]=e.bind(n))}if(a){0;const t=a.call(n,n);0,(0,r.Gv)(t)&&(e.data=(0,i.Kh)(t))}if(De=!0,o)for(const i in o){const e=o[i],t=(0,r.Tn)(e)?e.bind(n,n):(0,r.Tn)(e.get)?e.get.bind(n,n):r.tE;0;const a=!(0,r.Tn)(e)&&(0,r.Tn)(e.set)?e.set.bind(n):r.tE,l=Gn({get:t,set:a});Object.defineProperty(s,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(u)for(const i in u)Le(u[i],s,n,i);if(c){const e=(0,r.Tn)(c)?c.call(n):c;Reflect.ownKeys(e).forEach(t=>{$e(t,e[t])})}function N(e,t){(0,r.cy)(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(h&&Ne(h,e,"c"),N(le,p),N(ue,f),N(ce,g),N(de,m),N(ee,y),N(te,v),N(ye,C),N(me,E),N(ge,A),N(he,T),N(pe,w),N(fe,I),(0,r.cy)(x))if(x.length){const t=e.exposed||(e.exposed={});x.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});S&&e.render===r.tE&&(e.render=S),null!=k&&(e.inheritAttrs=k),M&&(e.components=M),D&&(e.directives=D),I&&Y(e)}function Oe(e,t,n=r.tE){(0,r.cy)(e)&&(e=Ve(e));for(const s in e){const n=e[s];let a;a=(0,r.Gv)(n)?"default"in n?Qe(n.from||s,n.default,!0):Qe(n.from||s):Qe(n),(0,i.i9)(a)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[s]=a}}function Ne(e,t,n){a((0,r.cy)(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Le(e,t,n,i){let s=i.includes(".")?Rt(n,i):()=>n[i];if((0,r.Kg)(e)){const n=t[e];(0,r.Tn)(n)&&kt(s,n)}else if((0,r.Tn)(e))kt(s,e.bind(n));else if((0,r.Gv)(e))if((0,r.cy)(e))e.forEach(e=>Le(e,t,n,i));else{const i=(0,r.Tn)(e.handler)?e.handler.bind(n):t[e.handler];(0,r.Tn)(i)&&kt(s,i,e)}else 0}function Pe(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,l=a.get(t);let u;return l?u=l:s.length||n||i?(u={},s.length&&s.forEach(e=>Ue(u,e,o,!0)),Ue(u,t,o)):u=t,(0,r.Gv)(t)&&a.set(t,u),u}function Ue(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&Ue(e,s,n,!0),r&&r.forEach(t=>Ue(e,t,n,!0));for(const a in t)if(i&&"expose"===a);else{const i=Be[a]||n&&n[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const Be={data:Fe,props:Ge,emits:Ge,methods:ze,computed:ze,beforeCreate:He,created:He,beforeMount:He,mounted:He,beforeUpdate:He,updated:He,beforeDestroy:He,beforeUnmount:He,destroyed:He,unmounted:He,activated:He,deactivated:He,errorCaptured:He,serverPrefetch:He,components:ze,directives:ze,watch:qe,provide:Fe,inject:je};function Fe(e,t){return t?e?function(){return(0,r.X$)((0,r.Tn)(e)?e.call(this,this):e,(0,r.Tn)(t)?t.call(this,this):t)}:t:e}function je(e,t){return ze(Ve(e),Ve(t))}function Ve(e){if((0,r.cy)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function He(e,t){return e?[...new Set([].concat(e,t))]:t}function ze(e,t){return e?(0,r.X$)(Object.create(null),e,t):t}function Ge(e,t){return e?(0,r.cy)(e)&&(0,r.cy)(t)?[...new Set([...e,...t])]:(0,r.X$)(Object.create(null),Me(e),Me(null!=t?t:{})):t}function qe(e,t){if(!e)return t;if(!t)return e;const n=(0,r.X$)(Object.create(null),e);for(const i in t)n[i]=He(e[i],t[i]);return n}function We(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xe=0;function Ke(e,t){return function(n,i=null){(0,r.Tn)(n)||(n=(0,r.X$)({},n)),null==i||(0,r.Gv)(i)||(i=null);const s=We(),o=new WeakSet,l=[];let u=!1;const c=s.app={_uid:Xe++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Wn,get config(){return s.config},set config(e){0},use(e,...t){return o.has(e)||(e&&(0,r.Tn)(e.install)?(o.add(e),e.install(c,...t)):(0,r.Tn)(e)&&(o.add(e),e(c,...t))),c},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),c},component(e,t){return t?(s.components[e]=t,c):s.components[e]},directive(e,t){return t?(s.directives[e]=t,c):s.directives[e]},mount(r,a,o){if(!u){0;const l=c._ceVNode||cn(n,i);return l.appContext=s,!0===o?o="svg":!1===o&&(o=void 0),a&&t?t(l,r):e(l,r,o),u=!0,c._container=r,r.__vue_app__=c,Vn(l.component)}},onUnmount(e){l.push(e)},unmount(){u&&(a(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return s.provides[e]=t,c},runWithContext(e){const t=Ye;Ye=c;try{return e()}finally{Ye=t}}};return c}}let Ye=null;function $e(e,t){if(An){let n=An.provides;const i=An.parent&&An.parent.provides;i===n&&(n=An.provides=Object.create(i)),n[e]=t}else 0}function Qe(e,t,n=!1){const i=An||A;if(i||Ye){let s=Ye?Ye._context.provides:i?null==i.parent||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&(0,r.Tn)(t)?t.call(i&&i.proxy):t}else 0}const Ze={},Je=()=>Object.create(Ze),et=e=>Object.getPrototypeOf(e)===Ze;function tt(e,t,n,r=!1){const s={},a=Je();e.propsDefaults=Object.create(null),it(e,t,s,a);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=r?s:(0,i.Gc)(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function nt(e,t,n,s){const{props:a,attrs:o,vnode:{patchFlag:l}}=e,u=(0,i.ux)(a),[c]=e.propsOptions;let d=!1;if(!(s||l>0)||16&l){let i;it(e,t,a,o)&&(d=!0);for(const s in u)t&&((0,r.$3)(t,s)||(i=(0,r.Tg)(s))!==s&&(0,r.$3)(t,i))||(c?!n||void 0===n[s]&&void 0===n[i]||(a[s]=rt(c,u,s,void 0,e,!0)):delete a[s]);if(o!==u)for(const e in o)t&&(0,r.$3)(t,e)||(delete o[e],d=!0)}else if(8&l){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];if(Pt(e.emitsOptions,s))continue;const l=t[s];if(c)if((0,r.$3)(o,s))l!==o[s]&&(o[s]=l,d=!0);else{const t=(0,r.PT)(s);a[t]=rt(c,u,t,l,e,!1)}else l!==o[s]&&(o[s]=l,d=!0)}}d&&(0,i.hZ)(e.attrs,"set","")}function it(e,t,n,s){const[a,o]=e.propsOptions;let l,u=!1;if(t)for(let i in t){if((0,r.SU)(i))continue;const c=t[i];let d;a&&(0,r.$3)(a,d=(0,r.PT)(i))?o&&o.includes(d)?(l||(l={}))[d]=c:n[d]=c:Pt(e.emitsOptions,i)||i in s&&c===s[i]||(s[i]=c,u=!0)}if(o){const t=(0,i.ux)(n),s=l||r.MZ;for(let i=0;i<o.length;i++){const l=o[i];n[l]=rt(a,t,l,s[l],e,!(0,r.$3)(s,l))}}return u}function rt(e,t,n,i,s,a){const o=e[n];if(null!=o){const e=(0,r.$3)(o,"default");if(e&&void 0===i){const e=o.default;if(o.type!==Function&&!o.skipFactory&&(0,r.Tn)(e)){const{propsDefaults:r}=s;if(n in r)i=r[n];else{const a=kn(s);i=r[n]=e.call(null,t),a()}}else i=e;s.ce&&s.ce._setProp(n,i)}o[0]&&(a&&!e?i=!1:!o[1]||""!==i&&i!==(0,r.Tg)(n)||(i=!0))}return i}const st=new WeakMap;function at(e,t,n=!1){const i=n?st:t.propsCache,s=i.get(e);if(s)return s;const a=e.props,o={},l=[];let u=!1;if(!(0,r.Tn)(e)){const i=e=>{u=!0;const[n,i]=at(e,t,!0);(0,r.X$)(o,n),i&&l.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!a&&!u)return(0,r.Gv)(e)&&i.set(e,r.Oj),r.Oj;if((0,r.cy)(a))for(let d=0;d<a.length;d++){0;const e=(0,r.PT)(a[d]);ot(e)&&(o[e]=r.MZ)}else if(a){0;for(const e in a){const t=(0,r.PT)(e);if(ot(t)){const n=a[e],i=o[t]=(0,r.cy)(n)||(0,r.Tn)(n)?{type:n}:(0,r.X$)({},n),s=i.type;let u=!1,c=!0;if((0,r.cy)(s))for(let e=0;e<s.length;++e){const t=s[e],n=(0,r.Tn)(t)&&t.name;if("Boolean"===n){u=!0;break}"String"===n&&(c=!1)}else u=(0,r.Tn)(s)&&"Boolean"===s.name;i[0]=u,i[1]=c,(u||(0,r.$3)(i,"default"))&&l.push(t)}}}const c=[o,l];return(0,r.Gv)(e)&&i.set(e,c),c}function ot(e){return"$"!==e[0]&&!(0,r.SU)(e)}const lt=e=>"_"===e[0]||"$stable"===e,ut=e=>(0,r.cy)(e)?e.map(yn):[yn(e)],ct=(e,t,n)=>{if(t._n)return t;const i=x((...e)=>ut(t(...e)),n);return i._c=!1,i},dt=(e,t,n)=>{const i=e._ctx;for(const s in e){if(lt(s))continue;const n=e[s];if((0,r.Tn)(n))t[s]=ct(s,n,i);else if(null!=n){0;const e=ut(n);t[s]=()=>e}}},ht=(e,t)=>{const n=ut(t);e.slots.default=()=>n},pt=(e,t,n)=>{for(const i in t)!n&&lt(i)||(e[i]=t[i])},ft=(e,t,n)=>{const i=e.slots=Je();if(32&e.vnode.shapeFlag){const e=t._;e?(pt(i,t,n),n&&(0,r.yQ)(i,"_",e,!0)):dt(t,i)}else t&&ht(e,t)},gt=(e,t,n)=>{const{vnode:i,slots:s}=e;let a=!0,o=r.MZ;if(32&i.shapeFlag){const e=t._;e?n&&1===e?a=!1:pt(s,t,n):(a=!t.$stable,dt(t,s)),o=t}else t&&(ht(e,t),o={default:1});if(a)for(const r in s)lt(r)||null!=o[r]||delete s[r]};function mt(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,r.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const yt=Gt;function vt(e){return bt(e)}function bt(e,t){mt();const n=(0,r.We)();n.__VUE__=!0;const{insert:s,remove:a,patchProp:o,createElement:l,createText:u,createComment:c,setText:d,setElementText:h,parentNode:p,nextSibling:f,setScopeId:g=r.tE,insertStaticContent:m}=e,y=(e,t,n,i=null,r=null,s=null,a=void 0,o=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!an(e,t)&&(i=J(e),q(e,r,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:u,ref:c,shapeFlag:d}=t;switch(u){case Wt:b(e,t,n,i);break;case Xt:T(e,t,n,i);break;case Kt:null==e&&S(t,n,i,a);break;case qt:L(e,t,n,i,r,s,a,o,l);break;default:1&d?C(e,t,n,i,r,s,a,o,l):6&d?P(e,t,n,i,r,s,a,o,l):(64&d||128&d)&&u.process(e,t,n,i,r,s,a,o,l,ne)}null!=c&&r&&$(c,e&&e.ref,s,t||e,!t)},b=(e,t,n,i)=>{if(null==e)s(t.el=u(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},T=(e,t,n,i)=>{null==e?s(t.el=c(t.children||""),n,i):t.el=e.el},S=(e,t,n,i)=>{[e.el,e.anchor]=m(e.children,t,n,i,e.el,e.anchor)},E=({el:e,anchor:t},n,i)=>{let r;while(e&&e!==t)r=f(e),s(e,n,i),e=r;s(t,n,i)},A=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),a(e),e=n;a(t)},C=(e,t,n,i,r,s,a,o,l)=>{"svg"===t.type?a="svg":"math"===t.type&&(a="mathml"),null==e?I(t,n,i,r,s,a,o,l):R(e,t,r,s,a,o,l)},I=(e,t,n,i,a,u,c,d)=>{let p,f;const{props:g,shapeFlag:m,transition:y,dirs:v}=e;if(p=e.el=l(e.type,u,g&&g.is,g),8&m?h(p,e.children):16&m&&k(e.children,p,null,i,a,Tt(e,u),c,d),v&&M(e,null,i,"created"),x(p,e,e.scopeId,c,i),g){for(const e in g)"value"===e||(0,r.SU)(e)||o(p,e,null,g[e],u,i);"value"in g&&o(p,"value",null,g.value,u),(f=g.onVnodeBeforeMount)&&_n(f,i,e)}v&&M(e,null,i,"beforeMount");const b=wt(a,y);b&&y.beforeEnter(p),s(p,t,n),((f=g&&g.onVnodeMounted)||b||v)&&yt(()=>{f&&_n(f,i,e),b&&y.enter(p),v&&M(e,null,i,"mounted")},a)},x=(e,t,n,i,r)=>{if(n&&g(e,n),i)for(let s=0;s<i.length;s++)g(e,i[s]);if(r){let n=r.subTree;if(t===n||zt(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=r.vnode;x(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},k=(e,t,n,i,r,s,a,o,l=0)=>{for(let u=l;u<e.length;u++){const l=e[u]=o?vn(e[u]):yn(e[u]);y(null,l,t,n,i,r,s,a,o)}},R=(e,t,n,i,s,a,l)=>{const u=t.el=e.el;let{patchFlag:c,dynamicChildren:d,dirs:p}=t;c|=16&e.patchFlag;const f=e.props||r.MZ,g=t.props||r.MZ;let m;if(n&&_t(n,!1),(m=g.onVnodeBeforeUpdate)&&_n(m,n,t,e),p&&M(t,e,n,"beforeUpdate"),n&&_t(n,!0),(f.innerHTML&&null==g.innerHTML||f.textContent&&null==g.textContent)&&h(u,""),d?O(e.dynamicChildren,d,u,n,i,Tt(t,s),a):l||V(e,t,u,null,n,i,Tt(t,s),a,!1),c>0){if(16&c)N(u,f,g,n,s);else if(2&c&&f.class!==g.class&&o(u,"class",null,g.class,s),4&c&&o(u,"style",f.style,g.style,s),8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const i=e[t],r=f[i],a=g[i];a===r&&"value"!==i||o(u,i,r,a,s,n)}}1&c&&e.children!==t.children&&h(u,t.children)}else l||null!=d||N(u,f,g,n,s);((m=g.onVnodeUpdated)||p)&&yt(()=>{m&&_n(m,n,t,e),p&&M(t,e,n,"updated")},i)},O=(e,t,n,i,r,s,a)=>{for(let o=0;o<t.length;o++){const l=e[o],u=t[o],c=l.el&&(l.type===qt||!an(l,u)||198&l.shapeFlag)?p(l.el):n;y(l,u,c,null,i,r,s,a,!0)}},N=(e,t,n,i,s)=>{if(t!==n){if(t!==r.MZ)for(const a in t)(0,r.SU)(a)||a in n||o(e,a,t[a],null,s,i);for(const a in n){if((0,r.SU)(a))continue;const l=n[a],u=t[a];l!==u&&"value"!==a&&o(e,a,u,l,s,i)}"value"in n&&o(e,"value",t.value,n.value,s)}},L=(e,t,n,i,r,a,o,l,c)=>{const d=t.el=e?e.el:u(""),h=t.anchor=e?e.anchor:u("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=t;g&&(l=l?l.concat(g):g),null==e?(s(d,n,i),s(h,n,i),k(t.children||[],n,h,r,a,o,l,c)):p>0&&64&p&&f&&e.dynamicChildren?(O(e.dynamicChildren,f,n,r,a,o,l),(null!=t.key||r&&t===r.subTree)&&St(e,t,!0)):V(e,t,n,h,r,a,o,l,c)},P=(e,t,n,i,r,s,a,o,l)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,a,l):U(t,n,i,r,s,a,l):B(e,t,l)},U=(e,t,n,i,r,s,a)=>{const o=e.component=En(e,i,r);if(Z(e)&&(o.ctx.renderer=ne),Ln(o,!1,a),o.asyncDep){if(r&&r.registerDep(o,F,a),!e.el){const e=o.subTree=cn(Xt);T(null,e,t,n)}}else F(o,e,t,n,r,s,a)},B=(e,t,n)=>{const i=t.component=e.component;if(jt(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void j(i,t,n);i.next=t,i.update()}else t.el=e.el,i.vnode=t},F=(e,t,n,s,a,o,l)=>{const u=()=>{if(e.isMounted){let{next:t,bu:n,u:i,parent:s,vnode:c}=e;{const n=At(e);if(n)return t&&(t.el=c.el,j(e,t,l)),void n.asyncDep.then(()=>{e.isUnmounted||u()})}let d,h=t;0,_t(e,!1),t?(t.el=c.el,j(e,t,l)):t=c,n&&(0,r.DY)(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&_n(d,s,t,c),_t(e,!0);const f=Ut(e);0;const g=e.subTree;e.subTree=f,y(g,f,p(g.el),J(g),e,a,o),t.el=f.el,null===h&&Ht(e,f.el),i&&yt(i,a),(d=t.props&&t.props.onVnodeUpdated)&&yt(()=>_n(d,s,t,c),a)}else{let i;const{el:l,props:u}=t,{bm:c,m:d,parent:h,root:p,type:f}=e,g=Q(t);if(_t(e,!1),c&&(0,r.DY)(c),!g&&(i=u&&u.onVnodeBeforeMount)&&_n(i,h,t),_t(e,!0),l&&re){const t=()=>{e.subTree=Ut(e),re(l,e.subTree,e,a,null)};g&&f.__asyncHydrate?f.__asyncHydrate(l,e,t):t()}else{p.ce&&p.ce._injectChildStyle(f);const i=e.subTree=Ut(e);0,y(null,i,n,s,e,a,o),t.el=i.el}if(d&&yt(d,a),!g&&(i=u&&u.onVnodeMounted)){const e=t;yt(()=>_n(i,h,e),a)}(256&t.shapeFlag||h&&Q(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&yt(e.a,a),e.isMounted=!0,t=n=s=null}};e.scope.on();const c=e.effect=new i.X2(u);e.scope.off();const d=e.update=c.run.bind(c),h=e.job=c.runIfDirty.bind(c);h.i=e,h.id=e.uid,c.scheduler=()=>v(h),_t(e,!0),d()},j=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,nt(e,t.props,r,n),gt(e,t.children,n),(0,i.C4)(),_(e),(0,i.bl)()},V=(e,t,n,i,r,s,a,o,l=!1)=>{const u=e&&e.children,c=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void z(u,d,n,i,r,s,a,o,l);if(256&p)return void H(u,d,n,i,r,s,a,o,l)}8&f?(16&c&&Y(u,r,s),d!==u&&h(n,d)):16&c?16&f?z(u,d,n,i,r,s,a,o,l):Y(u,r,s,!0):(8&c&&h(n,""),16&f&&k(d,n,i,r,s,a,o,l))},H=(e,t,n,i,s,a,o,l,u)=>{e=e||r.Oj,t=t||r.Oj;const c=e.length,d=t.length,h=Math.min(c,d);let p;for(p=0;p<h;p++){const i=t[p]=u?vn(t[p]):yn(t[p]);y(e[p],i,n,null,s,a,o,l,u)}c>d?Y(e,s,a,!0,!1,h):k(t,n,i,s,a,o,l,u,h)},z=(e,t,n,i,s,a,o,l,u)=>{let c=0;const d=t.length;let h=e.length-1,p=d-1;while(c<=h&&c<=p){const i=e[c],r=t[c]=u?vn(t[c]):yn(t[c]);if(!an(i,r))break;y(i,r,n,null,s,a,o,l,u),c++}while(c<=h&&c<=p){const i=e[h],r=t[p]=u?vn(t[p]):yn(t[p]);if(!an(i,r))break;y(i,r,n,null,s,a,o,l,u),h--,p--}if(c>h){if(c<=p){const e=p+1,r=e<d?t[e].el:i;while(c<=p)y(null,t[c]=u?vn(t[c]):yn(t[c]),n,r,s,a,o,l,u),c++}}else if(c>p)while(c<=h)q(e[c],s,a,!0),c++;else{const f=c,g=c,m=new Map;for(c=g;c<=p;c++){const e=t[c]=u?vn(t[c]):yn(t[c]);null!=e.key&&m.set(e.key,c)}let v,b=0;const T=p-g+1;let _=!1,w=0;const S=new Array(T);for(c=0;c<T;c++)S[c]=0;for(c=f;c<=h;c++){const i=e[c];if(b>=T){q(i,s,a,!0);continue}let r;if(null!=i.key)r=m.get(i.key);else for(v=g;v<=p;v++)if(0===S[v-g]&&an(i,t[v])){r=v;break}void 0===r?q(i,s,a,!0):(S[r-g]=c+1,r>=w?w=r:_=!0,y(i,t[r],n,null,s,a,o,l,u),b++)}const E=_?Et(S):r.Oj;for(v=E.length-1,c=T-1;c>=0;c--){const e=g+c,r=t[e],h=e+1<d?t[e+1].el:i;0===S[c]?y(null,r,n,h,s,a,o,l,u):_&&(v<0||c!==E[v]?G(r,n,h,2):v--)}}},G=(e,t,n,i,r=null)=>{const{el:o,type:l,transition:u,children:c,shapeFlag:d}=e;if(6&d)return void G(e.component.subTree,t,n,i);if(128&d)return void e.suspense.move(t,n,i);if(64&d)return void l.move(e,t,n,ne);if(l===qt){s(o,t,n);for(let e=0;e<c.length;e++)G(c[e],t,n,i);return void s(e.anchor,t,n)}if(l===Kt)return void E(e,t,n);const h=2!==i&&1&d&&u;if(h)if(0===i)u.beforeEnter(o),s(o,t,n),yt(()=>u.enter(o),r);else{const{leave:i,delayLeave:r,afterLeave:l}=u,c=()=>{e.ctx.isUnmounted?a(o):s(o,t,n)},d=()=>{i(o,()=>{c(),l&&l()})};r?r(o,c,d):d()}else s(o,t,n)},q=(e,t,n,r=!1,s=!1)=>{const{type:a,props:o,ref:l,children:u,dynamicChildren:c,shapeFlag:d,patchFlag:h,dirs:p,cacheIndex:f}=e;if(-2===h&&(s=!1),null!=l&&((0,i.C4)(),$(l,null,n,e,!0),(0,i.bl)()),null!=f&&(t.renderCache[f]=void 0),256&d)return void t.ctx.deactivate(e);const g=1&d&&p,m=!Q(e);let y;if(m&&(y=o&&o.onVnodeBeforeUnmount)&&_n(y,t,e),6&d)K(e.component,n,r);else{if(128&d)return void e.suspense.unmount(n,r);g&&M(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,n,ne,r):c&&!c.hasOnce&&(a!==qt||h>0&&64&h)?Y(c,t,n,!1,!0):(a===qt&&384&h||!s&&16&d)&&Y(u,t,n),r&&W(e)}(m&&(y=o&&o.onVnodeUnmounted)||g)&&yt(()=>{y&&_n(y,t,e),g&&M(e,null,t,"unmounted")},n)},W=e=>{const{type:t,el:n,anchor:i,transition:r}=e;if(t===qt)return void X(n,i);if(t===Kt)return void A(e);const s=()=>{a(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:i}=r,a=()=>t(n,s);i?i(e.el,s,a):a()}else s()},X=(e,t)=>{let n;while(e!==t)n=f(e),a(e),e=n;a(t)},K=(e,t,n)=>{const{bum:i,scope:s,job:a,subTree:o,um:l,m:u,a:c,parent:d,slots:{__:h}}=e;Ct(u),Ct(c),i&&(0,r.DY)(i),d&&(0,r.cy)(h)&&h.forEach(e=>{d.renderCache[e]=void 0}),s.stop(),a&&(a.flags|=8,q(o,e,t,n)),l&&yt(l,t),yt(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Y=(e,t,n,i=!1,r=!1,s=0)=>{for(let a=s;a<e.length;a++)q(e[a],t,n,i,r)},J=e=>{if(6&e.shapeFlag)return J(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=f(e.anchor||e.el),n=t&&t[D];return n?f(n):t};let ee=!1;const te=(e,t,n)=>{null==e?t._vnode&&q(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),t._vnode=e,ee||(ee=!0,_(),w(),ee=!1)},ne={p:y,um:q,m:G,r:W,mt:U,mc:k,pc:V,pbc:O,n:J,o:e};let ie,re;return t&&([ie,re]=t(ne)),{render:te,hydrate:ie,createApp:Ke(te,ie)}}function Tt({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function _t({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wt(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function St(e,t,n=!1){const i=e.children,s=t.children;if((0,r.cy)(i)&&(0,r.cy)(s))for(let r=0;r<i.length;r++){const e=i[r];let t=s[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[r]=vn(s[r]),t.el=e.el),n||-2===t.patchFlag||St(e,t)),t.type===Wt&&(t.el=e.el),t.type!==Xt||t.el||(t.el=e.el)}}function Et(e){const t=e.slice(),n=[0];let i,r,s,a,o;const l=e.length;for(i=0;i<l;i++){const l=e[i];if(0!==l){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}s=0,a=n.length-1;while(s<a)o=s+a>>1,e[n[o]]<l?s=o+1:a=o;l<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}s=n.length,a=n[s-1];while(s-- >0)n[s]=a,a=t[a];return n}function At(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:At(t)}function Ct(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const It=Symbol.for("v-scx"),xt=()=>{{const e=Qe(It);return e}};function kt(e,t,n){return Mt(e,t,n)}function Mt(e,t,n=r.MZ){const{immediate:s,deep:o,flush:l,once:u}=n;const c=(0,r.X$)({},n);const d=t&&s||!t&&"post"!==l;let h;if(Nn)if("sync"===l){const e=xt();h=e.__watcherHandles||(e.__watcherHandles=[])}else if(!d){const e=()=>{};return e.stop=r.tE,e.resume=r.tE,e.pause=r.tE,e}const p=An;c.call=(e,t,n)=>a(e,p,t,n);let f=!1;"post"===l?c.scheduler=e=>{yt(e,p&&p.suspense)}:"sync"!==l&&(f=!0,c.scheduler=(e,t)=>{t?e():v(e)}),c.augmentJob=e=>{t&&(e.flags|=4),f&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};const g=(0,i.wB)(e,t,c);return Nn&&(h?h.push(g):d&&g()),g}function Dt(e,t,n){const i=this.proxy,s=(0,r.Kg)(e)?e.includes(".")?Rt(i,e):()=>i[e]:e.bind(i,i);let a;(0,r.Tn)(t)?a=t:(a=t.handler,n=t);const o=kn(this),l=Mt(s,a.bind(i),n);return o(),l}function Rt(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const Ot=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${(0,r.PT)(t)}Modifiers`]||e[`${(0,r.Tg)(t)}Modifiers`];function Nt(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r.MZ;let s=n;const o=t.startsWith("update:"),l=o&&Ot(i,t.slice(7));let u;l&&(l.trim&&(s=n.map(e=>(0,r.Kg)(e)?e.trim():e)),l.number&&(s=n.map(r.bB)));let c=i[u=(0,r.rU)(t)]||i[u=(0,r.rU)((0,r.PT)(t))];!c&&o&&(c=i[u=(0,r.rU)((0,r.Tg)(t))]),c&&a(c,e,6,s);const d=i[u+"Once"];if(d){if(e.emitted){if(e.emitted[u])return}else e.emitted={};e.emitted[u]=!0,a(d,e,6,s)}}function Lt(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(void 0!==s)return s;const a=e.emits;let o={},l=!1;if(!(0,r.Tn)(e)){const i=e=>{const n=Lt(e,t,!0);n&&(l=!0,(0,r.X$)(o,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return a||l?((0,r.cy)(a)?a.forEach(e=>o[e]=null):(0,r.X$)(o,a),(0,r.Gv)(e)&&i.set(e,o),o):((0,r.Gv)(e)&&i.set(e,null),null)}function Pt(e,t){return!(!e||!(0,r.Mp)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,r.$3)(e,t[0].toLowerCase()+t.slice(1))||(0,r.$3)(e,(0,r.Tg)(t))||(0,r.$3)(e,t))}function Ut(e){const{type:t,vnode:n,proxy:i,withProxy:s,propsOptions:[a],slots:l,attrs:u,emit:c,render:d,renderCache:h,props:p,data:f,setupState:g,ctx:m,inheritAttrs:y}=e,v=I(e);let b,T;try{if(4&n.shapeFlag){const e=s||i,t=e;b=yn(d.call(t,e,h,p,g,f,m)),T=u}else{const e=t;0,b=yn(e.length>1?e(p,{attrs:u,slots:l,emit:c}):e(p,null)),T=t.props?u:Bt(u)}}catch(w){Yt.length=0,o(w,e,1),b=cn(Xt)}let _=b;if(T&&!1!==y){const e=Object.keys(T),{shapeFlag:t}=_;e.length&&7&t&&(a&&e.some(r.CP)&&(T=Ft(T,a)),_=pn(_,T,!1,!0))}return n.dirs&&(_=pn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&W(_,n.transition),b=_,I(v),b}const Bt=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,r.Mp)(n))&&((t||(t={}))[n]=e[n]);return t},Ft=(e,t)=>{const n={};for(const i in e)(0,r.CP)(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function jt(e,t,n){const{props:i,children:r,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!o||o&&o.$stable)||i!==a&&(i?!a||Vt(i,a,u):!!a);if(1024&l)return!0;if(16&l)return i?Vt(i,a,u):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==i[n]&&!Pt(u,n))return!0}}return!1}function Vt(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Pt(n,s))return!0}return!1}function Ht({vnode:e,parent:t},n){while(t){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i!==e)break;(e=t.vnode).el=n,t=t.parent}}const zt=e=>e.__isSuspense;function Gt(e,t){t&&t.pendingBranch?(0,r.cy)(e)?t.effects.push(...e):t.effects.push(e):T(e)}const qt=Symbol.for("v-fgt"),Wt=Symbol.for("v-txt"),Xt=Symbol.for("v-cmt"),Kt=Symbol.for("v-stc"),Yt=[];let $t=null;function Qt(e=!1){Yt.push($t=e?null:[])}function Zt(){Yt.pop(),$t=Yt[Yt.length-1]||null}let Jt=1;function en(e,t=!1){Jt+=e,e<0&&$t&&t&&($t.hasOnce=!0)}function tn(e){return e.dynamicChildren=Jt>0?$t||r.Oj:null,Zt(),Jt>0&&$t&&$t.push(e),e}function nn(e,t,n,i,r,s){return tn(un(e,t,n,i,r,s,!0))}function rn(e,t,n,i,r){return tn(cn(e,t,n,i,r,!0))}function sn(e){return!!e&&!0===e.__v_isVNode}function an(e,t){return e.type===t.type&&e.key===t.key}const on=({key:e})=>null!=e?e:null,ln=({ref:e,ref_key:t,ref_for:n})=>("number"===typeof e&&(e=""+e),null!=e?(0,r.Kg)(e)||(0,i.i9)(e)||(0,r.Tn)(e)?{i:A,r:e,k:t,f:!!n}:e:null);function un(e,t=null,n=null,i=0,s=null,a=(e===qt?0:1),o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&on(t),ref:t&&ln(t),scopeId:C,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:A};return l?(bn(u,n),128&a&&e.normalize(u)):n&&(u.shapeFlag|=(0,r.Kg)(n)?8:16),Jt>0&&!o&&$t&&(u.patchFlag>0||6&a)&&32!==u.patchFlag&&$t.push(u),u}const cn=dn;function dn(e,t=null,n=null,s=0,a=null,o=!1){if(e&&e!==_e||(e=Xt),sn(e)){const i=pn(e,t,!0);return n&&bn(i,n),Jt>0&&!o&&$t&&(6&i.shapeFlag?$t[$t.indexOf(e)]=i:$t.push(i)),i.patchFlag=-2,i}if(zn(e)&&(e=e.__vccOpts),t){t=hn(t);let{class:e,style:n}=t;e&&!(0,r.Kg)(e)&&(t.class=(0,r.C4)(e)),(0,r.Gv)(n)&&((0,i.ju)(n)&&!(0,r.cy)(n)&&(n=(0,r.X$)({},n)),t.style=(0,r.Tr)(n))}const l=(0,r.Kg)(e)?1:zt(e)?128:R(e)?64:(0,r.Gv)(e)?4:(0,r.Tn)(e)?2:0;return un(e,t,n,s,a,l,o,!0)}function hn(e){return e?(0,i.ju)(e)||et(e)?(0,r.X$)({},e):e:null}function pn(e,t,n=!1,i=!1){const{props:s,ref:a,patchFlag:o,children:l,transition:u}=e,c=t?Tn(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&on(c),ref:t&&t.ref?n&&a?(0,r.cy)(a)?a.concat(ln(t)):[a,ln(t)]:ln(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==qt?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&pn(e.ssContent),ssFallback:e.ssFallback&&pn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&i&&W(d,u.clone(d)),d}function fn(e=" ",t=0){return cn(Wt,null,e,t)}function gn(e,t){const n=cn(Kt,null,e);return n.staticCount=t,n}function mn(e="",t=!1){return t?(Qt(),rn(Xt,null,e)):cn(Xt,null,e)}function yn(e){return null==e||"boolean"===typeof e?cn(Xt):(0,r.cy)(e)?cn(qt,null,e.slice()):sn(e)?vn(e):cn(Wt,null,String(e))}function vn(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:pn(e)}function bn(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if((0,r.cy)(t))n=16;else if("object"===typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),bn(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||et(t)?3===i&&A&&(1===A.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=A}}else(0,r.Tn)(t)?(t={default:t,_ctx:A},n=32):(t=String(t),64&i?(n=16,t=[fn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Tn(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=(0,r.C4)([t.class,i.class]));else if("style"===e)t.style=(0,r.Tr)([t.style,i.style]);else if((0,r.Mp)(e)){const n=t[e],s=i[e];!s||n===s||(0,r.cy)(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=i[e])}return t}function _n(e,t,n,i=null){a(e,t,7,[n,i])}const wn=We();let Sn=0;function En(e,t,n){const s=e.type,a=(t?t.appContext:e.appContext)||wn,o={uid:Sn++,vnode:e,type:s,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new i.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:at(s,a),emitsOptions:Lt(s,a),emit:null,emitted:null,propsDefaults:r.MZ,inheritAttrs:s.inheritAttrs,ctx:r.MZ,data:r.MZ,props:r.MZ,attrs:r.MZ,slots:r.MZ,refs:r.MZ,setupState:r.MZ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Nt.bind(null,o),e.ce&&e.ce(o),o}let An=null;const Cn=()=>An||A;let In,xn;{const e=(0,r.We)(),t=(t,n)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(n),e=>{i.length>1?i.forEach(t=>t(e)):i[0](e)}};In=t("__VUE_INSTANCE_SETTERS__",e=>An=e),xn=t("__VUE_SSR_SETTERS__",e=>Nn=e)}const kn=e=>{const t=An;return In(e),e.scope.on(),()=>{e.scope.off(),In(t)}},Mn=()=>{An&&An.scope.off(),In(null)};function Dn(e){return 4&e.vnode.shapeFlag}let Rn,On,Nn=!1;function Ln(e,t=!1,n=!1){t&&xn(t);const{props:i,children:r}=e.vnode,s=Dn(e);tt(e,i,s,t),ft(e,r,n||t);const a=s?Pn(e,t):void 0;return t&&xn(!1),a}function Pn(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ke);const{setup:a}=n;if(a){(0,i.C4)();const n=e.setupContext=a.length>1?jn(e):null,l=kn(e),u=s(a,e,0,[e.props,n]),c=(0,r.yL)(u);if((0,i.bl)(),l(),!c&&!e.sp||Q(e)||Y(e),c){if(u.then(Mn,Mn),t)return u.then(n=>{Un(e,n,t)}).catch(t=>{o(t,e,0)});e.asyncDep=u}else Un(e,u,t)}else Bn(e,t)}function Un(e,t,n){(0,r.Tn)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,r.Gv)(t)&&(e.setupState=(0,i.Pr)(t)),Bn(e,n)}function Bn(e,t,n){const s=e.type;if(!e.render){if(!t&&Rn&&!s.render){const t=s.template||Pe(e).template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:o}=s,l=(0,r.X$)((0,r.X$)({isCustomElement:n,delimiters:a},i),o);s.render=Rn(t,l)}}e.render=s.render||r.tE,On&&On(e)}{const t=kn(e);(0,i.C4)();try{Re(e)}finally{(0,i.bl)(),t()}}}const Fn={get(e,t){return(0,i.u4)(e,"get",""),e[t]}};function jn(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Fn),slots:e.slots,emit:e.emit,expose:t}}function Vn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy((0,i.Pr)((0,i.IG)(e.exposed)),{get(t,n){return n in t?t[n]:n in Ie?Ie[n](e):void 0},has(e,t){return t in e||t in Ie}})):e.proxy}function Hn(e,t=!0){return(0,r.Tn)(e)?e.displayName||e.name:e.name||t&&e.__name}function zn(e){return(0,r.Tn)(e)&&"__vccOpts"in e}const Gn=(e,t)=>{const n=(0,i.EW)(e,t,Nn);return n};function qn(e,t,n){const i=arguments.length;return 2===i?(0,r.Gv)(t)&&!(0,r.cy)(t)?sn(t)?cn(e,null,[t]):cn(e,t):cn(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&sn(n)&&(n=[n]),cn(e,t,n))}const Wn="3.5.16"},6801:function(e,t,n){"use strict";var i=n(3724),r=n(8686),s=n(4913),a=n(8551),o=n(5397),l=n(1072);t.f=i&&!r?Object.defineProperties:function(e,t){a(e);var n,i=o(t),r=l(t),u=r.length,c=0;while(u>c)s.f(e,n=r[c++],i[n]);return e}},6823:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},6827:function(e,t,n){"use strict";n.d(t,{A:function(){return ml}});n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(9577);var i=n(2281),r=n.n(i),s=n(4236),a=n.n(s),o=n(3471),l=n.n(o),u=n(8919),c=n.n(u);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(null,arguments)}var h="https://example.com",p=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=r().location&&r().location.href||"");var n=/^\/\//.test(e),i=!r().location&&!/\/\//i.test(e);e=new(r().URL)(e,r().location||h);var s=new URL(t,e);return i?s.href.slice(h.length):n?s.href.slice(s.protocol.length):s.href},f=p,g=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),m=function(e){return r().atob?r().atob(e):Buffer.from(e,"base64").toString("binary")};function y(e){for(var t=m(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}
/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */
class v extends g{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const b=String.fromCharCode(9),T=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},_=function(){const e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},w=function(e){const t={};if(!e)return t;const n=e.split(_());let i,r=n.length;while(r--)""!==n[r]&&(i=/([^=]*)=(.*)/.exec(n[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1]);return t},S=e=>{const t=e.split("x"),n={};return t[0]&&(n.width=parseInt(t[0],10)),t[1]&&(n.height=parseInt(t[1],10)),n};class E extends g{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(e=e.trim(),0===e.length)return;if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});const i=this.tagMappers.reduce((t,n)=>{const i=n(e);return i===e?t:t.concat([i])},[e]);i.forEach(e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return n=d(T(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"map"},t[1]){const e=w(t[1]);e.URI&&(n.uri=e.URI),e.BYTERANGE&&(n.byterange=T(e.BYTERANGE))}this.trigger("data",n)}else{if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t)return n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=w(t[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=S(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=w(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=w(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=w(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"skip"},n.attributes=w(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(b)),void this.trigger("data",n);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part"},n.attributes=w(t[1]),["DURATION"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=T(n.attributes.BYTERANGE)),void this.trigger("data",n);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"server-control"},n.attributes=w(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))}),void this.trigger("data",n);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part-inf"},n.attributes=w(t[1]),["PART-TARGET"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),void this.trigger("data",n);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"preload-hint"},n.attributes=w(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}}),void this.trigger("data",n);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"rendition-report"},n.attributes=w(t[1]),["LAST-MSN","LAST-PART"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))}),void this.trigger("data",n);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(e),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=w(t[1]),["ID","CLASS"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=String(n.attributes[e]))}),["START-DATE","END-DATE"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=new Date(n.attributes[e]))}),["DURATION","PLANNED-DURATION"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["END-ON-NEXT"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/i.test(n.attributes[e]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=n.attributes[e].toString(16))});const e=/^X-([A-Z]+-)+[A-Z]+$/;for(const t in n.attributes){if(!e.test(t))continue;const i=/[0-9A-Fa-f]{6}/g.test(n.attributes[t]),r=/^\d+(\.\d+)?$/.test(n.attributes[t]);n.attributes[t]=i?n.attributes[t].toString(16):r?parseFloat(n.attributes[t]):String(n.attributes[t])}this.trigger("data",n)}else if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e),t)this.trigger("data",{type:"tag",tagType:"independent-segments"});else if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"i-frames-only"});else{if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e),t)return n={type:"tag",tagType:"content-steering"},n.attributes=w(t[1]),void this.trigger("data",n);if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(e),t)return n={type:"tag",tagType:"i-frame-playlist"},n.attributes=w(t[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=S(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),void this.trigger("data",n);if(t=/^#EXT-X-DEFINE:(.*)$/.exec(e),t)return n={type:"tag",tagType:"define"},n.attributes=w(t[1]),void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}}else this.trigger("data",{type:"comment",text:e.slice(1)})})}addParser({expression:e,customType:t,dataParser:n,segment:i}){"function"!==typeof n&&(n=e=>e),this.customParsers.push(r=>{const s=e.exec(r);if(s)return this.trigger("data",{type:"custom",data:n(r),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){const n=n=>e.test(n)?t(n):n;this.tagMappers.push(n)}}const A=e=>e.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),C=function(e){const t={};return Object.keys(e).forEach(function(n){t[A(n)]=e[n]}),t},I=function(e){const{serverControl:t,targetDuration:n,partTargetDuration:i}=e;if(!t)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=n&&3*n,l=i&&2*i;n&&!t.hasOwnProperty(s)&&(t[s]=o,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&t[s]<o&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${t[s]}) to targetDuration * 3 (${o})`}),t[s]=o),i&&!t.hasOwnProperty(a)&&(t[a]=3*i,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[a]}).`})),i&&t[a]<l&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${t[a]}) to partTargetDuration * 2 (${l}).`}),t[a]=l)};class x extends g{constructor(e={}){super(),this.lineStream=new v,this.parseStream=new E,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,n=[];let i,r,s={},a=!1;const o=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let c=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let h=0,p=0;const f={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&i&&(s.map=i),!s.key&&r&&(s.key=r),s.timeline||"number"!==typeof c||(s.timeline=c),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(e){let g,m;if(t.manifest.definitions)for(const n in t.manifest.definitions)if(e.uri&&(e.uri=e.uri.replace(`{$${n}}`,t.manifest.definitions[n])),e.attributes)for(const i in e.attributes)"string"===typeof e.attributes[i]&&(e.attributes[i]=e.attributes[i].replace(`{$${n}}`,t.manifest.definitions[n]));({tag(){({version(){e.version&&(this.manifest.version=e.version)},"allow-cache"(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=h)),"offset"in e&&(s.byterange=t,t.offset=e.offset),h=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.title&&(s.title=e.title),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if(e.attributes.KEYFORMAT===u){const t=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return-1===t.indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:y(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},"undefined"!==typeof e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence"(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type"(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map(){i={},e.uri&&(i.uri=e.uri),e.byterange&&(i.byterange=e.byterange),r&&(i.key=r)},"stream-inf"(){this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(s.attributes||(s.attributes={}),d(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},g=t[e.attributes["GROUP-ID"]],m={default:/yes/i.test(e.attributes.DEFAULT)},m.default?m.autoselect=!0:m.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(m.language=e.attributes.LANGUAGE),e.attributes.URI&&(m.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(m.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(m.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(m.forced=/yes/i.test(e.attributes.FORCED)),g[e.attributes.NAME]=m},discontinuity(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject;const{lastProgramDateTime:t}=this;this.lastProgramDateTime=new Date(e.dateTimeString).getTime(),null===t&&this.manifest.segments.reduceRight((e,t)=>(t.programDateTime=e-1e3*t.duration,t.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,I.call(this,this.manifest))},start(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){s.cueOut=e.data},"cue-out-cont"(){s.cueOutCont=e.data},"cue-in"(){s.cueIn=e.data},skip(){this.manifest.skip=C(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const t=this.manifest.segments.length,n=C(e.attributes);s.parts=s.parts||[],s.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=p),p=n.byterange.offset+n.byterange.length);const i=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${i} for segment #${t}`,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})})},"server-control"(){const t=this.manifest.serverControl=C(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),I.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const t=this.manifest.segments.length,n=C(e.attributes),i=n.type&&"PART"===n.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?p:0,i&&(p=n.byterange.offset+n.byterange.length)));const r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${r} for segment #${t}`,e.attributes,["TYPE","URI"]),n.type)for(let e=0;e<s.preloadHints.length-1;e++){const i=s.preloadHints[e];i.type&&(i.type===n.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${r} for segment #${t} has the same TYPE ${n.type} as preload hint #${e}`}))}},"rendition-report"(){const t=C(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);const n=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];a&&i.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${n}`,e.attributes,i)},"part-inf"(){this.manifest.partInf=C(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),I.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(C(e.attributes));const t=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${t}`,e.attributes,["ID","START-DATE"]);const n=this.manifest.dateRanges[t];n.endDate&&n.startDate&&new Date(n.endDate)<new Date(n.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),n.duration&&n.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),n.plannedDuration&&n.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const i=!!n.endOnNext;if(i&&!n.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),i&&(n.duration||n.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),n.duration&&n.endDate){const e=n.startDate,i=e.getTime()+1e3*n.duration;this.manifest.dateRanges[t].endDate=new Date(i)}if(f[n.id]){for(const t in f[n.id])if(n[t]&&JSON.stringify(f[n.id][t])!==JSON.stringify(n[t])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const e=this.manifest.dateRanges.findIndex(e=>e.id===n.id);this.manifest.dateRanges[e]=d(this.manifest.dateRanges[e],n),f[n.id]=d(f[n.id],n),this.manifest.dateRanges.pop()}else f[n.id]=n},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=C(e.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",e.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const t=(e,t)=>{e in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${e}`}):this.manifest.definitions[e]=t};if("QUERYPARAM"in e.attributes){if("NAME"in e.attributes||"IMPORT"in e.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});const n=this.params.get(e.attributes.QUERYPARAM);return n?void t(e.attributes.QUERYPARAM,decodeURIComponent(n)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${e.attributes.QUERYPARAM}`})}return"NAME"in e.attributes?"IMPORT"in e.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in e.attributes&&"string"===typeof e.attributes.VALUE?void t(e.attributes.NAME,e.attributes.VALUE):void this.trigger("error",{message:`EXT-X-DEFINE: No value for ${e.attributes.NAME}`}):"IMPORT"in e.attributes?this.mainDefinitions[e.attributes.IMPORT]?void t(e.attributes.IMPORT,this.mainDefinitions[e.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${e.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:e.attributes,uri:e.uri,timeline:c}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",e.attributes,["BANDWIDTH","URI"])}}[e.tagType]||o).call(t)},uri(){s.uri=e.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),r&&(s.key=r),s.timeline=c,i&&(s.map=i),p=0,null!==this.lastProgramDateTime&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*s.duration),s={}},comment(){},custom(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,n){const i=[];n.forEach(function(e){t.hasOwnProperty(e)||i.push(e)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var k={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},M=["video","audio","text"],D=["Video","Audio","Text"],R=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){var i=("00"+Number(t).toString(16)).slice(-2),r=("00"+Number(n).toString(16)).slice(-2);return"avc1."+i+"00"+r}):e},O=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach(function(e){var t;e=e.trim(),M.forEach(function(i){var r=k[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var s=e.substring(0,r[1].length),a=e.replace(s,"");n.push({type:s,details:a,mediaType:i})}}),t||n.push({type:e,details:"",mediaType:"unknown"})}),n},N=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return O(r.playlists[0].attributes.CODECS)}return null},L=function(e){return void 0===e&&(e=""),k.audio.test(e.trim().toLowerCase())},P=function(e){return void 0===e&&(e=""),k.text.test(e.trim().toLowerCase())},U=function(e){if(e&&"string"===typeof e){var t=e.toLowerCase().split(",").map(function(e){return R(e.trim())}),n="video";1===t.length&&L(t[0])?n="audio":1===t.length&&P(t[0])&&(n="application");var i="mp4";return t.every(function(e){return k.mp4.test(e)})?i="mp4":t.every(function(e){return k.webm.test(e)})?i="webm":t.every(function(e){return k.ogg.test(e)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},B=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),r().MediaSource&&r().MediaSource.isTypeSupported&&r().MediaSource.isTypeSupported(U(e))||t&&r().ManagedMediaSource&&r().ManagedMediaSource.isTypeSupported&&r().ManagedMediaSource.isTypeSupported(U(e))||!1},F=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<D.length;t++){var n=D[t];if(k["muxer"+n].test(e))return!0}return!1})},j="mp4a.40.2",V="avc1.4d400d",H=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,z=/^application\/dash\+xml/i,G=function(e){return H.test(e)?"hls":z.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},q=function(e){return e.toString(2).length},W=function(e){return Math.ceil(q(e)/8)},X=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},K=function(e){return X(e)},Y=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||K(e)||e instanceof ArrayBuffer||(e="number"!==typeof e||"number"===typeof e&&e!==e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},$=r().BigInt||Number,Q=[$("0x1"),$("0x100"),$("0x10000"),$("0x1000000"),$("0x100000000"),$("0x10000000000"),$("0x1000000000000"),$("0x100000000000000"),$("0x10000000000000000")],Z=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,s=n.le,a=void 0!==s&&s;e=Y(e);var o=a?"reduce":"reduceRight",l=e[o]?e[o]:Array.prototype[o],u=l.call(e,function(t,n,i){var r=a?i:Math.abs(i+1-e.length);return t+$(n)*Q[r]},$(0));if(r){var c=Q[e.length]/$(2)-$(1);u=$(u),u>c&&(u-=c,u-=c,u-=$(2))}return Number(u)}),J=function(e,t){var n=void 0===t?{}:t,i=n.le,r=void 0!==i&&i;("bigint"!==typeof e&&"number"!==typeof e||"number"===typeof e&&e!==e)&&(e=0),e=$(e);for(var s=W(e),a=new Uint8Array(new ArrayBuffer(s)),o=0;o<s;o++){var l=r?o:Math.abs(o+1-a.length);a[l]=Number(e/Q[o]&$(255)),e<0&&(a[l]=Math.abs(~a[l]),a[l]-=0===o?1:2)}return a},ee=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Y(e));try{return decodeURIComponent(escape(t))}catch(n){}return t},te=function(e,t){if("string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},ne=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return e&&(e.byteLength||e.length)&&"string"!==typeof e}),t.length<=1)return Y(t[0]);var i=t.reduce(function(e,t,n){return e+(t.byteLength||t.length)},0),r=new Uint8Array(i),s=0;return t.forEach(function(e){e=Y(e),r.set(e,s),s+=e.byteLength}),r},ie=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,s=void 0===r?0:r,a=i.mask,o=void 0===a?[]:a;e=Y(e),t=Y(t);var l=t.every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&l.call(t,function(t,n){var i=o[n]?o[n]&e[s+n]:e[s+n];return t===i})},re=function(e,t,n){t.forEach(function(t){for(var i in e.mediaGroups[t])for(var r in e.mediaGroups[t][i]){var s=e.mediaGroups[t][i][r];n(s,t,i,r)}})},se=n(7921);const ae=e=>!!e&&"object"===typeof e,oe=(...e)=>e.reduce((e,t)=>("object"!==typeof t||Object.keys(t).forEach(n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):ae(e[n])&&ae(t[n])?e[n]=oe(e[n],t[n]):e[n]=t[n]}),e),{}),le=e=>Object.keys(e).map(t=>e[t]),ue=(e,t)=>{const n=[];for(let i=e;i<t;i++)n.push(i);return n},ce=e=>e.reduce((e,t)=>e.concat(t),[]),de=e=>{if(!e.length)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t},he=(e,t)=>e.reduce((e,n,i)=>(n[t]&&e.push(i),e),[]),pe=(e,t)=>le(e.reduce((e,n)=>(n.forEach(n=>{e[t(n)]=n}),e),{}));var fe={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const ge=({baseUrl:e="",source:t="",range:n="",indexRange:i=""})=>{const s={uri:t,resolvedUri:f(e||"",t)};if(n||i){const e=n||i,t=e.split("-");let a,o=r().BigInt?r().BigInt(t[0]):parseInt(t[0],10),l=r().BigInt?r().BigInt(t[1]):parseInt(t[1],10);o<Number.MAX_SAFE_INTEGER&&"bigint"===typeof o&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&"bigint"===typeof l&&(l=Number(l)),a="bigint"===typeof l||"bigint"===typeof o?r().BigInt(l)-r().BigInt(o)+r().BigInt(1):l-o+1,"bigint"===typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),s.byterange={length:a,offset:o}}return s},me=e=>{let t;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?r().BigInt(e.offset)+r().BigInt(e.length)-r().BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`},ye=e=>(e&&"number"!==typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),ve={static(e){const{duration:t,timescale:n=1,sourceDuration:i,periodDuration:r}=e,s=ye(e.endNumber),a=t/n;return"number"===typeof s?{start:0,end:s}:"number"===typeof r?{start:0,end:r/a}:{start:0,end:i/a}},dynamic(e){const{NOW:t,clientOffset:n,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=e,u=ye(e.endNumber),c=(t+n)/1e3,d=i+a,h=c+o,p=h-d,f=Math.ceil(p*r/s),g=Math.floor((c-d-l)*r/s),m=Math.floor((c-d)*r/s);return{start:Math.max(0,g),end:"number"===typeof u?u:Math.min(f,m)}}},be=e=>t=>{const{duration:n,timescale:i=1,periodStart:r,startNumber:s=1}=e;return{number:s+t,duration:n/i,timeline:r,time:t*n}},Te=e=>{const{type:t,duration:n,timescale:i=1,periodDuration:r,sourceDuration:s}=e,{start:a,end:o}=ve[t](e),l=ue(a,o).map(be(e));if("static"===t){const e=l.length-1,t="number"===typeof r?r:s;l[e].duration=t-n/i*e}return l},_e=e=>{const{baseUrl:t,initialization:n={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:a,number:o=0,duration:l}=e;if(!t)throw new Error(fe.NO_BASE_URL);const u=ge({baseUrl:t,source:n.sourceURL,range:n.range}),c=ge({baseUrl:t,source:t,indexRange:r});if(c.map=u,l){const t=Te(e);t.length&&(c.duration=t[0].duration,c.timeline=t[0].timeline)}else i&&(c.duration=i,c.timeline=s);return c.presentationTime=a||s,c.number=o,[c]},we=(e,t,n)=>{const i=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter(e=>1!==e.referenceType),d=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline;let f,g=p,m=e.mediaSequence||0;f="bigint"===typeof t.firstOffset?r().BigInt(l)+t.firstOffset:l+t.firstOffset;for(let y=0;y<c.length;y++){const e=t.references[y],o=e.referencedSize,l=e.subsegmentDuration;let c;c="bigint"===typeof f?f+r().BigInt(o)-r().BigInt(1):f+o-1;const v=`${f}-${c}`,b={baseUrl:n,timescale:u,timeline:a,periodStart:p,presentationTime:g,number:m,duration:l,sourceDuration:s,indexRange:v,type:h},T=_e(b)[0];i&&(T.map=i),d.push(T),f+="bigint"===typeof f?r().BigInt(o):o,g+=l/u,m++}return e.segments=d,e},Se=["AUDIO","SUBTITLES"],Ee=1/60,Ae=e=>pe(e,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),Ce=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null},Ie=e=>{let t=[];return re(e,Se,(e,n,i,r)=>{t=t.concat(e.playlists||[])}),t},xe=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach((t,n)=>{t.number=e.mediaSequence+n})},ke=({oldPlaylists:e,newPlaylists:t,timelineStarts:n})=>{t.forEach(t=>{t.discontinuitySequence=n.findIndex(function({timeline:e}){return e===t.timeline});const i=Ce(e,t.attributes.NAME);if(!i)return;if(t.sidx)return;const r=t.segments[0],s=i.segments.findIndex(function(e){return Math.abs(e.presentationTime-r.presentationTime)<Ee});if(-1===s)return xe({playlist:t,mediaSequence:i.mediaSequence+i.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!i.segments.length&&t.timeline>i.timeline||i.segments.length&&t.timeline>i.segments[i.segments.length-1].timeline)&&t.discontinuitySequence--);const a=i.segments[s];a.discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),xe({playlist:t,mediaSequence:i.segments[s].number})})},Me=({oldManifest:e,newManifest:t})=>{const n=e.playlists.concat(Ie(e)),i=t.playlists.concat(Ie(t));return t.timelineStarts=Ae([e.timelineStarts,t.timelineStarts]),ke({oldPlaylists:n,newPlaylists:i,timelineStarts:t.timelineStarts}),t},De=e=>e&&e.uri+"-"+me(e.byterange),Re=e=>{const t=e.reduce(function(e,t){return e[t.attributes.baseUrl]||(e[t.attributes.baseUrl]=[]),e[t.attributes.baseUrl].push(t),e},{});let n=[];return Object.values(t).forEach(e=>{const t=le(e.reduce((e,t)=>{const n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[n].segments.push(...t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e},{}));n=n.concat(t)}),n.map(e=>(e.discontinuityStarts=he(e.segments||[],"discontinuity"),e))},Oe=(e,t)=>{const n=De(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&we(e,i,e.sidx.resolvedUri),e},Ne=(e,t={})=>{if(!Object.keys(t).length)return e;for(const n in e)e[n]=Oe(e[n],t);return e},Le=({attributes:e,segments:t,sidx:n,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},a)=>{const o={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,["PROGRAM-ID"]:1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:e.timelineStarts,mediaSequence:i,segments:t};return e.contentProtection&&(o.contentProtection=e.contentProtection),e.serviceLocation&&(o.attributes.serviceLocation=e.serviceLocation),n&&(o.sidx=n),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},Pe=({attributes:e,segments:t,mediaSequence:n,discontinuityStarts:i,discontinuitySequence:r})=>{"undefined"===typeof t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const s={NAME:e.id,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1};e.codecs&&(s.CODECS=e.codecs);const a={attributes:s,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:n,segments:t};return e.serviceLocation&&(a.attributes.serviceLocation=e.serviceLocation),a},Ue=(e,t={},n=!1)=>{let i;const r=e.reduce((e,r)=>{const s=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"";let o=r.attributes.label||"main";if(a&&!r.attributes.label){const e=s?` (${s})`:"";o=`${r.attributes.lang}${e}`}e[o]||(e[o]={language:a,autoselect:!0,default:"main"===s,playlists:[],uri:""});const l=Oe(Le(r,n),t);return e[o].playlists.push(l),"undefined"===typeof i&&"main"===s&&(i=r,i.default=!0),e},{});if(!i){const e=Object.keys(r)[0];r[e].default=!0}return r},Be=(e,t={})=>e.reduce((e,n)=>{const i=n.attributes.label||n.attributes.lang||"text",r=n.attributes.lang||"und";return e[i]||(e[i]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(Oe(Pe(n),t)),e},{}),Fe=e=>e.reduce((e,t)=>t?(t.forEach(t=>{const{channel:n,language:i}=t;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])}),e):e,{}),je=({attributes:e,segments:t,sidx:n,discontinuityStarts:i})=>{const r={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,discontinuityStarts:i,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(r.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(r.contentProtection=e.contentProtection),e.serviceLocation&&(r.attributes.serviceLocation=e.serviceLocation),n&&(r.sidx=n),r},Ve=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,He=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,ze=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,Ge=(e,t)=>{e.forEach(e=>{e.mediaSequence=0,e.discontinuitySequence=t.findIndex(function({timeline:t}){return t===e.timeline}),e.segments&&e.segments.forEach((e,t)=>{e.number=t})})},qe=e=>e?Object.keys(e).reduce((t,n)=>{const i=e[n];return t.concat(i.playlists)},[]):[],We=({dashPlaylists:e,locations:t,contentSteering:n,sidxMapping:i={},previousManifest:r,eventStream:s})=>{if(!e.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=e[0].attributes,c=Re(e.filter(Ve)).map(je),d=Re(e.filter(He)),h=Re(e.filter(ze)),p=e.map(e=>e.attributes.captionServices).filter(Boolean),f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:a,playlists:Ne(c,i)};u>=0&&(f.minimumUpdatePeriod=1e3*u),t&&(f.locations=t),n&&(f.contentSteering=n),"dynamic"===o&&(f.suggestedPresentationDelay=l),s&&s.length>0&&(f.eventStream=s);const g=0===f.playlists.length,m=d.length?Ue(d,i,g):null,y=h.length?Be(h,i):null,v=c.concat(qe(m),qe(y)),b=v.map(({timelineStarts:e})=>e);return f.timelineStarts=Ae(b),Ge(v,f.timelineStarts),m&&(f.mediaGroups.AUDIO.audio=m),y&&(f.mediaGroups.SUBTITLES.subs=y),p.length&&(f.mediaGroups["CLOSED-CAPTIONS"].cc=Fe(p)),r?Me({oldManifest:r,newManifest:f}):f},Xe=(e,t,n)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=e,u=(i+r)/1e3,c=s+o,d=u+l,h=d-c;return Math.ceil((h*a-t)/n)},Ke=(e,t)=>{const{type:n,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=e,u=[];let c=-1;for(let d=0;d<t.length;d++){const h=t[d],p=h.d,f=h.r||0,g=h.t||0;let m;if(c<0&&(c=g),g&&g>c&&(c=g),f<0){const o=d+1;m=o===t.length?"dynamic"===n&&i>0&&r.indexOf("$Number$")>0?Xe(e,c,p):(s*a-c)/p:(t[o].t-c)/p}else m=f+1;const y=o+u.length+m;let v=o+u.length;while(v<y)u.push({number:v,duration:p/a,time:c,timeline:l}),c+=p,v++}return u},Ye=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,$e=e=>(t,n,i,r)=>{if("$$"===t)return"$";if("undefined"===typeof e[n])return t;const s=""+e[n];return"RepresentationID"===n?s:(r=i?parseInt(r,10):1,s.length>=r?s:`${new Array(r-s.length+1).join("0")}${s}`)},Qe=(e,t)=>e.replace(Ye,$e(t)),Ze=(e,t)=>e.duration||t?e.duration?Te(e):Ke(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}],Je=(e,t)=>{const n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=e,r=ge({baseUrl:e.baseUrl,source:Qe(i.sourceURL,n),range:i.range}),s=Ze(e,t);return s.map(t=>{n.Number=t.number,n.Time=t.time;const i=Qe(e.media||"",n),s=e.timescale||1,a=e.presentationTimeOffset||0,o=e.periodStart+(t.time-a)/s,l={uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:f(e.baseUrl||"",i),map:r,number:t.number,presentationTime:o};return l})},et=(e,t)=>{const{baseUrl:n,initialization:i={}}=e,r=ge({baseUrl:n,source:i.sourceURL,range:i.range}),s=ge({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=r,s},tt=(e,t)=>{const{duration:n,segmentUrls:i=[],periodStart:r}=e;if(!n&&!t||n&&t)throw new Error(fe.SEGMENT_TIME_UNSPECIFIED);const s=i.map(t=>et(e,t));let a;n&&(a=Te(e)),t&&(a=Ke(e,t));const o=a.map((t,n)=>{if(s[n]){const i=s[n],a=e.timescale||1,o=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=r+(t.time-o)/a,i}}).filter(e=>e);return o},nt=({attributes:e,segmentInfo:t})=>{let n,i;t.template?(i=Je,n=oe(e,t.template)):t.base?(i=_e,n=oe(e,t.base)):t.list&&(i=tt,n=oe(e,t.list));const r={attributes:e};if(!i)return r;const s=i(n,t.segmentTimeline);if(n.duration){const{duration:e,timescale:t=1}=n;n.duration=e/t}else s.length?n.duration=s.reduce((e,t)=>Math.max(e,Math.ceil(t.duration)),0):n.duration=0;return r.attributes=n,r.segments=s,t.base&&n.indexRange&&(r.sidx=s[0],r.segments=[]),r},it=e=>e.map(nt),rt=(e,t)=>de(e.childNodes).filter(({tagName:e})=>e===t),st=e=>e.textContent.trim(),at=e=>parseFloat(e.split("/").reduce((e,t)=>e/t)),ot=e=>{const t=31536e3,n=2592e3,i=86400,r=3600,s=60,a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,o=a.exec(e);if(!o)return 0;const[l,u,c,d,h,p]=o.slice(1);return parseFloat(l||0)*t+parseFloat(u||0)*n+parseFloat(c||0)*i+parseFloat(d||0)*r+parseFloat(h||0)*s+parseFloat(p||0)},lt=e=>{const t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},ut={mediaPresentationDuration(e){return ot(e)},availabilityStartTime(e){return lt(e)/1e3},minimumUpdatePeriod(e){return ot(e)},suggestedPresentationDelay(e){return ot(e)},type(e){return e},timeShiftBufferDepth(e){return ot(e)},start(e){return ot(e)},width(e){return parseInt(e,10)},height(e){return parseInt(e,10)},bandwidth(e){return parseInt(e,10)},frameRate(e){return at(e)},startNumber(e){return parseInt(e,10)},timescale(e){return parseInt(e,10)},presentationTimeOffset(e){return parseInt(e,10)},duration(e){const t=parseInt(e,10);return isNaN(t)?ot(e):t},d(e){return parseInt(e,10)},t(e){return parseInt(e,10)},r(e){return parseInt(e,10)},presentationTime(e){return parseInt(e,10)},DEFAULT(e){return e}},ct=e=>e&&e.attributes?de(e.attributes).reduce((e,t)=>{const n=ut[t.name]||ut.DEFAULT;return e[t.name]=n(t.value),e},{}):{},dt={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},ht=(e,t)=>t.length?ce(e.map(function(e){return t.map(function(t){const n=st(t),i=f(e.baseUrl,n),r=oe(ct(t),{baseUrl:i});return i!==n&&!r.serviceLocation&&e.serviceLocation&&(r.serviceLocation=e.serviceLocation),r})})):e,pt=e=>{const t=rt(e,"SegmentTemplate")[0],n=rt(e,"SegmentList")[0],i=n&&rt(n,"SegmentURL").map(e=>oe({tag:"SegmentURL"},ct(e))),r=rt(e,"SegmentBase")[0],s=n||t,a=s&&rt(s,"SegmentTimeline")[0],o=n||r||t,l=o&&rt(o,"Initialization")[0],u=t&&ct(t);u&&l?u.initialization=l&&ct(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&rt(a,"S").map(e=>ct(e)),list:n&&oe(ct(n),{segmentUrls:i,initialization:ct(l)}),base:r&&oe(ct(r),{initialization:ct(l)})};return Object.keys(c).forEach(e=>{c[e]||delete c[e]}),c},ft=(e,t,n)=>i=>{const r=rt(i,"BaseURL"),s=ht(t,r),a=oe(e,ct(i)),o=pt(i);return s.map(e=>({segmentInfo:oe(n,o),attributes:oe(a,e)}))},gt=e=>e.reduce((e,t)=>{const n=ct(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const i=dt[n.schemeIdUri];if(i){e[i]={attributes:n};const r=rt(t,"cenc:pssh")[0];if(r){const t=st(r);e[i].pssh=t&&y(t)}}return e},{}),mt=e=>{if("urn:scte:dash:cc:cea-608:2015"===e.schemeIdUri){const t="string"!==typeof e.value?[]:e.value.split(";");return t.map(e=>{let t,n;return n=e,/^CC\d=/.test(e)?[t,n]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:n}})}if("urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri){const t="string"!==typeof e.value?[]:e.value.split(";");return t.map(e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[n,i=""]=e.split("=");t.channel=n,t.language=e,i.split(",").forEach(e=>{const[n,i]=e.split(":");"lang"===n?t.language=i:"er"===n?t.easyReader=Number(i):"war"===n?t.aspectRatio=Number(i):"3D"===n&&(t["3D"]=Number(i))})}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})}},yt=e=>ce(rt(e.node,"EventStream").map(t=>{const n=ct(t),i=n.schemeIdUri;return rt(t,"Event").map(t=>{const r=ct(t),s=r.presentationTime||0,a=n.timescale||1,o=r.duration||0,l=s/a+e.attributes.start;return{schemeIdUri:i,value:n.value,id:r.id,start:l,end:l+o/a,messageData:st(t)||r.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),vt=(e,t,n)=>i=>{const r=ct(i),s=ht(t,rt(i,"BaseURL")),a=rt(i,"Role")[0],o={role:ct(a)};let l=oe(e,r,o);const u=rt(i,"Accessibility")[0],c=mt(ct(u));c&&(l=oe(l,{captionServices:c}));const d=rt(i,"Label")[0];if(d&&d.childNodes.length){const e=d.childNodes[0].nodeValue.trim();l=oe(l,{label:e})}const h=gt(rt(i,"ContentProtection"));Object.keys(h).length&&(l=oe(l,{contentProtection:h}));const p=pt(i),f=rt(i,"Representation"),g=oe(n,p);return ce(f.map(ft(l,s,g)))},bt=(e,t)=>(n,i)=>{const r=ht(t,rt(n.node,"BaseURL")),s=oe(e,{periodStart:n.attributes.start});"number"===typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);const a=rt(n.node,"AdaptationSet"),o=pt(n.node);return ce(a.map(vt(s,r,o)))},Tt=(e,t)=>{if(e.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!e.length)return null;const n=oe({serverURL:st(e[0])},ct(e[0]));return n.queryBeforeStart="true"===n.queryBeforeStart,n},_t=({attributes:e,priorPeriodAttributes:t,mpdType:n})=>"number"===typeof e.start?e.start:t&&"number"===typeof t.start&&"number"===typeof t.duration?t.start+t.duration:t||"static"!==n?null:0,wt=(e,t={})=>{const{manifestUri:n="",NOW:i=Date.now(),clientOffset:r=0,eventHandler:s=function(){}}=t,a=rt(e,"Period");if(!a.length)throw new Error(fe.INVALID_NUMBER_OF_PERIOD);const o=rt(e,"Location"),l=ct(e),u=ht([{baseUrl:n}],rt(e,"BaseURL")),c=rt(e,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=r,o.length&&(l.locations=o.map(st));const d=[];return a.forEach((e,t)=>{const n=ct(e),i=d[t-1];n.start=_t({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:l.type}),d.push({node:e,attributes:n})}),{locations:l.locations,contentSteeringInfo:Tt(c,s),representationInfo:ce(d.map(bt(l,u))),eventStream:ce(d.map(yt))}},St=e=>{if(""===e)throw new Error(fe.DASH_EMPTY_MANIFEST);const t=new se.DOMParser;let n,i;try{n=t.parseFromString(e,"application/xml"),i=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(r){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(fe.DASH_INVALID_XML);return i},Et=e=>{const t=rt(e,"UTCTiming")[0];if(!t)return null;const n=ct(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(fe.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},At=(e,t={})=>{const n=wt(St(e),t),i=it(n.representationInfo);return We({dashPlaylists:i,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})},Ct=e=>Et(St(e));var It,xt=n(1779),kt=n.n(xt),Mt=Y([73,68,51]),Dt=function(e,t){void 0===t&&(t=0),e=Y(e);var n=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(16&n)>>4;return r?i+20:i+10},Rt=function e(t,n){return void 0===n&&(n=0),t=Y(t),t.length-n<10||!ie(t,Mt,{offset:n})?n:(n+=Dt(t,n),e(t,n))},Ot=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"===typeof e?te(e):e}),Nt=function(e){return Array.isArray(e)?e.map(function(e){return Ot(e)}):[Ot(e)]},Lt=function(e){e=Y(e);var t=[],n=0;while(e.length>n){var i=e[n],r=0,s=0;s++;var a=e[s];s++;while(128&a)r=(127&a)<<7,a=e[s],s++;r+=127&a;for(var o=0;o<It.length;o++){var l=It[o],u=l.id,c=l.parser;if(i===u){t.push(c(e.subarray(s,s+r)));break}}n+=r+s}return t};It=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=ee(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=Lt(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Lt(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Pt=function e(t,n,i){void 0===i&&(i=!1),n=Nt(n),t=Y(t);var r=[];if(!n.length)return r;var s=0;while(s<t.length){var a=(t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3])>>>0,o=t.subarray(s+4,s+8);if(0===a)break;var l=s+a;if(l>t.length){if(i)break;l=t.length}var u=t.subarray(s+8,l);ie(o,n[0])&&(1===n.length?r.push(u):r.push.apply(r,e(u,n.slice(1),i))),s=l}return r},Ut={EBML:Y([26,69,223,163]),DocType:Y([66,130]),Segment:Y([24,83,128,103]),SegmentInfo:Y([21,73,169,102]),Tracks:Y([22,84,174,107]),Track:Y([174]),TrackNumber:Y([215]),DefaultDuration:Y([35,227,131]),TrackEntry:Y([174]),TrackType:Y([131]),FlagDefault:Y([136]),CodecID:Y([134]),CodecPrivate:Y([99,162]),VideoTrack:Y([224]),AudioTrack:Y([225]),Cluster:Y([31,67,182,117]),Timestamp:Y([231]),TimestampScale:Y([42,215,177]),BlockGroup:Y([160]),BlockDuration:Y([155]),Block:Y([161]),SimpleBlock:Y([163])},Bt=[128,64,32,16,8,4,2,1],Ft=function(e){for(var t=1,n=0;n<Bt.length;n++){if(e&Bt[n])break;t++}return t},jt=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=Ft(e[t]),s=e.subarray(t,t+r);return n&&(s=Array.prototype.slice.call(e,t,t+r),s[0]^=Bt[r-1]),{length:r,value:Z(s,{signed:i}),bytes:s}},Vt=function e(t){return"string"===typeof t?t.match(/.{1,2}/g).map(function(t){return e(t)}):"number"===typeof t?J(t):t},Ht=function(e){return Array.isArray(e)?e.map(function(e){return Vt(e)}):[Vt(e)]},zt=function e(t,n,i){if(i>=n.length)return n.length;var r=jt(n,i,!1);if(ie(t.bytes,r.bytes))return i;var s=jt(n,i+r.length);return e(t,n,i+s.length+s.value+r.length)},Gt=function e(t,n){n=Ht(n),t=Y(t);var i=[];if(!n.length)return i;var r=0;while(r<t.length){var s=jt(t,r,!1),a=jt(t,r+s.length),o=r+s.length+a.length;127===a.value&&(a.value=zt(s,t,o),a.value!==t.length&&(a.value-=o));var l=o+a.value>t.length?t.length:o+a.value,u=t.subarray(o,l);ie(n[0],s.bytes)&&(1===n.length?i.push(u):i=i.concat(e(u,n.slice(1))));var c=s.length+a.length+u.length;r+=c}return i},qt=Y([0,0,0,1]),Wt=Y([0,0,1]),Xt=Y([0,0,3]),Kt=function(e){var t=[],n=1;while(n<e.length-2)ie(e.subarray(n,n+3),Xt)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===t[0]&&(s++,t.shift()),r[n]=e[s];return r},Yt=function(e,t,n,i){void 0===i&&(i=1/0),e=Y(e),n=[].concat(n);var r,s=0,a=0;while(s<e.length&&(a<i||r)){var o=void 0;if(ie(e.subarray(s),qt)?o=4:ie(e.subarray(s),Wt)&&(o=3),o){if(a++,r)return Kt(e.subarray(r,s));var l=void 0;"h264"===t?l=31&e[s+o]:"h265"===t&&(l=e[s+o]>>1&63),-1!==n.indexOf(l)&&(r=s+o),s+=o+("h264"===t?1:2)}else s++}return e.subarray(0,0)},$t=function(e,t,n){return Yt(e,"h264",t,n)},Qt=function(e,t,n){return Yt(e,"h265",t,n)},Zt={webm:Y([119,101,98,109]),matroska:Y([109,97,116,114,111,115,107,97]),flac:Y([102,76,97,67]),ogg:Y([79,103,103,83]),ac3:Y([11,119]),riff:Y([82,73,70,70]),avi:Y([65,86,73]),wav:Y([87,65,86,69]),"3gp":Y([102,116,121,112,51,103]),mp4:Y([102,116,121,112]),fmp4:Y([115,116,121,112]),mov:Y([102,116,121,112,113,116]),moov:Y([109,111,111,118]),moof:Y([109,111,111,102])},Jt={aac:function(e){var t=Rt(e);return ie(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Rt(e);return ie(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Gt(e,[Ut.EBML,Ut.DocType])[0];return ie(t,Zt.webm)},mkv:function(e){var t=Gt(e,[Ut.EBML,Ut.DocType])[0];return ie(t,Zt.matroska)},mp4:function(e){return!Jt["3gp"](e)&&!Jt.mov(e)&&(!(!ie(e,Zt.mp4,{offset:4})&&!ie(e,Zt.fmp4,{offset:4}))||(!(!ie(e,Zt.moof,{offset:4})&&!ie(e,Zt.moov,{offset:4}))||void 0))},mov:function(e){return ie(e,Zt.mov,{offset:4})},"3gp":function(e){return ie(e,Zt["3gp"],{offset:4})},ac3:function(e){var t=Rt(e);return ie(e,Zt.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];var t=0;while(t+188<e.length&&t<188){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Rt(e);return ie(e,Zt.flac,{offset:t})},ogg:function(e){return ie(e,Zt.ogg)},avi:function(e){return ie(e,Zt.riff)&&ie(e,Zt.avi,{offset:8})},wav:function(e){return ie(e,Zt.riff)&&ie(e,Zt.wav,{offset:8})},h264:function(e){return $t(e,7,3).length},h265:function(e){return Qt(e,[32,33],3).length}},en=Object.keys(Jt).filter(function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e}).concat(["ts","h264","h265"]);en.forEach(function(e){var t=Jt[e];Jt[e]=function(e){return t(Y(e))}});var tn=Jt,nn=function(e){e=Y(e);for(var t=0;t<en.length;t++){var n=en[t];if(tn[n](e))return n}return""},rn=function(e){return Pt(e,["moof"]).length>0},sn=n(3909),an="8.23.3";const on={},ln=function(e,t){return on[e]=on[e]||[],t&&(on[e]=on[e].concat(t)),on[e]},un=function(e,t){ln(e,t)},cn=function(e,t){const n=ln(e).indexOf(t);return!(n<=-1)&&(on[e]=on[e].slice(),on[e].splice(n,1),!0)},dn=function(e,t){ln(e,[].concat(t).map(t=>{const n=(...i)=>(cn(e,n),t(...i));return n}))},hn={prefixed:!0},pn=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],fn=pn[0];let gn;for(let Up=0;Up<pn.length;Up++)if(pn[Up][1]in a()){gn=pn[Up];break}if(gn){for(let e=0;e<gn.length;e++)hn[fn[e]]=gn[e];hn.prefixed=gn[0]!==fn[0]}let mn=[];const yn=(e,t,n)=>(i,s,a)=>{const o=t.levels[s],l=new RegExp(`^(${o})$`);let u=e;if("log"!==i&&a.unshift(i.toUpperCase()+":"),n&&(u=`%c${e}`,a.unshift(n)),a.unshift(u+":"),mn){mn.push([].concat(a));const e=mn.length-1e3;mn.splice(0,e>0?e:0)}if(!r().console)return;let c=r().console[i];c||"debug"!==i||(c=r().console.info||r().console.log),c&&o&&l.test(i)&&c[Array.isArray(a)?"apply":"call"](r().console,a)};function vn(e,t=":",n=""){let i,r="info";function s(...e){i("log",r,e)}return i=yn(e,s,n),s.createLogger=(i,r,s)=>{const a=void 0!==r?r:t,o=void 0!==s?s:n,l=`${e} ${a} ${i}`;return vn(l,a,o)},s.createNewLogger=(e,t,n)=>vn(e,t,n),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},s.level=e=>{if("string"===typeof e){if(!s.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);r=e}return r},s.history=()=>mn?[].concat(mn):[],s.history.filter=e=>(mn||[]).filter(t=>new RegExp(`.*${e}.*`).test(t[0])),s.history.clear=()=>{mn&&(mn.length=0)},s.history.disable=()=>{null!==mn&&(mn.length=0,mn=null)},s.history.enable=()=>{null===mn&&(mn=[])},s.error=(...e)=>i("error",r,e),s.warn=(...e)=>i("warn",r,e),s.debug=(...e)=>i("debug",r,e),s}const bn=vn("VIDEOJS"),Tn=bn.createLogger,_n=Object.prototype.toString,wn=function(e){return An(e)?Object.keys(e):[]};function Sn(e,t){wn(e).forEach(n=>t(e[n],n))}function En(e,t,n=0){return wn(e).reduce((n,i)=>t(n,e[i],i),n)}function An(e){return!!e&&"object"===typeof e}function Cn(e){return An(e)&&"[object Object]"===_n.call(e)&&e.constructor===Object}function In(...e){const t={};return e.forEach(e=>{e&&Sn(e,(e,n)=>{Cn(e)?(Cn(t[n])||(t[n]={}),t[n]=In(t[n],e)):t[n]=e})}),t}function xn(e={}){const t=[];for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t.push(i)}return t}function kn(e,t,n,i=!0){const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const e=n();return r(e),e}};return i&&(s.set=r),Object.defineProperty(e,t,s)}var Mn=Object.freeze({__proto__:null,each:Sn,reduce:En,isObject:An,isPlain:Cn,merge:In,values:xn,defineLazyProperty:kn});let Dn,Rn=!1,On=null,Nn=!1,Ln=!1,Pn=!1,Un=!1,Bn=!1,Fn=null,jn=null;const Vn=Boolean(r().cast&&r().cast.framework&&r().cast.framework.CastReceiverContext);let Hn=null,zn=!1,Gn=!1,qn=!1,Wn=!1,Xn=!1,Kn=!1,Yn=!1;const $n=Boolean(ii()&&("ontouchstart"in r()||r().navigator.maxTouchPoints||r().DocumentTouch&&r().document instanceof r().DocumentTouch)),Qn=r().navigator&&r().navigator.userAgentData;if(Qn&&Qn.platform&&Qn.brands&&(Nn="Android"===Qn.platform,Pn=Boolean(Qn.brands.find(e=>"Microsoft Edge"===e.brand)),Un=Boolean(Qn.brands.find(e=>"Chromium"===e.brand)),Bn=!Pn&&Un,Fn=jn=(Qn.brands.find(e=>"Chromium"===e.brand)||{}).version||null,Gn="Windows"===Qn.platform),!Un){const e=r().navigator&&r().navigator.userAgent||"";Rn=/iPod/i.test(e),On=function(){const t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Nn=/Android/i.test(e),Dn=function(){const t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const n=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return n&&i?parseFloat(t[1]+"."+t[2]):n||null}(),Ln=/Firefox/i.test(e),Pn=/Edg/i.test(e),Un=/Chrome/i.test(e)||/CriOS/i.test(e),Bn=!Pn&&Un,Fn=jn=function(){const t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Hn=function(){const t=/MSIE\s(\d+)\.\d/.exec(e);let n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(n=11),n}(),Xn=/Tizen/i.test(e),Kn=/Web0S/i.test(e),Yn=Xn||Kn,zn=/Safari/i.test(e)&&!Bn&&!Nn&&!Pn&&!Yn,Gn=/Windows/i.test(e),qn=/iPad/i.test(e)||zn&&$n&&!/iPhone/i.test(e),Wn=/iPhone/i.test(e)&&!qn}const Zn=Wn||qn||Rn,Jn=(zn||Zn)&&!Bn;var ei=Object.freeze({__proto__:null,get IS_IPOD(){return Rn},get IOS_VERSION(){return On},get IS_ANDROID(){return Nn},get ANDROID_VERSION(){return Dn},get IS_FIREFOX(){return Ln},get IS_EDGE(){return Pn},get IS_CHROMIUM(){return Un},get IS_CHROME(){return Bn},get CHROMIUM_VERSION(){return Fn},get CHROME_VERSION(){return jn},IS_CHROMECAST_RECEIVER:Vn,get IE_VERSION(){return Hn},get IS_SAFARI(){return zn},get IS_WINDOWS(){return Gn},get IS_IPAD(){return qn},get IS_IPHONE(){return Wn},get IS_TIZEN(){return Xn},get IS_WEBOS(){return Kn},get IS_SMART_TV(){return Yn},TOUCH_ENABLED:$n,IS_IOS:Zn,IS_ANY_SAFARI:Jn});function ti(e){return"string"===typeof e&&Boolean(e.trim())}function ni(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ii(){return a()===r().document}function ri(e){return An(e)&&1===e.nodeType}function si(){try{return r().parent!==r().self}catch(e){return!0}}function ai(e){return function(t,n){if(!ti(t))return a()[e](null);ti(n)&&(n=a().querySelector(n));const i=ri(n)?n:a();return i[e]&&i[e](t)}}function oi(e="div",t={},n={},i){const r=a().createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){const n=t[e];"textContent"===e?li(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)}),Object.getOwnPropertyNames(n).forEach(function(e){r.setAttribute(e,n[e])}),i&&Ii(r,i),r}function li(e,t){return"undefined"===typeof e.textContent?e.innerText=t:e.textContent=t,e}function ui(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function ci(e,t){return ni(t),e.classList.contains(t)}function di(e,...t){return e.classList.add(...t.reduce((e,t)=>e.concat(t.split(/\s+/)),[])),e}function hi(e,...t){return e?(e.classList.remove(...t.reduce((e,t)=>e.concat(t.split(/\s+/)),[])),e):(bn.warn("removeClass was called with an element that doesn't exist"),null)}function pi(e,t,n){return"function"===typeof n&&(n=n(e,t)),"boolean"!==typeof n&&(n=void 0),t.split(/\s+/).forEach(t=>e.classList.toggle(t,n)),e}function fi(e,t){Object.getOwnPropertyNames(t).forEach(function(n){const i=t[n];null===i||"undefined"===typeof i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)})}function gi(e){const t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e&&e.attributes&&e.attributes.length>0){const i=e.attributes;for(let e=i.length-1;e>=0;e--){const r=i[e].name;let s=i[e].value;n.includes(r)&&(s=null!==s),t[r]=s}}return t}function mi(e,t){return e.getAttribute(t)}function yi(e,t,n){e.setAttribute(t,n)}function vi(e,t){e.removeAttribute(t)}function bi(){a().body.focus(),a().onselectstart=function(){return!1}}function Ti(){a().onselectstart=function(){return!0}}function _i(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(e=>{void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(Ri(e,"height"))),n.width||(n.width=parseFloat(Ri(e,"width"))),n}}function wi(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,n=e.offsetHeight;let i=0,r=0;while(e.offsetParent&&e!==a()[hn.fullscreenElement])i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function Si(e,t){const n={x:0,y:0};if(Zn){let t=e;while(t&&"html"!==t.nodeName.toLowerCase()){const e=Ri(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);n.x+=t[12],n.y+=t[13]}if(t.assignedSlot&&t.assignedSlot.parentElement&&r().WebKitCSSMatrix){const e=r().getComputedStyle(t.assignedSlot.parentElement).transform,i=new(r().WebKitCSSMatrix)(e);n.x+=i.m41,n.y+=i.m42}t=t.parentNode||t.host}}const i={},s=wi(t.target),a=wi(e),o=a.width,l=a.height;let u=t.offsetY-(a.top-s.top),c=t.offsetX-(a.left-s.left);return t.changedTouches&&(c=t.changedTouches[0].pageX-a.left,u=t.changedTouches[0].pageY+a.top,Zn&&(c-=n.x,u-=n.y)),i.y=1-Math.max(0,Math.min(1,u/l)),i.x=Math.max(0,Math.min(1,c/o)),i}function Ei(e){return An(e)&&3===e.nodeType}function Ai(e){while(e.firstChild)e.removeChild(e.firstChild);return e}function Ci(e){return"function"===typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(e=>("function"===typeof e&&(e=e()),ri(e)||Ei(e)?e:"string"===typeof e&&/\S/.test(e)?a().createTextNode(e):void 0)).filter(e=>e)}function Ii(e,t){return Ci(t).forEach(t=>e.appendChild(t)),e}function xi(e,t){return Ii(Ai(e),t)}function ki(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||("mousedown"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons)))}const Mi=ai("querySelector"),Di=ai("querySelectorAll");function Ri(e,t){if(!e||!t)return"";if("function"===typeof r().getComputedStyle){let i;try{i=r().getComputedStyle(e)}catch(n){return""}return i?i.getPropertyValue(t)||i[t]:""}return""}function Oi(e){[...a().styleSheets].forEach(t=>{try{const n=[...t.cssRules].map(e=>e.cssText).join(""),i=a().createElement("style");i.textContent=n,e.document.head.appendChild(i)}catch(n){const i=a().createElement("link");i.rel="stylesheet",i.type=t.type,i.media=t.media.mediaText,i.href=t.href,e.document.head.appendChild(i)}})}var Ni=Object.freeze({__proto__:null,isReal:ii,isEl:ri,isInFrame:si,createEl:oi,textContent:li,prependTo:ui,hasClass:ci,addClass:di,removeClass:hi,toggleClass:pi,setAttributes:fi,getAttributes:gi,getAttribute:mi,setAttribute:yi,removeAttribute:vi,blockTextSelection:bi,unblockTextSelection:Ti,getBoundingClientRect:_i,findPosition:wi,getPointerPosition:Si,isTextNode:Ei,emptyEl:Ai,normalizeContent:Ci,appendContent:Ii,insertContent:xi,isSingleLeftClick:ki,$:Mi,$$:Di,computedStyle:Ri,copyStyleSheetsToWindow:Oi});let Li,Pi=!1;const Ui=function(){if(!1===Li.options.autoSetup)return;const e=Array.prototype.slice.call(a().getElementsByTagName("video")),t=Array.prototype.slice.call(a().getElementsByTagName("audio")),n=Array.prototype.slice.call(a().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const e=i[r];if(!e||!e.getAttribute){Bi(1);break}if(void 0===e.player){const t=e.getAttribute("data-setup");null!==t&&Li(e)}}else Pi||Bi(1)};function Bi(e,t){ii()&&(t&&(Li=t),r().setTimeout(Ui,e))}function Fi(){Pi=!0,r().removeEventListener("load",Fi)}ii()&&("complete"===a().readyState?Fi():r().addEventListener("load",Fi));const ji=function(e){const t=a().createElement("style");return t.className=e,t},Vi=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var Hi=new WeakMap;const zi=3;let Gi,qi=zi;function Wi(){return qi++}function Xi(e,t){if(!Hi.has(e))return;const n=Hi.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Hi.delete(e)}function Ki(e,t,n,i){n.forEach(function(n){e(t,n,i)})}function Yi(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const i=e||r().event;e={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const t in i)s.includes(t)||"returnValue"===t&&i.preventDefault||(e[t]=i[t]);if(e.target||(e.target=e.srcElement||a()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){const t=a().documentElement,n=a().body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const $i=function(){if("boolean"!==typeof Gi){Gi=!1;try{const e=Object.defineProperty({},"passive",{get(){Gi=!0}});r().addEventListener("test",null,e),r().removeEventListener("test",null,e)}catch(e){}}return Gi},Qi=["touchstart","touchmove"];function Zi(e,t,n){if(Array.isArray(t))return Ki(Zi,e,t,n);Hi.has(e)||Hi.set(e,{});const i=Hi.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=Wi()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(i.disabled)return;t=Yi(t);const r=i.handlers[t.type];if(r){const i=r.slice(0);for(let r=0,a=i.length;r<a;r++){if(t.isImmediatePropagationStopped())break;try{i[r].call(e,t,n)}catch(s){bn.error(s)}}}}),1===i.handlers[t].length)if(e.addEventListener){let n=!1;$i()&&Qi.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,i.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function Ji(e,t,n){if(!Hi.has(e))return;const i=Hi.get(e);if(!i.handlers)return;if(Array.isArray(t))return Ki(Ji,e,t,n);const r=function(e,t){i.handlers[t]=[],Xi(e,t)};if(void 0===t){for(const t in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},t)&&r(e,t);return}const s=i.handlers[t];if(s)if(n){if(n.guid)for(let e=0;e<s.length;e++)s[e].guid===n.guid&&s.splice(e--,1);Xi(e,t)}else r(e,t)}function er(e,t,n){const i=Hi.has(e)?Hi.get(e):{},r=e.parentNode||e.ownerDocument;if("string"===typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Yi(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)er.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){Hi.has(t.target)||Hi.set(t.target,{});const e=Hi.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"===typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function tr(e,t,n){if(Array.isArray(t))return Ki(tr,e,t,n);const i=function(){Ji(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Wi(),Zi(e,t,i)}function nr(e,t,n){const i=function(){Ji(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Wi(),Zi(e,t,i)}var ir=Object.freeze({__proto__:null,fixEvent:Yi,on:Zi,off:Ji,trigger:er,one:tr,any:nr});const rr=30,sr=function(e,t,n){t.guid||(t.guid=Wi());const i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},ar=function(e,t){let n=r().performance.now();const i=function(...i){const s=r().performance.now();s-n>=t&&(e(...i),n=s)};return i},or=function(e,t,n,i=r()){let s;const a=()=>{i.clearTimeout(s),s=null},o=function(){const r=this,a=arguments;let o=function(){s=null,o=null,n||e.apply(r,a)};!s&&n&&e.apply(r,a),i.clearTimeout(s),s=i.setTimeout(o,t)};return o.cancel=a,o};var lr=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:rr,bind_:sr,throttle:ar,debounce:or});let ur;class cr{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Zi(this,e,t),this.addEventListener=n}off(e,t){Ji(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},tr(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},nr(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;"string"===typeof e&&(e={type:t}),e=Yi(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),er(this,e)}queueTrigger(e){ur||(ur=new Map);const t=e.type||e;let n=ur.get(this);n||(n=new Map,ur.set(this,n));const i=n.get(t);n.delete(t),r().clearTimeout(i);const s=r().setTimeout(()=>{n.delete(t),0===n.size&&(n=null,ur.delete(this)),this.trigger(e)},0);n.set(t,s)}}cr.prototype.allowedEvents_={},cr.prototype.addEventListener=cr.prototype.on,cr.prototype.removeEventListener=cr.prototype.off,cr.prototype.dispatchEvent=cr.prototype.trigger;const dr=e=>"function"===typeof e.name?e.name():"string"===typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,hr=e=>e instanceof cr||!!e.eventBusEl_&&["on","one","off","trigger"].every(t=>"function"===typeof e[t]),pr=(e,t)=>{hr(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},fr=e=>"string"===typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,gr=(e,t,n)=>{if(!e||!e.nodeName&&!hr(e))throw new Error(`Invalid target for ${dr(t)}#${n}; must be a DOM node or evented object.`)},mr=(e,t,n)=>{if(!fr(e))throw new Error(`Invalid event type for ${dr(t)}#${n}; must be a non-empty string or array.`)},yr=(e,t,n)=>{if("function"!==typeof e)throw new Error(`Invalid listener for ${dr(t)}#${n}; must be a function.`)},vr=(e,t,n)=>{const i=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let r,s,a;return i?(r=e.eventBusEl_,t.length>=3&&t.shift(),[s,a]=t):(r=t[0],s=t[1],a=t[2]),gr(r,e,n),mr(s,e,n),yr(a,e,n),a=sr(e,a),{isTargetingSelf:i,target:r,type:s,listener:a}},br=(e,t,n,i)=>{gr(e,e,t),e.nodeName?ir[t](e,n,i):e[t](n,i)},Tr={on(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=vr(this,e,"on");if(br(n,"on",i,r),!t){const e=()=>this.off(n,i,r);e.guid=r.guid;const t=()=>this.off("dispose",e);t.guid=r.guid,br(this,"on","dispose",e),br(n,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=vr(this,e,"one");if(t)br(n,"one",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,br(n,"one",i,e)}},any(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=vr(this,e,"any");if(t)br(n,"any",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,br(n,"any",i,e)}},off(e,t,n){if(!e||fr(e))Ji(this.eventBusEl_,e,t);else{const i=e,r=t;gr(i,this,"off"),mr(r,this,"off"),yr(n,this,"off"),n=sr(this,n),this.off("dispose",n),i.nodeName?(Ji(i,r,n),Ji(i,"dispose",n)):hr(i)&&(i.off(r,n),i.off("dispose",n))}},trigger(e,t){gr(this.eventBusEl_,this,"trigger");const n=e&&"string"!==typeof e?e.type:e;if(!fr(n))throw new Error(`Invalid event type for ${dr(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return er(this.eventBusEl_,e,t)}};function _r(e,t={}){const{eventBusKey:n}=t;if(n){if(!e[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);e.eventBusEl_=e[n]}else e.eventBusEl_=oi("span",{className:"vjs-event-bus"});return Object.assign(e,Tr),e.eventedCallbacks&&e.eventedCallbacks.forEach(e=>{e()}),e.on("dispose",()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&Hi.has(e)&&Hi.delete(e)}),r().setTimeout(()=>{e.eventBusEl_=null},0)}),e}const wr={state:{},setState(e){let t;return"function"===typeof e&&(e=e()),Sn(e,(e,n)=>{this.state[n]!==e&&(t=t||{},t[n]={from:this.state[n],to:e}),this.state[n]=e}),t&&hr(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Sr(e,t){return Object.assign(e,wr),e.state=Object.assign({},e.state,t),"function"===typeof e.handleStateChanged&&hr(e)&&e.on("statechanged",e.handleStateChanged),e}const Er=function(e){return"string"!==typeof e?e:e.replace(/./,e=>e.toLowerCase())},Ar=function(e){return"string"!==typeof e?e:e.replace(/./,e=>e.toUpperCase())},Cr=function(e,t){return Ar(e)===Ar(t)};var Ir=Object.freeze({__proto__:null,toLowerCase:Er,toTitleCase:Ar,titleCaseEquals:Cr});class xr{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=In({},this.options_),t=this.options_=In(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${Wi()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(e=>this.addClass(e)),["on","off","one","any","trigger"].forEach(e=>{this[e]=void 0}),!1!==t.evented&&(_r(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Sr(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=In(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return oi(e,t,n)}localize(e,t,n=e){const i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[i],a=i&&i.split("-")[0],o=r&&r[a];let l=n;return s&&s[e]?l=s[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,n){const i=t[n-1];let r=i;return"undefined"===typeof i&&(r=e),r})),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((e,t)=>e.concat(t),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",i=oi("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=a().createElementNS(n,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const s=a().createElementNS(n,"use");return r.appendChild(s),s.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(r),this.iconIsSet_?t.replaceChild(i,t.querySelector(".vjs-icon-placeholder")):t.appendChild(i),this.iconIsSet_=!0,i}addChild(e,t={},n=this.children_.length){let i,r;if("string"===typeof e){r=Ar(e);const n=t.componentClass||r;t.name=r;const s=xr.getComponent(n);if(!s)throw new Error(`Component ${n} does not exist`);if("function"!==typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"===typeof i.id&&(this.childIndex_[i.id()]=i),r=r||i.name&&Ar(i.name()),r&&(this.childNameIndex_[r]=i,this.childNameIndex_[Er(r)]=i),"function"===typeof i.el&&i.el()){let e=null;this.children_[n+1]&&(this.children_[n+1].el_?e=this.children_[n+1].el_:ri(this.children_[n+1])&&(e=this.children_[n+1])),this.contentEl().insertBefore(i.el(),e)}return i}removeChild(e){if("string"===typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ar(e.name())]=null,this.childNameIndex_[Er(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=e=>{const n=e.name;let i=e.opts;if(void 0!==t[n]&&(i=t[n]),!1===i)return;!0===i&&(i={}),i.playerOptions=this.options_.playerOptions;const r=this.addChild(n,i);r&&(this[n]=r)};let i;const r=xr.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter(function(e){return!i.some(function(t){return"string"===typeof t?e===t:e===t.name})})).map(t=>{let n,i;return"string"===typeof t?(n=t,i=e[n]||this.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}}).filter(e=>{const t=xr.getComponent(e.opts.componentClass||Ar(e.name));return t&&!r.isTech(t)}).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)}$(e,t){return Mi(e,t||this.contentEl())}$$(e,t){return Di(e,t||this.contentEl())}hasClass(e){return ci(this.el_,e)}addClass(...e){di(this.el_,...e)}removeClass(...e){hi(this.el_,...e)}toggleClass(e,t){pi(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return mi(this.el_,e)}setAttribute(e,t){yi(this.el_,e,t)}removeAttribute(e){vi(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Ar(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Ri(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const n=`offset${Ar(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},n={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:n}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&("Tab"===e.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const n=10,i=200;let s;this.on("touchstart",function(n){1===n.touches.length&&(t={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=r().performance.now(),s=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)s=!1;else if(t){const i=e.touches[0].pageX-t.pageX,r=e.touches[0].pageY-t.pageY,a=Math.sqrt(i*i+r*r);a>n&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(n){if(t=null,!0===s){const t=r().performance.now()-e;t<i&&(n.preventDefault(),this.trigger("tap"))}})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=sr(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=sr(this,e),this.clearTimersOnDispose_(),n=r().setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),r().clearTimeout(e)),e}setInterval(e,t){e=sr(this,e),this.clearTimersOnDispose_();const n=r().setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),r().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=sr(this,e),t=r().requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=sr(this,t);const n=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),r().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((e,n)=>this[t](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return Boolean(this.el_.disabled)}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){const t=e||this.el_;return t.tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(e){const t=r().getComputedStyle(e,null),n=t.getPropertyValue("visibility"),i=t.getPropertyValue("display"),s=["hidden","collapse"];return"none"!==i&&!s.includes(n)}function n(e){return!!t(e.parentElement)&&!(!t(e)||"0"===e.style.opacity||"0px"===r().getComputedStyle(e).height||"0px"===r().getComputedStyle(e).width)}function i(e){if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(a().documentElement.clientWidth||r().innerWidth))return!1;if(t.y<0)return!1;if(t.y>(a().documentElement.clientHeight||r().innerHeight))return!1;let n=a().elementFromPoint(t.x,t.y);while(n){if(n===e)return!0;if(!n.parentNode)return!1;n=n.parentNode}}return e||(e=this.el()),!(!i(e)||!n(e)||e.parentElement&&!(e.tabIndex>=0))}static registerComponent(e,t){if("string"!==typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=xr.getComponent("Tech"),i=n&&n.isTech(t),r=xr===t||xr.prototype.isPrototypeOf(t.prototype);if(i||!r){let t;throw t=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=Ar(e),xr.components_||(xr.components_={});const s=xr.getComponent("Player");if("Player"===e&&s&&s.players){const e=s.players,t=Object.keys(e);if(e&&t.length>0)for(let n=0;n<t.length;n++)if(null!==e[t[n]])throw new Error("Can not register Player component after player has been created.")}return xr.components_[e]=t,xr.components_[Er(e)]=t,t}static getComponent(e){if(e&&xr.components_)return xr.components_[e]}}function kr(e,t,n){if("number"!==typeof t||t<0||t>n)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}function Mr(e,t,n,i){return kr(e,i,n.length-1),n[i][t]}function Dr(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Mr.bind(null,"start",0,e),end:Mr.bind(null,"end",1,e)},r().Symbol&&r().Symbol.iterator&&(t[r().Symbol.iterator]=()=>(e||[]).values()),t}function Rr(e,t){return Array.isArray(e)?Dr(e):void 0===e||void 0===t?Dr():Dr([[e,t]])}xr.registerComponent("Component",xr);const Or=function(e,t){e=e<0?0:e;let n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600);const s=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=r>0||a>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n};let Nr=Or;function Lr(e){Nr=e}function Pr(){Nr=Or}function Ur(e,t=e){return Nr(e,t)}var Br=Object.freeze({__proto__:null,createTimeRanges:Rr,createTimeRange:Rr,setFormatTime:Lr,resetFormatTime:Pr,formatTime:Ur});function Fr(e,t){let n,i,r=0;if(!t)return 0;e&&e.length||(e=Rr(0,0));for(let s=0;s<e.length;s++)n=e.start(s),i=e.end(s),i>t&&(i=t),r+=i-n;return r/t}function jr(e){if(e instanceof jr)return e;"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:An(e)&&("number"===typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=jr.defaultMessages[this.code]||"")}function Vr(e){return void 0!==e&&null!==e&&"function"===typeof e.then}function Hr(e){Vr(e)&&e.then(null,e=>{})}jr.prototype.code=0,jr.prototype.message="",jr.prototype.status=null,jr.prototype.metadata=null,jr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],jr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},jr.MEDIA_ERR_CUSTOM=0,jr.prototype.MEDIA_ERR_CUSTOM=0,jr.MEDIA_ERR_ABORTED=1,jr.prototype.MEDIA_ERR_ABORTED=1,jr.MEDIA_ERR_NETWORK=2,jr.prototype.MEDIA_ERR_NETWORK=2,jr.MEDIA_ERR_DECODE=3,jr.prototype.MEDIA_ERR_DECODE=3,jr.MEDIA_ERR_SRC_NOT_SUPPORTED=4,jr.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,jr.MEDIA_ERR_ENCRYPTED=5,jr.prototype.MEDIA_ERR_ENCRYPTED=5;const zr=function(e){const t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,n,i)=>(e[n]&&(t[n]=e[n]),t),{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t},Gr=function(e){const t=e.$$("track"),n=Array.prototype.map.call(t,e=>e.track),i=Array.prototype.map.call(t,function(e){const t=zr(e.track);return e.src&&(t.src=e.src),t});return i.concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(zr))},qr=function(e,t){return e.forEach(function(e){const n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(e=>n.addCue(e))}),t.textTracks()};var Wr={textTracksToJson:Gr,jsonToTextTracks:qr,trackToJson:zr};const Xr="vjs-modal-dialog";class Kr extends xr{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=oi("div",{className:`${Xr}-content`},{role:"document"}),this.descEl_=oi("p",{className:`${Xr}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),li(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Xr} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_)return void(this.options_.fillAlways&&this.fill());const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return"boolean"===typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"===typeof e){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),xi(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);const r=this.getChild("closeButton");r&&n.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Ai(this.contentEl()),this.trigger("modalempty")}content(e){return"undefined"!==typeof e&&(this.content_=e),this.content_}conditionalFocus_(){const e=a().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),"Escape"===e.key&&this.closeable())return e.preventDefault(),void this.close();if("Tab"!==e.key)return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let i;for(let r=0;r<t.length;r++)if(n===t[r]){i=r;break}a().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||i!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,e=>(e instanceof r().HTMLAnchorElement||e instanceof r().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof r().HTMLInputElement||e instanceof r().HTMLSelectElement||e instanceof r().HTMLTextAreaElement||e instanceof r().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof r().HTMLIFrameElement||e instanceof r().HTMLObjectElement||e instanceof r().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable"))}}Kr.prototype.options_={pauseOnOpen:!0,temporary:!0},xr.registerComponent("ModalDialog",Kr);class Yr extends cr{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},hr(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}Yr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const Up in Yr.prototype.allowedEvents_)Yr.prototype["on"+Up]=null;const $r=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)};class Qr extends Yr{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){$r(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&$r(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,$r(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Zr=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)};class Jr extends Yr{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Zr(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&Zr(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Zr(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class es extends Yr{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_);const t=["metadata","chapters"];-1===t.indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class ts{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"===typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"===typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class ns{constructor(e){ns.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const i=e.length;this.cues_=e,this.length_=e.length;const r=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)}getCueById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}const is={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},rs={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ss={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},as={disabled:"disabled",hidden:"hidden",showing:"showing"};class os extends cr{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Wi(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const i in t)Object.defineProperty(this,i,{get(){return t[i]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(e){e!==n&&(n=e,this.trigger("labelchange"))}})}}const ls=function(e){return new URL(e,a().baseURI)},us=function(e){return new URL(e,a().baseURI).href},cs=function(e){if("string"===typeof e){const t=e.split("?")[0].replace(/\/+$/,""),n=t.match(/\.([^.\/]+)$/);return n?n[1].toLowerCase():""}return""},ds=function(e,t=r().location){return ls(e).origin!==t.origin};var hs=Object.freeze({__proto__:null,parseUrl:ls,getAbsoluteURL:us,getFileExtension:cs,isCrossOrigin:ds});const ps=function(e,t){const n=new(r().WebVTT.Parser)(r(),r().vttjs,r().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(r().console&&r().console.groupCollapsed&&r().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),i.forEach(e=>bn.error(e)),r().console&&r().console.groupEnd&&r().console.groupEnd()),n.flush()},fs=function(e,t){const n={uri:e},i=ds(e);i&&(n.cors=i);const s="use-credentials"===t.tech_.crossOrigin();s&&(n.withCredentials=s),l()(n,sr(this,function(e,n,i){if(e)return bn.error(e,n);t.loaded_=!0,"function"!==typeof r().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],e=>{if("vttjserror"!==e.type)return ps(i,t);bn.error(`vttjs failed to load, stopping trying to process ${t.src}`)}):ps(i,t)}))};class gs extends os{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=In(e,{kind:ss[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=as[t.mode]||"disabled";const i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const r=new ns(this.cues_),s=new ns(this.activeCues_);let a=!1;this.timeupdateHandler=sr(this,function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))});const o=()=>{this.stopTracking()};this.tech_.one("dispose",o),"disabled"!==n&&this.startTracking(),Object.defineProperties(this,{default:{get(){return i},set(){}},mode:{get(){return n},set(e){as[e]&&n!==e&&(n=e,this.preload_||"disabled"===n||0!==this.cues.length||fs(this.src,this),this.stopTracking(),"disabled"!==n&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return s;const e=this.tech_.currentTime(),t=[];for(let n=0,i=this.cues.length;n<i;n++){const i=this.cues[n];i.startTime<=e&&i.endTime>=e&&t.push(i)}if(a=!1,t.length!==this.activeCues_.length)a=!0;else for(let n=0;n<t.length;n++)-1===this.activeCues_.indexOf(t[n])&&(a=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&fs(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new(r().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}toJSON(){return Wr.trackToJson(this)}removeCue(e){let t=this.cues_.length;while(t--){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}gs.prototype.allowedEvents_={cuechange:"cuechange"};class ms extends os{constructor(e={}){const t=In(e,{kind:rs[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(e){"boolean"===typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class ys extends os{constructor(e={}){const t=In(e,{kind:is[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(e){"boolean"===typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class vs extends cr{constructor(e={}){let t;super();const n=new gs(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return n}}}),t=vs.NONE,n.addEventListener("loadeddata",()=>{t=vs.LOADED,this.trigger({type:"load",target:this})})}}vs.prototype.allowedEvents_={load:"load"},vs.NONE=0,vs.LOADING=1,vs.LOADED=2,vs.ERROR=3;const bs={audio:{ListClass:Qr,TrackClass:ms,capitalName:"Audio"},video:{ListClass:Jr,TrackClass:ys,capitalName:"Video"},text:{ListClass:es,TrackClass:gs,capitalName:"Text"}};Object.keys(bs).forEach(function(e){bs[e].getterName=`${e}Tracks`,bs[e].privateName=`${e}Tracks_`});const Ts={remoteText:{ListClass:es,TrackClass:gs,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ts,TrackClass:vs,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},_s=Object.assign({},bs,Ts);function ws(e,t,n,i,r={}){const s=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;const a=new _s.text.TrackClass(r);return s.addTrack(a),a}Ts.names=Object.keys(Ts),bs.names=Object.keys(bs),_s.names=[].concat(Ts.names).concat(bs.names);class Ss extends xr{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),_s.names.forEach(t=>{const n=_s[t];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new _s.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(sr(this,function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Rr(0,0)}bufferedPercent(){return Fr(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(bs.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(e=>{const t=this[`${e}Tracks`]()||[];let n=t.length;while(n--){const i=t[n];"text"===e&&this.removeRemoteTextTrack(i),t.removeTrack(i)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;while(t--){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new jr(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Rr(0,0):Rr()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){bs.names.forEach(e=>{const t=bs[e],n=()=>{this.trigger(`${e}trackchange`)},i=this[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.on("dispose",()=>{i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!r().WebVTT)if(a().body.contains(this.el())){if(!this.options_["vtt.js"]&&Cn(c())&&Object.keys(c()).length>0)return void this.trigger("vttjsloaded");const e=a().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),r().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=t=>e.addTrack(t.track),i=t=>e.removeTrack(t.track);t.on("addtrack",n),t.on("removetrack",i),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),s=()=>{r();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",i),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",r)}})}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return ws(this,e,t,n)}createRemoteTextTrack(e){const t=In(e,{tech:this});return new Ts.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return"boolean"!==typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!1===t&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Wi();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Ss.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ss||e instanceof Ss||e===Ss}static registerTech(e,t){if(Ss.techs_||(Ss.techs_={}),!Ss.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Ss.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ss.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ar(e),Ss.techs_[e]=t,Ss.techs_[Er(e)]=t,"Tech"!==e&&Ss.defaultTechOrder_.push(e),t}static getTech(e){if(e)return Ss.techs_&&Ss.techs_[e]?Ss.techs_[e]:(e=Ar(e),r()&&r().videojs&&r().videojs[e]?(bn.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),r().videojs[e]):void 0)}}_s.names.forEach(function(e){const t=_s[e];Ss.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Ss.prototype.featuresVolumeControl=!0,Ss.prototype.featuresMuteControl=!0,Ss.prototype.featuresFullscreenResize=!1,Ss.prototype.featuresPlaybackRate=!1,Ss.prototype.featuresProgressEvents=!1,Ss.prototype.featuresSourceset=!1,Ss.prototype.featuresTimeupdateEvents=!1,Ss.prototype.featuresNativeTextTracks=!1,Ss.prototype.featuresVideoFrameCallback=!1,Ss.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){let i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){const n=e.sourceHandlers||[];let i;for(let e=0;e<n.length;e++)if(i=n[e].canPlayType(t),i)return i;return""},e.selectSourceHandler=function(t,n){const i=e.sourceHandlers||[];let r;for(let e=0;e<i.length;e++)if(r=i[e].canHandleSource(t,n),r)return i[e];return null},e.canPlaySource=function(t,n){const i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};const t=["seekable","seeking","duration"];t.forEach(function(e){const t=this[e];"function"===typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){let n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:bn.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},xr.registerComponent("Tech",Ss),Ss.registerTech("Tech",Ss),Ss.defaultTechOrder_=[];const Es={},As={},Cs={};function Is(e,t){Es[e]=Es[e]||[],Es[e].push(t)}function xs(e,t,n){e.setTimeout(()=>js(t,Es[t.type],n,e),1)}function ks(e,t){e.forEach(e=>e.setTech&&e.setTech(t))}function Ms(e,t,n){return e.reduceRight(Ps(n),t[n]())}function Ds(e,t,n,i){return t[n](e.reduce(Ps(n),i))}function Rs(e,t,n,i=null){const r="call"+Ar(n),s=e.reduce(Ps(r),i),a=s===Cs,o=a?null:t[n](s);return Us(e,n,o,a),o}const Os={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Ns={setCurrentTime:1,setMuted:1,setVolume:1},Ls={play:1,pause:1};function Ps(e){return(t,n)=>t===Cs?Cs:n[e]?n[e](t):t}function Us(e,t,n,i){for(let r=e.length-1;r>=0;r--){const s=e[r];s[t]&&s[t](i,n)}}function Bs(e){As.hasOwnProperty(e.id())&&delete As[e.id()]}function Fs(e,t){const n=As[e.id()];let i=null;if(void 0===n||null===n)return i=t(e),As[e.id()]=[[t,i]],i;for(let r=0;r<n.length;r++){const[e,s]=n[r];e===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}function js(e={},t=[],n,i,r=[],s=!1){const[a,...o]=t;if("string"===typeof a)js(e,Es[a],n,i,r,s);else if(a){const t=Fs(i,a);if(!t.setSource)return r.push(t),js(e,o,n,i,r,s);t.setSource(Object.assign({},e),function(a,l){if(a)return js(e,o,n,i,r,s);r.push(t),js(l,e.type===l.type?o:Es[l.type],n,i,r,s)})}else o.length?js(e,o,n,i,r,s):s?n(e,r):js(e,Es["*"],n,i,r,!0)}const Vs={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Hs=function(e=""){const t=cs(e),n=Vs[t.toLowerCase()];return n||""},zs=(e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const n=e.cache_.sources.filter(e=>e.src===t);if(n.length)return n[0].type;const i=e.$$("source");for(let r=0;r<i.length;r++){const e=i[r];if(e.type&&e.src&&e.src===t)return e.type}return Hs(t)},Gs=function(e){if(Array.isArray(e)){let t=[];e.forEach(function(e){e=Gs(e),Array.isArray(e)?t=t.concat(e):An(e)&&t.push(e)}),e=t}else e="string"===typeof e&&e.trim()?[qs({src:e})]:An(e)&&"string"===typeof e.src&&e.src&&e.src.trim()?[qs(e)]:[];return e};function qs(e){if(!e.type){const t=Hs(e.src);t&&(e.type=t)}return e}var Ws='<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>';const Xs=Xn?10009:Kn?461:8,Ks={codes:{play:415,pause:19,ff:417,rw:412,back:Xs},names:{415:"play",19:"pause",417:"ff",412:"rw",[Xs]:"back"},isEventKey(e,t){return t=t.toLowerCase(),!(!this.names[e.keyCode]||this.names[e.keyCode]!==t)},getEventName(e){if(this.names[e.keyCode])return this.names[e.keyCode];if(this.codes[e.code]){const t=this.codes[e.code];return this.names[t]}return null}},Ys=5;class $s extends cr{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const e=t.key.substring(5).toLowerCase();this.move(e)}else if(Ks.isEventKey(t,"play")||Ks.isEventKey(t,"pause")||Ks.isEventKey(t,"ff")||Ks.isEventKey(t,"rw")){t.preventDefault();const e=Ks.getEventName(t);this.performMediaAction_(e)}else Ks.isEventKey(t,"Back")&&e.target&&"function"===typeof e.target.closeable&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+Ys);break;case"rw":this.userSeek_(this.player_.currentTime()-Ys);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let n=null;const i=this.getCurrentComponent(e.target);t&&(n=Boolean(t.closest(".video-js")),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(e.currentTarget.contains(e.relatedTarget)||n)&&t||(i&&"CloseButton"===i.name()?this.refocusComponent():(this.pause(),i&&i.el()&&(this.lastFocusedComponent_=i)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function n(e){for(const i of e)i.hasOwnProperty("el_")&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())&&t.push(i),i.hasOwnProperty("children_")&&i.children_.length>0&&n(i.children_)}return e.children_.forEach(e=>{if(e.hasOwnProperty("el_")){if(e.getIsFocusable&&e.getIsAvailableToBeFocused&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el()))return void t.push(e);e.hasOwnProperty("children_")&&e.children_.length>0?n(e.children_):e.hasOwnProperty("items")&&e.items.length>0?n(e.items):this.findSuitableDOMChild(e)&&t.push(e)}if("ErrorDisplay"===e.name_&&e.opened_){const n=e.el_.querySelector(".vjs-errors-ok-button-container");if(n){const e=n.querySelectorAll("button");e.forEach((e,n)=>{t.push({name:()=>"ModalButton"+(n+1),el:()=>e,getPositions:()=>{const t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},i={x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2};return{boundingClientRect:n,center:i}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:e=>!0,focus:()=>e.focus()})})}}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let e=0;e<n.children.length;e++){const i=n.children[e],r=t(i);if(r)return r}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length)for(const n of this.focusableComponents)if(n.el()===t)return n}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name())return this.focusableComponents.splice(t,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const n=t.getPositions(),i=this.focusableComponents.filter(i=>i!==t&&this.isInDirection_(n.boundingClientRect,i.getPositions().boundingClientRect,e)),r=this.findBestCandidate_(n.center,i,e);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,n){let i=1/0,r=null;for(const s of t){const t=s.getPositions().center,a=this.calculateDistance_(e,t,n);a<i&&(i=a,r=s)}return r}isInDirection_(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[e])}else this.focus(this.updateFocusableComponents()[0])}focus(e){"object"===typeof e&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,n){const i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);let s;switch(n){case"right":case"left":s=i+100*r;break;case"up":s=2*r+.5*i;break;case"down":s=5*r+i;break;default:s=i+r}return s}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if("TextTrackSelect"===t.constructor.name){e.focus(t);break}}}class Qs extends xr{constructor(e,t,n){const i=In({createEl:!1},t);if(super(e,i,n),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let r=0,s=t.playerOptions.techOrder;r<s.length;r++){const t=Ar(s[r]);let n=Ss.getTech(t);if(t||(n=xr.getComponent(t)),n&&n.isSupported()){e.loadTech_(t);break}}}}xr.registerComponent("MediaLoader",Qs);class Zs extends xr{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&bn.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const i=oi(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(oi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=oi("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,li(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){" "===e.key||"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}xr.registerComponent("ClickableComponent",Zs);class Js extends Zs{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return oi("div",{className:"vjs-poster"})}crossOrigin(e){if("undefined"===typeof e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(oi("picture",{className:"vjs-poster",tabIndex:-1},{},oi("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Hr(this.player_.play()):this.player_.pause())}}Js.prototype.crossorigin=Js.prototype.crossOrigin,xr.registerComponent("PosterImage",Js);const ea="#222",ta="#ccc",na={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ia(e,t){let n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function ra(e,t,n){try{e.style[t]=n}catch(i){return}}function sa(e){return e?`${e}px`:""}class aa extends xr{constructor(e,t,n){super(e,t,n);const i=e=>this.updateDisplay(e),s=e=>{this.updateDisplayOverlay(),this.updateDisplay(e)};e.on("loadstart",e=>this.toggleDisplay(e)),e.on("useractive",i),e.on("userinactive",i),e.on("texttrackchange",i),e.on("loadedmetadata",e=>{this.updateDisplayOverlay(),this.preselectTrack(e)}),e.ready(sr(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",s),e.on("playerresize",s);const t=r().screen.orientation||r(),n=r().screen.orientation?"change":"orientationchange";t.addEventListener(n,s),e.on("dispose",()=>t.removeEventListener(n,s));const i=this.options_.playerOptions.tracks||[];for(let e=0;e<i.length;e++)this.player_.addRemoteTextTrack(i[e],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let i,r,s;for(let a=0;a<t.length;a++){const o=t[a];n&&n.enabled&&n.language&&n.language===o.language&&o.kind in e?o.kind===n.kind?s=o:s||(s=o):n&&!n.enabled?(s=null,i=null,r=null):o.default&&("descriptions"!==o.kind||i?o.kind in e&&!r&&(r=o):i=o)}s?s.mode="showing":r?r.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"===typeof r().WebVTT&&r().WebVTT.processCues(r(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let n=0;n<e.length;++n){const i=e[n];"showing"===i.mode&&t.push(i)}return void this.updateForTrack(t)}let n=null,i=null,s=e.length;while(s--){const t=e[s];"showing"===t.mode&&("descriptions"===t.kind?n=t:i=t)}if(i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):n&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!r().CSS.supports("inset","10px")){const e=this.el_,t=e.querySelectorAll(".vjs-text-track-cue"),n=this.player_.controlBar.el_.getBoundingClientRect().height,i=this.player_.el_.getBoundingClientRect().height;e.style="",ra(e,"position","relative"),ra(e,"height",i-n+"px"),ra(e,"top","unset"),ra(e,"bottom",Yn?i+"px":"0px"),t.length>0&&t.forEach(e=>{if(e.style.inset){const t=e.style.inset.split(" ");3===t.length&&Object.assign(e.style,{top:t[0],right:t[1],bottom:t[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!r().CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,i=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(n-i)>.1&&(n>i?s=Math.round((e-t*i)/2):a=Math.round((t-e/i)/2)),ra(this.el_,"insetInline",sa(s)),ra(this.el_,"insetBlock",sa(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let i=n.length;while(i--){const e=n[i];if(!e)continue;const s=e.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&ra(s.firstChild,"color",ia(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ra(s.firstChild,"backgroundColor",ia(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ra(s,"backgroundColor",ia(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow=`2px 2px 3px ${ea}, 2px 2px 4px ${ea}, 2px 2px 5px ${ea}`:"raised"===t.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${ea}, 2px 2px ${ea}, 3px 3px ${ea}`:"depressed"===t.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${ta}, 0 1px ${ta}, -1px -1px ${ea}, 0 -1px ${ea}`:"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow=`0 0 4px ${ea}, 0 0 4px ${ea}, 0 0 4px ${ea}, 0 0 4px ${ea}`)),t.fontPercent&&1!==t.fontPercent){const e=r().parseFloat(s.style.fontSize);s.style.fontSize=e*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=na[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!==typeof r().WebVTT||e.every(e=>!e.activeCues))return;const t=[];for(let n=0;n<e.length;++n){const i=e[n];for(let e=0;e<i.activeCues.length;++e)t.push(i.activeCues[e])}r().WebVTT.processCues(r(),t,this.el_);for(let n=0;n<e.length;++n){const t=e[n];for(let e=0;e<t.activeCues.length;++e){const i=t.activeCues[e].displayState;di(i,"vjs-text-track-cue","vjs-text-track-cue-"+(t.language?t.language:n)),t.language&&yi(i,"lang",t.language)}this.player_.textTrackSettings&&this.updateDisplayState(t)}}}xr.registerComponent("TextTrackDisplay",aa);class oa extends xr{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=oi("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}xr.registerComponent("LoadingSpinner",oa);class la extends Zs{createEl(e,t={},n={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n);const i=oi(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(oi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){const n=this.constructor.name;return bn.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),xr.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){" "!==e.key&&"Enter"!==e.key?super.handleKeyDown(e):e.stopPropagation()}}xr.registerComponent("Button",la);class ua extends la{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",e=>this.handleMouseDown(e))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if("tap"===e.type||this.mouseused_&&"clientX"in e&&"clientY"in e)return Hr(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const r=()=>i.focus();Vr(t)?t.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}ua.prototype.controlText_="Play Video",xr.registerComponent("BigPlayButton",ua);class ca extends la{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){"Escape"===e.key?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}xr.registerComponent("CloseButton",ca);class da extends la{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.setIcon("play"),this.on(e,"play",e=>this.handlePlay(e)),this.on(e,"pause",e=>this.handlePause(e)),t.replay&&this.on(e,"ended",e=>this.handleEnded(e))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Hr(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",e=>this.handleSeeked(e))}}da.prototype.controlText_="Play",xr.registerComponent("PlayToggle",da);class ha extends xr{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],e=>this.update(e)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=oi("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(n),this.contentEl_=oi("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){(this.player_.options_.enableSmoothSeeking||"seeking"!==e.type)&&this.updateContent(e)}updateTextNode_(e=0){e=Ur(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,bn.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=a().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}ha.prototype.labelText_="Time",ha.prototype.controlText_="Time",xr.registerComponent("TimeDisplay",ha);class pa extends ha{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():e&&e.target&&"function"===typeof e.target.pendingSeekTime?e.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}pa.prototype.labelText_="Current Time",pa.prototype.controlText_="Current Time",xr.registerComponent("CurrentTimeDisplay",pa);class fa extends ha{constructor(e,t){super(e,t);const n=e=>this.updateContent(e);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}fa.prototype.labelText_="Duration",fa.prototype.controlText_="Duration",xr.registerComponent("DurationDisplay",fa);class ga extends xr{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}}xr.registerComponent("TimeDivider",ga);class ma extends ha{constructor(e,t){super(e,t),this.on(e,"durationchange",e=>this.updateContent(e))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(oi("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!==typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}ma.prototype.labelText_="Remaining Time",ma.prototype.controlText_="Remaining Time",xr.registerComponent("RemainingTimeDisplay",ma);class ya extends xr{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",e=>this.updateShowing(e))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=oi("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(oi("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(a().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}xr.registerComponent("LiveDisplay",ya);class va extends la{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=oi("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function ba(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}va.prototype.controlText_="Seek to live, currently playing live",xr.registerComponent("SeekToLive",va);var Ta=Object.freeze({__proto__:null,clamp:ba});class _a extends xr{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Bn||e.preventDefault(),bi(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;Ti(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"})),e}getProgress(){return Number(ba(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Si(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,n=t&&t.enabled,i=t&&t.horizontalSeek;n?i&&"ArrowLeft"===e.key||!i&&"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepBack()):i&&"ArrowRight"===e.key||!i&&"ArrowUp"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):"ArrowLeft"===e.key||"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepBack()):"ArrowUp"===e.key||"ArrowRight"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}xr.registerComponent("Slider",_a);const wa=(e,t)=>ba(e/t*100,0,100).toFixed(2)+"%";class Sa extends xr{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",e=>this.update(e))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=oi("span",{className:"vjs-control-text"}),n=oi("span",{textContent:this.localize("Loaded")}),i=a().createTextNode(": ");return this.percentageEl_=oi("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,s=wa(i,n);this.percent_!==s&&(this.el_.style.width=s,li(this.percentageEl_,s),this.percent_=s);for(let a=0;a<t.length;a++){const e=t.start(a),n=t.end(a);let s=r[a];s||(s=this.el_.appendChild(oi()),r[a]=s),s.dataset.start===e&&s.dataset.end===n||(s.dataset.start=e,s.dataset.end=n,s.style.left=wa(e,i),s.style.width=wa(n-e,i))}for(let a=r.length;a>t.length;a--)this.el_.removeChild(r[a-1]);r.length=t.length})}}xr.registerComponent("LoadProgressBar",Sa);class Ea extends xr{constructor(e,t){super(e,t),this.update=ar(sr(this,this.update),rr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const i=wi(this.el_),r=_i(this.player_.el()),s=e.width*t;if(!r||!i)return;let a=e.left-r.left+s,o=e.width-s+(r.right-e.right);o||(o=e.width-s,a=s);let l=i.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(n)}write(e){li(this.el_,e)}updateTime(e,t,n,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let r;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),n=e-t*e;r=(n<1?"":"-")+Ur(n,e)}else r=Ur(n,s);this.update(e,t,r),i&&i()})}}xr.registerComponent("TimeTooltip",Ea);class Aa extends xr{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=ar(sr(this,this.update),rr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t,n){const i=this.getChild("timeTooltip");if(!i)return;const r=n&&n.target&&"function"===typeof n.target.pendingSeekTime?n.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,r)}}Aa.prototype.options_={children:[]},Zn||Nn||Aa.prototype.options_.children.push("timeTooltip"),xr.registerComponent("PlayProgressBar",Aa);class Ca extends xr{constructor(e,t){super(e,t),this.update=ar(sr(this,this.update),rr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,()=>{this.el_.style.left=e.width*t+"px"})}}Ca.prototype.options_={children:["timeTooltip"]},xr.registerComponent("MouseTimeDisplay",Ca);class Ia extends _a{constructor(e,t){t=In(Ia.prototype.options_,t),t.children=[...t.children];const n=e.options_.disableSeekWhileScrubbingOnMobile&&(Zn||Nn)||e.options_.disableSeekWhileScrubbingOnSTV;(!Zn&&!Nn||n)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbing_=n,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=sr(this,this.update),this.update=ar(this.update_,rr),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a()&&"visibilityState"in a()&&this.on(a(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===a().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,rr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===a().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let r=this.player_.duration();i&&i.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===n&&this.duration_===r||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ur(n,r),Ur(r,r)],"{1} of {2}")),this.currentTime_=n,this.duration_=r),this.bar&&this.bar.update(_i(this.el()),this.getProgress(),e)}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(void 0!==e)if(null!==e){const t=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,t))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(null!==this.pendingSeekTime())return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){ki(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!ki(e)||isNaN(this.player_.duration()))return;let n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();const e=r.seekableStart(),t=r.liveCurrentTime();if(n=e+i*r.liveWindow(),n>=t&&(n=t),n<=e&&(n=e+.1),n===1/0)return}else n=i*this.player_.duration(),n===this.player_.duration()&&(n-=.1);this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(n):this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Hr(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const t=null!==this.pendingSeekTime()?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(" "===e.key||"Enter"===e.key)e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if("Home"===e.key)e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if("End"===e.key)e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=.1*parseInt(e.key,10);t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else"PageDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):"PageUp"===e.key?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a()&&"visibilityState"in a()&&this.off(a(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Ia.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12},xr.registerComponent("SeekBar",Ia);class xa extends xr{constructor(e,t){super(e,t),this.handleMouseMove=ar(sr(this,this.handleMouseMove),rr),this.throttledHandleMouseSeek=ar(sr(this,this.handleMouseSeek),rr),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!n&&!i)return;const r=t.el(),s=wi(r);let a=Si(r,e).x;a=ba(a,0,1),i&&i.update(s,a),n&&n.update(s,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Hr(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}xa.prototype.options_={children:["seekBar"]},xr.registerComponent("ProgressControl",xa);class ka extends la{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],e=>this.handlePictureInPictureChange(e)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],e=>this.handlePictureInPictureEnabledChange(e)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){const e="audio"===this.player_.currentType().substring(0,5),t=e||this.player_.audioPosterMode()||this.player_.audioOnlyMode();t?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){a().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in r()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"===typeof a().exitPictureInPicture&&super.show()}}ka.prototype.controlText_="Picture-in-Picture",xr.registerComponent("PictureInPictureToggle",ka);class Ma extends la{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",e=>this.handleFullscreenChange(e)),!1===a()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Ma.prototype.controlText_="Fullscreen",xr.registerComponent("FullscreenToggle",Ma);const Da=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})};class Ra extends xr{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}xr.registerComponent("VolumeLevel",Ra);class Oa extends xr{constructor(e,t){super(e,t),this.update=ar(sr(this,this.update),rr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,i){if(!n){const n=_i(this.el_),i=_i(this.player_.el()),r=e.width*t;if(!i||!n)return;const s=e.left-i.left+r,a=e.width-r+(i.right-e.right);let o=n.width/2;s<o?o+=o-s:a<o&&(o=a),o<0?o=0:o>n.width&&(o=n.width),this.el_.style.right=`-${o}px`}this.write(`${i}%`)}write(e){li(this.el_,e)}updateVolume(e,t,n,i,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,n,i.toFixed(0)),r&&r()})}}xr.registerComponent("VolumeLevelTooltip",Oa);class Na extends xr{constructor(e,t){super(e,t),this.update=ar(sr(this,this.update),rr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,()=>{n?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"})}}Na.prototype.options_={children:["volumeLevelTooltip"]},xr.registerComponent("MouseVolumeLevelDisplay",Na);class La extends _a{constructor(e,t){super(e,t),this.on("slideractive",e=>this.updateLastVolume_(e)),this.on(e,"volumechange",e=>this.updateARIAAttributes(e)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){ki(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),i=_i(n),r=this.vertical();let s=Si(n,e);s=r?s.y:s.x,s=ba(s,0,1),t.update(i,s,r)}ki(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)})}}La.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Zn||Nn||La.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),La.prototype.playerEvent="volumechange",xr.registerComponent("VolumeBar",La);class Pa extends xr{constructor(e,t={}){t.vertical=t.vertical||!1,("undefined"===typeof t.volumeBar||Cn(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),Da(this,e),this.throttledHandleMouseMove=ar(sr(this,this.handleMouseMove),rr),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",e=>this.handleMouseDown(e)),this.on("touchstart",e=>this.handleMouseDown(e)),this.on("mousemove",e=>this.handleMouseMove(e)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}Pa.prototype.options_={children:["volumeBar"]},xr.registerComponent("VolumeControl",Pa);const Ua=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})};class Ba extends la{constructor(e,t){super(e,t),Ua(this,e),this.on(e,["loadstart","volumechange"],e=>this.update(e))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){const e=n<.1?.1:n;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),Zn&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),hi(this.el_,[0,1,2,3].reduce((e,t)=>e+`${t?" ":""}vjs-vol-${t}`,"")),di(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume(),t=e?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}Ba.prototype.controlText_="Mute",xr.registerComponent("MuteToggle",Ba);class Fa extends xr{constructor(e,t={}){"undefined"!==typeof t.inline?t.inline=t.inline:t.inline=!0,("undefined"===typeof t.volumeControl||Cn(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],e=>this.volumePanelState_(e)),this.on(this.muteToggle,"keyup",e=>this.handleKeyPress(e)),this.on(this.volumeControl,"keyup",e=>this.handleVolumeControlKeyUp(e)),this.on("keydown",e=>this.handleKeyPress(e)),this.on("mouseover",e=>this.handleMouseOver(e)),this.on("mouseout",e=>this.handleMouseOut(e)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){"Escape"===e.key&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Zi(a(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Ji(a(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){"Escape"===e.key&&this.handleMouseOut()}}Fa.prototype.options_={children:["muteToggle","volumeControl"]},xr.registerComponent("VolumePanel",Fa);class ja extends la{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()?n.seekableEnd():this.player_.duration();let r;r=t+this.skipTime<=i?t+this.skipTime:i,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}ja.prototype.controlText_="Skip Forward",xr.registerComponent("SkipForward",ja);class Va extends la{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()&&n.seekableStart();let r;r=i&&t-this.skipTime<=i?i:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Va.prototype.controlText_="Skip Backward",xr.registerComponent("SkipBackward",Va);class Ha extends xr{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",e=>this.handleKeyDown(e)),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof xr&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof xr&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"===typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=oi(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Zi(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||a().activeElement;if(!this.children().some(e=>e.el()===t)){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter(t=>t.el()===e.target)[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}handleKeyDown(e){"ArrowLeft"===e.key||"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepForward()):"ArrowRight"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice(),n=t.length&&t[0].hasClass("vjs-menu-title");n&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}xr.registerComponent("Menu",Ha);class za extends xr{constructor(e,t={}){super(e,t),this.menuButton_=new la(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=la.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",e=>this.handleKeyDown(e)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Zi(a(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",e=>this.handleMouseLeave(e)),this.on("keydown",e=>this.handleSubmenuKeyDown(e))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Ha(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=oi("li",{className:"vjs-menu-title",textContent:Ar(this.options_.title),tabIndex:-1}),n=new xr(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";!0===this.options_.inline?e+="-inline":e+="-popup";const t=la.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Ji(a(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){"Escape"===e.key||"Tab"===e.key?(this.buttonPressed_&&this.unpressButton(),"Tab"===!e.key&&(e.preventDefault(),this.menuButton_.focus())):"Up"!==e.key&&("Down"!==e.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(e.preventDefault(),this.pressButton())}handleMenuKeyUp(e){"Escape"!==e.key&&"Tab"!==e.key||this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){"Escape"!==e.key&&"Tab"!==e.key||(this.buttonPressed_&&this.unpressButton(),"Tab"===!e.key&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Zn&&si())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}xr.registerComponent("MenuButton",za);class Ga extends za{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const i=sr(this,this.update);n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)})}}xr.registerComponent("TrackButton",Ga);class qa extends Zs{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),r=oi("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(r):i.replaceChild(r,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}xr.registerComponent("MenuItem",qa);class Wa extends qa{constructor(e,t){const n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...e)=>{this.handleTracksChange.apply(this,e)},o=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",o)}),void 0===i.onchange){let e;this.on(["tap","click"],function(){if("object"!==typeof r().Event)try{e=new(r().Event)("change")}catch(t){}e||(e=a().createEvent("Event"),e.initEvent("change",!0,!0)),i.dispatchEvent(e)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let i=0;i<n.length;i++){const e=n[i];-1!==this.kinds.indexOf(e.kind)&&(e===t?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}xr.registerComponent("TextTrackMenuItem",Wa);class Xa extends Wa{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(this.options_.kinds.indexOf(e.kind)>-1&&"showing"===e.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(["captions","descriptions","subtitles"].indexOf(e.kind)>-1&&"showing"===e.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}xr.registerComponent("OffTextTrackMenuItem",Xa);class Ka extends Ga{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Wa){let n;this.label_&&(n=`${this.label_} off`),e.push(new Xa(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<i.length;r++){const n=i[r];if(this.kinds_.indexOf(n.kind)>-1){const i=new t(this.player_,{track:n,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});i.addClass(`vjs-${n.kind}-menu-item`),e.push(i)}}return e}}xr.registerComponent("TextTrackButton",Ka);class Ya extends qa{constructor(e,t){const n=t.track,i=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime,super(e,t),this.track=n,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}xr.registerComponent("ChaptersTrackMenuItem",Ya);class $a extends Ka{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(e=>{e.selected(this.track_.activeCues[0]===e.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ar(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new Ya(this.player_,{track:this.track_,cue:i});e.push(r)}return e}}$a.prototype.kind_="chapters",$a.prototype.controlText_="Chapters",xr.registerComponent("ChaptersButton",$a);class Qa extends Ka{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const i=e.textTracks(),r=sr(this,this.handleTracksChange);i.addEventListener("change",r),this.on("dispose",function(){i.removeEventListener("change",r)})}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(e.kind!==this.kind_&&"showing"===e.mode){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Qa.prototype.kind_="descriptions",Qa.prototype.controlText_="Descriptions",xr.registerComponent("DescriptionsButton",Qa);class Za extends Ka{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Za.prototype.kind_="subtitles",Za.prototype.controlText_="Subtitles",xr.registerComponent("SubtitlesButton",Za);class Ja extends Wa{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}xr.registerComponent("CaptionSettingsMenuItem",Ja);class eo extends Ka{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ja(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}eo.prototype.kind_="captions",eo.prototype.controlText_="Captions",xr.registerComponent("CaptionsButton",eo);class to extends Wa{createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):r.appendChild(oi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(oi("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}xr.registerComponent("SubsCapsMenuItem",to);class no extends Ka{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Ar(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ja(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,to),e}}no.prototype.kinds_=["captions","subtitles"],no.prototype.controlText_="Subtitles",xr.registerComponent("SubsCapsButton",no);class io extends qa{constructor(e,t){const n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...e)=>{this.handleTracksChange.apply(this,e)};i.addEventListener("change",r),this.on("dispose",()=>{i.removeEventListener("change",r)})}createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(oi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(oi("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const n=e[t];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}xr.registerComponent("AudioTrackMenuItem",io);class ro extends Ga{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];e.push(new io(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}ro.prototype.controlText_="Audio Track",xr.registerComponent("AudioTrackButton",ro);class so extends qa{constructor(e,t){const n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=i,this.on(e,"ratechange",e=>this.update(e))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}so.prototype.contentElType="button",xr.registerComponent("PlaybackRateMenuItem",so);class ao extends za{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",e=>this.updateVisibility(e)),this.on(e,"ratechange",e=>this.updateLabel(e)),this.on(e,"playbackrateschange",e=>this.handlePlaybackRateschange(e))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=oi("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new so(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}ao.prototype.controlText_="Playback Rate",xr.registerComponent("PlaybackRateMenuButton",ao);class oo extends xr{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}xr.registerComponent("Spacer",oo);class lo extends oo{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}xr.registerComponent("CustomControlSpacer",lo);class uo extends xr{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}uo.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},xr.registerComponent("ControlBar",uo);class co extends Kr{constructor(e,t){super(e,t),this.on(e,"error",e=>{this.open(e)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}co.prototype.options_=Object.assign({},Kr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),xr.registerComponent("ErrorDisplay",co);class ho extends xr{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim();const e=oi("select",{id:this.options_.id},{},this.options_.SelectOptions.map(e=>{const t=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Wi()}`)+"-"+e[1].replace(/\W+/g,""),n=oi("option",{id:t,value:this.localize(e[0]),textContent:this.localize(e[1])});return n.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${t}`),n}));return e}}xr.registerComponent("TextTrackSelect",ho);class po extends xr{constructor(e,t={}){super(e,t);const n=oi("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const i=this.options_.selects;for(const r of i){const t=this.options_.selectConfigs[r],n=t.className,i=t.id.replace("%s",this.options_.id_);let s=null;const a=`vjs_select_${Wi()}`;if("colors"===this.options_.type){s=oi("span",{className:n});const e=oi("label",{id:i,className:"vjs-label",textContent:this.localize(t.label)});e.setAttribute("for",a),s.appendChild(e)}const o=new ho(e,{SelectOptions:t.options,legendId:this.options_.legendId,id:a,labelId:i});this.addChild(o),"colors"===this.options_.type&&(s.appendChild(o.el()),this.el().appendChild(s))}}createEl(){const e=oi("fieldset",{className:this.options_.className});return e}}xr.registerComponent("TextTrackFieldset",po);class fo extends xr{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,i=new po(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const r=new po(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const s=new po(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s)}createEl(){const e=oi("div",{className:"vjs-track-settings-colors"});return e}}xr.registerComponent("TextTrackSettingsColors",fo);class go extends xr{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,i=new po(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const r=new po(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const s=new po(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s)}createEl(){const e=oi("div",{className:"vjs-track-settings-font"});return e}}xr.registerComponent("TextTrackSettingsFont",go);class mo extends xr{constructor(e,t={}){super(e,t);const n=new la(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});n.el().classList.remove("vjs-control","vjs-button"),n.el().textContent=this.localize("Reset"),this.addChild(n);const i=this.localize("Done"),r=new la(e,{controlText:i,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=i,this.addChild(r)}createEl(){const e=oi("div",{className:"vjs-track-settings-controls"});return e}}xr.registerComponent("TrackSettingsControls",mo);const yo="vjs-text-track-settings",vo=["#000","Black"],bo=["#00F","Blue"],To=["#0FF","Cyan"],_o=["#0F0","Green"],wo=["#F0F","Magenta"],So=["#F00","Red"],Eo=["#FFF","White"],Ao=["#FF0","Yellow"],Co=["1","Opaque"],Io=["0.5","Semi-Transparent"],xo=["0","Transparent"],ko={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[vo,Eo,So,_o,bo,Ao,wo,To],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Co,Io,xo],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Eo,vo,So,_o,bo,Ao,wo,To],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Co,Io],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[xo,Io,Co],className:"vjs-window-opacity vjs-opacity"}};function Mo(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Do(e,t){const n=e.options[e.options.selectedIndex].value;return Mo(n,t)}function Ro(e,t,n){if(t)for(let i=0;i<e.options.length;i++)if(Mo(e.options[i].value,n)===t){e.selectedIndex=i;break}}ko.windowColor.options=ko.backgroundColor.options;class Oo extends Kr{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=oi("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new fo(e,{textTrackComponentid:this.id_,selectConfigs:ko,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const n=new go(e,{textTrackComponentid:this.id_,selectConfigs:ko,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const i=new mo(e);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Sn(ko,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return En(ko,(e,t,n)=>{const i=Do(this.$(t.selector),t.parser);return void 0!==i&&(e[n]=i),e},{})}setValues(e){Sn(ko,(t,n)=>{Ro(this.$(t.selector),e[n],t.parser)})}setDefaults(){Sn(ko,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(r().localStorage.getItem(yo))}catch(t){bn.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?r().localStorage.setItem(yo,JSON.stringify(e)):r().localStorage.removeItem(yo)}catch(t){bn.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}xr.registerComponent("TextTrackSettings",Oo);class No extends xr{constructor(e,t){let n=t.ResizeObserver||r().ResizeObserver;null===t.ResizeObserver&&(n=!1);const i=In({createEl:!n,reportTouchActivity:!1},t);super(e,i),this.ResizeObserver=t.ResizeObserver||r().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=or(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){Ji(this,"resize",e),Ji(this,"unload",t),t=null};Zi(this.el_.contentWindow,"unload",t),Zi(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}xr.registerComponent("ResizeManager",No);const Lo={trackingThreshold:20,liveTolerance:15};class Po extends xr{constructor(e,t){const n=In(Lo,t,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",e=>this.handleDurationchange(e)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(r().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const i=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,rr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;while(n--)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;while(n--)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"===typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}xr.registerComponent("LiveTracker",Po);class Uo extends xr{constructor(e,t){super(e,t),this.on("statechanged",e=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:oi("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Wi()}`}),description:oi("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Wi()}`})},oi("div",{className:"vjs-title-bar"},{},xn(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(e=>{const i=this.state[e],r=this.els[e],s=n[e];Ai(r),i&&li(r,i),t&&(t.removeAttribute(s),i&&t.setAttribute(s,r.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}xr.registerComponent("TitleBar",Uo);const Bo={initialDisplay:4e3,position:[],takeFocus:!1};class Fo extends la{constructor(e,t){t=In(Bo,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],e=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=oi("button",{},{type:"button",class:this.buildCSSClass()},oi("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}xr.registerComponent("TransientButton",Fo);const jo=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const n=e.$$("source"),i=[];let r="";if(!n.length)return!1;for(let s=0;s<n.length;s++){const e=n[s].src;e&&-1===i.indexOf(e)&&i.push(e)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},Vo=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=a().createElement(this.nodeName.toLowerCase());t.innerHTML=e;const n=a().createDocumentFragment();while(t.childNodes.length)n.appendChild(t.childNodes[0]);return this.innerText="",r().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Ho=(e,t)=>{let n={};for(let i=0;i<e.length;i++)if(n=Object.getOwnPropertyDescriptor(e[i],t),n&&n.set&&n.get)break;return n.enumerable=!0,n.configurable=!0,n},zo=e=>Ho([e.el(),r().HTMLMediaElement.prototype,r().Element.prototype,Vo],"innerHTML"),Go=function(e){const t=e.el();if(t.resetSourceWatch_)return;const n={},i=zo(e),r=n=>(...i)=>{const r=n.apply(t,i);return jo(e),r};["append","appendChild","insertAdjacentHTML"].forEach(e=>{t[e]&&(n[e]=t[e],t[e]=r(n[e]))}),Object.defineProperty(t,"innerHTML",In(i,{set:r(i.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach(e=>{t[e]=n[e]}),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)},qo=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?us(r().Element.prototype.getAttribute.call(this,"src")):""},set(e){return r().Element.prototype.setAttribute.call(this,"src",e),e}}),Wo=e=>Ho([e.el(),r().HTMLMediaElement.prototype,qo],"src"),Xo=function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const n=Wo(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",In(n,{set:i=>{const r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=(n,r)=>{const s=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),s},t.load=()=>{const n=r.call(t);return jo(e)||(e.triggerSourceset(""),Go(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):jo(e)||Go(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}};class Ko extends Ss{constructor(e,t){super(e,t);const n=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,n&&(this.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const n=[];while(t--){const r=e[t],s=r.nodeName.toLowerCase();"track"===s&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),this.textTracks().addTrack(r.track),i||this.el_.hasAttribute("crossorigin")||!ds(r.src)||(i=!0)):n.push(r))}for(let i=0;i<n.length;i++)this.el_.removeChild(n[i])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&bn.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),($n||Wn)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ko.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){Xo(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let n=0;n<e.length;n++){const i=e[n];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const i=()=>{for(let e=0;e<t.length;e++){const n=t[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(e=>{const t=this.el()[`${n}Tracks`];t.removeEventListener(e,this[`${n}TracksListeners_`][e])}),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=bs[e],n=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:t=>{const n={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(n),"text"===e&&this[Ts.remoteText.getterName]().trigger(n)},addtrack(e){i.addTrack(e.track)},removetrack(e){i.removeTrack(e.track)}},s=function(){const e=[];for(let t=0;t<i.length;t++){let r=!1;for(let e=0;e<n.length;e++)if(n[e]===i[t]){r=!0;break}r||e.push(i[t])}while(e.length)i.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach(e=>{const t=r[e];n.addEventListener(e,t),this.on("dispose",i=>n.removeEventListener(e,t))}),this.on("loadstart",s),this.on("dispose",e=>this.off("loadstart",s))}proxyNativeTracks_(){bs.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),Ko.disposeMediaElement(e),e=t}else{e=a().createElement("video");const t=this.options_.tag&&gi(this.options_.tag),n=In({},t);$n&&!0===this.options_.nativeControlsForTouch||delete n.controls,fi(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&yi(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const i=t[n],r=this.options_[i];"undefined"!==typeof r&&(r?yi(e,i,i):vi(e,i),e[i]=r)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",t),this.off("loadedmetadata",n),e||this.trigger("loadstart")})}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(e){this.trigger(e)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Jn?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){bn(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Nn&&Bn&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return"function"===typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Hr(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return bn.error("Invalid source URL."),!1;const n={src:e};t&&(n.type=t);const i=oi("source",{},n);return this.el_.appendChild(i),!0}removeSourceElement(e){if(!e)return bn.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const n of t)if(n.src===e)return this.el_.removeChild(n),!0;return bn.warn(`No matching source element found with src: ${e}`),!1}reset(){Ko.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=a().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;while(n--)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),r().performance&&(e.creationTime=r().performance.now()),e}}kn(Ko,"TEST_VID",function(){if(!ii())return;const e=a().createElement("video"),t=a().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}),Ko.isSupported=function(){try{Ko.TEST_VID.volume=.5}catch(e){return!1}return!(!Ko.TEST_VID||!Ko.TEST_VID.canPlayType)},Ko.canPlayType=function(e){return Ko.TEST_VID.canPlayType(e)},Ko.canPlaySource=function(e,t){return Ko.canPlayType(e.type)},Ko.canControlVolume=function(){try{const e=Ko.TEST_VID.volume;Ko.TEST_VID.volume=e/2+.1;const t=e!==Ko.TEST_VID.volume;return t&&Zn?(r().setTimeout(()=>{Ko&&Ko.prototype&&(Ko.prototype.featuresVolumeControl=e!==Ko.TEST_VID.volume)}),!1):t}catch(e){return!1}},Ko.canMuteVolume=function(){try{const e=Ko.TEST_VID.muted;return Ko.TEST_VID.muted=!e,Ko.TEST_VID.muted?yi(Ko.TEST_VID,"muted","muted"):vi(Ko.TEST_VID,"muted","muted"),e!==Ko.TEST_VID.muted}catch(e){return!1}},Ko.canControlPlaybackRate=function(){if(Nn&&Bn&&jn<58)return!1;try{const e=Ko.TEST_VID.playbackRate;return Ko.TEST_VID.playbackRate=e/2+.1,e!==Ko.TEST_VID.playbackRate}catch(e){return!1}},Ko.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty(a().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(a().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(a().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(a().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ko.supportsNativeTextTracks=function(){return Jn||Zn&&Bn},Ko.supportsNativeVideoTracks=function(){return!(!Ko.TEST_VID||!Ko.TEST_VID.videoTracks)},Ko.supportsNativeAudioTracks=function(){return!(!Ko.TEST_VID||!Ko.TEST_VID.audioTracks)},Ko.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([e,t]){kn(Ko.prototype,e,()=>Ko[t](),!0)}),Ko.prototype.featuresVolumeControl=Ko.canControlVolume(),Ko.prototype.movingMediaElementInDOM=!Zn,Ko.prototype.featuresFullscreenResize=!0,Ko.prototype.featuresProgressEvents=!0,Ko.prototype.featuresTimeupdateEvents=!0,Ko.prototype.featuresVideoFrameCallback=!(!Ko.TEST_VID||!Ko.TEST_VID.requestVideoFrameCallback),Ko.disposeMediaElement=function(e){if(e){e.parentNode&&e.parentNode.removeChild(e);while(e.hasChildNodes())e.removeChild(e.firstChild);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},Ko.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let n=t.length;while(n--)e.removeChild(t[n]);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Ko.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Ko.prototype["set"+Ar(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){Ko.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){Ko.prototype["set"+Ar(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){Ko.prototype[e]=function(){return this.el_[e]()}}),Ss.withSourceHandlers(Ko),Ko.nativeSourceHandler={},Ko.nativeSourceHandler.canPlayType=function(e){try{return Ko.TEST_VID.canPlayType(e)}catch(t){return""}},Ko.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ko.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=cs(e.src);return Ko.nativeSourceHandler.canPlayType(`video/${t}`)}return""},Ko.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ko.nativeSourceHandler.dispose=function(){},Ko.registerSourceHandler(Ko.nativeSourceHandler),Ss.registerTech("Html5",Ko);const Yo=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],$o={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qo=["tiny","xsmall","small","medium","large","xlarge","huge"],Zo={};Qo.forEach(e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;Zo[e]=`vjs-layout-${t}`});const Jo={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class el extends xr{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${Wi()}`,t=Object.assign(el.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const n=e.closest("[lang]");n&&(t.language=n.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.boundUpdatePlayerHeightOnAudioOnlyMode_=e=>this.updatePlayerHeightOnAudioOnlyMode_(e),this.isFullscreen_=!1,this.log=Tn(this.id_),this.fsApi_=hn,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&gi(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach(function(n){e[n.toLowerCase()]=t.languages[n]}),this.languages_=e}else this.languages_=el.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(e=>{if("function"!==typeof this[e])throw new Error(`plugin "${e}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),_r(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Zi(a(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=In(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(e=>{this[e](t.plugins[e])}),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const e=new(r().DOMParser),t=e.parseFromString(Ws,"image/svg+xml"),n=t.querySelector("parsererror");if(n)bn.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const e=t.documentElement;e.style.display="none",this.el_.appendChild(e),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new $s(this),this.addClass("vjs-spatial-navigation-enabled")),$n&&this.addClass("vjs-touch-enabled"),Zn||this.addClass("vjs-workinghover"),el.players[this.id_]=this;const s=an.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",e=>this.listenForUserActivity_(e)),this.on("keydown",e=>this.handleKeyDown(e)),this.on("languagechange",e=>this.handleLanguagechange(e)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ji(a(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ji(a(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),el.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Bs(this),_s.names.forEach(e=>{const t=_s[e],n=this[t.getterName]();n&&n.off&&n.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=t.parentNode:i||(e=this.el_=super.createEl("div"));const s=gi(t);if(i){e=this.el_=t,t=this.tag=a().createElement("video");while(e.children.length)t.appendChild(e.firstChild);ci(e,"video-js")||di(e,"video-js"),e.appendChild(t),n=this.playerElIngest_=e,Object.keys(e).forEach(n=>{try{t[n]=e[n]}catch(i){}})}t.setAttribute("tabindex","-1"),s.tabindex="-1",Bn&&Gn&&(t.setAttribute("role","application"),s.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(n){i&&"class"===n||e.setAttribute(n,s[n]),i&&t.setAttribute(n,s[n])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(e=>ei[e]).map(e=>"vjs-device-"+e.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),!0!==r().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ji("vjs-styles-dimensions");const e=Mi(".vjs-styles-defaults"),t=Mi("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=t.getElementsByTagName("a");for(let r=0;r<l.length;r++){const e=l.item(r);di(e,"vjs-hidden"),e.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(e,t),ui(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if("undefined"===typeof e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):bn.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?bn.error(`Improper value "${t}" supplied for for ${e}`):(this[n]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,hr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),pr(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===r().VIDEOJS_NO_DYNAMIC_STYLE){const e="number"===typeof this.width_?this.width_:this.options_.width,t="number"===typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}let e,t,n,i;n=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=n.split(":"),a=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Vi(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*a}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=Ar(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Ss.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(r=!1);const s={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};_s.names.forEach(e=>{const t=_s[e];s[t.getterName]=this[t.privateName]}),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const a=Ss.getTech(e);if(!a)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new a(s),this.tech_.ready(sr(this,this.handleTechReady_),!0),Wr.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Yo.forEach(e=>{this.on(this.tech_,e,t=>this[`handleTech${Ar(e)}_`](t))}),Object.keys($o).forEach(e=>{this.on(this.tech_,e,t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${$o[e]}_`].bind(this),event:t}):this[`handleTech${$o[e]}_`](t)})}),this.on(this.tech_,"loadstart",e=>this.handleTechLoadStart_(e)),this.on(this.tech_,"sourceset",e=>this.handleTechSourceset_(e)),this.on(this.tech_,"waiting",e=>this.handleTechWaiting_(e)),this.on(this.tech_,"ended",e=>this.handleTechEnded_(e)),this.on(this.tech_,"seeking",e=>this.handleTechSeeking_(e)),this.on(this.tech_,"play",e=>this.handleTechPlay_(e)),this.on(this.tech_,"pause",e=>this.handleTechPause_(e)),this.on(this.tech_,"durationchange",e=>this.handleTechDurationChange_(e)),this.on(this.tech_,"fullscreenchange",(e,t)=>this.handleTechFullscreenChange_(e,t)),this.on(this.tech_,"fullscreenerror",(e,t)=>this.handleTechFullscreenError_(e,t)),this.on(this.tech_,"enterpictureinpicture",e=>this.handleTechEnterPictureInPicture_(e)),this.on(this.tech_,"leavepictureinpicture",e=>this.handleTechLeavePictureInPicture_(e)),this.on(this.tech_,"error",e=>this.handleTechError_(e)),this.on(this.tech_,"posterchange",e=>this.handleTechPosterChange_(e)),this.on(this.tech_,"textdata",e=>this.handleTechTextData_(e)),this.on(this.tech_,"ratechange",e=>this.handleTechRateChange_(e)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||ui(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){_s.names.forEach(e=>{const t=_s[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=Wr.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&bn.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":an}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!==typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const n=this.play();if(Vr(n))return n.catch(e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)})};let n;return"any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():t():(n=this.play(),Vr(n)&&(n=n.catch(t))),Vr(n)?n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})}):void 0}updateSourceCaches_(e=""){let t=e,n="";"string"!==typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=zs(this,t)),this.cache_.source=In({},e,{src:t,type:n});const i=this.cache_.sources.filter(e=>e.src&&e.src===t),r=[],s=this.$$("source"),a=[];for(let o=0;o<s.length;o++){const e=gi(s[o]);r.push(e),e.src&&e.src===t&&a.push(e.src)}a.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],e=>{if("sourceset"===e.type)return;const t=this.techGet_("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Hr(this.play()):this.pause()))}handleTechDoubleClick_(e){if(!this.controls_)return;const t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),t=>t.contains(e.target));t||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!a().pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let i=a()[this.fsApi_.fullscreenElement]===n;!i&&n.matches&&(i=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in Ns)return Ds(this.middleware_,this.tech_,e,t);if(e in Ls)return Rs(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw bn(n),n}},!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in Os)return Ms(this.middleware_,this.tech_,e);if(e in Ls)return Rs(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw bn(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t;if("TypeError"===t.name)throw bn(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t;throw bn(t),t}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Hr){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),n=Boolean(Jn||Zn);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&n&&this.load());const i=this.techGet_("play"),r=n&&this.hasClass("vjs-ended");r&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Rr(0,0)}scrubbing(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0===e?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,void(isFinite(e)&&(this.cache_.currentTime=Number(e)))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=Rr(0,0)),e}seekable(){let e=this.techGet_("seekable");return e&&e.length||(e=Rr(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return Fr(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((n,i)=>{function r(){t.off("fullscreenerror",a),t.off("fullscreenchange",s)}function s(){r(),n()}function a(e,t){r(),i(t)}t.one("fullscreenchange",s),t.one("fullscreenerror",a);const o=t.requestFullscreenHelper_(e);o&&(o.then(r,r),o.then(n,i))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,n)=>{function i(){e.off("fullscreenerror",s),e.off("fullscreenchange",r)}function r(){i(),t()}function s(e,t){i(),n(t)}e.one("fullscreenchange",r),e.one("fullscreenerror",s);const a=e.exitFullscreenHelper_();a&&(a.then(i,i),a.then(t,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=a()[this.fsApi_.exitFullscreen]();return e&&Hr(e.then(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=a().documentElement.style.overflow,Zi(a(),"keydown",this.boundFullWindowOnEscKey_),a().documentElement.style.overflow="hidden",di(a().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){"Escape"===e.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ji(a(),"keydown",this.boundFullWindowOnEscKey_),a().documentElement.style.overflow=this.docOrigOverflow,hi(a().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&r().documentPictureInPicture){const e=a().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(oi("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),r().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(Oi(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",t=>{const n=t.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in a()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return r().documentPictureInPicture&&r().documentPictureInPicture.window?(r().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in a()?a().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;if(!t||!t.hotkeys)return;const n=e=>{const t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;const n=["button","checkbox","hidden","radio","reset","submit"];if("input"===t)return-1===n.indexOf(e.type);const i=["textarea"];return-1!==i.indexOf(t)};n(this.el_.ownerDocument.activeElement)||("function"===typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=t=>"f"===e.key.toLowerCase(),muteKey:i=t=>"m"===e.key.toLowerCase(),playPauseKey:r=t=>"k"===e.key.toLowerCase()||" "===e.key.toLowerCase()}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=xr.getComponent("FullscreenToggle");!1!==a()[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const t=xr.getComponent("MuteToggle");t.prototype.handleClick.call(this,e)}else if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const t=xr.getComponent("PlayToggle");t.prototype.handleClick.call(this,e)}}canPlayType(e){let t;for(let n=0,i=this.options_.techOrder;n<i.length;n++){const r=i[n];let s=Ss.getTech(r);if(s||(s=xr.getComponent(r)),s){if(s.isSupported()&&(t=s.canPlayType(e),t))return t}else bn.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map(e=>[e,Ss.getTech(e)]).filter(([e,t])=>t?t.isSupported():(bn.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(e,t,n){let i;return e.some(e=>t.some(t=>{if(i=n(e,t),i)return!0})),i};let i;const r=e=>(t,n)=>e(n,t),s=([e,t],n)=>{if(t.canPlaySource(n,this.options_[e.toLowerCase()]))return{source:n,tech:e}};return i=this.options_.sourceOrder?n(e,t,r(s)):n(t,e,s),i||!1}handleSrc_(e,t){if("undefined"===typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=Gs(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),xs(this,n[0],(e,i)=>{this.middleware_=i,t||(this.cache_.sources=n),this.updateSourceCaches_(e);const r=this.src_(e);if(r)return n.length>1?this.handleSrc_(n.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());ks(i,this.tech_)}),n.length>1){const e=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(Cr(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}addSourceElement(e,t){return!!this.tech_&&this.tech_.addSourceElement(e,t)}removeSourceElement(e){return!!this.tech_&&this.tech_.removeSourceElement(e)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Hr(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),hr(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:r}=n||{};e&&e.updateContent(),t&&t.updateContent(),i&&i.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"===typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"===typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t="undefined"===typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(ln("beforeerror").forEach(t=>{const n=t(this,e);An(n)&&!Array.isArray(n)||"string"===typeof n||"number"===typeof n||null===n?e=n:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new jr(e),this.addClass("vjs-error"),bn.error(`(CODE:${this.error_.code} ${jr.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),ln("error").forEach(e=>e(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const i=sr(this,this.reportUserActivity),r=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())},s=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},a=function(t){i(),this.clearInterval(e)};this.on("mousedown",s),this.on("mousemove",r),this.on("mouseup",a),this.on("mouseleave",a);const o=this.getChild("controlBar");let l;!o||Zn||Nn||(o.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),o.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i);const u=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(l);const e=this.options_.inactivityTimeout;e<=0||(l=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))};this.setInterval(u,250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");e&&this.audioOnlyCache_.controlBarHeight!==e.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach(e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!==typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){const e=this.tech_&&this.tech_;e.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){const e=this.tech_&&this.tech_;e.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){if("boolean"!==typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;if(this.audioPosterMode_=e,e){if(this.audioOnlyMode()){const e=this.audioOnlyMode(!1);return e.then(()=>{this.enablePosterModeUI_()})}return Promise.resolve().then(()=>{this.enablePosterModeUI_()})}return Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),hr(this)&&this.trigger("languagechange"))}languages(){return In(el.prototype.options_.languages,this.languages_)}toJSON(){const e=In(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let i=t[n];i=In(i),i.player=void 0,e.tracks[n]=i}return e}createModal(e,t){t=t||{},t.content=e||"";const n=new Kr(this,t);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<Qo.length;n++){const i=Qo[n],r=this.breakpoints_[i];if(t<=r){if(e===i)return;e&&this.removeClass(Zo[e]),this.addClass(Zo[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},Jo,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){if(void 0===e)return this.responsive_;e=Boolean(e);const t=this.responsive_;return e!==t?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Zo[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!==typeof e)return;const n=this.crossOrigin();this.reset(),this.cache_.media=In(e);const{artist:i,artwork:r,description:s,poster:a,src:o,textTracks:l,title:u}=this.cache_.media;!r&&a&&(this.cache_.media.artwork=[{src:a,type:Hs(a)}]),n&&this.crossOrigin(n),o&&this.src(o),a&&this.poster(a),Array.isArray(l)&&l.forEach(e=>this.addRemoteTextTrack(e,!1)),this.titleBar&&this.titleBar.update({title:u,description:s||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),e=>({kind:e.kind,label:e.label,language:e.language,src:e.src})),i={src:t,textTracks:n};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:Hs(i.poster)}]),i}return In(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=gi(e),i=n["data-setup"];if(ci(e,"vjs-fill")&&(n.fill=!0),ci(e,"vjs-fluid")&&(n.fluid=!0),null!==i)try{Object.assign(n,JSON.parse(i||"{}"))}catch(r){bn.error("data-setup",r)}if(Object.assign(t,n),e.hasChildNodes()){const n=e.childNodes;for(let e=0,i=n.length;e<i;e++){const i=n[e],r=i.nodeName.toLowerCase();"source"===r?t.sources.push(gi(i)):"track"===r&&t.tracks.push(gi(i))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(e=>"number"===typeof e)&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}el.prototype.videoTracks=()=>{},el.prototype.audioTracks=()=>{},el.prototype.textTracks=()=>{},el.prototype.remoteTextTracks=()=>{},el.prototype.remoteTextTrackEls=()=>{},_s.names.forEach(function(e){const t=_s[e];el.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),el.prototype.crossorigin=el.prototype.crossOrigin,el.players={};const tl=r().navigator;el.prototype.options_={techOrder:Ss.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:tl&&(tl.languages&&tl.languages[0]||tl.userLanguage||tl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1},Yo.forEach(function(e){el.prototype[`handleTech${Ar(e)}_`]=function(){return this.trigger(e)}}),xr.registerComponent("Player",el);const nl="plugin",il="activePlugins_",rl={},sl=e=>rl.hasOwnProperty(e),al=e=>sl(e)?rl[e]:void 0,ol=(e,t)=>{e[il]=e[il]||{},e[il][t]=!0},ll=(e,t,n)=>{const i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},ul=function(e,t){const n=function(){ll(this,{name:e,plugin:t,instance:null},!0);const n=t.apply(this,arguments);return ol(this,e),ll(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},cl=(e,t)=>(t.prototype.name=e,function(...n){ll(this,{name:e,plugin:t,instance:null},!0);const i=new t(...[this,...n]);return this[e]=()=>i,ll(this,i.getEventHash()),i});class dl{constructor(e){if(this.constructor===dl)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),_r(this),delete this.trigger,Sr(this,this.constructor.defaultState),ol(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return er(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[il][e]=!1,this.player=this.state=null,t[e]=cl(e,rl[e])}static isBasic(e){const t="string"===typeof e?al(e):e;return"function"===typeof t&&!dl.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!==typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(sl(e))bn.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(el.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!==typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return rl[e]=t,e!==nl&&(dl.isBasic(t)?el.prototype[e]=ul(e,t):el.prototype[e]=cl(e,t)),t}static deregisterPlugin(e){if(e===nl)throw new Error("Cannot de-register base plugin.");sl(e)&&(delete rl[e],delete el.prototype[e])}static getPlugins(e=Object.keys(rl)){let t;return e.forEach(e=>{const n=al(e);n&&(t=t||{},t[e]=n)}),t}static getPluginVersion(e){const t=al(e);return t&&t.VERSION||""}}function hl(e,t){let n=!1;return function(...i){return n||bn.warn(e),n=!0,t.apply(this,i)}}function pl(e,t,n,i){return hl(`${t} is deprecated and will be removed in ${e}.0; please use ${n} instead.`,i)}dl.getPlugin=al,dl.BASE_PLUGIN_NAME=nl,dl.registerPlugin(nl,dl),el.prototype.usingPlugin=function(e){return!!this[il]&&!0===this[il][e]},el.prototype.hasPlugin=function(e){return!!sl(e)};var fl={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const gl=e=>0===e.indexOf("#")?e.slice(1):e;function ml(e,t,n){let i=ml.getPlayer(e);if(i)return t&&bn.warn(`Player "${e}" is already initialised. Options will not be applied.`),n&&i.ready(n),i;const s="string"===typeof e?Mi("#"+gl(e)):e;if(!ri(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a="getRootNode"in s&&s.getRootNode()instanceof r().ShadowRoot,o=a?s.getRootNode():s.ownerDocument.body;s.ownerDocument.defaultView&&o.contains(s)||bn.warn("The element supplied is not included in the DOM"),t=t||{},!0===t.restoreEl&&(t.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),ln("beforesetup").forEach(e=>{const n=e(s,In(t));An(n)&&!Array.isArray(n)?t=In(t,n):bn.error("please return an object in beforesetup hooks")});const l=xr.getComponent("Player");return i=new l(s,t,n),ln("setup").forEach(e=>e(i)),i}if(ml.hooks_=on,ml.hooks=ln,ml.hook=un,ml.hookOnce=dn,ml.removeHook=cn,!0!==r().VIDEOJS_NO_DYNAMIC_STYLE&&ii()){let e=Mi(".vjs-styles-defaults");if(!e){e=ji("vjs-styles-defaults");const t=Mi("head");t&&t.insertBefore(e,t.firstChild),Vi(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Bi(1,ml),ml.VERSION=an,ml.options=el.prototype.options_,ml.getPlayers=()=>el.players,ml.getPlayer=e=>{const t=el.players;let n;if("string"===typeof e){const i=gl(e),r=t[i];if(r)return r;n=Mi("#"+i)}else n=e;if(ri(n)){const{player:e,playerId:i}=n;if(e||t[i])return e||t[i]}},ml.getAllPlayers=()=>Object.keys(el.players).map(e=>el.players[e]).filter(Boolean),ml.players=el.players,ml.getComponent=xr.getComponent,ml.registerComponent=(e,t)=>(Ss.isTech(t)&&bn.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),xr.registerComponent.call(xr,e,t)),ml.getTech=Ss.getTech,ml.registerTech=Ss.registerTech,ml.use=Is,Object.defineProperty(ml,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ml.middleware,"TERMINATOR",{value:Cs,writeable:!1,enumerable:!0}),ml.browser=ei,ml.obj=Mn,ml.mergeOptions=pl(9,"videojs.mergeOptions","videojs.obj.merge",In),ml.defineLazyProperty=pl(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",kn),ml.bind=pl(9,"videojs.bind","native Function.prototype.bind",sr),ml.registerPlugin=dl.registerPlugin,ml.deregisterPlugin=dl.deregisterPlugin,ml.plugin=(e,t)=>(bn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),dl.registerPlugin(e,t)),ml.getPlugins=dl.getPlugins,ml.getPlugin=dl.getPlugin,ml.getPluginVersion=dl.getPluginVersion,ml.addLanguage=function(e,t){return e=(""+e).toLowerCase(),ml.options.languages=In(ml.options.languages,{[e]:t}),ml.options.languages[e]},ml.log=bn,ml.createLogger=Tn,ml.time=Br,ml.createTimeRange=pl(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Rr),ml.createTimeRanges=pl(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Rr),ml.formatTime=pl(9,"videojs.formatTime","videojs.time.formatTime",Ur),ml.setFormatTime=pl(9,"videojs.setFormatTime","videojs.time.setFormatTime",Lr),ml.resetFormatTime=pl(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Pr),ml.parseUrl=pl(9,"videojs.parseUrl","videojs.url.parseUrl",ls),ml.isCrossOrigin=pl(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",ds),ml.EventTarget=cr,ml.any=nr,ml.on=Zi,ml.one=tr,ml.off=Ji,ml.trigger=er,ml.xhr=l(),ml.TrackList=Yr,ml.TextTrack=gs,ml.TextTrackList=es,ml.AudioTrack=ms,ml.AudioTrackList=Qr,ml.VideoTrack=ys,ml.VideoTrackList=Jr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(e=>{ml[e]=function(){return bn.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),Ni[e].apply(null,arguments)}}),ml.computedStyle=pl(9,"videojs.computedStyle","videojs.dom.computedStyle",Ri),ml.dom=Ni,ml.fn=lr,ml.num=Ta,ml.str=Ir,ml.url=hs,ml.Error=fl;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */
class yl{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(e){t.enabled_(e)}}),t}}class vl extends ml.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new yl(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}vl.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const Up in vl.prototype.allowedEvents_)vl.prototype["on"+Up]=null;var bl="4.1.0";const Tl=function(e,t){const n=e.qualityLevels,i=new vl,r=function(){i.dispose(),e.qualityLevels=n,e.off("dispose",r)};return e.on("dispose",r),e.qualityLevels=()=>i,e.qualityLevels.VERSION=bl,i},_l=function(e){return Tl(this,ml.obj.merge({},e))};ml.registerPlugin("qualityLevels",_l),_l.VERSION=bl;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */
const wl=f,Sl=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,El=e=>ml.log.debug?ml.log.debug.bind(ml,"VHS:",`${e} >`):function(){};function Al(...e){const t=ml.obj||ml,n=t.merge||t.mergeOptions;return n.apply(t,e)}function Cl(...e){const t=ml.time||ml,n=t.createTimeRanges||t.createTimeRanges;return n.apply(t,e)}function Il(e){if(0===e.length)return"Buffered Ranges are empty";let t="Buffered Ranges: \n";for(let n=0;n<e.length;n++){const i=e.start(n),r=e.end(n);t+=`${i} --\x3e ${r}. Duration (${r-i})\n`}return t}const xl=1/30,kl=3*xl,Ml=function(e,t){const n=[];let i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Cl(n)},Dl=function(e,t){return Ml(e,function(e,n){return e-kl<=t&&n+kl>=t})},Rl=function(e,t){return Ml(e,function(e){return e-xl>=t})},Ol=function(e){if(e.length<2)return Cl();const t=[];for(let n=1;n<e.length;n++){const i=e.end(n-1),r=e.start(n);t.push([i,r])}return Cl(t)},Nl=function(e,t){let n=null,i=null,r=0;const s=[],a=[];if(!e||!e.length||!t||!t.length)return Cl();let o=e.length;while(o--)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});o=t.length;while(o--)s.push({time:t.start(o),type:"start"}),s.push({time:t.end(o),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),o=0;o<s.length;o++)"start"===s[o].type?(r++,2===r&&(n=s[o].time)):"end"===s[o].type&&(r--,1===r&&(i=s[o].time)),null!==n&&null!==i&&(a.push([n,i]),n=null,i=null);return Cl(a)},Ll=e=>{const t=[];if(!e||!e.length)return"";for(let n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Pl=function(e,t,n=1){const i=e.length?e.end(e.length-1):0;return(i-t)/n},Ul=e=>{const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},Bl=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1},Fl=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},jl=function(e,t){let n=0;if(!e||!e.length)return n;for(let i=0;i<e.length;i++){const r=e.start(i),s=e.end(i);t>s||(n+=t>r&&t<=s?s-t:s-r)}return n},Vl=(e,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach(function(e){n+=e.duration}),(t.preloadHints||[]).forEach(function(t){"PART"===t.type&&(n+=e.partTargetDuration)}),n},Hl=e=>(e.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),zl=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Gl=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:n}=e;let i=(n||[]).reduce((e,t)=>e+("PART"===t.type?1:0),0);return i+=t&&t.length?t.length:0,i},ql=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const n=zl(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Wl=function(e,t){let n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}while(i--){if(r=e.segments[i],"undefined"!==typeof r.end)return{result:n+r.end,precise:!0};if(n+=Vl(e,r),"undefined"!==typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},Xl=function(e,t){let n,i=0,r=t-e.mediaSequence;for(;r<e.segments.length;r++){if(n=e.segments[r],"undefined"!==typeof n.start)return{result:n.start-i,precise:!0};if(i+=Vl(e,n),"undefined"!==typeof n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}},Kl=function(e,t,n){if("undefined"===typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const i=Wl(e,t);if(i.precise)return i.result;const r=Xl(e,t);return r.precise?r.result:i.result+n},Yl=function(e,t,n){if(!e)return 0;if("number"!==typeof n&&(n=0),"undefined"===typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return r()[1/0]}return Kl(e,t,n)},$l=function({defaultDuration:e,durationList:t,startIndex:n,endIndex:i}){let r=0;if(n>i&&([n,i]=[i,n]),n<0){for(let t=n;t<Math.min(0,i);t++)r+=e;n=0}for(let s=n;s<i;s++)r+=t[s].duration;return r},Ql=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return Yl(e);if(null===t)return null;t=t||0;let r=Kl(e,e.mediaSequence+e.segments.length,t);return n&&(i="number"===typeof i?i:ql(null,e),r-=i),Math.max(0,r)},Zl=function(e,t,n){const i=!0,r=t||0;let s=Ql(e,t,i,n);return null===s?Cl():(s<r&&(s=r),Cl(r,s))},Jl=function({playlist:e,currentTime:t,startingSegmentIndex:n,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let a=t-r;const o=Hl(e);let l=0;for(let u=0;u<o.length;u++){const e=o[u];if(n===e.segmentIndex&&("number"!==typeof i||"number"!==typeof e.partIndex||i===e.partIndex)){l=u;break}}if(a<0){if(l>0)for(let t=l-1;t>=0;t--){const n=o[t];if(a+=n.duration,s){if(a<0)continue}else if(a+xl<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:r-$l({defaultDuration:e.targetDuration,durationList:o,startIndex:l,endIndex:t})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:t}}if(l<0){for(let n=l;n<0;n++)if(a-=e.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:t};l=0}for(let u=l;u<o.length;u++){const t=o[u];a-=t.duration;const n=t.duration>xl,i=0===a,c=n&&a+xl>=0;if(!i&&!c||u===o.length-1){if(s){if(a>0)continue}else if(a-xl>=0)continue;return{partIndex:t.partIndex,segmentIndex:t.segmentIndex,startTime:r+$l({defaultDuration:e.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:t}},eu=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},tu=function(e){return e.excludeUntil&&e.excludeUntil===1/0},nu=function(e){const t=eu(e);return!e.disabled&&!t},iu=function(e){return e.disabled},ru=function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},su=function(e,t){return t.attributes&&t.attributes[e]},au=function(e,t,n,i=0){if(!su("BANDWIDTH",n))return NaN;const r=e*n.attributes.BANDWIDTH;return(r-8*i)/t},ou=(e,t)=>{if(1===e.playlists.length)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(e=>!!nu(e)&&(e.attributes.BANDWIDTH||0)<n).length},lu=(e,t)=>!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri)))),uu=function(e,t){const n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let i=!1;for(const r in n){for(const e in n[r])if(i=t(n[r][e]),i)break;if(i)break}return!!i},cu=e=>{if(!e||!e.playlists||!e.playlists.length){const t=uu(e,e=>e.playlists&&e.playlists.length||e.uri);return t}for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;if(i&&i.split(",").every(e=>L(e)))continue;const r=uu(e,e=>lu(n,e));if(!r)return!1}return!0};var du={liveEdgeDelay:ql,duration:Yl,seekable:Zl,getMediaInfoForTime:Jl,isEnabled:nu,isDisabled:iu,isExcluded:eu,isIncompatible:tu,playlistEnd:Ql,isAes:ru,hasAttribute:su,estimateSegmentRequestTime:au,isLowestEnabledRendition:ou,isAudioOnly:cu,playlistMatch:lu,segmentDurationWithParts:Vl};const{log:hu}=ml,pu=(e,t)=>`${e}-${t}`,fu=(e,t,n)=>`placeholder-uri-${e}-${t}-${n}`,gu=({onwarn:e,oninfo:t,manifestString:n,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const a=new x;e&&a.on("warn",e),t&&a.on("info",t),i.forEach(e=>a.addParser(e)),r.forEach(e=>a.addTagMapper(e)),a.push(n),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e){o.hasOwnProperty(e)&&delete o[e]}),o.segments&&o.segments.forEach(function(e){["parts","preloadHints"].forEach(function(t){e.hasOwnProperty(t)&&delete e[t]})})),!o.targetDuration){let t=10;o.segments&&o.segments.length&&(t=o.segments.reduce((e,t)=>Math.max(e,t.duration),0)),e&&e({message:`manifest has no targetDuration defaulting to ${t}`}),o.targetDuration=t}const l=zl(o);if(l.length&&!o.partTargetDuration){const t=l.reduce((e,t)=>Math.max(e,t.duration),0);e&&(e({message:`manifest has no partTargetDuration defaulting to ${t}`}),hu.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=t}return o},mu=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(e.mediaGroups[n])for(const i in e.mediaGroups[n])for(const r in e.mediaGroups[n][i]){const s=e.mediaGroups[n][i][r];t(s,n,i,r)}})},yu=({playlist:e,uri:t,id:n})=>{e.id=n,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},vu=e=>{let t=e.playlists.length;while(t--){const n=e.playlists[t];yu({playlist:n,id:pu(t,n.uri)}),n.resolvedUri=wl(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||hu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},bu=e=>{mu(e,t=>{t.uri&&(t.resolvedUri=wl(e.uri,t.uri))})},Tu=(e,t)=>{const n=pu(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:r().location.href,resolvedUri:r().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i},_u=(e,t,n=fu)=>{e.uri=t;for(let r=0;r<e.playlists.length;r++)if(!e.playlists[r].uri){const t=`placeholder-uri-${r}`;e.playlists[r].uri=t}const i=cu(e);mu(e,(t,r,s,a)=>{if(!t.playlists||!t.playlists.length){if(i&&"AUDIO"===r&&!t.uri)for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t];if(n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===s)return}t.playlists=[d({},t)]}t.playlists.forEach(function(t,i){const o=n(r,s,a,t),l=pu(i,o);t.uri?t.resolvedUri=t.resolvedUri||wl(e.uri,t.uri):(t.uri=0===i?o:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t})}),vu(e),bu(e)};class wu{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(null!==this.offset_)return;if(!e.length)return;const[t]=e;void 0!==t.programDateTime&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((e,t)=>(e.set(t.id,t),e),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(null===this.offset_)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,i)=>{if(!this.processedDateRanges_.has(i)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),n.class))if(e[n.class]){const t=e[n.class].push(n);n.classListIndex=t-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const t=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&t[n.classListIndex+1]?n.endTime=t[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){const t=new Map(this.processedDateRanges_);t.forEach((t,n)=>{t.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}}const Su=22,Eu=({requestType:e,request:t,error:n,parseFailure:i})=>{const r=t.status<200||t.status>299,s=t.status>=400&&t.status<=499,a={uri:t.uri,requestType:e},o=r&&!s||i;if(n&&s)a.error=d({},n),a.errorType=ml.Error.NetworkRequestFailed;else if(t.aborted)a.errorType=ml.Error.NetworkRequestAborted;else if(t.timedout)a.erroType=ml.Error.NetworkRequestTimeout;else if(o){const e=i?ml.Error.NetworkBodyParserFailed:ml.Error.NetworkBadStatus;a.errorType=e,a.status=t.status,a.headers=t.headers}return a},Au=El("CodecUtils"),Cu=function(e){const t=e.attributes||{};if(t.CODECS)return O(t.CODECS)},Iu=(e,t)=>{const n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},xu=(e,t)=>{if(!Iu(e,t))return!0;const n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},ku=function(e){const t={};return e.forEach(({mediaType:e,type:n,details:i})=>{t[e]=t[e]||[],t[e].push(R(`${n}${i}`))}),Object.keys(t).forEach(function(e){if(t[e].length>1)return Au(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]}),t},Mu=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Du=function(e,t){const n=t.attributes||{},i=ku(Cu(t)||[]);if(Iu(e,t)&&!i.audio&&!xu(e,t)){const t=ku(N(e,n.AUDIO)||[]);t.audio&&(i.audio=t.audio)}return i},{EventTarget:Ru}=ml,Ou=(e,t)=>{if(t.endList||!t.serverControl)return e;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let i=t.mediaSequence+t.segments.length;if(e){const r=e.parts||[],s=Gl(t)-1;s>-1&&s!==r.length-1&&(n._HLS_part=s),(s>-1||r.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const t=new(r().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(e){n.hasOwnProperty(e)&&t.searchParams.set(e,n[e])}),e=t.toString()}return e},Nu=(e,t)=>{if(!e)return t;const n=Al(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(let i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=Al(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Lu=(e,t,n)=>{const i=e.slice(),r=t.slice();n=n||0;const s=[];let a;for(let o=0;o<r.length;o++){const e=i[o+n],t=r[o];e?(a=e.map||a,s.push(Nu(e,t))):(a&&!t.map&&(t.map=a),s.push(t))}return s},Pu=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=wl(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=wl(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=wl(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=wl(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(e=>{e.resolvedUri||(e.resolvedUri=wl(t,e.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(e=>{e.resolvedUri||(e.resolvedUri=wl(t,e.uri))})},Uu=function(e){const t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Bu=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,Fu=(e,t,n=Bu)=>{const i=Al(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=Uu(t);const s=Al(r,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}s.segments=Lu(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}s.segments.forEach(e=>{Pu(e,s.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=s);return i.playlists[t.id]=s,i.playlists[t.uri]=s,mu(e,(e,n,i,r)=>{if(e.playlists)for(let a=0;a<e.playlists.length;a++)t.id===e.playlists[a].id&&(e.playlists[a]=s)}),i},ju=(e,t)=>{const n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return t&&s?1e3*s:500*(e.partTargetDuration||e.targetDuration||10)},Vu=(e,t,n)=>{if(!e)return;const i=[];return e.forEach(e=>{if(!e.attributes)return;const{BANDWIDTH:t,RESOLUTION:n,CODECS:r}=e.attributes;i.push({id:e.id,bandwidth:t,resolution:n,codecs:r})}),{type:t,isLive:n,renditions:i}};class Hu extends Ru{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=El("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new wu,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();t.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=wl(this.main.uri,e.uri);this.llhls&&(t=Ou(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}playlistRequestError(e,t,n){const{uri:i,id:r}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Eu({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const n=gu({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return n.playlists&&n.playlists.length?(this.excludeAudioOnlyVariants(n.playlists),n):n}catch(n){this.error=n,this.error.metadata={errorType:ml.Error.StreamingHlsPlaylistParserError,error:n}}}excludeAudioOnlyVariants(e){const t=e=>{const t=e.attributes||{},{width:n,height:i}=t.RESOLUTION||{};if(n&&i)return!0;const r=Cu(e)||[],s=ku(r);return Boolean(s.video)};e.some(t)&&e.forEach(e=>{t(e)||(e.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:r});const s=t||this.parseManifest_({url:n,manifestString:e});s.lastRequest=Date.now(),yu({playlist:s,uri:n,id:i});const a=Fu(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,a?(this.main=a,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(ju(this.media(),!!a)),r.parsedPlaylist=Vu(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),r().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new wu,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(r().clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=r().setTimeout(this.media.bind(this,e,!1),t))}const n=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(ju(e,!0)),!i)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,i)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Sl(e.resolvedUri,i),t)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},e)}else this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=r().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=r().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:Eu({requestType:n.requestType,request:n,error:t})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Sl(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const i=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=Vu(i.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(i)})}srcUri(){return"string"===typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,_u(this.main,this.srcUri()),e.playlists.forEach(e=>{e.segments=Uu(e),e.segments.forEach(t=>{Pu(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||r().location.href;this.main=Tu(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,i=e.ID;let r=n.playlists.length;while(r--){const s=n.playlists[r];if(s.attributes["PATHWAY-ID"]===i){const a=s.resolvedUri,o=s.id;if(t){const t=this.createCloneURI_(s.resolvedUri,e),a=pu(i,t),o=this.createCloneAttributes_(i,s.attributes),l=this.createClonePlaylist_(s,a,e,o);n.playlists[r]=l,n.playlists[a]=l,n.playlists[t]=l}else n.playlists.splice(r,1);delete n.playlists[o],delete n.playlists[a]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,i=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{if(n.mediaGroups[e]&&n.mediaGroups[e][i])for(const t in n.mediaGroups[e])if(t===i){for(const i in n.mediaGroups[e][t]){const r=n.mediaGroups[e][t][i];r.playlists.forEach((e,t)=>{const i=n.playlists[e.id],r=i.id,s=i.resolvedUri;delete n.playlists[r],delete n.playlists[s]})}delete n.mediaGroups[e][t]}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,i=n.playlists.length,r=this.createCloneURI_(t.resolvedUri,e),s=pu(e.ID,r),a=this.createCloneAttributes_(e.ID,t.attributes),o=this.createClonePlaylist_(t,s,e,a);n.playlists[i]=o,n.playlists[s]=o,n.playlists[r]=o,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],i=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(i.mediaGroups[r]&&!i.mediaGroups[r][t])for(const s in i.mediaGroups[r])if(s===n){i.mediaGroups[r][t]={};for(const n in i.mediaGroups[r][s]){const a=i.mediaGroups[r][s][n];i.mediaGroups[r][t][n]=d({},a);const o=i.mediaGroups[r][t][n],l=this.createCloneURI_(a.resolvedUri,e);o.resolvedUri=l,o.uri=l,o.playlists=[],a.playlists.forEach((s,a)=>{const l=i.playlists[s.id],u=fu(r,t,n),c=pu(t,u);if(l&&!i.playlists[c]){const t=this.createClonePlaylist_(l,c,e),n=t.resolvedUri;i.playlists[c]=t,i.playlists[n]=t}o.playlists[a]=this.createClonePlaylist_(s,c,e)})}}})}createClonePlaylist_(e,t,n,i){const r=this.createCloneURI_(e.resolvedUri,n),s={resolvedUri:r,uri:r,id:t};return e.segments&&(s.segments=[]),i&&(s.attributes=i),Al(e,s)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const i=t["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(i))n.searchParams.set(r,i[r]);return n.href}createCloneAttributes_(e,t){const n={["PATHWAY-ID"]:e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{t[i]&&(n[i]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes.keyId;i&&t.add(i.toLowerCase())}return t}}}const zu=function(e,t,n,i){const r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},Gu=(e,t)=>{if(!e||!e.size)return;let n=t;return e.forEach(e=>{n=e(n)}),n},qu=(e,t,n,i)=>{e&&e.size&&e.forEach(e=>{e(t,n,i)})},Wu=function(){const e=function e(t,n){t=Al({timeout:45e3},t);const i=e.beforeRequest||ml.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||ml.Vhs.xhr._requestCallbackSet||new Set,s=e._responseCallbackSet||ml.Vhs.xhr._responseCallbackSet;i&&"function"===typeof i&&(ml.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(i));const a=!0===ml.Vhs.xhr.original?ml.xhr:ml.Vhs.xhr,o=Gu(r,t);r.delete(i);const l=a(o||t,function(e,t){return qu(s,l,e,t),zu(l,e,t,n)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=t.uri,l.requestType=t.requestType,l.requestTime=Date.now(),l};return e.original=!0,e},Xu=function(e){let t;const n=e.offset;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?r().BigInt(e.offset)+r().BigInt(e.length)-r().BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+t},Ku=function(e){const t={};return e.byterange&&(t.Range=Xu(e.byterange)),t},Yu=function(e,t){return e.start(t)+"-"+e.end(t)},$u=function(e,t){const n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Qu=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Zu=function(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];X(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i}),t},Ju=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},ec=function(e){return e.resolvedUri},tc=e=>{const t=Array.prototype.slice.call(e),n=16;let i,r,s="";for(let a=0;a<t.length/n;a++)i=t.slice(a*n,a*n+n).map($u).join(""),r=t.slice(a*n,a*n+n).map(Qu).join(""),s+=i+" "+r+"\n";return s},nc=({bytes:e})=>tc(e),ic=e=>{let t,n="";for(t=0;t<e.length;t++)n+=Yu(e,t)+" ";return n};var rc=Object.freeze({__proto__:null,createTransferableMessage:Zu,initSegmentId:Ju,segmentKeyId:ec,hexDump:tc,tagDump:nc,textRanges:ic});const sc=.25,ac=(e,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,i=t.videoTimingInfo.transmuxedPresentationStart,r=i+n,s=e-r;return new Date(t.dateTimeObject.getTime()+1e3*s)},oc=e=>e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds,lc=(e,t)=>{let n;try{n=new Date(e)}catch(l){return null}if(!t||!t.segments||0===t.segments.length)return null;let i=t.segments[0];if(n<new Date(i.dateTimeObject))return null;for(let u=0;u<t.segments.length-1;u++){i=t.segments[u];const e=new Date(t.segments[u+1].dateTimeObject);if(n<e)break}const r=t.segments[t.segments.length-1],s=r.dateTimeObject,a=r.videoTimingInfo?oc(r.videoTimingInfo):r.duration+r.duration*sc,o=new Date(s.getTime()+1e3*a);return n>o?null:(n>new Date(s)&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:du.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},uc=(e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let n,i=0;for(let s=0;s<t.segments.length;s++)if(n=t.segments[s],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,e<=i)break;const r=t.segments[t.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+r.duration*sc)return null;n=r}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},cc=(e,t)=>{let n,i;try{n=new Date(e),i=new Date(t)}catch(a){}const r=n.getTime(),s=i.getTime();return(s-r)/1e3},dc=e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++){const n=e.segments[t];if(!n.dateTimeObject)return!1}return!0},hc=({playlist:e,time:t,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return n({message:"getProgramTime: playlist and time must be provided"});const i=uc(t,e);if(!i)return n({message:"valid programTime was not found"});if("estimate"===i.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:t},s=ac(t,i.segment);return s&&(r.programDateTime=s.toISOString()),n(null,r)},pc=({programTime:e,playlist:t,retryCount:n=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof e||!t||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!dc(t))return a({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const o=lc(e,t);if(!o)return a({message:`${e} was not found in the stream`});const l=o.segment,u=cc(l.dateTimeObject,e);if("estimate"===o.type)return 0===n?a({message:`${e} is not buffered yet. Try again`}):(i(o.estimatedStart+u),void s.one("seeked",()=>{pc({programTime:e,playlist:t,retryCount:n-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:a})}));const c=l.start+u,d=()=>a(null,s.currentTime());s.one("seeked",d),r&&s.pause(),i(c)},fc=(e,t)=>{if(4===e.readyState)return t()},gc=(e,t,n,i)=>{let r,s=[],a=!1;const o=function(e,t,i,r){return t.abort(),a=!0,n(e,t,i,r)},l=function(e,t){if(a)return;if(e)return e.metadata=Eu({requestType:i,request:t,error:e}),o(e,t,"",s);const n=t.responseText.substring(s&&s.byteLength||0,t.responseText.length);if(s=ne(s,te(n,!0)),r=r||Rt(s),s.length<10||r&&s.length<r+2)return fc(t,()=>o(e,t,"",s));const l=nn(s);return"ts"===l&&s.length<188||!l&&s.length<376?fc(t,()=>o(e,t,"",s)):o(null,t,l,s)},u={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function({total:t,loaded:n}){return zu(e,null,{statusCode:e.status},l)})}},c=t(u,function(e,t){return zu(c,e,t,l)});return c},{EventTarget:mc}=ml,yc=function(e,t){if(!Bu(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let n=0;n<e.segments.length;n++){const i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,a=r.byterange;if(s&&!a||!s&&a)return!1;if(s.offset!==a.offset||s.length!==a.length)return!1}return!0},vc=(e,t,n,i)=>{const r=i.attributes.NAME||n;return`placeholder-uri-${e}-${t}-${r}`},bc=({mainXml:e,srcUrl:t,clientOffset:n,sidxMapping:i,previousManifest:r})=>{const s=At(e,{manifestUri:t,clientOffset:n,sidxMapping:i,previousManifest:r});return _u(s,t,vc),s},Tc=(e,t)=>{mu(e,(n,i,r,s)=>{t.mediaGroups[i][r]&&s in t.mediaGroups[i][r]||delete e.mediaGroups[i][r][s]})},_c=(e,t,n)=>{let i=!0,r=Al(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let s=0;s<t.playlists.length;s++){const e=t.playlists[s];if(e.sidx){const t=De(e.sidx);n&&n[t]&&n[t].sidx&&we(e,n[t].sidx,e.sidx.resolvedUri)}const a=Fu(r,e,yc);a&&(r=a,i=!1)}return mu(t,(e,t,n,s)=>{if(e.playlists&&e.playlists.length){const a=e.playlists[0].id,o=Fu(r,e.playlists[0],yc);o&&(r=o,s in r.mediaGroups[t][n]||(r.mediaGroups[t][n][s]=e),r.mediaGroups[t][n][s].playlists[0]=r.playlists[a],i=!1)}}),Tc(r,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r},wc=(e,t)=>{const n=Boolean(!e.map&&!t.map),i=n||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return i&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Sc=(e,t)=>{const n={};for(const i in e){const r=e[i],s=r.sidx;if(s){const e=De(s);if(!t[e])break;const i=t[e].sidxInfo;wc(i,s)&&(n[e]=t[e])}}return n},Ec=(e,t)=>{const n=Sc(e.playlists,t);let i=n;return mu(e,(e,n,r,s)=>{if(e.playlists&&e.playlists.length){const n=e.playlists;i=Al(i,Sc(n,t))}}),i};class Ac extends mc{constructor(e,t,n={},i){super(),this.isPaused_=!0,this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=t,this.withCredentials=r,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=El("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!==typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,n){const i=e.sidx&&De(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return r().clearTimeout(this.mediaRequest_),void(this.mediaRequest_=r().setTimeout(()=>n(!1),0));const s=Sl(e.sidx.resolvedUri),a=(r,s)=>{if(this.requestErrored_(r,s,t))return;const a=this.mainPlaylistLoader_.sidxMapping_,{requestType:o}=s;let l;try{l=kt()(Y(s.response).subarray(8))}catch(u){return u.metadata=Eu({requestType:o,request:s,parseFailure:!0}),void this.requestErrored_(u,s,t)}return a[i]={sidxInfo:e.sidx,sidx:l},we(e,l,e.sidx.resolvedUri),n(!0)},o="dash-sidx";this.request=gc(s,this.vhs_.xhr,(t,n,i,r)=>{if(t)return a(t,n);if(!i||"mp4"!==i){const t=i||"unknown";return a({status:n.status,message:`Unsupported ${t} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n)}const{offset:o,length:l}=e.sidx.byterange;if(r.length>=l+o)return a(t,{response:r.subarray(o,o+l),status:n.status,uri:n.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:Ku({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},r().clearTimeout(this.minimumUpdatePeriodTimeout_),r().clearTimeout(this.mediaRequest_),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"===typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,n=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,r().clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(r().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){this.isPaused_=!1,r().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=r().setTimeout(()=>this.load(),e)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){if(this.started=!0,!this.isMain_)return r().clearTimeout(this.mediaRequest_),void(this.mediaRequest_=r().setTimeout(()=>this.haveMain_(),0));this.requestMain_((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,i)=>{if(n){const{requestType:e}=i;n.metadata=Eu({requestType:e,request:i,error:n})}if(this.requestErrored_(n,i))return void("HAVE_NOTHING"===this.state&&(this.started=!1));this.trigger({type:"manifestrequestcomplete",metadata:t});const r=i.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Sl(this.mainPlaylistLoader_.srcUrl,i),r?(this.handleMain_(),void this.syncClientServerClock_(()=>e(i,r))):e(i,r)})}syncClientServerClock_(e){const t=Ct(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:wl(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,i)=>{if(!this.request)return;if(n){const{requestType:t}=i;return this.error.metadata=Eu({requestType:t,request:i,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let r;r="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){r().clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let n;this.trigger({type:"manifestparsestart",metadata:t});try{n=bc({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:ml.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(n=_c(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:e,endList:i}=n,r=[];n.playlists.forEach(e=>{r.push({id:e.id,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS})});const s={duration:e,isLive:!i,renditions:r};t.parsedManifest=s,this.trigger({type:"manifestparsecomplete",metadata:t})}return Boolean(n)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(r().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!==typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=r().setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Ec(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,e=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=r().setTimeout(()=>{this.trigger("mediaupdatetimeout"),e()},ju(this.media(),Boolean(n))))};e()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const e=this.mainPlaylistLoader_.main.eventStream.map(e=>({cueTime:e.start,frames:[{data:e.messageData}]}));this.addMetadataToTextTrack("EventStream",e,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const i=e.contentProtection[n].attributes["cenc:default_KID"];i&&t.add(i.replace(/-/g,"").toLowerCase())}return t}}}var Cc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Ic=e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer},xc=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},kc=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(t){const n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}},Mc=function(e){return function(){const t=kc(e),n=xc(new Worker(t));n.objURL=t;const i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},Dc=function(e){return`var browserWorkerPolyFill = ${xc.toString()};\nbrowserWorkerPolyFill(self);\n`+e},Rc=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Oc=Dc(Rc(function(){var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,s;if(n=e[t],n)if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(s=[],i=arguments.length,i=1;i<arguments.length;++i)s.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,s)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var i,r,s,a,o,l,u,c,d,h,p,f,g,m,y,v,b,T,_,w,S,E,A,C,I,x,k,M,D,R,O,N,L,P,U,B,F=t,j=Math.pow(2,32),V=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):n.getUint32(0)*j+n.getUint32(4)},H={getUint64:V,MAX_UINT32:j},z=H.MAX_UINT32;(function(){var e;if(A={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in A)A.hasOwnProperty(e)&&(A[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),M=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:k,audio:M},N=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),P=L,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=L,R=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),i=function(e){var t,n,i,r=[],s=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);t=r.length;while(t--)s+=r[t].byteLength;for(n=new Uint8Array(s+8),i=new DataView(n.buffer,n.byteOffset,n.byteLength),i.setUint32(0,n.byteLength),n.set(e,4),t=0,s=8;t<r.length;t++)n.set(r[t],s),s+=r[t].byteLength;return n},r=function(){return i(A.dinf,i(A.dref,N))},s=function(e){return i(A.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return i(A.ftyp,C,I,C,x)},v=function(e){return i(A.hdlr,D[e])},o=function(e){return i(A.mdat,e)},y=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),i(A.mdhd,t)},m=function(e){return i(A.mdia,y(e),v(e.type),u(e))},l=function(e){return i(A.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return i(A.minf,"video"===e.type?i(A.vmhd,R):i(A.smhd,O),r(),T(e))},c=function(e,t){var n=[],r=t.length;while(r--)n[r]=w(t[r]);return i.apply(null,[A.moof,l(e)].concat(n))},d=function(e){var t=e.length,n=[];while(t--)n[t]=f(e[t]);return i.apply(null,[A.moov,p(4294967295)].concat(n).concat(h(e)))},h=function(e){var t=e.length,n=[];while(t--)n[t]=S(e[t]);return i.apply(null,[A.mvex].concat(n))},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(A.mvhd,t)},b=function(e){var t,n,r=e.samples||[],s=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,s[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return i(A.sdtp,s)},T=function(e){return i(A.stbl,_(e),i(A.stts,B),i(A.stsc,P),i(A.stsz,U),i(A.stco,L))},function(){var e,t;_=function(n){return i(A.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n,r=e.sps||[],s=e.pps||[],a=[],o=[];for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));for(t=0;t<s.length;t++)o.push((65280&s[t].byteLength)>>>8),o.push(255&s[t].byteLength),o=o.concat(Array.prototype.slice.call(s[t]));if(n=[A.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(A.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],a,[s.length],o))),i(A.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];n.push(i(A.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return i.apply(null,n)},t=function(e){return i(A.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),s(e))}}(),g=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(A.tkhd,t)},w=function(e){var t,n,r,s,a,o,l;return t=i(A.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/z),l=Math.floor(e.baseMediaDecodeTime%z),n=i(A.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,l>>>24&255,l>>>16&255,l>>>8&255,255&l])),a=92,"audio"===e.type?(r=E(e,a),i(A.traf,t,n,r)):(s=b(e),r=E(e,s.length+a),i(A.traf,t,n,r,s))},f=function(e){return e.duration=e.duration||4294967295,i(A.trak,g(e),m(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),i(A.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,i=0,r=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|i|r|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var r,s,a,o,l,u;for(o=e.samples||[],t+=20+16*o.length,a=n(o,t),s=new Uint8Array(a.length+16*o.length),s.set(a),r=a.length,u=0;u<o.length;u++)l=o[u],s[r++]=(4278190080&l.duration)>>>24,s[r++]=(16711680&l.duration)>>>16,s[r++]=(65280&l.duration)>>>8,s[r++]=255&l.duration,s[r++]=(4278190080&l.size)>>>24,s[r++]=(16711680&l.size)>>>16,s[r++]=(65280&l.size)>>>8,s[r++]=255&l.size,s[r++]=l.flags.isLeading<<2|l.flags.dependsOn,s[r++]=l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,s[r++]=61440&l.flags.degradationPriority,s[r++]=15&l.flags.degradationPriority,s[r++]=(4278190080&l.compositionTimeOffset)>>>24,s[r++]=(16711680&l.compositionTimeOffset)>>>16,s[r++]=(65280&l.compositionTimeOffset)>>>8,s[r++]=255&l.compositionTimeOffset;return i(A.trun,s)},e=function(e,t){var r,s,a,o,l,u;for(o=e.samples||[],t+=20+8*o.length,a=n(o,t),r=new Uint8Array(a.length+8*o.length),r.set(a),s=a.length,u=0;u<o.length;u++)l=o[u],r[s++]=(4278190080&l.duration)>>>24,r[s++]=(16711680&l.duration)>>>16,r[s++]=(65280&l.duration)>>>8,r[s++]=255&l.duration,r[s++]=(4278190080&l.size)>>>24,r[s++]=(16711680&l.size)>>>16,r[s++]=(65280&l.size)>>>8,r[s++]=255&l.size;return i(A.trun,r)},E=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}();var G,q,W,X,K,Y,$,Q,Z={ftyp:a,mdat:o,moof:c,moov:d,initSegment:function(e){var t,n=a(),i=d(e);return t=new Uint8Array(n.byteLength+i.byteLength),t.set(n),t.set(i,n.byteLength),t}},J=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),i=[n],i.byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},ee=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),i=[n],i.nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},te=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ne=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},ie=function(e,t){var n=ne();return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},re=function(e,t){var n,i,r,s,a,o=t||0,l=[];for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i++)a=s[i],r=ie(a,o),o+=r.size,l.push(r);return l},se=function(e){var t,n,i,r,s,a,o=0,l=e.byteLength,u=e.nalCount,c=l+4*u,d=new Uint8Array(c),h=new DataView(d.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(s=r[n],i=0;i<s.length;i++)a=s[i],h.setUint32(o,a.data.byteLength),o+=4,d.set(a.data,o),o+=a.data.byteLength;return d},ae=function(e,t){var n,i=t||0,r=[];return n=ie(e,i),r.push(n),r},oe=function(e){var t,n,i=0,r=e.byteLength,s=e.length,a=r+4*s,o=new Uint8Array(a),l=new DataView(o.buffer);for(t=0;t<e.length;t++)n=e[t],l.setUint32(i,n.data.byteLength),i+=4,o.set(n.data,i),i+=n.data.byteLength;return o},le={groupNalsIntoFrames:J,groupFramesIntoGops:ee,extendFirstKeyFrame:te,generateSampleTable:re,concatenateNalData:se,generateSampleTableForFrame:ae,concatenateNalDataForFrame:oe},ue=[33,16,5,32,164,27],ce=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],de=function(e){var t=[];while(e--)t.push(0);return t},he=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=new Uint8Array(e[n].reduce(function(e,t){return e.concat(t)},[])),t},{})},pe=function(){if(!G){var e={96e3:[ue,[227,64],de(154),[56]],88200:[ue,[231],de(170),[56]],64e3:[ue,[248,192],de(240),[56]],48e3:[ue,[255,192],de(268),[55,148,128],de(54),[112]],44100:[ue,[255,192],de(268),[55,163,128],de(84),[112]],32e3:[ue,[255,192],de(268),[55,234],de(226),[112]],24e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,112],de(126),[224]],16e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,255],de(269),[223,108],de(195),[1,192]],12e3:[ce,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,253,128],de(259),[56]],11025:[ce,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,255,192],de(268),[55,175,128],de(108),[112]],8e3:[ce,de(268),[3,121,16],de(47),[7]]};G=he(e)}return G},fe=9e4;q=function(e){return e*fe},W=function(e,t){return e*t},X=function(e){return e/fe},K=function(e,t){return e/t},Y=function(e,t){return q(K(e,t))},$=function(e,t){return W(X(e),t)},Q=function(e,t,n){return X(n?e:e-t)};var ge={ONE_SECOND_IN_TS:fe,secondsToVideoTs:q,secondsToAudioTs:W,videoTsToSeconds:X,audioTsToSeconds:K,audioTsToVideoTs:Y,videoTsToAudioTs:$,metadataTsToSeconds:Q},me=pe,ye=ge,ve=function(e){var t,n,i=0;for(t=0;t<e.length;t++)n=e[t],i+=n.data.byteLength;return i},be=function(e,t,n,i){var r,s,a,o,l=0,u=0,c=0,d=0;if(t.length&&(r=ye.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),l=Math.ceil(ye.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(u=r-Math.max(n,i),c=Math.floor(u/l),d=c*l),!(c<1||d>ye.ONE_SECOND_IN_TS/2))){for(s=me()[e.samplerate],s||(s=t[0].data),a=0;a<c;a++)o=t[0],t.splice(0,0,{data:s,dts:o.dts-l,pts:o.pts-l});return e.baseMediaDecodeTime-=Math.floor(ye.videoTsToAudioTs(d,e.samplerate)),d}},Te=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},_e=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},we=function(e){var t,n,i=0,r=new Uint8Array(ve(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},Se={prefixWithSilence:be,trimAdtsFramesByEarliestDts:Te,generateSampleTable:_e,concatenateFrameData:we},Ee=ge.ONE_SECOND_IN_TS,Ae=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ce=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Ie=function(e,t){var n,i,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(i=e.samplerate/Ee,n*=i,n=Math.floor(n)),n},xe={clearDtsInfo:Ce,calculateTrackBaseMediaDecodeTime:Ie,collectDtsInfo:Ae},ke=4,Me=128,De=function(e){var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;while(t<e.byteLength){if(e[t]===Me)break;while(255===e[t])i+=255,t++;i+=e[t++];while(255===e[t])r+=255,t++;if(r+=e[t++],!n.payload&&i===ke){var s=String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6]);if("GA94"===s){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},Re=function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Oe=function(e,t){var n,i,r,s,a=[];if(!(64&t[0]))return a;for(i=31&t[0],n=0;n<i;n++)r=3*n,s={type:3&t[r+2],pts:e},4&t[r+2]&&(s.ccData=t[r+3]<<8|t[r+4],a.push(s));return a},Ne=function(e){var t,n,i=e.byteLength,r=[],s=1;while(s<i-2)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(s=0;s<t;a++,s++)a===r[0]&&(a++,r.shift()),n[s]=e[a];return n},Le={parseSei:De,parseUserData:Re,parseCaptionPackets:Oe,discardEmulationPreventionBytes:Ne,USER_DATA_REGISTERED_ITU_T_T35:ke},Pe=F,Ue=Le,Be=function(e){e=e||{},Be.prototype.init.call(this),this.parse708captions_="boolean"!==typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new $e(0,0),new $e(0,1),new $e(1,0),new $e(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ge({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Be.prototype=new Pe,Be.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Ue.parseSei(e.escapedRBSP),t.payload&&t.payloadType===Ue.USER_DATA_REGISTERED_ITU_T_T35&&(n=Ue.parseUserData(t),n)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Ue.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Be.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},Be.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Be.prototype.flush=function(){return this.flushStream("flush")},Be.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Be.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Be.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Be.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},Be.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},Be.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},Be.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var Fe={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},je=function(e){var t=Fe[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)},Ve=function(e){return 32<=e&&e<=127||160<=e&&e<=255},He=function(e){this.windowNum=e,this.reset()};He.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},He.prototype.getText=function(){return this.rows.join("\n")},He.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},He.prototype.newLine=function(e){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);while(this.rows.length>this.virtualRowCount)this.rows.shift(),this.rowIdx--},He.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},He.prototype.addText=function(e){this.rows[this.rowIdx]+=e},He.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var ze=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new He(-1),this.windows=[],this.stream=n,"string"===typeof t&&this.createTextDecoder(t)};ze.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new He(n),"function"===typeof t&&(this.windows[n].beforeRowOverflow=t)},ze.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},ze.prototype.createTextDecoder=function(e){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var Ge=function(e){e=e||{},Ge.prototype.init.call(this);var t,n=this,i=e.captionServices||{},r={};Object.keys(i).forEach(e=>{t=i[e],/^SERVICE/.test(e)&&(r[e]=t.encoding)}),this.serviceEncodings=r,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};Ge.prototype=new Pe,Ge.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ge.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},Ge.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,s=t[r++];for(e.seq=s>>6,e.sizeCode=63&s;r<t.length;r++)s=t[r++],n=s>>5,i=31&s,7===n&&i>0&&(s=t[r++],n=s),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},Ge.prototype.pushServiceBlock=function(e,t,n){var i,r=t,s=this.current708Packet.data,a=this.services[e];for(a||(a=this.initService(e,r));r<t+n&&r<s.length;r++)i=s[r],Ve(i)?r=this.handleText(r,a):24===i?r=this.multiByteCharacter(r,a):16===i?r=this.extendedCommands(r,a):128<=i&&i<=135?r=this.setCurrentWindow(r,a):152<=i&&i<=159?r=this.defineWindow(r,a):136===i?r=this.clearWindows(r,a):140===i?r=this.deleteWindows(r,a):137===i?r=this.displayWindows(r,a):138===i?r=this.hideWindows(r,a):139===i?r=this.toggleWindows(r,a):151===i?r=this.setWindowAttributes(r,a):144===i?r=this.setPenAttributes(r,a):145===i?r=this.setPenColor(r,a):146===i?r=this.setPenLocation(r,a):143===i?a=this.reset(r,a):8===i?a.currentWindow.backspace():12===i?a.currentWindow.clearText():13===i?a.currentWindow.pendingNewLine=!0:14===i?a.currentWindow.clearText():141===i&&r++},Ge.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data,i=n[++e];return Ve(i)&&(e=this.handleText(e,t,{isExtended:!0})),e},Ge.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Ge.prototype.initService=function(e,t){var n,i="SERVICE"+e,r=this;return i in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[e]=new ze(e,n,r),this.services[e].init(this.getPts(t),function(t){r.flushDisplayed(t,r.services[e])}),this.services[e]},Ge.prototype.handleText=function(e,t,n){var i,r,s=n&&n.isExtended,a=n&&n.isMultiByte,o=this.current708Packet.data,l=s?4096:0,u=o[e],c=o[e+1],d=t.currentWindow;function h(e){return e.map(e=>("0"+(255&e).toString(16)).slice(-2)).join("")}if(a?(r=[u,c],e++):r=[u],t.textDecoder_&&!s)i=t.textDecoder_.decode(new Uint8Array(r));else if(a){const e=h(r);i=String.fromCharCode(parseInt(e,16))}else i=je(l|u);return d.pendingNewLine&&!d.isEmpty()&&d.newLine(this.getPts(e)),d.pendingNewLine=!1,d.addText(i),e},Ge.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return Ve(i)&&Ve(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Ge.prototype.setCurrentWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;return t.setCurrentWindow(r),e},Ge.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var s=t.currentWindow;return i=n[++e],s.visible=(32&i)>>5,s.rowLock=(16&i)>>4,s.columnLock=(8&i)>>3,s.priority=7&i,i=n[++e],s.relativePositioning=(128&i)>>7,s.anchorVertical=127&i,i=n[++e],s.anchorHorizontal=i,i=n[++e],s.anchorPoint=(240&i)>>4,s.rowCount=15&i,i=n[++e],s.columnCount=63&i,i=n[++e],s.windowStyle=(56&i)>>3,s.penStyle=7&i,s.virtualRowCount=s.rowCount+1,e},Ge.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},Ge.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},Ge.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Ge.prototype.displayWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&(t.windows[s].visible=1);return e},Ge.prototype.hideWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&(t.windows[s].visible=0);return e},Ge.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&(t.windows[s].visible^=1);return e},Ge.prototype.clearWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&t.windows[s].clearText();return e},Ge.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&t.windows[s].reset();return e},Ge.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},Ge.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},Ge.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},Ge.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var qe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},We=function(e){return null===e?"":(e=qe[e]||e,String.fromCharCode(e))},Xe=14,Ke=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ye=function(){var e=[],t=Xe+1;while(t--)e.push({text:"",indent:0,offset:0});return e},$e=function(e,t){$e.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,s;if(t=32639&e.ccData,t!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ye();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ye();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ye()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))i=(3&i)<<8,s=We(i|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),i=(3&i)<<8,s=We(i|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&r)&&this.addFormatting(e.pts,["i"]),1===(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r)){const e=3&r;this.nonDisplayed_[this.row_].offset=e,this.column_+=e}else if(this.isPAC(i,r)){var a=Ke.indexOf(7968&t);if("rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&a>=0&&a<=14&&(this.clearFormatting(e.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)){const e=(14&t)>>1;this.column_=4*e,this.nonDisplayed_[this.row_].indent+=e}this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),s=We(i),s+=We(r),this[this.mode_](e.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};$e.prototype=new Pe,$e.prototype.flushDisplayed=function(e){const t=e=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."})},n=[];this.displayed_.forEach((e,i)=>{if(e&&e.text&&e.text.length){try{e.text=e.text.trim()}catch(r){t(i)}e.text.length&&n.push({text:e.text,line:i+1,position:10+Math.min(70,10*e.indent)+2.5*e.offset})}else void 0!==e&&null!==e||t(i)}),n.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,content:n,stream:this.name_})},$e.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ye(),this.nonDisplayed_=Ye(),this.lastControlCode_=null,this.column_=0,this.row_=Xe,this.rollUpRows_=2,this.formatting_=[]},$e.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},$e.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},$e.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},$e.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},$e.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},$e.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},$e.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},$e.prototype.isNormalChar=function(e){return e>=32&&e<=127},$e.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=Xe,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ye(),this.displayed_=Ye()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]={text:"",indent:0,offset:0};void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},$e.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},$e.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},$e.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_].text;n+=t,this.nonDisplayed_[this.row_].text=n},$e.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_].text;n+=t,this.displayed_[this.row_].text=n},$e.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]={text:"",indent:0,offset:0};for(e=this.row_+1;e<Xe+1;e++)this.displayed_[e]={text:"",indent:0,offset:0};for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},$e.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_].text;n+=t,this.displayed_[this.row_].text=n};var Qe={CaptionStream:Be,Cea608Stream:$e,Cea708Stream:Ge},Ze={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Je=F,et=8589934592,tt=4294967296,nt="shared",it=function(e,t){var n=1;e>t&&(n=-1);while(Math.abs(t-e)>tt)e+=n*et;return e},rt=function(e){var t,n;rt.prototype.init.call(this),this.type_=e||nt,this.push=function(e){"metadata"!==e.type?this.type_!==nt&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=it(e.dts,n),e.pts=it(e.pts,n),t=e.dts,this.trigger("data",e)):this.trigger("data",e)},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};rt.prototype=new Je;var st,at={TimestampRolloverStream:rt,handleRollover:it},ot=(e,t,n)=>{if(!e)return-1;for(var i=n;i<e.length;i++)if(e[i]===t)return i;return-1},lt={typedArrayIndexOf:ot},ut=lt.typedArrayIndexOf,ct={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},dt=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},ht=function(e,t,n){return decodeURIComponent(dt(e,t,n))},pt=function(e,t,n){return unescape(dt(e,t,n))},ft=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},gt={APIC:function(e){var t,n,i=1,r="--\x3e";e.data[0]===ct.Utf8&&(t=ut(e.data,0,i),t<0||(e.mimeType=pt(e.data,i,t),i=t+1,e.pictureType=e.data[i],i++,n=ut(e.data,0,i),n<0||(e.description=ht(e.data,i,n),i=n+1,e.mimeType===r?e.url=pt(e.data,i,e.data.length):e.pictureData=e.data.subarray(i,e.data.length))))},"T*":function(e){e.data[0]===ct.Utf8&&(e.value=ht(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;e.data[0]===ct.Utf8&&(t=ut(e.data,0,1),-1!==t&&(e.description=ht(e.data,1,t),e.value=ht(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value))},"W*":function(e){e.url=pt(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;e.data[0]===ct.Utf8&&(t=ut(e.data,0,1),-1!==t&&(e.description=ht(e.data,1,t),e.url=pt(e.data,t+1,e.data.length).replace(/\0.*$/,"")))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=pt(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},mt=function(e){var t,n,i=10,r=0,s=[];if(!(e.length<10||e[0]!=="I".charCodeAt(0)||e[1]!=="D".charCodeAt(0)||e[2]!=="3".charCodeAt(0))){r=ft(e.subarray(6,10)),r+=10;var a=64&e[5];a&&(i+=4,i+=ft(e.subarray(10,14)),r-=ft(e.subarray(16,20)));do{if(t=ft(e.subarray(i+4,i+8)),t<1)break;n=String.fromCharCode(e[i],e[i+1],e[i+2],e[i+3]);var o={id:n,data:e.subarray(i+10,i+t+10)};o.key=o.id,gt[o.id]?gt[o.id](o):"T"===o.id[0]?gt["T*"](o):"W"===o.id[0]&&gt["W*"](o),s.push(o),i+=10,i+=t}while(i<r);return s}},yt={parseId3Frames:mt,parseSyncSafeInteger:ft,frameParsers:gt},vt=F,bt=Ze,Tt=yt;st=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],s=0;if(st.prototype.init.call(this),this.dispatchType=bt.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,a,o,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),s+=e.data.byteLength,1===r.length&&(i=Tt.parseSyncSafeInteger(e.data.subarray(6,10)),i+=10),!(s<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<i;)t.data.set(r[0].data.subarray(0,i-l),l),l+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Tt.parseSyncSafeInteger(t.data.subarray(10,14)),i-=Tt.parseSyncSafeInteger(t.data.subarray(16,20)));do{if(a=Tt.parseSyncSafeInteger(t.data.subarray(n+4,n+8)),a<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(u=String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),o={id:u,data:t.data.subarray(n+10,n+a+10)},o.key=o.id,Tt.frameParsers[o.id]?Tt.frameParsers[o.id](o):"T"===o.id[0]?Tt.frameParsers["T*"](o):"W"===o.id[0]&&Tt.frameParsers["W*"](o),"com.apple.streaming.transportStreamTimestamp"===o.owner){var c=o.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],o.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)}t.frames.push(o),n+=10,n+=a}while(n<i);this.trigger("data",t)}}},st.prototype=new vt;var _t,wt,St,Et=st,At=F,Ct=Qe,It=Ze,xt=at.TimestampRolloverStream,kt=188,Mt=71;_t=function(){var e=new Uint8Array(kt),t=0;_t.prototype.init.call(this),this.push=function(n){var i,r=0,s=kt;t?(i=new Uint8Array(n.byteLength+t),i.set(e.subarray(0,t)),i.set(n,t),t=0):i=n;while(s<i.byteLength)i[r]!==Mt||i[s]!==Mt?(r++,s++):(this.trigger("data",i.subarray(r,s)),r+=kt,s+=kt);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===kt&&e[0]===Mt&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},_t.prototype=new At,wt=function(){var e,t,n,i;wt.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r,s,a;if(1&e[5]){i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=(15&e[1])<<8|e[2],r=3+n-4,s=(15&e[10])<<8|e[11],a=12+s;while(a<r){var o=e[a],l=(31&e[a+1])<<8|e[a+2];o===It.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=l:o===It.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=l:o===It.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][l]=o),a+=5+((15&e[a+3])<<8|e[a+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid){n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);while(this.packetsWaitingForPmt.length)this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=It.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=It.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},wt.prototype=new At,wt.STREAM_TYPES={h264:27,adts:15},St=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},s={data:[],size:0},a=function(e,t){var n;const i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))},o=function(e,n,i){var r,s=new Uint8Array(e.size),o={type:n},l=0,u=0,c=!1;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)r=e.data[l],s.set(r.data,u),u+=r.data.byteLength;a(s,o),c="video"===n||o.packetLength<=e.size,(i||c)&&(e.size=0,e.data.length=0),c&&t.trigger("data",o)}};St.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case It.H264_STREAM_TYPE:e=i,t="video";break;case It.ADTS_STREAM_TYPE:e=r,t="audio";break;case It.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};e=a.programMapTable,null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[a.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(i,"video"),o(r,"audio"),o(s,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},St.prototype=new At;var Dt={PAT_PID:0,MP2T_PACKET_LENGTH:kt,TransportPacketStream:_t,TransportParseStream:wt,ElementaryStream:St,TimestampRolloverStream:xt,CaptionStream:Ct.CaptionStream,Cea608Stream:Ct.Cea608Stream,Cea708Stream:Ct.Cea708Stream,MetadataStream:Et};for(var Rt in It)It.hasOwnProperty(Rt)&&(Dt[Rt]=It[Rt]);var Ot,Nt=Dt,Lt=F,Pt=ge.ONE_SECOND_IN_TS,Ut=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ot=function(e){var t,n=0;Ot.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${n} outside syncword`})},this.push=function(i){var r,s,a,o,l,u=0;if(e||(n=0),"audio"===i.type){var c;t&&t.length?(a=t,t=new Uint8Array(a.byteLength+i.data.byteLength),t.set(a),t.set(i.data,a.byteLength)):t=i.data;while(u+7<t.length)if(255===t[u]&&240===(246&t[u+1])){if("number"===typeof c&&(this.skipWarn_(c,u),c=null),s=2*(1&~t[u+1]),r=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,o=1024*(1+(3&t[u+6])),l=o*Pt/Ut[(60&t[u+2])>>>2],t.byteLength-u<r)break;this.trigger("data",{pts:i.pts+n*l,dts:i.dts+n*l,sampleCount:o,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:Ut[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+s,u+r)}),n++,u+=r}else"number"!==typeof c&&(c=u),u++;"number"===typeof c&&(this.skipWarn_(c,u),c=null),t=t.subarray(u)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Ot.prototype=new Lt;var Bt,Ft=Ot;Bt=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,s=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");s.set(e.subarray(r,r+a)),n=new DataView(s.buffer).getUint32(0),i=8*a,t-=a},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),s=n>>>32-r;return i-=r,i>0?n<<=r:t>0&&this.loadWord(),r=e-r,r>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!==(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var jt,Vt,Ht,zt=Bt,Gt=F,qt=zt;Vt=function(){var e,t,n=0;Vt.prototype.init.call(this),this.push=function(i){var r;t?(r=new Uint8Array(t.byteLength+i.data.byteLength),r.set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var s=t.byteLength;n<s-3;n++)if(1===t[n+2]){e=n+5;break}while(e<s)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<s);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3;break}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Vt.prototype=new Gt,Ht={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},jt=function(){var e,t,n,i,r,s,a,o=new Vt;jt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,o.push(e))},o.on("data",function(a){var o={trackId:t,pts:n,dts:i,data:a,nalUnitTypeCode:31&a[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(a.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(a.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp";break}e.trigger("data",o)}),o.on("done",function(){e.trigger("done")}),o.on("partialdone",function(){e.trigger("partialdone")}),o.on("reset",function(){e.trigger("reset")}),o.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},a=function(e,t){var n,i,r=8,s=8;for(n=0;n<e;n++)0!==s&&(i=t.readExpGolomb(),s=(r+i+256)%256),r=0===s?r:s},r=function(e){var t,n,i=e.byteLength,r=[],s=1;while(s<i-2)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(s=0;s<t;a++,s++)a===r[0]&&(a++,r.shift()),n[s]=e[a];return n},s=function(e){var t,n,i,r,s,o,l,u,c,d,h,p,f,g=0,m=0,y=0,v=0,b=[1,1];if(t=new qt(e),n=t.readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ht[n]&&(s=t.readUnsignedExpGolomb(),3===s&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==s?8:12,f=0;f<h;f++)t.readBoolean()&&a(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),o=t.readUnsignedExpGolomb(),0===o)t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),d=t.readBits(1),0===d&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(p=t.readUnsignedByte(),p){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()];break}b&&(b[0],b[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(u+1)-2*g-2*m,height:(2-d)*(c+1)*16-2*y-2*v,sarRatio:b}}},jt.prototype=new Gt;var Wt,Xt={H264Stream:jt,NalByteStream:Vt},Kt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Yt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],r=(16&i)>>4;return n=n>=0?n:0,r?n+20:n+10},$t=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=Yt(e,t),$t(e,t))},Qt=function(e){var t=$t(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},Zt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Jt=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},en=function(e,t,n){return unescape(Jt(e,t,n))},tn=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3,r=6144&e[t+3];return r|i|n},nn=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},rn=function(e){var t=0;while(t+5<e.length){if(255===e[t]&&240===(246&e[t+1]))return Kt[(60&e[t+2])>>>2];t++}return null},sn=function(e){var t,n,i,r;t=10,64&e[5]&&(t+=4,t+=Zt(e.subarray(10,14)));do{if(n=Zt(e.subarray(t+4,t+8)),n<1)return null;if(r=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),"PRIV"===r){i=e.subarray(t+10,t+n+10);for(var s=0;s<i.byteLength;s++)if(0===i[s]){var a=en(i,0,s);if("com.apple.streaming.transportStreamTimestamp"===a){var o=i.subarray(s+1),l=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return l*=4,l+=3&o[7],l}break}}t+=10,t+=n}while(t<e.byteLength);return null},an={isLikelyAacData:Qt,parseId3TagSize:Yt,parseAdtsSize:tn,parseType:nn,parseSampleRate:rn,parseAacTimestamp:sn},on=F,ln=an;Wt=function(){var e=new Uint8Array,t=0;Wt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,s,a,o=0,l=0;e.length?(a=e.length,e=new Uint8Array(n.byteLength+a),e.set(e.subarray(0,a)),e.set(n,a)):e=n;while(e.length-l>=3)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!==(255&e[l])||240!==(240&e[l+1]))l++;else{if(e.length-l<7)break;if(o=ln.parseAdtsSize(e,l),l+o>e.length)break;s={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",s),l+=o}else{if(e.length-l<10)break;if(o=ln.parseId3TagSize(e,l),l+o>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}i=e.length-l,e=i>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}},Wt.prototype=new on;var un,cn,dn,hn,pn=Wt,fn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],gn=fn,mn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],yn=mn,vn=F,bn=Z,Tn=le,_n=Se,wn=xe,Sn=Nt,En=ge,An=Ft,Cn=Xt.H264Stream,In=pn,xn=an.isLikelyAacData,kn=ge.ONE_SECOND_IN_TS,Mn=gn,Dn=yn,Rn=function(e,t){t.stream=e,this.trigger("log",t)},On=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",Rn.bind(e,r))}},Nn=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Ln=function(e,t,n,i,r,s){var a=n-t,o=i-t,l=r-n;return{start:{dts:e,pts:e+a},end:{dts:e+o,pts:e+l},prependedContentDuration:s,baseMediaDecodeTime:e}};cn=function(e,t){var n,i=[],r=0,s=0,a=1/0;t=t||{},n=t.firstSequenceNumber||0,cn.prototype.init.call(this),this.push=function(t){wn.collectDtsInfo(e,t),e&&Mn.forEach(function(n){e[n]=t[n]}),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var o,l,u,c,d,h,p;0!==i.length?(o=_n.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=wn.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=_n.prefixWithSilence(e,o,s,a),e.samples=_n.generateSampleTable(o),u=bn.mdat(_n.concatenateFrameData(o)),i=[],l=bn.moof(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),wn.clearDtsInfo(e),d=Math.ceil(1024*kn/e.samplerate),o.length&&(h=o.length*d,this.trigger("segmentTimingInfo",Ln(En.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),o[0].dts,o[0].pts,o[0].dts+h,o[0].pts+h,p||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+h})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){wn.clearDtsInfo(e),i=[],this.trigger("reset")}},cn.prototype=new vn,un=function(e,t){var n,i,r,s=[],a=[];t=t||{},n=t.firstSequenceNumber||0,un.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){wn.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Dn.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){var i,r,o,l,u,c,d,h,p=0;while(s.length){if("access_unit_delimiter_rbsp"===s[0].nalUnitType)break;s.shift()}if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=Tn.groupNalsIntoFrames(s),o=Tn.groupFramesIntoGops(i),o[0][0].keyFrame||(r=this.getGopForFusion_(s[0],e),r?(p=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=Tn.extendFirstKeyFrame(o)),a.length){var f;if(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o),!f)return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");wn.clearDtsInfo(e),o=f}wn.collectDtsInfo(e,o),e.samples=Tn.generateSampleTable(o),u=bn.mdat(Tn.concatenateNalData(o)),e.baseMediaDecodeTime=wn.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),d=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",Ln(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=bn.moof(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){wn.clearDtsInfo(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,s,a,o=45e3,l=1e4,u=1/0;for(a=0;a<this.gopCache_.length;a++)s=this.gopCache_[a],r=s.gop,e.pps&&Nn(e.pps[0],s.pps[0])&&e.sps&&Nn(e.sps[0],s.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration,n>=-l&&n<=o&&(!i||u>n)&&(i=s,u=n)));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,s,o,l,u;s=e.byteLength,o=e.nalCount,l=e.duration,t=n=0;while(t<a.length&&n<e.length){if(i=a[t],r=e[n],i.pts===r.pts)break;r.pts>i.pts?t++:(n++,s-=r.byteLength,o-=r.nalCount,l-=r.duration)}return 0===n?e:n===e.length?null:(u=e.slice(n),u.byteLength=s,u.duration=l,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,s,o,l;t=a.length-1,n=e.length-1,s=null,o=!1;while(t>=0&&n>=0){if(i=a[t],r=e[n],i.pts===r.pts){o=!0;break}i.pts>r.pts?t--:(t===a.length-1&&(s=n),n--)}if(!o&&null===s)return null;if(l=o?n:s,0===l)return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){a=e}},un.prototype=new vn,hn=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},"undefined"!==typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,hn.prototype.init.call(this),this.push=function(e){return e.content||e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},hn.prototype=new vn,hn.prototype.flush=function(e){var t,n,i,r,s=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Dn.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Mn.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,i=bn.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(i.byteLength),a.initSegment.set(i),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)t=this.pendingCaptions[r],t.startTime=En.metadataTsToSeconds(t.startPts,o,this.keepOriginalTimestamps),t.endTime=En.metadataTsToSeconds(t.endPts,o,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)n=this.pendingMetadata[r],n.cueTime=En.metadataTsToSeconds(n.pts,o,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)t=a.captions[r],this.trigger("caption",t);for(r=0;r<a.metadata.length;r++)n=a.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},hn.prototype.setRemux=function(e){this.remuxTracks=e},dn=function(e){var t,n,i=this,r=!0;dn.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Sn.MetadataStream,r.aacStream=new In,r.audioTimestampRolloverStream=new Sn.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Sn.TimestampRolloverStream("timed-metadata"),r.adtsStream=new An,r.coalesceStream=new hn(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new cn(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),On(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Sn.MetadataStream,r.packetStream=new Sn.TransportPacketStream,r.parseStream=new Sn.TransportParseStream,r.elementaryStream=new Sn.ElementaryStream,r.timestampRolloverStream=new Sn.TimestampRolloverStream,r.adtsStream=new An,r.h264Stream=new Cn,r.captionStream=new Sn.CaptionStream(e),r.coalesceStream=new hn(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(s){var a;if("metadata"===s.type){a=s.tracks.length;while(a--)t||"video"!==s.tracks[a].type?n||"audio"!==s.tracks[a].type||(n=s.tracks[a],n.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=s.tracks[a],t.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime);t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new un(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))}),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new cn(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),On(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,wn.clearDtsInfo(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,wn.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=xn(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},dn.prototype=new vn;var Pn,Un,Bn={Transmuxer:dn,VideoSegmentStream:un,AudioSegmentStream:cn,AUDIO_PROPERTIES:Mn,VIDEO_PROPERTIES:Dn,generateSegmentTimingInfo:Ln},Fn=function(e){return e>>>0},jn=function(e){return("00"+e.toString(16)).slice(-2)},Vn={toUnsigned:Fn,toHexString:jn},Hn=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3]),t},zn=Hn,Gn=Vn.toUnsigned,qn=zn,Wn=function(e,t){var n,i,r,s,a,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=Gn(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=qn(e.subarray(n+4,n+8)),s=i>1?n+i:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(n+8,s)):(a=Wn(e.subarray(n+8,s),t.slice(1)),a.length&&(o=o.concat(a)))),n=s;return o},Xn=Wn,Kn=Vn.toUnsigned,Yn=H.getUint64,$n=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Yn(e.subarray(4)):t.baseMediaDecodeTime=Kn(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Qn=$n,Zn=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],s=2&i.flags[2],a=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),s&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},Jn=Zn,ei=H.getUint64,ti=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=ei(e.subarray(i)),n.firstOffset=ei(e.subarray(i+8)),i+=16),i+=2;var r=t.getUint16(i);for(i+=2;r>0;i+=12,r--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n},ni=ti,ii=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},ri=ii,si=ri,ai=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],s=4&n.flags[2],a=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;r&&(n.dataOffset=i.getInt32(d),d+=4),s&&c&&(t={flags:si(e.subarray(d,d+4))},d+=4,a&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);while(c--)t={},a&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=si(e.subarray(d,d+4)),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},oi=ai,li=H,ui=li.getUint64,ci=function(e){return new Date(1e3*e-20828448e5)},di=zn,hi=Xn,pi=function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31);break}return r},fi={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Pn(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,s=new DataView(e.buffer,e.byteOffset,e.byteLength),a={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=s.getUint16(i),i+=2,a.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=s.getUint16(i),i+=2,a.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return a},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},edts:function(e){return{boxes:Pn(e)}},elst:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),edits:[]},r=n.getUint32(4);for(t=8;r;r--)0===i.version?(i.edits.push({segmentDuration:n.getUint32(t),mediaTime:n.getInt32(t+4),mediaRate:n.getUint16(t+8)+n.getUint16(t+10)/65536}),t+=12):(i.edits.push({segmentDuration:ui(e.subarray(t)),mediaTime:ui(e.subarray(t+8)),mediaRate:n.getUint16(t+16)+n.getUint16(t+18)/65536}),t+=20);return i},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:di(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;while(i<e.byteLength)n.compatibleBrands.push(di(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:Pn(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Pn(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:di(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}n.name+=String.fromCharCode(e[i])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function(e){return{byteLength:e.byteLength,nals:pi(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=ci(n.getUint32(i)),i+=8,r.modificationTime=ci(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8,r.duration=n.getUint32(i)):(r.creationTime=ci(n.getUint32(i)),i+=4,r.modificationTime=ci(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4,r.duration=n.getUint32(i)),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:Pn(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Pn(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=Pn(e.subarray(28))[0]),n},moof:function(e){return{boxes:Pn(e)}},moov:function(e){return{boxes:Pn(e)}},mvex:function(e){return{boxes:Pn(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=ci(t.getUint32(n)),n+=8,i.modificationTime=ci(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8,i.duration=t.getUint32(n)):(i.creationTime=ci(t.getUint32(n)),n+=4,i.modificationTime=ci(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4,i.duration=t.getUint32(n)),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:ni,smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Pn(e)}},ctts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),compositionOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.compositionOffsets.push({sampleCount:n.getUint32(t),sampleOffset:n[0===i.version?"getUint32":"getInt32"](t+4)});return i},stss:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),syncSamples:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.syncSamples.push(n.getUint32(t));return i},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Pn(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return fi.ftyp(e)},tfdt:Qn,tfhd:Jn,tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=ci(t.getUint32(n)),n+=8,i.modificationTime=ci(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8,i.duration=t.getUint32(n)):(i.creationTime=ci(t.getUint32(n)),n+=4,i.modificationTime=ci(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4,i.duration=t.getUint32(n)),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/65536,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/65536,i},traf:function(e){return{boxes:Pn(e)}},trak:function(e){return{boxes:Pn(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:oi,"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};Pn=function(e){for(var t,n,i,r,s,a=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];t=new DataView(l);while(a<e.byteLength)n=t.getUint32(a),i=di(e.subarray(a+4,a+8)),r=n>1?a+n:e.byteLength,s=(fi[i]||function(e){return{data:e}})(e.subarray(a+8,r)),s.size=n,s.type=i,o.push(s),a=r;return o},Un=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,i){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var i=n+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var s=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return s?1===s.length?i+"<"+s.join("").slice(1)+">":i+"<\n"+s.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+Un(e.boxes,t+1):"")}).join("\n")};var gi,mi={inspect:Pn,textify:Un,parseType:di,findBox:hi,parseTraf:fi.traf,parseTfdt:fi.tfdt,parseHdlr:fi.hdlr,parseTfhd:fi.tfhd,parseTrun:fi.trun,parseSidx:fi.sidx},yi=function(e){var t=0,n=String.fromCharCode(e[t]),i="";while("\0"!==n)i+=n,t++,n=String.fromCharCode(e[t]);return i+=n,i},vi={uint8ToCString:yi},bi=vi.uint8ToCString,Ti=H.getUint64,_i=function(e){var t,n,i,r,s,a,o,l,u=4,c=e[0];if(0===c){t=bi(e.subarray(u)),u+=t.length,n=bi(e.subarray(u)),u+=n.length;var d=new DataView(e.buffer);i=d.getUint32(u),u+=4,s=d.getUint32(u),u+=4,a=d.getUint32(u),u+=4,o=d.getUint32(u),u+=4}else if(1===c){d=new DataView(e.buffer);i=d.getUint32(u),u+=4,r=Ti(e.subarray(u)),u+=8,a=d.getUint32(u),u+=4,o=d.getUint32(u),u+=4,t=bi(e.subarray(u)),u+=t.length,n=bi(e.subarray(u)),u+=n.length}l=new Uint8Array(e.subarray(u,e.byteLength));var h={scheme_id_uri:t,value:n,timescale:i||1,presentation_time:r,presentation_time_delta:s,event_duration:a,id:o,message_data:l};return Si(c,h)?h:void 0},wi=function(e,t,n,i){return e||0===e?e/t:i+n/t},Si=function(e,t){var n="\0"!==t.scheme_id_uri,i=0===e&&Ei(t.presentation_time_delta)&&n,r=1===e&&Ei(t.presentation_time)&&n;return!(e>1)&&i||r},Ei=function(e){return void 0!==e||null!==e},Ai={parseEmsgBox:_i,scaleTime:wi};gi="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var Ci,Ii,xi,ki,Mi,Di,Ri,Oi=gi,Ni=Vn.toUnsigned,Li=Vn.toHexString,Pi=Xn,Ui=zn,Bi=Ai,Fi=Jn,ji=oi,Vi=Qn,Hi=H.getUint64,zi=Oi,Gi=yt.parseId3Frames;Ci=function(e){var t={},n=Pi(e,["moov","trak"]);return n.reduce(function(e,t){var n,i,r,s,a;return n=Pi(t,["tkhd"])[0],n?(i=n[0],r=0===i?12:20,s=Ni(n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),a=Pi(t,["mdia","mdhd"])[0],a?(i=a[0],r=0===i?12:20,e[s]=Ni(a[r]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3]),e):null):null},t)},Ii=function(e,t){var n;n=Pi(t,["moof","traf"]);var i=n.reduce(function(t,n){var i,r=Pi(n,["tfhd"])[0],s=Ni(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),a=e[s]||9e4,o=Pi(n,["tfdt"])[0],l=new DataView(o.buffer,o.byteOffset,o.byteLength);let u;return i=1===o[0]?Hi(o.subarray(4,12)):l.getUint32(4),"bigint"===typeof i?u=i/zi.BigInt(a):"number"!==typeof i||isNaN(i)||(u=i/a),u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),u<t&&(t=u),t},1/0);return"bigint"===typeof i||isFinite(i)?i:0},xi=function(e,t){var n,i=Pi(t,["moof","traf"]),r=0,s=0;if(i&&i.length){var a=Pi(i[0],["tfhd"])[0],o=Pi(i[0],["trun"])[0],l=Pi(i[0],["tfdt"])[0];if(a){var u=Fi(a);n=u.trackId}if(l){var c=Vi(l);r=c.baseMediaDecodeTime}if(o){var d=ji(o);d.samples&&d.samples.length&&(s=d.samples[0].compositionTimeOffset||0)}}var h=e[n]||9e4;"bigint"===typeof r&&(s=zi.BigInt(s),h=zi.BigInt(h));var p=(r+s)/h;return"bigint"===typeof p&&p<Number.MAX_SAFE_INTEGER&&(p=Number(p)),p},ki=function(e){var t=Pi(e,["moov","trak"]),n=[];return t.forEach(function(e){var t=Pi(e,["mdia","hdlr"]),i=Pi(e,["tkhd"]);t.forEach(function(e,t){var r,s,a,o=Ui(e.subarray(8,12)),l=i[t];"vide"===o&&(r=new DataView(l.buffer,l.byteOffset,l.byteLength),s=r.getUint8(0),a=0===s?r.getUint32(12):r.getUint32(20),n.push(a))})}),n},Di=function(e){var t=e[0],n=0===t?12:20;return Ni(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])},Mi=function(e){var t=Pi(e,["moov","trak"]),n=[];return t.forEach(function(e){var t,i,r={},s=Pi(e,["tkhd"])[0];s&&(t=new DataView(s.buffer,s.byteOffset,s.byteLength),i=t.getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var a=Pi(e,["mdia","hdlr"])[0];if(a){var o=Ui(a.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=Pi(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);r.codec=Ui(u.subarray(4,8));var c,d,h=Pi(u,[r.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=h.subarray(78),d=Ui(c.subarray(4,8)),"avcC"===d&&c.length>11?(r.codec+=".",r.codec+=Li(c[9]),r.codec+=Li(c[10]),r.codec+=Li(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=h.subarray(28),d=Ui(c.subarray(4,8)),"esds"===d&&c.length>20&&0!==c[19]?(r.codec+="."+Li(c[19]),r.codec+="."+Li(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var p=Pi(e,["mdia","mdhd"])[0];p&&(r.timescale=Di(p)),n.push(r)}),n},Ri=function(e,t=0){var n=Pi(e,["emsg"]);return n.map(e=>{var n=Bi.parseEmsgBox(new Uint8Array(e)),i=Gi(n.message_data);return{cueTime:Bi.scaleTime(n.presentation_time,n.timescale,n.presentation_time_delta,t),duration:Bi.scaleTime(n.event_duration,n.timescale),frames:i}})};var qi={findBox:Pi,parseType:Ui,timescale:Ci,startTime:Ii,compositionStartTime:xi,videoTrackIds:ki,tracks:Mi,getTimescaleFromMediaHeader:Di,getEmsgID3:Ri};const{parseTrun:Wi}=mi,{findBox:Xi}=qi;var Ki=Oi,Yi=function(e){var t=Xi(e,["moof","traf"]),n=Xi(e,["mdat"]),i=[];return n.forEach(function(e,n){var r=t[n];i.push({mdat:e,traf:r})}),i},$i=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,a=n.trackId,o=[];return e.forEach(function(e){var t=Wi(e),n=t.samples;n.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=s),e.trackId=a,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"===typeof i?(e.pts=i+Ki.BigInt(e.compositionTimeOffset),i+=Ki.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)}),o=o.concat(n)}),o},Qi={getMdatTrafPairs:Yi,parseSamples:$i},Zi=Le.discardEmulationPreventionBytes,Ji=Qe.CaptionStream,er=Xn,tr=Qn,nr=Jn,{getMdatTrafPairs:ir,parseSamples:rr}=Qi,sr=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},ar=function(e,t,n){var i,r,s,a,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=s)if(s=o.getUint32(r),r+=4,!(s<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+s),c=sr(r,t);if(i={nalUnitType:"sei_rbsp",size:s,data:u,escapedRBSP:Zi(u),trackId:n},c)i.pts=c.pts,i.dts=c.dts,a=c;else{if(!a){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=a.pts,i.dts=a.dts}l.seiNals.push(i);break}return l},or=function(e,t){var n={},i=ir(e);return i.forEach(function(e){var i,r,s=e.mdat,a=e.traf,o=er(a,["tfhd"]),l=nr(o[0]),u=l.trackId,c=er(a,["tfdt"]),d=c.length>0?tr(c[0]).baseMediaDecodeTime:0,h=er(a,["trun"]);t===u&&h.length>0&&(i=rr(h,d,l),r=ar(s,i,u),n[u]||(n[u]={seiNals:[],logs:[]}),n[u].seiNals=n[u].seiNals.concat(r.seiNals),n[u].logs=n[u].logs.concat(r.logs))}),n},lr=function(e,t,n){var i;if(null===t)return null;i=or(e,t);var r=i[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}},ur=function(){var e,t,n,i,r,s,a=!1;this.isInitialized=function(){return a},this.init=function(t){e=new Ji,a=!0,s=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0}),e.on("log",function(e){r.logs.push(e)})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,s,a){var o;if(!this.isInitialized())return null;if(!s||!a)return null;if(this.isNewInit(s,a))n=s[0],i=a[n];else if(null===n||!i)return t.push(e),null;while(t.length>0){var l=t.shift();this.parse(l,s,a)}return o=lr(e,n,i),o&&o.logs&&(r.logs=r.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;s?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},cr=ur;const{parseTfdt:dr}=mi,hr=Xn,{getTimescaleFromMediaHeader:pr}=qi,{parseSamples:fr,getMdatTrafPairs:gr}=Qi,mr=function(){let e=9e4;this.init=function(t){const n=hr(t,["moov","trak","mdia","mdhd"])[0];n&&(e=pr(n))},this.parseSegment=function(t){const n=[],i=gr(t);let r=0;return i.forEach(function(t){const i=t.mdat,s=t.traf,a=hr(s,["tfdt"])[0],o=hr(s,["tfhd"])[0],l=hr(s,["trun"]);if(a){const e=dr(a);r=e.baseMediaDecodeTime}if(l.length&&o){const t=fr(l,r,o);let s=0;t.forEach(function(t){const r="utf-8",a=new TextDecoder(r),o=i.slice(s,s+t.size),l=hr(o,["vtte"])[0];if(l)return void(s+=t.size);const u=hr(o,["vttc"]);u.forEach(function(i){const r=hr(i,["payl"])[0],s=hr(i,["sttg"])[0],o=t.pts/e,l=(t.pts+t.duration)/e;let u,c;if(r)try{u=a.decode(r)}catch(d){console.error(d)}if(s)try{c=a.decode(s)}catch(d){console.error(d)}t.duration&&u&&n.push({cueText:u,start:o,end:l,settings:c})}),s+=t.size})}}),n}};var yr=mr,vr=Ze,br=function(e){var t=31&e[1];return t<<=8,t|=e[2],t},Tr=function(e){return!!(64&e[1])},_r=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},wr=function(e,t){var n=br(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},Sr=function(e){var t=Tr(e),n=4+_r(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},Er=function(e){var t={},n=Tr(e),i=4+_r(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r,s,a;r=(15&e[i+1])<<8|e[i+2],s=3+r-4,a=(15&e[i+10])<<8|e[i+11];var o=12+a;while(o<s){var l=i+o;t[(31&e[l+1])<<8|e[l+2]]=e[l],o+=5+((15&e[l+3])<<8|e[l+4])}return t}},Ar=function(e,t){var n=br(e),i=t[n];switch(i){case vr.H264_STREAM_TYPE:return"video";case vr.ADTS_STREAM_TYPE:return"audio";case vr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Cr=function(e){var t=Tr(e);if(!t)return null;var n=4+_r(e);if(n>=e.byteLength)return null;var i,r=null;return i=e[n+7],192&i&&(r={},r.pts=(14&e[n+9])<<27|(255&e[n+10])<<20|(254&e[n+11])<<12|(255&e[n+12])<<5|(254&e[n+13])>>>3,r.pts*=4,r.pts+=(6&e[n+13])>>>1,r.dts=r.pts,64&i&&(r.dts=(14&e[n+14])<<27|(255&e[n+15])<<20|(254&e[n+16])<<12|(255&e[n+17])<<5|(254&e[n+18])>>>3,r.dts*=4,r.dts+=(6&e[n+18])>>>1)),r},Ir=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},xr=function(e){for(var t,n=4+_r(e),i=e.subarray(n),r=0,s=0,a=!1;s<i.byteLength-3;s++)if(1===i[s+2]){r=s+5;break}while(r<i.byteLength)switch(i[r]){case 0:if(0!==i[r-1]){r+=2;break}if(0!==i[r-2]){r++;break}s+3!==r-2&&(t=Ir(31&i[s+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(a=!0));do{r++}while(1!==i[r]&&r<i.length);s=r-2,r+=3;break;case 1:if(0!==i[r-1]||0!==i[r-2]){r+=3;break}t=Ir(31&i[s+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(a=!0),s=r-2,r+=3;break;default:r+=3;break}return i=i.subarray(s),r-=s,s=0,i&&i.byteLength>3&&(t=Ir(31&i[s+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(a=!0)),a},kr={parseType:wr,parsePat:Sr,parsePmt:Er,parsePayloadUnitStartIndicator:Tr,parsePesType:Ar,parsePesTime:Cr,videoPacketContainsKeyFrame:xr},Mr=Ze,Dr=at.handleRollover,Rr={};Rr.ts=kr,Rr.aac=an;var Or=ge.ONE_SECOND_IN_TS,Nr=188,Lr=71,Pr=function(e,t){var n,i,r=0,s=Nr;while(s<e.byteLength)if(e[r]!==Lr||e[s]!==Lr)r++,s++;else{switch(n=e.subarray(r,s),i=Rr.ts.parseType(n,t.pid),i){case"pat":t.pid=Rr.ts.parsePat(n);break;case"pmt":var a=Rr.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach(function(e){t.table[e]=a[e]});break}r+=Nr,s+=Nr}},Ur=function(e,t,n){var i,r,s,a,o,l=0,u=Nr,c=!1;while(u<=e.byteLength)if(e[l]!==Lr||e[u]!==Lr&&u!==e.byteLength)l++,u++;else{switch(i=e.subarray(l,u),r=Rr.ts.parseType(i,t.pid),r){case"pes":s=Rr.ts.parsePesType(i,t.table),a=Rr.ts.parsePayloadUnitStartIndicator(i),"audio"===s&&a&&(o=Rr.ts.parsePesTime(i),o&&(o.type="audio",n.audio.push(o),c=!0));break}if(c)break;l+=Nr,u+=Nr}u=e.byteLength,l=u-Nr,c=!1;while(l>=0)if(e[l]!==Lr||e[u]!==Lr&&u!==e.byteLength)l--,u--;else{switch(i=e.subarray(l,u),r=Rr.ts.parseType(i,t.pid),r){case"pes":s=Rr.ts.parsePesType(i,t.table),a=Rr.ts.parsePayloadUnitStartIndicator(i),"audio"===s&&a&&(o=Rr.ts.parsePesTime(i),o&&(o.type="audio",n.audio.push(o),c=!0));break}if(c)break;l-=Nr,u-=Nr}},Br=function(e,t,n){var i,r,s,a,o,l,u,c,d=0,h=Nr,p=!1,f={data:[],size:0};while(h<e.byteLength)if(e[d]!==Lr||e[h]!==Lr)d++,h++;else{switch(i=e.subarray(d,h),r=Rr.ts.parseType(i,t.pid),r){case"pes":if(s=Rr.ts.parsePesType(i,t.table),a=Rr.ts.parsePayloadUnitStartIndicator(i),"video"===s&&(a&&!p&&(o=Rr.ts.parsePesTime(i),o&&(o.type="video",n.video.push(o),p=!0)),!n.firstKeyFrame)){if(a&&0!==f.size){l=new Uint8Array(f.size),u=0;while(f.data.length)c=f.data.shift(),l.set(c,u),u+=c.byteLength;if(Rr.ts.videoPacketContainsKeyFrame(l)){var g=Rr.ts.parsePesTime(l);g?(n.firstKeyFrame=g,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(i),f.size+=i.byteLength}break}if(p&&n.firstKeyFrame)break;d+=Nr,h+=Nr}h=e.byteLength,d=h-Nr,p=!1;while(d>=0)if(e[d]!==Lr||e[h]!==Lr)d--,h--;else{switch(i=e.subarray(d,h),r=Rr.ts.parseType(i,t.pid),r){case"pes":s=Rr.ts.parsePesType(i,t.table),a=Rr.ts.parsePayloadUnitStartIndicator(i),"video"===s&&a&&(o=Rr.ts.parsePesTime(i),o&&(o.type="video",n.video.push(o),p=!0));break}if(p)break;d-=Nr,h-=Nr}},Fr=function(e,t){if(e.audio&&e.audio.length){var n=t;("undefined"===typeof n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Dr(e.dts,n),e.pts=Dr(e.pts,n),e.dtsTime=e.dts/Or,e.ptsTime=e.pts/Or})}if(e.video&&e.video.length){var i=t;if(("undefined"===typeof i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=Dr(e.dts,i),e.pts=Dr(e.pts,i),e.dtsTime=e.dts/Or,e.ptsTime=e.pts/Or}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Dr(r.dts,i),r.pts=Dr(r.pts,i),r.dtsTime=r.dts/Or,r.ptsTime=r.pts/Or}}},jr=function(e){var t,n=!1,i=0,r=null,s=null,a=0,o=0;while(e.length-o>=3){var l=Rr.aac.parseType(e,o);switch(l){case"timed-metadata":if(e.length-o<10){n=!0;break}if(a=Rr.aac.parseId3TagSize(e,o),a>e.length){n=!0;break}null===s&&(t=e.subarray(o,o+a),s=Rr.aac.parseAacTimestamp(t)),o+=a;break;case"audio":if(e.length-o<7){n=!0;break}if(a=Rr.aac.parseAdtsSize(e,o),a>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+a),r=Rr.aac.parseSampleRate(t)),i++,o+=a;break;default:o++;break}if(n)return null}if(null===r||null===s)return null;var u=Or/r,c={audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*u,pts:s+1024*i*u}]};return c},Vr=function(e){var t={pid:null,table:null},n={};for(var i in Pr(e,t),t.table)if(t.table.hasOwnProperty(i)){var r=t.table[i];switch(r){case Mr.H264_STREAM_TYPE:n.video=[],Br(e,t,n),0===n.video.length&&delete n.video;break;case Mr.ADTS_STREAM_TYPE:n.audio=[],Ur(e,t,n),0===n.audio.length&&delete n.audio;break}}return n},Hr=function(e,t){var n,i=Rr.aac.isLikelyAacData(e);return n=i?jr(e):Vr(e),n&&(n.audio||n.video)?(Fr(n,t),n):null},zr={inspect:Hr,parseAudioPes_:Ur};const Gr=function(e,t){t.on("data",function(t){const n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};const i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){const n={start:{decode:ge.videoTsToSeconds(t.start.dts),presentation:ge.videoTsToSeconds(t.start.pts)},end:{decode:ge.videoTsToSeconds(t.end.dts),presentation:ge.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ge.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=ge.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})}),t.on("audioSegmentTimingInfo",function(t){const n={start:{decode:ge.videoTsToSeconds(t.start.dts),presentation:ge.videoTsToSeconds(t.start.pts)},end:{decode:ge.videoTsToSeconds(t.end.dts),presentation:ge.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ge.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=ge.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ge.videoTsToSeconds(t.start),end:ge.videoTsToSeconds(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ge.videoTsToSeconds(t.start),end:ge.videoTsToSeconds(t.end)}})}),t.on("log",function(t){e.postMessage({action:"log",log:t})})};class qr{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Bn.Transmuxer(this.options),Gr(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new cr,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}initMp4WebVttParser(e){this.webVttParser||(this.webVttParser=new yr);const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.webVttParser.init(t)}getMp4WebVttText(e){this.webVttParser||(this.webVttParser=new yr);const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.webVttParser.parseSegment(t);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:n||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const n=qi.startTime(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=qi.tracks(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeEmsgID3({data:e,offset:t}){const n=qi.getEmsgID3(e,t);this.self.postMessage({action:"probeEmsgID3",id3Frames:n,emsgData:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const n="number"!==typeof t||isNaN(t)?void 0:t*ge.ONE_SECOND_IN_TS,i=zr.inspect(e,n);let r=null;i&&(r={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1},r.hasVideo&&(r.videoStart=i.video[0].ptsTime),r.hasAudio&&(r.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:r,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ge.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(ge.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new qr(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new qr(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}));var Nc=Mc(Oc);const Lc=(e,t,n)=>{const{type:i,initSegment:r,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=e.data.segment;t.buffer.push({captions:s,captionStreams:a,metadata:o});const c=e.data.segment.boxes||{data:e.data.segment.data},d={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};"undefined"!==typeof l&&(d.videoFrameDtsTime=l),"undefined"!==typeof u&&(d.videoFramePtsTime=u),n(d)},Pc=({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)},Uc=(e,t)=>{t.gopInfo=e.data.gopInfo},Bc=e=>{const{transmuxer:t,bytes:n,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:p,onDone:f,onEndedTimeline:g,onTransmuxerLog:m,isEndOfTimeline:y,segment:v,triggerSegmentEventFn:b}=e,T={buffer:[]};let _=y;const w=n=>{t.currentTransmux===e&&("data"===n.data.action&&Lc(n,T,a),"trackinfo"===n.data.action&&o(n.data.trackInfo),"gopInfo"===n.data.action&&Uc(n,T),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&u(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,Pc({transmuxedData:T,callback:f}),Fc(t))))},S=()=>{const e={message:"Received an error message from the transmuxer worker",metadata:{errorType:ml.Error.StreamingFailedToTransmuxSegment,segmentInfo:rh({segment:v})}};f(null,e)};if(t.onmessage=w,t.onerror=S,i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!==typeof s&&t.postMessage({action:"setRemux",remux:s}),n.byteLength){const e=n instanceof ArrayBuffer?n:n.buffer,i=n instanceof ArrayBuffer?0:n.byteOffset;b({type:"segmenttransmuxingstart",segment:v}),t.postMessage({action:"push",data:e,byteOffset:i,byteLength:n.byteLength},[e])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Fc=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"===typeof e.currentTransmux?e.currentTransmux():Bc(e.currentTransmux))},jc=(e,t)=>{e.postMessage({action:t}),Fc(e)},Vc=(e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void jc(t,e);t.transmuxQueue.push(jc.bind(null,t,e))},Hc=e=>{Vc("reset",e)},zc=e=>{Vc("endTimeline",e)},Gc=e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void Bc(e);e.transmuxer.transmuxQueue.push(e)},qc=e=>{const t=new Nc;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:e}),t};var Wc={reset:Hc,endTimeline:zc,transmux:Gc,createTransmuxer:qc};const Xc=function(e){const t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=d({},e,{endAction:null,transmuxer:null,callback:null}),s=r=>{r.data.action===n&&(t.removeEventListener("message",s),r.data.data&&(r.data.data=new Uint8Array(r.data.data,e.byteOffset||0,e.byteLength||r.data.data.byteLength),e.data&&(e.data=r.data.data)),i(r.data))};if(t.addEventListener("message",s),e.data){const n=e.data instanceof ArrayBuffer;r.byteOffset=n?0:e.data.byteOffset,r.byteLength=e.data.byteLength;const i=[n?e.data:e.data.buffer];t.postMessage(r,i)}else t.postMessage(r)},Kc={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Yc="wvtt",$c=e=>{e.forEach(e=>{e.abort()})},Qc=e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}),Zc=e=>{const t=e.target,n=Date.now()-t.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},Jc=(e,t)=>{const{requestType:n}=t,i=Eu({requestType:n,request:t,error:e});return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Kc.TIMEOUT,xhr:t,metadata:i}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Kc.ABORTED,xhr:t,metadata:i}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Kc.FAILURE,xhr:t,metadata:i}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Kc.FAILURE,xhr:t,metadata:i}:null},ed=(e,t,n,i)=>(r,s)=>{const a=s.response,o=Jc(r,s);if(o)return n(o,e);if(16!==a.byteLength)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:Kc.FAILURE,xhr:s},e);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=u;const c={uri:s.uri};return i({type:"segmentkeyloadcomplete",segment:e,keyInfo:c}),n(null,e)},td=(e,t)=>{t===Yc&&e.transmuxer.postMessage({action:"initMp4WebVttParser",data:e.map.bytes})},nd=(e,t,n)=>{t===Yc&&Xc({action:"getMp4WebVttText",data:e.bytes,transmuxer:e.transmuxer,callback:({data:t,mp4VttCues:i})=>{e.bytes=t,n(null,e,{mp4VttCues:i})}})},id=(e,t)=>{const n=nn(e.map.bytes);if("mp4"!==n){const i=e.map.resolvedUri||e.map.uri,r=n||"unknown";return t({internal:!0,message:`Found unsupported ${r} container for initialization segment at URL: ${i}`,code:Kc.FAILURE,metadata:{mediaType:r}})}Xc({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:n,data:i})=>(e.map.bytes=i,n.forEach(function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"===typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale),"text"===t.type&&td(e,t.codec))}),t(null))})},rd=({segment:e,finishProcessingFn:t,triggerSegmentEventFn:n})=>(i,r)=>{const s=Jc(i,r);if(s)return t(s,e);const a=new Uint8Array(r.response);if(n({type:"segmentloaded",segment:e}),e.map.key)return e.map.encryptedBytes=a,t(null,e);e.map.bytes=a,id(e,function(n){if(n)return n.xhr=r,n.status=r.status,t(n,e);t(null,e)})},sd=({segment:e,finishProcessingFn:t,responseType:n,triggerSegmentEventFn:i})=>(r,s)=>{const a=Jc(r,s);if(a)return t(a,e);i({type:"segmentloaded",segment:e});const o="arraybuffer"!==n&&s.responseText?Ic(s.responseText.substring(e.lastReachedChar||0)):s.response;return e.stats=Qc(s),e.key?e.encryptedBytes=new Uint8Array(o):e.bytes=new Uint8Array(o),t(null,e)},ad=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{const f=e.map&&e.map.tracks||{},g=Boolean(f.audio&&f.video);let m=i.bind(null,e,"audio","start");const y=i.bind(null,e,"audio","end");let v=i.bind(null,e,"video","start");const b=i.bind(null,e,"video","end"),T=()=>Gc({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:g,onData:t=>{t.type="combined"===t.type?"video":t.type,c(e,t)},onTrackInfo:t=>{n&&(g&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:e=>{m&&"undefined"!==typeof e.start&&(m(e.start),m=null),y&&"undefined"!==typeof e.end&&y(e.end)},onVideoTimingInfo:e=>{v&&"undefined"!==typeof e.start&&(v(e.start),v=null),b&&"undefined"!==typeof e.end&&b(e.end)},onVideoSegmentTimingInfo:t=>{const n={pts:{start:t.start.presentation,end:t.end.presentation},dts:{start:t.start.decode,end:t.end.decode}};p({type:"segmenttransmuxingtiminginfoavailable",segment:e,timingInfo:n}),r(t)},onAudioSegmentTimingInfo:t=>{const n={pts:{start:t.start.pts,end:t.end.pts},dts:{start:t.start.dts,end:t.end.dts}};p({type:"segmenttransmuxingtiminginfoavailable",segment:e,timingInfo:n}),s(t)},onId3:(t,n)=>{a(e,t,n)},onCaptions:t=>{o(e,[t])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:h,onDone:(t,n)=>{d&&(t.type="combined"===t.type?"video":t.type,p({type:"segmenttransmuxingcomplete",segment:e}),d(n,e,t))},segment:e,triggerSegmentEventFn:p});Xc({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:i=>{e.bytes=t=i.data;const r=i.result;r&&(n(e,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:g}),n=null),T()}})},od=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{let f=new Uint8Array(t);if(rn(f)){e.isFmp4=!0;const{tracks:r}=e.map,s=r.text&&(!r.audio||!r.video);if(s)return c(e,{data:f,type:"text"}),void nd(e,r.text.codec,d);const l={isFmp4:!0,hasVideo:!!r.video,hasAudio:!!r.audio};r.audio&&r.audio.codec&&"enca"!==r.audio.codec&&(l.audioCodec=r.audio.codec),r.video&&r.video.codec&&"encv"!==r.video.codec&&(l.videoCodec=r.video.codec),r.video&&r.audio&&(l.isMuxed=!0),n(e,l);const u=(t,n)=>{c(e,{data:f,type:l.hasAudio&&!l.isMuxed?"audio":"video"}),n&&n.length&&a(e,n),t&&t.length&&o(e,t),d(null,e,{})};Xc({action:"probeMp4StartTime",timescales:e.map.timescales,data:f,transmuxer:e.transmuxer,callback:({data:n,startTime:s})=>{t=n.buffer,e.bytes=f=n,l.hasAudio&&!l.isMuxed&&i(e,"audio","start",s),l.hasVideo&&i(e,"video","start",s),Xc({action:"probeEmsgID3",data:f,transmuxer:e.transmuxer,offset:s,callback:({emsgData:n,id3Frames:i})=>{t=n.buffer,e.bytes=f=n,r.video&&n.byteLength&&e.transmuxer?Xc({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:f,timescales:e.map.timescales,trackIds:[r.video.id],callback:n=>{t=n.data.buffer,e.bytes=f=n.data,n.logs.forEach(function(e){h(Al(e,{stream:"mp4CaptionParser"}))}),u(n.captions,i)}}):u(void 0,i)}})}})}else if(e.transmuxer){if("undefined"===typeof e.container&&(e.container=nn(f)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void d(null,e,{});ad({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})}else d(null,e,{})},ld=function({id:e,key:t,encryptedBytes:n,decryptionWorker:i,segment:r,doneFn:s},a){const o=t=>{if(t.data.source===e){i.removeEventListener("message",o);const e=t.data.decrypted;a(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let l;i.onerror=()=>{const e="An error occurred in the decryption worker",t=rh({segment:r}),n={message:e,metadata:{error:new Error(e),errorType:ml.Error.StreamingFailedToDecryptSegment,segmentInfo:t,keyInfo:{uri:r.key.resolvedUri||r.map.key.resolvedUri}}};s(n,r)},i.addEventListener("message",o),l=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),i.postMessage(Zu({source:e,encrypted:n,key:l,iv:t.iv}),[n.buffer,l.buffer])},ud=({decryptionWorker:e,segment:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{p({type:"segmentdecryptionstart"}),ld({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e,segment:t,doneFn:d},e=>{t.bytes=e,p({type:"segmentdecryptioncomplete",segment:t}),od({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})})},cd=({activeXhrs:e,decryptionWorker:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{let f=0,g=!1;return(m,y)=>{if(!g){if(m)return g=!0,$c(e),d(m,y);if(f+=1,f===e.length){const f=function(){if(y.encryptedBytes)return ud({decryptionWorker:t,segment:y,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p});od({segment:y,bytes:y.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})};if(y.endOfAllRequests=Date.now(),y.map&&y.map.encryptedBytes&&!y.map.bytes)return p({type:"segmentdecryptionstart",segment:y}),ld({decryptionWorker:t,id:y.requestId+"-init",encryptedBytes:y.map.encryptedBytes,key:y.map.key,segment:y,doneFn:d},t=>{y.map.bytes=t,p({type:"segmentdecryptioncomplete",segment:y}),id(y,t=>{if(t)return $c(e),d(t,y);f()})});f()}}}},dd=({loadendState:e,abortFn:t})=>n=>{const i=n.target;i.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)},hd=({segment:e,progressFn:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>n=>{const i=n.target;if(!i.aborted)return e.stats=Al(e.stats,Zc(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)},pd=({xhr:e,xhrOptions:t,decryptionWorker:n,segment:i,abortFn:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f,doneFn:g,onTransmuxerLog:m,triggerSegmentEventFn:y})=>{const v=[],b=cd({activeXhrs:v,decryptionWorker:n,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f,doneFn:g,onTransmuxerLog:m,triggerSegmentEventFn:y});if(i.key&&!i.key.bytes){const n=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&n.push(i.map.key);const r=Al(t,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),s=ed(i,n,b,y),a={uri:i.key.resolvedUri};y({type:"segmentkeyloadstart",segment:i,keyInfo:a});const o=e(r,s);v.push(o)}if(i.map&&!i.map.bytes){const n=i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri);if(n){const n=Al(t,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),r=ed(i,[i.map.key],b,y),s={uri:i.map.key.resolvedUri};y({type:"segmentkeyloadstart",segment:i,keyInfo:s});const a=e(n,r);v.push(a)}const r=Al(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Ku(i.map),requestType:"segment-media-initialization"}),s=rd({segment:i,finishProcessingFn:b,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:i});const a=e(r,s);v.push(a)}const T=Al(t,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Ku(i),requestType:"segment"}),_=sd({segment:i,finishProcessingFn:b,responseType:T.responseType,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:i});const w=e(T,_);w.addEventListener("progress",hd({segment:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f})),v.push(w);const S={};return v.forEach(e=>{e.addEventListener("loadend",dd({loadendState:S,abortFn:r}))}),()=>$c(v)},fd=El("PlaylistSelector"),gd=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},md=function(e,t){if(!e)return"";const n=r().getComputedStyle(e);return n?n[t]:""},yd=function(e,t){const n=e.slice();e.sort(function(e,i){const r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r})},vd=function(e,t){let n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||r().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||r().Number.MAX_VALUE,n-i},bd=function(e,t){let n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||r().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||r().Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i};let Td=function(e){const{main:t,bandwidth:n,playerWidth:i,playerHeight:s,playerObjectFit:a,limitRenditionByPlayerDimensions:o,playlistController:l}=e;if(!t)return;const u={bandwidth:n,width:i,height:s,limitRenditionByPlayerDimensions:o};let c=t.playlists;du.isAudioOnly(t)&&(c=l.getAudioTrackPlaylists_(),u.audioOnly=!0);let d=c.map(e=>{let t;const n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||r().Number.MAX_VALUE,{bandwidth:t,width:n,height:i,playlist:e}});yd(d,(e,t)=>e.bandwidth-t.bandwidth),d=d.filter(e=>!du.isIncompatible(e.playlist));let h=d.filter(e=>du.isEnabled(e.playlist));h.length||(h=d.filter(e=>!du.isDisabled(e.playlist)));const p=h.filter(e=>e.bandwidth*Cc.BANDWIDTH_VARIANCE<n);let f=p[p.length-1];const g=p.filter(e=>e.bandwidth===f.bandwidth)[0];if(!1===o){const e=g||h[0]||d[0];if(e&&e.playlist){let t="sortedPlaylistReps";return g&&(t="bandwidthBestRep"),h[0]&&(t="enabledPlaylistReps"),fd(`choosing ${gd(e)} using ${t} with options`,u),e.playlist}return fd("could not choose a playlist with options",u),null}const m=p.filter(e=>e.width&&e.height);yd(m,(e,t)=>e.width-t.width);const y=m.filter(e=>e.width===i&&e.height===s);f=y[y.length-1];const v=y.filter(e=>e.bandwidth===f.bandwidth)[0];let b,T,_,w;if(v||(b=m.filter(e=>"cover"===a?e.width>i&&e.height>s:e.width>i||e.height>s),T=b.filter(e=>e.width===b[0].width&&e.height===b[0].height),f=T[T.length-1],_=T.filter(e=>e.bandwidth===f.bandwidth)[0]),l.leastPixelDiffSelector){const e=m.map(e=>(e.pixelDiff=Math.abs(e.width-i)+Math.abs(e.height-s),e));yd(e,(e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff),w=e[0]}const S=w||_||v||g||h[0]||d[0];if(S&&S.playlist){let e="sortedPlaylistReps";return w?e="leastPixelDiffRep":_?e="resolutionPlusOneRep":v?e="resolutionBestRep":g?e="bandwidthBestRep":h[0]&&(e="enabledPlaylistReps"),fd(`choosing ${gd(S)} using ${e} with options`,u),S.playlist}return fd("could not choose a playlist with options",u),null};const _d=function(){let e=this.useDevicePixelRatio&&r().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(e=this.customPixelRatio),Td({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(md(this.tech_.el(),"width"),10)*e,playerHeight:parseInt(md(this.tech_.el(),"height"),10)*e,playerObjectFit:this.usePlayerObjectFit?md(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},wd=function(e){let t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&r().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Td({main:this.playlists.main,bandwidth:t,playerWidth:parseInt(md(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(md(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?md(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},Sd=function(e){const{main:t,currentTime:n,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=e,u=t.playlists.filter(e=>!du.isIncompatible(e));let c=u.filter(du.isEnabled);c.length||(c=u.filter(e=>!du.isDisabled(e)));const d=c.filter(du.hasAttribute.bind(null,"BANDWIDTH")),h=d.map(e=>{const t=l.getSyncPoint(e,r,o,n),u=t?1:2,c=du.estimateSegmentRequestTime(s,i,e),d=c*u-a;return{playlist:e,rebufferingImpact:d}}),p=h.filter(e=>e.rebufferingImpact<=0);return yd(p,(e,t)=>vd(t.playlist,e.playlist)),p.length?p[0]:(yd(h,(e,t)=>e.rebufferingImpact-t.rebufferingImpact),h[0]||null)},Ed=function(){const e=this.playlists.main.playlists.filter(du.isEnabled);yd(e,(e,t)=>vd(e,t));const t=e.filter(e=>!!Du(this.playlists.main,e).video);return t[0]||null},Ad=e=>{let t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach(e=>{t.set(e,n),n+=e.byteLength})),t};function Cd(e){try{return new URL(e).pathname.split("/").slice(-2).join("/")}catch(t){return""}}const Id=function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});let i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);const r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{const r=t.options_.vhs&&t.options_.vhs.captionServices||{};let s=n,a=n,o=!1;const l=r[i];l&&(s=l.label,a=l.language,o=l.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:o,label:s,language:a},!1).track}}},xd=function({inbandTextTracks:e,captionArray:t,timestampOffset:n}){if(!t)return;const i=r().WebKitDataCue||r().VTTCue;t.forEach(t=>{const r=t.stream;t.content?t.content.forEach(s=>{const a=new i(t.startTime+n,t.endTime+n,s.text);a.line=s.line,a.align="left",a.position=s.position,a.positionAlign="line-left",e[r].addCue(a)}):e[r].addCue(new i(t.startTime+n,t.endTime+n,t.text))})},kd=function(e){Object.defineProperties(e.frame,{id:{get(){return ml.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get(){return ml.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get(){return ml.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},Md=({inbandTextTracks:e,metadataArray:t,timestampOffset:n,videoDuration:i})=>{if(!t)return;const s=r().WebKitDataCue||r().VTTCue,a=e.metadataTrack_;if(!a)return;if(t.forEach(e=>{const t=e.cueTime+n;!("number"!==typeof t||r().isNaN(t)||t<0)&&t<1/0&&e.frames&&e.frames.length&&e.frames.forEach(e=>{const n=new s(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,kd(n),a.addCue(n)})}),!a.cues||!a.cues.length)return;const o=a.cues,l=[];for(let r=0;r<o.length;r++)o[r]&&l.push(o[r]);const u=l.reduce((e,t)=>{const n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),c=Object.keys(u).sort((e,t)=>Number(e)-Number(t));c.forEach((e,t)=>{const n=u[e],r=isFinite(i)?i:e,s=Number(c[t+1])||r;n.forEach(e=>{e.endTime=s})})},Dd={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Rd=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Od=({inbandTextTracks:e,dateRanges:t})=>{const n=e.metadataTrack_;if(!n)return;const i=r().WebKitDataCue||r().VTTCue;t.forEach(e=>{for(const t of Object.keys(e)){if(Rd.has(t))continue;const r=new i(e.startTime,e.endTime,"");r.id=e.id,r.type="com.apple.quicktime.HLS",r.value={key:Dd[t],data:e[t]},"scte35Out"!==t&&"scte35In"!==t||(r.value.data=new Uint8Array(r.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(r)}e.processDateRange()})},Nd=(e,t,n)=>{e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,ml.browser.IS_ANY_SAFARI||(e.metadataTrack_.inBandMetadataTrackDispatchType=t))},Ld=function(e,t,n){let i,r;if(n&&n.cues){i=n.cues.length;while(i--)r=n.cues[i],r.startTime>=e&&r.endTime<=t&&n.removeCue(r)}},Pd=function(e){const t=e.cues;if(!t)return;const n={};for(let i=t.length-1;i>=0;i--){const r=t[i],s=`${r.startTime}-${r.endTime}-${r.text}`;n[s]?e.removeCue(r):n[s]=r}},Ud=(e,t,n)=>{if("undefined"===typeof t||null===t||!e.length)return[];const i=Math.ceil((t-n+3)*sn.ONE_SECOND_IN_TS);let r;for(r=0;r<e.length;r++)if(e[r].pts>i)break;return e.slice(r)},Bd=(e,t,n)=>{if(!t.length)return e;if(n)return t.slice();const i=t[0].pts;let r=0;for(r;r<e.length;r++)if(e[r].pts>=i)break;return e.slice(0,r).concat(t)},Fd=(e,t,n,i)=>{const r=Math.ceil((t-i)*sn.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*sn.ONE_SECOND_IN_TS),a=e.slice();let o=e.length;while(o--)if(e[o].pts<=s)break;if(-1===o)return a;let l=o+1;while(l--)if(e[l].pts<=r)break;return l=Math.max(l,0),a.splice(l,o-l+1),a},jd=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(s!==i[r])return!1;if(e[s]!==t[s])return!1}return!0},Vd=function(e,t,n){t=t||[];const i=[];let r=0;for(let s=0;s<t.length;s++){const a=t[s];if(e===a.timeline&&(i.push(s),r+=a.duration,r>n))return s}return 0===i.length?0:i[i.length-1]},Hd=1,zd=500,Gd=e=>"number"===typeof e&&isFinite(e),qd=1/60,Wd=(e,t,n)=>"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null,Xd=(e,t,n)=>{let i=t-Cc.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));const r=t-n;return Math.min(r,i)},Kd=e=>{const{startOfSegment:t,duration:n,segment:i,part:r,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=e,d=o.length-1;let h="mediaIndex/partIndex increment";e.getMediaInfoForTime?h=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(h+=` with independent ${e.independent}`);const p="number"===typeof u,f=e.segment.uri?"segment":"pre-segment",g=p?Gl({preloadSegment:i})-1:0;return`${f} [${s+l}/${s+d}]`+(p?` part [${u}/${g}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(p?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${t}]`+` duration [${n}]`+` timeline [${c}]`+` selected by [${h}]`+` playlist [${a}]`},Yd=e=>`${e}TimingInfo`,$d=({segmentTimeline:e,currentTimeline:t,startOfSegment:n,buffered:i,overrideCheck:r})=>r||e!==t?e<t?n:i.length?i.end(i.length-1):n:null,Qd=({timelineChangeController:e,currentTimeline:t,segmentTimeline:n,loaderType:i,audioDisabled:r})=>{if(t===n)return!1;if("audio"===i){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==n}if("main"===i&&r){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==n}return!1},Zd=e=>{if(!e)return!1;const t=e.pendingTimelineChange({type:"audio"}),n=e.pendingTimelineChange({type:"main"}),i=t&&n,r=i&&t.to!==n.to,s=i&&-1!==t.from&&-1!==n.from;return!(!s||!r)},Jd=e=>{const t=e.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=e.timelineChangeController_.pendingTimelineChange({type:"main"}),i=t&&n;return i&&t.to<n.to},eh=e=>{const t=e.pendingSegment_;if(!t)return;const n=Qd({timelineChangeController:e.timelineChangeController_,currentTimeline:e.currentTimeline_,segmentTimeline:t.timeline,loaderType:e.loaderType_,audioDisabled:e.audioDisabled_});if(n&&Zd(e.timelineChangeController_)){if(Jd(e))return void e.timelineChangeController_.trigger("audioTimelineBehind");e.timelineChangeController_.trigger("fixBadTimelineChange")}},th=e=>{let t=0;return["video","audio"].forEach(function(n){const i=e[`${n}TimingInfo`];if(!i)return;const{start:s,end:a}=i;let o;"bigint"===typeof s||"bigint"===typeof a?o=r().BigInt(a)-r().BigInt(s):"number"===typeof s&&"number"===typeof a&&(o=a-s),"undefined"!==typeof o&&o>t&&(t=o)}),"bigint"===typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},nh=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+xl,ih=(e,t)=>{if("hls"!==t)return null;const n=th({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;const i=e.playlist.targetDuration,r=nh({segmentDuration:n,maxDuration:2*i}),s=nh({segmentDuration:n,maxDuration:i}),a=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${n} when the reported duration is ${e.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:a}:null},rh=({type:e,segment:t})=>{if(!t)return;const n=Boolean(t.key||t.map&&t.map.ke),i=Boolean(t.map&&!t.map.bytes),r=void 0===t.startOfSegment?t.start:t.startOfSegment;return{type:e||t.type,uri:t.resolvedUri||t.uri,start:r,duration:t.duration,isEncrypted:n,isMediaInitialization:i}};class sh extends ml.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!==typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=El(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():eh(this)}),this.sourceUpdater_.on("codecschange",e=>{this.trigger(d({type:"codecschange"},e))}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():eh(this)}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",e=>{this.trigger(d({type:"timelinechange"},e)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():eh(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():eh(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Wc.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if("WAITING"!==this.state)return this.pendingSegment_&&(this.pendingSegment_=null),void this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,r().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return"undefined"!==typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Wc.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Cl();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=Ju(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=ec(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;if(this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:\ncurrentTime: ${this.currentTime_()}\nbufferedEnd: ${Fl(this.buffered_())}\n`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){if(null!==this.mediaIndex){const t=!e.endList&&"number"===typeof e.partTargetDuration;t?this.resetLoader():this.resyncLoader()}return this.currentMediaInfo_=void 0,void this.trigger("playlistupdate")}const s=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${s}]`),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}i&&(i.mediaIndex-=s,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Wc.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4,t="hls"===this.sourceType_&&!e;t&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const s=()=>{r--,0===r&&n()};!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,s)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=Fd(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,s));for(const a in this.inbandTextTracks_)Ld(e,t,this.inbandTextTracks_[a]);Ld(e,t,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&r().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=r().setTimeout(this.monitorBufferTick_.bind(this),zd)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:rh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),"number"===typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"===typeof e&&t.segments[e],r=e+1===t.segments.length,s=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&s}chooseNextRequest_(){const e=this.buffered_(),t=Fl(e)||0,n=jl(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=Vd(this.currentTimeline_,s,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${a.mediaIndex}`);else if(null!==this.mediaIndex){const e=s[this.mediaIndex],n="number"===typeof this.partIndex?this.partIndex:-1;a.startOfSegment=e.end?e.end:t,e.parts&&e.parts[n+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=n+1):a.mediaIndex=this.mediaIndex+1}else{let e,n,i;const r=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:\nFor TargetTime: ${r}.\nCurrentTime: ${this.currentTime_()}\nBufferedEnd: ${t}\nFetch At Buffer: ${this.fetchAtBuffer_}\n`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const t=this.getSyncInfoFromMediaSequenceSync_(r);if(!t){const e="No sync info found while using media sequence sync";return this.error({message:e,metadata:{errorType:ml.Error.StreamingFailedToSelectNextSegment,error:new Error(e)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${t.start} --\x3e ${t.end})`),e=t.segmentIndex,n=t.partIndex,i=t.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const t=du.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:r,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});e=t.segmentIndex,n=t.partIndex,i=t.startTime}a.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${r}`:`currentTime ${r}`,a.mediaIndex=e,a.startOfSegment=i,a.partIndex=n,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${a.mediaIndex} `)}const o=s[a.mediaIndex];let l=o&&"number"===typeof a.partIndex&&o.parts&&o.parts[a.partIndex];if(!o||"number"===typeof a.partIndex&&!l)return null;"number"!==typeof a.partIndex&&o.parts&&(a.partIndex=0,l=o.parts[0]);const u=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&l&&!u&&!l.independent)if(0===a.partIndex){const e=s[a.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(a.mediaIndex-=1,a.partIndex=e.parts.length-1,a.independent="previous segment")}else o.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");const c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=s.length-1&&c&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,a.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(a))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const i=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return i?(i.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),i):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:r,isSyncRequest:s,partIndex:a,forceTimestampOffset:o,getMediaInfoForTime:l}=e,u=n.segments[i],c="number"===typeof a&&u.parts[a],d={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:i,partIndex:c?a:null,isSyncRequest:s,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h="undefined"!==typeof o?o:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:h});const p=Fl(this.sourceUpdater_.audioBuffered());return"number"===typeof p&&(d.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=Ud(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d}timestampOffsetForSegment_(e){return $d(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=du.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),s=Pl(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=s)return;const a=Sd({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a)return;const o=r-s,l=o-a.rebufferingImpact;let u=.5;s<=xl&&(u=1),!a.playlist||a.playlist.uri===this.playlist_.uri||l<u||(this.bandwidth=a.playlist.attributes.BANDWIDTH*Cc.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Kd(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:i}=t,r={segmentInfo:rh({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:i}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},jd(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():eh(this)))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,s=Yd(t);r[s]=r[s]||{},r[s][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():eh(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");const n=this.pendingSegment_;if(!n.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(e=>{r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+i),t.endTime=Math.max(t.endTime,e.endTime+i),t.captions.push(e)}),Object.keys(r).forEach(e=>{const{startTime:t,endTime:n,captions:s}=r[e],a=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${n} for ${e}`),Id(a,this.vhs_.tech_,e),Ld(t,n,a[e]),xd({captionArray:s,inbandTextTracks:a,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const i=this.pendingSegment_;i.hasAppendedData_?this.addMetadataToTextTrack(n,t,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(e=>e())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(e=>e())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!Qd({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:r}=t;return!(i&&!e.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!Qd({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return eh(this),void this.callQueue_.push(this.handleData_.bind(this,e,t));const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Yd(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let i;t&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==n.mediaIndex||e.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!==typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const e=Ju(n);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Ul(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Ul(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Hd&&c-u<=Hd)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${Ul(s).join(", ")}, video buffer: ${Ul(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const d=this.currentTime_(),h=d-Hd;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${h}`),this.remove(0,h,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Hd}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=r().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3*Hd)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){i&&(i.code!==Su?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:ml.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:r}){if(!r){const e=[i];let t=i.byteLength;n&&(e.unshift(n),t+=n.byteLength),r=Ad({bytes:t,segments:e})}const s={segmentInfo:rh({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:s}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,r=`${e}TimingInfo`;i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength)return;if("audio"===n&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"===typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_())return eh(this),void this.loadQueue_.push(()=>{const t=d({},e,{forceTimestampOffset:!0});d(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,r=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||i&&r;this.logger_(`Requesting\n${Cd(e.uri)}\n${Kd(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=pd({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:n,stream:i})=>{this.logger_(`${Kd(e)} logged from transmuxer stream ${i} as a ${n}: ${t}`)},triggerSegmentEventFn:({type:e,segment:t,keyInfo:n,trackInfo:i,timingInfo:r})=>{const s=rh({segment:t}),a={segmentInfo:s};n&&(a.keyInfo=n),i&&(a.trackInfo=i),r&&(a.timingInfo=r),this.trigger({type:e,metadata:a})}})}trimBackBuffer_(e){const t=Xd(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i=e.segment.key||e.segment.map&&e.segment.map.key,r=e.segment.map&&!e.segment.map.bytes,s={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:i,isMediaInitialization:r},a=e.playlist.segments[e.mediaIndex-1];if(a&&a.timeline===t.timeline&&(a.videoTimingInfo?s.baseStartTime=a.videoTimingInfo.transmuxedDecodeEnd:a.audioTimingInfo&&(s.baseStartTime=a.audioTimingInfo.transmuxedDecodeEnd)),t.key){const n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);s.key=this.segmentKey(t.key),s.key.iv=n}return t.map&&(s.map=this.initSegmentForMap(t.map)),s}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<qd)return void this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${qd}`);const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Kc.ABORTED)return;return this.pause(),e.code===Kc.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=Bd(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"===typeof e.start&&"number"===typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:r,useVideoTimingInfo:s,videoTimingInfo:a,audioTimingInfo:o}){if("undefined"!==typeof e)return e;if(!s)return o.start;const l=t.segments[n-1];return 0!==n&&l&&"undefined"!==typeof l.start&&l.end===i+r?a.start:i}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:n,hasVideo:i,isMuxed:r}=t,s="main"===this.loaderType_&&i,a=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!==typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);s&&e.waitingOnAppends++,a&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Wd(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!==typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&"number"===typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"===typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo,i=n&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end="number"===typeof i.end?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const e={segmentInfo:rh({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:e})}if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=ih(e,this.sourceType_);if(t&&("warn"===t.severity?ml.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Kd(e)}`);this.logger_(`Appended ${Kd(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,s=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||s)return this.logger_(`bad ${r?"segment":"part"} ${Kd(e)}`),void this.resetEverything();const a=null!==this.mediaIndex;a&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<qd)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${qd}`);const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!Gd(n)||!Gd(i))return;Ld(n,i,this.segmentMetadataTrack_);const s=r().WebKitDataCue||r().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=JSON.stringify(a),l=new s(n,i,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function ah(){}const oh=function(e){return"string"!==typeof e?e:e.replace(/./,e=>e.toUpperCase())},lh=["video","audio"],uh=(e,t)=>{const n=t[`${e}Buffer`];return n&&n.updating||t.queuePending[e]},ch=(e,t)=>{for(let n=0;n<t.length;n++){const i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null},dh=(e,t)=>{if(0===t.queue.length)return;let n=0,i=t.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!uh(e,t)){if(i.type!==e){if(n=ch(e,t.queue),null===n)return;i=t.queue[n]}return t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),i.doneFn?void 0:(t.queuePending[e]=null,void dh(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),dh("audio",t),dh("video",t))},hh=(e,t)=>{const n=t[`${e}Buffer`],i=oh(e);n&&(n.removeEventListener("updateend",t[`on${i}UpdateEnd_`]),n.removeEventListener("error",t[`on${i}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},ph=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),fh={appendBuffer:(e,t,n)=>(i,r)=>{const s=r[`${i}Buffer`];if(ph(r.mediaSource,s)){r.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${i}Buffer`);try{s.appendBuffer(e)}catch(a){r.logger_(`Error with code ${a.code} `+(a.code===Su?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,n(a)}}},remove:(e,t)=>(n,i)=>{const r=i[`${n}Buffer`];if(ph(i.mediaSource,r)){i.logger_(`Removing ${e} to ${t} from ${n}Buffer`);try{r.remove(e,t)}catch(s){i.logger_(`Remove ${e} to ${t} from ${n}Buffer failed`)}}},timestampOffset:e=>(t,n)=>{const i=n[`${t}Buffer`];ph(n.mediaSource,i)&&(n.logger_(`Setting ${t}timestampOffset to ${e}`),i.timestampOffset=e)},callback:e=>(t,n)=>{e()},endOfStream:e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(n){ml.log.warn("Failed to call media source endOfStream",n)}}},duration:e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(n){ml.log.warn("Failed to set media source duration",n)}},abort:()=>(e,t)=>{if("open"!==t.mediaSource.readyState)return;const n=t[`${e}Buffer`];if(ph(t.mediaSource,n)){t.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(i){ml.log.warn(`Failed to abort on ${e}Buffer`,i)}}},addSourceBuffer:(e,t)=>n=>{const i=oh(e),r=U(t);n.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const s=n.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",n[`on${i}UpdateEnd_`]),s.addEventListener("error",n[`on${i}Error_`]),n.codecs[e]=t,n[`${e}Buffer`]=s},removeSourceBuffer:e=>t=>{const n=t[`${e}Buffer`];if(hh(e,t),ph(t.mediaSource,n)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(i){ml.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,i)}}},changeType:e=>(t,n)=>{const i=n[`${t}Buffer`],r=U(e);if(!ph(n.mediaSource,i))return;const s=e.substring(0,e.indexOf(".")),a=n.codecs[t],o=a.substring(0,a.indexOf("."));if(o===s)return;const l={codecsChangeInfo:{from:a,to:e}};n.trigger({type:"codecschange",metadata:l}),n.logger_(`changing ${t}Buffer codec from ${a} to ${e}`);try{i.changeType(r),n.codecs[t]=e}catch(u){l.errorType=ml.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,n.error_=u,n.trigger("error"),ml.log.warn(`Failed to changeType on ${t}Buffer`,u)}}},gh=({type:e,sourceUpdater:t,action:n,doneFn:i,name:r})=>{t.queue.push({type:e,action:n,doneFn:i,name:r}),dh(e,t)},mh=(e,t)=>n=>{const i=t[`${e}Buffered`](),r=Il(i);if(t.logger_(`received "updateend" event for ${e} Source Buffer: `,r),t.queuePending[e]){const n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[`${e}Error_`])}dh(e,t)};class yh extends ml.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>dh("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=El("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=mh("video",this),this.onAudioUpdateEnd_=mh("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){gh({type:"mediaSource",sourceUpdater:this,action:fh.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){gh({type:e,sourceUpdater:this,action:fh.abort(e),name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?gh({type:"mediaSource",sourceUpdater:this,action:fh.removeSourceBuffer(e),name:"removeSourceBuffer"}):ml.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!ml.browser.IS_FIREFOX&&r().MediaSource&&r().MediaSource.prototype&&"function"===typeof r().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return r().SourceBuffer&&r().SourceBuffer.prototype&&"function"===typeof r().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?gh({type:e,sourceUpdater:this,action:fh.changeType(t),name:"changeType"}):ml.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!==typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:r}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${r.length} until video append`);const s=t;if(gh({type:i,sourceUpdater:this,action:fh.appendBuffer(r,n||{mediaIndex:-1},s),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach(e=>{this.appendBuffer.apply(this,e)})}}audioBuffered(){return ph(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Cl()}videoBuffered(){return ph(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Cl()}buffered(){const e=ph(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=ph(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Nl(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=ah){gh({type:"mediaSource",sourceUpdater:this,action:fh.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=ah){"string"!==typeof e&&(e=void 0),gh({type:"mediaSource",sourceUpdater:this,action:fh.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=ah){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?gh({type:"audio",sourceUpdater:this,action:fh.remove(e,t),doneFn:n,name:"remove"}):n()}removeVideo(e,t,n=ah){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?gh({type:"video",sourceUpdater:this,action:fh.remove(e,t),doneFn:n,name:"remove"}):n()}updating(){return!(!uh("audio",this)&&!uh("video",this))}audioTimestampOffset(e){return"undefined"!==typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(gh({type:"audio",sourceUpdater:this,action:fh.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return"undefined"!==typeof e&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(gh({type:"video",sourceUpdater:this,action:fh.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&gh({type:"audio",sourceUpdater:this,action:fh.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&gh({type:"video",sourceUpdater:this,action:fh.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),lh.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>hh(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const vh=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),bh=e=>{const t=new Uint8Array(e);return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")},Th=new Uint8Array("\n\n".split("").map(e=>e.charCodeAt(0)));class _h extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class wh extends sh{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Cl();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Cl([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=Ju(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const t=Th.byteLength+e.bytes.byteLength,r=new Uint8Array(t);r.set(e.bytes),r.set(Th,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:r}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return"undefined"===typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){Ld(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){while(e&&e.segment.empty){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Kc.TIMEOUT&&this.handleTimeout_(),e.code===Kc.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_,s=n.mp4VttCues&&n.mp4VttCues.length;s&&(i.mp4VttCues=n.mp4VttCues),this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const a=i.segment;if(a.map&&(a.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!==typeof r().WebVTT&&"function"===typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));a.requested=!0;try{this.parseVTTCues_(i)}catch(o){return void this.stopForError({message:o.message,metadata:{errorType:ml.Error.StreamingVttParserError,error:o}})}if(s||this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,i.cues.forEach(e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(r().VTTCue)(e.startTime,e.endTime,e.text):e)}),Pd(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const n=e&&"vtt"===e.type,i=t&&"text"===t.type,r=n&&i;r&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(n=>{const i=n.start+t,s=n.end+t,a=new(r().VTTCue)(i,s,n.cueText);n.settings&&n.settings.split(" ").forEach(e=>{const t=e.split(":"),n=t[0],i=t[1];a[n]=isNaN(i)?i:Number(i)}),e.cues.push(a)})}parseVTTCues_(e){let t,n=!1;if("function"!==typeof r().WebVTT)throw new _h;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues)return void this.parseMp4VttCues_(e);"function"===typeof r().TextDecoder?t=new(r().TextDecoder)("utf8"):(t=r().WebVTT.StringDecoder(),n=!0);const i=new(r().WebVTT.Parser)(r(),r().vttjs,t);if(i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=t=>{e.timestampmap=t},i.onparsingerror=e=>{ml.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;n&&(t=vh(t)),i.parse(t)}let s=e.bytes;n&&(s=vh(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const{MPEGTS:r,LOCAL:s}=e.timestampmap,a=r/sn.ONE_SECOND_IN_TS,o=a-s+t.mapping;if(e.cues.forEach(e=>{const n=e.endTime-e.startTime,i=this.handleRollover_(e.startTime+o,t.time);e.startTime=Math.max(i,0),e.endTime=Math.max(i+n,0)}),!n.syncInfo){const t=e.cues[0].startTime,r=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(t,r-i.duration)}}}handleRollover_(e,t){if(null===t)return e;let n=e*sn.ONE_SECOND_IN_TS;const i=t*sn.ONE_SECOND_IN_TS;let r;r=i<n?-8589934592:8589934592;while(Math.abs(n-i)>4294967296)n+=r;return n/sn.ONE_SECOND_IN_TS}}const Sh=function(e,t){const n=e.cues;for(let i=0;i<n.length;i++){const e=n[i];if(t>=e.adStartTime&&t<=e.adEndTime)return e}return null},Eh=function(e,t,n=0){if(!e.segments)return;let i,s=n;for(let a=0;a<e.segments.length;a++){const n=e.segments[a];if(i||(i=Sh(t,s+n.duration/2)),i){if("cueIn"in n){i.endTime=s,i.adEndTime=s,s+=n.duration,i=null;continue}if(s<i.endTime){s+=n.duration;continue}i.endTime+=n.duration}else if("cueOut"in n&&(i=new(r().VTTCue)(s,s+n.duration,n.cueOut),i.adStartTime=s,i.adEndTime=s+parseFloat(n.cueOut),t.addCue(i)),"cueOutCont"in n){const[e,a]=n.cueOutCont.split("/").map(parseFloat);i=new(r().VTTCue)(s,s+n.duration,""),i.adStartTime=s-e,i.adEndTime=i.adStartTime+a,t.addCue(i)}s+=n.duration}};class Ah{constructor({start:e,end:t,segmentIndex:n,partIndex:i=null,appended:r=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=i,this.appended_=r}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Ch{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class Ih{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:i}=e;if(this.isReliable_=this.isReliablePlaylist_(n,i),this.isReliable_)return this.updateStorage_(i,n,this.calculateBaseTime_(n,i,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const i of n)if(i.isInRange(e))return i}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const i=new Map;let r="\n",s=n,a=t;this.start_=s,e.forEach((e,t)=>{const n=this.storage_.get(a),o=s,l=o+e.duration,u=Boolean(n&&n.segmentSyncInfo&&n.segmentSyncInfo.isAppended),c=new Ah({start:o,end:l,appended:u,segmentIndex:t});e.syncInfo=c;let d=s;const h=(e.parts||[]).map((e,i)=>{const s=d,o=d+e.duration,l=Boolean(n&&n.partsSyncInfo&&n.partsSyncInfo[i]&&n.partsSyncInfo[i].isAppended),u=new Ah({start:s,end:o,appended:l,segmentIndex:t,partIndex:i});return d=o,r+=`Media Sequence: ${a}.${i} | Range: ${s} --\x3e ${o} | Appended: ${l}\n`,e.syncInfo=u,u});i.set(a,new Ch(c,h)),r+=`${Cd(e.resolvedUri)} | Media Sequence: ${a} | Range: ${o} --\x3e ${l} | Appended: ${u}\n`,a++,s=l}),this.end_=s,this.storage_=i,this.diagnostics_=r}calculateBaseTime_(e,t,n){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const i=Math.min(...this.storage_.keys());if(e<i){const n=i-e;let r=this.storage_.get(i).segmentSyncInfo.start;for(let e=0;e<n;e++){const n=t[e];r-=n.duration}return r}return n}isReliablePlaylist_(e,t){return void 0!==e&&null!==e&&Array.isArray(t)&&t.length}}class xh extends Ih{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,n){if(!this.storage_.size){const t=this.parent_.getSyncInfoForMediaSequence(e);return t?t.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,n)}}const kh=86400,Mh=[{name:"VOD",run:(e,t,n,i,r)=>{if(n!==1/0){const e={time:0,segmentIndex:0,partIndex:null};return e}return null}},{name:"MediaSequence",run:(e,t,n,i,r,s)=>{const a=e.getMediaSequenceSync(s);if(!a)return null;if(!a.isReliable)return null;const o=a.getSyncInfoForTime(r);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(e,t,n,i,r)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=Hl(t);r=r||0;for(let l=0;l<o.length;l++){const n=t.endList||0===r?l:o.length-(l+1),i=o[n],u=i.segment,c=e.timelineToDatetimeMappings[u.timeline];if(!c||!u.dateTimeObject)continue;const d=u.dateTimeObject.getTime()/1e3;let h=d+c;if(u.parts&&"number"===typeof i.partIndex)for(let e=0;e<i.partIndex;e++)h+=u.parts[e].duration;const p=Math.abs(r-h);if(null!==a&&(0===p||a<p))break;a=p,s={time:h,segmentIndex:i.segmentIndex,partIndex:i.partIndex}}return s}},{name:"Segment",run:(e,t,n,i,r)=>{let s=null,a=null;r=r||0;const o=Hl(t);for(let l=0;l<o.length;l++){const e=t.endList||0===r?l:o.length-(l+1),n=o[e],u=n.segment,c=n.part&&n.part.start||u&&u.start;if(u.timeline===i&&"undefined"!==typeof c){const e=Math.abs(r-c);if(null!==a&&a<e)break;(!s||null===a||a>=e)&&(a=e,s={time:c,segmentIndex:n.segmentIndex,partIndex:n.partIndex})}}return s}},{name:"Discontinuity",run:(e,t,n,i,r)=>{let s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length){let n=null;for(let i=0;i<t.discontinuityStarts.length;i++){const a=t.discontinuityStarts[i],o=t.discontinuitySequence+i+1,l=e.discontinuities[o];if(l){const e=Math.abs(r-l.time);if(null!==n&&n<e)break;(!s||null===n||n>=e)&&(n=e,s={time:l.time,segmentIndex:a,partIndex:null})}}}return s}},{name:"Playlist",run:(e,t,n,i,r)=>{if(t.syncInfo){const e={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return e}return null}}];class Dh extends ml.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new Ih,n=new xh(t),i=new xh(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:i},this.logger_=El("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,i,r){if(t!==1/0){const n=Mh.find(({name:e})=>"VOD"===e);return n.run(this,e,t)}const s=this.runStrategies_(e,t,n,i,r);if(!s.length)return null;for(const a of s){const{syncPoint:t,strategy:n}=a,{segmentIndex:r,time:s}=t;if(r<0)continue;const o=e.segments[r],l=s,u=l+o.duration;if(this.logger_(`Strategy: ${n}. Current time: ${i}. selected segment: ${r}. Time: [${l} -> ${u}]}`),i>=l&&i<u)return this.logger_("Found sync point with exact match: ",t),t}return this.selectSyncPoint_(s,{key:"time",value:i})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+$l({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i,r){const s=[];for(let a=0;a<Mh.length;a++){const o=Mh[a],l=o.run(this,e,t,n,i,r);l&&(l.strategy=o.name,s.push({strategy:o.name,syncPoint:l}))}return s}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let s=1;s<e.length;s++){const a=Math.abs(e[s].syncPoint[t.key]-t.value);a<i&&(i=a,n=e[s].syncPoint,r=e[s].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+("number"===typeof n.partIndex?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>kh)ml.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);else for(let i=n-1;i>=0;i--){const n=e.segments[i];if(n&&"undefined"!==typeof n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const r=i.dateTimeObject;i.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[i.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,r=e.part;let s,a,o=this.timelines[e.timeline];if("number"===typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),s=e.startOfSegment,a=t.end+o.mapping;else{if(!o)return!1;s=t.start+o.mapping,a=t.end+o.mapping}return r&&(r.start=s,r.end=a),(!i.start||s<i.start)&&(i.start=s),i.end=a,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const r=t.discontinuityStarts[i],s=t.discontinuitySequence+i+1,a=r-e.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){let i;i=a<0?n.start-$l({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+$l({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:i,accuracy:o}}}}dispose(){this.trigger("dispose"),this.off()}}class Rh extends ml.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return"number"===typeof t&&"number"===typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if("number"===typeof t&&"number"===typeof n){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const i={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:i})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Oh=Dc(Rc(function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function t(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const i=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4];let s,a,o;const l=[],u=[];let c,d,h,p,f,g;for(s=0;s<256;s++)u[(l[s]=s<<1^283*(s>>7))^s]=s;for(a=o=0;!i[a];a^=c||1,o=u[o]||1)for(p=o^o<<1^o<<2^o<<3^o<<4,p=p>>8^255&p^99,i[a]=p,r[p]=a,h=l[d=l[c=l[a]]],g=16843009*h^65537*d^257*c^16843008*a,f=257*l[p]^16843008*p,s=0;s<4;s++)t[s][a]=f=f<<24^f>>>8,n[s][p]=g=g<<24^g>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),n[s]=n[s].slice(0);return e};let r=null;class s{constructor(e){let t,n,s;r||(r=i()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];const a=this._tables[0][4],o=this._tables[1],l=e.length;let u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");const c=e.slice(0),d=[];for(this._key=[c,d],t=l;t<4*l+28;t++)s=c[t-1],(t%l===0||8===l&&t%l===4)&&(s=a[s>>>24]<<24^a[s>>16&255]<<16^a[s>>8&255]<<8^a[255&s],t%l===0&&(s=s<<8^s>>>24^u<<24,u=u<<1^283*(u>>7))),c[t]=c[t-l]^s;for(n=0;t;n++,t--)s=c[3&n?t:t-4],d[n]=t<=4||n<4?s:o[0][a[s>>>24]]^o[1][a[s>>16&255]]^o[2][a[s>>8&255]]^o[3][a[255&s]]}decrypt(e,t,n,i,r,s){const a=this._key[1];let o,l,u,c=e^a[0],d=i^a[1],h=n^a[2],p=t^a[3];const f=a.length/4-2;let g,m=4;const y=this._tables[1],v=y[0],b=y[1],T=y[2],_=y[3],w=y[4];for(g=0;g<f;g++)o=v[c>>>24]^b[d>>16&255]^T[h>>8&255]^_[255&p]^a[m],l=v[d>>>24]^b[h>>16&255]^T[p>>8&255]^_[255&c]^a[m+1],u=v[h>>>24]^b[p>>16&255]^T[c>>8&255]^_[255&d]^a[m+2],p=v[p>>>24]^b[c>>16&255]^T[d>>8&255]^_[255&h]^a[m+3],m+=4,c=o,d=l,h=u;for(g=0;g<4;g++)r[(3&-g)+s]=w[c>>>24]<<24^w[d>>16&255]<<16^w[h>>8&255]<<8^w[255&p]^a[m++],o=c,c=d,d=h,h=p,p=o}}class a extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(e,t,n){const i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new s(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),l=new Int32Array(a.buffer);let u,c,d,h,p,f,g,m,y;for(u=n[0],c=n[1],d=n[2],h=n[3],y=0;y<i.length;y+=4)p=o(i[y]),f=o(i[y+1]),g=o(i[y+2]),m=o(i[y+3]),r.decrypt(p,f,g,m,l,y),l[y]=o(l[y]^u),l[y+1]=o(l[y+1]^c),l[y+2]=o(l[y+2]^d),l[y+3]=o(l[y+3]^h),u=p,c=f,d=g,h=m;return a};class u{constructor(e,n,i,r){const s=u.STEP,l=new Int32Array(e.buffer),c=new Uint8Array(e.byteLength);let d=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+s),n,i,c)),d=s;d<l.length;d+=s)i=new Uint32Array([o(l[d-4]),o(l[d-3]),o(l[d-2]),o(l[d-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+s),n,i,c));this.asyncStream_.push(function(){r(null,t(c))})}static get STEP(){return 32e3}decryptChunk_(e,t,n,i){return function(){const r=l(e,t,n);i.set(r,e.byteOffset)}}}var c,d="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};c="undefined"!==typeof window?window:"undefined"!==typeof d?d:"undefined"!==typeof self?self:{};var h=c,p=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},f=h.BigInt||Number;f("0x1"),f("0x100"),f("0x10000"),f("0x1000000"),f("0x100000000"),f("0x10000000000"),f("0x1000000000000"),f("0x100000000000000"),f("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();const g=function(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];p(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i}),t};self.onmessage=function(e){const t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new u(n,i,r,function(e,n){self.postMessage(g({source:t.source,decrypted:n}),[n.buffer])})}}));var Nh=Mc(Oh);const Lh=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Ph=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Uh=(e,t)=>{t.activePlaylistLoader=e,e.load()},Bh=(e,t)=>()=>{const{segmentLoaders:{[e]:n,main:i},mediaTypes:{[e]:r}}=t,s=r.activeTrack(),a=r.getActiveGroup(),o=r.activePlaylistLoader,l=r.lastGroup_;a&&l&&a.id===l.id||(r.lastGroup_=a,r.lastTrack_=s,Ph(n,r),a&&!a.isMainPlaylist&&(a.playlistLoader?(n.resyncLoader(),Uh(a.playlistLoader,r)):o&&i.resetEverything()))},Fh=(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;i.lastGroup_=null,n.abort(),n.pause()},jh=(e,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[e]:i,main:r},mediaTypes:{[e]:s}}=t,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if((!u||!a||u.id!==a.id)&&(s.lastGroup_=o,s.lastTrack_=a,Ph(i,s),o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const e=t.vhs.playlistController_,i=e.selectPlaylist();if(e.media()===i)return;return s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),n.pause(),r.resetEverything(),void e.fastQualityChange_(i)}if("AUDIO"===e){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();i.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader?(i.track&&i.track(a),i.resetEverything(),Uh(o.playlistLoader,s)):Uh(o.playlistLoader,s)}},Vh={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:n},excludePlaylist:i}=t,r=n.activeTrack(),s=n.activeGroup(),a=(s.filter(e=>e.default)[0]||s[0]).id,o=n.tracks[a];if(r!==o){ml.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in n.tracks)n.tracks[e].enabled=n.tracks[e]===o;n.onTrackChanged()}else i({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:n}}=t;ml.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=n.activeTrack();i&&(i.mode="disabled"),n.onTrackChanged()}},Hh={AUDIO:(e,t,n)=>{if(!t)return;const{tech:i,requestOptions:r,segmentLoaders:{[e]:s}}=n;t.on("loadedmetadata",()=>{const e=t.media();s.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()}),t.on("loadedplaylist",()=>{s.playlist(t.media(),r),i.paused()||s.load()}),t.on("error",Vh[e](e,n))},SUBTITLES:(e,t,n)=>{const{tech:i,requestOptions:r,segmentLoaders:{[e]:s},mediaTypes:{[e]:a}}=n;t.on("loadedmetadata",()=>{const e=t.media();s.playlist(e,r),s.track(a.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()}),t.on("loadedplaylist",()=>{s.playlist(t.media(),r),i.paused()||s.load()}),t.on("error",Vh[e](e,n))}},zh={AUDIO:(e,t)=>{const{vhs:n,sourceType:i,segmentLoaders:{[e]:r},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[e]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=t,d=cu(c.main);a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}},d&&(a[e].main.default.playlists=c.main.playlists));for(const h in a[e]){o[h]||(o[h]=[]);for(const r in a[e][h]){let p,f=a[e][h][r];if(d?(u(`AUDIO group '${h}' label '${r}' is a main playlist`),f.isMainPlaylist=!0,p=null):p="vhs-json"===i&&f.playlists?new Hu(f.playlists[0],n,s):f.resolvedUri?new Hu(f.resolvedUri,n,s):f.playlists&&"dash"===i?new Ac(f.playlists[0],n,s,c):null,f=Al({id:r,playlistLoader:p},f),Hh[e](e,f.playlistLoader,t),o[h].push(f),"undefined"===typeof l[r]){const e=new ml.AudioTrack({id:r,kind:Lh(f),enabled:!1,language:f.language,default:f.default,label:r});l[r]=e}}}r.on("error",Vh[e](e,t))},SUBTITLES:(e,t)=>{const{tech:n,vhs:i,sourceType:r,segmentLoaders:{[e]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[e]:{groups:l,tracks:u}},mainPlaylistLoader:c}=t;for(const d in o[e]){l[d]||(l[d]=[]);for(const s in o[e][d]){if(!i.options_.useForcedSubtitles&&o[e][d][s].forced)continue;let h,p=o[e][d][s];if("hls"===r)h=new Hu(p.resolvedUri,i,a);else if("dash"===r){const e=p.playlists.filter(e=>e.excludeUntil!==1/0);if(!e.length)return;h=new Ac(p.playlists[0],i,a,c)}else"vhs-json"===r&&(h=new Hu(p.playlists?p.playlists[0]:p.resolvedUri,i,a));if(p=Al({id:s,playlistLoader:h},p),Hh[e](e,p.playlistLoader,t),l[d].push(p),"undefined"===typeof u[s]){const e=n.addRemoteTextTrack({id:s,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:s},!1).track;u[s]=e}}}s.on("error",Vh[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:n,main:{mediaGroups:i},mediaTypes:{[e]:{groups:r,tracks:s}}}=t;for(const a in i[e]){r[a]||(r[a]=[]);for(const t in i[e][a]){const o=i[e][a][t];if(!/^(?:CC|SERVICE)/.test(o.instreamId))continue;const l=n.options_.vhs&&n.options_.vhs.captionServices||{};let u={label:t,language:o.language,instreamId:o.instreamId,default:o.default&&o.autoselect};if(l[u.instreamId]&&(u=Al(u,l[u.instreamId])),void 0===u.default&&delete u.default,r[a].push(Al({id:t},o)),"undefined"===typeof s[t]){const e=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default,language:u.language,label:u.label},!1).track;s[t]=e}}}}},Gh=(e,t)=>{for(let n=0;n<e.length;n++){if(lu(t,e[n]))return!0;if(e[n].playlists&&Gh(e[n].playlists,t))return!0}return!1},qh=(e,t)=>n=>{const{mainPlaylistLoader:i,mediaTypes:{[e]:{groups:r}}}=t,s=i.media();if(!s)return null;let a=null;s.attributes[e]&&(a=r[s.attributes[e]]);const o=Object.keys(r);if(!a)if("AUDIO"===e&&o.length>1&&cu(t.main))for(let e=0;e<o.length;e++){const t=r[o[e]];if(Gh(t,s)){a=t;break}}else r.main?a=r.main:1===o.length&&(a=r[o[0]]);return"undefined"===typeof n?a:null!==n&&a&&a.filter(e=>e.id===n.id)[0]||null},Wh={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if(n[e].enabled)return n[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}},Xh=(e,{mediaTypes:t})=>()=>{const n=t[e].activeTrack();return n?t[e].activeGroup(n):null},Kh=e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{zh[t](t,e)});const{mediaTypes:t,mainPlaylistLoader:n,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:s,main:a}}=e;["AUDIO","SUBTITLES"].forEach(n=>{t[n].activeGroup=qh(n,e),t[n].activeTrack=Wh[n](n,e),t[n].onGroupChanged=Bh(n,e),t[n].onGroupChanging=Fh(n,e),t[n].onTrackChanged=jh(n,e),t[n].getActiveGroup=Xh(n,e)});const o=t.AUDIO.activeGroup();if(o){const e=(o.filter(e=>e.default)[0]||o[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();const n=t.AUDIO.getActiveGroup();n.playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(e=>t[e].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(e=>t[e].onGroupChanging())});const l=()=>{t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[u])},Yh=()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ah,activeTrack:ah,getActiveGroup:ah,onGroupChanged:ah,onTrackChanged:ah,lastTrack_:null,logger_:El(`MediaGroups[${t}]`)}}),e};class $h{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){1===e&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=wl(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(e=>[e.ID,e])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Qh extends ml.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new $h,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=El("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n)return this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),void this.trigger("error");n.startsWith("data:")?this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1)):(this.steeringManifest.reloadUri=wl(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();const i={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:i}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(e,t)=>{if(e){if(410===t.status)return this.logger_(`manifest request 410 ${e}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),void this.excludedSteeringManifestURLs.add(n);if(429===t.status){const n=t.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${e}.`),this.logger_(`content steering will retry in ${n} seconds.`),void this.startTTLTimeout_(parseInt(n,10))}return this.logger_(`manifest failed to load ${e}.`),void this.startTTLTimeout_()}let r;this.trigger({type:"contentsteeringloadcomplete",metadata:i});try{r=JSON.parse(this.request_.responseText)}catch(a){const e={errorType:ml.Error.StreamingContentSteeringParserError,error:a};this.trigger({type:"error",metadata:e})}this.assignSteeringProperties_(r);const s={contentSteeringInfo:i.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:s}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new(r().URL)(e),n=new(r().URL)(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(r().atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new(r().URL)(e),n=this.getPathway(),i=this.getBandwidth_();if(n){const e=`_${this.manifestType_}_pathway`;t.searchParams.set(e,n)}if(i){const e=`_${this.manifestType_}_throughput`;t.searchParams.set(e,i)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const t=e=>{for(const t of e)if(this.availablePathways_.has(t))return t;return[...this.availablePathways_][0]},n=t(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=e=>this.excludedSteeringManifestURLs.has(e);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!t(n))return n}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=1e3*e;this.ttlTimeout_=r().setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){r().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new $h}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(wl(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const Zh=(e,t)=>{let n=null;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(null,i)},t)}},Jh=10;let ep;const tp=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],np=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},ip=function({currentPlaylist:e,buffered:t,currentTime:n,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!i)return ml.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${e&&e.id||"null"} -> ${i.id}`;if(!e)return l(`${u} as current playlist is not set`),!0;if(i.id===e.id)return!1;const c=Boolean(Dl(t,n).length);if(!e.endList)return c||"number"!==typeof e.partTargetDuration?(l(`${u} as current playlist is live`),!0):(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const d=jl(t,n),h=o?Cc.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Cc.MAX_BUFFER_LOW_WATER_LINE;if(a<h)return l(`${u} as duration < max low water line (${a} < ${h})`),!0;const p=i.attributes.BANDWIDTH,f=e.attributes.BANDWIDTH;if(p<f&&(!o||d<s)){let e=`${u} as next bandwidth < current bandwidth (${p} < ${f})`;return o&&(e+=` and forwardBuffer < bufferHighWaterLine (${d} < ${s})`),l(e),!0}if((!o||p>f)&&d>=r){let e=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${r})`;return o&&(e+=` and next bandwidth > current bandwidth (${p} > ${f})`),l(e),!0}return l(`not ${u} as no switching criteria met`),!1};class rp extends ml.EventTarget{constructor(e){super(),this.fastQualityChange_=Zh(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:n,tech:i,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:d,bufferBasedABR:h,leastPixelDiffSelector:p,captionServices:f,experimentalUseMMS:g}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:m}=e;null!==m&&"undefined"!==typeof m||(m=1/0),ep=a,this.bufferBasedABR=Boolean(h),this.leastPixelDiffSelector=Boolean(p),this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=m,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:m,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=Yh(),g&&r().ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new(r().ManagedMediaSource),this.usingManagedMediaSource_=!0,ml.log("Using ManagedMediaSource")):r().MediaSource&&(this.mediaSource=new(r().MediaSource)),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Cl(),this.hasPlayed_=!1,this.syncController_=new Dh(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new Nh,this.sourceUpdater_=new yh(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Rh,this.keyStatusMap_=new Map;const y={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:f,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new Ac(t,this.vhs_,Al(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Hu(t,this.vhs_,Al(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new sh(Al(y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new sh(Al(y,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new wh(Al(y,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((e,t)=>{function n(){i.off("vttjserror",r),e()}function r(){i.off("vttjsloaded",n),t()}i.one("vttjsloaded",n),i.one("vttjserror",r),i.addWebVttScript_()})}),e);const v=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Qh(this.vhs_.xhr,v),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),tp.forEach(e=>{this[e+"_"]=np.bind(this,e)}),this.logger_=El("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const b="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(b,()=>{const e=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),r=i&&(i.id||i.uri),s=e&&(e.id||e.uri);if(r&&r!==s){this.logger_(`switch media ${r} -> ${s} from ${t}`);const n={renditionInfo:{id:s,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:n}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,i=this.contentSteeringController_.getPathway();if(n&&i){const t=n.length?n[0].playlists:n.playlists,r=t.filter(e=>e.attributes.serviceLocation===i);r.length&&this.mediaTypes_[e].activePlaylistLoader.media(r[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=r().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(r().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const e=n.main||i.length&&n[i[0]];for(const t in e)if(e[t].default){r={label:t};break}}if(!r)return t;const s=[];for(const a in n)if(n[a][r.label]){const t=n[a][r.label];if(t.playlists&&t.playlists.length)s.push.apply(s,t.playlists);else if(t.uri)s.push(t);else if(e.playlists.length)for(let n=0;n<e.playlists.length;n++){const t=e.playlists[n];t.attributes&&t.attributes.AUDIO&&t.attributes.AUDIO===a&&s.push(t)}}return s.length?s:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;ou(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),Kh({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial");const n="vhs-json"===this.sourceType_&&this.initialMedia_.segments;if(!n)return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;ou(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,"dash"===this.sourceType_&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();if("playlist-unchanged"===e.lastExcludeReason_)return;const t=this.stuckAtPlaylistEnd_(e);t&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})});const e=["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"];e.forEach(e=>{this.mainPlaylistLoader_.on(e,e=>{this.player_.trigger(d({},e))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const r=Object.keys(n.AUDIO);for(const s in n.AUDIO)for(const e in n.AUDIO[s]){const t=n.AUDIO[s][e];t.uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),ep.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),s=this.tech_.buffered();return ip({buffered:s,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const e=this.audioSegmentLoader_.pendingSegment_;if(!e||!e.segment||!e.segment.syncInfo)return;const t=e.segment.syncInfo.end+.01;this.tech_.setCurrentTime(t)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:Jh}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()});const t=["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"];t.forEach(e=>{this.mainSegmentLoader_.on(e,e=>{this.player_.trigger(d({},e))}),this.audioSegmentLoader_.on(e,e=>{this.player_.trigger(d({},e))}),this.subtitleSegmentLoader_.on(e,e=>{this.player_.trigger(d({},e))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){e&&e===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let i=n;if(e.start){const r=e.start.timeOffset;i=r<0?Math.max(n+r,t.start(0)):Math.min(n,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();"undefined"!==typeof e&&"function"===typeof e.then&&e.then(null,e=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){const t=this.seekable();if(!t.length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(null===n)return!1;const i=ep.Playlist.playlistEnd(e,n),r=this.tech_.currentTime(),s=this.tech_.buffered();if(!s.length)return i-r<=kl;const a=s.end(s.length-1);return a-r<=kl&&i-a<=kl}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,r=i.filter(nu),s=1===r.length&&r[0]===e;if(1===i.length&&n!==1/0)return ml.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){if(this.main().contentSteering){const t=this.pathwayAttribute_(e),n=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(t),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(t)},n)}let t=!1;i.forEach(n=>{if(n===e)return;const i=n.excludeUntil;"undefined"!==typeof i&&i!==1/0&&(t=!0,delete n.excludeUntil)}),t&&(ml.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let a;a=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,e.excludeUntil=a,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const o=this.selectPlaylist();if(!o)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const l=t.internal?this.logger_:ml.log.warn,u=t.message?" "+t.message:"";l(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${u} Switching to playlist ${o.id}.`),o.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),o.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const c=o.targetDuration/2*1e3||5e3,d="number"===typeof o.lastRequest&&Date.now()-o.lastRequest<=c;return this.switchMedia_(o,"exclude",s||d)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i="all"===e;(i||"main"===e)&&n.push(this.mainPlaylistLoader_);const r=[];(i||"audio"===e)&&r.push("AUDIO"),(i||"subtitle"===e)&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)}),["main","audio","subtitle"].forEach(t=>{const i=this[`${t}SegmentLoader_`];!i||e!==t&&"all"!==e||n.push(i)}),n.forEach(e=>t.forEach(t=>{"function"===typeof e[t]&&e[t]()}))}setCurrentTime(e){const t=Dl(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:ep.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const n=e.media();if(!n)return null;const i=this.syncController_.getMediaSequenceSync(t);if(i&&i.isReliable){const e=i.start,t=i.end;if(!isFinite(e)||!isFinite(t))return null;const r=ep.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n),s=Math.max(e,t-r);return Cl([[e,s]])}const r=this.syncController_.getExpiredTime(n,this.duration());if(null===r)return null;const s=ep.Playlist.seekable(n,r,ep.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n));return s.length?s:null}computeFinalSeekable_(e,t){if(!t)return e;const n=e.start(0),i=e.end(0),r=t.start(0),s=t.end(0);return r>i||n>s?e:Cl([[Math.max(n,r),Math.min(i,s)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const n=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_)return;if(n&&n.length&&this.seekable_.length&&n.start(0)===this.seekable_.start(0)&&n.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Ll(this.seekable_)}]`);const i={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:i}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let n=ep.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach(e=>{e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=Du(this.main(),t),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||V),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||j}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||j,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const s=(e,t)=>e?B(t,this.usingManagedMediaSource_):F(t),a={};let o;if(["video","audio"].forEach(function(t){if(i.hasOwnProperty(t)&&!s(e[t].isFmp4,i[t])){const n=e[t].isFmp4?"browser":"muxer";a[n]=a[n]||[],a[n].push(i[t]),"audio"===t&&(o=n)}}),r&&o&&t.attributes.AUDIO){const e=t.attributes.AUDIO;this.main().playlists.forEach(n=>{const i=n.attributes&&n.attributes.AUDIO;i===e&&n!==t&&(n.excludeUntil=1/0)}),this.logger_(`excluding audio group ${e} as ${o} does not support codec(s): "${i.audio}"`)}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach(t=>{const n=(O(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(O(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${i[t]}"`)}),e.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return i}{const e=Object.keys(a).reduce((e,t)=>(e&&(e+=", "),e+=`${t} does not support codec(s): "${a[t].join(",")}"`,e),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:e},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const i=e[n];if(-1!==t.indexOf(i.id))return;t.push(i.id);const r=Du(this.main,i),s=[];!r.audio||F(r.audio)||B(r.audio,this.usingManagedMediaSource_)||s.push(`audio codec ${r.audio}`),!r.video||F(r.video)||B(r.video,this.usingManagedMediaSource_)||s.push(`video codec ${r.video}`),r.text&&"stpp.ttml.im1t"===r.text&&s.push(`text codec ${r.text}`),s.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${s.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=ku(O(e)),r=Mu(i),s=i.video&&O(i.video)[0]||null,a=i.audio&&O(i.audio)[0]||null;Object.keys(n).forEach(e=>{const i=n[e];if(-1!==t.indexOf(i.id)||i.excludeUntil===1/0)return;t.push(i.id);const o=[],l=Du(this.mainPlaylistLoader_.main,i),u=Mu(l);if(l.audio||l.video){if(u!==r&&o.push(`codec count "${u}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const e=l.video&&O(l.video)[0]||null,t=l.audio&&O(l.audio)[0]||null;e&&s&&e.type.toLowerCase()!==s.type.toLowerCase()&&o.push(`video codec "${e.type}" !== "${s.type}"`),t&&a&&t.type.toLowerCase()!==a.type.toLowerCase()&&o.push(`audio codec "${t.type}" !== "${a.type}"`)}o.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id}: ${o.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),Eh(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Cc.GOAL_BUFFER_LENGTH,n=Cc.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Cc.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Cc.BUFFER_LOW_WATER_LINE,n=Cc.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Cc.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,Cc.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:i)}bufferHighWaterLine(){return Cc.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){Nd(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Od({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Nd(this.inbandTextTracks_,e,this.tech_),Md({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this));const e=["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"];e.forEach(e=>{this.contentSteeringController_.on(e,e=>{this.trigger(d({},e))})}),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const e=this.main(),t=this.contentSteeringController_.didDASHTagChange(e.uri,e.contentSteering),n=()=>{const t=this.contentSteeringController_.getAvailablePathways(),n=[];for(const i of e.playlists){const e=i.attributes.serviceLocation;if(e&&(n.push(e),!t.has(e)))return!0}return!(n.length||!t.size)};(t||n())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const t=this.main(),n=t.playlists,i=new Set;let r=!1;Object.keys(n).forEach(t=>{const s=n[t],a=this.pathwayAttribute_(s),o=a&&e!==a,l=s.excludeUntil===1/0&&"content-steering"===s.lastExcludeReason_;l&&!o&&(delete s.excludeUntil,delete s.lastExcludeReason_,r=!0);const u=!s.excludeUntil&&s.excludeUntil!==1/0,c=!i.has(s.id)&&o&&u;c&&(i.add(s.id),s.excludeUntil=1/0,s.lastExcludeReason_="content-steering",this.logger_(`excluding ${s.id} for ${s.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(t=>{const n=this.mediaTypes_[t];if(n.activePlaylistLoader){const t=n.activePlaylistLoader.media_;t&&t.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const e=this.main(),t=e.playlists,n=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones,r=n&&n.size||i&&i.size;if(r){for(const[e,t]of n.entries()){const n=i.get(e);n||(this.mainPlaylistLoader_.updateOrDeleteClone(t),this.contentSteeringController_.excludePathway(e))}for(const[e,r]of i.entries()){const i=n.get(e);if(i)this.equalPathwayClones_(i,r)||(this.mainPlaylistLoader_.updateOrDeleteClone(r,!0),this.contentSteeringController_.addAvailablePathway(e));else{const n=t.filter(e=>e.attributes["PATHWAY-ID"]===r["BASE-ID"]);n.forEach(e=>{this.mainPlaylistLoader_.addClonePathway(r,e)}),this.contentSteeringController_.addAvailablePathway(e)}}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,i=t["URI-REPLACEMENT"].PARAMS;for(const r in n)if(n[r]!==i[r])return!1;for(const r in i)if(n[r]!==i[r])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const i=this.mainPlaylistLoader_.getKeyIdSet(n);i&&i.size&&i.forEach(i=>{const r="usable",s=this.keyStatusMap_.has(i)&&this.keyStatusMap_.get(i)===r,a=n.lastExcludeReason_===t&&n.excludeUntil===1/0;s?s&&a&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${i} is ${r}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${i} doesn't exist in the keyStatusMap or is not ${r}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(e=>{const n=e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height<720,i=e.excludeUntil===1/0&&e.lastExcludeReason_===t;n&&i&&(delete e.excludeUntil,ml.log.warn(`enabling non-HD playlist ${e.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const n="string"===typeof e,i=n?e:bh(e),r=i.slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${r} added to the keyStatusMap`),this.keyStatusMap_.set(r,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const sp=(e,t,n)=>i=>{const r=e.main.playlists[t],s=tu(r),a=nu(r);if("undefined"===typeof i)return a;i?delete r.disabled:r.disabled=!0;const o={renditionInfo:{id:t,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:"fast-quality"};return i===a||s||(i?(n(r),e.trigger({type:"renditionenabled",metadata:o})):e.trigger({type:"renditiondisabled",metadata:o})),i};class ap{constructor(e,t,n){const{playlistController_:i}=e,r=i.fastQualityChange_.bind(i);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Du(i.main(),t),this.playlist=t,this.id=n,this.enabled=sp(e.playlists,t.id,r)}}const op=function(e){e.representations=()=>{const t=e.playlistController_.main(),n=cu(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(e=>!tu(e)).map((t,n)=>new ap(e,t,t.id)):[]}},lp=["seeking","seeked","pause","playing","error"];class up extends ml.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=El("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(e=>{l[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},a[`${e}SegmentLoader_`].on("appendsdone",l[e].updateend),a[`${e}SegmentLoader_`].on("playlistupdate",l[e].reset),this.tech_.on(["seeked","seeking"],l[e].reset)});const u=e=>{["main","audio"].forEach(t=>{a[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(lp,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(lp,s),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(e=>{a[`${e}SegmentLoader_`].off("appendsdone",l[e].updateend),a[`${e}SegmentLoader_`].off("playlistupdate",l[e].reset),this.tech_.off(["seeked","seeking"],l[e].reset)}),this.checkCurrentTimeTimeout_&&r().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&r().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=r().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),r=Bl(this[`${e}Buffered_`],i);if(this[`${e}Buffered_`]=i,r){const n={bufferedRanges:i};return t.trigger({type:"bufferedrangeschanged",metadata:n}),void this.resetSegmentDownloads_(e)}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:Ul(i)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+kl>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Cl([this.lastRecordedTime,e]));const t={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:t}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){const e=this.tech_.seeking();if(!e)return!1;const t=this.seekable(),n=this.tech_.currentTime(),i=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(i){const e=t.end(t.length-1);r=e}if(this.beforeSeekableWindow_(t,n)){const e=t.start(0);r=e+(e===t.end(0)?0:kl)}if("undefined"!==typeof r)return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${Ll(t)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const s=this.playlistController_.sourceUpdater_,a=this.tech_.buffered(),o=s.audioBuffer?s.audioBuffered():null,l=s.videoBuffer?s.videoBuffered():null,u=this.media(),c=u.partTargetDuration?u.partTargetDuration:2*(u.targetDuration-xl),d=[o,l];for(let p=0;p<d.length;p++){if(!d[p])continue;const e=jl(d[p],n);if(e<c)return!1}const h=Rl(a,n);return 0!==h.length&&(r=h.start(0)+kl,this.logger_(`Buffered region starts (${h.start(0)})  just beyond seek point (${n}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Dl(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const n=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${n}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered(),r=this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t});if(r)return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const s=Rl(i,t);return s.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${s.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let r=e.end(e.length-1)+kl;const s=!n.endList,a="number"===typeof n.partTargetDuration;return s&&(a||i)&&(r=e.end(e.length-1)+3*n.targetDuration),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const r=Dl(e,n-3),s=Dl(e,n),a=Dl(t,n);a.length&&!s.length&&r.length&&(i={start:r.end(0),end:a.end(0)})}else{const t=Rl(e,n);t.length||(i=this.gapFromVideoUnderflow_(e,n))}return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=Rl(t,n);if(this.resetTimeUpdate_(),0===i.length||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+xl);const r={gapInfo:{from:n,to:i.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=Ol(e);for(let i=0;i<n.length;i++){const e=n.start(i),r=n.end(i);if(t-e<4&&t-e>2)return{start:e,end:r}}return null}}const cp={errorInterval:30,getSource(e){const t=this.tech({IWillNotUseThisInPlugins:!0}),n=t.currentSource_||this.currentSource();return e(n)}},dp=function(e,t){let n=0,i=0;const r=Al(cp,t);e.ready(()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){i&&e.currentTime(i)},a=function(t){null!==t&&void 0!==t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},o=function(){if(Date.now()-n<1e3*r.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(r.getSource&&"function"===typeof r.getSource)return n=Date.now(),r.getSource.call(e,a);ml.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function(){e.off("loadedmetadata",s),e.off("error",o),e.off("dispose",l)},u=function(t){l(),dp(e,t)};e.on("error",o),e.on("dispose",l),e.reloadSourceOnError=u},hp=function(e){dp(this,e)};var pp="3.17.0",fp="7.1.0",gp="1.3.1",mp="7.2.0",yp="4.0.2";const vp={PlaylistLoader:Hu,Playlist:du,utils:rc,STANDARD_PLAYLIST_SELECTOR:_d,INITIAL_PLAYLIST_SELECTOR:Ed,lastBandwidthSelector:_d,movingAverageBandwidthSelector:wd,comparePlaylistBandwidth:vd,comparePlaylistResolution:bd,xhr:Wu()};Object.keys(Cc).forEach(e=>{Object.defineProperty(vp,e,{get(){return ml.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),Cc[e]},set(t){ml.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!==typeof t||t<0?ml.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):Cc[e]=t}})});const bp="videojs-vhs",Tp=function(e,t){const n=t.media();let i=-1;for(let r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},_p=function(e,t){t.representations().forEach(t=>{e.addQualityLevel(t)}),Tp(e,t.playlists)};vp.canPlaySource=function(){return ml.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const wp=(e,t,n)=>{if(!e)return e;let i={};t&&t.attributes&&t.attributes.CODECS&&(i=ku(O(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);const r=U(i.video),s=U(i.audio),a={};for(const o in e)a[o]={},s&&(a[o].audioContentType=s),r&&(a[o].videoContentType=r),t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(a[o].pssh=t.contentProtection[o].pssh),"string"===typeof e[o]&&(a[o].url=e[o]);return Al(e,a)},Sp=(e,t)=>e.reduce((e,n)=>{if(!n.contentProtection)return e;const i=t.reduce((e,t)=>{const i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e},{});return Object.keys(i).length&&e.push(i),e},[]),Ep=({player:e,sourceKeySystems:t,audioMedia:n,mainPlaylists:i})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const r=n?i.concat([n]):i,s=Sp(r,Object.keys(t)),a=[],o=[];return s.forEach(t=>{o.push(new Promise((t,n)=>{e.tech_.one("keysessioncreated",t)})),a.push(new Promise((n,i)=>{e.eme.initializeMediaKeys({keySystems:t},e=>{e?i(e):n()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Ap=({player:e,sourceKeySystems:t,media:n,audioMedia:i})=>{const r=wp(t,n,i);return!!r&&(e.currentSource().keySystems=r,!(r&&!e.eme)||(ml.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},Cp=()=>{if(!r().localStorage)return null;const e=r().localStorage.getItem(bp);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},Ip=e=>{if(!r().localStorage)return!1;let t=Cp();t=t?Al(t,e):e;try{r().localStorage.setItem(bp,JSON.stringify(t))}catch(n){return!1}return t},xp=e=>0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e,kp=(e,t)=>{e._requestCallbackSet||(e._requestCallbackSet=new Set),e._requestCallbackSet.add(t)},Mp=(e,t)=>{e._responseCallbackSet||(e._responseCallbackSet=new Set),e._responseCallbackSet.add(t)},Dp=(e,t)=>{e._requestCallbackSet&&(e._requestCallbackSet.delete(t),e._requestCallbackSet.size||delete e._requestCallbackSet)},Rp=(e,t)=>{e._responseCallbackSet&&(e._responseCallbackSet.delete(t),e._responseCallbackSet.size||delete e._responseCallbackSet)};vp.supportsNativeHls=function(){if(!a()||!a().createElement)return!1;const e=a().createElement("video");if(!ml.getTech("Html5").isSupported())return!1;const t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),vp.supportsNativeDash=function(){return!!(a()&&a().createElement&&ml.getTech("Html5").isSupported())&&/maybe|probably/i.test(a().createElement("video").canPlayType("application/dash+xml"))}(),vp.supportsTypeNatively=e=>"hls"===e?vp.supportsNativeHls:"dash"===e&&vp.supportsNativeDash,vp.isSupported=function(){return ml.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},vp.xhr.onRequest=function(e){kp(vp.xhr,e)},vp.xhr.onResponse=function(e){Mp(vp.xhr,e)},vp.xhr.offRequest=function(e){Dp(vp.xhr,e)},vp.xhr.offResponse=function(e){Rp(vp.xhr,e)};const Op=ml.getComponent("Component");class Np extends Op{constructor(e,t,n){if(super(t,n.vhs),"number"===typeof n.initialBandwidth&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=El("VhsHandler"),t.options_&&t.options_.playerId){const e=ml.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(a(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],e=>{const t=a().fullscreenElement||a().webkitFullscreenElement||a().mozFullScreenElement||a().msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Al(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi="undefined"===typeof this.options_.useNetworkInformationApi||this.options_.useNetworkInformationApi,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!==typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=Cp();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=Cc.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Cc.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{"undefined"!==typeof this.source_[e]&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;"number"===typeof t&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=xp(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=vp,this.options_.sourceType=G(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.options_.player_=this.player_,this.playlistController_=new rp(this.options_);const n=Al({liveRangeSafeTimeDelta:kl},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new up(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const e=ml.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!==typeof t||t.code?"string"===typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)});const i=this.options_.bufferBasedABR?vp.movingAverageBandwidthSelector(.55):vp.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=vp.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=r().navigator.connection||r().navigator.mozConnection||r().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){const i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;t=this.throughput>0?1/this.throughput:0;const n=Math.floor(1/(e+t));return n},set(){ml.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Ul(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Ul(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Ip({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{op(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=r().URL.createObjectURL(this.playlistController_.mediaSource),(ml.browser.IS_ANY_SAFARI||ml.browser.IS_IOS)&&this.options_.overrideNative&&"hls"===this.options_.sourceType&&"function"===typeof this.tech_.addSourceElement?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Ep({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Ap({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",e=>{this.playlistController_.updatePlaylistByKeyStatus(e.keyId,e.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=ml.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{_p(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Tp(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":pp,"mux.js":fp,"mpd-parser":gp,"m3u8-parser":mp,"aes-decrypter":yp}}version(){return this.constructor.version()}canChangeType(){return yh.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&r().URL.revokeObjectURL&&(r().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return hc({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return pc({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{kp(this.xhr,e)},this.xhr.onResponse=e=>{Mp(this.xhr,e)},this.xhr.offRequest=e=>{Dp(this.xhr,e)},this.xhr.offResponse=e=>{Rp(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(e=>{this.playlistController_.on(e,e=>{this.player_.trigger(d({},e))})}),t.forEach(e=>{this.playbackWatcher_.on(e,e=>{this.player_.trigger(d({},e))})})}}const Lp={name:"videojs-http-streaming",VERSION:pp,canHandleSource(e,t={}){const n=Al(ml.options,t);return!(!n.vhs.experimentalUseMMS&&!B("avc1.4d400d,mp4a.40.2",!1))&&Lp.canPlayType(e.type,n)},handleSource(e,t,n={}){const i=Al(ml.options,n);return t.vhs=new Np(e,t,i),t.vhs.xhr=Wu(),t.vhs.setupXhrHooks_(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){const n=G(e);if(!n)return"";const i=Lp.getOverrideNative(t),r=vp.supportsTypeNatively(n),s=!r||i;return s?"maybe":""},getOverrideNative(e={}){const{vhs:t={}}=e,n=!(ml.browser.IS_ANY_SAFARI||ml.browser.IS_IOS),{overrideNative:i=n}=t;return i}},Pp=()=>B("avc1.4d400d,mp4a.40.2",!0);Pp()&&ml.getTech("Html5").registerSourceHandler(Lp,0),ml.VhsHandler=Np,ml.VhsSourceHandler=Lp,ml.Vhs=vp,ml.use||ml.registerComponent("Vhs",vp),ml.options.vhs=ml.options.vhs||{},ml.getPlugin&&ml.getPlugin("reloadSourceOnError")||ml.registerPlugin("reloadSourceOnError",hp)},6837:function(e){"use strict";var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},6840:function(e,t,n){"use strict";var i=n(4901),r=n(4913),s=n(283),a=n(9433);e.exports=function(e,t,n,o){o||(o={});var l=o.enumerable,u=void 0!==o.name?o.name:t;if(i(n)&&s(n,u,o),o.global)l?e[t]=n:a(t,n);else{try{o.unsafe?e[t]&&(l=!0):delete e[t]}catch(c){}l?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},6892:function(e,t,n){"use strict";n.d(t,{y$:function(){return te},L8:function(){return se},aH:function(){return re},Pj:function(){return y}});n(4114),n(8111),n(2489),n(7588),n(1701),n(8237);var i=n(6768),r=n(144);function s(){return a().__VUE_DEVTOOLS_GLOBAL_HOOK__}function a(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof globalThis?globalThis:{}}const o="function"===typeof Proxy,l="devtools-plugin:setup",u="plugin:settings:set";let c,d;function h(){var e;return void 0!==c||("undefined"!==typeof window&&window.performance?(c=!0,d=window.performance):"undefined"!==typeof globalThis&&(null===(e=globalThis.perf_hooks)||void 0===e?void 0:e.performance)?(c=!0,d=globalThis.perf_hooks.performance):c=!1),c}function p(){return h()?d.now():Date.now()}class f{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const a in e.settings){const t=e.settings[a];n[a]=t.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},n);try{const e=localStorage.getItem(i),t=JSON.parse(e);Object.assign(r,t)}catch(s){}this.fallbacks={getSettings(){return r},setSettings(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(s){}r=e},now(){return p()}},t&&t.on(u,(e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)}),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise(n=>{this.targetQueue.push({method:t,args:e,resolve:n})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function g(e,t){const n=e,i=a(),r=s(),u=o&&n.enableEarlyProxy;if(!r||!i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&u){const e=u?new f(n,r):null,s=i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[];s.push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else r.emit(l,e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var m="store";function y(e){return void 0===e&&(e=null),(0,i.WQ)(null!==e?e:m)}function v(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function b(e){return null!==e&&"object"===typeof e}function T(e){return e&&"function"===typeof e.then}function _(e,t){return function(){return e(t)}}function w(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function S(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;A(e,n,[],e._modules.root,!0),E(e,n,t)}function E(e,t,n){var s=e._state,a=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,l={},u={},c=(0,r.uY)(!0);c.run(function(){v(o,function(t,n){l[n]=_(t,e),u[n]=(0,i.EW)(function(){return l[n]()}),Object.defineProperty(e.getters,n,{get:function(){return u[n].value},enumerable:!0})})}),e._state=(0,r.Kh)({data:t}),e._scope=c,e.strict&&D(e),s&&n&&e._withCommit(function(){s.data=null}),a&&a.stop()}function A(e,t,n,i,r){var s=!n.length,a=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=i),!s&&!r){var o=R(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){o[l]=i.state})}var u=i.context=C(e,a,n);i.forEachMutation(function(t,n){var i=a+n;x(e,i,t,u)}),i.forEachAction(function(t,n){var i=t.root?n:a+n,r=t.handler||t;k(e,i,r,u)}),i.forEachGetter(function(t,n){var i=a+n;M(e,i,t,u)}),i.forEachChild(function(i,s){A(e,t,n.concat(s),i,r)})}function C(e,t,n){var i=""===t,r={dispatch:i?e.dispatch:function(n,i,r){var s=O(n,i,r),a=s.payload,o=s.options,l=s.type;return o&&o.root||(l=t+l),e.dispatch(l,a)},commit:i?e.commit:function(n,i,r){var s=O(n,i,r),a=s.payload,o=s.options,l=s.type;o&&o.root||(l=t+l),e.commit(l,a,o)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return I(e,t)}},state:{get:function(){return R(e.state,n)}}}),r}function I(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,i)===t){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function x(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(t){n.call(e,i.state,t)})}function k(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(t){var r=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return T(r)||(r=Promise.resolve(r)),e._devtoolHook?r.catch(function(t){throw e._devtoolHook.emit("vuex:error",t),t}):r})}function M(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function D(e){(0,i.wB)(function(){return e._state.data},function(){0},{deep:!0,flush:"sync"})}function R(e,t){return t.reduce(function(e,t){return e[t]},e)}function O(e,t,n){return b(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var N="vuex bindings",L="vuex:mutations",P="vuex:actions",U="vuex",B=0;function F(e,t){g({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[N]},function(n){n.addTimelineLayer({id:L,label:"Vuex Mutations",color:j}),n.addTimelineLayer({id:P,label:"Vuex Actions",color:j}),n.addInspector({id:U,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(n){if(n.app===e&&n.inspectorId===U)if(n.filter){var i=[];W(i,t._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[q(t._modules.root,"")]}),n.on.getInspectorState(function(n){if(n.app===e&&n.inspectorId===U){var i=n.nodeId;I(t,i),n.state=X(Y(t._modules,i),"root"===i?t.getters:t._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(n){if(n.app===e&&n.inspectorId===U){var i=n.nodeId,r=n.path;"root"!==i&&(r=i.split("/").filter(Boolean).concat(r)),t._withCommit(function(){n.set(t._state.data,r,n.state.value)})}}),t.subscribe(function(e,t){var i={};e.payload&&(i.payload=e.payload),i.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(U),n.sendInspectorState(U),n.addTimelineEvent({layerId:L,event:{time:Date.now(),title:e.type,data:i}})}),t.subscribeAction({before:function(e,t){var i={};e.payload&&(i.payload=e.payload),e._id=B++,e._time=Date.now(),i.state=t,n.addTimelineEvent({layerId:P,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:i}})},after:function(e,t){var i={},r=Date.now()-e._time;i.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},e.payload&&(i.payload=e.payload),i.state=t,n.addTimelineEvent({layerId:P,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:i}})}})})}var j=8702998,V=6710886,H=16777215,z={label:"namespaced",textColor:H,backgroundColor:V};function G(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function q(e,t){return{id:t||"root",label:G(t),tags:e.namespaced?[z]:[],children:Object.keys(e._children).map(function(n){return q(e._children[n],t+n+"/")})}}function W(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[z]:[]}),Object.keys(t._children).forEach(function(r){W(e,t._children[r],n,i+r+"/")})}function X(e,t,n){t="root"===n?t:t[n];var i=Object.keys(t),r={state:Object.keys(e.state).map(function(t){return{key:t,editable:!0,value:e.state[t]}})};if(i.length){var s=K(t);r.getters=Object.keys(s).map(function(e){return{key:e.endsWith("/")?G(e):e,editable:!1,value:$(function(){return s[e]})}})}return r}function K(e){var t={};return Object.keys(e).forEach(function(n){var i=n.split("/");if(i.length>1){var r=t,s=i.pop();i.forEach(function(e){r[e]||(r[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),r=r[e]._custom.value}),r[s]=$(function(){return e[n]})}else t[n]=$(function(){return e[n]})}),t}function Y(e,t){var n=t.split("/").filter(function(e){return e});return n.reduce(function(e,i,r){var s=e[i];if(!s)throw new Error('Missing module "'+i+'" for path "'+t+'".');return r===n.length-1?s:s._children},"root"===t?e:e.root._children)}function $(e){try{return e()}catch(t){return t}}var Q=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},Z={namespaced:{configurable:!0}};Z.namespaced.get=function(){return!!this._rawModule.namespaced},Q.prototype.addChild=function(e,t){this._children[e]=t},Q.prototype.removeChild=function(e){delete this._children[e]},Q.prototype.getChild=function(e){return this._children[e]},Q.prototype.hasChild=function(e){return e in this._children},Q.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Q.prototype.forEachChild=function(e){v(this._children,e)},Q.prototype.forEachGetter=function(e){this._rawModule.getters&&v(this._rawModule.getters,e)},Q.prototype.forEachAction=function(e){this._rawModule.actions&&v(this._rawModule.actions,e)},Q.prototype.forEachMutation=function(e){this._rawModule.mutations&&v(this._rawModule.mutations,e)},Object.defineProperties(Q.prototype,Z);var J=function(e){this.register([],e,!1)};function ee(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return void 0;ee(e.concat(i),t.getChild(i),n.modules[i])}}J.prototype.get=function(e){return e.reduce(function(e,t){return e.getChild(t)},this.root)},J.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")},"")},J.prototype.update=function(e){ee([],this.root,e)},J.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var r=new Q(t,n);if(0===e.length)this.root=r;else{var s=this.get(e.slice(0,-1));s.addChild(e[e.length-1],r)}t.modules&&v(t.modules,function(t,r){i.register(e.concat(r),t,n)})},J.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],i=t.getChild(n);i&&i.runtime&&t.removeChild(n)},J.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};function te(e){return new ne(e)}var ne=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new J(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var s=this,a=this,o=a.dispatch,l=a.commit;this.dispatch=function(e,t){return o.call(s,e,t)},this.commit=function(e,t,n){return l.call(s,e,t,n)},this.strict=i;var u=this._modules.root.state;A(this,u,[],this._modules.root),E(this,u),n.forEach(function(e){return e(t)})},ie={state:{configurable:!0}};ne.prototype.install=function(e,t){e.provide(t||m,this),e.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&F(e,this)},ie.state.get=function(){return this._state.data},ie.state.set=function(e){0},ne.prototype.commit=function(e,t,n){var i=this,r=O(e,t,n),s=r.type,a=r.payload,o=(r.options,{type:s,payload:a}),l=this._mutations[s];l&&(this._withCommit(function(){l.forEach(function(e){e(a)})}),this._subscribers.slice().forEach(function(e){return e(o,i.state)}))},ne.prototype.dispatch=function(e,t){var n=this,i=O(e,t),r=i.type,s=i.payload,a={type:r,payload:s},o=this._actions[r];if(o){try{this._actionSubscribers.slice().filter(function(e){return e.before}).forEach(function(e){return e.before(a,n.state)})}catch(u){0}var l=o.length>1?Promise.all(o.map(function(e){return e(s)})):o[0](s);return new Promise(function(e,t){l.then(function(t){try{n._actionSubscribers.filter(function(e){return e.after}).forEach(function(e){return e.after(a,n.state)})}catch(u){0}e(t)},function(e){try{n._actionSubscribers.filter(function(e){return e.error}).forEach(function(t){return t.error(a,n.state,e)})}catch(u){0}t(e)})})}},ne.prototype.subscribe=function(e,t){return w(e,this._subscribers,t)},ne.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return w(n,this._actionSubscribers,t)},ne.prototype.watch=function(e,t,n){var r=this;return(0,i.wB)(function(){return e(r.state,r.getters)},t,Object.assign({},n))},ne.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})},ne.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),A(this,this.state,e,this._modules.get(e),n.preserveState),E(this,this.state)},ne.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=R(t.state,e.slice(0,-1));delete n[e[e.length-1]]}),S(this)},ne.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},ne.prototype.hotUpdate=function(e){this._modules.update(e),S(this,!0)},ne.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(ne.prototype,ie);var re=le(function(e,t){var n={};return ae(t).forEach(function(t){var i=t.key,r=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=ue(this.$store,"mapState",e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"===typeof r?r.call(this,t,n):t[r]},n[i].vuex=!0}),n}),se=(le(function(e,t){var n={};return ae(t).forEach(function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.commit;if(e){var s=ue(this.$store,"mapMutations",e);if(!s)return;i=s.context.commit}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}}),n}),le(function(e,t){var n={};return ae(t).forEach(function(t){var i=t.key,r=t.val;r=e+r,n[i]=function(){if(!e||ue(this.$store,"mapGetters",e))return this.$store.getters[r]},n[i].vuex=!0}),n}));le(function(e,t){var n={};return ae(t).forEach(function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var s=ue(this.$store,"mapActions",e);if(!s)return;i=s.context.dispatch}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}}),n});function ae(e){return oe(e)?Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function oe(e){return Array.isArray(e)||b(e)}function le(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function ue(e,t,n){var i=e._modulesNamespaceMap[n];return i}},6955:function(e,t,n){"use strict";var i=n(2140),r=n(4901),s=n(2195),a=n(8227),o=a("toStringTag"),l=Object,u="Arguments"===s(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=i?s:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=l(e),o))?n:u?s(t):"Object"===(i=s(t))&&r(t.callee)?"Arguments":i}},6969:function(e,t,n){"use strict";var i=n(2777),r=n(757);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},6980:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7040:function(e,t,n){"use strict";var i=n(4495);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:function(e,t,n){"use strict";var i=n(9504),r=n(9039),s=n(2195),a=Object,o=i("".split);e.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===s(e)?o(e,""):a(e)}:a},7080:function(e,t,n){"use strict";var i=n(4402).has;e.exports=function(e){return i(e),e}},7347:function(e,t,n){"use strict";var i=n(3724),r=n(9565),s=n(8773),a=n(6980),o=n(5397),l=n(6969),u=n(9297),c=n(5917),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=o(e),t=l(t),c)try{return d(e,t)}catch(n){}if(u(e,t))return a(!r(s.f,e,t),e[t])}},7476:function(e,t,n){"use strict";var i=n(2195),r=n(9504);e.exports=function(e){if("Function"===i(e))return r(e)}},7588:function(e,t,n){"use strict";var i=n(6518),r=n(9565),s=n(2652),a=n(9306),o=n(8551),l=n(1767),u=n(9539),c=n(4549),d=c("forEach",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(e){o(this);try{a(e)}catch(i){u(this,"throw",i)}if(d)return r(d,this,e);var t=l(this),n=0;s(t,function(t){e(t,n++)},{IS_RECORD:!0})}})},7629:function(e,t,n){"use strict";var i=n(6395),r=n(4576),s=n(9433),a="__core-js_shared__",o=e.exports=r[a]||s(a,{});(o.versions||(o.versions=[])).push({version:"3.43.0",mode:i?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:function(e,t,n){"use strict";var i=n(6518),r=n(3440),s=n(9039),a=n(4916),o=!a("difference",function(e){return 0===e.size}),l=o||s(function(){var e={size:1,has:function(){return!0},keys:function(){var e=0;return{next:function(){var n=e++>1;return t.has(1)&&t.clear(),{done:n,value:2}}}}},t=new Set([1,2,3,4]);return 3!==t.difference(e).size});i({target:"Set",proto:!0,real:!0,forced:l},{difference:r})},7657:function(e,t,n){"use strict";var i,r,s,a=n(9039),o=n(4901),l=n(34),u=n(2360),c=n(2787),d=n(6840),h=n(8227),p=n(6395),f=h("iterator"),g=!1;[].keys&&(s=[].keys(),"next"in s?(r=c(c(s)),r!==Object.prototype&&(i=r)):g=!0);var m=!l(i)||a(function(){var e={};return i[f].call(e)!==e});m?i={}:p&&(i=u(i)),o(i[f])||d(i,f,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},7680:function(e,t,n){"use strict";var i=n(9504);e.exports=i([].slice)},7740:function(e,t,n){"use strict";var i=n(9297),r=n(5031),s=n(7347),a=n(4913);e.exports=function(e,t,n){for(var o=r(t),l=a.f,u=s.f,c=0;c<o.length;c++){var d=o[c];i(e,d)||n&&i(n,d)||l(e,d,u(t,d))}}},7750:function(e,t,n){"use strict";var i=n(4117),r=TypeError;e.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}},7751:function(e,t,n){"use strict";var i=n(4576),r=n(4901),s=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e]):i[e]&&i[e][t]}},7801:function(e,t,n){n(4114),n(8111),n(1148),n(2489),n(116),n(8237);var i=n(8653),r=i.find,s=i.NAMESPACE;function a(e){return""!==e}function o(e){return e?e.split(/[\t\n\f\r ]+/).filter(a):[]}function l(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function u(e){if(!e)return[];var t=o(e);return Object.keys(t.reduce(l,{}))}function c(e){return function(t){return e&&-1!==e.indexOf(t)}}function d(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function h(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,i=new i,d(n,i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var p={},f=p.ELEMENT_NODE=1,g=p.ATTRIBUTE_NODE=2,m=p.TEXT_NODE=3,y=p.CDATA_SECTION_NODE=4,v=p.ENTITY_REFERENCE_NODE=5,b=p.ENTITY_NODE=6,T=p.PROCESSING_INSTRUCTION_NODE=7,_=p.COMMENT_NODE=8,w=p.DOCUMENT_NODE=9,S=p.DOCUMENT_TYPE_NODE=10,E=p.DOCUMENT_FRAGMENT_NODE=11,A=p.NOTATION_NODE=12,C={},I={},x=(C.INDEX_SIZE_ERR=(I[1]="Index size error",1),C.DOMSTRING_SIZE_ERR=(I[2]="DOMString size error",2),C.HIERARCHY_REQUEST_ERR=(I[3]="Hierarchy request error",3)),k=(C.WRONG_DOCUMENT_ERR=(I[4]="Wrong document",4),C.INVALID_CHARACTER_ERR=(I[5]="Invalid character",5),C.NO_DATA_ALLOWED_ERR=(I[6]="No data allowed",6),C.NO_MODIFICATION_ALLOWED_ERR=(I[7]="No modification allowed",7),C.NOT_FOUND_ERR=(I[8]="Not found",8)),M=(C.NOT_SUPPORTED_ERR=(I[9]="Not supported",9),C.INUSE_ATTRIBUTE_ERR=(I[10]="Attribute in use",10));C.INVALID_STATE_ERR=(I[11]="Invalid state",11),C.SYNTAX_ERR=(I[12]="Syntax error",12),C.INVALID_MODIFICATION_ERR=(I[13]="Invalid modification",13),C.NAMESPACE_ERR=(I[14]="Invalid namespace",14),C.INVALID_ACCESS_ERR=(I[15]="Invalid access",15);function D(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,I[e]),this.message=I[e],Error.captureStackTrace&&Error.captureStackTrace(this,D);return n.code=e,t&&(this.message=this.message+": "+t),n}function R(){}function O(e,t){this._node=e,this._refresh=t,N(this)}function N(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var n=e._refresh(e._node);if(Ae(e,"length",n.length),!e.$$length||n.length<e.$$length)for(var i=n.length;i in e;i++)Object.prototype.hasOwnProperty.call(e,i)&&delete e[i];d(n,e),e._inc=t}}function L(){}function P(e,t){var n=e.length;while(n--)if(e[n]===t)return n}function U(e,t,n,i){if(i?t[P(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&q(r,e,i),G(r,e,n))}}function B(e,t,n){var i=P(t,n);if(!(i>=0))throw new D(k,new Error(e.tagName+"@"+n));var r=t.length-1;while(i<r)t[i]=t[++i];if(t.length=r,e){var s=e.ownerDocument;s&&(q(s,e,n),n.ownerElement=null)}}function F(){}function j(){}function V(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function H(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(H(e,t))return!0}while(e=e.nextSibling)}function z(){this.ownerDocument=this}function G(e,t,n){e&&e._inc++;var i=n.namespaceURI;i===s.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function q(e,t,n,i){e&&e._inc++;var r=n.namespaceURI;r===s.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function W(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{var r=t.firstChild,s=0;while(r)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function X(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,W(e.ownerDocument,e),t}function K(e){return e&&(e.nodeType===j.DOCUMENT_NODE||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.ELEMENT_NODE)}function Y(e){return e&&(Q(e)||Z(e)||$(e)||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.COMMENT_NODE||e.nodeType===j.PROCESSING_INSTRUCTION_NODE)}function $(e){return e&&e.nodeType===j.DOCUMENT_TYPE_NODE}function Q(e){return e&&e.nodeType===j.ELEMENT_NODE}function Z(e){return e&&e.nodeType===j.TEXT_NODE}function J(e,t){var n=e.childNodes||[];if(r(n,Q)||$(t))return!1;var i=r(n,$);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function ee(e,t){var n=e.childNodes||[];function i(e){return Q(e)&&e!==t}if(r(n,i))return!1;var s=r(n,$);return!(t&&s&&n.indexOf(s)>n.indexOf(t))}function te(e,t,n){if(!K(e))throw new D(x,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new D(k,"child not in parent");if(!Y(t)||$(t)&&e.nodeType!==j.DOCUMENT_NODE)throw new D(x,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function ne(e,t,n){var i=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var a=s.filter(Q);if(a.length>1||r(s,Z))throw new D(x,"More than one element or text in fragment");if(1===a.length&&!J(e,n))throw new D(x,"Element in fragment can not be inserted before doctype")}if(Q(t)&&!J(e,n))throw new D(x,"Only one element can be added and only after doctype");if($(t)){if(r(i,$))throw new D(x,"Only one doctype is allowed");var o=r(i,Q);if(n&&i.indexOf(o)<i.indexOf(n))throw new D(x,"Doctype can only be inserted before an element");if(!n&&o)throw new D(x,"Doctype can not be appended since element is present")}}function ie(e,t,n){var i=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var a=s.filter(Q);if(a.length>1||r(s,Z))throw new D(x,"More than one element or text in fragment");if(1===a.length&&!ee(e,n))throw new D(x,"Element in fragment can not be inserted before doctype")}if(Q(t)&&!ee(e,n))throw new D(x,"Only one element can be added and only after doctype");if($(t)){function o(e){return $(e)&&e!==n}if(r(i,o))throw new D(x,"Only one doctype is allowed");var l=r(i,Q);if(n&&i.indexOf(l)<i.indexOf(n))throw new D(x,"Doctype can only be inserted before an element")}}function re(e,t,n,i){te(e,t,n),e.nodeType===j.DOCUMENT_NODE&&(i||ne)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===E){var s=t.firstChild;if(null==s)return t;var a=t.lastChild}else s=a=t;var o=n?n.previousSibling:e.lastChild;s.previousSibling=o,a.nextSibling=n,o?o.nextSibling=s:e.firstChild=s,null==n?e.lastChild=a:n.previousSibling=a;do{s.parentNode=e}while(s!==a&&(s=s.nextSibling));return W(e.ownerDocument||e,e),t.nodeType==E&&(t.firstChild=t.lastChild=null),t}function se(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,W(e.ownerDocument,e,t),t}function ae(){this._nsMap={}}function oe(){}function le(){}function ue(){}function ce(){}function de(){}function he(){}function pe(){}function fe(){}function ge(){}function me(){}function ye(){}function ve(){}function be(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&null==r){r=i.lookupPrefix(s);if(null==r)var a=[{namespace:s,prefix:null}]}return we(this,n,e,t,a),n.join("")}function Te(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===i&&r===s.XML||r===s.XMLNS)return!1;var a=n.length;while(a--){var o=n[a];if(o.prefix===i)return o.namespace!==r}return!0}function _e(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,V),'"')}function we(e,t,n,i,r){if(r||(r=[]),i){if(e=i(e),!e)return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case f:var a=e.attributes,o=a.length,l=e.firstChild,u=e.tagName;n=s.isHTML(e.namespaceURI)||n;var c=u;if(!n&&!e.prefix&&e.namespaceURI){for(var d,h=0;h<a.length;h++)if("xmlns"===a.item(h).name){d=a.item(h).value;break}if(!d)for(var p=r.length-1;p>=0;p--){var b=r[p];if(""===b.prefix&&b.namespace===e.namespaceURI){d=b.namespace;break}}if(d!==e.namespaceURI)for(p=r.length-1;p>=0;p--){b=r[p];if(b.namespace===e.namespaceURI){b.prefix&&(c=b.prefix+":"+u);break}}}t.push("<",c);for(var A=0;A<o;A++){var C=a.item(A);"xmlns"==C.prefix?r.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&r.push({prefix:"",namespace:C.value})}for(A=0;A<o;A++){C=a.item(A);if(Te(C,n,r)){var I=C.prefix||"",x=C.namespaceURI;_e(t,I?"xmlns:"+I:"xmlns",x),r.push({prefix:I,namespace:x})}we(C,t,n,i,r)}if(u===c&&Te(e,n,r)){I=e.prefix||"",x=e.namespaceURI;_e(t,I?"xmlns:"+I:"xmlns",x),r.push({prefix:I,namespace:x})}if(l||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))while(l)l.data?t.push(l.data):we(l,t,n,i,r.slice()),l=l.nextSibling;else while(l)we(l,t,n,i,r.slice()),l=l.nextSibling;t.push("</",c,">")}else t.push("/>");return;case w:case E:l=e.firstChild;while(l)we(l,t,n,i,r.slice()),l=l.nextSibling;return;case g:return _e(t,e.name,e.value);case m:return t.push(e.data.replace(/[<&>]/g,V));case y:return t.push("<![CDATA[",e.data,"]]>");case _:return t.push("\x3c!--",e.data,"--\x3e");case S:var k=e.publicId,M=e.systemId;if(t.push("<!DOCTYPE ",e.name),k)t.push(" PUBLIC ",k),M&&"."!=M&&t.push(" ",M),t.push(">");else if(M&&"."!=M)t.push(" SYSTEM ",M,">");else{var D=e.internalSubset;D&&t.push(" [",D,"]"),t.push(">")}return;case T:return t.push("<?",e.target," ",e.data,"?>");case v:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Se(e,t,n){var i;switch(t.nodeType){case f:i=t.cloneNode(!1),i.ownerDocument=e;case E:break;case g:n=!0;break}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n){var r=t.firstChild;while(r)i.appendChild(Se(e,r,n)),r=r.nextSibling}return i}function Ee(e,t,n){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=t[r];"object"!=typeof s&&s!=i[r]&&(i[r]=s)}switch(t.childNodes&&(i.childNodes=new R),i.ownerDocument=e,i.nodeType){case f:var a=t.attributes,o=i.attributes=new L,l=a.length;o._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(Ee(e,a.item(u),!0));break;case g:n=!0}if(n){var c=t.firstChild;while(c)i.appendChild(Ee(e,c,n)),c=c.nextSibling}return i}function Ae(e,t,n){e[t]=n}D.prototype=Error.prototype,d(C,D),R.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)we(this[i],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},O.prototype.item=function(e){return N(this),this[e]||null},h(O,R),L.prototype={length:0,item:R.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new D(M);var n=this.getNamedItem(e.nodeName);return U(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new D(M);return t=this.getNamedItemNS(e.namespaceURI,e.localName),U(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return B(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return B(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){var n=this.length;while(n--){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},F.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new z;if(i.implementation=this,i.childNodes=new R,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new he;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},j.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return re(this,e,t)},replaceChild:function(e,t){re(this,e,t,ie),t&&this.removeChild(t)},removeChild:function(e){return X(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Ee(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;t&&t.nodeType==m&&e.nodeType==m?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var n=t._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e)return i;t=t.nodeType==g?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==g?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},d(p,j),d(p,j.prototype),z.prototype={nodeName:"#document",nodeType:w,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==E){var n=e.firstChild;while(n){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return re(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===f&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),X(this,e)},replaceChild:function(e,t){re(this,e,t,ie),e.ownerDocument=this,t&&this.removeChild(t),Q(e)&&(this.documentElement=e)},importNode:function(e,t){return Se(this,e,t)},getElementById:function(e){var t=null;return H(this.documentElement,function(n){if(n.nodeType==f&&n.getAttribute("id")==e)return t=n,!0}),t},getElementsByClassName:function(e){var t=u(e);return new O(this,function(n){var i=[];return t.length>0&&H(n.documentElement,function(r){if(r!==n&&r.nodeType===f){var s=r.getAttribute("class");if(s){var a=e===s;if(!a){var o=u(s);a=t.every(c(o))}a&&i.push(r)}}}),i})},createElement:function(e){var t=new ae;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new R;var n=t.attributes=new L;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new me;return e.ownerDocument=this,e.childNodes=new R,e},createTextNode:function(e){var t=new ue;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ce;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new de;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ye;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new oe;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ge;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new ae,i=t.split(":"),r=n.attributes=new L;return n.childNodes=new R,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new oe,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},h(z,j),ae.prototype={nodeType:f,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===E?this.insertBefore(e,null):se(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new O(this,function(t){var n=[];return H(t,function(i){i===t||i.nodeType!=f||"*"!==e&&i.tagName!=e||n.push(i)}),n})},getElementsByTagNameNS:function(e,t){return new O(this,function(n){var i=[];return H(n,function(r){r===n||r.nodeType!==f||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)}),i})}},z.prototype.getElementsByTagName=ae.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=ae.prototype.getElementsByTagNameNS,h(ae,j),oe.prototype.nodeType=g,h(oe,j),le.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(I[x])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var i=this.data.substring(0,e),r=this.data.substring(e+t);n=i+n+r,this.nodeValue=this.data=n,this.length=n.length}},h(le,j),ue.prototype={nodeName:"#text",nodeType:m,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},h(ue,le),ce.prototype={nodeName:"#comment",nodeType:_},h(ce,le),de.prototype={nodeName:"#cdata-section",nodeType:y},h(de,le),he.prototype.nodeType=S,h(he,j),pe.prototype.nodeType=A,h(pe,j),fe.prototype.nodeType=b,h(fe,j),ge.prototype.nodeType=v,h(ge,j),me.prototype.nodeName="#document-fragment",me.prototype.nodeType=E,h(me,j),ye.prototype.nodeType=T,h(ye,j),ve.prototype.serializeToString=function(e,t,n){return be.call(e,t,n)},j.prototype.toString=be;try{if(Object.defineProperty){function Ce(e){switch(e.nodeType){case f:case E:var t=[];e=e.firstChild;while(e)7!==e.nodeType&&8!==e.nodeType&&t.push(Ce(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(O.prototype,"length",{get:function(){return N(this),this.$$length}}),Object.defineProperty(j.prototype,"textContent",{get:function(){return Ce(this)},set:function(e){switch(this.nodeType){case f:case E:while(this.firstChild)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Ae=function(e,t,n){e["$$"+t]=n}}}catch(Ie){}t.DocumentType=he,t.DOMException=D,t.DOMImplementation=F,t.Element=ae,t.Node=j,t.NodeList=R,t.XMLSerializer=ve},7811:function(e){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7921:function(e,t,n){var i=n(7801);i.DOMImplementation,i.XMLSerializer,t.DOMParser=n(713).DOMParser},7969:function(e){"use strict";var t=function(){function e(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var t=e.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},t.getMaxAttempts=function(){return this.maxAttempts_},t.setMaxAttempts=function(e){this.maxAttempts_=e},t.getDelayFactor=function(){return this.delayFactor_},t.setDelayFactor=function(e){this.delayFactor_=e},t.getFuzzFactor=function(){return this.fuzzFactor_},t.setFuzzFactor=function(e){this.fuzzFactor_=e},t.getInitialDelay=function(){return this.initialDelay_},t.setInitialDelay=function(e){this.initialDelay_=e},t.createRetry=function(e){var t=void 0===e?{}:e,i=t.maxAttempts,r=t.delayFactor,s=t.fuzzFactor,a=t.initialDelay;return new n({maxAttempts:i||this.maxAttempts_,delayFactor:r||this.delayFactor_,fuzzFactor:s||this.fuzzFactor_,initialDelay:a||this.initialDelay_})},e}(),n=function(){function e(e){this.maxAttempts_=e.maxAttempts,this.delayFactor_=e.delayFactor,this.fuzzFactor_=e.fuzzFactor,this.currentDelay_=e.initialDelay,this.currentAttempt_=1}var t=e.prototype;return t.moveToNextAttempt=function(){this.currentAttempt_++;var e=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+e},t.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},t.getCurrentDelay=function(){return this.currentDelay_},t.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},t.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},t.getCurrentFuzzedDelay=function(){var e=this.getCurrentMinPossibleDelay(),t=this.getCurrentMaxPossibleDelay();return e+Math.random()*(t-e)},e}();e.exports=t},8004:function(e,t,n){"use strict";var i=n(6518),r=n(9039),s=n(8750),a=n(4916),o=!a("intersection",function(e){return 2===e.size&&e.has(1)&&e.has(2)})||r(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});i({target:"Set",proto:!0,real:!0,forced:o},{intersection:s})},8014:function(e,t,n){"use strict";var i=n(1291),r=Math.min;e.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}},8019:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports["default"]=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},8111:function(e,t,n){"use strict";var i=n(6518),r=n(4576),s=n(679),a=n(8551),o=n(4901),l=n(2787),u=n(2106),c=n(4659),d=n(9039),h=n(9297),p=n(8227),f=n(7657).IteratorPrototype,g=n(3724),m=n(6395),y="constructor",v="Iterator",b=p("toStringTag"),T=TypeError,_=r[v],w=m||!o(_)||_.prototype!==f||!d(function(){_({})}),S=function(){if(s(this,f),l(this)===f)throw new T("Abstract class Iterator not directly constructable")},E=function(e,t){g?u(f,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===f)throw new T("You can't redefine this property");h(this,e)?this[e]=t:c(this,e,t)}}):f[e]=t};h(f,b)||E(b,v),!w&&h(f,y)&&f[y]!==Object||E(y,S),S.prototype=f,i({global:!0,constructor:!0,forced:w},{Iterator:S})},8227:function(e,t,n){"use strict";var i=n(4576),r=n(5745),s=n(9297),a=n(3392),o=n(4495),l=n(7040),u=i.Symbol,c=r("wks"),d=l?u["for"]||u:u&&u.withoutSetter||a;e.exports=function(e){return s(c,e)||(c[e]=o&&s(u,e)?u[e]:d("Symbol."+e)),c[e]}},8237:function(e,t,n){"use strict";var i=n(6518),r=n(2652),s=n(9306),a=n(8551),o=n(1767),l=n(9539),u=n(4549),c=n(8745),d=n(9039),h=TypeError,p=d(function(){[].keys().reduce(function(){},void 0)}),f=!p&&u("reduce",h);i({target:"Iterator",proto:!0,real:!0,forced:p||f},{reduce:function(e){a(this);try{s(e)}catch(d){l(this,"throw",d)}var t=arguments.length<2,n=t?void 0:arguments[1];if(f)return c(f,this,t?[e]:[e,n]);var i=o(this),u=0;if(r(i,function(i){t?(t=!1,n=i):n=e(n,i,u),u++},{IS_RECORD:!0}),t)throw new h("Reduce of empty iterator with no initial value");return n}})},8469:function(e,t,n){"use strict";var i=n(9504),r=n(507),s=n(4402),a=s.Set,o=s.proto,l=i(o.forEach),u=i(o.keys),c=u(new a).next;e.exports=function(e,t,n){return n?r({iterator:u(e),next:c},t):l(e,t)}},8480:function(e,t,n){"use strict";var i=n(1828),r=n(8727),s=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},8527:function(e,t,n){"use strict";var i=n(7080),r=n(4402).has,s=n(5170),a=n(3789),o=n(507),l=n(9539);e.exports=function(e){var t=i(this),n=a(e);if(s(t)<n.size)return!1;var u=n.getIterator();return!1!==o(u,function(e){if(!r(t,e))return l(u,"normal",!1)})}},8551:function(e,t,n){"use strict";var i=n(34),r=String,s=TypeError;e.exports=function(e){if(i(e))return e;throw new s(r(e)+" is not an object")}},8574:function(e,t,n){"use strict";var i=n(9504),r=Error,s=i("".replace),a=function(e){return String(new r(e).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,l=o.test(a);e.exports=function(e,t){if(l&&"string"==typeof e&&!r.prepareStackTrace)while(t--)e=s(e,o,"");return e}},8622:function(e,t,n){"use strict";var i=n(4576),r=n(4901),s=i.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},8646:function(e,t,n){"use strict";var i=n(9565),r=n(8551),s=n(1767),a=n(851);e.exports=function(e,t){t&&"string"===typeof e||r(e);var n=a(e);return s(r(void 0!==n?i(n,e):e))}},8653:function(e,t,n){"use strict";function i(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"===typeof n.find)return n.find.call(e,t);for(var i=0;i<e.length;i++)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];if(t.call(void 0,r,i,e))return r}}function r(e,t){return void 0===t&&(t=Object),t&&"function"===typeof t.freeze?t.freeze(e):e}function s(e,t){if(null===e||"object"!==typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}n(8111),n(116);var a=r({HTML:"text/html",isHTML:function(e){return e===a.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),o=r({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=s,t.find=i,t.freeze=r,t.MIME_TYPE=a,t.NAMESPACE=o},8686:function(e,t,n){"use strict";var i=n(3724),r=n(9039);e.exports=i&&r(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8727:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(e,t,n){"use strict";var i=n(616),r=Function.prototype,s=r.apply,a=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(s):function(){return a.apply(s,arguments)})},8750:function(e,t,n){"use strict";var i=n(7080),r=n(4402),s=n(5170),a=n(3789),o=n(8469),l=n(507),u=r.Set,c=r.add,d=r.has;e.exports=function(e){var t=i(this),n=a(e),r=new u;return s(t)>n.size?l(n.getIterator(),function(e){d(t,e)&&c(r,e)}):o(t,function(e){n.includes(e)&&c(r,e)}),r}},8773:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},8776:function(e,t,n){n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(9577),n(4979),
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function(){var e="undefined"!=typeof window?window:n.g,i={};for(var r in function(e,t,n){var i;function s(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function o(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var l=o(this);function u(e,t){if(t)e:{var n=l;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function c(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function d(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:s(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function h(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}u("Symbol",function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(e||"")+"_"+r++,e)}function n(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}),u("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=l[t[n]];"function"===typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return c(s(this))}})}return e});var p,f="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var g;e:{var m={a:!0},y={};try{y.__proto__=m,g=y.a;break e}catch(XO){}g=!1}p=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var v=p;function b(e,t){if(e.prototype=f(t.prototype),e.prototype.constructor=e,v)v(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Kn=t.prototype}function T(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function _(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}function w(e,t){e.i={Mi:t,Yi:!0},e.g=e.m||e.j}function S(e,t,n){return e.g=n,{value:t}}function E(e){e.g=0}function A(e,t,n){e.m=t,void 0!=n&&(e.j=n)}function C(e,t){e.m=0,e.j=t||0}function I(e,t,n){e.g=t,e.m=n||0}function x(e,t){return e.m=t||0,t=e.i.Mi,e.i=null,t}function k(e){e.B=[e.i],e.m=0,e.j=0}function M(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.Yi?e.g=e.m||e.j:void 0!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function D(e){this.g=new T,this.h=e}function R(e,t){_(e.g);var n=e.g.l;return n?O(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),N(e))}function O(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.s=!1,r;var s=r.value}catch(a){return e.g.l=null,w(e.g,a),N(e)}return e.g.l=null,i.call(e.g,s),N(e)}function N(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,w(e.g,n)}if(e.g.s=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Yi)throw t.Mi;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function L(e){this.next=function(t){return _(e.g),e.g.l?t=O(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=N(e)),t},this.throw=function(t){return _(e.g),e.g.l?t=O(e,e.g.l["throw"],t,e.g.u):(w(e.g,t),t=N(e)),t},this.return=function(t){return R(e,t)},this[Symbol.iterator]=function(){return this}}function P(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(i,r){function s(e){e.done?i(e.value):Promise.resolve(e.value).then(t,n).then(s,r)}s(e.next())})}function U(e){return P(new L(new D(e)))}function B(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}function V(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function H(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var s=e[r];if(t.call(n,s,r,e))return{Vi:r,v:s}}return{Vi:-1,v:void 0}}T.prototype.u=function(e){this.h=e},T.prototype.return=function(e){this.i={return:e},this.g=this.j},T.prototype.A=function(e){this.g=e},u("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var s=l.setTimeout;n.prototype.i=function(e){s(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(i){this.j(i)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(r){return void this.l(r)}"function"==typeof t?this.I(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;s(function(){if(e.C()){var t=l.console;"undefined"!==typeof t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.s)return!1;var e=l.CustomEvent,t=l.Event,n=l.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=l.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e)),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.H=function(e){var t=this.j();e.cf(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(i){n.reject(i)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){s(n)}}:t}var r,s,a=new t(function(e,t){r=e,s=t});return this.cf(i(e,r),i(n,s)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.cf=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n),this.s=!0},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=d(e),s=r.next();!s.done;s=r.next())i(s.value).cf(t,n)})},t.all=function(e){var n=d(e),r=n.next();return r.done?i([]):new t(function(e,t){function s(t){return function(n){a[t]=n,o--,0==o&&e(a)}}var a=[],o=0;do{a.push(void 0),o++,i(r.value).cf(s(a.length-1),t),r=n.next()}while(!r.done)})},t}),u("WeakMap",function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!F(e,o)){var t=new n;a(e,o,{value:t})}}function s(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(r){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();s("freeze"),s("preventExtensions"),s("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!F(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.g]=t,this},t.prototype.get=function(e){return i(e)&&F(e,o)?e[o][this.g]:void 0},t.prototype.has=function(e){return i(e)&&F(e,o)&&F(e[o],this.g)},t.prototype.delete=function(e){return!!(i(e)&&F(e,o)&&F(e[o],this.g))&&delete e[o][this.g]},t}),u("Map",function(e){function t(){var e={};return e.zc=e.next=e.head=e}function n(e,t){var n=e[1];return c(function(){if(n){for(;n.head!=e[1];)n=n.zc;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++a,s.set(t,n)):n="p_"+t;var i=e[0][n];if(i&&F(e[0],n))for(e=0;e<i.length;e++){var r=i[e];if(t!==t&&r.key!==r.key||t===r.key)return{id:n,list:i,index:e,entry:r}}return{id:n,list:i,index:-1,entry:void 0}}function r(e){if(this[0]={},this[1]=t(),this.size=0,e){e=d(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&(r=i.next(),!(r.done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done))}catch(s){return!1}}())return e;var s=new WeakMap;r.prototype.set=function(e,t){e=0===e?0:e;var n=i(this,e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],zc:this[1].zc,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].zc.next=n.entry,this[1].zc=n.entry,this.size++),this},r.prototype.delete=function(e){return e=i(this,e),!(!e.entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.zc.next=e.entry.next,e.entry.next.zc=e.entry.zc,e.entry.head=null,this.size--,!0)},r.prototype.clear=function(){this[0]={},this[1]=this[1].zc=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).entry},r.prototype.get=function(e){return(e=i(this,e).entry)&&e.value},r.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},r.prototype.keys=function(){return n(this,function(e){return e.key})},r.prototype.values=function(){return n(this,function(e){return e.value})},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var a=0;return r}),u("Array.prototype.keys",function(e){return e||function(){return j(this,function(e){return e})}}),u("Set",function(e){function t(e){if(this.g=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(r=i.next(),!r.done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(s){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(i){return e.call(t,i,i,n)})},t)}),u("Array.prototype.values",function(e){return e||function(){return j(this,function(e,t){return t})}}),u("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var s=0;!(r=e.next()).done;)i.push(t.call(n,r.value,s++))}else for(r=e.length,s=0;s<r;s++)i.push(t.call(n,e[s],s));return i}}),u("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}),u("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(t=t||0,0>t&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}}),u("String.prototype.includes",function(e){return e||function(e,t){return-1!==V(this,e,"includes").indexOf(e,t||0)}}),u("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var i=Number(arguments[n]);if(0>i||1114111<i||i!==Math.floor(i))throw new RangeError("invalid_code_point "+i);65535>=i?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(i>>>10&1023|55296),t+=String.fromCharCode(1023&i|56320))}return t}}),u("Array.prototype.findIndex",function(e){return e||function(e,t){return H(this,e,t).Vi}}),u("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([t]);return!(!i.has(t)||i.has(n))&&(i.delete(t),i.add(n),!i.has(t)&&i.has(n))}catch(r){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),u("Array.prototype.find",function(e){return e||function(e,t){return H(this,e,t).v}}),u("String.prototype.startsWith",function(e){return e||function(e,t){var n=V(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var s=0;s<r&&t<i;)if(n[t++]!=e[s++])return!1;return s>=r}}),u("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)F(e,t)&&n.push([t,e[t]]);return n}});var z="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)F(i,r)&&(e[r]=i[r])}return e};function G(e){if(e=Math.trunc(e)||0,0>e&&(e+=this.length),!(0>e||e>=this.length))return this[e]}function q(e){return e||G}u("Object.assign",function(e){return e||z}),u("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),u("Array.prototype.entries",function(e){return e||function(){return j(this,function(e,t){return[e,t]})}}),u("Number.isNaN",function(e){return e||function(e){return"number"===typeof e&&isNaN(e)}}),u("String.prototype.repeat",function(e){return e||function(e){var t=V(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),u("Number.EPSILON",function(){return Math.pow(2,-52)}),u("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),u("Number.isFinite",function(e){return e||function(e){return"number"===typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),u("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)F(e,t)&&n.push(e[t]);return n}}),u("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),u("String.prototype.endsWith",function(e){return e||function(e,t){var n=V(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var i=e.length;0<i&&0<t;)if(n[--t]!=e[--i])return!1;return 0>=i}}),u("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}),u("Array.prototype.at",function(e){return e||G}),u("Int8Array.prototype.at",q),u("Uint8Array.prototype.at",q),u("Uint8ClampedArray.prototype.at",q),u("Int16Array.prototype.at",q),u("Uint16Array.prototype.at",q),u("Int32Array.prototype.at",q),u("Uint32Array.prototype.at",q),u("Float32Array.prototype.at",q),u("Float64Array.prototype.at",q),u("String.prototype.at",function(e){return e||G});var W=this||self;function X(e,t){e=e.split(".");var n,i=W;e[0]in i||"undefined"==typeof i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function K(t,n){if(n)if(n instanceof Map)for(var i=d(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Y(e){var t,n=new K(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}K.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},K.prototype.stopImmediatePropagation=function(){this.g=!0},K.prototype.stopPropagation=function(){},X("shaka.util.FakeEvent",K);var $={wm:"abrstatuschanged",xm:"adaptation",ym:"audiotrackchanged",zm:"audiotrackschanged",Am:"boundarycrossed",Bm:"buffering",Cm:"canupdatestarttime",Dm:"complete",Em:"currentitemchanged",Fm:"downloadcompleted",Gm:"downloadfailed",Hm:"downloadheadersreceived",Im:"drmsessionupdate",Km:"emsg",Qm:"itemsinserted",Rm:"itemsremoved",jn:"prft",Error:"error",Lm:"expirationupdated",Mm:"firstquartile",Nm:"gapjumped",Sm:"keystatuschanged",Wm:"loaded",Xm:"loading",Zm:"manifestparsed",$m:"manifestupdated",an:"mediaqualitychanged",cn:"mediasourcerecovered",dn:"metadataadded",Metadata:"metadata",fn:"midpoint",gn:"nospatialvideoinfo",hn:"onstatechange",ln:"ratechange",on:"segmentappended",pn:"sessiondata",qn:"spatialvideoinfo",rn:"stalldetected",sn:"started",tn:"statechanged",un:"streaming",vn:"textchanged",wn:"texttrackvisibility",xn:"thirdquartile",yn:"timelineregionadded",zn:"timelineregionenter",An:"timelineregionexit",Bn:"trackschanged",Dn:"unloading",Fn:"variantchanged"};function Q(){}function Z(){}function J(){}function ee(e){var t=B.apply(1,arguments);re.has(e)||(re.add(e),J.apply(Q,h(t)))}function te(){}function ne(){}function ie(){}var re=new Set;function se(){this.g=new Map}function ae(){this.fb=new se,this.Qe=this}function oe(e,t){var n=[];e=d(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function le(e,t){e=d(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function ue(e,t){e=d(e);for(var n=e.next();!n.done;n=e.next())if(t(n.value))return!0;return!1}function ce(e,t){var n=[];e=d(e);for(var i=e.next();!i.done;i=e.next())i=i.value,t(i)&&n.push(i);return n}e.console&&((new Map).set(1,function(){return console.error.apply(console,h(B.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,h(B.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,h(B.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,h(B.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,h(B.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,h(B.apply(0,arguments)))}),J=function(){return console.warn.apply(console,h(B.apply(0,arguments)))},Z=function(){console.error.apply(console,h(B.apply(0,arguments)))}),i=se.prototype,i.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},i.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},i.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(e){return e!=t});this.g.set(e,n),n.length||this.g.delete(e)}},i.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},i.size=function(){return this.g.size},i.keys=function(){return Array.from(this.g.keys())},ae.prototype.addEventListener=function(e,t){this.fb&&this.fb.push(e,t)},ae.prototype.removeEventListener=function(e,t){this.fb&&this.fb.remove(e,t)},ae.prototype.dispatchEvent=function(e){if(!this.fb)return!0;var t=this.fb.get(e.type)||[],n=this.fb.get("All");for(n&&(t=t.concat(n)),t=d(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Qe,e.currentTarget=this.Qe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(i){}if(e.g)break}return e.defaultPrevented},ae.prototype.release=function(){this.fb=null};
/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var de=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function he(e){var t;e instanceof he?(pe(this,e.hc),this.qd=e.qd,fe(this,e.Gb),ge(this,e.Id),this.ub=e.ub,me(this,e.g.clone()),this.Yc=e.Yc):e&&(t=String(e).match(de))?(pe(this,t[1]||"",!0),this.qd=ye(t[2]||""),fe(this,t[3]||"",!0),ge(this,t[4]),this.ub=ye(t[5]||"",!0),me(this,t[6]||"",!0),this.Yc=ye(t[7]||"")):this.g=new Ae(null)}function pe(e,t,n){e.hc=n?ye(t,!0):t,e.hc&&(e.hc=e.hc.replace(/:$/,""))}function fe(e,t,n){e.Gb=n?ye(t,!0):t}function ge(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Id=t}else e.Id=null}function me(e,t,n){t instanceof Ae?e.g=t:(n||(t=ve(t,Se)),e.g=new Ae(t))}function ye(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ve(e,t,n){return null!=e?(e=encodeURI(e).replace(t,be),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function be(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}i=he.prototype,i.hc="",i.qd="",i.Gb="",i.Id=null,i.ub="",i.Yc="",i.toString=function(){var e=[],t=this.hc;if(t&&e.push(ve(t,Te,!0),":"),t=this.Gb){e.push("//");var n=this.qd;n&&e.push(ve(n,Te,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Id,null!=t&&e.push(":",String(t))}return(t=this.ub)&&(this.Gb&&"/"!=t.charAt(0)&&e.push("/"),e.push(ve(t,"/"==t.charAt(0)?we:_e,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Yc)&&e.push("#",ve(t,Ee)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.hc&&(t=new he);var n=!!e.hc;n?pe(t,e.hc):n=!!e.qd,n?t.qd=e.qd:n=!!e.Gb,n?fe(t,e.Gb):n=null!=e.Id;var i=e.ub;if(n)ge(t,e.Id);else if(n=!!e.ub){if("/"!=i.charAt(0))if(this.Gb&&!this.ub)i="/"+i;else{var r=t.ub.lastIndexOf("/");-1!=r&&(i=t.ub.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var s=[],a=0;a<i.length;){var o=i[a++];"."==o?r&&a==i.length&&s.push(""):".."==o?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&a==i.length&&s.push("")):(s.push(o),r=!0)}i=s.join("/")}}return n?t.ub=i:n=""!==e.g.toString(),n?me(t,e.g.clone()):n=!!e.Yc,n&&(t.Yc=e.Yc),t},i.clone=function(){return new he(this)};var Te=/[#\/\?@]/g,_e=/[#\?:]/g,we=/[#\?]/g,Se=/[#\?@]/g,Ee=/#/g;function Ae(e){this.g=e||null}function Ce(e){if(!e.kb&&(e.kb=new Map,e.Xd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];s=decodeURIComponent(s.replace(/\+/g," ")),r=r||"",e.add(s,decodeURIComponent(r.replace(/\+/g," ")))}}function Ie(e){return Ce(e),e.Xd}function xe(){}function ke(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=De(e);t=De(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function Me(e){return ArrayBuffer.isView(e)?0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function De(e,t,n){return n=void 0===n?1/0:n,Ne(e,void 0===t?0:t,n,Uint8Array)}function Re(e,t,n){return n=void 0===n?1/0:n,Ne(e,void 0===t?0:t,n,Uint16Array)}function Oe(e,t,n){return n=void 0===n?1/0:n,Ne(e,void 0===t?0:t,n,DataView)}function Ne(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,s=1;"BYTES_PER_ELEMENT"in i&&(s=i.BYTES_PER_ELEMENT);var a=((e.byteOffset||0)+e.byteLength)/s;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/s,a))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),a))-e)}function Le(e,t,n){var i=B.apply(3,arguments);if(this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code,Pe)try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}i=Ae.prototype,i.kb=null,i.Xd=null,i.add=function(e,t){Ce(this),this.g=null;var n=this.kb.has(e)?this.kb.get(e):null;return n||this.kb.set(e,n=[]),n.push(t),this.Xd++,this},i.set=function(e,t){return Ce(this),this.g=null,this.kb.has(e)?this.kb.set(e,[t]):this.add(e,t),this},i.get=function(e){return Ce(this),this.kb.get(e)||[]},i.toString=function(){if(this.g)return this.g;if(!this.kb||!this.kb.size)return"";for(var e=[],t=d(this.kb.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.kb.get(i);for(var r=0;r<i.length;r++){var s=n;""!==i[r]&&(s+="="+encodeURIComponent(i[r])),e.push(s)}}return this.g=e.join("&")},i.clone=function(){var e=new Ae;if(e.g=this.g,this.kb){for(var t=new Map,n=d(this.kb),i=n.next();!i.done;i=n.next()){var r=d(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.kb=t,e.Xd=this.Xd}return e},X("shaka.util.BufferUtils",xe),xe.toDataView=Oe,xe.toUint16=Re,xe.toUint8=De,xe.toArrayBuffer=Me,xe.equal=ke,Le.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},X("shaka.util.Error",Le);var Pe=!0;function Ue(e){this.h=e,this.g=void 0}
/*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Be(){return Ve.value()}Le.Severity={RECOVERABLE:1,CRITICAL:2},Le.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Le.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007},Ue.prototype.value=function(){return void 0===this.g&&(this.g=this.h()),this.g};var Fe=null,je=null,Ve=new Ue(function(){var e=void 0;return Fe&&(e=Fe()),!e&&je&&(e=je()),e});function He(){}function ze(t){if(!t)return"";if(t=De(t),239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!Be().$h())return t=(new TextDecoder).decode(t),t.includes("")&&Z('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;if(0==(128&t[i])?r=t[i]:t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(r=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(r=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(r=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3),65535>=r)n+=String.fromCharCode(r);else{r-=65536;var s=1023&r;n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+s)}}return n}function Ge(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Le(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Oe(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Ke(i)}function qe(e){function t(e){return n.byteLength<=e||9<=n[e]&&126>=n[e]}if(!e)return"";var n=De(e);if(239==n[0]&&187==n[1]&&191==n[2])return ze(n);if(254==n[0]&&255==n[1])return Ge(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Ge(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Ge(e,!1);if(0==n[1]&&0==n[3])return Ge(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ze(e);throw new Le(2,2,2003)}function We(t){if(e.TextEncoder&&!Be().$h()){var n=new TextEncoder;return Me(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return Me(n)}function Xe(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}function Ke(e){return $e.value()(e)}function Ye(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(e){return"#"==e[1]?(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10),0<=e&&1114111>=e?String.fromCodePoint(e):""):t[e]||"'"}):e||""}X("shaka.util.StringUtils",He),He.resetFromCharCode=function(){$e.g=void 0},He.toUTF16=Xe,He.toUTF8=We,He.fromBytesAutoDetect=qe,He.fromUTF16=Ge,He.fromUTF8=ze;var $e=new Ue(function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(n){return!1}}for(var t={Qc:65536};0<t.Qc;t={Qc:t.Qc},t.Qc/=2)if(e(t.Qc))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Qc)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Qc));return n}}(t);return null});function Qe(){}function Ze(e){return e=Ke(De(e)),btoa(e)}function Je(e,t){return t=void 0==t||t,e=Ze(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function et(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function tt(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function nt(e){var t=De(e);e="",t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function it(){for(var e=B.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&1===r.BYTES_PER_ELEMENT?t.set(r,n):t.set(De(r),n),n+=r.byteLength}return t}function rt(e,t,n){if(n=void 0===n?"":n,0==t.length)return e;if(1==e.length&&1==t.length){var i=new he(e[0]);return t=new he(t[0]),t=i.resolve(t),n&&me(t,n),[t.toString()]}t=t.map(function(e){return new he(e)}),i=[],e=d(e);for(var r=e.next();!r.done;r=e.next()){r=new he(r.value);for(var s=d(t),a=s.next();!a.done;a=s.next())a=r.resolve(a.value),n&&me(a,n),i.push(a.toString())}return i}function st(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function at(t,n){n=void 0===n?"cenc":n;var i=[],r=[],s=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=Je(tt(t),!1));var a=e;22!=a.length&&(a=Je(tt(e),!1)),e={kty:"oct",kid:n,k:a},i.push(e),r.push(e.kid),s.push(t)}),t=JSON.stringify({keys:i});var a=JSON.stringify({kids:r});return a=[{initData:De(We(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(s)}}function ot(e,t){if(1==t.length)return t[0];if(e=lt(e,t),null!=e)return e;throw new Le(2,4,4025,t)}function lt(e,t){var n=pt.get(e);n=d(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=d(t),s=r.next();!s.done;s=r.next())if(s=s.value,i.test(s.trim()))return s.trim()}return e==ct?"":null}function ut(e,t){var n=[];e=pt.get(e),e=d(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=d(t),s=r.next();!s.done;s=r.next())s=s.value,i.test(s.trim())&&n.push(s.trim())}return n}X("shaka.util.Uint8ArrayUtils",Qe),Qe.concat=it,Qe.toHex=nt,Qe.fromHex=tt,Qe.fromBase64=et,Qe.toBase64=Je,Qe.toStandardBase64=Ze;var ct="text",dt={Ea:"video",ma:"audio",gb:ct,qg:"image",um:"application"},ht=1/15,pt=(new Map).set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ft(){}function gt(e,t){return e=vt(e),t=vt(t),e.split("-")[0]==t.split("-")[0]}function mt(e,t){return e=vt(e),t=vt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function yt(e,t){return e=vt(e),t=vt(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function vt(e){e=d(e.split("-x-"));var t=e.next().value;t=void 0===t?"":t,e=e.next().value,e=void 0===e?"":e;var n=d(t.split("-"));return t=n.next().value,t=void 0===t?"":t,n=n.next().value,n=void 0===n?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Et.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function bt(e,t){var n=_t(e),i=_t(t);return e!=n&&t!=i&&n==i}function Tt(e,t){return e=vt(e),t=vt(t),t==e?4:mt(t,e)?3:yt(t,e)?2:mt(e,t)?1:0}function _t(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),Et.get(e)||e}function wt(e){return e.language?vt(e.language):e.audio&&e.audio.language?vt(e.audio.language):e.video&&e.video.language?vt(e.video.language):"und"}function St(e,t){e=vt(e);var n=new Set;t=d(t);for(var i=t.next();!i.done;i=t.next())n.add(vt(i.value));for(t=d(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=d(n),i=t.next();!i.done;i=t.next())if(i=i.value,mt(i,e))return i;for(t=d(n),i=t.next();!i.done;i=t.next())if(i=i.value,yt(i,e))return i;for(n=d(n),t=n.next();!t.done;t=n.next())if(t=t.value,mt(e,t))return t;return null}X("shaka.util.LanguageUtils",ft),ft.findClosestLocale=St,ft.getLocaleForVariant=wt,ft.getLocaleForText=function(e){return vt(e.language||"und")},ft.getBase=_t,ft.relatedness=Tt,ft.areSiblings=bt,ft.normalize=vt,ft.isSiblingOf=yt,ft.isParentOf=mt,ft.areLanguageCompatible=gt,ft.areLocaleCompatible=function(e,t){return e=vt(e),t=vt(t),e==t};var Et=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function At(e){ae.call(this),this.j=vt(e),this.i=new Map,this.g=new Set,this.h=new Map}function Ct(e){for(var t=e.h,n=e.j,i=e.g,r=new Set,s=d(i),a=s.next(),o={};!a.done;o={oe:void 0},a=s.next()){o.oe=a.value,r.add(o.oe),r.add(_t(o.oe)),a=ce(t.keys(),function(e){return function(t){return bt(t,e.oe)}}(o)),a.sort(),a=d(a);for(var l=a.next();!l.done;l=a.next())r.add(l.value);for(o=ce(t.keys(),function(e){return function(t){return _t(t)==e.oe}}(o)),o.sort(),o=d(o),a=o.next();!a.done;a=o.next())r.add(a.value)}for(r.add(n),n=[],r=d(r),s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&n.push(s);for(n.reverse(),e.i.clear(),t=d(n),r=t.next();!r.done;r=t.next())r.value.forEach(function(t,n){e.i.set(n,t)});for(t=e.i.keys(),r=new Set,n=d(e.g),s=n.next();!s.done;s=n.next())s=e.h.get(s.value)||new Map,It(s,t,r);0<r.size&&(i=(new Map).set("locales",Array.from(i)).set("missing",Array.from(r)),e.dispatchEvent(new K("missing-localizations",i)))}function It(e,t,n){t=d(t);for(var i=t.next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}b(At,ae),i=At.prototype,i.release=function(){ae.prototype.release.call(this)},i.Di=function(e){var t=this;this.g.clear(),e=d(e);for(var n=e.next();!n.done;n=e.next())this.g.add(vt(n.value));Ct(this),e=ce(this.g,function(e){return!t.h.has(e)}),e.length&&this.dispatchEvent(new K("unknown-locales",(new Map).set("locales",e))),e=ce(this.g,function(e){return t.h.has(e)}),e=(new Map).set("locales",e.length?e:[this.j]),this.dispatchEvent(new K("locale-changed",e))},i.Va=function(e,t,n){e=vt(e),void 0===n&&(n=xt);var i=this.h.get(e)||new Map;return t.forEach(function(e,t){i.has(t)&&n!=xt||i.set(t,e)}),this.h.set(e,i),Ct(this),this.dispatchEvent(new K("locale-updated")),this},i.Zl=function(e){for(var t=d(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},i.resolve=function(e){var t=this.i.get(e);return t||(e=(new Map).set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new K("unknown-localization",e)),"")},i.Dk=function(){return this.g},X("shaka.ui.Localization",At),At.prototype.getCurrentLocales=At.prototype.Dk,At.prototype.resolve=At.prototype.resolve,At.prototype.resolveDictionary=At.prototype.Zl,At.prototype.insert=At.prototype.Va,At.prototype.changeLocale=At.prototype.Di,At.prototype.release=At.prototype.release;var xt=1;function kt(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function Mt(e){return e.h/(1-Math.pow(e.g,e.i))}function Dt(){this.h=new kt(2),this.j=new kt(5),this.g=0,this.i=128e3,this.l=16e3}function Rt(){this.g=new se}function Ot(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=Nt(e,i),this.target.addEventListener(t,n,this.g)}function Nt(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),Lt(e)?t:t.capture||!1}function Lt(e){var t=Pt;if(void 0==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(r){t=!1}Pt=t}return t||!1}At.ConflictResolution={USE_OLD:0,USE_NEW:xt},At.UNKNOWN_LOCALES="unknown-locales",At.UNKNOWN_LOCALIZATION="unknown-localization",At.MISSING_LOCALIZATIONS="missing-localizations",At.LOCALE_CHANGED="locale-changed",At.LOCALE_UPDATED="locale-updated",kt.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},Dt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Dt.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},Dt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Mt(this.h),Mt(this.j))},i=Rt.prototype,i.release=function(){this.Sa(),this.g=null},i.o=function(e,t,n,i){this.g&&(e=new Ot(e,t,n,i),this.g.push(t,e))},i.qa=function(e,t,n,i){function r(i){s.Da(e,t,r),n(i)}var s=this;this.o(e,t,r,i)},i.Da=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=d(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Da(),this.g.remove(t,r))}},i.Sa=function(){if(this.g){for(var e=[],t=d(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,h(n.value));for(e=d(e),t=e.next();!t.done;t=e.next())t.value.Da();this.g.g.clear()}},X("shaka.util.EventManager",Rt),Rt.prototype.removeAll=Rt.prototype.Sa,Rt.prototype.unlisten=Rt.prototype.Da,Rt.prototype.listenOnce=Rt.prototype.qa,Rt.prototype.listen=Rt.prototype.o,Rt.prototype.release=Rt.prototype.release,Ot.prototype.Da=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Pt=void 0;function Ut(e,t){this.g=e,this.h=t}function Bt(e,t){var n=new Ut(5,0),i=Vt,r=i.g,s=n.h-r.h;(0<(n.g-r.g||s)?i.i:i.h)(i.g,n,e,t)}function Ft(e,t,n,i){J([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function jt(e,t,n,i){Z([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}X("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Ut.prototype.toString=function(){return"v"+this.g+"."+this.h};var Vt=null;function Ht(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.s=i,this.j=!1;e:{if("undefined"===typeof libDPIModule&&J("Could not find LCEVC Library dependencies on this page"),"undefined"!==typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"===typeof LcevcDil){J("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,Bt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}"undefined"===typeof this.h.SupportObject?(J("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||J(this.h.SupportObject.SupportError),e="undefined"!==typeof this.h&&"undefined"!==typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function zt(e,t,n,i){"video"!==i.type||e.s&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.s)}function Gt(e){e.g&&e.i.classList.add("shaka-hidden")}function qt(e){return!(!e||"undefined"===typeof LCEVCdec)&&"lvc1"==e.codecs}function Wt(t){if(Yt.has(t))return Yt.get(t);var n=e.ManagedMediaSource||e.MediaSource;return!!n&&(n=n.isTypeSupported(t),Yt.set(t,n),n)}function Xt(){var t=e.ManagedSourceBuffer||e.SourceBuffer;return!!t&&!!t.prototype&&!!t.prototype.changeType}function Kt(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.prototype)&&(!!t.prototype.setLiveSeekableRange&&!!t.prototype.clearLiveSeekableRange)}Ht.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},X("shaka.lcevc.Dec",Ht),Ht.prototype.release=Ht.prototype.release;var Yt=new Map;function $t(){}function Qt(){}function Zt(){}function Jt(e){this.h=new Map,this.i=0,this.j=new Qt,(e=tn(e.toLowerCase()))&&(this.j=e()),this.g=new $t,(e=rn)&&(this.g=e(),this.h.set(this.i,this.g))}function en(e,t){nn.set(e,t)}function tn(e){return nn.get(e)}$t.prototype.extract=function(){},$t.prototype.decode=function(){return[]},$t.prototype.clear=function(){},$t.prototype.getStreams=function(){return[]},Qt.prototype.init=function(){},Qt.prototype.parse=function(){return[]},i=Zt.prototype,i.init=function(){},i.Of=function(){},i.Sd=function(){},i.remove=function(){},i.rg=function(){},X("shaka.media.IClosedCaptionParser",Zt),i=Jt.prototype,i.init=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?-1:n,-1!=n&&this.i!=n){t=n;var i=this.h.get(t);this.h.set(this.i,this.g),i?this.g=i:((i=rn)&&(this.g=i()),this.h.set(t,this.g))}else t||this.Sd();this.j.init(e),-1!=n&&(this.i=n)},i.Of=function(e){e=this.j.parse(e),e=d(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=De(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},i.Sd=function(){this.g.clear()},i.remove=function(e){e=void 0===e?[]:e,e=new Set(e);for(var t=d(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var i=this.h.get(n);i&&i.clear(),this.h.delete(n)}},i.rg=function(){return this.g.getStreams()},X("shaka.media.ClosedCaptionParser",Jt),Jt.findDecoder=function(){return rn},Jt.unregisterDecoder=function(){rn=null},Jt.registerDecoder=function(e){rn=e},Jt.findParser=tn,Jt.unregisterParser=function(e){nn.delete(e)},Jt.registerParser=en;var nn=new Map,rn=null;function sn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=an,this.scroll=on}X("shaka.text.CueRegion",sn);var an=1;sn.units={PX:0,PERCENTAGE:an,LINES:2};var on="";function ln(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}function un(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function cn(e,t,n){if(n||(n=ln),e.length!=t.length)return!1;t=t.slice(),e=d(e);for(var i=e.next(),r={};!i.done;r={$i:void 0},i=e.next()){if(r.$i=i.value,i=t.findIndex(function(e){return function(t){return n(e.$i,t)}}(r)),-1==i)return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function dn(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=ln),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function hn(e){this.h=e||"",this.g=0}function pn(e){fn(e,/[ \t]+/gm)}function fn(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=null==t?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function gn(e){return e.g==e.h.length?null:(e=fn(e,/[^ \t\n]*/gm))?e[0]:null}function mn(e){if(e=fn(e,vn),null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function yn(e){return e?mn(new hn(e)):null}sn.scrollMode={NONE:on,UP:"up"};var vn=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function bn(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||ArrayBuffer.isView(e))return e;if(n.has(e))return null;var i=Array.isArray(e);if(e.constructor!=Object&&!i)return null;n.add(e);var r,s=i?[]:{};for(r in e)s[r]=t(e[r]);return i&&(s.length=e.length),s}}var n=new WeakSet;return t(e)}function Tn(e){var t,n={};for(t in e)n[t]=e[t];return n}function _n(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];void 0!==r&&(r=_n(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if("function"==typeof e)e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=d(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],void 0!==r&&(r=_n(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}
/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/
function wn(e,t){var n=void 0!==n&&n;return e=qe(e),Sn(e,t,n)}function Sn(e,t,n){return e=An(e,void 0!==n&&n),!t&&e.length?e[0]:(e=e.find(function(e){return t.split(",").includes(e.tagName)}))?e:null}function En(e){return Jn.has(e)?Jn.get(e):""}function An(e,t){function n(s,a){a=void 0!==a&&a;for(var o=[];e[r];)if(60==e.charCodeAt(r)){if(47===e.charCodeAt(r+1)){a=r+2,r=e.indexOf(">",r),a=e.substring(a,r);var l=a.indexOf(s);if(-1==l){var u=s.indexOf(".");0<u&&(l=a.indexOf(s.substring(0,u)))}if(-1==l)throw s=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(s.length-1)+"\nColumn: "+(s[s.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}if(33===e.charCodeAt(r+1)){if(45==e.charCodeAt(r+2)){for(;-1!==r&&(62!==e.charCodeAt(r)||45!=e.charCodeAt(r-1)||45!=e.charCodeAt(r-2)||-1==r);)r=e.indexOf(">",r+1);-1===r&&(r=e.length)}else if(91===e.charCodeAt(r+2)&&91===e.charCodeAt(r+8)&&"cdata"===e.substr(r+3,5).toLowerCase()){l=e.indexOf("]]>",r),-1==l?(o.push(e.substr(r+9)),r=e.length):(o.push(e.substring(r+9,l)),r=l+3);continue}r++;continue}e:{u=a,r++;var c=i(),d={};for(l=[];62!==e.charCodeAt(r)&&e[r];){var p=e.charCodeAt(r);if(64<p&&91>p||96<p&&123>p){p=i();for(var f=e.charCodeAt(r);f&&39!==f&&34!==f&&!(64<f&&91>f||96<f&&123>f)&&62!==f;)r++,f=e.charCodeAt(r);var g=r+1;if(r=e.indexOf(e[r],g),g=e.slice(g,r),39===f||34===f){if(-1===r){if(u={tagName:c,attributes:d,children:l,parent:null},t)for(c=0;c<l.length;c++)"string"!==typeof l[c]&&(l[c].parent=u);l=u;break e}}else g=null,r--;if(p.startsWith("xmlns:")){f=g;var m=p.split(":")[1];Jn.set(f,m),ei.set(m,f)}"tt"===c&&"xml:space"===p&&"preserve"===g&&(u=!0),d[p]=g}r++}for(47!==e.charCodeAt(r-1)?(r++,l=n(c,u)):r++,u={tagName:c,attributes:d,children:l,parent:null},c=l.length,d=0;d<c;d++)p=l[d],"string"!==typeof p?t&&(p.parent=u):d==c-1&&"\n"==p&&l.pop();l=u}if(o.push(l),"string"===typeof l)break;"?"===l.tagName[0]&&l.children&&(o.push.apply(o,h(l.children)),l.children=[])}else l=r,r=e.indexOf("<",r)-1,-2===r&&(r=e.length),l=e.slice(l,r+1),a?0<l.length&&o.push(l):(o.length&&1==l.length&&"\n"==l[0]||0<l.trim().length)&&o.push(l),r++;return o}function i(){for(var t=r;-1==="\r\n\t>/= ".indexOf(e[r])&&e[r];)r++;return e.slice(t,r)}var r=0;return n("")}function Cn(e){return"string"===typeof e}function In(e){var t=[];if(!e.children)return[];e=d(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,"string"!==typeof n&&t.push(n);return t}function xn(e,t){var n=[];if(!e.children)return[];e=d(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function kn(e){return"string"===typeof e?Ye(e):(e=e.children.reduce(function(e,t){return"string"===typeof t?e+t:e},""),""===e?null:Ye(e))}function Mn(e){return Array.from(e.children).every(function(e){return"string"===typeof e})?((e=kn(e))&&(e=e.trim()),e):null}function Dn(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children){e=d(e.children);for(var i=e.next();!i.done;i=e.next())Dn(i.value,t,n)}return n}function Rn(e,t){return e=xn(e,t),1!=e.length?null:e[0]}function On(e,t,n){return e=Pn(e,t,n),1!=e.length?null:e[0]}function Nn(e,t,n,i){i=void 0===i?null:i;var r=null;return e=e.attributes[t],null!=e&&(r=n(e)),null==r?i:r}function Ln(e,t,n){return t=En(t),e.attributes[t+":"+n]||null}function Pn(e,t,n){var i=En(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=d(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function Un(e,t,n){t=d(t);for(var i=t.next();!i.done;i=t.next())if(i=Ln(e,i.value,n))return i;return null}function Bn(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Fn(e){return e?(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),e?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null):null}function jn(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Vn(e){return e=Number(e),0===e%1?e:null}function Hn(e){return e=Number(e),0===e%1&&0<e?e:null}function zn(e){return e=Number(e),0===e%1&&0<=e?e:null}function Gn(e){return e=Number(e),isNaN(e)?null:e}function qn(e){return!!e&&"true"===e.toLowerCase()}function Wn(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Xn(e){var t=[];e=Ye(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=d(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),s=n.match(/(@t='(\d+)')/),a=n.match(/(@n='(\d+)')/),o=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:o?Number(o[1])-1:null,Dc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Dc=n.slice(1))}return t}function Kn(e,t){var n=Xn(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,null==n&&(null!==i.t&&(n=Yn(e,"t",i.t)),null!==i.n&&(n=Yn(e,"n",i.n))),null===n?n="prepend"===r?0:e.length:"prepend"===r?--n:"after"===r&&++n,r=t.tagName,(i=i.Dc)&&e[n]?$n(e[n],r,i,Mn(t)||""):("remove"!==r&&"replace"!==r||e.splice(n,1),"add"!==r&&"replace"!==r||e.splice.apply(e,[n,0].concat(h(t.children))))}}function Yn(e,t,n){var i=0;e=d(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function $n(e,t,n,i){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=i)}function Qn(e){var t="",n=e.tagName.split(":");for(var i in 0<n.length&&(t=n[0],t=ei.has(t)?ei.get(t):""),t=document.createElementNS(t,e.tagName),e.attributes)t.setAttribute(i,e.attributes[i]);for(e=d(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,n="string"==typeof i?new Text(i):Qn(i),t.appendChild(n);return t}function Zn(e){if(!e)return null;var t={tagName:e.tagName,attributes:Tn(e.attributes),children:[],parent:null};e=d(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,"string"===typeof n||(n=Zn(n),n.parent=t),t.children.push(n);return t}var Jn=new Map,ei=new Map;function ti(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new sn,this.position=null,this.positionAlign=ui,this.size=0,this.textAlign=ci,this.direction=fi,this.writingMode=gi,this.lineInterpretation=mi,this.line=null,this.lineHeight="",this.lineAlign=yi,this.displayAlign=hi,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=_i,this.fontStyle=Si,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Wc:32,rows:15}}function ni(e,t){return e=new ti(e,t,""),e.lineBreak=!0,e}function ii(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!dn(e.nestedCues,t.nestedCues,ii))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!dn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function ri(e,t){t=void 0===t?new Map:t;var n=e.payload;if(n.includes("<")){0===t.size&&si(t);var i=n;n=[];for(var r=-1,s=0;s<i.length;s++)"<"===i[s]?r=s+1:">"===i[s]&&0<r&&(r=i.substr(r,s-r),r.match(Ii)&&n.push(r),r=-1);for(n=d(n),s=n.next();!s.done;s=n.next())s=s.value,i=i.replace("<"+s+">",'<div time="'+s+'">'),i+="</div>";e:{s=i,r=[];var a=-1;n="",i=!1;for(var o=0;o<s.length;o++)if("/"===s[o]){var l=s.indexOf(">",o);if(-1===l){n=s;break e}if((l=s.substring(o+1,l))&&"v"==l){i=!0;var u=null;if(r.length&&(u=r[r.length-1]),u){if(u===l)n+="/"+l+">";else{if(!u.startsWith("v")){n+=s[o];continue}n+="/"+u+">"}o+=l.length+1}else n+=s[o]}else n+=s[o]}else"<"===s[o]?(a=o+1,"v"!=s[a]&&(a=-1)):">"===s[o]&&0<a&&(r.push(s.substr(a,o-a)),a=-1),n+=s[o];for(s=d(r),r=s.next();!r.done;r=s.next())r=r.value,a=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+a+">"),n=n.replace("</"+r+">","</"+a+">"),i||(n+="</"+a+">")}n=ai(n),e.payload="";try{var c=Sn("<span>"+n+"</span>","span")}catch(h){}if(c)if(c=c.children,1!=c.length||c[0].tagName)for(c=d(c),n=c.next();!n.done;n=c.next())oi(n.value,e,t);else e.payload=Ye(n);else e.payload=Ye(n)}else e.payload=Ye(n)}function si(e){for(var t=d(Object.entries(bi)),n=t.next();!n.done;n=t.next()){var i=d(n.value);n=i.next().value,i=i.next().value;var r=new ti(0,0,"");r.color=i,e.set("."+n,r)}for(t=d(Object.entries(Ti)),n=t.next();!n.done;n=t.next())i=d(n.value),n=i.next().value,i=i.next().value,r=new ti(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function ai(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}function oi(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new sn,i.position=null,i.size=0,i.textAlign=ci,e.tagName)for(var r=d(e.tagName.split(/(?=[ .])+/g)),s=r.next();!s.done;s=r.next()){var a=s=s.value;if(a.startsWith(".voice-")){var o=a.split("-").pop();a='v[voice="'+o+'"]',n.has(a)||(a="v[voice="+o+"]")}switch(n.has(a)&&(o=i,a=n.get(a))&&(o.backgroundColor=li(a.backgroundColor,o.backgroundColor),o.color=li(a.color,o.color),o.fontFamily=li(a.fontFamily,o.fontFamily),o.fontSize=li(a.fontSize,o.fontSize),o.textShadow=li(a.textShadow,o.textShadow),o.fontWeight=a.fontWeight,o.fontStyle=a.fontStyle,o.opacity=a.opacity,o.rubyTag=a.rubyTag,o.textCombineUpright=a.textCombineUpright,o.wrapLine=a.wrapLine),s){case"br":return i=ni(i.startTime,i.endTime),void t.nestedCues.push(i);case"b":i.fontWeight=wi;break;case"i":i.fontStyle=Ei;break;case"u":i.textDecoration.push(Ci);break;case"font":(s=e.attributes.color)&&(i.color=s);break;case"div":if(s=e.attributes.time,!s)break;(s=yn(s))&&(i.startTime=s);break;case"ruby":case"rp":case"rt":i.rubyTag=s}}if(r=e.children,Cn(e)||1==r.length&&Cn(r[0]))for(n=kn(e).split("\n"),e=!0,n=d(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=ni(i.startTime,i.endTime),t.nestedCues.push(e)),0<r.length&&(e=i.clone(),e.payload=Ye(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=d(r),e=t.next();!e.done;e=t.next())oi(e.value,i,n)}function li(e,t){return e&&0<e.length?e:t}ti.prototype.clone=function(){var e,t=new ti(0,0,"");for(e in this)t[e]=this[e],Array.isArray(t[e])&&(t[e]=t[e].slice());return t},X("shaka.text.Cue",ti),ti.parseCuePayload=ri,ti.equal=ii,ti.prototype.clone=ti.prototype.clone;var ui="auto";ti.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:ui};var ci="center",di={LEFT:"left",RIGHT:"right",CENTER:ci,START:"start",END:"end"};ti.textAlign=di;var hi="after",pi={BEFORE:"before",CENTER:"center",AFTER:hi};ti.displayAlign=pi;var fi="ltr";ti.direction={HORIZONTAL_LEFT_TO_RIGHT:fi,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var gi="horizontal-tb";ti.writingMode={HORIZONTAL_TOP_TO_BOTTOM:gi,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var mi=0;ti.lineInterpretation={LINE_NUMBER:mi,PERCENTAGE:1};var yi="start",vi={CENTER:"center",START:yi,END:"end"};ti.lineAlign=vi;var bi={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};ti.defaultTextColor=bi;var Ti={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};ti.defaultTextBackgroundColor=Ti;var _i=400,wi=700;ti.fontWeight={NORMAL:_i,BOLD:wi};var Si="normal",Ei="italic",Ai={NORMAL:Si,ITALIC:Ei,OBLIQUE:"oblique"};ti.fontStyle=Ai;var Ci="underline";ti.textDecoration={UNDERLINE:Ci,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Ii=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function xi(){}function ki(e,t,n){Di.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,Pf:t})}function Mi(e,t){for(var n=e.toLowerCase().split(";")[0],i=d([Li,Ni,Oi,Ri]),r=i.next();!r.done;r=i.next())if(r=Di.get(n+"-"+r.value)){var s=r.Pf(),a=s.isSupported(e,t);if(s.destroy(),a)return r.Pf}return null}xi.prototype.destroy=function(){},X("shaka.transmuxer.TransmuxerEngine",xi),xi.findTransmuxer=Mi,xi.unregisterTransmuxer=function(e,t){Di.delete(e.toLowerCase().split(";")[0]+"-"+t)},xi.registerTransmuxer=ki,xi.prototype.destroy=xi.prototype.destroy;var Di=new Map,Ri=1,Oi=2,Ni=3,Li=4;function Pi(){}function Ui(e,t){var n=e;return t&&!Xi.includes(e)&&(n+='; codecs="'+t+'"'),n}function Bi(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Fi(e,t,n){var i=Ui(e,t);return t=Bi(e,t),Mi(t)?(e=Mi(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?i.replace("video","audio"):i,n}function ji(e){return e.split(";")[0].split("/")[1]}function Vi(e){var t=Wi(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:case"ac3"===e:case"ac-3"===e:return"ac-3";case"mp4a"===e&&"a6"===t:case"eac3"===e:case"ec-3"===e:return"ec-3";case"ac-4"===e:return"ac-4";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"vp09"===e:case"vp9"===e:return"vp9";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function Hi(e){var t=[];e=d(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Wi(n.value),t.push(n[0]);return t.sort().join(",")}function zi(e){return e.split(";")[0]}function Gi(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function qi(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function Wi(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}xi.PluginPriority={FALLBACK:Ri,PREFERRED_SECONDARY:Oi,PREFERRED:Ni,APPLICATION:Li},X("shaka.util.MimeUtils",Pi),Pi.getFullTypeWithAllCodecs=Bi,Pi.getFullType=Ui,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var Xi=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ki(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.D="",this.B=function(){},this.s=new Map}function Yi(e,t){ir.set(e,t)}function $i(e){return ir.get(e)}function Qi(e){return!!ir.has(e)||("application/cea-608"==e||"application/cea-708"==e)&&!!rn}function Zi(e,t,n,i,r){var s,a,o,l,u,c,h;return U(function(p){if(1==p.g)return S(p,Promise.resolve(),2);if(!e.i||!e.j)return p.return();if(null==n||null==i)return e.i.parseInit(De(t)),p.return();for(s=e.C?n:e.u,a={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:s},o=e.i.parseMedia(De(t),a,r,[]),l=d(o),u=l.next();!u.done;u=l.next())c=u.value,e.B(c,r||null,a);h=o.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(h),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),E(p)})}function Ji(e,t,n){e.l=t,e.m=n}function er(e,t,n){if(e.D=t,t=e.s.get(t))for(var i=d(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(e){return e.endTime<=n}))&&e.j.append(r)}function tr(e,t,n){t.startTime+=n,t.endTime+=n,t=d(t.nestedCues);for(var i=t.next();!i.done;i=t.next())tr(e,i.value,n)}function nr(e,t,n,i,r){var s=n+" "+i,a=new Map;t=d(t);for(var o=t.next();!o.done;o=t.next()){var l=o.value;o=l.stream,l=l.cue,a.has(o)||a.set(o,new Map),a.get(o).has(s)||a.get(o).set(s,[]),tr(e,l,r),l.startTime>=e.l&&l.startTime<e.m&&(a.get(o).get(s).push(l),o==e.D&&e.j.append([l]))}for(r=d(a.keys()),s=r.next();!s.done;s=r.next())for(s=s.value,e.s.has(s)||e.s.set(s,new Map),t=d(a.get(s).keys()),o=t.next();!o.done;o=t.next())o=o.value,l=a.get(s).get(o),e.s.get(s).set(o,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}Ki.prototype.destroy=function(){return this.j=this.i=null,this.s.clear(),Promise.resolve()},Ki.prototype.remove=function(e,t){var n=this;return U(function(i){if(1==i.g)return S(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),E(i)})},X("shaka.text.TextEngine",Ki),Ki.prototype.destroy=Ki.prototype.destroy,Ki.findParser=$i,Ki.unregisterParser=function(e){ir.delete(e)},Ki.registerParser=Yi;var ir=new Map;function rr(e){this.h=e,this.g=null}function sr(e){this.h=e,this.g=null}function ar(e,t){return e.concat(t)}function or(){}function lr(e){return null!=e}function ur(e,t){return Promise.race([t,new Promise(function(t,n){new sr(n).X(e)})])}function cr(){}function dr(e,t,n,i,r){function s(e){var t=String(e.width||"")+String(e.height||"")+String(Math.round(e.frameRate||0))+(e.hdr||"")+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}function a(e){var t=e.language+(e.channelsCount||0)+(e.audioSamplingRate||0)+e.roles.join(",")+e.label+e.groupId+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}if(r.length){var o=e.textStreams;r=d(r);for(var l=r.next(),u={};!l.done;u={ji:void 0},l=r.next())if(u.ji=l.value,l=o.filter(function(e){return function(t){return!(!t.codecs.startsWith(e.ji)&&!t.mimeType.startsWith(e.ji))}}(u)),l.length){o=l;break}e.textStreams=o}if(o=e.variants,(t.length||n.length)&&(o=hr(o,t,n)),i.length){for(t=new se,n=d(o),o=n.next();!o.done;o=n.next())o=o.value,t.push(String(o.video.width||0),o);var c=[];t.forEach(function(e,t){e=0;var n=[];t=d(t);for(var r=t.next(),s={};!r.done;s={og:void 0},r=t.next())s.og=r.value,r=i.filter(function(e){return function(t){return e.og.decodingInfos[0][t]}}(s)).length,r>e?(e=r,n=[s.og]):r==e&&n.push(s.og);c.push.apply(c,h(n))}),o=c}for(n=new Set,t=new Set,o=d(o),r=o.next();!r.done;r=o.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);o=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var p=[];for(n=new Map,o=d(o),r=o.next();!r.done;r=o.next()){if(r=r.value,l=a(r),u=n.get(l)||[],u.length){var f=u[u.length-1],g=Vi(f.codecs),m=Vi(r.codecs);g!=m||r.bandwidth&&f.bandwidth&&!(r.bandwidth>f.bandwidth)||(u.push(r),p.push(r.id))}else u.push(r),p.push(r.id);n.set(l,u)}var y={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};o=Array.from(t).sort(function(e,t){if(!e.bandwidth||!t.bandwidth||e.bandwidth==t.bandwidth){if(e.codecs&&t.codecs&&e.codecs!=t.codecs&&e.width==t.width){var n=Vi(e.codecs),i=Vi(t.codecs);if(n!=i)return(y[n]||1)-(y[i]||1)}return e.width-t.width}return e.bandwidth-t.bandwidth}),t=Xt();var v=[];for(n=new Map,o=d(o),r=o.next();!r.done;r=o.next()){if(r=r.value,l=s(r),u=n.get(l)||[],u.length){if(f=u[u.length-1],!t&&(g=Vi(f.codecs),m=Vi(r.codecs),g!==m))continue;g=Vi(f.codecs),m=Vi(r.codecs),g!=m||r.bandwidth&&f.bandwidth&&!(r.bandwidth>f.bandwidth)||(u.push(r),v.push(r.id))}else u.push(r),v.push(r.id);n.set(l,u)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!p.includes(t.id)||e&&!v.includes(e.id))})}function hr(e,t,n){t=d(t);for(var i=t.next(),r={};!i.done;r={videoCodec:void 0},i=t.next())if(r.videoCodec=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.videoCodec)}}(r)),i.length){e=i;break}for(n=d(n),t=n.next(),i={};!t.done;i={audioCodec:void 0},t=n.next())if(i.audioCodec=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.audioCodec)}}(i)),t.length){e=t;break}return e}function pr(e,t,n){e.variants=e.variants.filter(function(e){return fr(e,t,n)})}function fr(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;if(r&&r.width&&r.height){var s=r.width,a=r.height;if(a>s&&(a=d([a,s]),s=a.next().value,a=a.next().value),!i(s,t.minWidth,Math.min(t.maxWidth,n.width))||!i(a,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function gr(e,t,n,i){return n=void 0===n?[]:n,i=void 0===i?{}:i,U(function(r){return 1==r.g?S(r,mr(e,t,0<t.offlineSessionIds.length,n,i),2):(Ar(t),S(r,Cr(t),0))})}function mr(e,t,n,i,r){var s,a;return U(function(o){if(1==o.g)return Be().Jj()&&yr(t.variants),S(o,_r(t.variants,n,!1,i),2);s=null,e&&(a=e.g)&&(s=a.keySystem),t.variants=t.variants.filter(function(e){var t=vr(e,s,r);if(!t){var n=[];e.audio&&n.push(Fr(e.audio)),e.video&&n.push(Fr(e.video))}return t}),E(o)})}function yr(e){var t=(new Map).set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=d(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=d(n),e=n.next();!e.done;e=n.next()){e=e.value,i=d(t);for(var r=i.next();!r.done;r=i.next()){var s=d(r.value);if(r=s.next().value,s=s.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,s);break}}}}function vr(e,t,n){if(!e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&(n[e.keySystem]||e.keySystem)!=t)}))return!1;var i=Be(),r="Xbox"===i.Rb();i="MOBILE"===i.Ja()&&"GECKO"===i.Ia();var s=e.video,a=s&&s.width||0,o=s&&s.height||0;return!(r&&s&&(1920<a||1080<o)&&(s.codecs.includes("avc1.")||s.codecs.includes("avc3."))||(r=s&&s.dependencyStream)&&!qt(r))&&(e=e.audio,!(i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function br(e,t){var n,i,r,s,a,o,l;return U(function(u){if(1==u.g){for(n=function(e,t){if(e){var n=Tn(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},i=null,r=[],s=d(t),a=s.next(),o={};!a.done;o={cache:void 0,bf:void 0},a=s.next())l=a.value,o.bf=_n(l),o.cache=Vr,o.cache.has(o.bf)?i=n(i,o.cache.get(o.bf)):r.push(Tr(l).then(function(e){return function(t){var r=null;t=d(t||[]);for(var s=t.next();!s.done;s=t.next())r=n(r,s.value);r&&(e.cache.set(e.bf,r),i=n(i,r))}}(o)));return S(u,Promise.all(r),2)}i&&e.decodingInfos.push(i),E(u)})}function Tr(e){var t=[""];e.video&&(t=Gi(e.video.contentType).split(","));var n=[""];e.audio&&(n=Gi(e.audio.contentType).split(","));var i=[];t=d(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var s=d(n),a=s.next(),o={};!a.done;o={Xc:void 0},a=s.next())a=a.value,o.Xc=bn(e),e.video&&(o.Xc.video.contentType=Ui(zi(o.Xc.video.contentType),r)),e.audio&&(o.Xc.audio.contentType=Ui(zi(o.Xc.audio.contentType),a)),i.push(new Promise(function(e){return function(t,n){("MOBILE"==Be().Ja()?ur(5,navigator.mediaCapabilities.decodingInfo(e.Xc)):navigator.mediaCapabilities.decodingInfo(e.Xc)).then(function(e){t(e)}).catch(n)}}(o)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function _r(e,t,n,i){var r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w;return U(function(E){switch(E.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return E.return();r=d(i),s=r.next(),a={};case 2:if(s.done){E.A(4);break}a.nj=s.value,o=!1,l=d(e),u=l.next();case 5:if(u.done){E.A(7);break}c=u.value,h=wr(c,t,n).filter(function(e){return function(t){return t=t[0],(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.nj}}(a)),p=d(h),f=p.next();case 8:if(f.done){E.A(10);break}return g=f.value,S(E,br(c,g),9);case 9:f=p.next(),E.A(8);break;case 10:c.decodingInfos.length&&(o=!0),u=l.next(),E.A(5);break;case 7:if(o)return E.return();a={nj:void 0},s=r.next(),E.A(2);break;case 4:m=d(e),y=m.next();case 12:if(y.done){E.A(0);break}v=y.value,b=wr(v,t,n).filter(function(e){return e=e[0],e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem,!e||!i.includes(e)}),T=d(b),_=T.next();case 15:if(_.done){y=m.next(),E.A(12);break}return w=_.value,S(E,br(v,w),16);case 16:_=T.next(),E.A(15)}})}function wr(e,t,n){var i=e.audio,r=e.video,s=[],a=[];if(r)for(var o=d(r.fullMimeTypes),l=o.next();!l.done;l=o.next()){l=l.value;var u=Gi(l);if(u.includes(",")&&!i){var c=u.split(","),h=zi(l);u=ot("video",c),c=ot("audio",c),c=Sr(c,h),h=Fi(h,c,"audio"),a.push({contentType:h,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(u=Er(u),l={contentType:Fi(zi(l),u,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":l.transferFunction="srgb";break;case"PQ":l.transferFunction="pq";break;case"HLG":l.transferFunction="hlg"}r.colorGamut&&(l.colorGamut=r.colorGamut),s.push(l)}if(i)for(o=d(i.fullMimeTypes),l=o.next();!l.done;l=o.next())u=l.value,l=zi(u),u=Sr(Gi(u),l),l=Fi(l,u,"audio"),a.push({contentType:l,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(o=[],0==s.length&&s.push(null),0==a.length&&a.push(null),s=d(s),l=s.next();!l.done;l=s.next())for(l=l.value,u=d(a),h=u.next();!h.done;h=u.next())h=h.value,c={type:n?"file":"media-source"},l&&(c.video=l),h&&(c.audio=h),o.push(c);if(a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!a.length)return[o];for(e=[],n=new Map,a=d(a),s=a.next();!s.done;s=a.next())s=s.value,n.get(s.keySystem)||n.set(s.keySystem,[]),n.get(s.keySystem).push(s);for(a=t?"required":"optional",t=t?["persistent-license"]:["temporary"],s=d(n.keys()),l=s.next();!l.done;l=s.next()){for(l=l.value,h=n.get(l),u=new Map,h=d(h),c=h.next();!c.done;c=h.next()){c=c.value;var p=c.videoRobustness+","+c.audioRobustness;u.get(p)||u.set(p,[]),u.get(p).push(c)}for(u=d(u.values()),h=u.next();!h.done;h=u.next()){h=h.value,c=[],p=d(o);for(var f=p.next();!f.done;f=p.next()){f=Object.assign({},f.value);for(var g={keySystem:l,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t},m=d(h),y=m.next();!y.done;y=m.next()){if(y=y.value,y.initData&&y.initData.length){for(var v=new Set,b=d(y.initData),T=b.next();!T.done;T=b.next())v.add(T.value.initDataType);g.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),y.persistentStateRequired&&(g.persistentState="required"),y.sessionType&&(g.sessionTypes=[y.sessionType]),i&&(g.audio?(y.encryptionScheme&&(g.audio.encryptionScheme=g.audio.encryptionScheme||y.encryptionScheme),g.audio.robustness=g.audio.robustness||y.audioRobustness):(g.audio={robustness:y.audioRobustness},y.encryptionScheme&&(g.audio.encryptionScheme=y.encryptionScheme)),""==g.audio.robustness&&delete g.audio.robustness),r&&(g.video?(y.encryptionScheme&&(g.video.encryptionScheme=g.video.encryptionScheme||y.encryptionScheme),g.video.robustness=g.video.robustness||y.videoRobustness):(g.video={robustness:y.videoRobustness},y.encryptionScheme&&(g.video.encryptionScheme=y.encryptionScheme)),""==g.video.robustness&&delete g.video.robustness)}f.keySystemConfiguration=g,c.push(f)}e.push(c)}}return e}function Sr(e,t){var n=Be();return"flac"==e.toLowerCase()?"WEBKIT"!=n.Ia()?"flac":"fLaC":"opus"===e.toLowerCase()?"WEBKIT"!=n.Ia()?"opus":"mp4"==ji(t)?"Opus":"opus":"ac-3"==e.toLowerCase()&&n.we()?"ec-3":e}function Er(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Ar(e){e.textStreams=e.textStreams.filter(function(e){return e=Ui(e.mimeType,e.codecs),Qi(e)})}function Cr(e){var t,n,i,r,s,a,o;return U(function(l){switch(l.g){case 1:t=[],n=d(e.imageStreams),i=n.next();case 2:if(i.done){l.A(4);break}if(r=i.value,s=r.mimeType,"application/mp4"==s&&"mjpg"==r.codecs&&(s="image/jpg"),zr.has(s)){l.A(5);break}if(a=Gr.get(s),!a){zr.set(s,!1),l.A(5);break}return S(l,Ir(a),7);case 7:o=l.h,zr.set(s,o);case 5:zr.get(s)&&t.push(r),i=n.next(),l.A(2);break;case 4:e.imageStreams=t,E(l)}})}function Ir(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}function xr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,s=t?t.codecs:null,a=n?n.codecs:null,o=t?t.groupId:null,l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var c=new Set;if(t)for(var h=d(t.roles),p=h.next();!p.done;p=h.next())c.add(p.value);if(n)for(h=d(n.roles),p=h.next();!p.done;p=h.next())c.add(p.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:l,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:s,videoCodec:a,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec),a.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,n=a.split(",");try{e.videoCodec=ot("video",n),e.audioCodec=ot("audio",n)}catch(f){}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function kr(e){return{id:e.id,active:!1,type:ct,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Mr(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=rc(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:r||null,originalImageId:e.originalId}}function Dr(e){return e.__shaka_id||(e.__shaka_id=Hr++),e.__shaka_id}function Rr(e){var t={id:Dr(e),active:"disabled"!=e.mode,type:ct,bandwidth:0,language:vt(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:"forced"==e.kind,originalTextId:e.id,originalLanguage:e.language};return"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function Or(e,t){var n=e?e.language:null;if(n={id:Dr(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:vt(n||"und"),label:e?e.label:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!!e&&"main"==e.kind,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+","+n.videoCodec:n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function Nr(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Lr(e){return e.filter(function(e){return Nr(e)})}function Pr(e,t,n,i){var r=e,s=e.filter(function(e){return e.primary});s.length&&(r=s);var a=r.length?r[0].language:"";if(r=r.filter(function(e){return e.language==a}),t){var o=St(vt(t),e.map(function(e){return e.language}));o&&(r=e.filter(function(e){return vt(e.language)==o}))}if(r=r.filter(function(e){return e.forced==i}),n){if(e=Ur(r,n),e.length)return e}else if(e=r.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=r.map(function(e){return e.roles}).reduce(ar,[]),e.length?Ur(r,e[0]):r}function Ur(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Br(e,t){t.length&&(t=t.filter(function(t){return Vi(e.codecs)==Vi(t.codecs)}).sort(function(e,t){return e.bandwidth&&t.bandwidth&&e.bandwidth!=t.bandwidth?e.bandwidth-t.bandwidth:(e.width||0)-(t.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(t){return e.width==t.width&&e.height==t.height})))&&(e.trickModeVideo=t)}function Fr(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function jr(e,t,n){if(0==n.autoShowText)return!1;if(1==n.autoShowText)return!0;var i=vt(n.preferredTextLanguage);return t=vt(t.language),2==n.autoShowText?gt(t,i):3==n.autoShowText?!!e&&(e=vt(e.language),gt(t,i)&&!gt(e,t)):(J("Invalid autoShowText setting!"),!1)}rr.prototype.X=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout(function(){i&&n.h()},1e3*t),this},rr.prototype.stop=function(){this.g&&(this.g(),this.g=null)},sr.prototype.Ka=function(){return this.stop(),this.h(),this},sr.prototype.X=function(e){var t=this;return this.stop(),this.g=new rr(function(){t.h()}).X(e),this},sr.prototype.ya=function(e){var t=this;return this.stop(),this.g=new rr(function(){t.g.X(e),t.h()}).X(e),this},sr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},X("shaka.util.Timer",sr),sr.prototype.stop=sr.prototype.stop,sr.prototype.tickEvery=sr.prototype.ya,sr.prototype.tickAfter=sr.prototype.X,sr.prototype.tickNow=sr.prototype.Ka,X("shaka.util.StreamUtils",cr),cr.meetsRestrictions=fr;var Vr=new Map,Hr=0,zr=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Gr=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function qr(){var t=this;this.G=null,this.l=!1,this.s=new Dt,this.j=new Rt,navigator.connection&&navigator.connection.addEventListener&&this.j.o(navigator.connection,"change",function(){if(t.l&&t.g.useNetworkInformation){t.s=new Dt,t.g&&t.s.configure(t.g.advanced);var e=t.chooseVariant();e&&navigator.onLine&&t.G(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.m=this.g=this.u=null,this.B=new sr(function(){if(t.l&&(t.g.restrictToElementSize||t.g.restrictToScreenSize)){var e=t.chooseVariant();e&&t.G(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.C=e,"documentPictureInPicture"in e&&this.j.o(e.documentPictureInPicture,"enter",function(){t.C=e.documentPictureInPicture.window,t.B&&t.B.Ka(),t.j.qa(t.C,"pagehide",function(){t.C=e,t.B&&t.B.Ka()})}),this.D=this.i=null}function Wr(e){if(!e.I){var t=e.s;if(!(t.g>=t.i))return;e.I=!0,e.u-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.u<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Xr(e,t,n,i,r){if(e.D){var s=e.D.Qi();s&&(n=n.filter(function(e){return!e.bandwidth||!s||e.bandwidth<=s}))}return t&&(n=n.filter(function(e){return fr(e,t,{width:r,height:i})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}function Kr(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}i=qr.prototype,i.stop=function(){this.G=null,this.l=!1,this.F=[],this.H=1,this.m=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.B.stop(),this.D=this.i=null},i.release=function(){this.j.release(),this.B=null},i.init=function(e){this.G=e},i.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio;e=this.C.screen.height*n,t=this.C.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio;var i=this.m.clientHeight,r=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(i=this.i.height,r=this.i.width),e=Math.min(e,i*n),t=Math.min(t,r*n)}if(n=this.F.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)}),n.length||(n=this.F),i=n,n.length!=this.F.length&&(i=this.F.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),n=Xr(this,this.g.restrictions,i,1/0,1/0),1/0!=e||1/0!=t){for(n=Kr(n),n=d(n),r=n.next();!r.done;r=n.next())if(r=r.value,r.height>=e&&r.width>=t){e=r.height,t=r.width;break}n=Xr(this,this.g.restrictions,i,e,t)}for(e=this.getBandwidthEstimate(),i.length&&!n.length&&(n=Xr(this,null,i,1/0,1/0),n=[n[0]]),t=n[0]||null,i=0;i<n.length;i++){r=n[i];for(var s=isNaN(this.H)?1:Math.abs(this.H),a=s*r.bandwidth/this.g.bandwidthDowngradeTarget,o={bandwidth:1/0},l=i+1;l<n.length;l++)if(r.bandwidth!=n[l].bandwidth){o=n[l];break}s=s*o.bandwidth/this.g.bandwidthUpgradeTarget,e>=a&&e<=s&&(t.bandwidth!=r.bandwidth||t.bandwidth==r.bandwidth&&t.video&&r.video&&(t.video.width<r.video.width||t.video.height<r.video.height))&&(t=r)}return this.u=Date.now(),t},i.enable=function(){this.l=!0},i.disable=function(){this.l=!1},i.segmentDownloaded=function(e,t,n,i){var r=e;this.g.removeLatencyFromFirstPacketTime&&i&&1===i.packetNumber&&i.timeToFirstByte&&(r=e-i.timeToFirstByte),r<this.g.cacheLoadThreshold||(this.s.sample(r,t),n&&null!=this.u&&this.l&&Wr(this))},i.trySuggestStreams=function(){null!=this.u&&this.l&&Wr(this)},i.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.s.getBandwidthEstimate(e),this.D?this.D.getBandwidthEstimate(e):e)},i.setVariants=function(e){this.F=e},i.playbackRateChanged=function(e){this.H=e},i.setMediaElement=function(t){function n(){i.B.X(Yr)}var i=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(n),this.h.observe(this.m)),this.j.o(t,"enterpictureinpicture",function(e){e.pictureInPictureWindow&&(i.i=e.pictureInPictureWindow,i.j.o(i.i,"resize",n))}),this.j.o(t,"leavepictureinpicture",function(){i.i&&i.j.Da(i.i,"resize",n),i.i=null})},i.setCmsdManager=function(e){this.D=e},i.configure=function(e){this.g=e,this.s&&this.g&&this.s.configure(this.g.advanced)},X("shaka.abr.SimpleAbrManager",qr),qr.prototype.configure=qr.prototype.configure,qr.prototype.setCmsdManager=qr.prototype.setCmsdManager,qr.prototype.setMediaElement=qr.prototype.setMediaElement,qr.prototype.playbackRateChanged=qr.prototype.playbackRateChanged,qr.prototype.setVariants=qr.prototype.setVariants,qr.prototype.getBandwidthEstimate=qr.prototype.getBandwidthEstimate,qr.prototype.trySuggestStreams=qr.prototype.trySuggestStreams,qr.prototype.segmentDownloaded=qr.prototype.segmentDownloaded,qr.prototype.disable=qr.prototype.disable,qr.prototype.enable=qr.prototype.enable,qr.prototype.chooseVariant=qr.prototype.chooseVariant,qr.prototype.init=qr.prototype.init,qr.prototype.release=qr.prototype.release,qr.prototype.stop=qr.prototype.stop;var Yr=1;function $r(e,t){if(e===t||!e.length||!t.length)return!0;e=d(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,es(n))return!0;for(var i=d(t),r=i.next();!r.done;r=i.next())if(r=r.value,n.keySystem===r.keySystem||es(r))return!0}return!1}function Qr(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=d(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=d(t),s=r.next();!s.done;s=r.next()){if(s=s.value,i.keySystem==s.keySystem){r=new Map;for(var a=d((i.initData||[]).concat(s.initData||[])),o=a.next();!o.done;o=a.next())o=o.value,r.set(o.keyId,o);r=Array.from(r.values()),a=i.keyIds&&s.keyIds?new Set([].concat(h(i.keyIds),h(s.keyIds))):i.keyIds||s.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||s.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||s.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||s.persistentStateRequired,videoRobustness:i.videoRobustness||s.videoRobustness,audioRobustness:i.audioRobustness||s.audioRobustness,serverCertificate:i.serverCertificate||s.serverCertificate,serverCertificateUri:i.serverCertificateUri||s.serverCertificateUri,initData:r,keyIds:a});break}es(i)?n.push(i):es(s)&&n.push(s)}}return n}function Zr(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Jr(e){return!!e&&!!e.match(/^com\.apple\.fps/)}function es(e){return!!(e=e.licenseServerUri)&&e.startsWith("data:application/json;base64,")}X("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});var ts=new Ue(function(){return Me(new Uint8Array([0]))}),ns=new Map;function is(e,t){var n=ss();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.s=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function rs(e){var t,n;return U(function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new Le(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.s),S(i,new Promise(function(e){new sr(e).X(n/1e3)}),2))}e.h*=e.m,E(i)})}function ss(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function as(){var e,t,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}function os(e,t){this.promise=e,this.i=t,this.g=null}function ls(e){return new os(Promise.reject(e),function(){return Promise.resolve()})}function us(){var e=Promise.reject(new Le(2,7,7001));return e.catch(function(){}),new os(e,function(){return Promise.resolve()})}function cs(e){return new os(Promise.resolve(e),function(){return Promise.resolve()})}function ds(e){return new os(e,function(){return e.catch(function(){})})}function hs(e){return new os(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function ps(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}function fs(){this.g=[]}function gs(e,t){e.g.push(t.finally(function(){un(e.g,t)}))}function ms(e,t,n,i,r,s,a){ae.call(this),this.i=null,this.j=!1,this.u=new fs,this.g=new Set,this.h=new Set,this.s=e||null,this.m=t||null,this.B=n||null,this.C=i||null,this.D=r||null,this.G=s||null,this.F=a||null,this.l=new Map}function ys(e,t,n,i){i=void 0!==i&&i,n=n||Is;var r=xs.get(e);(!r||n>=r.priority)&&xs.set(e,{priority:n,Pf:t,Pl:i})}function vs(e,t){for(var n=d(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=d(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}function bs(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Ts(e,t,n,i){function r(e){s=s.ab(function(){return n.body&&(n.body=Me(n.body)),e(t,n,i)})}var s=cs(void 0);e.D&&r(e.D),e=d(e.g);for(var a=e.next();!a.done;a=e.next())r(a.value);return s.ab(void 0,function(e){if(e instanceof Le&&7001==e.code)throw e;throw new Le(2,1,1006,e)})}function _s(e,t,n,i,r,s,a,o){e.i.forceHTTP&&(n.uris[s]=n.uris[s].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[s]=n.uris[s].replace("http://","https://")),0<s&&e.G&&e.G(t,i,n.uris[s],n.uris[s-1]);var l=new he(n.uris[s]),u=l.hc,c=!1;u||(u=location.protocol,u=u.slice(0,-1),pe(l,u),n.uris[s]=l.toString()),u=u.toLowerCase();var d=(u=xs.get(u))?u.Pf:null;if(!d)return ls(new Le(2,1,1e3,l));var h=u.Pl;(l=e.l.get(l.Gb))&&(n.headers["common-access-token"]=l);var p,f=null,g=null,m=!1,y=!1;return ds(rs(r)).ab(function(){if(e.j)return us();p=Date.now();var r=0;n.requestStartTime=Date.now();var a=d(n.uris[s],n,t,function(s,a,l){f&&f.stop(),g&&g.X(u/1e3),e.s&&t==Cs&&(r++,n.packetNumber=r,e.s(s,a,Ss(i),n,i),c=!0,o.g=l)},function(i){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(i,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!h)return a;var l=n.retryParameters.connectionTimeout;l&&(f=new sr(function(){m=!0,a.abort()}),f.X(l/1e3));var u=n.retryParameters.stallTimeout;return u&&(g=new sr(function(){m=!0,a.abort()})),a}).ab(function(i){f&&f.stop(),g&&g.stop(),void 0==i.timeMs&&(i.timeMs=Date.now()-p);var r=i.headers["common-access-token"];if(r){var s=new he(i.uri);e.l.set(s.Gb,r)}return r={response:i,ql:c},!y&&e.m&&e.m(i.headers,n,t),e.B&&e.B(n,i),r},function(l){if(f&&f.stop(),g&&g.stop(),e.C){var u=null,c=0;l instanceof Le&&(u=l,1001==l.code&&(c=l.data[1])),e.C(n,u,c,m)}if(e.j)return us();if(m&&(l=new Le(1,1,1003,n.uris[s],t)),l instanceof Le){if(7001==l.code)throw l;if(1010==l.code)throw a;if(1==l.severity){if(u=(new Map).set("error",l),u=new K("retry",u),u.cancelable=!0,e.dispatchEvent(u),u.defaultPrevented)throw l;return s=(s+1)%n.uris.length,_s(e,t,n,i,r,s,l,o)}}throw l})}function ws(e,t,n,i){var r=cs(void 0);e=d(e.h);for(var s=e.next(),a={};!s.done;a={uj:void 0},s=e.next())a.uj=s.value,r=r.ab(function(e){return function(){var r=n.response;return r.data&&(r.data=Me(r.data)),(0,e.uj)(t,r,i)}}(a));return r.ab(function(){return n},function(e){var t=2;if(e instanceof Le){if(7001==e.code)throw e;t=e.severity}throw new Le(t,1,1007,e)})}function Ss(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}function Es(){this.g=0}function As(e,t,n){os.call(this,e,t),this.h=n}as.prototype.resolve=function(){},as.prototype.reject=function(){},os.prototype.abort=function(){return this.g||(this.g=this.i()),this.g},os.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},os.prototype.ab=function(e,t){function n(n){return function(o){if(r.g&&n)s.reject(a);else{var l=n?e:t;l?i=ps(l,o,s):(n?s.resolve:s.reject)(o)}}}function i(){return s.reject(a),r.abort()}var r=this,s=new as;s.catch(function(){});var a=new Le(2,7,7001);return this.promise.then(n(!0),n(!1)),new os(s,function(){return i()})},l.Object.defineProperties(os.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return null!==this.g}}}),X("shaka.util.AbortableOperation",os),os.prototype.chain=os.prototype.ab,os.prototype["finally"]=os.prototype.finally,os.all=hs,os.prototype.abort=os.prototype.abort,os.notAbortable=ds,os.completed=cs,os.aborted=us,os.failed=ls,fs.prototype.destroy=function(){for(var e=[],t=d(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},b(ms,ae),i=ms.prototype,i.configure=function(e){this.i=e},i.Sl=function(e){this.g.add(e)},i.pm=function(e){this.g.delete(e)},i.hk=function(){this.g.clear()},i.Tl=function(e){this.h.add(e)},i.qm=function(e){this.h.delete(e)},i.ik=function(){this.h.clear()},i.Fi=function(){this.l.clear()},i.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),ae.prototype.release.call(this),this.u.destroy()},i.request=function(e,t,n){var i=this,r=new Es;if(this.j){var s=Promise.reject(new Le(2,7,7001));return s.catch(function(){}),new As(s,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?bn(t.retryParameters):ss(),t.uris=bn(t.uris),s=Ts(this,e,t,n);var a=s.ab(function(){return _s(i,e,t,n,new is(t.retryParameters,!1),0,null,r)}),o=a.ab(function(t){return ws(i,e,t,n)}),l=Date.now(),u=0;s.promise.then(function(){u=Date.now()-l},function(){});var c=0;a.promise.then(function(){c=Date.now()},function(){});var d=o.ab(function(r){var s=Date.now()-c,a=r.response;return a.timeMs+=u,a.timeMs+=s,r.ql||!i.s||a.fromCache||"HEAD"==t.method||e!=Cs||i.s(a.timeMs,a.data.byteLength,Ss(n),t,n),i.F&&i.F(e,a,n),a},function(e){throw e&&(e.severity=2),e});return s=new As(d.promise,function(){return d.abort()},r),gs(this.u,s),s},X("shaka.net.NetworkingEngine",ms),ms.prototype.request=ms.prototype.request,ms.prototype.destroy=ms.prototype.destroy,ms.makeRequest=bs,ms.defaultRetryParameters=function(){return ss()},ms.prototype.clearCommonAccessTokenMap=ms.prototype.Fi,ms.prototype.clearAllResponseFilters=ms.prototype.ik,ms.prototype.unregisterResponseFilter=ms.prototype.qm,ms.prototype.registerResponseFilter=ms.prototype.Tl,ms.prototype.clearAllRequestFilters=ms.prototype.hk,ms.prototype.unregisterRequestFilter=ms.prototype.pm,ms.prototype.registerRequestFilter=ms.prototype.Sl,ms.unregisterScheme=function(e){xs.delete(e)},ms.registerScheme=ys,ms.prototype.configure=ms.prototype.configure,ms.NumBytesRemainingClass=Es,b(As,os),ms.PendingRequest=As;var Cs=1;ms.RequestType={MANIFEST:0,SEGMENT:Cs,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},ms.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Is=3;ms.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Is};var xs=new Map;function ks(e){this.g=!1,this.h=new as,this.i=e}function Ms(e,t){if(e.g){if(t instanceof Le&&7003==t.code)throw t;throw new Le(2,7,7003,t)}}function Ds(e){for(var t=new Map,n=d(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Rs(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function Os(e,t){this.h=Oe(e),this.i=t==Ls,this.g=0}function Ns(){return new Le(2,3,3e3)}ks.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},i=Os.prototype,i.Oa=function(){return this.g<this.h.byteLength},i.Ua=function(){return this.g},i.getLength=function(){return this.h.byteLength},i.aa=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw Ns()}},i.Fa=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw Ns()}},i.W=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw Ns()}},i.Jh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw Ns()}},i.Ld=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw Ns()}if(2097151<t)throw new Le(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Xb=function(e){if(this.g+e>this.h.byteLength)throw Ns();var t=De(this.h,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.h.byteLength)throw Ns();this.g+=e},i.vj=function(e){if(this.g<e)throw Ns();this.g-=e},i.seek=function(e){if(0>e||e>this.h.byteLength)throw Ns();this.g=e},i.hd=function(){for(var e=this.g;this.Oa()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=De(this.h,e,this.g-e),this.g+=1,ze(e)},X("shaka.util.DataViewReader",Os),Os.prototype.readTerminatedString=Os.prototype.hd,Os.prototype.seek=Os.prototype.seek,Os.prototype.rewind=Os.prototype.vj,Os.prototype.skip=Os.prototype.skip,Os.prototype.readBytes=Os.prototype.Xb,Os.prototype.readUint64=Os.prototype.Ld,Os.prototype.readInt32=Os.prototype.Jh,Os.prototype.readUint32=Os.prototype.W,Os.prototype.readUint16=Os.prototype.Fa,Os.prototype.readUint8=Os.prototype.aa,Os.prototype.getLength=Os.prototype.getLength,Os.prototype.getPosition=Os.prototype.Ua,Os.prototype.hasMoreData=Os.prototype.Oa;var Ls=1;function Ps(){this.i=new Map,this.h=new Map,this.g=!1}function Us(e){for(var t=Gs(e);e.reader.Oa()&&!e.parser.g;)e.parser.Gd(e.start+t,e.reader,e.partialOkay)}function Bs(e){for(var t=Gs(e),n=e.reader.W(),i=0;i<n&&(e.parser.Gd(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function Fs(e){var t=Gs(e);for(e.reader.skip(78);e.reader.Oa()&&!e.parser.g;)e.parser.Gd(e.start+t,e.reader,e.partialOkay)}function js(e){var t=Gs(e);e.reader.skip(8);var n=e.reader.Fa();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.Oa()&&!e.parser.g;)e.parser.Gd(e.start+t,e.reader,e.partialOkay)}function Vs(e){return function(t){e(t.reader.Xb(t.reader.getLength()-t.reader.Ua()))}}function Hs(e){var t=0;e=d(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function zs(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Gs(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}Os.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Ls},i=Ps.prototype,i.box=function(e,t){return e=Hs(e),this.i.set(e,qs),this.h.set(e,t),this},i.V=function(e,t){return e=Hs(e),this.i.set(e,Ws),this.h.set(e,t),this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new Os(e,0),this.g=!1;e.Oa()&&!this.g;)this.Gd(0,e,t,n)},i.Gd=function(e,t,n,i){var r=t.Ua();if(i&&r+8>t.getLength())this.g=!0;else{var s=t.W(),a=t.W(),o=zs(a),l=!1;switch(s){case 0:s=t.getLength()-r;break;case 1:if(i&&t.Ua()+8>t.getLength())return void(this.g=!0);s=t.Ld(),l=!0}var u=this.h.get(a);if(u){var c=null,d=null;if(this.i.get(a)==Ws){if(i&&t.Ua()+4>t.getLength())return void(this.g=!0);d=t.W(),c=d>>>24,d&=16777215}a=r+s,n&&a>t.getLength()&&(a=t.getLength()),i&&a>t.getLength()?this.g=!0:(i=a-t.Ua(),t=0<i?t.Xb(i):new Uint8Array(0),t=new Os(t,0),u({name:o,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t,size:s,start:r+e,has64BitSize:l}))}else t.skip(Math.min(r+s-t.Ua(),t.getLength()-t.Ua()))}},X("shaka.util.Mp4Parser",Ps),Ps.headerSize=Gs,Ps.typeToString=zs,Ps.allData=Vs,Ps.audioSampleEntry=js,Ps.visualSampleEntry=Fs,Ps.sampleDescription=Bs,Ps.children=Us,Ps.prototype.parseNext=Ps.prototype.Gd,Ps.prototype.parse=Ps.prototype.parse,Ps.prototype.stop=Ps.prototype.stop,Ps.prototype.fullBox=Ps.prototype.V,Ps.prototype.box=Ps.prototype.box;var qs=0,Ws=1;function Xs(e){var t=this;this.g=[],this.h=[],this.data=[],(new Ps).box("moov",Us).box("moof",Us).V("pssh",function(e){if(!(1<e.version)){var n=De(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(nt(e.reader.Xb(16))),0<e.version){n=e.reader.W();for(var i=0;i<n;i++){var r=nt(e.reader.Xb(16));t.h.push(r)}}}}).parse(e)}function Ks(e,t,n,i){var r=e.length,s=t.length+16+r;0<i&&(s+=4+16*n.size);var a=new Uint8Array(s),o=Oe(a),l=0;if(o.setUint32(l,s),l+=4,o.setUint32(l,1886614376),l+=4,1>i?o.setUint32(l,0):o.setUint32(l,16777216),l+=4,a.set(t,l),l+=t.length,0<i)for(o.setUint32(l,n.size),l+=4,t=d(n),n=t.next();!n.done;n=t.next())n=tt(n.value),a.set(n,l),l+=n.length;return o.setUint32(l,r),a.set(e,l+4),a}function Ys(e){var t=this;this.D=e,this.j=this.B=null,this.ba=this.Z=!1,this.H=0,this.g=null,this.s=new Rt,this.i=new Map,this.P=[],this.C=new Map,this.J=!1,this.m=new as,this.h=null,this.u=function(n){2==n.severity&&t.m.reject(n),e.onError(n)},this.U=new Map,this.$=new Map,this.K=new sr(function(){return ba(t)}),this.N=!1,this.L=[],this.R=!1,this.I=new sr(function(){Ea(t)}),this.m.catch(function(){}),this.l=new ks(function(){return $s(t)}),this.Y=!1,this.F=this.G=null,this.O=function(){return!1}}function $s(e){return U(function(t){switch(t.g){case 1:return e.s.release(),e.s=null,e.m.reject(),e.I.stop(),e.I=null,e.K.stop(),e.K=null,S(t,wa(e),2);case 2:if(!e.j){t.A(3);break}return A(t,4),S(t,e.j.setMediaKeys(null),6);case 6:I(t,5);break;case 4:x(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.D=null,e.Y=!1,e.G=null,E(t)}})}function Qs(e,t,n){return e.ba=!0,e.C=new Map,e.N=n,ea(e,t,!1)}function Zs(e,t,n,i){i=void 0===i||i,e.C=new Map,n=d(n);for(var r=n.next();!r.done;r=n.next())e.C.set(r.value,{initData:null,initDataType:null});for(n=d(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.C.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.N=0<e.C.size,ea(e,t,i)}function Js(e,t,n,i,r,s){var a=new Map;return r={audioCapabilities:r,videoCapabilities:s,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],a.set(t,r),ua(e,a,[])}function ea(e,t,n){var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_;return U(function(w){if(1==w.g){for(Ma(e.h.clearKeys,t),i=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),r=Ds(e.h.servers),s=Ds(e.h.advanced||{}),!i&&n&&Ia(t,r),a=new WeakSet,o=d(t),l=o.next();!l.done;l=o.next())for(u=l.value,c=Sa(u),h=d(c),p=h.next();!p.done;p=h.next())f=p.value,a.has(f)||(a.add(f),ka(f,r,s,e.h.keySystemsMapping));for(g=function(t,n){var i=[];t=d(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var a,o=r[n]||s.has(r.keySystem)&&s.get(r.keySystem)[n]||"";if((a=""==o)&&(a=!!(a=r.keySystem)&&!!a.match(/^com\.widevine\.alpha/)),a&&("audioRobustness"==n?o=[e.h.defaultAudioRobustnessForWidevine]:"videoRobustness"==n&&(o=[e.h.defaultVideoRobustnessForWidevine])),"string"===typeof o)i.push(r);else if(Array.isArray(o))for(0===o.length&&(o=[""]),o=d(o),a=o.next();!a.done;a=o.next()){var l={};i.push(Object.assign({},r,(l[n]=a.value,l)))}}return i},m=new WeakSet,y=d(t),v=y.next();!v.done;v=y.next())b=v.value,b.video&&!m.has(b.video)&&(b.video.drmInfos=g(b.video.drmInfos,"videoRobustness"),b.video.drmInfos=g(b.video.drmInfos,"audioRobustness"),m.add(b.video)),b.audio&&!m.has(b.audio)&&(b.audio.drmInfos=g(b.audio.drmInfos,"videoRobustness"),b.audio.drmInfos=g(b.audio.drmInfos,"audioRobustness"),m.add(b.audio));return S(w,_r(t,e.N,e.Y,e.h.preferredKeySystems),2)}return Ms(e.l),T=i||0<r.size,T?(_=ua(e,void 0,t),w.return(i?_:_.catch(function(){}))):(e.Z=!0,w.return(Promise.resolve()))})}function ta(e){var t;return U(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.G){n.A(2);break}return S(n,e.G,3);case 3:return Ms(e.l),n.return();case 2:return A(n,4),e.G=e.j.setMediaKeys(e.B),S(n,e.G,6);case 6:I(n,5);break;case 4:t=x(n),e.u(new Le(2,6,6003,t.message));case 5:Ms(e.l),E(n)}})}function na(e,t){return U(function(n){if(1==n.g)return S(n,ta(e),2);aa(e,t.initDataType,De(t.initData)),E(n)})}function ia(e){var t,n,i,r,s;return U(function(a){switch(a.g){case 1:if(!e.B||!e.g)return a.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){a.A(2);break}return t=bs([e.g.serverCertificateUri],e.h.retryParameters),A(a,3),n=e.D.xc.request(5,t,{isPreload:e.O()}),S(a,n.promise,5);case 5:i=a.h,e.g.serverCertificate=De(i.data),I(a,4);break;case 3:throw r=x(a),new Le(2,6,6017,r);case 4:if(e.l.g)return a.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(A(a,6),S(a,e.B.setServerCertificate(e.g.serverCertificate),8)):a.return();case 8:I(a,0);break;case 6:throw s=x(a),new Le(2,6,6004,s.message)}})}function ra(e,t){var n,i,r;return U(function(s){return 1==s.g?S(s,fa(e,t,{initData:null,initDataType:null}),2):3!=s.g?(n=s.h,n?(i=[],(r=e.i.get(n))&&(r.Nb=new as,i.push(r.Nb)),i.push(n.remove()),S(s,Promise.all(i),3)):s.return()):(e.i.delete(n),void E(s))})}function sa(e){var t,n,i,r,s;return U(function(a){if(1==a.g)return e.C.size?(e.C.forEach(function(t,n){fa(e,n,t)}),S(a,e.m,3)):a.A(2);if(2!=a.g){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&Ca(e))return a.return(e.m);e.J=!1,e.m=new as,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=d(n),r=i.next();!r.done;r=i.next())s=r.value,aa(e,s.initDataType,s.initData);return Aa(e)&&e.m.resolve(),a.return(e.m)})}function aa(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var i=e.i.values();i=d(i);for(var r=i.next();!r.done;r=i.next())if(ke(n,r.value.initData))return;var s=!1;if(e.C.forEach(function(e){!s&&ke(n,e.initData)&&(s=!0)}),s)return}e.J=!0,0<e.i.size&&Aa(e)&&(e.m.resolve(),e.J=!1,e.m=new as,e.m.catch(function(){})),ga(e,t,n,e.g.sessionType)}}function oa(e){return e=e.i.keys(),e=oe(e,function(e){return e.sessionId}),Array.from(e)}function la(e){return e.H?e.H:NaN}function ua(e,t,n){var i,r,s,a,o,l,u,c;return U(function(h){switch(h.g){case 1:if(i=new Map,n.length){r=ca(e,n,i),h.A(2);break}return S(h,da(e,t),3);case 3:r=h.h;case 2:if(s=r,!s){if(!navigator.requestMediaKeySystemAccess)throw new Le(2,6,6020);throw new Le(2,6,6001)}if(Ms(e.l),A(h,4),s.getConfiguration(),a=e.h.keySystemsMapping[s.keySystem]||s.keySystem,n.length){var p=a,f=i.get(a),g=[],m=[],y=[],v=[],b=[],T=new Set,_=new Set;xa(f,g,m,v,y,b,T,_);var w=e.N?"persistent-license":"temporary";for(p={keySystem:p,encryptionScheme:g[0],licenseServerUri:m[0],distinctiveIdentifierRequired:f[0].distinctiveIdentifierRequired,persistentStateRequired:f[0].persistentStateRequired,sessionType:f[0].sessionType||w,audioRobustness:f[0].audioRobustness||"",videoRobustness:f[0].videoRobustness||"",serverCertificate:v[0],serverCertificateUri:y[0],initData:b,keyIds:T},0<_.size&&(p.keySystemUris=_),f=d(f),_=f.next();!_.done;_=f.next())_=_.value,_.distinctiveIdentifierRequired&&(p.distinctiveIdentifierRequired=_.distinctiveIdentifierRequired),_.persistentStateRequired&&(p.persistentStateRequired=_.persistentStateRequired);f=p}else f=a,_=t.get(a),p=[],g=[],m=[],y=[],v=[],b=new Set,xa(_.drmInfos,p,g,y,m,v,b),f={keySystem:f,encryptionScheme:p[0],licenseServerUri:g[0],distinctiveIdentifierRequired:"required"==_.distinctiveIdentifier,persistentStateRequired:"required"==_.persistentState,sessionType:_.sessionTypes[0]||"temporary",audioRobustness:(_.audioCapabilities?_.audioCapabilities[0].robustness:"")||"",videoRobustness:(_.videoCapabilities?_.videoCapabilities[0].robustness:"")||"",serverCertificate:y[0],serverCertificateUri:m[0],initData:v,keyIds:b};if(e.g=f,!e.g.licenseServerUri)throw new Le(2,6,6012,e.g.keySystem);return S(h,s.createMediaKeys(),6);case 6:if(o=h.h,Ms(e.l),e.B=o,""==e.h.minHdcpVersion||!("getStatusForPolicy"in e.B)){h.A(7);break}return A(h,8),S(h,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(l=h.h,"usable"!=l)throw new Le(2,6,6018);Ms(e.l),I(h,7,4);break;case 8:if(u=x(h,4),u instanceof Le)throw u;throw new Le(2,6,6019,u.message);case 7:return e.Z=!0,S(h,ia(e),11);case 11:Ms(e.l),I(h,0);break;case 4:if(c=x(h),Ms(e.l,c),e.g=null,c instanceof Le)throw c;throw new Le(2,6,6002,c.message)}})}function ca(e,t,n){for(var i=d(t),r=i.next();!r.done;r=i.next()){r=d(Sa(r.value));for(var s=r.next();!s.done;s=r.next())s=s.value,n.has(s.keySystem)||n.set(s.keySystem,[]),n.get(s.keySystem).push(s)}if(1==n.size&&n.has(""))throw new Le(2,6,6e3);i=e.h.preferredKeySystems,i.length||(r=Ds(e.h.servers),1==r.size&&(i=Array.from(r.keys()))),r=d(i);var a=r.next();for(s={};!a.done;s={oj:void 0},a=r.next()){s.oj=a.value,a=d(t);for(var o=a.next();!o.done;o=a.next())if(o=o.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.oj}}(s)))return o.keySystemAccess}for(r=d([!0,!1]),s=r.next();!s.done;s=r.next())for(s=s.value,a=d(t),o=a.next();!o.done;o=a.next()){o=d(o.value.decodingInfos);for(var l=o.next();!l.done;l=o.next())if(l=l.value,l.supported&&l.keySystemAccess){var u=l.keySystemAccess.keySystem;if(!i.includes(u)){var c=n.get(u);for(!c&&e.h.keySystemsMapping[u]&&(c=n.get(e.h.keySystemsMapping[u])),u=d(c),c=u.next();!c.done;c=u.next())if(!!c.value.licenseServerUri==s)return l.keySystemAccess}}}return null}function da(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v;return U(function(b){switch(b.g){case 1:if(1==t.size&&t.has(""))throw new Le(2,6,6e3);for(i=d(t.values()),r=i.next();!r.done;r=i.next())s=r.value,0==s.audioCapabilities.length&&delete s.audioCapabilities,0==s.videoCapabilities.length&&delete s.videoCapabilities;a=d(e.h.preferredKeySystems),o=a.next();case 2:if(o.done){b.A(4);break}if(l=o.value,!t.has(l)){b.A(3);break}return u=t.get(l),A(b,6),S(b,navigator.requestMediaKeySystemAccess(l,[u]),8);case 8:return n=b.h,b.return(n);case 6:x(b);case 7:Ms(e.l);case 3:o=a.next(),b.A(2);break;case 4:c=d([!0,!1]),h=c.next();case 9:if(h.done){b.A(11);break}p=h.value,f=d(t.keys()),g=f.next();case 12:if(g.done){h=c.next(),b.A(9);break}if(m=g.value,y=t.get(m),v=y.drmInfos.some(function(e){return!!e.licenseServerUri}),v!=p){b.A(13);break}return A(b,15),S(b,navigator.requestMediaKeySystemAccess(m,[y]),17);case 17:return n=b.h,b.return(n);case 15:x(b);case 16:Ms(e.l);case 13:g=f.next(),b.A(12);break;case 11:return b.return(n)}})}function ha(e){Aa(e)&&e.m.resolve()}function pa(e,t){new sr(function(){t.loaded=!0,ha(e)}).X(Ra)}function fa(e,t,n){var i,r,s,a,o,l,u;return U(function(c){switch(c.g){case 1:try{i=e.B.createSession("persistent-license")}catch(d){return r=new Le(2,6,6005,d.message),e.u(r),c.return(Promise.reject(r))}return e.s.o(i,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.R?e.L.push(t):ya(e,t)}),e.s.o(i,"keystatuseschange",function(t){return va(e,t)}),s={initData:n.initData,initDataType:n.initDataType,loaded:!1,Eh:1/0,Nb:null,type:"persistent-license"},e.i.set(i,s),A(c,2),S(c,i.load(t),4);case 4:return a=c.h,Ms(e.l),a||(e.i.delete(i),o=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Le(o,6,6013)),s.loaded=!0),pa(e,s),ha(e),c.return(i);case 2:l=x(c),Ms(e.l,l),e.i.delete(i),u=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Le(u,6,6005,l.message)),s.loaded=!0,ha(e);case 3:return c.return(Promise.resolve())}})}function ga(e,t,n,i){try{var r=e.B.createSession(i)}catch(s){return void e.u(new Le(2,6,6005,s.message))}e.s.o(r,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.R?e.L.push(t):ya(e,t)}),e.s.o(r,"keystatuseschange",function(t){return va(e,t)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Eh:1/0,Nb:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(s){return t=s,s instanceof Le||(t=new Le(2,6,6016,s)),void e.u(t)}e.h.logLicenseExchange&&Je(n),r.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.u(new Le(2,6,6006,t.message,t,i))}})}function ma(e){return U(function(t){return 1==t.g?e.J?S(t,e.m,3):t.A(0):S(t,Promise.all(e.P.map(function(e){return e.promise})),0)})}function ya(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g,m;U(function(y){switch(y.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Je(t.message),i=e.i.get(n),r=e.g.licenseServerUri,s=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(r=s.individualizationServer),a=bs([r],e.h.retryParameters),a.body=t.message,a.method="POST",a.licenseRequestType=t.messageType,a.sessionId=n.sessionId,a.drmInfo=e.g,i&&(a.initData=i.initData,a.initDataType=i.initDataType),s&&s.headers)for(o in s.headers)a.headers[o]=s.headers[o];if("org.w3.clearkey"===e.g.keySystem){var v=a,b=e.g;try{var T=qe(v.body);if(T){var _=JSON.parse(T);_.type||(_.type=b.sessionType,v.body=We(JSON.stringify(_)))}}catch(w){}}if(Zr(e.g.keySystem))if(v=Ge(a.body,!0,!0),v.includes("PlayReadyKeyMessage")){for(v=Sn(v,"PlayReadyKeyMessage"),b=Dn(v,"HttpHeader"),b=d(b),T=b.next();!T.done;T=b.next())_=T.value,T=Dn(_,"name")[0],_=Dn(_,"value")[0],a.headers[kn(T)]=kn(_);v=Dn(v,"Challenge")[0],a.body=et(kn(v))}else a.headers["Content-Type"]="text/xml; charset=utf-8";return l=Date.now(),A(y,2),c=e.D.xc.request(2,a,{isPreload:e.O()}),e.P.push(c),S(y,c.promise,4);case 4:u=y.h,un(e.P,c),I(y,3);break;case 2:return h=x(y),e.l.g?y.return():(p=new Le(2,6,6007,h),1==e.i.size?(e.u(p),i&&i.Nb&&i.Nb.reject(p)):(i&&i.Nb&&i.Nb.reject(p),e.i.delete(n),Aa(e)&&(e.m.resolve(),e.K.X(.1))),y.return());case 3:return e.l.g?y.return():(e.H+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&Je(u.data),A(y,5),S(y,n.update(u.data),7));case 7:I(y,6);break;case 5:return f=x(y),g=new Le(2,6,6008,f.message),e.u(g),i&&i.Nb&&i.Nb.reject(g),y.return();case 6:if(e.l.g)return y.return();m=new K("drmsessionupdate"),e.D.onEvent(m),i&&(i.Nb&&i.Nb.resolve(),pa(e,i)),E(y)}})}function va(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(t,r){if("string"==typeof r){var s=r;r=t,t=s}if(s=Be(),Zr(e.g.keySystem)&&16==r.byteLength&&s.Ph()){s=Oe(r);var a=s.getUint32(0,!0),o=s.getUint16(4,!0),l=s.getUint16(6,!0);s.setUint32(0,a,!1),s.setUint16(4,o,!1),s.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(i=!0),r=nt(r).slice(0,32),e.U.set(r,t)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Nb&&(e.i.delete(t),_a(t)),Aa(e)&&(e.m.resolve(),e.K.X(Oa))}function ba(e){var t=e.U,n=e.$;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),t=Array.from(n.values()),t.length&&t.every(function(e){return"expired"==e})&&e.u(new Le(2,6,6014)),e.D.Lf(Rs(n))}function Ta(){var t,n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,C,k,M,D,R,O,N,L,P,B,F,j,V,H;return U(function(z){if(1==z.g){if(t="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},i=d(t),r=i.next();!r.done;r=i.next())s=r.value,n[s]=null;return z.return(n)}for(a="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),o=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],l=["150","2000","3000"],u={"com.widevine.alpha":o,"com.widevine.alpha.experiment":o,"com.microsoft.playready.recommendation":l},c=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],h=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],p={videoCapabilities:c,audioCapabilities:h,initDataTypes:["cenc","sinf","skd","keyids"]},f=[null,"cenc","cbcs","cbcs-1-9"],g=new Map,m=Be(),y=function(e,t){var n,i,r,s,o,l,u,c,h,p,f,y,v;return U(function(b){switch(b.g){case 1:return A(b,2),S(b,t.createMediaKeys(),5);case 5:n=b.h;case 4:I(b,3);break;case 2:return x(b),b.return();case 3:if(r=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),m.gj()&&(r=!1),s=t.getConfiguration().videoCapabilities,o=t.getConfiguration().audioCapabilities,l={persistentState:r,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},g.has(e)&&g.get(e)?l=g.get(e):g.set(e,l),(u=s[0].encryptionScheme)&&!l.encryptionSchemes.includes(u)&&l.encryptionSchemes.push(u),(c=s[0].robustness)&&!l.videoRobustnessLevels.includes(c)&&l.videoRobustnessLevels.push(c),(h=o[0].robustness)&&!l.audioRobustnessLevels.includes(h)&&l.audioRobustnessLevels.push(h),"getStatusForPolicy"in n){for(p=[],f=d(a),y=f.next(),v={};!y.done;v={ge:void 0},y=f.next())v.ge=y.value,l.minHdcpVersions.includes(v.ge)||p.push(n.getStatusForPolicy({minHdcpVersion:v.ge}).then(function(e){return function(t){"usable"!=t||l.minHdcpVersions.includes(e.ge)||l.minHdcpVersions.push(e.ge)}}(v)));return S(b,Promise.all(p),0)}b.A(0)}})},v=function(e,t,n,i){var r,s,a,o,l,u,c,h,f,g,m;return U(function(v){switch(v.g){case 1:for(A(v,2),r=bn(p),s=d(r.videoCapabilities),a=s.next();!a.done;a=s.next())o=a.value,o.encryptionScheme=t,o.robustness=n;for(l=d(r.audioCapabilities),u=l.next();!u.done;u=l.next())c=u.value,c.encryptionScheme=t,c.robustness=i;return h=bn(r),h.persistentState="required",h.sessionTypes=["persistent-license"],f=[h,r],m=Be(),"MOBILE"==m.Ja()?S(v,ur(5,navigator.requestMediaKeySystemAccess(e,f)),7):S(v,navigator.requestMediaKeySystemAccess(e,f),6);case 6:g=v.h,v.A(5);break;case 7:g=v.h;case 5:return S(v,y(e,g),8);case 8:I(v,0);break;case 2:x(v),E(v)}})},b=function(e,t,n,i){var r,s,a,o;return U(function(l){switch(l.g){case 1:return A(l,2),r={type:"media-source",video:{contentType:c[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:h[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:n},audio:{encryptionScheme:t,robustness:i}}},a=Be(),"MOBILE"==a.Ja()?S(l,ur(5,navigator.mediaCapabilities.decodingInfo(r)),7):S(l,navigator.mediaCapabilities.decodingInfo(r),6);case 6:s=l.h,l.A(5);break;case 7:s=l.h;case 5:return o=s.keySystemAccess,S(l,y(e,o),8);case 8:I(l,0);break;case 2:x(l),E(l)}})},T=d(t),_=T.next();!_.done;_=T.next())w=_.value,g.set(w,null);for(C=function(e){return"WEBKIT"!==Be().Ia()||"org.w3.clearkey"!==e},k=[],M=d(f),D=M.next();!D.done;D=M.next())for(R=D.value,O=d(t),N=O.next();!N.done;N=O.next())L=N.value,C(L)&&(k.push(v(L,R,"","")),k.push(b(L,R,"","")));for(P=d(t),B=P.next();!B.done;B=P.next())for(F=B.value,j=d(u[F]||[]),V=j.next();!V.done;V=j.next())H=V.value,C(F)&&(k.push(v(F,null,H,"")),k.push(v(F,null,"",H)),k.push(b(F,null,H,"")),k.push(b(F,null,"",H)));return S(z,Promise.all(k),2)}return z.return(Rs(g))})}function _a(e){return U(function(t){return 1==t.g?(A(t,2),S(t,ur(Da,Promise.all([e.close().catch(function(){}),e.closed])),4)):2!=t.g?I(t,0):(x(t),void E(t))})}function wa(e){var t;return U(function(n){return t=Array.from(e.i.entries()),e.i.clear(),S(n,Promise.all(t.map(function(t){t=d(t);var n=t.next().value,i=t.next().value;return U(function(t){return 1==t.g?(A(t,2),e.ba||e.C.has(n.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?S(t,_a(n),5):S(t,n.remove(),5)):2!=t.g?I(t,0):(x(t),void E(t))})})),0)})}function Sa(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ea(e){e.i.forEach(function(t,n){var i=t.Eh,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Eh=r)})}function Aa(e){return e=e.i.values(),le(e,function(e){return e.loaded})}function Ca(e){for(var t=d(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.U.get(n.value))return!1;return!0}function Ia(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=d(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function xa(t,n,i,r,s,a,o,l){var u=[];t=d(t);for(var c=t.next(),p={};!c.done;p={Qa:void 0},c=t.next()){if(p.Qa=c.value,n.includes(p.Qa.encryptionScheme)||n.push(p.Qa.encryptionScheme),"org.w3.clearkey"==p.Qa.keySystem&&p.Qa.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(p.Qa.licenseServerUri)||u.push(p.Qa.licenseServerUri):i.includes(p.Qa.licenseServerUri)||i.push(p.Qa.licenseServerUri),s.includes(p.Qa.serverCertificateUri)||s.push(p.Qa.serverCertificateUri),p.Qa.serverCertificate&&(r.some(function(e){return function(t){return ke(t,e.Qa.serverCertificate)}}(p))||r.push(p.Qa.serverCertificate)),p.Qa.initData){c=d(p.Qa.initData);for(var f=c.next(),g={};!f.done;g={sh:void 0},f=c.next())g.sh=f.value,a.some(function(e){return function(t){var n=e.sh;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&ke(t.initData,n.initData)}}(g))||a.push(g.sh)}if(p.Qa.keyIds)for(c=d(p.Qa.keyIds),f=c.next();!f.done;f=c.next())o.add(f.value);if(p.Qa.keySystemUris&&l)for(p=d(p.Qa.keySystemUris),c=p.next();!c.done;c=p.next())l.add(c.value)}if(1==u.length)i.push(u[0]);else if(0<u.length){for(n=[],u=d(u),r=u.next();!r.done;r=u.next())r=e.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),n.push.apply(n,h(r.keys));u=JSON.stringify({keys:n}),i.push("data:application/json;base64,"+e.btoa(u))}}function ka(t,n,i,r){var s=t.keySystem;!s||"org.w3.clearkey"==s&&t.licenseServerUri||(n.size&&n.get(s)&&(n=n.get(s),t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(s))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),r[s]&&(t.keySystem=r[s]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==s&&(t.keySystem="com.chromecast.playready"))}function Ma(e,t){if(e=Ds(e),0!=e.size){e=at(e),t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}i=Ys.prototype,i.destroy=function(){return this.l.destroy()},i.configure=function(e,t){this.h=e,t&&(this.O=t),this.I&&this.I.ya(this.h.updateExpirationTime)},i.$b=function(e){var t,n,i,r=this;return U(function(s){if(1==s.g)return r.j===e?s.return():r.B?(r.j=e,r.s.qa(r.j,"play",function(){for(var e=d(r.L),t=e.next();!t.done;t=e.next())ya(r,t.value);r.R=!0,r.L=[]}),r.j.remote?(r.s.o(r.j.remote,"connect",function(){return wa(r)}),r.s.o(r.j.remote,"connecting",function(){return wa(r)}),r.s.o(r.j.remote,"disconnect",function(){return wa(r)})):"webkitCurrentPlaybackTargetIsWireless"in r.j&&r.s.o(r.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return wa(r)}),r.F=r.g&&r.g.initData.find(function(e){return 0<e.initData.length})||null,t=r.g.keySystem,n="com.apple.fps"==t,i=Be().Ia(),"GECKO"===i&&t.startsWith("com.microsoft.playready.recommendation")&&(n=!0),n||!(r.F||r.C.size||r.h.parseInbandPsshEnabled)?(r.s.o(r.j,"encrypted",function(e){return na(r,e)}),s.A(2)):S(s,ta(r),2)):(r.s.qa(e,"encrypted",function(){r.u(new Le(2,6,6010))}),s.return());sa(r).catch(function(){}),E(s)})},i.eh=function(){var e=this,t=this.i.keys();return t=oe(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},i.be=function(){var e=1/0,t=this.i.keys();t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.nf=function(){return Rs(this.$)};var Da=1,Ra=5,Oa=.5;function Na(e,t,n){for(n=void 0===n||n,this.h=e,this.g=new Set([e]),t=t||[],e=d(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}function La(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Hi(e)}),t=t.codecs.split(",").map(function(e){return Hi(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Pa(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=d(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Ua(){}function Ba(){this.g=ja,this.i=(new Map).set(ja,2).set(Fa,1),this.h=0}Na.prototype.add=function(e,t){var n,i=this.h;if(t=void 0===t||t,!(n=!!i.audio!=!!e.audio||!!i.video!=!!e.video||i.language!=e.language)&&(n=i.audio&&e.audio)){n=i.audio;var r=e.audio;n=!(!((!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)&&n.channelsCount!=r.channelsCount||n.spatialAudio!==r.spatialAudio||t&&!La(n,r))&&Pa(n.roles,r.roles)&&n.groupId===r.groupId)}return!n&&(n=i.video&&e.video)&&(i=i.video,n=e.video,n=!((!t||La(i,n))&&Pa(i.roles,n.roles))),!n&&(this.g.add(e),!0)},Na.prototype.values=function(){return this.g.values()},X("shaka.media.AdaptationSet",Na),X("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"}),Ua.prototype.create=function(){},Ua.prototype.configure=function(){},Ua.prototype.getConfiguration=function(){},X("shaka.media.AdaptationSetCriteria",Ua);var Fa=0,ja=1;
/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Va(e,t,n){this.g=e,this.i=t,this.h=n}function Ha(e,t){return U(function(n){if(1==n.g)return S(n,gr(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||dr(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(Nr))throw new Le(2,4,4032);return n.return(Ga(e,t))})}function za(e,t){var n=e.g.restrictions;e=e.i;var i=!1;t=d(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=r.allowedByApplication;r.allowedByApplication=fr(r,n,e),s!=r.allowedByApplication&&(i=!0)}return i}function Ga(e,t){var n=za(e,t);if(t){var i=e.h?e.h.g:null;if(i&&e.h.B){for(var r=new Set,s=d(t.variants),a=s.next();!a.done;a=s.next())a=a.value,a.audio&&r.add(a.audio),a.video&&r.add(a.video);for(r=d(r),s=r.next();!s.done;s=r.next())qa(e,i.keySystem,s.value)}Wa(e,t)}return n}function qa(e,t,n){n=d(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=d(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,aa(e.h,r.initDataType,r.initData)}}function Wa(e,t){e=e.h?e.h.nf():{};var n=Object.keys(e);n=n.length&&"00"==n[0];var i=!1,r=!1,s=new Set,a=new Set,o=new Set;t=d(t.variants);for(var l=t.next();!l.done;l=t.next())l=l.value,l.audio&&o.add(l.audio),l.video&&o.add(l.video),l.allowedByApplication?l.allowedByKeySystem&&(i=!0):r=!0;for(o=d(o),t=o.next();!t.done;t=o.next())if(t=t.value,t.keyIds.size)for(t=d(t.keyIds),l=t.next();!l.done;l=t.next()){l=l.value;var u=e[n?"00":l];u?Xa.includes(u)&&a.add(u):s.add(l)}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(s),restrictedKeyStatuses:Array.from(a)},new Le(2,4,4012,e)}var Xa=["output-restricted","internal-error"];function Ka(){}function Ya(e,t){Za.set(e,t)}function $a(){var e={};if(Be(),r_())for(var t=d(Za.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=r_()?Za.has(n):""!=ll().canPlayType(n);return e}function Qa(e,t){if(t){var n=Za.get(t.toLowerCase());if(n)return n}throw new Le(2,4,4e3,e,t)}X("shaka.media.ManifestParser",Ka),Ka.unregisterParserByMime=function(e){Za.delete(e)},Ka.registerParserByMime=Ya,Ka.registerParserByExtension=function(){Bt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Ka.AccessibilityPurpose={En:"visually impaired",Om:"hard of hearing",nn:"spoken subtitles"};var Za=new Map;function Ja(e,t){var n=null,i=null,r=null,s=null,a=e.W();return 1&t&&(r=e.Ld()),2&t&&(s=e.W()),8&t&&(n=e.W()),16&t&&(i=e.W()),{trackId:a,Yd:n,Zd:i,fk:r,wj:s}}function eo(e,t){return 1==t?(t=e.W(),e=e.W(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.W()}}function to(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.W(),e.skip(4),e=e.Fa(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function no(e,t,n){var i=e.W(),r=[],s=null;1&n&&(s=e.Jh()),4&n&&e.skip(4);for(var a=0;a<i;a++){var o={Rh:null,sampleSize:null,Xf:null};256&n&&(o.Rh=e.W()),512&n&&(o.sampleSize=e.W()),1024&n&&e.skip(4),2048&n&&(o.Xf=0==t?e.W():e.Jh()),r.push(o)}return{Jn:i,Qh:r,Ng:s}}function io(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Fa();return e.skip(2),e.skip(2),e.skip(2),e=e.Fa()+e.Fa()/65536,{channelCount:t,sampleRate:e}}function ro(e){return e=e.W(),{codec:zs(e)}}function so(e){var t=null,n=null,i=e.Xb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),"nclx"===r){switch(e.Fa()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.Fa(),e.Fa(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,Ge:n}}function ao(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function oo(e){return(10>e?"0":"")+e}function lo(e){if(!_o){_o=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);Oo=To("ftyp",t,i,t,n),t=To("dref",No),Lo=To("dinf",t)}this.g=e}function uo(e){for(var t=[],n=d(e.g),i=n.next();!i.done;i=n.next()){var r=t,s=r.push,a=i.value;i=To;var o=a.id+1,l=a.stream.width||0,u=a.stream.height||0;"audio"==a.type&&(u=l=0);var c=a.duration*a.timescale,p=Math.floor(c/(wo+1));switch(c=Math.floor(c%(wo+1)),o=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(h(yo(o,4)),[0,0,0,0],h(yo(p,4)),h(yo(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],h(yo(l,2)),[0,0],h(yo(u,2)),[0,0])),o=To("tkhd",o),l=To,p=a.duration*a.timescale,u=Math.floor(p/(wo+1)),p=Math.floor(p%(wo+1)),c=a.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(h(yo(a.timescale,4)),h(yo(u,4)),h(yo(p,4)),h(yo(c,2)),[0,0])),u=To("mdhd",u),p=a,c=new Uint8Array([]),p.type){case"video":c=Eo;break;case"audio":c=Ao}p=To("hdlr",c);e:{switch(a.type){case"video":a=To("minf",To("vmhd",Mo),Lo,co(a));break e;case"audio":a=To("minf",To("smhd",Do),Lo,co(a));break e}a=new Uint8Array([])}a=l("mdia",u,p,a),i=i("trak",o,a),s.call(r,i)}for(t=it.apply(Qe,h(t)),s=e.g[0],n=To,i=s.duration*s.timescale,r=Math.floor(i/(wo+1)),i=Math.floor(i%(wo+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(h(yo(s.timescale,4)),h(yo(r,4)),h(yo(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=To("mvhd",r),i=[],e=d(e.g),l=e.next();!l.done;l=e.next())a=i,o=a.push,l=new Uint8Array([0,0,0,0].concat(h(yo(l.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),l=To("trex",l),o.call(a,l);if(e=it.apply(Qe,h(i)),e=To("mvex",e),i=[],s.encrypted){for(s=d(s.stream.drmInfos),a=s.next();!a.done;a=s.next())if(a=a.value,a.initData)for(a=d(a.initData),o=a.next();!o.done;o=a.next())i.push(o.value.initData);s=it.apply(Qe,h(i))}else s=new Uint8Array([]);return e=n("moov",r,t,e,s),t=new Uint8Array(Oo.byteLength+e.byteLength),t.set(Oo),t.set(e,Oo.byteLength),t}function co(e){var t=To,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Be().we()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,0<e.Wa.byteLength)var r=To("avcC",e.Wa);else{r=To;for(var s=7,a=[],o=[],l=0,u=0,c=0,d=0;d<e.Eb.length;d++){var p=vo(e.Eb[d]);switch(31&p[0]){case 7:a.push(p),s+=p.length+2;break;case 8:o.push(p),s+=p.length+2}}for(0<a.length&&(l=a[0][1],c=a[0][2],u=a[0][3]),s=new Uint8Array(s),d=0,s[d++]=1,s[d++]=l,s[d++]=c,s[d++]=u,s[d++]=255,s[d++]=224|a.length,l=0;l<a.length;l++)s[d++]=(65280&a[l].length)>>8,s[d++]=255&a[l].length,s.set(a[l],d),d+=a[l].length;for(s[d++]=o.length,a=0;a<o.length;a++)s[d++]=(65280&o[a].length)>>8,s[d++]=255&o[a].length,s.set(o[a],d),d+=o[a].length;r=r("avcC",s)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(h(yo(n,2)),h(yo(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",o=ho(e),a=new Uint8Array([]),e.encrypted&&(a=fo(0,e.stream,e.codecs),i="encv"),i=To(i,n,r,o,a)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Wa.byteLength&&(n=To("hvcC",e.Wa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(h(yo(i,2)),h(yo(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",o=ho(e),a=new Uint8Array([]),e.encrypted&&(a=fo(0,e.stream,e.codecs),r="encv"),i=To(r,i,n,o,a));break;case"audio":"mp3"==n?e=To(".mp3",po(e)):"ac-3"==n?(n=To("dac3",e.Ma),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=fo(0,e.stream,e.codecs),i="enca"),e=To(i,po(e),n,r)):"ec-3"==n?(n=To("dec3",e.Ma),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=fo(0,e.stream,e.codecs),i="enca"),e=To(i,po(e),n,r)):"opus"==n?(n=To("dOps",e.Ma),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=fo(0,e.stream,e.codecs),i="enca"),e=To(i,po(e),n,r)):(0<e.Ma.byteLength?n=To("esds",e.Ma):(n=To,i=e.id+1,r=e.stream.channelsCount||2,a=e.stream.audioSamplingRate||44100,l=ot("audio",e.codecs.split(",")),u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o=u[a],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(o=u[2*a]),a=parseInt(l.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(h(yo(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,a<<3|o>>>1,o<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=fo(0,e.stream,e.codecs),i="enca"),e=To(i,po(e),n,r)),i=e}return e=To("stsd",Ro,i),t("stbl",e,To("stts",Co),To("stsc",Io),To("stsz",ko),To("stco",xo))}function ho(e){if(!e.bb&&!e.eb)return new Uint8Array([]);var t=e.eb;return e=new Uint8Array([].concat(h(yo(e.bb,4)),h(yo(t,4)))),To("pasp",e)}function po(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(h(yo(e.stream.audioSamplingRate||44100,2)),[0,0]))}function fo(e,t,n){e=To,n=new Uint8Array([].concat(h(yo(bo(n.split(".")[0]),4)))),n=To("frma",n);var i="cenc",r=t.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(h(yo(bo(i),4)),[0,1,0,0])),i=To("schm",i),r=To;var s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t=d(t.drmInfos);for(var a=t.next();!a.done;a=t.next())if((a=a.value)&&a.keyIds&&a.keyIds.size){a=d(a.keyIds);for(var o=a.next();!o.done;o=a.next())s=vo(o.value)}return t=new Uint8Array([0,0,0,0,0,0,1,8]),t=To("tenc",t,s),e("sinf",n,i,r("schi",t))}function go(e){var t=[];e=d(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i,r=t.push,s=r.apply,a=To,o=new Uint8Array([0,0,0,0].concat(h(yo(n.data?n.data.Yb:0,4))));o=To("mfhd",o);var l=n.data?n.data.Cb:[],u=new Uint8Array(4+l.length);for(i=0;i<l.length;i++){var c=l[i].flags;u[i+4]=c.pb<<4|c.sb<<2|c.rb}l=To("sdtp",u);var p=l.length+92;u=To,i=new Uint8Array([0,0,0,58].concat(h(yo(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=To("tfhd",i),c=n.data?n.data.baseMediaDecodeTime:0;var f=Math.floor(c%(wo+1));c=new Uint8Array([1,0,0,0].concat(h(yo(Math.floor(c/(wo+1)),4)),h(yo(f,4)))),c=To("tfdt",c);var g=p;p=n.data?n.data.Cb:[],f=p.length;var m=12+16*f,y=new Uint8Array(m);for(g+=8+m,y.set(["video"===n.type?1:0,0,15,1].concat(h(yo(f,4)),h(yo(g,4))),0),g=0;g<f;g++){var v=p[g];m=yo(v.duration,4);var b=yo(v.size,4),T=v.flags;v=yo(v.xb,4),y.set([].concat(h(m),h(b),[T.zb<<2|T.pb,T.sb<<6|T.rb<<4|T.Ab,61440&T.ob,15&T.ob],h(v)),12+16*g)}p=To("trun",y),l=u("traf",i,c,p,l),a=a("moof",o,l),s.call(r,t,[a,mo(n)])}return it.apply(Qe,h(t))}function mo(e){return e=(e.data?e.data.Cb:[]).map(function(e){return e.data}),e=it.apply(Qe,h(e)),To("mdat",e)}function yo(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function vo(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function bo(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function To(e){var t=B.apply(1,arguments),n=So.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],So.set(e,n));for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var _o=!1,wo=Math.pow(2,32)-1,So=new Map,Eo=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ao=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Co=new Uint8Array([0,0,0,0,0,0,0,0]),Io=new Uint8Array([0,0,0,0,0,0,0,0]),xo=new Uint8Array([0,0,0,0,0,0,0,0]),ko=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Mo=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Do=new Uint8Array([0,0,0,0,0,0,0,0]),Ro=new Uint8Array([0,0,0,0,0,0,0,1]),Oo=new Uint8Array([]),No=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Lo=new Uint8Array([]);function Po(e){e=De(e);var t=null;return(new Ps).box("moov",Us).box("trak",Us).box("mdia",Us).box("minf",Us).box("stbl",Us).V("stsd",Bs).box("enca",function(e){return t=e.reader.h,js(e)}).box("sinf",Us).box("frma",function(e){e.parser.stop(),"ec-3"===ro(e.reader).codec&&t&&2!==t.getUint16(16)&&t.setUint16(16,2)}).parse(e),e}function Uo(e,t,n){function i(e){h.push({box:e,ij:1701733217})}function r(e){h.push({box:e,ij:1701733238})}function s(e){u=!0,e.parser.stop()}function a(e){c.push(e),Us(e)}var o,l=t=De(t),u=!1,c=[],h=[];if((new Ps).box("moov",a).box("trak",a).box("mdia",a).box("minf",a).box("stbl",a).V("stsd",function(e){o=e,c.push(e),Bs(e)}).V("encv",s).V("enca",s).V("dvav",r).V("dva1",r).V("dvh1",r).V("dvhe",r).V("dvc1",r).V("dvi1",r).V("hev1",r).V("hvc1",r).V("avc1",r).V("avc3",r).V("ac-3",i).V("ec-3",i).V("ac-4",i).V("Opus",i).V("fLaC",i).V("mp4a",i).parse(t),u)return t;if(0==h.length||!o)throw ie(nt(t)),new Le(2,3,3019,n);h.reverse(),n=d(h);for(var p=n.next();!p.done;p=n.next())p=p.value,l=jo(e,l,o,p.box,c,p.ij);return Be().rj()?(e=new Uint8Array(t.byteLength+l.byteLength),e.set(l),e.set(t,l.byteLength),e):l}function Bo(e){e=De(e);var t=[];(new Ps).box("mdat",function(e){t.push(e)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],s=t[i];n.push(Fo(e.subarray(r?r.start+r.size:0,s.start+s.size)))}return it.apply(Qe,h(n))}function Fo(e){function t(e){a.push(e),Us(e)}var n,i,r,s,a=[];if((new Ps).box("moof",t).box("traf",t).V("tfhd",function(e){n=e,r=Ja(e.reader,e.flags)}).V("trun",function(e){i=e,s=no(e.reader,e.version,e.flags)}).parse(e),r&&2!==r.wj){var o=n.start+Gs(n)+4+(null!==r.fk?8:0),l=Oe(e);if(null!==r.wj)l.setUint32(o,2);else{Vo(e,n.start,n.size+4);var u=l.getUint32(n.start+8);l.setUint32(n.start+8,2|u),s&&null!==s.Ng&&l.setInt32(i.start+Gs(i)+4,s.Ng+4),u=e.subarray(0,o),l=e.subarray(o),e=new Uint8Array(e.byteLength+4),e.set(u),u=[];for(var c=3;0<=c;c--)u.push(2>>8*c&255);for(e.set(new Uint8Array(u),o),e.set(l,o+4),o=d(a),l=o.next();!l.done;l=o.next())l=l.value,Vo(e,l.start,l.size+4)}}return e}function jo(e,t,n,i,r,s){var a=fo(new lo([]),e,i.name),o=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+a.byteLength),e.set(o,0),Oe(e).setUint32(4,s),e.set(a,i.size),Vo(e,0,e.byteLength),s=new Uint8Array(t.byteLength+e.byteLength),i=Be().wf()?i.start:i.start+i.size,a=t.subarray(i),s.set(t.subarray(0,i)),s.set(e,i),s.set(a,i+e.byteLength),t=d(r),r=t.next();!r.done;r=t.next())r=r.value,Vo(s,r.start,r.size+e.byteLength);return e=Oe(s,n.start),n=Gs(n),t=e.getUint32(n),e.setUint32(n,t+1),s}function Vo(e,t,n){e=Oe(e,t),t=e.getUint32(0),0!=t&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function Ho(e){function t(e){i.push({start:e.start,size:e.size}),Us(e)}var n=De(e),i=[];return(new Ps).box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(e){i.push({start:e.start,size:e.size});for(var t=Oe(n,e.start),r=0;r<e.size-3;r++){var s=t.getUint32(r);1633889587==s?t.setUint32(r,1700998451):1684103987==s&&t.setUint32(r,1684366131)}}).parse(n),n}function zo(e,t,n,i,r,s,a,o){this.S=e,this.startByte=t,this.endByte=n,this.Ed=void 0===i?null:i,this.timescale=void 0===r?null:r,this.h=void 0===s?null:s,this.aesKey=void 0===a?null:a,this.g=this.mimeType=this.codecs=null,this.encrypted=void 0!==o&&o}function Go(e,t){return e===t||(e&&t?e.Hc()==t.Hc()&&e.Fc()==t.Fc()&&dn(e.S().sort(),t.S().sort())&&ke(e.cc(),t.cc()):e==t)}function qo(e,t,n,i,r,s,a,o,l,u,c,h,p,f,g,m){for(u=void 0===u?[]:u,f=void 0===f?Xo:f,this.startTime=e,this.j=this.endTime=t,this.D=n,this.startByte=i,this.endByte=r,this.ea=s,this.timestampOffset=a,this.appendWindowStart=o,this.appendWindowEnd=l,this.g=u,this.tilesLayout=void 0===c?"":c,this.C=void 0===h?null:h,this.h=void 0===p?null:p,this.status=f,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===g?null:g,this.thumbnailSprite=null,this.i=-1,this.B=void 0!==m&&m,this.F=this.s=!1,e=d(this.g),t=e.next();!t.done;t=e.next())t.value.ej();this.B&&this.g.length&&this.g[this.g.length-1].dj(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}function Wo(e,t){e.ea=t,e=d(e.g);for(var n=e.next();!n.done;n=e.next())Wo(n.value,t)}zo.prototype.Hc=function(){return this.startByte},zo.prototype.Fc=function(){return this.endByte},zo.prototype.ze=function(e){this.h=e},zo.prototype.cc=function(){return this.h},X("shaka.media.InitSegmentReference",zo),zo.prototype.getEndByte=zo.prototype.Fc,zo.prototype.getStartByte=zo.prototype.Hc,i=qo.prototype,i.S=function(){return this.D()},i.getStartTime=function(){return this.startTime},i.Fk=function(){return this.endTime},i.Hc=function(){return this.startByte},i.Fc=function(){return this.endByte},i.fl=function(){return this.tilesLayout},i.cl=function(){return this.C},i.Ic=function(){return this.status},i.Hl=function(){this.status=Ko},i.Bh=function(){this.preload=!0},i.isPreload=function(){return this.preload},i.Dd=function(){this.l=!1},i.xl=function(){return this.l},i.ej=function(){this.s=!0},i.zl=function(){return this.s},i.dj=function(){this.F=!0},i.yl=function(){return this.F},i.cj=function(){this.m=!0},i.rl=function(){return this.m},i.dg=function(e){this.thumbnailSprite=e},i.al=function(){return this.thumbnailSprite},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=d(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},i.gi=function(e){null==this.h?Z("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},i.ze=function(e,t){this.u=e,this.G=void 0!==t&&t},i.cc=function(e){var t=this.u;return(void 0===e||e)&&this.G&&(this.u=null),t},X("shaka.media.SegmentReference",qo),qo.prototype.getSegmentData=qo.prototype.cc,qo.prototype.setSegmentData=qo.prototype.ze,qo.prototype.syncAgainst=qo.prototype.gi,qo.prototype.offset=qo.prototype.offset,qo.prototype.getThumbnailSprite=qo.prototype.al,qo.prototype.setThumbnailSprite=qo.prototype.dg,qo.prototype.hasByterangeOptimization=qo.prototype.rl,qo.prototype.markAsByterangeOptimization=qo.prototype.cj,qo.prototype.isLastPartial=qo.prototype.yl,qo.prototype.markAsLastPartial=qo.prototype.dj,qo.prototype.isPartial=qo.prototype.zl,qo.prototype.markAsPartial=qo.prototype.ej,qo.prototype.isIndependent=qo.prototype.xl,qo.prototype.markAsNonIndependent=qo.prototype.Dd,qo.prototype.isPreload=qo.prototype.isPreload,qo.prototype.markAsPreload=qo.prototype.Bh,qo.prototype.markAsUnavailable=qo.prototype.Hl,qo.prototype.getStatus=qo.prototype.Ic,qo.prototype.getTileDuration=qo.prototype.cl,qo.prototype.getTilesLayout=qo.prototype.fl,qo.prototype.getEndByte=qo.prototype.Fc,qo.prototype.getStartByte=qo.prototype.Hc,qo.prototype.getEndTime=qo.prototype.Fk,qo.prototype.getStartTime=qo.prototype.getStartTime,qo.prototype.getUris=qo.prototype.S;var Xo=0,Ko=1;function Yo(e){return 1==e.length&&1e-4>e.end(0)-e.start(0)}function $o(e){return!e||Yo(e)?null:e.length?e.end(e.length-1):null}function Qo(e,t){return!(!e||!e.length||Yo(e)||t>e.end(e.length-1))&&t>=e.start(0)}function Zo(e,t){if(!e||!e.length||Yo(e))return 0;var n=0;e=d(el(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function Jo(e,t,n){return e&&e.length&&!Yo(e)?(e=el(e).findIndex(function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}),0<=e?e:null):null}function el(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function tl(){}function nl(e){return document.createElement(e)}function il(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function rl(e,t){var n=document.createElement("source");return n.src=e,n.type=void 0===t?"":t,n}function sl(e){for(var t=!1,n=e.getElementsByTagName("source"),i=n.length-1;0<=i;--i)e.removeChild(n[i]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function al(e){return e=e.getElementsByClassName("shaka-overflow-quality-mark"),e.length?e[0]:null}function ol(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ll(){return dl||(cl||(cl=new sr(function(){dl=null})),(dl=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(dl=document.createElement("video")),cl.X(1),dl)}function ul(t,n){var i,r,s,a,o;return U(function(l){if(1==l.g)return"fonts"in document&&"FontFace"in e?S(l,document.fonts.ready,2):l.return();if(!("entries"in document.fonts))return l.return();for(i=function(e){e=e.entries();for(var t=[],n=e.next();!1===n.done;)t.push(n.value),n=e.next();return t},r=d(i(document.fonts)),s=r.next();!s.done;s=r.next())if(a=s.value,a.family===t&&"swap"===a.display)return l.return();o=new FontFace(t,"url("+n+")",{display:"swap"}),document.fonts.add(o),E(l)})}qo.Status={vm:Xo,Cn:Ko,Ym:2},X("shaka.util.Dom",tl),tl.removeAllChildren=ol,tl.clearSourceFromVideo=sl;var cl=null,dl=null;
/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function hl(){}function pl(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function fl(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function gl(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|127&e[t+3]}function ml(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=ze(De(e.data,1,n)),r=e.data[2+n],s=e.data.subarray(3+n).indexOf(0);if(-1===s)return null;var a,o=ze(De(e.data,3+n,s));return a="--\x3e"===i?ze(De(e.data,4+n+s)):Me(e.data.subarray(4+n+s)),t.mimeType=i,t.pictureType=r,t.description=o,t.data=a,t}return"TXXX"===e.type||"WXXX"===e.type?2>e.size||3!==e.data[0]?null:(i=e.data.subarray(1).indexOf(0),-1===i?null:(n=ze(De(e.data,1,i)),e=ze(De(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t)):"PRIV"===e.type?2>e.size?null:(n=e.data.indexOf(0),-1===n?null:(n=ze(De(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=Me(e.data.subarray(n.length+1)),t.data=e),t)):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=ze(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=ze(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Me(e.data),t):null}function yl(e){for(var t=0,n=[];pl(e,t);){var i=gl(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),s=gl(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:s,data:r.subarray(10,10+s)},(s=ml(r))&&n.push(s),t+=r.size+10}fl(e,t)&&(t+=10)}return n}function vl(e,t){for(var n=t=void 0===t?0:t,i=0;pl(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=gl(e,t+6),fl(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}function bl(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function Tl(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&3==e[i]&&0==e[i-1]&&0==e[i-2]||(t[n]=e[i],n++);this.j=De(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function _l(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);0!==i&&(n.set(e.j.subarray(t,t+i)),e.h=new Os(n,0).W(),e.g=8*i,e.i-=i)}function wl(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,_l(e)}e.h<<=t,e.g-=t}function Sl(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&_l(e),n=t-n,0<n?i<<n|Sl(e,n):i}function El(e){var t;for(t=0;t<e.g;++t)if(0!==(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;return _l(e),t+El(e)}function Al(e){wl(e,1+El(e))}function Cl(e){var t=El(e);return Sl(e,t+1)-1}function Il(e){return e=Cl(e),1&e?1+e>>>1:-1*(e>>>1)}function xl(e){return 1===Sl(e,1)}function kl(e){return Sl(e,8)}function Ml(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=Il(e),i=(n+i+256)%256),n=0===i?n:i}function Dl(e){return kl(e),Cl(e),Cl(e)}function Rl(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.B=this.C=null,this.i=[],this.h=[],this.D=null,this.l=[],this.F=this.s=this.u=null}function Ol(e,t){if(1!==(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(192&i){var r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.u&&(e.u=r),n.pts=Ul(r,e.u),e.u=n.pts,n.dts=n.pts,64&i&&(i=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.s&&(e.s=i),n.dts=n.pts!=r?Ul(i,e.s):i),e.s=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Nl(e){var t=e.cd();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function Ll(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.tf();if(!n.length)return t;if(n=n.find(function(e){return 7==e.type}),!n)return t;n=new Tl(n.data);var i=kl(n),r=kl(n),s=kl(n);if(Al(n),jl.includes(i)){var a=Cl(n);if(3===a&&wl(n,1),Al(n),Al(n),wl(n,1),xl(n)){a=3!==a?8:12;for(var o=0;o<a;o++)xl(n)&&Ml(n,6>o?16:64)}}if(Al(n),a=Cl(n),0===a)Cl(n);else if(1===a)for(wl(n,1),Al(n),Al(n),a=Cl(n),o=0;o<a;o++)Al(n);Al(n),wl(n,1),a=Cl(n),o=Cl(n);var l=Sl(n,1);0===l&&wl(n,1),wl(n,1);var u=0,c=0,d=0,h=0;return xl(n)&&(u=Cl(n),c=Cl(n),d=Cl(n),h=Cl(n)),t.height=String((2-l)*(o+1)*16-2*d-2*h),t.width=String(16*(a+1)-2*u-2*c),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+s.toString(16).toUpperCase()).slice(-2),t.frameRate=Nl(e),t}function Pl(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.tf();if(!n.length)return t;if(n=n.find(function(e){return 33==e.type}),!n)return t;var i=new Tl(n.fullData,!0);kl(i),kl(i),Sl(i,4);var r=Sl(i,3);xl(i);var s=Sl(i,2),a=Sl(i,1),o=Sl(i,5),l=Sl(i,32);n=kl(i);for(var u=kl(i),c=kl(i),d=kl(i),h=kl(i),p=kl(i),f=kl(i),g=[],m=[],y=0;y<r;y++)g.push(xl(i)),m.push(xl(i));if(0<r)for(y=r;8>y;y++)Sl(i,2);for(y=0;y<r;y++)g[y]&&Sl(i,88),m[y]&&kl(i);Cl(i),r=Cl(i),3==r&&Sl(i,1),g=Cl(i),m=Cl(i);var v=y=0,b=0,T=0;return xl(i)&&(y+=Cl(i),v+=Cl(i),b+=Cl(i),T+=Cl(i)),t.width=String(g-(y+v)*(1===r||2===r?2:1)),t.height=String(m-(b+T)*(1===r?2:1)),i=function(e){for(var t=0,n=0;32>n;n++)t|=(e>>n&1)<<31-n;return t>>>0}(l),a=1==a?"H":"L",s="hvc1."+["","A","B","C"][s]+o,s+="."+i.toString(16).toUpperCase(),s+="."+a+f,p&&(s+="."+p.toString(16).toUpperCase()),h&&(s+="."+h.toString(16).toUpperCase()),d&&(s+="."+d.toString(16).toUpperCase()),c&&(s+="."+c.toString(16).toUpperCase()),u&&(s+="."+u.toString(16).toUpperCase()),n&&(s+="."+n.toString(16).toUpperCase()),t.codec=s,t.frameRate=Nl(e),t}function Ul(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Bl(e){return!(0>Fl(e))}function Fl(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}X("shaka.util.Id3Utils",hl),hl.getID3Data=vl,hl.getID3Frames=yl,X("shaka.util.ExpGolomb",Tl),i=Rl.prototype,i.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},i.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Fl(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71==e[r]){var s=!!(64&e[r+1]),a=((31&e[r+1])<<8)+e[r+2];if(1<(48&e[r+3])>>4){var o=r+5+e[r+4];if(o==r+188)continue}else o=r+4;switch(a){case 0:s&&(o+=e[o]+1),this.G=(31&e[o+10])<<8|e[o+11];break;case 17:case 8191:break;case this.G:s&&(o+=e[o]+1),s=e,a={audio:-1,video:-1,uf:-1,audioCodec:"",videoCodec:""};var l=o+3+((15&s[o+1])<<8|s[o+2])-4;for(o+=12+((15&s[o+10])<<8|s[o+11]);o<l;){var u=(31&s[o+1])<<8|s[o+2],c=(15&s[o+3])<<8|s[o+4];switch(s[o]){case 6:if(0<c)for(var d=o+5,h=c;2<h;){var p=s[d+1]+2;switch(s[d]){case 5:var f=Ke(s.subarray(d+2,d+p));-1==a.audio&&"Opus"===f?(a.audio=u,a.audioCodec="opus"):-1==a.video&&"AV01"===f&&(a.video=u,a.videoCodec="av1");break;case 106:-1==a.audio&&(a.audio=u,a.audioCodec="ac3");break;case 122:-1==a.audio&&(a.audio=u,a.audioCodec="ec3");break;case 124:-1==a.audio&&(a.audio=u,a.audioCodec="aac");break;case 127:"opus"==a.audioCodec&&(f=null,128===s[d+2]&&(f=s[d+3]),null!=f&&(this.F={channelCount:0===(15&f)?2:15&f,gk:f,sampleRate:48e3}))}d+=p,h-=p}break;case 15:-1==a.audio&&(a.audio=u,a.audioCodec="aac");break;case 17:-1==a.audio&&(a.audio=u,a.audioCodec="aac-loas");break;case 21:-1==a.uf&&(a.uf=u);break;case 27:-1==a.video&&(a.video=u,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=u,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=u,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=u,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=u,a.audioCodec="ec3")}o+=c+5}s=a,-1!=s.video&&(this.I=s.video,this.m=s.videoCodec),-1!=s.audio&&(this.C=s.audio,this.B=s.audioCodec),-1!=s.uf&&(this.D=s.uf),i&&!this.H&&(i=!1,r=t-188),this.H=!0;break;case this.I:o=e.subarray(o,r+188),s?this.j.push([o]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(o);break;case this.C:o=e.subarray(o,r+188),s?this.i.push([o]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(o);break;case this.D:o=e.subarray(o,r+188),s?this.l.push([o]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(o);break;default:i=!0}}return this},i.Ol=function(e){return Bt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Gh(e,{qe:null,state:null})},i.Gh=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;"hvc"==this.m&&(r=2);var s=t.state||0,a=s,o=0,l=[],u=-1,c=0;for(-1==s&&(u=0,c="hvc"==this.m?e[0]>>1&63:31&e[0],s=0,o=1);o<i;){var d=e[o++];s?1===s?s=d?0:2:d?1==d?(d=o-s-1,0<=u?l.push({data:e.subarray(u+r,d),fullData:e.subarray(u,d),type:c,time:n,state:null}):(s=l.length?l[l.length-1]:t.qe)&&(a&&o<=4-a&&s.state&&(s.data=s.data.subarray(0,s.data.byteLength-a),s.fullData=s.fullData.subarray(0,s.fullData.byteLength-a)),0<d&&(d=e.subarray(0,d),s.data=it(s.data,d),s.fullData=it(s.fullData,d),s.state=0)),o<i?(c="hvc"==this.m?e[o]>>1&63:31&e[o],u=o,s=0):s=-1):s=0:s=3:s=d?0:1}return 0<=u&&0<=s&&l.push({data:e.subarray(u+r,i),fullData:e.subarray(u,i),type:c,time:n,state:s}),!l.length&&t.qe&&(n=l.length?l[l.length-1]:t.qe)&&(n.data=it(n.data,e),n.fullData=it(n.fullData,e)),t.state=s,l},i.getMetadata=function(){for(var e=[],t=d(this.l),n=t.next();!n.done;n=t.next())n=it.apply(Qe,h(n.value)),(n=Ol(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:yl(n.data),dts:n.dts,pts:n.pts});return e},i.yb=function(){if(this.i.length&&!this.h.length)for(var e=d(this.i),t=e.next();!t.done;t=e.next()){var n=it.apply(Qe,h(t.value)),i=Ol(this,n);t=this.h.length?this.h[this.h.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!t||t.pts!=i.pts&&t.dts!=i.dts)?this.h.push(i):this.h.length&&(n=i?i.data:n)&&(t=this.h.pop(),t.data=it(t.data,n),this.h.push(t))}return this.h},i.cd=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=d(this.j),n=t.next();!n.done;n=t.next()){var i=it.apply(Qe,h(n.value)),r=Ol(this,i);n=this.g.length?this.g[this.g.length-1]:null,r&&null!=r.pts&&null!=r.dts&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?this.g.push(r):this.g.length&&(i=r?r.data:i)&&(n=this.g.pop(),n.data=it(n.data,i),this.g.push(n))}if(e){for(t={qe:null,state:null},n=[],i=d(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.nalus=this.Gh(r,t),r.nalus.length&&(n.push(r),t.qe=r.nalus[r.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},i.getStartTime=function(e){if("audio"==e){e=null;var t=this.yb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,t=this.cd(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},i.ae=function(){return{audio:this.B,video:this.m}},i.tf=function(){for(var e=[],t=d(this.cd()),n=t.next();!n.done;n=t.next())e.push.apply(e,h(n.value.nalus));return e},i.ll=function(){Bt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.nh();return{height:e.height,width:e.width}},i.nh=function(){return"hvc"==this.m?Pl(this):Ll(this)},X("shaka.util.TsParser",Rl),Rl.syncOffset=Fl,Rl.probe=Bl,Rl.prototype.getVideoInfo=Rl.prototype.nh,Rl.prototype.getVideoResolution=Rl.prototype.ll,Rl.prototype.getVideoNalus=Rl.prototype.tf,Rl.prototype.getCodecs=Rl.prototype.ae,Rl.prototype.getStartTime=Rl.prototype.getStartTime,Rl.prototype.getVideoData=Rl.prototype.cd,Rl.prototype.getAudioData=Rl.prototype.yb,Rl.prototype.getMetadata=Rl.prototype.getMetadata,Rl.prototype.parseNalus=Rl.prototype.Gh,Rl.prototype.parseAvcNalus=Rl.prototype.Ol,Rl.prototype.parse=Rl.prototype.parse,Rl.prototype.clearData=Rl.prototype.clearData,Rl.Timescale=9e4;var jl=[100,110,122,244,44,83,86,118,128,138,139,134];function Vl(e,t,n,i,r){var s=this;this.g=e,this.N=n,this.B=i,this.Z=t,this.l=new Map,this.D=new Map,this.fb=new Map,this.h=null,this.Ha=!1,this.L=r||null,this.s=new Map,this.u=new Rt,this.j=new Map,this.I=null,this.J=new as,this.sa="",this.cb=!1,this.ra=!0,this.K=!1,this.C=this.O=null,this.i=Hl(this,this.J),this.La=this.F=!1,this.H=new ks(function(){return ql(s)}),this.G=!1,this.P="UNKNOWN",this.Ta=this.Ya=!1,this.Na=new as,this.m=!1,this.oa=null,this.Y=new Map,this.ba=this.R=this.na=this.U=null,this.$=new as,this.g.remote&&(this.K="disconnected"!=this.g.remote.state,this.u.o(this.g.remote,"connect",function(){s.K="disconnected"!=s.g.remote.state}),this.u.o(this.g.remote,"connecting",function(){s.K="disconnected"!=s.g.remote.state}),this.u.o(this.g.remote,"disconnect",function(){s.K="disconnected"!=s.g.remote.state}))}function Hl(t,n){if(t.ra=!0,e.ManagedMediaSource){t.C||(t.g.disableRemotePlayback=!0);var i=new ManagedMediaSource;t.u.o(i,"startstreaming",function(){t.ra=!0}),t.u.o(i,"endstreaming",function(){t.ra=!1})}else i=new MediaSource;return t.u.qa(i,"sourceopen",function(){URL.revokeObjectURL(t.sa),n.resolve()}),t.u.qa(t.g,"playing",function(){t.cb=!0}),t.sa=xu(i),t.B.useSourceElements?(t.g.removeAttribute("src"),t.O&&t.g.removeChild(t.O),t.C&&t.g.removeChild(t.C),t.O=rl(t.sa),t.g.appendChild(t.O),t.C&&t.g.appendChild(t.C),t.g.load()):t.g.src=t.sa,i}function zl(t,n,i){t.g&&e.ManagedMediaSource&&t.i&&t.B.useSourceElements&&(t.C&&t.g.removeChild(t.C),t.C=rl(n,i),t.g.appendChild(t.C),t.g.disableRemotePlayback=!1)}function Gl(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(h(Xi)),t={};Be(),e=d(e);for(var n=e.next();!n.done;n=e.next()){n=n.value,Qi(n)?t[n]=!0:t[n]=r_()?Wt(n)||!!Mi(n):""!=ll().canPlayType(n);var i=n.split(";")[0];t[i]=t[i]||t[n]}return t}function ql(e){var t,n,i,r,s,a,o,l,u,c,h,p,f,g,m;return U(function(y){if(1==y.g){for(t=[],n=d(e.s),i=n.next();!i.done;i=n.next())for(r=i.value,s=d(r),a=s.next().value,o=s.next().value,l=o[0],u=a,e.s.set(u,o.slice(0,1)),l&&t.push(l.p.catch(or)),c=d(o.slice(1)),h=c.next();!h.done;h=c.next())p=h.value,p.p.reject(new Le(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),S(y,Promise.all(t),2)}for(f=d(e.j.values()),g=f.next();!g.done;g=f.next())m=g.value,m.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.O&&(e.g.removeChild(e.O),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.O=null,e.C=null,e.B=null,e.i=null,e.h=null,e.Z=null,e.l.clear(),e.fb.clear(),e.j.clear(),e.I=null,e.s.clear(),e.L=null,e.Y.clear(),e.N=null,E(y)})}function Wl(e,t,n,i){"audio"==t&&i&&(i=Sr(i,n.mimeType));var s=Ui(n.mimeType,i);if(t==ct)Kl(e,s,e.G,n.external);else{var a=e.B.forceTransmux;(!Wt(s)||!e.G&&Xi.includes(s))&&(a=!0);var o=Bi(n.mimeType,i);if(a){if(a=lt("audio",(i||"").split(",")),i=lt("video",(i||"").split(",")),a&&i)return e.m=!0,Wl(e,"audio",n,a),void Wl(e,"video",n,i);(i=Mi(o))&&(s=i(),e.j.set(t,s),s=s.convertCodecs(t,o))}o=s+e.B.addExtraFeaturesToSourceBuffer(s),Ms(e.H);try{var l=e.i.addSourceBuffer(o)}catch(r){throw new Le(2,3,3015,r,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.G&&(l.mode=ku),e.u.o(l,"error",function(){var n=e.s.get(t)[0];n.p.reject(new Le(2,3,3014,e.g.error?e.g.error.code:0,n.uri))}),e.u.o(l,"updateend",function(){return fu(e,t)}),e.l.set(t,l),e.D.set(t,s),e.fb.set(t,!!n.drmInfos.length)}}function Xl(e){return e.ra&&!e.K&&!e.F}function Kl(e,t,n,i){e.h||(e.h=new Ki(e.Z),e.h&&(e.h.B=e.B.modifyCueCallback));var r=e.h;i=i||e.Ha,e=e.P,"application/cea-608"==t||"application/cea-708"==t?r.i=null:(r.i=ir.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Bt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Bt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.C=i)}function Yl(e){return!e.F&&(!e.i||"ended"==e.i.readyState)}function $l(e){return!e.F&&(!e.i||"closed"==e.i.readyState)}function Ql(e,t){return e.l.size?t==ct?e=e.h.g:(e=eu(e,t),e=!e||Yo(e)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null):e=null,e}function Zl(e,t){return e.l.size?t==ct?e.h.h:$o(eu(e,t)):null}function Jl(e,t,n){return t==ct?(e=e.h,null==e.h||e.h<n?0:e.h-Math.max(n,e.g)):(e=eu(e,t),Zo(e,n))}function eu(e,t){if(e.F||e.K)return null;try{return e.l.get(t).buffered}catch(n){return e.l.has(t),null}}function tu(e,t,n,i,r,s){var a=null,o=[],l=De(n);if(Xi.includes(s))t=yl(l),t.length&&i&&((n=t.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&"number"==typeof n.data&&(a=Math.round(n.data)/1e3),e.N.onMetadata([{cueTime:i.startTime,data:l,frames:t,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(s.includes("/mp4")&&i&&i.ea&&i.ea.timescale){var u=i.ea.timescale;if(!isNaN(u)){var c=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.B.dispatchAllEmsgBoxes,d=0,h=!1;l=new Ps,c&&l.V("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var s=t.reader.hd(),a=t.reader.hd(),o=t.reader.W(),l=t.reader.W(),u=t.reader.W(),c=t.reader.W(),d=i.startTime+l/o;else o=t.reader.W(),d=t.reader.Ld()/o+i.timestampOffset,l=d-i.startTime,u=t.reader.W(),c=t.reader.W(),s=t.reader.hd(),a=t.reader.hd();t=t.reader.Xb(t.reader.getLength()-t.reader.Ua()),(n&&n.includes(s)||e.B.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==s?e.N.Nl():(n=d+u/o,o={startTime:d,endTime:n,schemeIdUri:s,value:a,timescale:o,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t},c=(new Map).set("detail",o),new K("emsg",c).cancelable=!0,e.N.Ll(o),("https://aomedia.org/emsg/ID3"==s||"https://developer.apple.com/streaming/emsg-id3"==s)&&(s=yl(t),s.length&&e.N.onMetadata([{cueTime:d,data:t,frames:s,dts:d,pts:d}],0,n))))}),l.V("prft",function(t){var n=t.reader,i=t.version;n.W(),t=n.W();var r=n.W();t=1e3*t+r/Math.pow(2,32)*1e3,0===i?n=n.W():(i=n.W(),n=n.W(),n=i*Math.pow(2,32)+n),t=bl(t),n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/u*1e3)}),n=new K("prft",n),e.N.onEvent(n)}).box("moof",Us).box("traf",Us).V("tfdt",function(e){h||(d=eo(e.reader,e.version).baseMediaDecodeTime/u,h=!0,c||e.parser.stop())}).parse(n,!0),h&&0==i.timestampOffset&&(a=d)}}else s.includes("/mp4")||s.includes("/webm")||!Bl(l)||(e.Y.has(t)?e.Y.get(t).clearData():e.Y.set(t,new Rl),o=e.Y.get(t).parse(l),l=o.getStartTime(t),null!=l&&(a=l),o=o.getMetadata());return{timestamp:a,metadata:o}}function nu(e,t,n,i,r,s,a,o,l,u,c){var d,h,p,f,g,m,y,v,b,T,_,w,A,C,I,x,k;return a=void 0!==a&&a,o=void 0!==o&&o,l=void 0!==l&&l,u=void 0!==u&&u,U(function(M){switch(M.g){case 1:if(d=dt,t!=d.gb){M.A(2);break}if("HLS"!=e.P){M.A(3);break}return S(M,e.Na,4);case 4:h=M.h,e.h.u=h;case 3:return S(M,Zi(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.S()[0]:null),5);case 5:return M.return();case 2:if(u||!e.m){M.A(6);break}return S(M,nu(e,d.ma,n,i,r,s,a,o,l,!0),7);case 7:return S(M,nu(e,d.Ea,n,i,r,s,a,o,l,!0),8);case 8:return M.return();case 6:if(!e.l.has(t))return M.return();if(p=e.l.get(t).timestampOffset,f=e.D.get(t),e.j.has(t)&&(f=e.j.get(t).getOriginalMimeType()),i&&(g=tu(e,t,n,i,r,f),m=g.timestamp,y=g.metadata,null!=m&&(null==e.U&&t==d.Ea&&(e.U=m,e.na=i.startTime,null!=e.R&&(v=0,e.na==e.ba&&(v=e.U-e.R),e.$.resolve(v))),null==e.R&&t==d.ma&&(e.R=m,e.ba=i.startTime,null!=e.U&&(b=0,e.na==e.ba&&(b=e.U-e.R),e.$.resolve(b))),T=m,_=Xi,!e.G&&_.includes(e.D.get(t))&&(T=0),w=i.startTime-T,A=Math.abs(p-w),(.001<=A||a||o)&&(!l||0<w||!p)&&(p=w,e.Ta&&(gu(e,t,function(){return du(e,t)},null),gu(e,t,function(){return hu(e,t,p)},null))),(t==d.Ea||!e.l.has(d.Ea))&&e.Na.resolve(p)),y.length)&&e.N.onMetadata(y,p,i?i.endTime:null),s&&t==d.Ea&&(e.h||Kl(e,"application/cea-608",e.G,!1),e.I||(C=f.split(";",1)[0],e.I=new Jt(C)),i?(I=e.I.Of(n),I.length&&nr(e.h,I,i.startTime,i.endTime,p)):e.I.init(n,o,c)),!e.j.has(t)){M.A(9);break}return S(M,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:n=M.h;case 9:if(n=Tu(e,r,n,i,t),!i||!e.G||t==d.gb){M.A(11);break}if(!a&&!o){M.A(11);break}if(x=i.startTime,"HLS"!=e.P||e.m||t!=d.ma||!e.l.has(d.Ea)){M.A(13);break}return S(M,e.$,14);case 14:k=M.h,.15<Math.abs(k)&&(x-=k);case 13:gu(e,t,function(){return du(e,t)},null),gu(e,t,function(){return hu(e,t,x)},null);case 11:return S(M,gu(e,t,function(){var i=n;e.L&&zt(e.L,i,p,r),e.l.get(t).appendBuffer(i)},i?i.S()[0]:null),15);case 15:E(M)}})}function iu(e,t){var n=Zl(e,"video")||0;er(e.h,t,n)}function ru(e){e.h&&er(e.h,"",0)}function su(e,t){var n;return U(function(i){return 1==i.g?(n=dt,t==n.gb?e.h?S(i,e.h.remove(0,1/0),0):i.return():S(i,gu(e,t,function(){return cu(e,t,0,e.i.duration)},null),4)):e.m?S(i,gu(e,n.ma,function(){return cu(e,n.ma,0,e.i.duration)},null),0):i.A(0)})}function au(e,t,n,i,r,s,a,o,l){var u,c,d;return U(function(h){return 1==h.g?(u=dt,t==u.gb?(s||(e.h.u=n),Ji(e.h,i,r),h.return()):(c=[],S(h,Cu(e,t,a,o,l),2))):(d=h.h,d||(c.push(gu(e,t,function(){return du(e,t)},null)),e.m&&c.push(gu(e,u.ma,function(){return du(e,u.ma)},null))),s||(c.push(gu(e,t,function(){return hu(e,t,n)},null)),e.m&&c.push(gu(e,u.ma,function(){return hu(e,u.ma,n)},null))),0==i&&1/0==r||(c.push(gu(e,t,function(){return pu(e,t,i,r)},null)),e.m&&c.push(gu(e,u.ma,function(){return pu(e,u.ma,i,r)},null))),c.length?S(h,Promise.all(c),0):h.A(0))})}function ou(e,t,n){var i,r;return U(function(s){return 1==s.g?(i=dt,t==i.gb?s.return():(t==i.Ea&&(e.Na=new as),!e.G||(r=Zl(e,t))&&.1>Math.abs(r-n)?s.return():(gu(e,t,function(){return du(e,t)},null),e.m&&gu(e,i.ma,function(){return du(e,i.ma)},null),S(s,gu(e,t,function(){return hu(e,t,n)},null),2)))):e.m?S(s,gu(e,i.ma,function(){return hu(e,i.ma,n)},null),0):s.A(0)})}function lu(e,t,n){U(function(i){return e.H.g||e.g.error||e.K||e.F||Yl(e)||$l(e)?i.return():S(i,mu(e,function(){Yl(e)||$l(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function uu(e){U(function(t){return e.H.g||e.g.error||e.K||e.F||Yl(e)||$l(e)?t.return():S(t,mu(e,function(){Yl(e)||$l(e)||e.i.clearLiveSeekableRange()}),0)})}function cu(e,t,n,i){i<=n?fu(e,t):e.l.get(t).remove(n,i)}function du(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,fu(e,t)}function hu(e,t,n){0>n&&(n+=.001);var i=!0;"HLS"==e.P&&(i=Zl(e,t),i=!i||.15<Math.abs(i-n)),i&&(e.l.get(t).timestampOffset=n),fu(e,t)}function pu(e,t,n,i){var r=e.l.get(t);r.appendWindowEnd===i&&r.appendWindowStart===n||(r.appendWindowStart=0,r.appendWindowEnd=i,r.appendWindowStart=n),fu(e,t)}function fu(e,t){if(e.F||e.H.g){var n=e.s.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.s.set(t,[]))}else(n=e.s.get(t)[0])&&(n.p.resolve(),yu(e,t))}function gu(e,t,n,i){return Ms(e.H),n={start:n,p:new as,uri:i},e.s.get(t).push(n),1==e.s.get(t).length&&vu(e,t),n.p}function mu(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g;return U(function(m){switch(m.g){case 1:for(Ms(e.H),n=[],i=Array.from(e.l.keys()),r=d(i),s=r.next(),a={};!s.done;a={ready:void 0},s=r.next())o=s.value,a.ready=new as,l={start:function(e){return function(){return e.ready.resolve()}}(a),p:a.ready,uri:null},u=e.s.get(o),u.push(l),n.push(a.ready),1==u.length&&l.start();return A(m,2),S(m,Promise.all(n),4);case 4:I(m,3);break;case 2:throw c=x(m),c;case 3:return A(m,5,6),S(m,t(),6);case 6:for(k(m),h=d(i),p=h.next();!p.done;p=h.next())f=p.value,yu(e,f);M(m,0);break;case 5:throw g=x(m),new Le(2,3,3015,g,e.g.error||"No error in the media element",null)}})}function yu(e,t){e.s.get(t).shift(),vu(e,t)}function vu(e,t){var n=e.s.get(t)[0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Le(2,3,3017,t)):Xl(e)?n.p.reject(new Le(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new Le(2,3,3024,t)),yu(e,t)}}function bu(e,t){e.Z=t,e.h&&(e.h.j=t)}function Tu(e,t,n,i,r){if("mp4"!=ji(e.D.get(r)))return n;var s=null===i,a=e.fb.get(r),o=e.N.Jk(),l=!1;i&&i.ea&&(l=i.ea.encrypted),i=i?i.S()[0]:null;var u=Be();return e.B.correctEc3Enca&&s&&"audio"===r&&(n=Po(n)),e.B.insertFakeEncryptionInInit&&a&&u.xe(o,r)&&(s?n=Uo(t,n,i):!l&&u.sj(r)&&(n=Bo(n))),s&&u.we()&&(n=Ho(n)),n}function _u(e,t,n,i){return gu(e,t,function(){if(t!==ct){if(e.D.get(t),Xt()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.D.set(t,n)}fu(e,t)}},null)}function wu(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w;return U(function(E){if(1==E.g){if(e.F||e.K)return E.return();for(n=dt,e.F=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.La=!0),e.cb&&(e.g.autoplay=!1),C(E,2),e.u.Sa(),s=d(e.j.values()),a=s.next();!a.done;a=s.next())o=a.value,o.destroy();for(l=d(e.l.values()),u=l.next();!u.done;u=l.next()){c=u.value;try{e.i.removeSourceBuffer(c)}catch(A){}}return e.j.clear(),e.l.clear(),h=e.i.duration,e.J=new as,e.i=Hl(e,e.J),S(E,e.J,4)}if(2!=E.g){for(!isNaN(h)&&h?e.i.duration=h:!isNaN(e.oa)&&e.oa&&(e.i.duration=e.oa),p=new as,f=e.i.sourceBuffers,g=t.size,m=0,y=function(){m++,m===g&&(p.resolve(),e.u.Da(f,"addsourcebuffer",y))},e.u.o(f,"addsourcebuffer",y),v=d(t.keys()),b=v.next();!b.done;b=v.next())T=b.value,_=t.get(T),Wl(e,T,_,_.codecs);return(w=t.get(n.ma))&&w.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.s.has(n.ma)&&e.s.set(n.ma,[]),e.g.currentTime=i,S(E,p,2)}return k(E),e.F=!1,Ms(e.H),e.u.qa(e.g,"canplaythrough",function(){e.H.g||(e.g.autoplay=r,e.La&&(e.La=!1,e.g.play()))}),M(E,0)})}function Su(e,t){return mu(e,function(){return wu(e,t)})}function Eu(e,t,n,i){var r=!1,s=lt("audio",(i||"").split(",")),a=lt("video",(i||"").split(",")),o=a;"audio"==t&&(o=s),o||(o=i),i=Ui(n,o);var l=zi(e.D.get(t)),u=e.B.forceTransmux;if(!Wt(i)||!e.G&&Xi.includes(i)?u=!0:u||n==l||(u="WEBKIT"===Be().Ia()&&Xi.includes(n)),u&&(e=Bi(n,o),n=Mi(e))){var c=n();s&&a&&(r=!0),i=c.convertCodecs(t,e)}return t=Vi(Gi(i)),{kc:c,nm:r,Ai:zi(i),codec:t,mimeType:i}}function Au(e,t,n,i,r){if(t==ct)return{type:Mu,If:n,kc:null};var s=Vi(Gi(e.D.get(t))),a=zi(e.D.get(t)),o=Eu(e,t,n,i),l=o.kc,u=o.nm,c=o.Ai,d=o.codec;o=o.mimeType;var h=!0;return u&&e.D.has("audio")&&(n=Eu(e,"audio",n,i),i=Vi(Gi(e.D.get("audio"))),h=zi(e.D.get("audio")),h=i==n.codec&&h==n.Ai,n.kc&&n.kc.destroy()),s===d&&a===c&&h?{type:Mu,If:o,kc:l}:(s=!0,(e.m&&!r.has("audio")||u&&l&&!e.j.has(t))&&(s=!1),s&&"smooth"===e.B.codecSwitchingStrategy&&Xt()?{type:Ru,If:o,kc:l}:(l&&l.destroy(),{type:Du,If:o,kc:null}))}function Cu(e,t,n,i,r){var s,a,o,l,u,c;return U(function(d){return 1==d.g?(s=dt,a=Au(e,t,n,i,r),o=a.type,l=a.kc,u=a.If,(c=r.get(s.ma))&&(e.m=c.isAudioMuxedInVideo),o==Mu?(e.j.has(t)&&!l?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&l?e.j.set(t,l):l&&(e.j.has(t)&&e.j.get(t).transmux!==l.transmux?(e.j.get(t).destroy(),e.j.set(t,l)):l.destroy()),d.return(!1)):o==Ru?S(d,_u(e,t,u,l),3):o!=Du?d.A(3):(l&&l.destroy(),S(d,Su(e,r),3))):d.return(!0)})}function Iu(e,t,n,i,r){return e=Au(e,t,n,i,r),e.kc&&e.kc.destroy(),e.type==Du}i=Vl.prototype,i.destroy=function(){return this.H.destroy()},i.init=function(e,t,n,i){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,i=void 0!==i&&i;var r,s,a,o,l,u,c=this;return U(function(h){if(1==h.g)return r=dt,S(h,c.J,2);if(3!=h.g)return Yl(c)||$l(c)?(Z("Expected MediaSource to be open during init(); reopening the media source."),c.J=new as,c.i=Hl(c,c.J),S(h,c.J,3)):h.A(3);for(c.G=t,c.P=n,c.Ya=i,c.Ta=!c.G&&"HLS"==c.P&&!c.Ya,c.Y.clear(),c.U=null,c.na=null,c.R=null,c.ba=null,c.$=new as,s=d(e.keys()),a=s.next();!a.done;a=s.next())o=a.value,l=e.get(o),Wl(c,o,l,l.codecs),c.m?(c.s.set(r.ma,[]),c.s.set(r.Ea,[])):c.s.set(o,[]);(u=e.get(r.ma))&&u.isAudioMuxedInVideo&&(c.m=!0),E(h)})},i.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)},i.Qb=function(){var e={total:this.F?[]:el(this.g.buffered),audio:el(eu(this,"audio")),video:el(eu(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n,i){var r,s=this;return U(function(a){return 1==a.g?(r=dt,e==r.Ea&&s.I&&s.I.remove(i),e==r.gb?S(a,s.h.remove(t,n),0):n>t?S(a,gu(s,e,function(){return cu(s,e,t,n)},null),5):a.A(0)):s.m?S(a,gu(s,r.ma,function(){return cu(s,r.ma,t,n)},null),0):a.A(0)})},i.flush=function(e){var t,n=this;return U(function(i){return 1==i.g?(t=dt,e==t.gb?i.return():S(i,gu(n,e,function(){n.g.currentTime-=.001,fu(n,e)},null),2)):n.m?S(i,gu(n,t.ma,function(){var e=t.ma;n.g.currentTime-=.001,fu(n,e)},null),0):i.A(0)})},i.endOfStream=function(e){var t=this;return U(function(n){return S(n,mu(t,function(){Yl(t)||$l(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},i.vb=function(e){var t=this;return U(function(n){return S(n,mu(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var n=d(t.l.keys()),i=n.next();!i.done;i=n.next()){i=i.value;var r={start:function(){},p:new as,uri:null};t.s.get(i).unshift(r)}t.i.duration=e,t.oa=e}),0)})},i.getDuration=function(){return this.i.duration};var xu=e.URL.createObjectURL,ku="sequence",Mu="none",Du="reset",Ru="changeType";function Ou(e,t,n){this.i=e,this.D=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.I=!1,this.H=0,this.F=void 0===n||n,this.G=0,this.s=!1,this.m=e}function Nu(e,t,n,i){var r=this;this.u=i,this.g=e,this.C=t,this.h=n,this.s=new Rt,this.l=!1,this.F=e.readyState,this.G=this.D=this.j=0,this.m=Pu(this),this.B=!1,this.s.o(e,"waiting",function(){return Lu(r)}),this.i=new sr(function(){Lu(r)}).ya(this.h.gapJumpTimerTime)}function Lu(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){var t;if(e.g.readyState!=e.F&&(e.F=e.g.readyState),!(t=!e.m)){t=e.m;var n=t.h,i=Fu(n),r=n.g.currentTime,s=Date.now()/1e3;t.g==r&&t.m==i||(t.l=s,t.g=r,t.m=i,t.i=!1),r=s-t.l,(i=r>=t.s&&i&&!t.i)&&(t.j&&t.j(t.g,r),t.i=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=Jo(n,t,e.h.gapDetectionThreshold),null==i||0==i&&!e.B||(r=n.start(i),(s=e.h.gapPadding)&&(r=Math.ceil(100*(r+s))/100),r>=e.C.Jb()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,t==e.j&&(e.j=r),e.D++,e.u(new K("gapjumped")))))}}}function Pu(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new Uu(new Bu(e.g),t,function(){var t;return U(function(i){if(1==i.g)return t=el(e.g.buffered),t.length?n?(e.g.currentTime+=n,i.A(2)):S(i,e.g.play(),3):i.return();if(2!=i.g){if(!e.g)return i.return();e.g.pause(),e.g.play()}e.G++,e.u(new K("stalldetected")),E(i)})})}function Uu(e,t,n){this.h=e,this.m=Fu(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.s=t,this.j=n}function Bu(e){var t=this;this.g=e,this.h=new Rt,this.i=!1,this.h.o(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.o(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.o(this.g,"audiofocuslost",function(){t.i=!0})}function Fu(e){if(e.g.paused||0==e.g.playbackRate||e.i||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime,e=d(el(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ju(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Vu.value().get(t),n.qa(e,t,i))}i=Ou.prototype,i.getDuration=function(){return this.l},i.Pk=function(){return this.h},i.Gj=function(e){this.i=e},i.vb=function(e){this.l=e},i.Vk=function(){return this.i},i.Dj=function(e){this.B=e},i.md=function(e){e&&!this.C&&(this.I=!0),this.C=e},i.ag=function(e){this.u=e},i.rf=function(){return this.u},i.Uh=function(e){this.D=e},i.Ek=function(){return this.D},i.lj=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(e){return e.start+t<n}),0!=e.length){var i=e[e.length-1].end+t;this.Jf(e[0].start+t),this.h=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.h),this.g=Math.max(this.g,i),null!=this.i&&this.F&&!this.s&&(this.i=n-this.g-this.h)}}},i.re=function(e){if(0!=e.length){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.B)/1e3;e=d(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.Jf(t),this.g=Math.max(this.g,n),null!=this.i&&this.F&&!this.s&&(this.i=i-this.g-this.h)}},i.kj=function(e,t){this.Jf(e),1/0==t||this.T()||(this.g=Math.max(this.g,t))},i.Qk=function(){return this.g},i.Df=function(){this.s=!0},i.Bl=function(){return this.s},i.Wh=function(e){this.m=e},i.Ik=function(){return this.m},i.Jf=function(e){null==this.j?this.j=e:this.I||(this.j=Math.min(this.j,e))},i.Ch=function(e){this.h=Math.max(this.h,e)},i.offset=function(e){null!=this.j&&(this.j+=e),null!=this.g&&(this.g+=e)},i.T=function(){return 1/0==this.l&&!this.C},i.ed=function(){return 1/0!=this.l&&!this.C},i.Kb=function(){return Math.max(this.H,this.Gc()-this.u)},i.Ij=function(e){this.H=e},i.Gc=function(){return this.T()||this.ed()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},i.ce=function(e){var t=Math.max(this.j,this.H);return 1/0==this.u?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gc()-this.u+e,this.Jb()))},i.bc=function(){return this.ce(0)},i.Jb=function(){return Math.max(0,this.Gc()-(this.T()||this.ed()?this.D:0))},i.Vj=function(){return!(null==this.i||null!=this.g&&this.F)},i.Cj=function(e){this.G=e},i.tk=function(){return this.G},X("shaka.media.PresentationTimeline",Ou),Ou.prototype.getAvailabilityTimeOffset=Ou.prototype.tk,Ou.prototype.setAvailabilityTimeOffset=Ou.prototype.Cj,Ou.prototype.usingPresentationStartTime=Ou.prototype.Vj,Ou.prototype.getSeekRangeEnd=Ou.prototype.Jb,Ou.prototype.getSeekRangeStart=Ou.prototype.bc,Ou.prototype.getSafeSeekRangeStart=Ou.prototype.ce,Ou.prototype.getSegmentAvailabilityEnd=Ou.prototype.Gc,Ou.prototype.setUserSeekStart=Ou.prototype.Ij,Ou.prototype.getSegmentAvailabilityStart=Ou.prototype.Kb,Ou.prototype.isInProgress=Ou.prototype.ed,Ou.prototype.isLive=Ou.prototype.T,Ou.prototype.offset=Ou.prototype.offset,Ou.prototype.notifyMaxSegmentDuration=Ou.prototype.Ch,Ou.prototype.notifyMinSegmentStartTime=Ou.prototype.Jf,Ou.prototype.getInitialProgramDateTime=Ou.prototype.Ik,Ou.prototype.setInitialProgramDateTime=Ou.prototype.Wh,Ou.prototype.isStartTimeLocked=Ou.prototype.Bl,Ou.prototype.lockStartTime=Ou.prototype.Df,Ou.prototype.getMaxSegmentEndTime=Ou.prototype.Qk,Ou.prototype.notifyPeriodDuration=Ou.prototype.kj,Ou.prototype.notifySegments=Ou.prototype.re,Ou.prototype.notifyTimeRange=Ou.prototype.lj,Ou.prototype.getDelay=Ou.prototype.Ek,Ou.prototype.setDelay=Ou.prototype.Uh,Ou.prototype.getSegmentAvailabilityDuration=Ou.prototype.rf,Ou.prototype.setSegmentAvailabilityDuration=Ou.prototype.ag,Ou.prototype.setStatic=Ou.prototype.md,Ou.prototype.setClockOffset=Ou.prototype.Dj,Ou.prototype.getPresentationStartTime=Ou.prototype.Vk,Ou.prototype.setDuration=Ou.prototype.vb,Ou.prototype.setPresentationStartTime=Ou.prototype.Gj,Ou.prototype.getMaxSegmentDuration=Ou.prototype.Pk,Ou.prototype.getDuration=Ou.prototype.getDuration,Nu.prototype.release=function(){this.s&&(this.s.release(),this.s=null),null!=this.i&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.C=this.u=null},Nu.prototype.Mf=function(){this.B=!0,this.i&&this.i.ya(this.h.gapJumpTimerTime),Lu(this)},Uu.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null},Bu.prototype.release=function(){this.h&&this.h.release(),this.h=null};var Vu=new Ue(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Hu(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return null==r.l&&(r.l=i()),r.l},this.s=!1,this.h=new Rt,this.i=new Xu(e),ju(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){qu(r,r.j())})}function zu(e){return e.s?e.g.currentTime:e.j()}function Gu(e,t){0<e.g.readyState?Ku(e.i,t):ju(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){qu(e,e.j())})}function qu(e,t){.001>Math.abs(e.g.currentTime-t)?Wu(e):(e.h.qa(e.g,"seeking",function(){Wu(e)}),Ku(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Wu(e){e.s=!0,e.h.o(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Xu(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new sr(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function Ku(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.ya(.1)}function Yu(e){this.g=e,this.i=!1,this.h=null,this.j=new Rt}function $u(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Qu(e,t){return e=e.g.seekable,0<e.length&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Zu(e,t,n,i,r,s){var a=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.s=null,this.j=new Nu(e,t.presentationTimeline,n,s),this.i=new Hu(e,function(){e:{var e=a.j;e.l=!0,e.B=!1,e.i&&e.i.ya(e.h.gapJumpTimerTime),Lu(e);var t=zu(a.i);if(e=tc(a,t),!Kt()&&.001<Math.abs(e-t)){t=!1;var n=Be().xj();if(n){var i=Date.now()/1e3;(!a.s||a.s<i-n)&&(a.s=i,t=!0)}else t=!0;if(t){Gu(a.i,e),e=void 0;break e}}a.u(),e=void 0}return e},function(e){var t=a.j;t.g.seeking&&!t.l&&(t.l=!0,t.j=e),t.i&&t.i.ya(t.h.gapJumpTimerTime),Lu(t)},function(){return Ju(a,i)}),this.m=new sr(function(){if(0!=a.h.readyState&&!a.h.paused){var e=zu(a.i),t=a.g.bc(),n=a.g.Jb();3>n-t&&(t=n-3),e<t&&(e=tc(a,e),a.h.currentTime=e)}})}function Ju(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.bc():e.g.Jb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):0>t&&(t=e.g.Jb()+t),ec(e,nc(e,t))}function ec(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function tc(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.bc(),s=e.g.Jb(),a=e.g.getDuration();3>s-r&&(r=s-3);var o=e.g.ce(n),l=e.g.ce(i);return n=e.g.ce(n+i),t>=a?ec(e,t):t>s?s-e.l.safeSeekEndOffset:t<r?e.g.T()&&e.l.returnToEndOfLiveWindowWhenOutside?s-e.l.safeSeekEndOffset:Qo(e.h.buffered,l)?l:n:t>=o||Qo(e.h.buffered,t)?t:n}function nc(e,t){var n=e.g.bc();return t<n?n:(e=e.g.Jb(),t>e?e:t)}function ic(e){this.g=e,this.m=null,this.i=0,this.s=!1}function rc(e){return e.g[0]||null}function sc(e,t,n){return e=new qo(e,e+t,function(){return n},0,null,null,e,e,e+t),new ic([e])}function ac(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}function oc(){ic.call(this,[]),this.h=[]}function lc(e,t){e=d(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}function uc(e,t){e=d(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,null!=n.find(t))return n.hf();return-1}function cc(e){var t=this;this.g=e,this.j=!1,this.i=this.g.qf(),this.h=new sr(function(){t.g.hj(.25*t.i)})}function dc(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.qf()!=t&&e.g.Xh(t))}catch(n){}e.h.ya(.25),0!=e.g.qf()&&e.g.Xh(0)}function hc(e){var t=this;this.j=e,this.h=new Rt,this.g=new Set,this.i=new sr(function(){pc(t,!1)}).Ka(),e.paused||this.i.ya(.25),this.h.o(e,"playing",function(){t.i.Ka().ya(.25)}),this.h.o(e,"pause",function(){t.i.stop()})}function pc(e,t){var n=e.j.currentTime;e=d(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function fc(e){ae.call(this),this.g=new Map,this.h=e}function gc(e,t){var n=e.g.get(t);return n||(n={ve:[],Mg:null,contentType:t},e.g.set(t,n)),n}function mc(e,t,n){var i=gc(e,t.contentType);vc(e,i),e={Ed:t,position:n},i=i.ve,t=i.findIndex(function(e){return e.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}function yc(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function vc(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.ve;t.ve=r.filter(function(e,t){return!(e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i)})}else t.ve=[]}function bc(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Tc(e){ae.call(this),this.h=new Map,this.i=e,this.g=null}function _c(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1);e.h.has(n)||(e.h.set(n,t),t=new K("regionadd",new Map([["region",t]])),e.dispatchEvent(t),wc(e))}function wc(e){e.g||(e.g=new sr(function(){for(var t=e.i(),n=d(e.h),i=n.next();!i.done;i=n.next()){var r=d(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new K("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).ya(2))}function Sc(e,t,n,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.s=i}function Ec(e,t){e.l=t,e=d(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Ac(e,t,n){if(n=void 0!==n&&n,!e.i.segmentIndex)return Promise.resolve();if(e.g||(e.g=e.i.segmentIndex.ac(t,!0,e.s)),!e.g)return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m;){if(n=e.g.next().value,!n)break;var i=!0;n.isPreload()&&null!=n.endByte&&(i=!1),2==n.Ic()&&(i=!1),n.cc(!1)&&(i=!1),i&&n.ea&&t.push(Cc(e,n.ea)),i&&!e.h.has(n)&&(i=new Oc(e.l),t.push(Nc(i,n,e.i)),e.h.set(n,i))}return kc(e),Promise.all(t)}function Cc(e,t){if(!e.i.segmentIndex||t.cc()||Array.from(e.j.keys()).some(function(e){return Go(e,t)}))return Promise.resolve();var n=new Oc(e.l),i=Nc(n,t,e.i);return e.j.set(t,n),i}function Ic(e,t){t=d(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Rc(e,n)}function xc(e){Ic(e,e.h),Ic(e,e.j),e.g=null}function kc(e){for(var t=Array.from(e.h.keys()),n=d(e.j.keys()),i=n.next(),r={};!i.done;r={uh:void 0},i=n.next())r.uh=i.value,t.some(function(e){return function(t){return Go(t.ea,e.uh)}}(r))||Rc(e,r.uh)}function Mc(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var i=n.pop();i&&Rc(e,i)}kc(e)}function Dc(e,t){t&&t!==e.i&&(xc(e),e.i=t)}function Rc(e,t){var n=e.h;t instanceof zo&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Oc(e){this.g=e,this.se=this.ci=null}function Nc(e,t,n){var i=new Uint8Array(0);return e.se=e.g(t,n,function(t){return U(function(n){if(1==n.g)return i=0<i.byteLength?it(i,t):t,e.ci?S(n,e.ci(i),3):n.A(0);i=new Uint8Array(0),E(n)})}),e.se.promise.catch(function(e){return e instanceof Le&&7001==e.code?Promise.resolve():Promise.reject(e)})}function Lc(e){var t=zi(e),n=t.split("/")[0];return e=Gi(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Ge:null,colorGamut:null,frameRate:null}}function Pc(e,t,n){function i(e){a=e.name;var t=e.reader;t.skip(24);var n=t.Fa(),i=t.Fa();t.skip(50),f=String(n),p=String(i),e.reader.Oa()&&Us(e)}function r(e){var t=io(e.reader);g=t.channelCount,m=t.sampleRate,s(e.name)}function s(e){switch(e=e.toLowerCase(),e){case"avc1":case"avc3":l.push(e+".42E01E"),c=!0;break;case"hev1":case"hvc1":l.push(e+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":l.push(e+".05.04"),c=!0;break;case"vp09":l.push(e+".00.10.08"),c=!0;break;case"av01":l.push(e+".0.01M.08"),c=!0;break;case"mp4a":o.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":o.push(e),u=!0;break;case"apac":o.push("apac.31.00"),u=!0}}var a,o=[],l=[],u=!1,c=!1,h=null,p=null,f=null,g=null,m=null,y=null,v=null;if((new Ps).box("moov",Us).box("trak",Us).box("mdia",Us).V("mdhd",function(e){h=to(e.reader,e.version).language}).box("minf",Us).box("stbl",Us).V("stsd",Bs).box("mp4a",function(e){var t=io(e.reader);g=t.channelCount,m=t.sampleRate,e.reader.Oa()?Us(e):s(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,i="mp4a";e.Oa();){t=e.aa();for(var r=e.aa();128&r;)r=e.aa();if(3==t)e.Fa(),r=e.aa(),128&r&&e.Fa(),64&r&&e.skip(e.aa()),32&r&&e.Fa();else if(4==t)n=e.aa(),e.skip(12);else if(5==t)break}n&&(i+="."+ao(n),5==t&&e.Oa()&&(t=e.aa(),n=(248&t)>>3,31===n&&e.Oa()&&(n=32+((7&t)<<3)+((224&e.aa())>>5)),i+="."+n)),o.push(i),u=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("apac",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(e){var t=a||"";switch(a){case"dvav":t="avc3";break;case"dva1":t="avc1"}e=e.reader,e.skip(1),e=t+"."+ao(e.aa())+ao(e.aa())+ao(e.aa()),l.push(e),c=!0}).box("hvcC",function(e){var t=a||"";switch(a){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1),e=n.aa();var i=["","A","B","C"][e>>6],r=31&e,s=n.W(),o=(32&e)>>5?"H":"L";e=[n.aa(),n.aa(),n.aa(),n.aa(),n.aa(),n.aa()],n=n.aa();for(var u=0,d=0;32>d;d++){if(u|=1&s,31==d)break;u<<=1,s>>=1}for(t=t+"."+i+r+"."+ao(u,!0),t+="."+o+n,i="",r=e.length;r--;)((o=e[r])||i)&&(i="."+o.toString(16).toUpperCase()+i);t+=i,l.push(t),c=!0}).box("dvcC",function(e){var t=a||"";switch(a){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.aa(),n=n.aa(),l.push(t+"."+oo(e>>1&127)+"."+oo(e<<5&32|n>>3&31)),c=!0}).box("dvvC",function(e){var t=a||"";switch(a){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.aa(),n=n.aa(),l.push(t+"."+oo(e>>1&127)+"."+oo(e<<5&32|n>>3&31)),c=!0}).V("vpcC",function(e){var t=a||"",n=e.reader;e=n.aa();var i=n.aa();n=n.aa()>>4&15,l.push(t+"."+oo(e)+"."+oo(i)+"."+oo(n)),c=!0}).box("av1C",function(e){var t=a||"";switch(a){case"dav1":t="av01"}var n=e.reader;n.skip(1),e=n.aa(),n=n.aa();var i=e>>>5,r=(64&n)>>6;l.push(t+"."+i+"."+oo(31&e)+(n>>>7?"H":"M")+"."+oo(2===i&&r?(32&n)>>5?12:10:r?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+oo(1)+"."+oo(1)+"."+oo(1)+".0"),c=!0}).box("enca",js).box("encv",Fs).box("sinf",Us).box("frma",function(e){e=ro(e.reader).codec,s(e)}).box("colr",function(e){l=l.map(function(t){if(t.startsWith("av01.")){var n=e.reader,i=n.Ua(),r=n.Xb(4),s=String.fromCharCode(r[0]);if(s+=String.fromCharCode(r[1]),s+=String.fromCharCode(r[2]),s+=String.fromCharCode(r[3]),"nclx"===s){r=n.Fa(),s=n.Fa();var a=n.Fa(),o=n.aa()>>7,l=t.split(".");10==l.length&&(l[6]=oo(r),l[7]=oo(s),l[8]=oo(a),l[9]=String(o),t=l.join("."))}n.seek(i)}return t});var t=so(e.reader),n=t.colorGamut;y=t.Ge,v=n}).parse(e||t,!0),!o.length&&!l.length)return null;var b=u&&!c,T=new Map;if(c&&!n){n=new Jt("video/mp4"),e&&n.init(e);try{n.Of(t);for(var _=d(n.rg()),w=_.next();!w.done;w=_.next()){var S=w.value;T.set(S,S)}}catch(E){}n.Sd()}return{type:b?"audio":"video",mimeType:b?"audio/mp4":"video/mp4",codecs:Uc(o.concat(l)).join(", "),language:h,height:p,width:f,channelCount:g,sampleRate:m,closedCaptions:T,Ge:y,colorGamut:v,frameRate:null}}function Uc(e){var t=new Set,n=[];e=d(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=Hi(i);t.has(r)||(n.push(i),t.add(r))}return t=ut("audio",n),i=ut("video",n),e=ut(ct,n),i=Bc(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function Bc(e){if(1>=e.length)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?Wt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}function Fc(e){var t=null;return(new Ps).box("moov",Us).box("trak",Us).box("mdia",Us).box("minf",Us).box("stbl",Us).V("stsd",Bs).box("encv",Fs).box("enca",js).box("sinf",Us).box("schi",Us).V("tenc",function(e){e=e.reader,e.aa(),e.aa(),e.aa(),e.aa(),t=nt(e.Xb(16))}).parse(e,!0),t}function jc(t,n,i){var r,s,a,o,l;return U(function(u){if(1==u.g)return r=n,r.cryptoKey?u.A(2):S(u,r.fetchKey(),3);if(s=r.iv,!s)for(s=De(new ArrayBuffer(16)),a=r.firstMediaSequenceNumber+i,o=s.byteLength-1;0<=o;o--)s[o]=255&a,a>>=8;return l="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:s}:{name:"AES-CTR",counter:s,length:64},u.return(e.crypto.subtle.decrypt(l,r.cryptoKey,t))})}function Vc(e,t,n,i,r){return e=bs(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Hc(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.J=new Map,this.D=1,this.B=this.s=null,this.O=0,this.h=new Map,this.I=!1,this.P=null,this.C=!1,this.l=new ks(function(){return zc(n)}),this.L=Date.now()/1e3,this.m=new Map,this.N={projection:null,hfov:null},this.U=0,this.R=1/0,this.F=null,this.K=[],this.u=new sr(function(){if(n.j&&n.g)if(n.j.presentationTimeline.T()){var e=n.j.presentationTimeline.bc(),t=n.j.presentationTimeline.Jb();1<t-e?lu(n.g.ha,e,t):uu(n.g.ha)}else uu(n.g.ha),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.G=null,this.H=new sr(function(){var e=n.g.video;!e.ended&&n.G&&(e.currentTime=n.G,n.G=null)})}function zc(e){var t,n,i,r,s,a,o;return U(function(l){if(1==l.g){for(e.u&&e.u.stop(),e.u=null,e.H&&e.H.stop(),e.H=null,t=[],n=d(e.h.values()),i=n.next();!i.done;i=n.next())r=i.value,Td(r),t.push(_d(r)),r.ia&&(xc(r.ia),r.ia=null);for(s=d(e.m.values()),a=s.next();!a.done;a=s.next())o=a.value,xc(o);return S(l,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.G=null,E(l)})}function Gc(e,t,n){e.j.presentationTimeline.T()||(e.U=t,e.R=n)}function qc(e,t){var n,i,r,s,a,o;U(function(l){switch(l.g){case 1:return n=dt,e.O++,i=e.O,A(l,2),S(l,su(e.g.ha,n.gb),4);case 4:I(l,3);break;case 2:r=x(l),e.g&&e.g.onError(r);case 3:s=Ui(t.mimeType,t.codecs),Kl(e.g.ha,s,e.j.sequenceMode,t.external),a=e.g.ha.Z,(a.isTextVisible()||e.i.alwaysStreamText)&&e.O==i&&(o=nd(e,t),e.h.set(n.gb,o),bd(e,o,0)),E(l)}})}function Wc(e){var t=e.h.get(ct);t&&(Td(t),_d(t).catch(function(){}),e.F=e.h.get(ct),e.h.delete(ct)),e.B=null}function Xc(e,t){for(var n=0>e.g.Xa(),i=d(e.h.values()),r=i.next();!r.done;r=i.next())r=r.value,r.Aa&&r.Aa.Pd(n),r.ia&&r.ia.Pd(n);for(i=d(e.m.values()),r=i.next();!r.done;r=i.next())r.value.Pd(n);(n=e.h.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Oc&&(Zc(e,t,!1,0,!1),n.Oc=i):(t=n.Oc)&&(n.Oc=null,Zc(e,t,!0,0,!1)))}function Kc(e,t,n,i,r,s){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,s=void 0!==s&&s,e.s=t,e.I&&(t.video&&Zc(e,t.video,n,i,r,s),t.audio&&Zc(e,t.audio,n,i,r,s))}function Yc(e,t){U(function(n){if(1==n.g)return e.F=null,e.B=t,e.I?t.segmentIndex?n.A(2):S(n,t.createSegmentIndex(),2):n.return();Zc(e,t,!0,0,!1),E(n)})}function $c(e){var t=e.h.get(ct);t&&Zc(e,t.stream,!0,0,!0)}function Qc(e,t){for(var n=d(e.J.entries()),i=n.next();!i.done;i=n.next()){var r=d(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.J.delete(i))}}function Zc(e,t,n,i,r,s){var a=e.h.get(t.type);a||t.type!=ct?a&&(a.Oc&&(t.trickModeVideo?(a.Oc=t,t=t.trickModeVideo):a.Oc=null),a.stream!=t||r)&&(e.m.has(t)?a.ia=e.m.get(t):a.ia&&Dc(a.ia,t),t.type==ct&&(r=Ui(t.mimeType,t.codecs),Kl(e.g.ha,r,e.j.sequenceMode,t.external)),!e.m.has(a.stream)&&a.stream.closeSegmentIndex&&(a.Za?(r="("+a.type+":"+a.stream.id+")",e.J.has(r)||e.J.set(r,a.stream.closeSegmentIndex)):a.stream.closeSegmentIndex()),r=a.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,a.stream=t,a.Aa=null,a.zg=!!s,t.dependencyStream?a.$d=nd(e,t.dependencyStream):a.$d=null,r&&(a.Bb=null,a.tc=null,a.sc=null,t.isAudioMuxedInVideo&&(t=null,"video"===a.type?t=e.h.get("audio"):"audio"===a.type&&(t=e.h.get("video")),t&&(_d(t).catch(function(){}),t.Bb=null,t.tc=null,t.sc=null,ed(e,t),Jc(e,t).catch(function(t){e.g&&e.g.onError(t)})))),n?a.Vc?a.pg=!0:a.Za?(a.Tc=!0,a.gf=i,a.pg=!0):(Td(a),vd(e,a,!0,i).catch(function(t){e.g&&e.g.onError(t)})):a.Za||a.Db||bd(e,a,0),Jc(e,a).catch(function(t){e.g&&e.g.onError(t)})):qc(e,t)}function Jc(e,t){var n,i;return U(function(r){if(1==r.g)return t.Mb?(n=t.stream,i=t.Mb,n.segmentIndex?r.A(2):S(r,n.createSegmentIndex(),2)):r.return();if(t.Mb!=i||t.stream!=n)return r.return();var s=e.g.bd(),a=Zl(e.g.ha,t.type),o=t.stream.segmentIndex.find(t.Ra?t.Ra.endTime:s),l=null==o?null:t.stream.segmentIndex.get(o);o=l&&l.endByte?l.endByte-l.startByte:null,l&&!o&&(o=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),o?((l=l.ea)&&(o+=(l.endByte?l.endByte-l.startByte:null)||0),l=e.g.getBandwidthEstimate(),s=8*o/l<(a||0)-s-e.i.rebufferingGoal||t.Mb.h.g>o):s=!1,s&&t.Mb.abort(),E(r)})}function ed(e,t){t.Vc||t.Tc||(t.Za?(t.Tc=!0,t.gf=0):null==Ql(e.g.ha,t.type)?null==t.Db&&bd(e,t,0):(Td(t),vd(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function td(e,t){var n,i,r,s,a,o,l,u;return U(function(c){if(1==c.g){if(!e.s)throw new Le(2,5,5006);return n=Id(e,!0),i=e.g.ha,S(c,i.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Ms(e.l),e.updateDuration(),r=d(n.keys()),s=r.next();!s.done;s=r.next())a=s.value,o=n.get(a),e.h.has(a)||(l=nd(e,o),t.has(o.id)&&(u=t.get(o.id),Ec(u,function(t,n,i){return yd(t,n,i||null,e.i.retryParameters,e.g.xc)}),l.ia=u),e.h.set(a,l),bd(e,l,0));E(c)})}function nd(e,t){var n={stream:t,type:t.type,Aa:null,ia:id(e,t),Ra:null,Bb:null,Cf:null,tc:null,sc:null,Af:null,Bf:null,Oc:null,endOfStream:!1,Za:!1,Db:null,Tc:!1,gf:0,pg:!1,Vc:!1,ld:!0,zg:!1,Kh:!1,fe:!1,Mb:null,$d:null};return t.dependencyStream&&(n.$d=nd(e,t.dependencyStream)),n}function id(e,t){if("video"===t.type&&e.i.disableVideoPrefetch||"audio"===t.type&&e.i.disableAudioPrefetch||t.type===ct&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===ct&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ia)&&t===n.i?n:0<e.i.segmentPrefetchLimit?new Sc(e.i.segmentPrefetchLimit,t,function(t,n,i){return yd(t,n,i||null,e.i.retryParameters,e.g.xc)},0>e.g.Xa()):null}function rd(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,i=d(e.j.variants),r=i.next(),s={};!r.done;s={Pb:void 0},r=i.next())if(s.Pb=r.value,s.Pb.audio)if(e.m.has(s.Pb.audio)){if(r=e.m.get(s.Pb.audio),Mc(r,t),!(0<t&&n.some(function(e){return function(t){return gt(e.Pb.audio.language,t)}}(s)))){var a=e.h.get(s.Pb.audio.type);r!==(a&&a.ia)&&xc(r),e.m.delete(s.Pb.audio)}}else 0>=t||!n.some(function(e){return function(t){return gt(e.Pb.audio.language,t)}}(s))||!(r=id(e,s.Pb.audio))||(s.Pb.audio.segmentIndex||s.Pb.audio.createSegmentIndex(),e.m.set(s.Pb.audio,r))}function sd(e,t){var n,i,r,s,a,o;return U(function(l){switch(l.g){case 1:if(Ms(e.l),t.Za||null==t.Db||t.Vc)return l.return();if(t.Db=null,!t.Tc){l.A(2);break}return S(l,vd(e,t,t.pg,t.gf),3);case 3:return l.return();case 2:if(Qc(e,t),t.stream.segmentIndex){l.A(4);break}return n=t.stream,A(l,5),S(l,t.stream.createSegmentIndex(),7);case 7:I(l,6);break;case 5:return i=x(l),S(l,wd(e,t,i),8);case 8:return l.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Za||t.Db||bd(e,t,0),l.return();case 4:A(l,9),r=ad(e,t),null!=r&&(bd(e,t,r),t.fe=!1),I(l,10);break;case 9:return s=x(l),S(l,wd(e,t,s),11);case 11:return l.return();case 10:if(a=Array.from(e.h.values()),!e.I||!a.every(function(e){return e.endOfStream})){l.A(0);break}return S(l,e.g.ha.endOfStream(),13);case 13:Ms(e.l),o=e.g.ha.getDuration(),0!=o&&o<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.vb(o),E(l)}})}function ad(e,t){if(gd(t))return iu(e.g.ha,t.stream.originalId||""),null;if(t.type==ct&&ru(e.g.ha),t.stream.isAudioMuxedInVideo)return null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Xa()));if(!Xl(e.g.ha)&&t.type!=ct)return n/2;var i=e.g.bd();if("audio"===t.type)for(var r=d(e.m.keys()),s=r.next();!s.done;s=r.next())s=e.m.get(s.value),s.hb(i,!0),Ac(s,i);r=t.Ra?t.Ra.endTime:i;var a=Jl(e.g.ha,t.type,i);s=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.D);var o=e.j.presentationTimeline.getDuration()-r,l=Zl(e.g.ha,t.type);if(1e-6>o&&l)return t.endOfStream=!0,"video"==t.type&&(e=e.h.get(ct))&&gd(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,a>=s)return n/2;if(o=!t.Aa,l=od(e,t,i,l),!l)return n;a=!1,o&&t.zg&&(a=!0,t.zg=!1),o=1/0;var u=Array.from(e.h.values());u=d(u);for(var c=u.next();!c.done;c=u.next())c=c.value,gd(c)||c.Aa&&!c.Aa.current()||(o=Math.min(o,c.Ra?c.Ra.endTime:i));return r>=o+e.j.presentationTimeline.h?n:("keep"!==e.i.crossBoundaryStrategy&&Cd(e,t,l)||(t.ia&&t.Aa&&!e.m.has(t.stream)&&(t.ia.hb(l.startTime+.001),Ac(t.ia,l.startTime).catch(function(){})),ld(e,t,i,l,a).catch(function(){}),t.$d&&ud(e,t.$d,i,s)),null)}function od(e,t,n,i){if(t.Aa)return(n=t.Aa.current())&&t.Ra&&.001>Math.abs(t.Ra.startTime-n.startTime)&&(n=t.Aa.next().value),n;if(t.Ra||i)return n=t.Ra?t.Ra.endTime:i,e=0>e.g.Xa(),t.stream.segmentIndex&&(t.Aa=t.stream.segmentIndex.ac(n,!1,e)),t.Aa&&t.Aa.next().value;i=e.j.sequenceMode?0:e.i.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=0>e.g.Xa();var s=null;return i&&(t.stream.segmentIndex&&(t.Aa=t.stream.segmentIndex.ac(r,!1,e)),s=t.Aa&&t.Aa.next().value),s||(t.stream.segmentIndex&&(t.Aa=t.stream.segmentIndex.ac(n,!1,e)),s=t.Aa&&t.Aa.next().value),s}function ld(t,n,i,r,s){var a,o,l,u,c,d,h,p,f,g,m,y,v,b,T,_,w;return U(function(C){switch(C.g){case 1:if(a=dt,o=n.stream,l=n.Aa,n.Za=!0,A(C,2),2==r.Ic())throw new Le(1,1,1011);return S(C,dd(t,n,r,s),4);case 4:return Ms(t.l),t.C?C.return():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,c=e.ReadableStream,t.i.lowLatencyMode&&t.j.isLowLatency&&c&&u&&("HLS"!=t.j.type||r.m)?(p=new Uint8Array(0),g=f=!1,y=function(e){var a,l,u;return U(function(c){switch(c.g){case 1:if(f)return c.return();if(g=!0,Ms(t.l),t.C)return c.return();if(A(c,2),p=it(p,e),a=!1,l=0,(new Ps).box("mdat",function(e){l=e.size+e.start,a=!0}).parse(p,!1,!0),!a){c.A(4);break}return u=p.subarray(0,l),p=p.subarray(l),S(c,pd(t,n,i,o,r,u,!0,s),5);case 5:n.ia&&n.Aa&&Ac(n.ia,r.startTime,!0);case 4:I(c,0);break;case 2:m=x(c),E(c)}})},S(C,md(t,n,r,y),9)):(d=md(t,n,r),S(C,d,7)));case 7:return h=C.h,Ms(t.l),t.C?C.return():(Ms(t.l),n.Tc?(n.Za=!1,bd(t,n,0),C.return()):S(C,pd(t,n,i,o,r,h,!1,s),6));case 9:if(v=C.h,m)throw m;if(g){C.A(10);break}return f=!0,Ms(t.l),t.C?C.return():n.Tc?(n.Za=!1,bd(t,n,0),C.return()):S(C,pd(t,n,i,o,r,v,!1,s),10);case 10:n.ia&&n.Aa&&Ac(n.ia,r.startTime,!0);case 6:if(Ms(t.l),t.C)return C.return();n.Ra=r,l.next(),n.Za=!1,n.Kh=!1,b=t.g.ha.Qb(),T=b[n.type],ne(JSON.stringify(T)),n.Tc||(_=null,n.type===a.Ea?_=t.h.get(a.ma):n.type===a.ma&&(_=t.h.get(a.Ea)),_&&_.type==a.ma?t.g.Mf(r,n.stream,_.stream.isAudioMuxedInVideo):t.g.Mf(r,n.stream,n.stream.codecs.includes(","))),bd(t,n,0),I(C,0);break;case 2:if(w=x(C),Ms(t.l,w),t.C)return C.return();if(n.Za=!1,7001==w.code)n.Za=!1,Td(n),bd(t,n,0),C.A(0);else{if(n.type!=a.gb||!t.i.ignoreTextStreamFailures)return 3017==w.code?S(C,cd(t,n,w),0):(n.fe=!0,1==w.category&&n.ia&&Rc(n.ia,r),w.severity=2,S(C,wd(t,n,w),0));t.h.delete(a.gb),C.A(0)}}})}function ud(e,t,n,i){var r,s,a,o,l,u,c,d,p,f,g;return U(function(m){switch(m.g){case 1:for(r=t.stream,o=(a=(s=r.segmentIndex)&&s.ac(n))&&a.next().value;o&&e.K.includes(o.startTime);)o=a&&a.next().value;if(!o){m.A(0);break}if(l=o.ea,!l||Go(l,t.Bb)){m.A(3);break}return t.Bb=l,A(m,4),S(m,md(e,t,l),6);case 6:u=m.h;var y=e.g.ha;y.L&&zt(y.L,u,0,r),e.K=[],I(m,3);break;case 4:throw c=x(m),t.Bb=null,c;case 3:if(t.Ra&&t.Ra==o){m.A(0);break}return t.Ra=o,A(m,8),S(m,md(e,t,o),10);case 10:d=m.h,y=e.g.ha,y.L&&zt(y.L,d,0,r),e.K.push(o.startTime),I(m,9);break;case 8:throw p=x(m),t.Ra=null,p;case 9:if(f=Math.max.apply(Math,[0].concat(h(e.K))),g=e.g.bd(),g+i>f)return S(m,ud(e,t,o.startTime,i),0);m.A(0)}})}function cd(e,t,n){var i,r,s,a;return U(function(o){if(1==o.g){if(i=Array.from(e.h.values()),i.some(function(e){return e!=t&&e.Kh}))return o.A(2);if(r=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,r))return o.return();if(e.i.avoidEvictionOnQuotaExceededError)return bd(e,t,4),o.return();if(s=Math.round(100*e.D),20<s)e.D-=.2;else{if(!(4<s))return t.fe=!0,e.C=!0,e.g.onError(n),o.return();e.D-=.04}return t.Kh=!0,a=e.g.bd(),S(o,fd(e,t,a),2)}bd(e,t,4),E(o)})}function dd(e,t,n,i){var r,s,a,o,l,u,c,d,h,p,f,g,m,y,v,b;return U(function(T){switch(T.g){case 1:if(r=dt,s=null==t.Ra,a=[],o=Math.max(0,Math.max(n.appendWindowStart,e.U)-.1),l=Math.min(n.appendWindowEnd,e.R)+.1,u=n.codecs||t.stream.codecs,c=Hi(u),d=zi(n.mimeType||t.stream.mimeType),h=n.timestampOffset,h==t.Cf&&o==t.tc&&l==t.sc&&c==t.Af&&d==t.Bf){T.A(2);break}if(p=t.Af&&t.Bf&&Iu(e.g.ha,t.type,d,u,Id(e)),!p){T.A(3);break}if(f=null,t.type===r.Ea?f=e.h.get(r.ma):t.type===r.ma&&(f=e.h.get(r.Ea)),!f){T.A(3);break}return S(T,_d(f).catch(function(){}),5);case 5:f.Bb=null,f.tc=null,f.sc=null,ed(e,f);case 3:return S(T,hd(e,t,h,o,l,n,c,d),2);case 2:return Go(n.ea,t.Bb)||(t.Bb=n.ea,n.l&&n.ea&&(g=md(e,t,n.ea),m=function(){var s,a,o,l,u,c,d,h,p;return U(function(f){switch(f.g){case 1:return A(f,2),S(f,g,4);case 4:return s=f.h,Ms(e.l),a=null,o=new Map,l={projection:null,hfov:null},u=new Ps,u.box("moov",Us).box("trak",Us).box("mdia",Us).V("mdhd",function(e){a=to(e.reader,e.version).timescale}).box("hdlr",function(e){switch(e=e.reader,e.skip(8),e.hd()){case"soun":o.set(r.ma,a);break;case"vide":o.set(r.Ea,a)}a=null}),t.type===r.Ea&&u.box("minf",Us).box("stbl",Us).V("stsd",Bs).box("encv",Fs).box("avc1",Fs).box("avc3",Fs).box("hev1",Fs).box("hvc1",Fs).box("dvav",Fs).box("dva1",Fs).box("dvh1",Fs).box("dvhe",Fs).box("dvc1",Fs).box("dvi1",Fs).box("vexu",Us).box("proj",Us).V("prji",function(e){e=e.reader.hd(),l.projection=e}).box("hfov",function(e){e=e.reader.W()/1e3,l.hfov=e}),u.parse(s),t.type===r.Ea&&Ed(e,l),o.has(t.type)?n.ea.timescale=o.get(t.type):null!=a&&(n.ea.timescale=a),c=t.stream.segmentIndex,c instanceof oc&&(d=uc(c,n.startTime)),h=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,S(f,e.g.Bi(t.type,s),5);case 5:return S(f,nu(e.g.ha,t.type,s,null,t.stream,h,t.ld,i,!1,!1,d),6);case 6:I(f,0);break;case 2:throw p=x(f),t.Bb=null,p}})},y=n.startTime,s&&(v=Zl(e.g.ha,t.type),null!=v&&(y=v)),e.g.Ml(y,n.ea),a.push(m()))),b=t.Ra?t.Ra.i:-1,n.i!=b&&a.push(ou(e.g.ha,t.type,n.startTime)),S(T,Promise.all(a),0)}})}function hd(e,t,n,i,r,s,a,o){var l,u,c,d,h;return U(function(p){switch(p.g){case 1:if(l=dt,u=Id(e),A(p,2),t.tc=i,t.sc=r,a&&(t.Af=a),o&&(t.Bf=o),t.Cf=n,c=e.j.sequenceMode||"HLS"==e.j.type,d=null,t.type===l.Ea?d=e.h.get(l.ma):t.type===l.ma&&(d=e.h.get(l.Ea)),!(d&&d.stream&&d.stream.isAudioMuxedInVideo)){p.A(4);break}return S(p,au(e.g.ha,d.type,n,i,r,c,d.stream.mimeType,d.stream.codecs,u),4);case 4:return S(p,au(e.g.ha,t.type,n,i,r,c,s.mimeType||t.stream.mimeType,s.codecs||t.stream.codecs,u),6);case 6:I(p,0);break;case 2:throw h=x(p),t.tc=null,t.sc=null,t.Af=null,t.Bf=null,t.Cf=null,h}})}function pd(e,t,n,i,r,s,a,o){var l,u,c,d;return a=void 0!==a&&a,o=void 0!==o&&o,U(function(h){switch(h.g){case 1:return l=i.closedCaptions&&0<i.closedCaptions.size,e.i.shouldFixTimestampOffset&&(u="video/mp4"==i.mimeType||"audio/mp4"==i.mimeType,c=null,r.ea&&(c=r.ea.timescale),u&&c&&"video"===i.type&&"DASH"==e.j.type&&(new Ps).box("moof",Us).box("traf",Us).V("tfdt",function(n){var i,s,a,o,l,u;return U(function(d){return i=eo(n.reader,n.version),s=i.baseMediaDecodeTime,s?(a=-s/c,o=Number(t.Cf)||0,o<a?(l=t.tc,u=t.sc,S(d,hd(e,t,a,l,u,r),0)):d.A(0)):d.return()})}).parse(s,!1,a)),S(h,fd(e,t,n),2);case 2:return Ms(e.l),d=t.ld,t.ld=!1,S(h,e.g.Bi(t.type,s),3);case 3:return S(h,nu(e.g.ha,t.type,s,r,i,l,d,o,a),4);case 4:Ms(e.l),E(h)}})}function fd(e,t,n){var i,r,s,a,o,l,u,c,d;return U(function(h){return 1==h.g?(i=t.stream.segmentIndex,i instanceof oc&&(i.hb(e.j.presentationTimeline.Kb()),r=[],lc(i,function(e){r.push(e.hf())})),s=Math.max(e.i.bufferBehind*e.D,e.j.presentationTimeline.h),a=Ql(e.g.ha,t.type),null==a?(e.F==t&&(e.F=null),h.return()):(o=n-a,l=e.i.evictionGoal,u=e.j.presentationTimeline.bc(),c=e.j.presentationTimeline.Jb(),d=o-s,c-u>l&&(d=Math.max(o-s,u-l-a)),d<=l?h.return():S(h,e.g.ha.remove(t.type,a,a+d,r),2))):4!=h.g?(Ms(e.l),e.F?S(h,fd(e,e.F,n),4):h.A(0)):(Ms(e.l),void E(h))})}function gd(e){return e&&e.type==ct&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function md(e,t,n,i){var r,s,a,o,l;return U(function(u){switch(u.g){case 1:if(r=n.cc())return u.return(r);if(s=null,t.ia){var c=t.ia,d=c.h;n instanceof zo&&(d=c.j),d.has(n)?(c=d.get(n),i&&(c.ci=i),s=c.se):s=null}return s||(s=yd(n,t.stream,i||null,e.i.retryParameters,e.g.xc)),a=0,t.Aa&&(a=t.Aa.h),t.Mb=s,S(u,s.promise,2);case 2:if(o=u.h,t.Mb=null,l=o.data,!n.aesKey){u.A(3);break}return S(u,jc(l,n.aesKey,a),4);case 4:l=u.h;case 3:return u.return(l)}})}function yd(e,t,n,i,r,s){s=void 0!==s&&s;var a=e instanceof qo?e:void 0,o=a?1:0;return e=Vc(e.S(),e.startByte,e.endByte,i,n),e.contentType=t.type,r.request(Cs,e,{type:o,stream:t,segment:a,isPreload:s})}function vd(e,t,n,i){var r,s;return U(function(a){return 1==a.g?(t.Tc=!1,t.pg=!1,t.gf=0,t.Vc=!0,t.Ra=null,t.Aa=null,t.ia&&!e.m.has(t.stream)&&xc(t.ia),i?(r=e.g.bd(),s=e.g.ha.getDuration(),S(a,e.g.ha.remove(t.type,r+i,s),3)):S(a,su(e.g.ha,t.type),4)):3!=a.g?(Ms(e.l),n?S(a,e.g.ha.flush(t.type),3):a.A(3)):(Ms(e.l),t.Vc=!1,t.endOfStream=!1,t.Za||t.Db||bd(e,t,0),void E(a))})}function bd(e,t,n){var i=t.type;(i!=ct||e.h.has(i))&&(t.Db=new rr(function(){var n;return U(function(i){return 1==i.g?(A(i,2),S(i,sd(e,t),4)):2!=i.g?I(i,0):(n=x(i),e.g&&e.g.onError(n),void E(i))})}).X(n))}function Td(e){null!=e.Db&&(e.Db.stop(),e.Db=null)}function _d(e){return U(function(t){return e.Mb?S(t,e.Mb.abort(),0):t.A(0)})}function wd(e,t,n){var i;return U(function(r){if(1==r.g)return 3024==n.code?(t.Za=!1,Td(t),bd(e,t,0),r.return()):S(r,rs(e.P),2);if(Ms(e.l),1===n.category&&1003!=n.code){if(t.Oc)return Xc(e,!1),r.return();i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}n.handled&&1011==n.code||e.g.onError(n),n.handled||e.i.failureCallback(n),E(r)})}function Sd(e,t){t=void 0!==t&&t;var n,i,r,s,a,o=void 0===o||o;return U(function(l){if(1==l.g){if(n=Date.now()/1e3,i=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.L<i)return l.return(!1);e.L=n}return r=dt,(s=e.h.get(r.ma))&&(s.Bb=null,s.tc=null,s.sc=null,o&&ed(e,s),_d(s).catch(function(){}),s.Aa&&s.Aa.Nh(),Td(s)),(a=e.h.get(r.Ea))&&(a.Bb=null,a.tc=null,a.sc=null,o&&ed(e,a),_d(a).catch(function(){}),a.Aa&&a.Aa.Nh(),Td(a)),S(l,Su(e.g.ha,Id(e)),2)}return!a||a.Vc||a.Za||a.Db||bd(e,a,0),!s||s.Vc||s.Za||s.Db||bd(e,s,0),l.return(!0)})}function Ed(e,t){if(e.N.projection!=t.projection||e.N.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new K("spatialvideoinfo",n)}else n=new K("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.N=t}}function Ad(e){if("keep"!==e.i.crossBoundaryStrategy){e.H.stop();var t=e.g.bd(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.Bb)&&null!==n.g&&(t=n.g-t,0>t||1<t||(e.G=n.g+.1,e.H.X(t)))}}function Cd(e,t,n){if(t.type===ct)return!1;var i=t.Bb;if(!i)return!1;var r=n.ea;if(n=i.g!==r.g,"reset_to_encrypted"===e.i.crossBoundaryStrategy&&(i.encrypted||r.encrypted||(n=!1),i.encrypted&&(e.i.crossBoundaryStrategy="keep")),"RESET_ON_ENCRYPTION_CHANGE"===e.i.crossBoundaryStrategy&&i.encrypted==r.encrypted&&(n=!1),n&&t.ld){var s=e.g.video,a=s.paused;Sd(e,!0).then(function(){var t=(new Map).set("oldEncrypted",i.encrypted).set("newEncrypted",r.encrypted);e.g.onEvent(new K("boundarycrossed",t)),a||s.play()})}return n}function Id(e,t){t=void 0!==t&&t;var n=new Map;return e.s.audio&&n.set("audio",e.s.audio),e.s.video&&n.set("video",e.s.video),t&&e.B&&n.set(ct,e.B),n}function xd(){}function kd(e,t,n,i,r){var s,a=r in i,o=a?n.constructor==Object&&0==Object.keys(i).length:n.constructor==Object&&0==Object.keys(n).length,l=a||o,u=!0;for(s in t){var c=r+"."+s,d=a?i[r]:n[s];l||s in n?void 0===t[s]?void 0===d||l?delete e[s]:e[s]=bn(d):o?e[s]=t[s]:d.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=bn(d)),c=kd(e[s],t[s],d,i,c),u=u&&c):typeof t[s]!=typeof d||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=d.constructor?(Z("Invalid config, wrong type for "+c),u=!1):"function"==typeof n[s]&&n[s].length!=t[s].length?(J("Unexpected number of arguments for "+c),e[s]=t[s]):e[s]=Array.isArray(e[s])?t[s].slice():t[s]:(Z("Invalid config, unrecognized key "+c),u=!1)}return u}function Md(e,t){for(var n={},i=n,r=0,s=0;;){if(r=e.indexOf(".",r),0>r)break;0!=r&&"\\"==e[r-1]||(s=e.substring(s,r).replace(/\\\./g,"."),i[s]={},i=i[s],s=r+1),r+=1}return i[e.substring(s).replace(/\\\./g,".")]=t,n}function Dd(e,t){return e&&t}function Rd(e,t){function n(e){for(var t=d(Object.keys(e)),i=t.next();!i.done;i=t.next())if(i=i.value,!(e[i]instanceof HTMLElement))if(r(e[i])&&0===Object.keys(e[i]).length)delete e[i];else{var s=e[i];Array.isArray(s)&&0===s.length||"function"==typeof e[i]?delete e[i]:r(e[i])&&(n(e[i]),0===Object.keys(e[i]).length&&delete e[i])}}function i(e,t){return Object.keys(e).reduce(function(n,s){var a=e[s];return t.hasOwnProperty(s)?a instanceof HTMLElement&&t[s]instanceof HTMLElement?a.isEqualNode(t[s])||(n[s]=a):r(a)&&r(t[s])?(a=i(a,t[s]),(0<Object.keys(a).length||!r(a))&&(n[s]=a)):Array.isArray(a)&&Array.isArray(t[s])?cn(a,t[s])||(n[s]=a):Number.isNaN(a)&&Number.isNaN(t[s])||a!==t[s]&&(n[s]=a):n[s]=a,n},{})}function r(e){return e&&"object"===typeof e&&!Array.isArray(e)}return e=i(e,t),n(e),e}function Od(){}function Nd(e){return e=qe(e),new he(e).Gb}function Ld(e,t,n){function i(e){Oe(s).setUint32(a,e.byteLength,!0),a+=4,s.set(De(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new Le(2,6,6015);var r;r="string"==typeof t?Xe(t,!0):t,e=qe(e),e=Xe(e,!0);var s=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),a=0;return i(e),i(r),i(n),s}function Pd(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=qe(e).split("skd://").pop(),Ld(e,n,t))}function Ud(e,t){2===e&&(e=t.drmInfo)&&Jr(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}function Bd(){this.g=null}function Fd(e,t){t=vt(t);var n=St(t,e.map(function(e){return wt(e)}));return n?e.filter(function(e){return n==wt(e)}):[]}function jd(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}function Vd(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}function Hd(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}function zd(e,t){return e.filter(function(e){return!(e.audio&&e.audio.channelsCount&&e.audio.channelsCount>t)}).sort(function(e,t){return e.audio||t.audio?e.audio?t.audio?(t.audio.channelsCount||0)-(e.audio.channelsCount||0):1:-1:0})}function Gd(e,t){if("AUTO"==t){var n=e.some(function(e){return!(!e.video||!e.video.hdr||"HLG"!=e.video.hdr)});t=s_(n)}return e.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==t})}function qd(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}function Wd(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}function Xd(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}function Kd(){}function Yd(){var t=1/0,n=Be();navigator.connection&&navigator.connection.saveData&&(t=360);var i={retryParameters:ss(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,i){return"apple"===e.shakaMediaKeysPolyfill&&"skd"==n&&(n=i.serverCertificate,i=Nd(t),t=Ld(t,i,n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},r="reload",s=!1;Xt()&&n.od()&&(r="smooth",s=!0),s={retryParameters:ss(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Jd,manifestPreprocessorTXml:eh,sequenceMode:!1,multiTypeVariantsAllowed:s,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.nd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Jd,manifestPreprocessorTXml:eh,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={trackSelectionCallback:function(e){return U(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return U(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Dd([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},o={drm:i,manifest:s,streaming:{retryParameters:ss(),failureCallback:function(e){return Dd([e])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:r,addExtraFeaturesToSourceBuffer:function(e){return Dd([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(e,t){return Dd([e,t])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:a,abrFactory:function(){return new qr},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Bd,[null].concat(h(B.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:30,repeatMode:0}};return a.trackSelectionCallback=function(e){return U(function(t){return t.return(Zd(e,o.preferredAudioLanguage,o.preferredVideoHdrLevel))})},n.$a(o)}function $d(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Qd(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return kd(e,t,n||Yd(),i,"")}function Zd(e,t,n){var i=n;"AUTO"==i&&(n=e.some(function(e){return!(!e.hdr||"HLG"!=e.hdr)}),i=s_(n));var r=e.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=i)});n=[];var s=St(t,r.map(function(e){return e.language}));s&&(n=r.filter(function(e){return vt(e.language)==s})),0==n.length&&(n=r.filter(function(e){return e.primary})),0==n.length&&(r.map(function(e){return e.language}),n=r);var a=n.filter(function(e){return e.height&&480>=e.height});for(a.length&&(a.sort(function(e,t){return t.height-e.height}),n=a.filter(function(e){return e.height==a[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.push(n[r])),e=d(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=ct&&"image"!=n.type||t.push(n);return t}function Jd(e){return Dd([e],e)}function eh(e){return Dd([e],e)}function th(){this.g=null,this.h=[]}function nh(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=d(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function ih(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=d(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function rh(){this.i=this.h=null,this.g=[]}function sh(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function ah(){this.C=this.U=NaN,this.l="",this.j=this.bj=this.u=this.B=this.J=this.D=this.s=this.m=this.I=this.F=this.i=this.P=this.R=this.L=this.N=this.O=NaN,this.K=0,this.G=this.H=NaN,this.g=new th,this.h=new rh}function oh(e,t,n){e.O=t,e.N=n}function lh(e,t,n){e.U=t,e.C=n}function uh(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function ch(e,t){e.j=isNaN(e.j)?t:e.j+t}function dh(e){var t=e.U,n=e.C,i=e.l,r=e.B,s=e.N,a=e.O,o=e.L,l=e.R,u=e.P,c=e.u,h=e.i,p=e.F,f=e.I,g=e.m,m=nh(e.g,"playing"),y=nh(e.g,"paused"),v=nh(e.g,"buffering"),b=e.s,T=e.D,_=e.J,w=e.bj,S=e.j,E=e.K,A=e.H,C=e.G,I=ih(e.g),x=[];e=d(e.h.g);for(var k=e.next();!k.done;k=e.next())k=k.value,x.push({timestamp:k.timestamp,id:k.id,type:k.type,fromAdaptation:k.fromAdaptation,bandwidth:k.bandwidth});return{width:t,height:n,currentCodecs:i,streamBandwidth:r,decodedFrames:s,droppedFrames:a,corruptedFrames:o,stallsDetected:l,gapsJumped:u,estimatedBandwidth:c,completionPercent:h,loadLatency:p,manifestTimeSeconds:f,drmTimeSeconds:g,playTime:m,pauseTime:y,bufferingTime:v,licenseTime:b,liveLatency:T,maxSegmentDuration:_,manifestSizeBytes:w,bytesDownloaded:S,nonFatalErrorCount:E,manifestPeriodCount:A,manifestGapCount:C,stateHistory:I,switchHistory:x}}function hh(e,t,n,i){ae.call(this),this.N=e,this.U=t,this.La=i.networkingEngine,this.m=n,this.B=null,this.Ha=0,this.Ya=i.ud,this.F=i.Fl,this.cb=i.Gl,this.g=i.config,this.l=this.G=this.h=null,this.oa=!1,this.H=i.Rl,this.ra=!1,this.i=null,this.ba=!1,this.j=this.D=null,this.Z=!1,this.L=new Map,this.sa=!1,this.Na=i.Ql,this.Y=new ah,this.na=new as,this.u=new as,this.O=null,this.s=!1,this.$=i.ek,this.R=this.J=null,this.Ta=i.dk,this.P=!1,this.K=[],this.I=[],this.C=!0}function ph(e,t,n){(e=t?e.I:e.K)?e.push(n):n()}function fh(e){if(e.I)for(var t=d(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function gh(e,t){if(e.O=t,e.P=!0,e.K){t=d(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}function mh(e){return e.Z=!0,e.j}function yh(e){return e.ra=!0,e.H}function vh(e){return e.ba=!0,e.i}function bh(e){return e.sa=!0,e.L}function Th(e){if(e.s)throw new Le(2,7,7003)}function _h(e,t){e.dispatchEvent(new K("onstatechange",(new Map).set("state",t)))}function wh(e){var t,n,i,r,s,a,o,l,u;return U(function(c){switch(c.g){case 1:if(_h(e,"manifest-parser"),e.l||(e.G=Qa(e.N,e.U),e.l=e.G(),e.l.configure(e.g.manifest,function(){return e.C})),t=Date.now()/1e3,_h(e,"manifest"),e.h){c.A(2);break}return S(c,e.l.start(e.N,e.cb),3);case 3:if(e.h=c.h,1!=e.h.variants.length){c.A(2);break}for(n=[],i=e.h.variants[0],r=d([i.video,i.audio]),s=r.next();!s.done;s=r.next())(a=s.value)&&!a.segmentIndex&&n.push(a.createSegmentIndex());if(!(0<n.length)){c.A(2);break}return S(c,Promise.all(n),2);case 2:return e.na.resolve(),o=new K("manifestparsed",void 0),S(c,Promise.resolve(),7);case 7:if(e.dispatchEvent(o),0==e.h.variants.length)throw new Le(2,4,4036);Ch(e.h),l=Date.now()/1e3,u=l-t,e.Y.I=u,E(c)}})}function Sh(e,t){var n,i,r,s,a,o;return U(function(l){switch(l.g){case 1:if(!e.h||e.i)return l.return();if(_h(e,"drm-engine"),e.Ha=Date.now()/1e3,e.i=e.Ya(),e.F.h=e.i,e.i.configure(e.g.drm,function(){return e.C}),n=za(e.F,e.h),!n){l.A(2);break}return i=new K("trackschanged",void 0),S(l,Promise.resolve(),3);case 3:Th(e),e.dispatchEvent(i);case 2:return r=Lr(e.h.variants),s=!0,e.h&&e.h.presentationTimeline&&"HLS"!=e.h.type&&(s=e.h.presentationTimeline.T()),S(l,Zs(e.i,r,e.h.offlineSessionIds,s),4);case 4:if(Th(e),!t){l.A(5);break}return S(l,e.i.$b(t),6);case 6:Th(e);case 5:return S(l,Ha(e.F,e.h),7);case 7:if(a=l.h,!a){l.A(0);break}return o=new K("trackschanged",void 0),S(l,Promise.resolve(),9);case 9:e.dispatchEvent(o),E(l)}})}function Eh(e){var t,n,i,r,s,a,o;return U(function(l){return e.B||(e.B=e.g.adaptationSetCriteriaFactory(),e.B.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Kc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Uc:e.g.preferredAudioLabel,Rd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Td:"",We:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.Ta&&(t=e.g.abrFactory,e.D=t,e.j=t(),e.j.configure(e.g.abr)),e.$?(n=e.h.presentationTimeline.T(),i=Lr(e.h.variants),r=e.B.create(i),e.j.configure(e.g.abr),e.j.setVariants(Array.from(r.values())),s=e.j.chooseVariant(),s?(a=[],e.J=s,s.video&&a.push(Ah(e,s.video,n)),s.audio&&a.push(Ah(e,s.audio,n)),(o=Pr(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&jr(s.audio,o,e.g)&&(a.push(Ah(e,o,n)),e.R=o),S(l,Promise.all(a),0)):l.A(0)):l.A(0)})}function Ah(e,t,n){var i,r,s,a,o;return U(function(l){return 1==l.g?(i=e.g.streaming.segmentPrefetchLimit||2,r=new Sc(i,t,function(t,n,i){return yd(t,n,i||null,e.g.streaming.retryParameters,e.La,e.C)},!1),e.L.set(t.id,r),t.segmentIndex?l.A(2):S(l,t.createSegmentIndex(),2)):(s="number"===typeof e.m?e.m:0,a=t.segmentIndex.ac(s),o=null,a&&(o=a.current(),o||(o=a.next().value)),o||(o=rc(t.segmentIndex)),o?n?o.ea?S(l,Cc(r,o.ea),0):l.A(0):S(l,Ac(r,o.startTime),0):l.A(0))})}function Ch(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function Ih(e,t){ae.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{sd:null,rd:Mh,dd:function(e,t){return xh(n,"enter",e,t)}},{sd:kh,rd:Mh,dd:function(e,t){return xh(n,"enter",e,t)}},{sd:Dh,rd:Mh,dd:function(e,t){return xh(n,"enter",e,t)}},{sd:Mh,rd:kh,dd:function(e,t){return xh(n,"exit",e,t)}},{sd:Mh,rd:Dh,dd:function(e,t){return xh(n,"exit",e,t)}},{sd:kh,rd:Dh,dd:function(e,t){t?xh(n,"skip",e,t):(xh(n,"enter",e,t),xh(n,"exit",e,t))}},{sd:Dh,rd:kh,dd:function(e,t){return xh(n,"skip",e,t)}}],this.h=new Rt,this.h.o(this.i,"regionremove",function(e){n.g.delete(e.region)})}function xh(e,t,n,i){t=new K(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}Hu.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Xu.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},i=Yu.prototype,i.ready=function(){function e(){if(null==t.h||0==t.h&&1/0!=t.g.duration)t.i=!0;else{var e=t.g.currentTime,n=null;if("number"===typeof t.h)n=t.h;else if(t.h instanceof Date){var i=$u(t);null!==i&&(n=t.h.getTime()/1e3-i,n=Qu(t,n))}null==n?t.i=!0:(0>n&&(n=Math.max(0,e+n)),e!=n?(t.j.qa(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=n):t.i=!0)}}var t=this;ju(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},i.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},i.sg=function(e){this.h=this.i?this.h:e},i.Ue=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-($u(this)||0),e=Qu(this,e)),e||0},i.ri=function(){return 0},i.pi=function(){return 0},i.jj=function(){},i.Xi=function(){var e=$o(this.g.buffered);return null!=e&&e>=this.g.duration-1},i=Zu.prototype,i.ready=function(){this.m.ya(.25)},i.release=function(){this.i&&(this.i.release(),this.i=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.h=this.i=this.g=this.l=null,this.u=function(){}},i.sg=function(e){Gu(this.i,Ju(this,e))},i.Ue=function(){var e=zu(this.i);return 0<this.h.readyState&&!this.h.paused?nc(this,e):e},i.ri=function(){return this.j.G},i.pi=function(){return this.j.D},i.jj=function(){this.j.Mf()},i.Xi=function(){if(this.g.T()){var e=this.g.Gc(),t=$o(this.h.buffered);if(null!=t&&t>=e)return!0}return!1},i=ic.prototype,i.getNumReferences=function(){return this.g.length},i.getNumEvicted=function(){return this.i},i.release=function(){this.s||(this.g=[],this.m&&this.m.stop(),this.m=null)},i.Il=function(){this.s=!0},i.Hb=function(e){for(var t=d(this.g),n=t.next();!n.done;n=t.next())e(n.value)},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},i.offset=function(e){if(!this.s)for(var t=d(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.Ff=function(e){if(!this.s&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,h(e))}},i.pe=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.Ff(e),this.hb(t)},i.hb=function(e){if(!this.s){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.i+=t-this.g.length}},i.xd=function(e,t,n){if(n=void 0!==n&&n,!this.s){for(;this.g.length;){if(!(this.g[this.g.length-1].startTime>=t))break;this.g.pop()}for(;this.g.length;){if(!(this.g[0].endTime<=e))break;this.g.shift(),n||this.i++}0!=this.g.length&&(e=this.g[this.g.length-1],t=new qo(e.startTime,t,e.D,e.startByte,e.endByte,e.ea,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.C,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},i.ig=function(e,t){var n=this;this.s||(this.m&&this.m.stop(),this.m=new sr(function(){var e=t();e?n.g.push.apply(n.g,h(e)):(n.m.stop(),n.m=null)}),this.m.ya(e))},ic.prototype[Symbol.iterator]=function(){return this.ac(0)},ic.prototype.ac=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var i=this.find(e);if(null==i)return null;var r=this.get(i);n?i++:i--;var s=-1;if(r&&0<r.g.length)for(var a=r.g.length-1;0<=a;--a){var o=r.g[a];if(e>=o.startTime&&e<o.endTime){if(!t){for(;a&&!o.l;)a--,o=r.g[a];if(!o.l)return Z("No independent partial segment found!"),null}n?i--:i++,s=a-1;break}}return new ac(this,i,s,n)},ic.prototype.hf=function(){return-1},X("shaka.media.SegmentIndex",ic),ic.forSingleSegment=sc,ic.prototype.getIteratorForTime=ic.prototype.ac,ic.prototype.updateEvery=ic.prototype.ig,ic.prototype.fit=ic.prototype.xd,ic.prototype.evict=ic.prototype.hb,ic.prototype.mergeAndEvict=ic.prototype.pe,ic.prototype.offset=ic.prototype.offset,ic.prototype.get=ic.prototype.get,ic.prototype.find=ic.prototype.find,ic.prototype.markImmutable=ic.prototype.Il,ic.prototype.release=ic.prototype.release,ic.prototype.getNumEvicted=ic.prototype.getNumEvicted,ic.prototype.getNumReferences=ic.prototype.getNumReferences,i=ac.prototype,i.Pd=function(e){this.reverse=e},i.lk=function(){return this.h},i.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.B&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},i.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.B&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},i.Nh=function(){var e=this.current();if(e.s&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},X("shaka.media.SegmentIterator",ac),ac.prototype.resetToLastIndependent=ac.prototype.Nh,ac.prototype.next=ac.prototype.next,ac.prototype.current=ac.prototype.current,ac.prototype.currentPosition=ac.prototype.lk,ac.prototype.setReverse=ac.prototype.Pd,b(oc,ic),i=oc.prototype,i.clone=function(){var e=new oc;return e.h=this.h.slice(),e.i=this.i,e},i.release=function(){for(var e=d(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},i.Hb=function(e){for(var t=d(this.h),n=t.next();!n.done;n=t.next())n.value.Hb(e)},i.find=function(e){for(var t=this.i,n=d(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(null!=r)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},i.get=function(e){for(var t=this.i,n=d(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},i.offset=function(){},i.Ff=function(){},i.hb=function(e){for(var t=d(this.h),n=t.next();!n.done;n=t.next())n.value.hb(e);for(;1<this.h.length&&0==this.h[0].getNumReferences();)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},i.pe=function(){},i.xd=function(){},i.ig=function(){},X("shaka.media.MetaSegmentIndex",oc),oc.prototype.updateEvery=oc.prototype.ig,oc.prototype.fit=oc.prototype.xd,oc.prototype.mergeAndEvict=oc.prototype.pe,oc.prototype.evict=oc.prototype.hb,oc.prototype.merge=oc.prototype.Ff,oc.prototype.offset=oc.prototype.offset,oc.prototype.get=oc.prototype.get,oc.prototype.find=oc.prototype.find,oc.prototype.forEachTopLevelReference=oc.prototype.Hb,oc.prototype.release=oc.prototype.release,cc.prototype.release=function(){this.set(this.$c()),this.h&&(this.h.stop(),this.h=null),this.g=null},cc.prototype.set=function(e){this.i=e,dc(this)},cc.prototype.$c=function(){return this.g.$c()},hc.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=d(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},b(fc,ae),fc.prototype.release=function(){this.g.clear(),ae.prototype.release.call(this)},fc.prototype.j=function(e){for(var t=d(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.Mg;e:{for(var r=n.ve,s=r.length-1;0<=s;s--){var a=r[s];if(a.position<=e){r=a.Ed;break e}}r=null}s=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),a=r&&i&&r.label&&i.label&&i.label!==r.label;var o=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!dn(i.roles,r.roles),(a||o||i)&&yc(this,e,r.contentType)&&(n.Mg=r,i=new K("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),s&&yc(this,e,r.contentType)&&(n.Mg=r,JSON.stringify(r),n=new K("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},b(Tc,ae),Tc.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),ae.prototype.release.call(this)},Sc.prototype.hb=function(e,t){t=void 0!==t&&t;for(var n=d(this.h.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&Rc(this,i);t&&kc(this)},Sc.prototype.Pd=function(e){this.s=e,this.g&&this.g.Pd(e)},Oc.prototype.abort=function(){this.se&&this.se.abort()},i=Hc.prototype,i.destroy=function(){return this.l.destroy()},i.configure=function(e){if(this.i=e,this.P=new is({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ia&&(xc(t.ia),t.ia=null),t=d(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,xc(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(ct))&&t.ia&&(xc(t.ia),t.ia=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ia&&(xc(t.ia),t.ia=null),t=d(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.ia?(Mc(n.ia,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(xc(n.ia),n.ia=null)):0<e.segmentPrefetchLimit&&(n.ia=id(this,n.stream));e.disableAudioPrefetch||rd(this)},i.start=function(e){var t=this;return U(function(n){if(1==n.g)return S(n,td(t,e||new Map),2);Ms(t.l),t.I=!0,E(n)})},i.ld=function(){if(this.g){for(var e=this.g.bd(),t=d(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r=this.g.ha;if(i==ct?(r=r.h,r=null!=r.g&&null!=r.h&&(e>=r.g&&e<r.h)):(r=eu(r,i),r=Qo(r,e)),!r){if(this.L=0,n.ia&&(n.ia.g=null),"audio"===n.type){r=d(this.m.values());for(var s=r.next();!s.done;s=r.next())s.value.g=null}n.Aa=null,(null!=Zl(this.g.ha,i)||n.Za)&&ed(this,n),n.Mb&&(n.Mb.abort(),n.Mb=null),i===ct&&(i=this.g.ha,i.I&&i.I.Sd()),n.ld=!0}}"keep"!==this.i.crossBoundaryStrategy&&Ad(this)}},i.updateDuration=function(){var e=Kt(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.u&&this.u.stop(),uu(this.g.ha)),this.g.ha.vb(t)):e?(this.u&&this.u.ya(.5),this.g.ha.vb(1/0)):this.g.ha.vb(Math.pow(2,32))},X("shaka.util.ConfigUtils",xd),xd.getDifferenceFromConfigObjects=Rd,xd.convertToConfigObject=Md,xd.mergeConfigObjects=kd,X("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2}),X("shaka.drm.FairPlay",Od),Od.commonFairPlayResponse=function(e,t){if(2===e&&(e=t.originalRequest.drmInfo)&&Jr(e.keySystem)){try{var n=ze(t.data)}catch(r){return}if(e=!1,n=n.trim(),"<ckc>"===n.substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(r){}e&&(t.data=Me(et(n)))}},Od.muxFairPlayRequest=function(e,t){Ud(e,t)},Od.expressplayFairPlayRequest=function(e,t){if(2===e){var n=t.drmInfo;n&&Jr(n.keySystem)&&Ud(e,t)}},Od.conaxFairPlayRequest=function(e,t){Ud(e,t)},Od.ezdrmFairPlayRequest=function(e,t){Ud(e,t)},Od.verimatrixFairPlayRequest=function(e,t){2===e&&(e=t.drmInfo)&&Jr(e.keySystem)&&(e=De(t.body),e=Je(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=We("spc="+e))},Od.muxInitDataTransform=function(e,t,n){return Pd(e,t,n)},Od.expressplayInitDataTransform=function(e,t,n){return Pd(e,t,n)},Od.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate,i=qe(t).split("skd://").pop().split("?").shift(),i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=Re(r);for(var s=0,a=i.length;s<a;s++)r[s]=i.charCodeAt(s);return Ld(t,r,n)},Od.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,n=qe(e).split(";").pop(),Ld(e,n,t))},Od.verimatrixInitDataTransform=function(e,t,n){return Pd(e,t,n)},Od.initDataTransform=Ld,Od.defaultGetContentId=Nd,Od.isFairPlaySupported=function(){var e;return U(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(x(t),t.return(!1))})},Bd.prototype.configure=function(e){this.g=e},Bd.prototype.getConfiguration=function(){return this.g},Bd.prototype.create=function(e){var t;if(this.g.language){var n=Fd(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(e){return e.primary}),t=t.length?t:e),e=jd(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=qd(t,this.g.videoLayout),e.length&&(t=e)),this.g.Kc&&(e=Gd(t,this.g.Kc),e.length&&(t=e));var i=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=i.filter(function(e,t){return e&&i.indexOf(e)===t}),e.length)for(e=d(e),n=e.next();!n.done;n=e.next())if(n=zd(t,n.value),n.length){t=n;break}this.g.Uc&&(e=Vd(t,this.g.Uc),e.length&&(t=e)),this.g.Rd&&(e=Hd(t,this.g.Rd),e.length&&(t=e)),e=Wd(t,this.g.spatialAudio),e.length&&(t=e);var r=[this.g.audioCodec,this.g.Td].concat(h(this.g.preferredAudioCodecs));if(e=r.filter(function(e,t){return e&&r.indexOf(e)===t}),e.length)for(e=d(e),n=e.next();!n.done;n=e.next())if(n=Xd(t,n.value),n.length){t=n;break}return new Na(t[0],t,!("smooth"==this.g.codecSwitchingStrategy&&Xt()))},X("shaka.util.PlayerConfiguration",Kd),Kd.mergeConfigObjects=Qd,Kd.createDefaultForLL=$d,Kd.createDefault=Yd,b(hh,ae),i=hh.prototype,i.getStartTime=function(){return this.m},i.zd=function(){return this.N},i.ih=function(){return this.h},i.getStats=function(){return this.Y},i.Uk=function(){return this.J?xr(this.J):null},i.Tk=function(){return this.R?kr(this.R):null},i.start=function(){var t=this;(function(){var n;U(function(i){switch(i.g){case 1:return S(i,Promise.resolve(),2);case 2:return A(i,3),S(i,wh(t),5);case 5:if(Th(t),"webkit"===e.shakaMediaKeysPolyfill){i.A(6);break}return S(i,Sh(t),7);case 7:Th(t);case 6:return S(i,Eh(t),8);case 8:if(Th(t),!t.$||!t.i){i.A(9);break}return S(i,ma(t.i),10);case 10:Th(t);case 9:t.u.resolve(),I(i,0);break;case 3:n=x(i),n instanceof Le&&(7001==n.code||7003==n.code)||t.u.reject(n),E(i)}})})()},i.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):ae.prototype.dispatchEvent.call(this,e)},i.onError=function(e){2===e.severity&&(this.u.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new K("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},i.configure=function(e,t){e=Md(e,t),Qd(this.g,e)},i.getConfiguration=function(){return bn(this.g)},i.tm=function(){return this.u},i.destroy=function(){var e,t,n,i=this;return U(function(r){switch(r.g){case 1:if(i.s=!0,!i.l||i.oa){r.A(2);break}return S(r,i.l.stop(),2);case 2:if(!i.j||i.Z){r.A(4);break}return S(r,i.j.stop(),4);case 4:if(i.H&&!i.ra&&i.H.release(),!i.i||i.ba){r.A(6);break}return S(r,i.i.destroy(),6);case 6:if(0<i.L.size&&!i.sa)for(e=d(i.L.values()),t=e.next();!t.done;t=e.next())n=t.value,xc(n);E(r)}})},X("shaka.media.PreloadManager",hh),hh.prototype.destroy=hh.prototype.destroy,hh.prototype.waitForFinish=hh.prototype.tm,hh.prototype.getPrefetchedTextTrack=hh.prototype.Tk,hh.prototype.getPrefetchedVariantTrack=hh.prototype.Uk,b(Ih,ae),Ih.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ae.prototype.release.call(this)},Ih.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=d(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),s=e<i.startTime?kh:e>i.endTime?Dh:Mh;this.g.set(i,s);for(var a=d(this.m),o=a.next();!o.done;o=a.next())o=o.value,o.sd==r&&o.rd==s&&o.dd(i,t)}}};var kh=1,Mh=2,Dh=3;function Rh(e,t,n){var i,r,s,a,o,l,u;return U(function(c){switch(c.g){case 1:var d=new he(e).ub.split("/").pop().split(".");return i=1==d.length?"":d.pop().toLowerCase(),(r=Oh.get(i))?c.return(r):(s=0,a=bs([e],n),A(c,2),a.method="HEAD",S(c,t.request(s,a).promise,4));case 4:o=c.h,r=o.headers["content-type"],I(c,3);break;case 2:if(l=x(c),!l||1002!=l.code&&1001!=l.code){c.A(3);break}return a.method="GET",S(c,t.request(s,a).promise,6);case 6:u=c.h,r=u.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}
/*
 @license
 Copyright 2013 Ali Al Dallal

 Licensed under the MIT license.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
*/
for(var Oh=(new Map).set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html"),Nh={ach:"Lwo",ady:"",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Ti",ar:"","ar-AR":"","ar-MA":"","ar-SA":" ()","ay-BO":"Aymar aru",az:"Azrbaycan dili","az-AZ":"Azrbaycan dili","be-BY":"",bg:"","bg-BG":"",bn:"","bn-IN":" ()","bn-BD":"()","bs-BA":"Bosanski",ca:"Catal","ca-ES":"Catal",cak:"Maya Kaqchikel","ck-US":" (tsalagi)",cs:"etina","cs-CZ":"etina",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (sterreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbina",el:"","el-GR":"",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Espaol","es-AR":"Espaol (Argentine)","es-419":"Espaol (Latinoamrica)","es-CL":"Espaol (Chile)","es-CO":"Espaol (Colombia)","es-EC":"Espaol (Ecuador)","es-ES":"Espaol (Espaa)","es-LA":"Espaol (Latinoamrica)","es-NI":"Espaol (Nicaragua)","es-MX":"Espaol (Mxico)","es-US":"Espaol (Estados Unidos)","es-VE":"Espaol (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"","fa-IR":"","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Froyskt",fr:"Franais","fr-CA":"Franais (Canada)","fr-FR":"Franais (France)","fr-BE":"Franais (Belgique)","fr-CH":"Franais (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avae'","gu-IN":"","gx-GR":" ",he:"","he-IL":"",hi:"","hi-IN":"",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbina",ht:"Kreyl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"slenska","is-IS":"slenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"","ja-JP":"","jv-ID":"Basa Jawa","ka-GE":"","kk-KZ":"",km:"","km-KH":"",kab:"Taqbaylit",kn:"","kn-IN":" (India)",ko:"","ko-KR":" ()",ku:"Kurd","ku-TR":"Kurd",la:"Latin","la-VA":"Latin",lb:"Ltzebuergesch","li-NL":"Lmbrgs",lt:"Lietuvi","lt-LT":"Lietuvi",lv:"Latvieu","lv-LV":"Latvieu",mai:", ","mg-MG":"Malagasy",mk:"","mk-MK":" ()",ml:"","ml-IN":"","mn-MN":"",mr:"","mr-IN":"",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"",nb:"Norsk (bokml)","nb-NO":"Norsk (bokml)",ne:"","ne-NP":"",nl:"Nederlands","nl-BE":"Nederlands (Belgi)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"",pa:"","pa-IN":" ( )",pl:"Polski","pl-PL":"Polski","ps-AF":"",pt:"Portugus","pt-BR":"Portugus (Brasil)","pt-PT":"Portugus (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Romn","ro-RO":"Romn",ru:"","ru-RU":"","sa-IN":"","se-NO":"Davvismegiella","si-LK":"",sk:"Slovenina","sk-SK":"Slovenina (Slovakia)",sl:"Slovenina","sl-SI":"Slovenina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"","sr-RS":" (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"","ta-IN":"",te:"","te-IN":"",tg:" ","tg-TJ":"",th:"","th-TH":" ()",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Trke","tr-TR":"Trke","tt-RU":"",uk:"","uk-UA":"",ur:"","ur-PK":"",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Ting Vit","vi-VN":"Ting Vit","xh-ZA":"isiXhosa",yi:"","yi-DE":" (German)",zh:"","zh-HANS":"","zh-HANT":"","zh-CN":"","zh-HK":"","zh-SG":"","zh-TW":"","zu-ZA":"isiZulu"},Lh=d(Object.keys(Nh)),Ph=Lh.next();!Ph.done;Ph=Lh.next()){var Uh=Ph.value;Nh[Uh.toLowerCase()]=Nh[Uh]}function Bh(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return Bh(t,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=wi,r=e.fontStyle==Ei,s=e.textDecoration.includes(Ci);return i&&n.push(["b"]),r&&n.push(["i"]),s&&n.push(["u"]),r=e.color,""==r&&t&&(r=t.color),i="",(r=Fh(r))&&(i+="."+r),r=e.backgroundColor,""==r&&t&&(r=t.backgroundColor),(t=Fh(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(e,t){var n=d(t);return t=n.next().value,n=n.next().value,"<"+t+(void 0===n?"":n)+">"+e+"</"+t+">"},e.payload)}function Fh(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function jh(e,t){var n=[];e=d(Vh(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,h(jh(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=Bh(i,t),n.push(r)}return n}function Vh(e){var t=[];e=d(e);for(var n=e.next(),i={};!n.done;i={Jg:void 0},n=e.next())i.Jg=n.value,t.some(function(e){return function(t){return ii(e.Jg,t)}}(i))||t.push(i.Jg);return t}function Hh(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(i){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function zh(e,t){var n=jh(t),i=[];t=e.cues?Array.from(e.cues):[],n=d(n);for(var r=n.next(),s={};!r.done;s={Bd:void 0},r=n.next())s.Bd=r.value,!t.some(function(e){return function(t){return t.startTime==e.Bd.startTime&&t.endTime==e.Bd.endTime&&t.text==e.Bd.payload}}(s))&&s.Bd.payload&&(r=Hh(s.Bd))&&i.push(r);for(t=i.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)}),t=d(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function Gh(e,t){var n=!1;"disabled"===e.mode&&(n=!0,e.mode="hidden");for(var i=0;i<e.cues.length;){var r=e.cues[i];t(r)?e.removeCue(r):i++}n&&(e.mode="disabled")}function qh(e){var t=this;this.i=e,this.l=new Rt,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.s=null,this.C=function(){t.l.Da(t.i,"textchanged",t.m),t.l.Da(t.j.textTracks,"change",t.B);for(var e=d(t.h.values()),n=e.next();!n.done;n=e.next())n.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var e=new Map,n=t.i.rc();n=d(n);for(var i=n.next();!i.done;i=n.next()){if(i=i.value,t.h.has(i.id)){var r=t.h.get(i.id);i.active||"disabled"===r.track.mode||(r.track.mode="disabled"),t.h.delete(i.id)}else{r=t.j.ownerDocument.createElement("track"),r.kind=Wh(i);var s=r,a=void 0;if(i.label)a=i.label;else if(i.language)if(i.language in Nh)a=Nh[i.language];else{var o=_t(i.language);o in Nh&&(a=Nh[o]+" ("+i.language+")")}a||(a=i.originalTextId,i.language&&i.language!==i.originalTextId&&(a+=" ("+i.language+")")),s.label=a,i.language in Nh&&(r.srclang=i.language),"CHROMIUM"===Be().Ia()&&(r.src="data:,WEBVTT"),r.track.mode="disabled",t.j.appendChild(r)}e.set(i.id,r),i.active&&(t.g=i.id)}for(n=d(t.h.values()),i=n.next();!i.done;i=n.next())i.value.remove();-1<t.g&&(e.has(t.g)?(n=e.get(t.g).track,"disabled"===n.mode&&(n.mode=t.u?"showing":"hidden")):t.g=-1),t.h=e},this.B=function(){if(!t.s){var e=t.j;t.s=new sr(function(){if(t.s=null,t.j===e){var n=-1,i=!1;if(t.h.has(t.g)){var r=t.h.get(t.g);"showing"===r.track.mode?(n=t.g,i=!0):"hidden"===r.track.mode&&(n=t.g)}if(!i)for(i=d(t.h),r=i.next();!r.done;r=i.next()){var s=d(r.value);if(r=s.next().value,s=s.next().value,"showing"===s.track.mode){n=r;break}0>n&&"hidden"===s.track.mode&&(n=r)}for(i=d(t.h),r=i.next();!r.done;r=i.next())s=d(r.value),r=s.next().value,s=s.next().value,r!==n&&"disabled"!==s.track.mode&&(s.track.mode="disabled");t.g!==n&&(t.g=n,-1<n&&t.i.$f({id:n})),t.i.Ae(-1<n&&"showing"===t.h.get(n).track.mode)}}).X(0)}},this.l.o(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}function Wh(e){var t=Be();return e.forced&&"WEBKIT"===t.Ia()?"forced":"caption"===e.kind||e.roles&&e.roles.some(function(e){return e.includes("transcribes-spoken-dialog")})&&e.roles.some(function(e){return e.includes("describes-music-and-sound")})?"captions":"subtitles"}function Xh(e,t){for(Bt("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=d(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,"metadata"!==t.kind&&"chapters"!==t.kind&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}function Kh(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function Yh(){}function $h(t,n){var i=this;this.m=!1,this.h=[],this.j=t,this.s=n,this.C=this.u=null,this.g=nl("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new sr(function(){i.j.paused||ep(i)}),Qh(this),this.l=new Map,this.i=new Rt,this.i.o(document,"fullscreenchange",function(){ep(i,!0)}),this.i.o(this.j,"seeking",function(){ep(i,!0)}),this.i.o(this.j,"ratechange",function(){Qh(i)}),this.i.o(this.j,"resize",function(){var e=i.j,t=e.videoWidth;e=e.videoHeight,i.u=t&&e?t/e:null}),this.D=null,"ResizeObserver"in e&&(this.D=new ResizeObserver(function(){ep(i,!0)}),this.D.observe(this.g)),this.F=new Map}function Qh(e){e.B&&(e.h.length?e.B.ya((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function Zh(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Jh(e,t,n,i,r){var s=!1,a=[],o=[];t=d(t);for(var l=t.next();!l.done;l=t.next()){l=l.value,r.push(l);var u=e.l.get(l),c=l.startTime<=i&&l.endTime>i,h=u?u.Zj:null;u&&(a.push(u.Lg),u.kd&&a.push(u.kd),c||(s=!0,e.l.delete(l),u=null)),c&&(o.push(l),u?Zh(e,h)||(s=!0):(tp(e,l,r),u=e.l.get(l),h=u.Zj,s=!0)),0<l.nestedCues.length&&h&&Jh(e,l.nestedCues,h,i,r),r.pop()}if(s){for(i=d(a),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(o.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),o=d(o),i=o.next();!i.done;i=o.next())i=e.l.get(i.value),i.kd?(i.kd.contains(n)&&i.kd.removeChild(n),n.appendChild(i.kd),i.kd.appendChild(i.Lg)):n.appendChild(i.Lg)}}function ep(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||void 0!==t&&t){t=d(e.F.values());for(var i=t.next();!i.done;i=t.next())ol(i.value);ol(e.g),e.l.clear(),e.F.clear()}e.m&&Jh(e,e.h,e.g,n,[])}}function tp(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var s=nl(r);if("br"!=r&&ip(e,s,t,n,i),n=null,t.region&&t.region.id){var a=t.region,o=e.u===4/3?2.5:1.9;if(n=a.id+"_"+a.width+"x"+a.height+(a.heightUnits==an?"%":"px")+"-"+a.viewportAnchorX+"x"+a.viewportAnchorY+(a.viewportAnchorUnits==an?"%":"px"),e.F.has(n))n=e.F.get(n);else{r=nl("span");var l=a.heightUnits==an?"%":"px",u=a.widthUnits==an?"%":"px",c=a.viewportAnchorUnits==an?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var d=a.height,h=a.width;2===a.heightUnits&&(d=5.33*a.height,l="%"),2===a.widthUnits&&(h=a.width*o,u="%"),r.style.height=d+l,r.style.width=h+u,2===a.viewportAnchorUnits?(o=a.viewportAnchorY/75*100,l=a.viewportAnchorX/(e.u===4/3?160:210)*100,o-=a.regionAnchorY*d/100,l-=a.regionAnchorX*h/100,r.style.top=o+"%",r.style.left=l+"%"):(r.style.top=a.viewportAnchorY-a.regionAnchorY*d/100+c,r.style.left=a.viewportAnchorX-a.regionAnchorX*h/100+c),0!==a.heightUnits&&0!==a.widthUnits&&0!==a.viewportAnchorUnits&&(a=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=a+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.F.set(n,r),n=r}}r=s,i&&(r=nl("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",s.appendChild(r)),e.l.set(t,{Lg:s,Zj:r,kd:n})}function np(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==ui?n:"left"===e||"start"===e&&t===fi||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===fi?"line-right":"center"}function ip(e,t,n,i,r){var s=t.style,a=0==n.nestedCues.length,o=1<i.length;s.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,function(e){return"".repeat(e.length)});if(s.webkitTextStrokeColor=n.textStrokeColor,s.webkitTextStrokeWidth=n.textStrokeWidth,s.color=n.color,s.direction=n.direction,s.opacity=n.opacity,s.paddingLeft=rp(n.linePadding,n,e.s),s.paddingRight=rp(n.linePadding,n,e.s),s.textCombineUpright=n.textCombineUpright,s.textShadow=n.textShadow,n.backgroundImage)s.backgroundImage="url('"+n.backgroundImage+"')",s.backgroundRepeat="no-repeat",s.backgroundSize="contain",s.backgroundPosition="center",n.backgroundColor&&(s.backgroundColor=n.backgroundColor),s.width="100%",s.height="100%";else{if(n.nestedCues.length)var u=t;else u=nl("span"),t.appendChild(u);n.border&&(u.style.border=n.border),r||((t=sp(i,function(e){return e.backgroundColor}))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.setAttribute("translate","no"),u.textContent=l)}o&&!i[i.length-1].isContainer?s.display="inline":(s.display="flex",s.flexDirection="column",s.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(s.width="100%",s.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(s.width="100%",s.alignItems="end"),s.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(s.margin="0"),s.fontFamily=n.fontFamily,s.fontWeight=n.fontWeight.toString(),s.fontStyle=n.fontStyle,s.letterSpacing=n.letterSpacing,s.fontSize=rp(n.fontSize,n,e.s,e.C?e.C.fontScaleFactor:1),i=n.line,null!=i&&(a=n.lineInterpretation,a==mi&&(a=1,o=16,e.u&&1>e.u&&(o=32),i=0>i?100+i/o*100:i/o*100),1==a&&(s.position="absolute",n.writingMode==gi?(s.width="100%",n.lineAlign==yi?s.top=i+"%":"end"==n.lineAlign&&(s.bottom=100-i+"%")):"vertical-lr"==n.writingMode?(s.height="100%",n.lineAlign==yi?s.left=i+"%":"end"==n.lineAlign&&(s.right=100-i+"%")):(s.height="100%",n.lineAlign==yi?s.right=i+"%":"end"==n.lineAlign&&(s.left=100-i+"%")))),s.lineHeight=n.lineHeight,e=np(n),"line-left"==e?(s.cssFloat="left",null!==n.position&&(s.position="absolute",n.writingMode==gi?(s.left=n.position+"%",s.width="auto"):s.top=n.position+"%")):"line-right"==e?(s.cssFloat="right",null!==n.position&&(s.position="absolute",n.writingMode==gi?(s.right=100-n.position+"%",s.width="auto"):s.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(s.position="absolute",n.writingMode==gi?(s.left=n.position+"%",s.width="auto"):s.top=n.position+"%"),s.textAlign=n.textAlign,s.textDecoration=n.textDecoration.join(" "),s.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&s.writingMode==n.writingMode||(s.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==gi?s.width=n.size+"%":s.height=n.size+"%")}function rp(e,t,n,i){i=void 0===i?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function sp(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}function ap(e,t){function n(e){for(var n=e,i=d(t),r=i.next();!r.done;r=i.next())r=r.value,r.end&&r.start<e&&(n+=r.end-r.start);return e=Math.floor(n/3600),i=Math.floor(n/60%60),r=Math.floor(n%60),n=Math.floor(1e3*n%1e3),(10>e?"0":"")+e+":"+(10>i?"0":"")+i+":"+(10>r?"0":"")+r+"."+(100>n?10>n?"00":"0":"")+n}var i=jh(e);e="WEBVTT\n\n",i=d(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case ci:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}function op(e,t){this.h=e,this.g=t,this.i=void 0,this.u=!1,this.F=!0,this.l=this.C=!1,this.s=this.m=void 0,this.B=0,this.G=!1,this.D=new Rt,this.j=null}function lp(e){e.u=!1,e.F=!0,e.C=!1,e.l=!1,e.m=0,e.s=0,e.B=0,e.G=!1,e.j=null,e.D.Sa()}function up(e,t){e.l=t,e.l?e.i==Rp?e.i=Op:e.i==Np&&(e.i=Lp):e.i==Op?e.i=Rp:e.i==Lp&&(e.i=Np)}function cp(e,t){if(e.g&&e.g.enabled&&e.g.version==Dp&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.B=t}).catch(function(){e.B=0})}}function dp(e,t,n){try{if(!e.g.enabled)return t;var i=pp(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=Ap;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=Ip;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=Ep;break e}r=void 0}i.ot=r,i.su=!0;var s=_p(i);return Sp(t,s)}catch(a){return ee("CMCD_SRC_ERROR","Could not generate src CMCD data.",a),t}}function hp(e){e.D.qa(e.j,"play",function(){e.m||(e.m=Date.now())}),e.D.qa(e.j,"playing",function(){e.s||(e.s=Date.now())})}function pp(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:t.g.version,sf:t.i,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function fp(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled)if(e=Tp(e,n),i)i=wp(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var r=_p(e);r&&(t.uris=t.uris.map(function(e){return Sp(e,r)}))}}function gp(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(e,i){return n.includes(i)&&(e[i]=t[i]),e},{}):t}function mp(e){if(0===e.type)return xp;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Ip:Cp;if("audio"==t)return Ap;if("text"==t)return"application/mp4"===e.mimeType?Mp:kp}}function yp(e,t){if(t=e.h.Qb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}function vp(e,t){if(t=e.h.Qb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function bp(e,t){var n=e.h.qb();if(!n.length)return NaN;e=n[0],n=d(n);for(var i=n.next();!i.done;i=n.next())i=i.value,"variant"===i.type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Cp:return e.videoBandwidth||NaN;case Ap:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Tp(e,t){t=void 0===t?{}:t,Object.assign(t,pp(e)),t.pr=e.h.Xa();var n=t.ot===Cp||t.ot===Ip;return e.C&&n&&(t.bs=!0,t.su=!0,e.C=!1),null==t.su&&(t.su=e.F),t.v===Dp&&(e.h.T()&&(t.ltc=e.h.pf()),n=!e.G&&e.s&&e.m?e.s-(e.B||e.m):void 0,void 0!=n&&(t.msd=n,e.G=!0)),gp(e,t)}function _p(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}var r=[],s={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},a=Object.keys(e||{}).sort();a=d(a);for(var o=a.next();!o.done;o=a.next()){o=o.value;var l=e[o];if(i(l)&&("v"!==o||1!==l)&&("pr"!=o||1!==l)){var u=s[o];u&&(l=u(l)),u=typeof l;var c=void 0;c="string"===u&&"ot"!==o&&"sf"!==o&&"st"!==o?o+"="+JSON.stringify(l):"boolean"===u?o:"symbol"===u?o+"="+l.description:o+"="+l,r.push(c)}}return r.join(",")}function wp(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};t=d(t);for(var a=t.next();!a.done;a=t.next())a=a.value,r[null!=s[a]?s[a]:1][a]=e[a];for(e=0;e<r.length;e++)(s=_p(r[e]))&&(n["CMCD-"+i[e]]=s);return n}function Sp(e,t){return!t||e.includes("offline:")?e:(e=new he(e),e.g.set("CMCD",t),e.toString())}i=qh.prototype,i.configure=function(){},i.remove=function(e,t){return!!this.i&&(this.h.has(this.g)&&Gh(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){this.h.has(this.g)&&zh(this.h.get(this.g).track,e)},i.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},i.isTextVisible=function(){return this.u},i.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;"disabled"!==t.mode&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&3===this.i.m)if(t=Array.from(this.i.h.textTracks).filter(function(e){return["captions","subtitles","forced"].includes(e.kind)}),e){e=null,t=d(t);for(var n=t.next();!n.done;n=t.next()){if(n=n.value,"showing"===n.mode){e=null;break}e||"hidden"!==n.mode||(e=n)}e&&(e.mode="showing")}else for(e=d(t),t=e.next();!t.done;t=e.next())t=t.value,"showing"===t.mode&&(t.mode="hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){!this.j&&this.i&&2===this.i.m&&(this.j=this.i.h,this.l.qa(this.i,"unloading",this.C),this.l.o(this.i,"textchanged",this.m),this.l.o(this.j.textTracks,"change",this.B),this.m())},X("shaka.text.NativeTextDisplayer",qh),qh.prototype.enableTextDisplayer=qh.prototype.enableTextDisplayer,qh.prototype.setTextLanguage=qh.prototype.setTextLanguage,qh.prototype.setTextVisibility=qh.prototype.setTextVisibility,qh.prototype.isTextVisible=qh.prototype.isTextVisible,qh.prototype.destroy=qh.prototype.destroy,qh.prototype.append=qh.prototype.append,qh.prototype.remove=qh.prototype.remove,qh.prototype.configure=qh.prototype.configure,i=Xh.prototype,i.configure=function(){},i.remove=function(e,t){return!!this.g&&(Gh(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){this.g&&zh(this.g,e)},i.destroy=function(){return this.g&&(Gh(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},i.isTextVisible=function(){return!!this.g&&"showing"==this.g.mode},i.setTextVisibility=function(e){e&&!this.g&&Kh(this),this.g&&(this.g.mode=e?"showing":"hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){Kh(this)},X("shaka.text.SimpleTextDisplayer",Xh),Xh.prototype.enableTextDisplayer=Xh.prototype.enableTextDisplayer,Xh.prototype.setTextLanguage=Xh.prototype.setTextLanguage,Xh.prototype.setTextVisibility=Xh.prototype.setTextVisibility,Xh.prototype.isTextVisible=Xh.prototype.isTextVisible,Xh.prototype.destroy=Xh.prototype.destroy,Xh.prototype.append=Xh.prototype.append,Xh.prototype.remove=Xh.prototype.remove,Xh.prototype.configure=Xh.prototype.configure,i=Yh.prototype,i.configure=function(){},i.remove=function(){},i.append=function(){},i.destroy=function(){},i.isTextVisible=function(){return!1},i.setTextVisibility=function(){},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){},X("shaka.text.StubTextDisplayer",Yh),Yh.prototype.enableTextDisplayer=Yh.prototype.enableTextDisplayer,Yh.prototype.setTextLanguage=Yh.prototype.setTextLanguage,Yh.prototype.setTextVisibility=Yh.prototype.setTextVisibility,Yh.prototype.isTextVisible=Yh.prototype.isTextVisible,Yh.prototype.destroy=Yh.prototype.destroy,Yh.prototype.append=Yh.prototype.append,Yh.prototype.remove=Yh.prototype.remove,Yh.prototype.configure=Yh.prototype.configure,i=$h.prototype,i.configure=function(e){this.C=e,Qh(this),ep(this,!0)},i.append=function(e){var t=[].concat(h(this.h));e=d(Vh(e));for(var n=e.next(),i={};!n.done;i={Kg:void 0},n=e.next())i.Kg=n.value,t.some(function(e){return function(t){return ii(t,e.Kg)}}(i))||this.h.push(i.Kg);this.h.length&&Qh(this),ep(this)},i.destroy=function(){return this.g?(this.g.parentElement&&this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.D&&(this.D.disconnect(),this.D=null),Promise.resolve()):Promise.resolve()},i.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),ep(this,n>this.h.length),this.h.length||Qh(this),!0},i.isTextVisible=function(){return this.m},i.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.s.appendChild(this.g),ep(this,!0)):this.g.parentElement&&this.s.removeChild(this.g)},i.setTextLanguage=function(e){e&&"und"!=e?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},i.enableTextDisplayer=function(){},X("shaka.text.UITextDisplayer",$h),$h.prototype.enableTextDisplayer=$h.prototype.enableTextDisplayer,$h.prototype.setTextLanguage=$h.prototype.setTextLanguage,$h.prototype.setTextVisibility=$h.prototype.setTextVisibility,$h.prototype.isTextVisible=$h.prototype.isTextVisible,$h.prototype.remove=$h.prototype.remove,$h.prototype.destroy=$h.prototype.destroy,$h.prototype.append=$h.prototype.append,$h.prototype.configure=$h.prototype.configure,X("shaka.text.WebVttGenerator",function(){}),op.prototype.setMediaElement=function(e){this.j=e,hp(this)},op.prototype.configure=function(e){this.g=e};var Ep="m",Ap="a",Cp="v",Ip="av",xp="i",kp="c",Mp="tt",Dp=2,Rp="d",Op="ld",Np="h",Lp="lh";function Pp(e){this.h=e,this.g=null}function Up(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}X("shaka.util.CmcdManager.StreamingFormat",{DASH:Rp,Um:Op,HLS:Np,Vm:Lp,mn:"s",OTHER:"o"}),i=Pp.prototype,i.configure=function(e){this.h=e},i.Qi=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Fp)?1e3*this.g.get(Fp):null},i.Pi=function(){return this.h.enabled&&this.g&&this.g.has(Bp)?1e3*this.g.get(Bp):null},i.Wk=function(){return this.h.enabled&&this.g&&this.g.has(jp)?this.g.get(jp):null},i.Xk=function(){return this.h.enabled&&this.g&&this.g.has(Vp)?this.g.get(Vp):null},i.getBandwidthEstimate=function(e){var t=this.Pi();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e},X("shaka.util.CmsdManager",Pp),Pp.prototype.getBandwidthEstimate=Pp.prototype.getBandwidthEstimate,Pp.prototype.getRoundTripTime=Pp.prototype.Xk,Pp.prototype.getResponseDelay=Pp.prototype.Wk,Pp.prototype.getEstimatedThroughput=Pp.prototype.Pi,Pp.prototype.getMaxBitrate=Pp.prototype.Qi;var Bp="etp",Fp="mb",jp="rd",Vp="rtt";function Hp(){this.g=null,this.h=[]}function zp(e,t){return U(function(n){if(1==n.g)return e.g?S(n,new Promise(function(t){return e.h.push(t)}),2):n.A(2);e.g=t,E(n)})}function Gp(t,n,i){n=void 0===n?null:n,ae.call(this);var r=this;this.m=mg,this.h=null,this.Ne=n,this.na=!1,this.Se=new Rt,this.He=new Rt,this.j=new Rt,this.dc=new Rt,this.Jd=new Rt,this.F=this.I=this.D=this.H=null,this.Te=0,this.Z=new Hp,this.N=this.wc=this.U=this.i=this.yc=this.G=this.l=this.Ee=this.P=this.ti=this.ba=this.K=this.Ta=this.sa=this.Fe=this.O=this.Ha=this.J=this.cb=null,this.Y=!1,this.Na=this.u=null,this.Me=1e9,this.Re=[],this.Ya=[],this.ug=-1,this.g=Ff(this),this.wg=$d(),this.R=null,this.Ve=-1,this.Lb=null,this.oa={width:1/0,height:1/0},this.Le=new Va(this.g,this.oa,null),this.Pe=[],this.B=null,this.L=this.g.adaptationSetCriteriaFactory(),this.L.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:0,Kc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Uc:this.g.preferredAudioLabel,Rd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Td:"",We:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Kd=this.g.preferredTextLanguage,this.Ke=this.g.preferredTextRole,this.Je=this.g.preferForcedSubs,this.Ie=[],i&&i(this),this.K=Af(this),this.ba=new Pp(this.g.cmsd),this.H=yf(this),this.Md=this.$=this.ra=this.C=null,this.yg=!1,this.vg=[],this.xg=new sr(function(){return U(function(e){return 1==e.g?r.$?S(e,r.$b(r.Md,!0),3):e.A(0):4!=e.g?S(e,r.load(r.$),4):(r.yg?r.Md.pause():r.Md.play(),r.$=null,r.yg=!1,void E(e))})}),_g&&(this.C=_g(),this.C.configure(this.g.ads),this.Jd.o(this.C,"ad-content-pause-requested",function(e){var t;return U(function(n){if(1==n.g)return r.xg.stop(),r.$?n.A(0):(r.Md=r.h,r.yg=r.isEnded(),t=e.saveLivePosition||!1,S(n,r.Ki(!0,t),3));r.$=n.h,E(n)})}),this.Jd.o(this.C,"ad-content-resume-requested",function(e){if(e=e.offset||0,r.$){var t=r.$;t.m&&e&&("number"===typeof t.m?t.m+=e:t.m.setTime(t.m.getTime()+1e3*e))}r.xg.X(.1)}),this.Jd.o(this.C,"ad-content-attach-requested",function(){return U(function(e){return r.h||!r.Md?e.A(0):S(e,r.$b(r.Md,!0),0)})})),wg&&(this.ra=wg(this),this.ra.configure(this.g.queue)),this.Se.o(e,"online",function(){ag(r),r.Oh()}),this.Oe=new sr(function(){for(var e=Date.now()/1e3,t=!1,n=!0,i=d(r.i.variants),s=i.next();!s.done;s=i.next())s=s.value,0<s.disabledUntilTime&&s.disabledUntilTime<=e&&(s.disabledUntilTime=0,t=!0),0<s.disabledUntilTime&&(n=!1);n&&r.Oe.stop(),t&&Kf(r,!1,void 0,!1,!1)}),this.La=null,t&&(Bt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.$b(t,!0)),this.s=null}function qp(e){null!=e.P&&(Gt(e.P),e.P.release(),e.P=null)}function Wp(e,t,n){n||t.lcevc.enabled?(qp(e),null==e.P&&(e.P=new Ht(e.h,e.ti,t.lcevc,n),e.I&&(e.I.L=e.P))):qp(e)}function Xp(e,t){return new K(e,t)}function Kp(e,t){Tg.set(e,t)}function Yp(){return e.Promise||J("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/"))&&(Be(),!!r_()||""!=ll().canPlayType("application/x-mpegurl"))}function $p(e,t){e.dispatchEvent(Xp("onstatechange",(new Map).set("state",t)))}function Qp(e,t){var n;return U(function(i){return 1==i.g?(n=++e.Te,S(i,zp(e.Z,t),2)):n!=e.Te?(e.Z.release(),i.return(!0)):i.return(!1)})}function Zp(e){for(var t=d(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}function Jp(e,t){var n,i;return t=void 0!==t&&t,U(function(r){if(1==r.g)return n=null,e.i&&e.G&&e.yc&&e.U&&e.g?(i=e.h.currentTime,e.T()&&!t&&(i=null),S(r,tf(e,e.U,i,e.wc,e.g,!0,!1,!1),3)):r.A(2);if(2!=r.g){n=r.h,e.Pe.push(n),e.G&&e.G.setMediaElement&&e.G.setMediaElement(null);var s=n,a=e.G,o=e.yc;s.h=e.i,s.l=a,s.G=o,s=n,a=e.Na,s.j=e.u,s.D=a,n.B=e.L,n.start(),e.i=null,e.G=null,e.yc=null,e.u=null,e.Na=null}return r.return(n)})}function ef(e,t,n,i,r,s){var a,o,l,u;return r=void 0!==r&&r,U(function(c){return 1==c.g?i?c.A(2):S(c,nf(e,t),3):(2!=c.g&&(i=c.h),rf(e,i)?c.return(null):(a=s||e.g,o=!1,l=!0,r&&(e.u&&e.Na==a.abrFactory&&(l=!1),e.h&&"AUDIO"===e.h.nodeName&&(o=!0)),u=tf(e,t,n,i||null,a,!r,o,l),u=r?u.then(function(e){return e.C=!1,e}):u.then(function(t){return e.Pe.push(t),t}),c.return(u)))})}function tf(e,t,n,i,r,s,a,o){var l,u,c,h,p,f,g,m,y,v,b,T,_,w,A;return s=void 0===s||s,a=void 0!==a&&a,o=void 0===o||o,U(function(C){return 1==C.g?(l=null,u=bn(r),a&&(u.manifest.disableVideo=!0),c=function(){return l.P&&l.s?null:l},h=function(){return c()?c().getConfiguration():e.g},1/0!=e.oa.width||1/0!=e.oa.height||e.g.ignoreHardwareResolution?C.A(2):(p=Be(),S(C,p.nc(),3))):(2!=C.g&&(f=C.h,e.oa.width=f.width,e.oa.height=f.height),g=new Va(u,e.oa,null),m={networkingEngine:e.H,filter:function(e){var t,n;return U(function(i){return 1==i.g?S(i,Ha(g,e),2):4!=i.g?(t=i.h,t?(n=Xp("trackschanged"),S(i,Promise.resolve(),4)):i.A(0)):(l.dispatchEvent(n),void E(i))})},makeTextStreamsForClosedCaptions:function(t){return jf(e,t)},onTimelineRegionAdded:function(e){_c(l.H,e)},onEvent:function(e){return l.dispatchEvent(e)},onError:function(e){return l.onError(e)},isLowLatencyMode:function(){return h().streaming.lowLatencyMode},updateDuration:function(){e.l&&l.P&&e.l.updateDuration()},newDrmInfo:function(e){var t=l.i,n=t?t.g:null;n&&t.B&&qa(g,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.T());l.dispatchEvent(Xp("manifestupdated",t)),ph(l,!1,function(){e.C&&e.C.onManifestUpdated(e.T())})},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},onMetadata:function(t,n,i,r){var s=t;"com.apple.hls.interstitial"==t&&(s="com.apple.quicktime.HLS",t={startTime:n,endTime:i,values:r},e.C)&&e.C.onHLSInterstitialMetadata(e,e.h,t),r=d(r),t=r.next();for(var a={};!t.done;a={Ih:void 0},t=r.next())a.Ih=t.value,"ID"!=a.Ih.name&&ph(l,!1,function(t){return function(){gf(e,n,i,s,t.Ih)}}(a))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)},addFont:function(t,n){return e.addFont(t,n)}},y=new Tc(function(){return e.xa()}),y.addEventListener("regionadd",function(t){var n=t.region;lg(e,"timelineregionadded",n,l),ph(l,!1,function(){e.C&&(e.C.onDashTimedMetadata(n),e.C.onDASHInterstitialMetadata(e,e.h,n))})}),v=null,u.streaming.observeQualityChanges&&(v=new fc(function(){return e.Qb()}),v.addEventListener("qualitychange",function(t){ug(e,t.quality,t.position)}),v.addEventListener("audiotrackchange",function(t){ug(e,t.quality,t.position,!0)})),b=!0,T={xc:e.H,onError:function(e){return l.onError(e)},Lf:function(t){ph(l,!0,function(){if(e.D){var n=t,i=Xp("keystatuschanged");e.dispatchEvent(i);var r=Object.keys(n);1==r.length&&""==r[0]&&(r=["00"],n={"00":n[""]}),i=1==r.length&&"00"==r[0];var s=!1;if(r.length){r=e.keySystem();for(var a=Ds(e.g.drm.clearKeys),o=d(e.i.variants),l=o.next();!l.done;l=o.next()){l=l.value;var u=[];l.audio&&u.push(l.audio),l.video&&u.push(l.video),u=d(u);for(var c=u.next();!c.done;c=u.next()){var h=c.value;if(c=l.allowedByKeySystem,h.keyIds.size)if(h.drmInfos.length&&!a.size){h=d(h.drmInfos);for(var p=h.next();!p.done;p=h.next())if(p=p.value,p.keyIds.size&&p.keySystem==r){l.allowedByKeySystem=!0,p=d(p.keyIds);for(var f=p.next();!f.done;f=p.next())f=f.value,((f=n[i?"00":f])||e.D.F)&&(l.allowedByKeySystem=l.allowedByKeySystem&&!!f&&!Xa.includes(f))}}else for(l.allowedByKeySystem=!0,h=d(h.keyIds),p=h.next();!p.done;p=h.next())p=p.value,((p=n[i?"00":p])||e.D.F)&&(l.allowedByKeySystem=l.allowedByKeySystem&&!!p&&!Xa.includes(p));c!=l.allowedByKeySystem&&(s=!0)}}}s&&(Zf(e),!Xf(e))||(n=e.l.s)&&!n.allowedByKeySystem&&Kf(e)}})},onExpirationUpdated:function(e,t){var n=Xp("expirationupdated");l.dispatchEvent(n),(n=l.l)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){l.dispatchEvent(t),"drmsessionupdate"==t.type&&b&&(b=!1,t=Date.now()/1e3-l.Ha,(e.B||l.getStats()).m=t,e.P&&Gt(e.P))}},_=yf(e,c),vs(e.H,_),w=function(){return e.ud(T)},A={config:u,Gl:m,Rl:y,Ql:v,ud:w,Fl:g,networkingEngine:_,ek:s,dk:o},l=new hh(t,i,n,A),C.return(l))})}function nf(e,t){var n,i,r;return U(function(s){return 1==s.g?(n=e.g.manifest.retryParameters,S(s,Rh(t,e.H,n),2)):(i=s.h,"application/x-mpegurl"==i&&(r=Be(),"WEBKIT"===r.Ia()&&(i="application/vnd.apple.mpegurl")),s.return(i))})}function rf(e,t){if(!r_(Be()))return!0;if(t){if(""==(e.h||ll()).canPlayType(t))return!1;if(!r_(Be())||!Za.has(t))return!0;if(qi(t))return"WEBKIT"===Be().Ia()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if("application/dash+xml"===t||"video/vnd.mpeg.dash.mpd"===t)return e.g.streaming.preferNativeDash}return!1}function sf(e){var t=e.g.textDisplayFactory;if(e.si!==t){var n=e.s;e.s=t(),e.s.configure?e.s.configure(e.g.textDisplayer):Bt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.s.setTextLanguage||Bt("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),n?(e.s.setTextVisibility(n.isTextVisible()),n.destroy().catch(function(){})):e.s.setTextVisibility(e.na),e.I&&bu(e.I,e.s),e.si=t,e.l&&$c(e.l)}else e.s&&e.s.configure&&e.s.configure(e.g.textDisplayer)}function af(e){var t,n,i;return U(function(r){if(1==r.g)return Be(),$p(e,"media-source"),e.g.mediaSource.useSourceElements&&sl(e.h),sf(e),t=Ef(e.h,e.s,{Jk:function(){return e.keySystem()},onMetadata:function(t,n,i){t=d(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.data&&"number"==typeof r.cueTime&&r.frames){var s=r.cueTime+n,a=i;a&&s>a&&(a=s);for(var o=d(r.frames),l=o.next();!l.done;l=o.next())gf(e,s,a,"org.id3",l.value);e.C&&e.C.onHlsTimedMetadata(r,s)}},Ll:function(t){e.Ta&&_c(e.Ta,{schemeIdUri:t.schemeIdUri,startTime:t.startTime,endTime:t.endTime,id:String(t.id),emsg:t})},onEvent:function(t){return e.dispatchEvent(t)},Nl:function(){e.G&&e.G.update&&e.G.update()}},e.P,e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ha=i,S(r,t.J,2);e.I=t,E(r)})}function of(e,t,n){function i(){return Gf(e)}if(e.j.o(t,"playing",i),e.j.o(t,"pause",i),e.j.o(t,"ended",i),e.j.o(t,"ratechange",function(){var t=e.h.playbackRate;0!=t&&(e.J&&(e.J.set(t),e.m==yg&&e.u.playbackRateChanged(t),zf(e,t)),t=Xp("ratechange"),e.dispatchEvent(t))}),t.remote&&(e.j.o(t.remote,"connect",function(){e.l&&"connected"==t.remote.state&&ng(e),Zf(e)}),e.j.o(t.remote,"connecting",function(){return Zf(e)}),e.j.o(t.remote,"disconnect",function(){return U(function(n){if(1==n.g)return e.l&&"disconnected"==t.remote.state?S(n,Sd(e.l),3):n.A(2);2!=n.g&&ng(e),Zf(e),E(n)})})),t.audioTracks&&(e.j.o(t.audioTracks,"addtrack",function(){return Zf(e)}),e.j.o(t.audioTracks,"removetrack",function(){return Zf(e)}),e.j.o(t.audioTracks,"change",function(){return Zf(e)})),t.videoTracks&&(e.j.o(t.videoTracks,"addtrack",function(){return Zf(e)}),e.j.o(t.videoTracks,"removetrack",function(){return Zf(e)}),e.j.o(t.videoTracks,"change",function(){return Zf(e)})),t.textTracks){var r=function(){e.m===vg&&e.s instanceof qh&&ng(e),Zf(e)};e.j.o(t.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":pf(e,t);break;case"chapters":mf(e,t);break;default:r()}}),e.j.o(t.textTracks,"removetrack",r),e.j.o(t.textTracks,"change",r),"keep"!==e.g.streaming.crossBoundaryStrategy&&(e.j.o(t,"waiting",function(){e.l&&Ad(e.l)}),e.j.o(t,"timeupdate",function(){e.l&&Ad(e.l)}))}"none"!=t.preload&&e.j.qa(t,"loadedmetadata",function(){e.B.F=Date.now()/1e3-n})}function lf(t,n,i,r){var s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,A,C,I,x,k,M,D,R,O,N,L;return U(function(P){switch(P.g){case 1:$p(t,"load"),s=t.h,t.J=new cc({qf:function(){return s.playbackRate},$c:function(){return s.defaultPlaybackRate},Xh:function(e){s.playbackRate=e},hj:function(e){s.currentTime+=e}}),of(t,s,n),"onchange"in e.screen&&t.j.o(e.screen,"change",function(){if(t.L.getConfiguration){var e=t.L.getConfiguration();"AUTO"==e.Kc?Xf(t):"AUTO"==t.g.preferredVideoHdrLevel&&t.g.abr.enabled&&(e.Kc="AUTO",t.L.configure(e),Xf(t))}}),a=!1,o=d(t.i.variants);for(l=o.next();!l.done;l=o.next())u=l.value,(c=u.video&&u.video.dependencyStream)&&(a=qt(c));Wp(t,t.g,a),t.Kd=t.g.preferredTextLanguage,t.Ke=t.g.preferredTextRole,t.Je=t.g.preferForcedSubs,dg(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),t.u.init(function(e,n,i){t.i&&t.l&&e!=t.l.s&&Yf(t,e,!0,void 0!==n&&n,void 0===i?0:i)}),t.u.setMediaElement(s),t.u.setCmsdManager(t.ba),t.l=Cf(t),t.l.configure(t.g.streaming),t.m=yg,t.dispatchEvent(Xp("streaming")),h=i;case 2:for((f=t.l.s)||h||(h=Xf(t)?t.u.chooseVariant():null),g=[],p=f||h,m=d([p.video,p.audio]),y=m.next();!y.done;y=m.next())(v=y.value)&&!v.segmentIndex&&(g.push(v.createSegmentIndex()),v.dependencyStream&&g.push(v.dependencyStream.createSegmentIndex()));if(!(0<g.length)){P.A(4);break}return S(P,Promise.all(g),4);case 4:if(!p||0!=p.disabledUntilTime){P.A(2);break}if(t.G&&t.G.onInitialVariantChosen&&t.G.onInitialVariantChosen(p),t.i.isLowLatency&&(t.g.streaming.lowLatencyMode?t.configure(t.wg):J("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),t.K&&(up(t.K,t.i.isLowLatency&&t.g.streaming.lowLatencyMode),cp(t.K,1e3*n)),dg(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),Gc(t.l,t.g.playRangeStart,t.g.playRangeEnd),t.Y=!0,t.dispatchEvent(Xp("canupdatestarttime")),b=function(e){t.F=vf(t,e),t.cb=bf(t,e),_f(t,s,!1)},t.g.streaming.startAtSegmentBoundary||(T=t.N,null==T&&t.i.startTime&&(T=t.i.startTime),b(T)),f){P.A(7);break}if(!t.g.streaming.startAtSegmentBoundary){P.A(8);break}return _=t.i.presentationTimeline,t.N instanceof Date&&(A=_.m||_.i,C=t.N.getTime()/1e3-A,null!=C&&(w=C)),null==w&&(w="number"===typeof t.N?t.N:t.h.currentTime),null==t.N&&t.i.startTime&&(w=t.i.startTime),I=_.bc(),x=_.Jb(),w<I?w=I:w>x&&(w=x),S(P,Vf(h,w),9);case 9:k=P.h,b(k);case 8:Yf(t,h,!0,!1,0);case 7:return t.F.ready(),M=t.rc().find(function(e){return e.active}),M||((D=Pr(t.i.textStreams,t.Kd,t.Ke,t.Je)[0]||null)&&sh(t.B.h,D,!0),h&&(D?(jr(h.audio,D,t.g)&&(t.na=!0),t.na&&t.s.setTextVisibility(!0)):(t.na=!1,t.s.setTextVisibility(!1)),ig(t)),D&&(t.g.streaming.alwaysStreamText||t.fd())&&(Yc(t.l,D),sg(t))),S(P,t.l.start(r),10);case 10:t.g.abr.enabled&&(t.u.enable(),rg(t)),Zf(t),Xf(t),t.i.variants.some(function(e){return e.primary}),((R=t.T())&&(t.g.streaming.liveSync&&t.g.streaming.liveSync.enabled||t.i.serviceDescription||t.g.streaming.liveSync.panicMode)||t.g.streaming.vodDynamicPlaybackRate)&&(O=function(){return qf(t)},t.j.o(s,"timeupdate",O)),R||(N=function(){return Wf(t)},t.j.o(s,"timeupdate",N),Wf(t),t.i.nextUrl&&(0<t.g.streaming.preloadNextUrlWindow&&(L=function(){var e;return U(function(n){if(1==n.g)return e=t.xa().end-t.h.currentTime,!isNaN(e)&&e<=t.g.streaming.preloadNextUrlWindow?(t.j.Da(s,"timeupdate",L),S(n,t.preload(t.i.nextUrl),4)):n.A(0);t.La=n.h,E(n)})},t.j.o(s,"timeupdate",L)),t.j.o(s,"ended",function(){t.load(t.La||t.i.nextUrl)}))),t.C&&t.C.onManifestUpdated(R),E(P)}})}function uf(e,t){var n,i,r,s,a;return U(function(o){return 1==o.g?(n=dt,i=Date.now()/1e3,r=!0,e.D=e.ud({xc:e.H,onError:function(t){og(e,t)},Lf:function(){},onExpirationUpdated:function(){var t=Xp("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.B.m=Date.now()/1e3-i)}}),e.D.configure(e.g.drm),s={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?zi(t):"",codecs:t?Gi(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Ea,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},a.fullMimeTypes.add(Ui(a.mimeType,a.codecs)),t.startsWith("audio/")?(a.type=n.ma,s.audio=a):s.video=a,e.D.Y=!0,S(o,Zs(e.D,[s],[]),2)):S(o,e.D.$b(e.h),0)})}function cf(e,t,n){var i,r,s,a,o,l,u,c,h,p,f,g;return U(function(m){switch(m.g){case 1:if($p(e,"src-equals"),i=e.h,e.F=new Yu(i),r=!1,e.Ie.push(function(){r=!0}),e.dispatchEvent(Xp("canupdatestarttime")),null!=e.N&&e.F.sg(e.N),e.cb=Tf(e,e.N||0),e.J=new cc({qf:function(){return i.playbackRate},$c:function(){return i.defaultPlaybackRate},Xh:function(e){i.playbackRate=e},hj:function(e){i.currentTime+=e}}),_f(e,i,!0),i.textTracks&&(sf(e),s=function(t){if(!(e.s instanceof qh)){var n=Rf(e).find(function(e){return"disabled"!==e.mode});n&&(n.mode=t?"showing":"hidden"),e.s instanceof Xh&&(n=Of(e))&&(n.mode=!t&&e.s.isTextVisible()?"showing":"hidden")}},e.j.o(i,"enterpictureinpicture",function(){return s(!0)}),e.j.o(i,"leavepictureinpicture",function(){return s(!1)}),i.remote?(e.j.o(i.remote,"connect",function(){return s(!1)}),e.j.o(i.remote,"connecting",function(){return s(!1)}),e.j.o(i.remote,"disconnect",function(){return s(!1)})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.j.o(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return s(!1)}),a=i,a.webkitSupportsFullscreen&&e.j.o(a,"webkitpresentationmodechanged",function(){return s("inline"!==a.webkitPresentationMode)})),of(e,i,t),o=dp(e.K,e.U,n),!o.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(o+="#t=",0<e.g.playRangeStart&&(o+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(o+=","+e.g.playRangeEnd)),!e.I){m.A(2);break}return S(m,e.I.destroy(),3);case 3:e.I=null;case 2:return sl(i),i.src=o,l=Be(),"TV"==l.Ja()&&i.load(),"none"!=i.preload&&!i.autoplay&&qi(n)&&"WEBKIT"===l.Ia()&&i.load(),e.m=vg,e.dispatchEvent(Xp("streaming")),u=new as,ju(i,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.F.ready(),u.resolve()}),c=function(){return new Promise(function(t){var n=new sr(t);e.j.o(i.textTracks,"change",function(){return n.X(.5)}),n.X(.5)})},ju(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var t,n,i,s,a;return U(function(o){if(1==o.g)return S(o,c(),2);if(r)return o.return();if(df(e),t=Rf(e),t.some(function(e){return"showing"===e.mode})&&(e.na=!0,e.s.setTextVisibility(!0)),!(e.s instanceof qh))for(t.length&&(e.s.enableTextDisplayer?e.s.enableTextDisplayer():Bt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),n=!1,i=d(t),s=i.next();!s.done;s=i.next())a=s.value,"disabled"!==a.mode&&(n?(a.mode="disabled",J("Found more than one enabled text track, disabling it",a)):(Df(e,a),n=!0));hf(e),E(o)})}),i.error?u.reject(cg(e)):"none"==i.preload&&(J('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.j.qa(i,"error",function(){u.reject(cg(e))}),S(m,ur(e.g.streaming.loadTimeout,u),4);case 4:((h=e.T())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(p=function(){return qf(e)},e.j.o(i,"timeupdate",p)),h||(f=function(){return Wf(e)},e.j.o(i,"timeupdate",f),Wf(e)),e.C&&(e.C.onManifestUpdated(h),h&&(g=e.xa().end,e.j.o(i,"progress",function(){var t=e.xa().end;g!=t&&(e.C.onManifestUpdated(e.T()),g=t)}))),e.Y=!0,E(m)}})}function df(e){var t=e.g.preferredAudioLanguage;""!=t&&e.yj(t,e.g.preferredVariantRole)}function hf(e){var t=e.g.preferredTextLanguage;""!=t&&e.Sh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function pf(e,t){if("metadata"==t.kind){t.mode="hidden",e.j.o(t,"cuechange",function(){if(t.activeCues)for(var n=d(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,gf(e,i.startTime,i.endTime,i.type,i.value),e.C&&e.C.onCueMetadataChange(i.value);if(t.cues){n=[],i=d(t.cues);for(var r=i.next(),s={};!r.done;s={Ec:void 0},r=i.next())s.Ec=r.value,"com.apple.quicktime.HLS"==s.Ec.type&&null!=s.Ec.startTime&&(r=n.find(function(e){return function(t){return t.startTime==e.Ec.startTime&&t.endTime==e.Ec.endTime}}(s)),r||(r={startTime:s.Ec.startTime,endTime:s.Ec.endTime,values:[]},n.push(r)),r.values.push(s.Ec.value));for(n=d(n),i=n.next();!i.done;i=n.next())i=i.value,i.values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.C&&(i.values.push({key:"CUE",description:"",data:0!=i.startTime||e.T()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,i))}});var n=new sr(function(){var t=Nf(e);t=d(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"}).Ka().X(.5);e.Ie.push(function(){n.stop()})}}function ff(e,t,n){t=(new Map).set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Xp(n,t))}function gf(e,t,n,i,r){e.sa&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),_c(e.sa,t))}function mf(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new sr(function(){t.mode="hidden"}).Ka().X(.5);e.Ie.push(function(){n.stop()})}}function yf(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function i(e){t()?ph(t(),!0,e):e()}t||(t=function(){return null});var r=new ms(function(n,i,r,s,a){var o=t()?t().j:e.u;o&&o.segmentDownloaded(n,i,r,s,a)},function(t,r,s){r=(new Map).set("headers",t).set("request",r).set("requestType",s),n(Xp("downloadheadersreceived",r)),i(function(){if(e.ba){var n=e.ba;if(n.h.enabled){var i=t["cmsd-static"];if(i)try{var r=new Map,s=i.split(",");for(i=0;i<s.length;i++){var a=s[i].split("=");r.set(a[0],Up(a[1]))}}catch(d){}if(r=t["cmsd-dynamic"]){try{var o=new Map,l=r.split(";");for(r=1;r<l.length;r++){var u=l[r].split("=");o.set(u[0],Up(u[1]))}var c=o}catch(d){c=null}c&&(n.g=c)}}}})},function(e,t){e=(new Map).set("request",e).set("response",t),n(Xp("downloadcompleted",e))},function(e,t,i,r){e=(new Map).set("request",e).set("error",t).set("httpResponseCode",i).set("aborted",r),n(Xp("downloadfailed",e))},function(t,n,r){i(function(){var i=e.K,s=r;if(s=void 0===s?{}:s,i.g.enabled)if("HEAD"===n.method)fp(i,n);else switch(t){case 0:try{if(i.g.enabled){if(s.type){e:{switch(s.type){case 4:var a=i.l?Op:Rp;break e;case 3:case 2:a=i.l?Lp:Np;break e;case 5:a="s";break e}a=void 0}i.i=a}fp(i,n,{ot:Ep,su:!i.u})}}catch(I){ee("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",I)}break;case Cs:try{if(i.g.enabled){var o=n.uris[0],l=s.segment;a=0,l&&(a=l.endTime-l.startTime);var u={d:1e3*a,st:i.h.T()?"l":"v"};u.ot=mp(s);var c=u.ot===Cp||u.ot===Ap||u.ot===Ip||u.ot===Mp,d=s.stream;if(d){var h=i.h.Xa();if(c&&(u.bl=yp(i,d.type),u.ot!==Mp)){var p=vp(i,d.type);u.dl=h?p/Math.abs(h):p}if(d.bandwidth&&(u.br=d.bandwidth/1e3),d.segmentIndex&&l){var f=d.segmentIndex.ac(l.endTime,!0,0>h);if(f){var g=f.next().value;if(g&&g!=l){if(o&&!dn(l.S(),g.S())){var m=g.S()[0],y=new URL(m),v=new URL(o);if(y.origin!==v.origin)var b=m;else{for(var T=y.pathname.split("/").slice(1),_=v.pathname.split("/").slice(1,-1);T[0]===_[0];)T.shift(),_.shift();for(;_.length;)_.shift(),T.unshift("..");b=T.join("/")}u.nor=b}if((g.startByte||g.endByte)&&(l.startByte!=g.startByte||l.endByte!=g.endByte)){var w=g.startByte+"-";g.endByte&&(w+=g.endByte),u.nrr=w}}}var S=i.h.Xa()||1,E=vp(i,d.type)||500,A=d.bandwidth,C=A?A*(l.endTime-l.startTime)/1e3/(E/S/1e3)*i.g.rtpSafetyFactor:NaN;isNaN(C)||(u.rtp=C)}}c&&u.ot!==Mp&&(u.tb=bp(i,u.ot)/1e3),fp(i,n,u)}}catch(I){ee("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",I)}break;case 2:case 5:case 6:fp(i,n,{ot:"k"});break;case 4:fp(i,n,{ot:"o"})}})},function(n,i,r,s){(n=t()?t().l:e.G)&&n.banLocation&&n.banLocation(s)},function(n,i){if(i.data){i=i.data.byteLength;var r=t()?t().getStats():e.B;r&&(ch(r,i),0===n&&(r.bj=i))}});return r.configure(e.g.networking),r}function vf(e,t){return new Zu(e.h,e.i,e.g.streaming,t,function(){e.cb&&pc(e.cb,!0),e.l&&e.l.ld(),e.O&&Sf(e)},function(t){return e.dispatchEvent(t)})}function bf(e,t){var n=e.T()||"number"===typeof t&&0<t;t=new Ih(e.Fe,n),t.addEventListener("enter",function(t){lg(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){lg(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(lg(e,"timelineregionenter",n),lg(e,"timelineregionexit",n))});var i=new Ih(e.sa,n);i.addEventListener("enter",function(t){ff(e,t.region,"metadata")}),n=new Ih(e.Ta,n),n.addEventListener("enter",function(t){t=(new Map).set("detail",t.region.emsg),e.dispatchEvent(Xp("emsg",t))});var r=new hc(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.Ee&&r.g.add(e.Ee),r}function Tf(e,t){t=new Ih(e.sa,t instanceof Date||0<t),t.addEventListener("enter",function(t){ff(e,t.region,"metadata")});var n=new hc(e.h);return n.g.add(t),n}function _f(e,t,n){e.O=new Ba,e.O.g=Fa,wf(e),Hf(e),e.Ha=new sr(function(){Sf(e)}),e.g.streaming.rebufferingGoal&&e.Ha.ya(.25),e.j.o(t,"waiting",function(){return Sf(e)}),e.j.o(t,"canplaythrough",function(){return Sf(e)}),e.j.o(t,"playing",function(){return Sf(e)}),e.j.o(t,"seeked",function(){return Sf(e)}),n&&(e.j.o(t,"stalled",function(){return Sf(e)}),e.j.o(t,"progress",function(){return Sf(e)}),e.j.o(t,"timeupdate",function(){return Sf(e)}))}function wf(e){var t=e.g.streaming.rebufferingGoal;e.O.i.set(ja,Math.min(.5,t/2)).set(Fa,t)}function Sf(e){var t=e.isEnded()||e.F.Xi(),n=Zo(e.h.buffered,e.h.currentTime),i=e.O,r=i.i.get(i.g),s=i.g;t=t||n>=r&&0<n?ja:Fa,i.g=t,(s=s!=t)&&t===ja&&(i.h=Date.now()),s&&Hf(e)}function Ef(e,t,n,i,r){return new Vl(e,t,n,r,i)}function Af(e){return new op({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Qb:function(){return e.Qb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Xa:function(){return e.Xa()},Ib:function(){return e.Ib()},qb:function(){return e.qb()},T:function(){return e.T()},pf:function(){return e.pf()}},e.g.cmcd)}function Cf(e){return new Hc(e.i,{bd:function(){return e.F?e.F.Ue():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},Xa:function(){return e.Xa()},video:e.h,ha:e.I,xc:e.H,onError:function(t){return og(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Mf:function(t,n,i){var r=t.startTime;if(t=t.endTime,n=n.type,n!=ct){if(e.F){e.F.jj();var s=Ql(e.I,n);!e.T()&&e.h.paused&&!e.h.seeking&&null!=s&&0<s&&e.F.Ue()<s&&e.F.sg(s)}Sf(e)}i=(new Map).set("start",r).set("end",t).set("contentType",n).set("isMuxed",i),e.dispatchEvent(Xp("segmentappended",i))},Ml:function(t,n){(n=n.Ed)&&e.Ee&&mc(e.Ee,n,t)},Bi:function(t,n){var i=e.D;if(i.h.parseInbandPsshEnabled&&!i.F&&["audio","video"].includes(t)){t=new Xs(De(n)),n=0;for(var r=d(t.data),s=r.next();!s.done;s=r.next())n+=s.value.length;if(0==n)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=d(t.data),s=t.next();!s.done;s=t.next())s=s.value,n.set(s,r),r+=s.length;aa(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)}})}function If(e){if(e.Le=new Va(e.g,e.oa,e.D),e.G){var t=bn(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.G.configure(t)}if(e.D&&e.D.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=gg&&Ga(e.Le,e.i)&&Zf(e)}catch(n){og(e,n)}e.u&&Xf(e),t=e.l.s,!t||t.allowedByApplication&&t.allowedByKeySystem||Kf(e)}e.H&&e.H.configure(e.g.networking),e.I&&(e.I.configure(e.g.mediaSource),e.I.Ha=e.g.manifest.segmentRelativeVttTiming),e.s&&sf(e),e.u&&(e.u.configure(e.g.abr),e.g.abr.enabled?e.u.enable():e.u.disable(),rg(e)),e.O&&wf(e),e.Ha&&(e.g.streaming.rebufferingGoal?e.Ha.ya(.25):e.Ha.stop()),e.i&&dg(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.ba&&e.ba.configure(e.g.cmsd),e.ra&&e.ra.configure(e.g.queue)}function xf(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Wc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function kf(e,t){var n,i;return U(function(r){return 1==r.g?e.m!=yg&&e.m!=vg?r.return(null):(n=e.Re,e.i&&(n=e.i.imageStreams),i=n[0],i?(null!=t&&(i=n.find(function(e){return e.id==t})),i?i.segmentIndex?r.A(2):S(r,i.createSegmentIndex(),2):r.return(null)):r.return(null)):r.return(i)})}function Mf(e,t,n,i){var r=t.width||0,s=t.height||0,a=r/i.Wc,o=s/i.rows,l=i.Wc*i.rows,u=e.j-e.startTime;u=e.C||u/l;var c=e.startTime,d=0,h=0;return 1<l&&(h=Math.floor((n-e.startTime)/u),c=e.startTime+h*u,d=h%i.Wc*a,h=Math.floor(h/i.Wc)*o),i=!1,(n=e.thumbnailSprite)&&(i=!0,o=n.height,d=n.positionX,h=n.positionY,a=n.width),{segment:e,imageHeight:s,imageWidth:r,height:o,positionX:d,positionY:h,startTime:c,duration:u,uris:e.S(),startByte:e.Hc(),endByte:e.Fc(),width:a,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}function Df(e,t){e.j.o(t,"cuechange",function(){e.s.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=d(r);for(var s=r.next();!s.done;s=r.next()){if(s=s.value,1/0===s.endTime||s.endTime<s.startTime)s=null;else{var a=new ti(s.startTime,s.endTime,s.text);a.line="number"===typeof s.line?s.line:null,s.lineAlign&&(a.lineAlign=s.lineAlign),a.lineInterpretation=s.snapToLines?mi:1,a.position="number"===typeof s.position?s.position:null,s.positionAlign&&(a.positionAlign=s.positionAlign),a.size=s.size,a.textAlign=s.align,"lr"===s.vertical?a.writingMode="vertical-lr":"rl"===s.vertical&&(a.writingMode="vertical-rl"),s.region&&(a.region.id=s.region.id,a.region.height=s.region.lines,a.region.heightUnits=2,a.region.regionAnchorX=s.region.regionAnchorX,a.region.regionAnchorY=s.region.regionAnchorY,a.region.scroll=s.region.scroll,a.region.viewportAnchorX=s.region.viewportAnchorX,a.region.viewportAnchorY=s.region.viewportAnchorY,a.region.viewportAnchorUnits=an,a.region.width=s.region.width,a.region.widthUnits=an),ri(a),s=a}s&&((a=e.g.mediaSource.modifyCueCallback)&&a(s,null,n),i.push(s))}e.s.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}function Rf(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Of(e){return Array.from(e.h.textTracks).find(function(e){return"Shaka Player TextTrack"==e.label})}function Nf(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}function Lf(e,t){var n;return U(function(i){switch(i.g){case 1:return A(i,2),S(i,Rh(t,e.H,e.g.streaming.retryParameters),4);case 4:n=i.h,I(i,3);break;case 2:x(i);case 3:if(n)return i.return(n);throw new Le(1,2,2011,t)}})}function Pf(e,t,n,i,r,s,a){var o,l,u,c;return U(function(d){if(1==d.g)return"text/vtt"!=r||a.length?S(d,Uf(e,t,e.H,e.g.streaming.retryParameters),3):d.A(2);2!=d.g&&(o=d.h,l=Bf(e,o,r,a),u=new Blob([l],{type:"text/vtt"}),t=xu(u),r="text/vtt"),c=document.createElement("track");var h=e.K,p=t;try{if(h.g.enabled){var f=pp(h);f.ot=kp,f.su=!0;var g=_p(f),m=Sp(p,g)}else m=p}catch(y){ee("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",y),m=p}return c.src=m,c.label=s,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.vg.push(c),d.return(c)})}function Uf(e,t,n,i){var r,s,a;return U(function(o){if(1==o.g){r=Cs,s=bs([t],i),s.method="GET";var l=e.K;try{l.g.enabled&&fp(l,s,{ot:kp,su:!0})}catch(u){ee("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return S(o,n.request(r,s).promise,2)}return a=o.h,o.return(a.data)})}function Bf(e,t,n,i){var r=$i(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=De(t),t=n.parseMedia(t,e,null,[]),ap(t,i);throw new Le(2,2,2014,n)}function Ff(e){var t=Yd();return t.streaming.failureCallback=function(t){if(e.T()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.Oh(n))}},t.textDisplayFactory=function(){var t=Be();return e.Ne&&(document.fullscreenEnabled||"WEBKIT"!==t.Ia())?new $h(e.h,e.Ne):"track"in document.createElement("track")?new qh(e):new Yh},t}function jf(e,t){for(var n=new Set,i=d(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,"application/cea-608"!=r.mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(i=d(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var s=d(r.closedCaptions.keys()),a=s.next();!a.done;a=s.next())if(a=a.value,!n.has(a)){var o=a.startsWith("CC")?"application/cea-608":"application/cea-708",l=new oc,u=r.closedCaptions.get(a);o={id:e.Me++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:o,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:u,originalLanguage:u,label:null,type:ct,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ui(o,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(o),n.add(a)}}function Vf(e,t){var n,i,r,s,a;return U(function(o){return 1==o.g?(n=e.audio,i=e.video,r=function(e,t){var n,i,r;return U(function(s){return 1==s.g?e?e.segmentIndex?s.A(2):S(s,e.createSegmentIndex(),2):s.return(null):(i=(n=e.segmentIndex.ac(t))?n.next().value:null,i?(r=i.startTime,s.return(r)):s.return(null))})},S(o,r(n,t),2)):3!=o.g?(s=o.h,S(o,r(i,t),3)):(a=o.h,null!=a&&null!=s?o.return(Math.max(a,s)):null!=a?o.return(a):null!=s?o.return(s):o.return(t))})}function Hf(e){var t=e.xf();if(e.B&&e.O&&e.F){if(0==e.g.streaming.rebufferingGoal){var n=e.J;n.j=!1,dc(n)}else n=e.J,n.j=t,dc(n);if(e.K&&(n=e.K,t||n.u||(n.u=!0),n.u&&t&&(n.C=!0),n.F=t),Gf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ve<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.Ve*r,n-i))}}t=(new Map).set("buffering",t),e.dispatchEvent(Xp("buffering",t))}function zf(e,t){e.dc.Sa(),e.dc.o(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.xa(),r=e.T()?e.g.streaming.safeSeekOffset:0;0<t?Math.floor(n)>=Math.floor(i.end)&&e.td():Math.floor(n)<=Math.floor(i.start+r)&&e.td()})}function Gf(e){if(e.B&&e.O){var t=e.B.g,n="playing";e.O.g==Fa?n="buffering":e.isEnded()?n="ended":e.h.paused&&(n="paused");var i=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Xp("statechanged",n)))}}function qf(e){var t=e.h.playbackRate,n=e.T();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.Oi();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.Sc(i,!1):1==r&&t!==e.J.$c()&&e.td()}if(n&&(n=e.xa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var s=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var a=e.g.streaming.liveSync.targetLatency,o=a+i,l=Math.max(0,a-i),u=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(a=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?o=e.i.serviceDescription.targetLatency+i:null!=e.i.serviceDescription.maxLatency&&(o=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?l=Math.max(0,e.i.serviceDescription.targetLatency-i):null!=e.i.serviceDescription.minLatency&&(l=e.i.serviceDescription.minLatency),u=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||"number"!==typeof a||(e.R=a);var d=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.Lb&&null!==e.R&&"number"===typeof a&&e.Ve<d&&Date.now()-e.Lb>1e3*s&&(s=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(a-s)/2,s+i),e.Lb=Date.now()),r&&null!==e.R&&(o=e.R+i,l=e.R-i),a=n.end-e.h.currentTime,i=0,e.m==vg&&(r=e.h.buffered,0<r.length&&(i=r.end(r.length-1),i=Math.max(u,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=1e3*e.g.streaming.liveSync.panicThreshold,s=Date.now()-e.O.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&s<=r?t!=c&&e.Sc(c,!1):void 0!=o&&u&&a-i>o?(t!=u&&e.Sc(u,!1),e.Lb=null):void 0!=l&&c&&a-i<l?(t!=c&&e.Sc(c,!1),e.Lb=null):t!==e.J.$c()&&(e.td(),e.Lb=Date.now())}}function Wf(e){if(e.h){var t=function(t,n){var i=void 0===i?Number.EPSILON:i;if(t===n)i=!0;else{var r=Math.abs(t-n);i=r<=i||i!==Number.EPSILON&&Math.abs(r-i)<=Number.EPSILON}return!!((i||n>t)&&e.ug<t)&&(e.ug=t,!0)},n=e.xa();if(n=n.end-n.start,n=0<n?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=Xp("started");else t(25,n)?i=Xp("firstquartile"):t(50,n)?i=Xp("midpoint"):t(75,n)?i=Xp("thirdquartile"):((t(100,n)||100<n)&&(i=Xp("complete")),e.g&&1/0!=e.g.playRangeEnd&&e.isEnded()&&e.h.pause());i&&e.dispatchEvent(i)}}}function Xf(e){try{Wa(e.Le,e.i)}catch(n){return og(e,n),!1}var t=Lr(e.i.variants);return t=e.L.create(t),e.u.setVariants(Array.from(t.values())),!0}function Kf(e,t,n,i,r){var s;t=void 0===t||t,n=void 0===n?0:n,i=void 0!==i&&i,r=void 0===r||r,(s=Xf(e)?e.u.chooseVariant():null)&&Yf(e,s,r,t,n,i)}function Yf(e,t,n,i,r,s){s=void 0!==s&&s;var a=e.l.s;if(t==a)i&&Kc(e.l,t,i,r,!0);else{var o=e.B.h;if(o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Kc(e.l,t,i,r,s,n),i=null,a&&(i=xr(a)),a=xr(t),a.active=!0,e.P&&(r=e.P,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),s=0,o=-1,t.mimeType){case"video/webm":s=1;break;case"video/mp4":s=2}switch(e.jh()){case"DASH":o=1;break;case"HLS":o=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(s),r.j||r.g.setStreamingFormat(o))}n?(n=(new Map).set("oldTrack",i).set("newTrack",a),n=Xp("adaptation",n),hg(e,n)):Jf(e,i,a),eg(e,i,a)}}function $f(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var i=Qf(e);n=Or(n,i),t=Or(t,i),Jf(e,n,t),eg(e,n,t)}}function Qf(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(e){return e.selected}):null}function Zf(e){var t=Xp("trackschanged");hg(e,t),tg(e)}function Jf(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),t=Xp("variantchanged",t),hg(e,t)}function eg(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&tg(e)}function tg(e){var t=Xp("audiotrackschanged");hg(e,t)}function ng(e){var t=Xp("textchanged");hg(e,t)}function ig(e){var t=Xp("texttrackvisibility");hg(e,t)}function rg(e){e.g.abr.enabled||ag(e);var t=(new Map).set("newStatus",e.g.abr.enabled);hg(e,Xp("abrstatuschanged",t))}function sg(e){var t=e.rc().find(function(e){return e.active});t&&e.s&&e.s.setTextLanguage&&e.s.setTextLanguage(t.language)}function ag(e,t){if(t=void 0===t||t,e.m==yg){e.Oe.stop();for(var n=d(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&Xf(e)}}function og(e,t){var n,i,r,s,a;return U(function(o){switch(o.g){case 1:if(e.m==gg)return o.return();if(1===t.severity&&e.B.K++,n=!0,!(e.Y&&e.i&&e.l)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3024!=t.code&&3018!=t.code){o.A(2);break}return i=Be(),"WEBKIT"===i.Ia()&&3016==t.code?o.return():(A(o,3),S(o,Sd(e.l),5));case 5:r=o.h,n=!r,r&&(s=Xp("mediasourcerecovered"),e.dispatchEvent(s)),I(o,2);break;case 3:x(o),n=!0;case 2:if(!n)return o.return();2===t.severity&&ag(e,!1),a=Xp("error",(new Map).set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),E(o)}})}function lg(e,t,n,i){i=void 0===i?e:i,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Xp(t,e))}function ug(e,t,n,i){i=void 0!==i&&i,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Xp(i?"audiotrackchanged":"mediaqualitychanged",t))}function cg(e,t){if(t=void 0===t||t,!e.h.error)return t?new Le(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new Le(2,3,3016,n,t,e.h.error.message)):null}function dg(e,t,n){0<t&&(e.T()||e.Ij(t)),t=e.getDuration(),n<t&&(e.T()||e.vb(n))}function hg(e,t){U(function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.m!=gg&&e.dispatchEvent(t),E(n)})}function pg(e){var t=new Set;e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(vt(n.language)):t.add("und");return t}function fg(e){for(var t=new Map,n=new Map,i=0;i<e.length;i++){var r=e[i],s="und",a=[];r.language&&(s=vt(r.language)),a="variant"==r.type?r.audioRoles:r.roles,a&&a.length||(a=[""]),t.has(s)||t.set(s,new Set),a=d(a);for(var o=a.next();!o.done;o=a.next())o=o.value,t.get(s).add(o),r.label&&(n.has(s)||n.set(s,new Map),n.get(s).set(o,r.label))}var l=[];return t.forEach(function(e,t){e=d(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i)),l.push({language:t,role:i,label:r})}}),l}Hp.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null},b(Gp,ae),i=Gp.prototype,i.destroy=function(){var e,t=this;return U(function(n){switch(n.g){case 1:return t.m==gg?n.return():(qp(t),e=t.detach(),t.m=gg,S(n,e,2));case 2:return S(n,t.Og(),3);case 3:if(t.Se&&(t.Se.release(),t.Se=null),t.He&&(t.He.release(),t.He=null),t.j&&(t.j.release(),t.j=null),t.dc&&(t.dc.release(),t.dc=null),t.Jd&&(t.Jd.release(),t.Jd=null),t.Na=null,t.g=null,t.B=null,t.Ne=null,t.K=null,t.ba=null,!t.H){n.A(4);break}return S(n,t.H.destroy(),5);case 5:t.H=null;case 4:t.u&&(t.u.release(),t.u=null),t.ra&&(t.ra.destroy(),t.ra=null),ae.prototype.release.call(t),E(n)}})},i.$b=function(e,t){t=void 0===t||t;var n,i,r,s=this;return U(function(a){switch(a.g){case 1:if(s.m==gg)throw new Le(2,7,7e3);if(n=s.h&&s.h==e,!s.h||s.h==e){a.A(2);break}return S(a,s.detach(),2);case 2:return S(a,Qp(s,"attach"),4);case 4:if(a.h)return a.return();if(A(a,5,6),n||($p(s,"attach"),i=function(){var e=cg(s,!1);e&&og(s,e)},s.He.o(e,"error",i),s.h=e,s.K&&s.K.setMediaElement(e)),Be(),!t||!r_()||s.I){a.A(6);break}return S(a,af(s),6);case 6:k(a),s.Z.release(),M(a,0);break;case 5:return r=x(a),S(a,s.detach(),10);case 10:throw r}})},i.xi=function(e){this.ti=e},i.detach=function(e){e=void 0!==e&&e;var t=this;return U(function(n){if(1==n.g){if(t.m==gg)throw new Le(2,7,7e3);return S(n,t.lc(!1,e),2)}if(3!=n.g)return S(n,Qp(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.He.Sa(),t.h=null),$p(t,"detach"),t.C&&!e&&t.C.release()}finally{t.Z.release()}E(n)})},i.lc=function(t,n){t=void 0===t||t,n=void 0!==n&&n;var i,r,s,a,o,l,u,c,h,p,f,g,m,y=this;return U(function(v){switch(v.g){case 1:return y.m!=gg&&(y.m=mg),S(v,Qp(y,"unload"),2);case 2:return v.h?v.return():(C(v,3),y.Y=!1,$p(y,"unload"),qp(y),i=y.Ie.map(function(e){return e()}),y.Ie=[],S(v,Promise.all(i),5));case 5:if(y.dispatchEvent(Xp("unloading")),y.Fe&&(y.Fe.release(),y.Fe=null),y.sa&&(y.sa.release(),y.sa=null),y.Ta&&(y.Ta.release(),y.Ta=null),y.h&&(y.j.Sa(),y.dc.Sa()),y.Oe.stop(),y.cb&&(y.cb.release(),y.cb=null),y.Ha&&(y.Ha.stop(),y.Ha=null),!y.G){v.A(6);break}return S(v,y.G.stop(),7);case 7:y.G=null,y.yc=null;case 6:if(!y.u){v.A(8);break}return S(v,y.u.stop(),8);case 8:if(!y.l){v.A(10);break}return S(v,y.l.destroy(),11);case 11:y.l=null;case 10:if(y.J&&(y.J.release(),y.J=null),y.F&&(y.F.release(),y.F=null),"webkit"!==e.shakaMediaKeysPolyfill||!y.D){v.A(12);break}return S(v,y.D.destroy(),13);case 13:y.D=null;case 12:if(!y.I){v.A(14);break}return S(v,y.I.destroy(),15);case 15:y.I=null;case 14:if(y.C&&!n&&y.C.onAssetUnload(),y.$&&!n&&(y.$.destroy(),y.$=null),n||y.xg.stop(),y.K&&lp(y.K),y.ba&&(y.ba.g=null),!y.s){v.A(16);break}return S(v,y.s.destroy(),17);case 17:y.s=null;case 16:if(y.h){for(r=d(y.vg),s=r.next();!s.done;s=r.next())a=s.value,a.src.startsWith("blob:")&&URL.revokeObjectURL(a.src),a.remove();y.vg=[],sl(y.h)&&y.h.load()}if(!y.D){v.A(18);break}return S(v,y.D.destroy(),19);case 19:y.D=null;case 18:if(y.La&&y.U!=y.La.zd()&&(y.La.s||y.La.destroy(),y.La=null),y.U=null,y.wc=null,y.O=null,y.i){for(o=d(y.i.variants),l=o.next();!l.done;l=o.next())for(u=l.value,c=d([u.audio,u.video]),h=c.next();!h.done;h=c.next())(p=h.value)&&p.segmentIndex&&p.segmentIndex.release();for(f=d(y.i.textStreams),g=f.next();!g.done;g=f.next())m=g.value,m.segmentIndex&&m.segmentIndex.release()}y.g&&y.g.streaming.clearDecodingCache&&(Vr.clear(),ns.clear()),y.i=null,y.B=new ah,y.si=null,y.Lb=null,y.R=null,y.Ve=-1,y.Re=[],y.Ya=[],y.ug=-1,y.H&&y.H.Fi(),Hf(y);case 3:k(v),y.Z.release(),M(v,4);break;case 4:if(Be(),t&&r_()&&!y.I&&y.h)return S(v,af(y),0);v.A(0)}})},i.sm=function(e){this.N=e},i.load=function(e,t,n){t=void 0===t?null:t;var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v=this;return U(function(b){switch(b.g){case 1:if(v.m==gg)throw new Le(2,7,7e3);if(i=null,r="",e instanceof hh){if(e.s)throw new Le(2,7,7006);i=e,r=i.zd()||""}else r=e||"";return S(b,zp(v.Z,"load"),2);case 2:if(v.Z.release(),!v.h)throw new Le(2,7,7002);if(!v.U){b.A(3);break}return v.U=r,S(b,v.lc(!1),3);case 3:if(s=++v.Te,a=function(){return U(function(e){if(1==e.g)return v.Te==s?e.A(0):i?S(e,i.destroy(),3):e.A(3);throw new Le(2,7,7e3)})},o=function(e,t){return U(function(n){switch(n.g){case 1:return C(n,2),S(n,zp(v.Z,t),4);case 4:return S(n,a(),5);case 5:return S(n,e(),6);case 6:return S(n,a(),7);case 7:i&&v.g&&(i.g=v.g);case 2:k(n),v.Z.release(),M(n,0)}})},A(b,5,6),null==t&&i&&(t=i.getStartTime()),v.N=t,v.Y=!1,v.dispatchEvent(Xp("loading")),i){n=i.U,b.A(8);break}if(n){b.A(8);break}return S(b,o(function(){return U(function(e){if(1==e.g)return S(e,nf(v,r),2);n=e.h,E(e)})},"guessMimeType_"),8);case 8:if(l=!!i,i){gh(i,v),v.B=i.getStats(),b.A(11);break}return S(b,ef(v,r,t,n,!0,v.g),12);case 12:(i=b.h)?(i.C=!1,gh(i,v),v.B=i.getStats(),i.start(),i.u.catch(function(){})):v.B=new ah;case 11:return u=!i,c=Date.now()/1e3,v.B=i?i.getStats():new ah,v.U=r,v.wc=n||null,Hf(v),h=function(){var e=v.Qb(),t={start:0,end:0};if(e.total.length){t.start=1/0,e=d(e.total);for(var n=e.next();!n.done;n=e.next())n=n.value,n.start<t.start&&(t.start=n.start),n.end>t.end&&(t.end=n.end)}return t},v.sa=new Tc(h),v.sa.addEventListener("regionadd",function(e){ff(v,e.region,"metadataadded")}),u?S(b,o(function(){return U(function(e){return S(e,uf(v,n),0)})},"initializeSrcEqualsDrmInner_"),23):(v.Ta=new Tc(h),S(b,o(function(){return U(function(e){if(1==e.g)return S(e,Promise.race([i.na,i.u]),2);v.yc=i.G;var t=i;t.oa=!0,v.G=t.l,v.i=i.ih(),E(e)})},"waitForFinish"),15));case 15:if(v.I){b.A(16);break}return S(b,o(function(){return U(function(e){return S(e,af(v),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return v.i&&v.i.textStreams.length&&(v.s.enableTextDisplayer?v.s.enableTextDisplayer():Bt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),S(b,o(function(){return U(function(e){return S(e,i.u,0)})},"waitForFinish"),18);case 18:if(v.g=i.getConfiguration(),v.Le=i.F,v.G&&v.G.setMediaElement&&v.h&&v.G.setMediaElement(v.h),v.Fe=yh(i),v.Ee=i.Na,(p=i.B)&&(v.L=p),l&&v.h&&"AUDIO"===v.h.nodeName&&(Zp(v),v.configure("manifest.disableVideo",!0)),i.i){b.A(19);break}return S(b,o(function(){return U(function(e){return S(e,Sh(i,v.h),0)})},"drmEngine_.init"),19);case 19:return v.D=vh(i),S(b,o(function(){return U(function(e){return S(e,v.D.$b(v.h),0)})},"drmEngine_.attach"),21);case 21:return!(f=i.D)||v.Na&&v.Na==f||(v.u=mh(i),v.Na=i.D,"function"!=typeof v.u.setMediaElement&&(Bt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),v.u.setMediaElement=function(){}),"function"!=typeof v.u.setCmsdManager&&(Bt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),v.u.setCmsdManager=function(){}),"function"!=typeof v.u.trySuggestStreams&&(Bt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),v.u.trySuggestStreams=function(){})),g=bh(i),m=i.J,S(b,o(function(){return U(function(e){return S(e,lf(v,c,m,g),0)})},"loadInner_"),22);case 22:fh(i),v.wc&&Be().eg()&&qi(v.wc)&&zl(v.I,v.U,v.wc),b.A(14);break;case 23:return S(b,o(function(){return U(function(e){return S(e,cf(v,c,n),0)})},"srcEqualsInner_"),14);case 14:v.dispatchEvent(Xp("loaded"));case 6:if(k(b),!i){b.A(25);break}return S(b,i.destroy(),25);case 25:v.La=null,M(b,0);break;case 5:if(y=x(b),!y||7e3==y.code){b.A(27);break}return S(b,v.lc(!1),27);case 27:throw y}})},i.om=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,i=this;return U(function(r){return 1==r.g?S(r,Jp(i),2):3!=r.g?(n=r.h,S(r,i.lc(e,t),3)):r.return(n)})},i.Ki=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,i=this;return U(function(r){return 1==r.g?S(r,Jp(i,t),2):3!=r.g?(n=r.h,S(r,i.detach(e),3)):r.return(n)})},i.preload=function(e,t,n,i){t=void 0===t?null:t;var r,s,a=this;return U(function(o){return 1==o.g?(r=Ff(a),Qd(r,i||a.g,Ff(a)),S(o,ef(a,e,t,n,!1,r),2)):((s=o.h)?s.start():og(a,new Le(2,7,7005)),o.return(s))})},i.Og=function(){var e,t,n,i,r=this;return U(function(s){for(e=[],t=d(r.Pe),n=t.next();!n.done;n=t.next())i=n.value,i.s||e.push(i.destroy());return r.Pe=[],S(s,Promise.all(e),0)})},i.Vl=function(){for(var e=this.Z;e.g;)e.release()},i.ud=function(e){return new Ys(e)},i.configure=function(e,t){if(2==arguments.length&&"string"==typeof e&&(e=Md(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Bt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Bt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Bt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var n=Be();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&"WEBKIT"===n.Ia(),delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&"boolean"==typeof e.streaming.liveSync&&(Bt("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),n=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=n),e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Bt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Bt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Bt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Bt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Bt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Bt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Bt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Bt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Bt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Bt("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Bt("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Bt("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Bt("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Bt("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Bt("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Bt("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Bt("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Bt("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Bt("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){for(var s in n=!1,e.drm.advanced){var a=e.drm.advanced[s];i=a.videoRobustness,a=a.audioRobustness,"videoRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].videoRobustness)&&(e.drm.advanced[s].videoRobustness=[i],n=!0),"audioRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].audioRobustness)&&(e.drm.advanced[s].audioRobustness=[a],n=!0)}n&&Bt("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Bt("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Bt("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Bt("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),e.streaming&&"crossBoundaryStrategy"in e.streaming&&"keep"!=e.streaming.crossBoundaryStrategy&&(e.streaming.inaccurateManifestTolerance=0),s=Qd(this.g,e,Ff(this)),If(this),s},i.kk=function(e){this.wg=e},i.getConfiguration=function(){var e=Ff(this);return Qd(e,this.g,Ff(this)),e},i.Ak=function(){return this.wg},i.Ri=function(){var e=Ff(this);return Qd(e,this.g,Ff(this)),Rd(this.g,Ff(this))},i.Oi=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.xa().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},i.tj=function(){for(var e in this.g)delete this.g[e];Qd(this.g,Ff(this),Ff(this)),If(this)},i.Kk=function(){return this.m},i.jh=function(){return this.i?this.i.type:null},i.Rk=function(){return this.h},i.Ib=function(){return this.H},i.zd=function(){return this.U},i.mf=function(){return this.C?this.C:null},i.lh=function(){return this.ra?this.ra:null},i.T=function(){return this.i&&!this.Ca()?this.i.presentationTimeline.T():!(!this.h||!this.h.src&&!this.Ca())&&1/0==this.h.duration},i.ed=function(){return!!this.i&&this.i.presentationTimeline.ed()},i.Cd=function(){if(this.i&&!this.Ca()){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src&&!this.Ca())&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},i.xh=function(){if(this.i&&!this.Ca()){var e=this.i.variants;return!!e.length&&(e=e[0],!(e.audio||!e.video)&&!e.video.codecs.includes(","))}return!(!this.h||!this.h.src&&!this.Ca()||!this.h.audioTracks)&&0==this.h.audioTracks.length},i.xa=function(){if(this.i&&!this.Ca()){if(!this.Y&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.bc(),end:e.Jb()}}if(this.h&&(this.h.src||this.Ca())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},i.ol=function(){this.T()&&(this.h.currentTime=this.xa().end)},i.vl=function(){return this.Y},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.D?this.D.g:null},i.be=function(){return this.D?this.D.be():1/0},i.eh=function(){return this.D?this.D.eh():[]},i.nf=function(){return this.D?this.D.nf():{}},i.xf=function(){return this.O?this.O.g==Fa:!!this.U},i.Xa=function(){return this.h?this.J?this.J.i:1:0},i.oi=function(e){this.m==yg&&this.l&&Xc(this.l,e)},i.Sc=function(e,t){t=void 0===t||t,0==e?J("A trick play rate of 0 is unsupported!"):(this.J.set(e),this.m==yg&&(this.u.playbackRateChanged(e),this.oi(t&&1!=e)),zf(this,e))},i.td=function(){var e=this.J.$c();this.m==vg&&this.J.set(e),this.m==yg&&(this.J.set(e),this.u.playbackRateChanged(e),this.oi(!1)),this.dc.Sa()},i.qb=function(){if(this.i&&!this.Ca()){for(var e=this.l?this.l.s:null,t=[],n=0,i=d(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,Nr(r)){var s=xr(r);s.active=r==e,s.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(s.active=!0),s.active&&n++,t.push(s)}return t}if(this.h&&this.h.audioTracks){var a=Qf(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(e){return Or(e,a)}):a?[Or(null,a)]:[]}return[]},i.rc=function(){if(this.i){if(this.Ca())return[];for(var e=this.l?this.l.B:null,t=[],n=d(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=kr(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?Rf(this).map(function(e){return Rr(e)}):[]},i.hh=function(){var e=this.Re;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Mr(e)})},i.pk=function(e){var t,n,i=this;return U(function(r){return 1==r.g?S(r,kf(i,e),2):(t=r.h,t?(n=[],t.segmentIndex.Hb(function(e){var i=xf(e.tilesLayout||t.tilesLayout);if(i)for(var r=i.rows*i.Wc,s=e.j-e.startTime,a=0;a<r;a++){var o=Mf(e,t,e.startTime+s*a/r,i);n.push(o)}}),t.closeSegmentIndex&&t.closeSegmentIndex(),r.return(n)):r.return(null))})},i.Si=function(e,t){var n,i,r,s,a=this;return U(function(o){return 1==o.g?S(o,kf(a,e),2):(n=o.h,n?(i=n.segmentIndex.find(t),null==i?o.return(null):(r=n.segmentIndex.get(i),(s=xf(r.tilesLayout||n.tilesLayout))?o.return(Mf(r,n,t,s)):o.return(null))):o.return(null))})},i.$f=function(e){function t(){var t=n.i.textStreams.find(function(t){return t.id==e.id});t&&t!=n.l.B&&(sh(n.B.h,t,!1),Yc(n.l,t),ng(n),sg(n),n.Kd=t.language)}var n=this;this.i&&this.F&&(t(),!this.Ca())||function(){if(n.h&&n.h.textTracks){var t=Rf(n),i=t.find(function(t){return Dr(t)===e.id});if(i){if(n.s instanceof qh){t=d(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=r===i?n.na?"showing":"hidden":"disabled";r.mode!==s&&(r.mode=s)}}else t=t.find(function(e){return"disabled"!==e.mode}),t!==i&&(t&&(t.mode="disabled",n.j.Da(t,"cuechange"),n.s.remove(0,1/0)),i&&Df(n,i));ng(n),sg(n)}}}()},i.ye=function(e,t,n){function i(){var i=r.i.variants.find(function(t){return t.id==e.id});if(i&&Nr(i)){var s=r.l.s;r.g.abr.enabled&&(s.video!=i.video||s.audio&&i.audio&&s.audio.language==i.audio.language&&s.audio.channelsCount==i.audio.channelsCount&&s.audio.label==i.audio.label)&&J("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.Ca()?Yf(r,i,!1,!1,0):Yf(r,i,!1,t||!1,n||0),r.L.configure({language:i.language,role:i.audio&&i.audio.roles&&i.audio.roles[0]||"",channelCount:i.audio&&i.audio.channelsCount?i.audio.channelsCount:0,Kc:i.video&&i.video.hdr?i.video.hdr:"",spatialAudio:!(!i.audio||!i.audio.spatialAudio)&&i.audio.spatialAudio,videoLayout:i.video&&i.video.videoLayout?i.video.videoLayout:"",Uc:i.audio&&i.audio.label?i.audio.label:"",Rd:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:i.audio&&i.audio.codecs?i.audio.codecs:"",Td:s.audio&&s.audio.codecs?s.audio.codecs:"",We:s.audio&&s.audio.channelsCount?s.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Xf(r)}}var r=this;t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.F&&(i(),!this.Ca())||function(){if(e.originalAudioId&&r.h&&r.h.audioTracks){var t=Array.from(r.h.audioTracks);t=d(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,Dr(n)==e.id){$f(r,n);break}}}()},i.zj=function(e,t){function n(){var n=i.L.getConfiguration();n.audioCodec=e.codecs||"",n.Uc=e.label||"",n.channelCount=e.channelsCount||0,n.language=e.language,n.role=e.roles[0]||"",n.spatialAudio=e.spatialAudio,i.L.configure(n),Kf(i,!0,t,!1,!1)}var i=this;t=void 0===t?0:t,this.i&&this.F&&(n(),!this.Ca())||function(){if(i.h&&i.h.audioTracks){var t=Array.from(i.h.audioTracks),n=null;t=d(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.label==e.label&&r.language==e.language&&r.kind==e.roles[0]){n=r;break}n&&$f(i,n)}}()},i.getAudioTracks=function(){if(this.i&&!this.Ca()){var e=this.qb();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e;if(this.m!=yg||this.Ca()||(n=e.filter(function(e){return e.originalVideoId===t.originalVideoId&&e.audioCodec})),!n.length)return[];e=new Map,n=d(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||null==i.audioId||(r=String(i.audioId)),r&&e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage})}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){var t=e.language;return t={active:e.enabled,language:vt(t||"und"),label:e.label,mimeType:null,codecs:null,primary:"main"==e.kind,roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:t},e.kind&&t.roles.push(e.kind),e.configuration&&(e.configuration.codec&&(t.codecs=e.configuration.codec),e.configuration.sampleRate&&(t.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(t.channelsCount=e.configuration.numberOfChannels)),t}):[]},i.Aj=function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n;var i=this.qb();if(i.length){var r=i.find(function(e){return e.active});r&&(i=i.find(function(t){return t.audioId===r.audioId&&(t.videoBandwidth||t.bandwidth)==e.bandwidth&&t.width==e.width&&t.height==e.height&&t.frameRate==e.frameRate&&t.pixelAspectRatio==e.pixelAspectRatio&&t.hdr==e.hdr&&t.colorGamut==e.colorGamut&&t.videoLayout==e.videoLayout&&t.videoMimeType==e.mimeType&&t.videoCodec==e.codecs}))&&!i.active&&this.ye(i,t,n)}},i.getVideoTracks=function(){if(this.m==vg||this.Ca())return[];var e=this.qb();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e.filter(function(e){return e.originalAudioId===t.originalAudioId&&e.audioId===t.audioId&&e.audioGroupId===t.audioGroupId&&e.videoCodec});if(!n.length)return[];e=new Map,n=d(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalVideoId;r||null==i.videoId||(r=String(i.videoId)),r&&e.set(r,{active:i.active,bandwidth:i.videoBandwidth||i.bandwidth,width:i.width,height:i.height,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,mimeType:i.videoMimeType,codecs:i.videoCodec})}return Array.from(e.values())},i.rk=function(){return fg(this.qb())},i.$k=function(){return fg(this.rc())},i.qk=function(){return Array.from(pg(this.qb()))},i.Zk=function(){return Array.from(pg(this.rc()))},i.yj=function(e,t,n,i,r,s,a){function o(){function o(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0}var u=l.l.s;l.L=l.g.adaptationSetCriteriaFactory(),l.L.configure({language:e,role:t||"",channelCount:n||0,Kc:"",spatialAudio:s||!1,videoLayout:"",Uc:a||"",Rd:"",codecSwitchingStrategy:l.g.mediaSource.codecSwitchingStrategy,audioCodec:r||"",Td:u.audio&&u.audio.codecs?u.audio.codecs:"",We:u.audio&&u.audio.channelsCount?u.audio.channelsCount:0,preferredAudioCodecs:l.g.preferredAudioCodecs,preferredAudioChannelCount:l.g.preferredAudioChannelCount});var c=l.L.create(l.i.variants),h=null;c=d(c.values());for(var p=c.next();!p.done;p=c.next())p=p.value,Nr(p)&&(!h||o(h,u)>o(p,u))&&(h=p);h!=u&&(h?(u=xr(h),l.ye(u,!0,i||0)):Kf(l))}var l=this;n=void 0===n?0:n,i=void 0===i?0:i,r=void 0===r?"":r,s=void 0!==s&&s,a=void 0===a?"":a,this.i&&this.F&&(o(),!this.Ca())||function(){if(l.h&&l.h.audioTracks){var n=Pr(l.qb(),e,t||"",!1)[0];n&&l.ye(n)}}()},i.Sh=function(e,t,n){function i(){r.Kd=e,r.Ke=t||"",r.Je=n||!1;var i=Pr(r.i.textStreams,r.Kd,r.Ke,r.Je)[0]||null;i&&i!=r.l.B&&(sh(r.B.h,i,!1),r.g.streaming.alwaysStreamText||r.fd())&&(Yc(r.l,i),ng(r),sg(r))}var r=this;n=void 0!==n&&n,this.i&&this.F&&(i(),!this.Ca())||function(){var i=Pr(r.rc(),e,t||"",n||!1)[0];i&&r.$f(i)}()},i.dm=function(e,t,n){function i(){for(var i=null,s=d(r.i.variants),a=s.next();!a.done;a=s.next())if(a=a.value,a.audio.label==e){i=a;break}null!=i&&(r.L=r.g.adaptationSetCriteriaFactory(),r.L.configure({language:i.language,role:"",channelCount:0,Kc:"",spatialAudio:!1,videoLayout:"",Rd:"",Uc:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Td:"",We:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Kf(r,t,n))}var r=this;t=void 0===t||t,n=void 0===n?0:n,this.i&&this.F&&(i(),!this.Ca())||function(){if(r.h&&r.h.audioTracks){var t=Array.from(r.h.audioTracks),n=null;t=d(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.label==e&&(n=i);n&&$f(r,n)}}()},i.fd=function(){var e=this.na;return this.s?this.s.isTextVisible():e},i.xk=function(){return this.Ya.map(function(e){return kr(e)})},i.wk=function(e){if(Bt("getChapters","Please use an getChaptersAsync."),!this.Ya.length)return[];var t=vt(e);if(e=this.Ya.filter(function(e){return vt(e.language)==t}),!e.length)return[];var n=[],i=new Set;e=d(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&r.segmentIndex.Hb(function(e){var t=e.S()[0],r=e.startTime+"-"+e.endTime+"-"+t;e={id:r,title:t,startTime:e.startTime,endTime:e.endTime},i.has(r)||(n.push(e),i.add(r))});return n},i.fh=function(e){var t,n,i,r,s,a,o,l=this;return U(function(u){switch(u.g){case 1:if(!l.Ya.length)return u.return([]);if(t=vt(e),n=l.Ya.filter(function(e){return vt(e.language)==t}),!n.length)return u.return([]);i=[],r=new Set,s=d(n),a=s.next();case 2:if(a.done){u.A(4);break}if(o=a.value,o.segmentIndex){u.A(5);break}return S(u,o.createSegmentIndex(),5);case 5:o.segmentIndex.Hb(function(e){var t=e.S()[0],n=e.startTime+"-"+e.endTime+"-"+t;e={id:n,title:t,startTime:e.startTime,endTime:e.endTime},r.has(n)||(i.push(e),r.add(n))}),a=s.next(),u.A(2);break;case 4:return u.return(i)}})},i.Ae=function(e){e=!!e,this.na!=e&&(this.na=e,this.m==yg?(this.s.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=Pr(this.i.textStreams,this.Kd,this.Ke,this.Je),0<e.length&&(Yc(this.l,e[0]),ng(this),sg(this))):Wc(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.s.setTextVisibility(e),ig(this))},i.Sk=function(){if(this.F)var e=this.F.Ue();else{if(null==this.N)return new Date;if(this.N instanceof Date)return this.N;e=this.N}if(this.i&&!this.Ca()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},i.kh=function(){if(this.i&&!this.Ca()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},i.rf=function(){return this.T()&&this.i?this.i.presentationTimeline.rf():null},i.Qb=function(){if(this.m==yg)return this.I.Qb();var e={total:[],audio:[],video:[],text:[]};return this.m==vg&&(e.total=el(this.h.buffered)),e},i.pf=function(){if(!this.h||!this.h.currentTime)return null;var e=this.kh().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},i.getStats=function(){if(this.m!=yg&&this.m!=vg)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Gf(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.T()||uh(this.B,Math.round(100*t)),this.F&&(this.B.P=this.F.pi(),this.B.R=this.F.ri()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),oh(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.L=Number(t.corruptedVideoFrames)),this.B.s=this.D?la(this.D):NaN,lh(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.T()&&null!=this.kh()&&(e=this.pf()||0,this.B.D=e/1e3),t=this.qb().find(function(e){return e.active}),e=this.rc().find(function(e){return e.active}),t){if(t.bandwidth){var n=this.J?this.J.i:1,i=n*t.bandwidth;e&&e.bandwidth&&(i+=n*e.bandwidth),this.B.B=i}t.width&&t.height&&lh(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=yg||this.Ca()||(this.i&&(this.B.H=this.i.periodCount,this.B.G=this.i.gapCount,this.i.presentationTimeline&&(this.B.J=this.i.presentationTimeline.h)),e=this.u.getBandwidthEstimate(),this.B.u=e),this.m==vg&&ch(this.B,NaN),dh(this.B)},i.Ud=function(e,t,n,i,r,s,a){a=void 0!==a&&a;var o,l,u,c,d,h,p,f,g,m,y,v,b=this;return U(function(T){switch(T.g){case 1:if(b.m!=yg&&b.m!=vg)throw new Le(1,7,7004);if("subtitles"!=n&&"captions"!=n&&J("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){T.A(2);break}return S(T,Lf(b,e),3);case 3:i=T.h;case 2:if(o=[],b.C&&(o=b.C.getCuePoints()),b.m!=vg){T.A(4);break}return l=Be(),a&&"WEBKIT"===l.Ia()&&(n="forced"),S(T,Pf(b,e,t,n,i,s||"",o),5);case 5:if(u=T.h,u.track)return Zf(b),T.return(Rr(u.track));throw new Le(1,2,2012);case 4:if(c=dt,d=b.xa(),h=d.end-d.start,b.i&&(h=b.i.presentationTimeline.getDuration()),1/0==h)throw new Le(1,4,4033);if(!o.length){T.A(6);break}return S(T,Uf(b,e,b.H,b.g.streaming.retryParameters),7);case 7:p=T.h,f=Bf(b,p,i,o),g=new Blob([f],{type:"text/vtt"}),e=xu(g),i="text/vtt";case 6:if(m={id:b.Me++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:sc(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:s||null,type:c.gb,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ui(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},y=Ui(m.mimeType,m.codecs),v=Qi(y),!v)throw new Le(2,2,2014,i);return b.i.textStreams.push(m),Zf(b),T.return(kr(m))}})},i.Ye=function(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_=this;return U(function(w){switch(w.g){case 1:if(_.m!=yg&&_.m!=vg)throw new Le(1,7,7004);if(t){w.A(2);break}return S(w,Lf(_,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new Le(1,2,2017,e);if(n=dt,i=_.xa(),r=i.end-i.start,_.i&&(r=_.i.presentationTimeline.getDuration()),1/0==r)throw new Le(1,4,4045);return S(w,Uf(_,e,_.H,_.g.streaming.retryParameters),4);case 4:if(s=w.h,a=$i(t),!a)throw new Le(2,2,2014,t);for(o=a(),l={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},u=De(s),c=o.parseMedia(u,l,e,[]),h=[],p=d(c),f=p.next(),g={};!f.done;g={ng:void 0,vd:void 0},f=p.next())g.vd=f.value,g.ng=null,m=function(t){return function(){return null==t.ng&&(t.ng=rt([e],[t.vd.payload])),t.ng||[]}}(g),y=new qo(g.vd.startTime,g.vd.endTime,m,0,null,null,0,0,1/0),g.vd.payload.includes("#xywh")&&(v=g.vd.payload.split("#xywh=")[1].split(","),4===v.length&&y.dg({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)})),h.push(y);if(b=t,!h.length){w.A(5);break}return S(w,Rh(h[0].S()[0],_.H,_.g.manifest.retryParameters),6);case 6:b=w.h;case 5:return T={id:_.Me++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ic(h),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.qg,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ui(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},_.m==vg?_.Re.push(T):_.i.imageStreams.push(T),Zf(_),w.return(Mr(T))}})},i.Xe=function(e,t,n){var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b=this;return U(function(T){switch(T.g){case 1:if(b.m!=yg&&b.m!=vg)throw new Le(1,7,7004);if(n){T.A(2);break}return S(T,Lf(b,e),3);case 3:n=T.h;case 2:if(i=dt,r=b.xa(),s=r.end-r.start,b.i&&(s=b.i.presentationTimeline.getDuration()),1/0==s)throw new Le(1,4,4054);return S(T,Uf(b,e,b.H,b.g.streaming.retryParameters),4);case 4:if(a=T.h,o=$i(n),!o)throw new Le(2,2,2014,n);for(l=o(),u={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},c=De(a),h=l.parseMedia(c,u,e,[]),p=[],f=d(h),g=f.next(),m={};!g.done;m={jf:void 0},g=f.next())m.jf=g.value,y=new qo(m.jf.startTime,m.jf.endTime,function(e){return function(){return[e.jf.payload]}}(m),0,null,null,0,0,1/0),p.push(y);return v={id:b.Me++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ic(p),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:i.gb,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ui("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},b.Ya.push(v),Zf(b),T.return(kr(v))}})},i.jm=function(e,t){this.oa.width=e,this.oa.height=t},i.Oh=function(e){if(this.m==yg){var t=this.l;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.C)t=!1;else{for(var n=d(t.h.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.fe||i.Za||i.Db||(i.fe=!1,bd(t,i,e));t=!0}}else t=!1;return t},i.ih=function(){return J("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Ok=function(){return this.yc},i.Gk=function(){var e={video:null,audio:null,text:null};if(this.m!=yg)return e;var t=this.l.s,n=this.h.currentTime;t=d([t.video,t.audio,this.l.B]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},"video"==i.type?(r.width=i.width,r.height=i.height,e.video=r):"audio"==i.type?e.audio=r:i.type==ct&&(e.text=r)}return e},i.Zh=function(e){this.Ne=e},i.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===gg||!navigator.onLine||0==t||!this.i)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime)&&("audio"!=e.type||e.language===n.language)})){for(var n=!1,i=!1,r=d(this.i.variants),s=r.next();!s.done;s=r.next()){s=s.value;var a=s[e.type];a&&(a.id===e.id?(s.disabledUntilTime=Date.now()/1e3+t,n=!0):a.trickModeVideo&&a.trickModeVideo.id==e.id&&(i=!0))}return!(!n&&i)&&(this.Oe.ya(1),t=this.Qb().video.reduce(function(e,t){return e+t.end-t.start},0),Kf(this,!1,t,!0,!1),!0)}return!1},i.addFont=function(e,t){return ul(e,t)},i.Ca=function(){return!(!this.h||!this.h.remote)&&"disconnected"!=this.h.remote.state},i.isEnded=function(){return!(this.h&&!this.h.ended)||this.Y&&!this.T()&&this.h.currentTime>=this.xa().end},X("shaka.Player",Gp),Gp.prototype.isEnded=Gp.prototype.isEnded,Gp.prototype.isRemotePlayback=Gp.prototype.Ca,Gp.prototype.addFont=Gp.prototype.addFont,Gp.prototype.setVideoContainer=Gp.prototype.Zh,Gp.prototype.getFetchedPlaybackInfo=Gp.prototype.Gk,Gp.prototype.getManifestParserFactory=Gp.prototype.Ok,Gp.prototype.getManifest=Gp.prototype.ih,Gp.prototype.retryStreaming=Gp.prototype.Oh,Gp.prototype.setMaxHardwareResolution=Gp.prototype.jm,Gp.prototype.addChaptersTrack=Gp.prototype.Xe,Gp.prototype.addThumbnailsTrack=Gp.prototype.Ye,Gp.prototype.addTextTrackAsync=Gp.prototype.Ud,Gp.prototype.getStats=Gp.prototype.getStats,Gp.prototype.getBufferedInfo=Gp.prototype.Qb,Gp.prototype.getSegmentAvailabilityDuration=Gp.prototype.rf,Gp.prototype.getPresentationStartTimeAsDate=Gp.prototype.kh,Gp.prototype.getPlayheadTimeAsDate=Gp.prototype.Sk,Gp.prototype.setTextTrackVisibility=Gp.prototype.Ae,Gp.prototype.getChaptersAsync=Gp.prototype.fh,Gp.prototype.getChapters=Gp.prototype.wk,Gp.prototype.getChaptersTracks=Gp.prototype.xk,Gp.prototype.isTextTrackVisible=Gp.prototype.fd,Gp.prototype.selectVariantsByLabel=Gp.prototype.dm,Gp.prototype.selectTextLanguage=Gp.prototype.Sh,Gp.prototype.selectAudioLanguage=Gp.prototype.yj,Gp.prototype.getTextLanguages=Gp.prototype.Zk,Gp.prototype.getAudioLanguages=Gp.prototype.qk,Gp.prototype.getTextLanguagesAndRoles=Gp.prototype.$k,Gp.prototype.getAudioLanguagesAndRoles=Gp.prototype.rk,Gp.prototype.getVideoTracks=Gp.prototype.getVideoTracks,Gp.prototype.selectVideoTrack=Gp.prototype.Aj,Gp.prototype.getAudioTracks=Gp.prototype.getAudioTracks,Gp.prototype.selectAudioTrack=Gp.prototype.zj,Gp.prototype.selectVariantTrack=Gp.prototype.ye,Gp.prototype.selectTextTrack=Gp.prototype.$f,Gp.prototype.getThumbnails=Gp.prototype.Si,Gp.prototype.getAllThumbnails=Gp.prototype.pk,Gp.prototype.getImageTracks=Gp.prototype.hh,Gp.prototype.getTextTracks=Gp.prototype.rc,Gp.prototype.getVariantTracks=Gp.prototype.qb,Gp.prototype.cancelTrickPlay=Gp.prototype.td,Gp.prototype.trickPlay=Gp.prototype.Sc,Gp.prototype.useTrickPlayTrackIfAvailable=Gp.prototype.oi,Gp.prototype.getPlaybackRate=Gp.prototype.Xa,Gp.prototype.isBuffering=Gp.prototype.xf,Gp.prototype.getKeyStatuses=Gp.prototype.nf,Gp.prototype.getActiveSessionsMetadata=Gp.prototype.eh,Gp.prototype.getExpiration=Gp.prototype.be,Gp.prototype.drmInfo=Gp.prototype.drmInfo,Gp.prototype.keySystem=Gp.prototype.keySystem,Gp.prototype.isFullyLoaded=Gp.prototype.vl,Gp.prototype.goToLive=Gp.prototype.ol,Gp.prototype.seekRange=Gp.prototype.xa,Gp.prototype.isVideoOnly=Gp.prototype.xh,Gp.prototype.isAudioOnly=Gp.prototype.Cd,Gp.prototype.isInProgress=Gp.prototype.ed,Gp.prototype.isLive=Gp.prototype.T,Gp.prototype.getQueueManager=Gp.prototype.lh,Gp.prototype.getAdManager=Gp.prototype.mf,Gp.prototype.getAssetUri=Gp.prototype.zd,Gp.prototype.getNetworkingEngine=Gp.prototype.Ib,Gp.prototype.getMediaElement=Gp.prototype.Rk,Gp.prototype.getManifestType=Gp.prototype.jh,Gp.prototype.getLoadMode=Gp.prototype.Kk,Gp.prototype.resetConfiguration=Gp.prototype.tj,Gp.prototype.getBufferFullness=Gp.prototype.Oi,Gp.prototype.getNonDefaultConfiguration=Gp.prototype.Ri,Gp.prototype.getConfigurationForLowLatency=Gp.prototype.Ak,Gp.prototype.getConfiguration=Gp.prototype.getConfiguration,Gp.prototype.configurationForLowLatency=Gp.prototype.kk,Gp.prototype.configure=Gp.prototype.configure,Gp.prototype.releaseAllMutexes=Gp.prototype.Vl,Gp.prototype.destroyAllPreloads=Gp.prototype.Og,Gp.prototype.preload=Gp.prototype.preload,Gp.prototype.detachAndSavePreload=Gp.prototype.Ki,Gp.prototype.unloadAndSavePreload=Gp.prototype.om,Gp.prototype.load=Gp.prototype.load,Gp.prototype.updateStartTime=Gp.prototype.sm,Gp.prototype.unload=Gp.prototype.lc,Gp.prototype.detach=Gp.prototype.detach,Gp.prototype.attachCanvas=Gp.prototype.xi,Gp.prototype.attach=Gp.prototype.$b,Gp.probeSupport=function(e){var t,n,i,r,s,a,o;return e=void 0===e||e,U(function(l){switch(l.g){case 1:if(t={},!e){l.A(2);break}return S(l,Ta(),3);case 3:t=l.h;case 2:return n=$a(),i=Gl(),r=Be(),S(l,r.nc(),4);case 4:return s=l.h,a={manifest:n,media:i,drm:t,hardwareResolution:s},o=Tg,o.forEach(function(e,t){a[t]=e()}),l.return(a)}})},Gp.isBrowserSupported=Yp,Gp.setQueueManagerFactory=function(e){wg=e},Gp.setAdManagerFactory=function(e){_g=e},Gp.registerSupportPlugin=Kp,Gp.prototype.destroy=Gp.prototype.destroy;var gg=0,mg=1,yg=2,vg=3;Gp.LoadMode={DESTROYED:gg,NOT_LOADED:mg,MEDIA_SOURCE:yg,SRC_EQUALS:vg},Gp.version="v4.15.3";var bg=["4","15"];Vt=new function(e){this.g=e,this.i=Ft,this.h=jt}(new Ut(Number(bg[0]),Number(bg[1])));var Tg=new Map,_g=null,wg=null;function Sg(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function Eg(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function Ag(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Rt,this.l.o(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.l.o(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}function Cg(){}function Ig(e,t){var n=[];e=d(xn(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=Rn(i.value,"InLine"))&&(i=Rn(i,"Creatives"))){i=d(xn(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var s=Rn(r,"Linear");if(s&&xg(n,t,s),r=Rn(r,"NonLinearAds")){r=xn(r,"NonLinear"),r=d(r);for(var a=r.next();!a.done;a=r.next())e:{s=n;var o=t,l=a.value,u=Rn(l,"StaticResource");if(u)a=u.attributes.creativeType;else{if(u=Rn(l,"HTMLResource"),!u)break e;a="text/html"}if(u=Mn(u)){"text/html"===a&&(u="data:text/html;charset=UTF-8,"+encodeURIComponent(u));var c=Nn(l,"width",Vn)||Nn(l,"expandedWidth",Vn),h=Nn(l,"height",Vn)||Nn(l,"expandedHeight",Vn);if(c||h){var p=null;(l=l.attributes.minSuggestedDuration)&&(p=yn(l)),l=0,null!=o&&(l=o),s.push({id:null,groupId:null,startTime:l,endTime:null,uri:u,mimeType:a,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:null==o,post:1/0==o,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:h||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return n}function xg(e,t,n){var i=0;null!=t&&(i=t);var r=null;if(n.attributes.skipoffset&&(r=yn(n.attributes.skipoffset),isNaN(r)&&(r=null)),n=Rn(n,"MediaFiles")){var s=xn(n,"MediaFile");for(n=s,s=s.filter(function(e){return"streaming"==e.attributes.delivery}),s.length&&(n=s),n=n.sort(function(e,t){return(parseInt(t.attributes.height,10)||0)-(parseInt(e.attributes.height,10)||0)}),n=d(n),s=n.next();!s.done;s=n.next())if(s=s.value,!s.attributes.apiFramework){var a=Mn(s);if(a){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:a,mimeType:s.attributes.type||null,isSkippable:null!=r,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:null==t,post:1/0==t,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}function kg(e,t,n,i,r){var s=this;this.u=e,this.i=t,this.F=!1,this.B=this.s=null,this.G=NaN,this.l=r,this.j=null,this.h=new Rt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.D=new google.ima.AdDisplayContainer(this.u,this.i),this.D.initialize(),this.m=new google.ima.AdsLoader(this.D),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.15.3"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.o(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){Dg(s,e)}),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){Mg(s,e)}),this.h.o(this.i,"ended",function(){s.m.contentComplete()}),this.h.qa(this.i,"play",function(){s.F=!0})}function Mg(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new K("ad-error",t)),Ng(e,null),e.l(new K("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Dg(t,n){if(t.l(new K("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.G))),t.s.customPlayheadTracker){var i={currentTime:t.i.currentTime};t.g=n.getAdsManager(i,t.C),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.o(t.i,"timeupdate",function(){t.i.duration&&(i.currentTime=t.i.currentTime)}),t.h.o(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.C);t.l(new K("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var r=t.g.getCuePoints();if(r.length){n=[],r=d(r);for(var s=r.next();!s.done;s=r.next())n.push({start:s.value,end:null});t.l(new K("ad-cue-points-changed",(new Map).set("cuepoints",n)))}Rg(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight),t.h.o(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),"ResizeObserver"in e?(t.B=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.B.observe(t.i)):t.h.o(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.F||t.s.skipPlayDetection?t.g.start():t.h.qa(t.i,"play",function(){t.F=!0,t.g.start()})}catch(a){Ng(t,null)}}function Rg(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new K(n,t))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){Mg(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){Og(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,function(t){Og(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){Ng(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){Ng(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.o(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}function Og(e,t){var n=t.getAd();n?(e.j=new Ag(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.s.supportsMultipleMediaElements||e.l(new K("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new K("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):J("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Ng(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.s.supportsMultipleMediaElements&&e.l(new K("ad-content-resume-requested")),e.l(new K("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function Lg(e,t,n,i,r,s){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.s=i,this.m=r,this.u=s,this.C=t.overlay}function Pg(e,t,n){this.g=e,this.j=t,this.h=n,this.i=null==e.overlay}function Ug(e,t,n,i){var r=this;this.L=null,this.C=e,this.D=t,this.g=n,this.G=null,this.B=!0,this.h=this.g,this.i=i,this.R=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.j=new Gp,Zg(this),this.I=new Rt,this.l=new Rt,this.J=!1,this.Z=this.s=this.u=this.m=null,this.$=!1,this.O=-1,this.Y=function(){if(!r.J&&r.m&&!r.D.Ca()){r.m=r.g.currentTime;var e=Gg(r);e&&qg(r,e,1,1,Date.now())}},this.U=function(){if(!(r.J||r.m||r.D.Ca())){r.m=r.g.currentTime;var e=Gg(r,!0);e&&qg(r,e,1,1,Date.now())}},this.ba=function(){if(!r.J&&r.m&&!r.D.Ca()){var e=r.g.currentTime;r.u&&!r.u.pre&&!r.u.post&&e<(r.u.endTime||r.u.startTime)&&(r.u=null)}},this.P=new sr(this.Y),this.N=new sr(function(){var e,t,n,i,s,a,o,l,u,c,h;return U(function(p){switch(p.g){case 1:if(!r.H.size||null==r.m){p.A(0);break}if(e=r.D.m,e==gg||e==mg)return p.return();t=!1,n=Array.from(r.H),i=r.D.xa(),s=d(n),a=s.next();case 3:if(a.done){p.A(5);break}if(o=a.value,o==r.u){p.A(4);break}if(l=o.endTime||o.startTime,!(1<=i.start-l)){u=o.startTime-r.m,0<u&&10>=u&&(!r.F.has(o)&&em(o)&&r.F.set(o,r.j.preload(o.uri,null,o.mimeType||void 0)),nm(r,o)),p.A(4);break}if(!r.F.has(o)){p.A(7);break}return S(p,r.F.get(o),8);case 8:(c=p.h)&&c.destroy(),r.F.delete(o);case 7:im(r,o),h=JSON.stringify(o),r.R.has(h)&&r.R.delete(h),r.H.delete(o),Fg(r),o.overlay||(t=!0);case 4:a=s.next(),p.A(3);break;case 5:t&&Qg(r),E(p)}})}),this.configure(this.D.getConfiguration().ads)}function Bg(e){if(!e.$&&e.H.size){if(e.I.o(e.g,"playing",e.U),e.I.o(e.g,"timeupdate",e.U),e.I.o(e.g,"seeked",e.ba),e.I.o(e.g,"ended",e.Y),"requestVideoFrameCallback"in e.g&&!tm()){var t=e.g,n=function(){-1!=e.O&&(e.Y(),-1!=e.O&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.P.ya(.025);e.N&&e.N.ya(1),e.$=!0}}function Fg(e){e.$&&!e.H.size&&(e.I.Da(e.g,"playing",e.U),e.I.Da(e.g,"timeupdate",e.U),e.I.Da(e.g,"seeked",e.ba),e.I.Da(e.g,"ended",e.Y),-1!=e.O&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.N&&e.N.stop(),e.$=!1)}function jg(e){if(e.C&&e.L&&!e.J){var t=e.L.supportsMultipleMediaElements,n=e.g;n.webkitSupportsFullscreen&&n.webkitDisplayingFullscreen&&(t=!1),e.B==t&&(e.B=!t,e.B?(e.h=e.g,e.G&&(e.G.parentElement&&e.C.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.B=!0}function Vg(e,t){var n;U(function(i){if(1==i.g)return Zg(e),S(i,$g(e,t),2);n=i.h,n.length?zg(e,n):J("Unsupported HLS interstitial",t),E(i)})}function Hg(e,t){var n=Rn(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,s="true"==n.attributes.loop,a=Nn(n,"z",Vn);if(i&&0!=a){var o=null,l=Rn(n,"Background");if(l){var u=l.attributes.uri;o=u?"center / contain no-repeat url('"+u+"')":Mn(l)}l=1920,u=1080;var c=Rn(n,"Viewport");if(c){if(l=Nn(c,"x",Vn),null==l)return;if(u=Nn(c,"y",Vn),null==u)return}var d={viewport:{x:l,y:u},topLeft:{x:0,y:0},size:{x:l,y:u}},h=Rn(n,"Overlay");if(c&&h){var p=Rn(h,"TopLeft"),f=Rn(h,"Size");if(p&&f){if(h=Nn(p,"x",Vn),null==h)return;if(p=Nn(p,"y",Vn),null==p)return;var g=Nn(f,"x",Vn);if(null==g)return;if(f=Nn(f,"y",Vn),null==f)return;d.topLeft.x=h,d.topLeft.y=p,d.size.x=g,d.size.y=f}}if(h=null,n=Rn(n,"Squeeze"),c&&n&&(f=Rn(n,"TopLeft"),n=Rn(n,"Size"),f&&n)){if(c=Nn(f,"x",Vn),null==c)return;if(h=Nn(f,"y",Vn),null==h)return;if(f=Nn(n,"x",Vn),null==f)return;if(n=Nn(n,"y",Vn),null==n)return;h={viewport:{x:l,y:u},topLeft:{x:c,y:h},size:{x:f,y:n}}}zg(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:s,overlay:d,displayOnBackground:-1==a,currentVideo:h,background:o}])}}function zg(e,t){var n,i,r,s,a,o,l,u;U(function(c){switch(c.g){case 1:n=!1,i=d(t),r=i.next();case 2:if(r.done){c.A(4);break}if(s=r.value,!s.uri){J("Missing URL in interstitial",s),c.A(3);break}if(s.mimeType){c.A(5);break}return A(c,6),a=e.j.Ib(),S(c,Rh(s.uri,a,e.D.getConfiguration().streaming.retryParameters),8);case 8:s.mimeType=c.h,I(c,5);break;case 6:x(c);case 5:if(o=s.id||JSON.stringify(s),e.R.has(o)){c.A(3);break}s.loop&&!s.overlay&&J("Loop is only supported in overlay interstitials",s),s.overlay||(n=!0),e.R.add(o),e.H.add(s),l=!1,s.pre&&null==e.m?l=!0:0!=s.startTime||s.canJump?null!=e.m&&(u=s.startTime-e.m,0<u&&10>=u&&(l=!0)):l=!0,l&&(!e.F.has(s)&&em(s)&&e.F.set(s,e.j.preload(s.uri,null,s.mimeType||void 0)),nm(e,s));case 3:r=i.next(),c.A(2);break;case 4:n&&Qg(e),Bg(e),E(c)}})}function Gg(e,t,n){t=void 0!==t&&t,n=void 0===n?null:n;var i=0,r=null;if(e.H.size&&null!=e.m){var s=e.g.ended,a=Array.from(e.H).sort(function(e,t){return t.startTime-e.startTime}),o=a;for(o=t?a.filter(function(e){return e.pre}):s?a.filter(function(e){return e.post}):a.filter(function(e){return!e.pre&&!e.post}),a=d(o),o=a.next();!o.done;o=a.next()){o=o.value;var l=!1;if(t)l=o.pre;else if(s)l=o.post;else if(!o.pre&&!o.post){var u=e.m-Math.round(1e3*o.startTime)/1e3,c=1;e.L.allowStartInMiddleOfInterstitial&&o.endTime&&1/0!=o.endTime&&(c=o.endTime-o.startTime),0<u&&(u<=c||!o.canJump)&&(l=!(null==n&&e.u&&!e.u.pre&&!e.u.post&&e.u.startTime>=o.startTime))}l&&(!e.u||o.startTime>=e.u.startTime)&&(i==(n||0)?r=o:r&&!o.canJump&&.001<Math.round(1e3*o.startTime)/1e3-Math.round(1e3*r.startTime)/1e3&&(r=o,i=0),i++)}}return r}function qg(e,t,n,i,r,s){s=void 0===s?0:s,e.u=t,jg(e),e.B||!e.C||e.h.parentElement||e.C.appendChild(e.h),1==i&&1==n&&(n=Array.from(e.H).filter(function(e){return t.pre?e.pre==t.pre:t.post?e.post==t.post:.001>Math.abs(e.startTime-t.startTime)}).length),t.once&&(s++,e.H.delete(t),Fg(e),t.overlay||Qg(e)),t.mimeType&&(t.mimeType.startsWith("image/")||"text/html"===t.mimeType)?t.overlay?Wg(e,t,n,i,s):J("Unsupported interstitial",t):e.B&&t.overlay?J("Unsupported interstitial",t):Xg(e,t,n,i,r,s)}function Wg(e,t,n,i,r){function s(){e.s&&(e.s.stop(),e.s=null),e.C.removeChild(l),Yg(e,t),e.i(new K("ad-stopped")),e.l.Sa();var s=Gg(e,t.pre,i-r);s?qg(e,s,n,++i,Date.now(),r):e.J=!1}e.J=!0;var a=t.overlay,o="text/html"==t.mimeType?"iframe":"img",l=document.createElement(o);l.style.objectFit="contain",l.style.position="absolute",l.style.border="none",Kg(e,t),e.i(new K("ad-started",(new Map).set("ad",new Pg(t,n,i)))),"iframe"==o?l.src=t.uri:(l.src=t.uri,l.onerror=function(t){e.i(new K("ad-error",(new Map).set("originalEvent",t))),s()});var u=a.viewport,c=a.topLeft;a=a.size,0==u.x&&0==u.y?(l.width=t.overlay.size.x,l.height=t.overlay.size.y,l.style.bottom="10%",l.style.left="0",l.style.right="0",l.style.width="100%",t.overlay.size.y||"iframe"!=o||(l.style.height="auto")):(l.style.height=a.y/u.y*100+"%",l.style.left=c.x/u.x*100+"%",l.style.top=c.y/u.y*100+"%",l.style.width=a.x/u.x*100+"%"),e.C.appendChild(l);var d=Date.now();e.s&&e.s.stop(),e.s=new sr(function(){t.playoutLimit&&(Date.now()-d)/1e3>t.playoutLimit||t.endTime&&e.g.currentTime>t.endTime?(e.i(new K("ad-complete")),s()):e.g.currentTime<t.startTime&&(e.i(new K("ad-skipped")),s())}),t.playoutLimit&&!t.endTime?e.s.X(t.playoutLimit):t.endTime&&e.s.ya(.025),e.l.o(e.g,"seeked",function(){var n=e.g.currentTime;(n<t.startTime||t.endTime&&n>t.endTime)&&(e.s&&e.s.stop(),e.i(new K("ad-skipped")),s())})}function Xg(e,t,n,i,r,s){var a,o,l,u,c,d,h,p,f,g,m,y,v,b,T,_,w,C,k,M;U(function(D){switch(D.g){case 1:if(a=Date.now(),e.J=!0,!e.B||1!=i){D.A(2);break}return e.i(new K("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),o=new as,l=function(t){return U(function(n){if(1==n.g)return"detach"!=t.state?n.A(0):tm()?S(n,new Promise(function(e){return new sr(e).X(.1)}),3):n.A(3);o.resolve(),e.l.Da(e.D,"onstatechange",l),E(n)})},e.l.o(e.D,"onstatechange",l),S(D,o,2);case 2:return Kg(e,t),e.B||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,u=t.overlay.viewport,c=t.overlay.topLeft,d=t.overlay.size,e.h.style.height=d.y/u.y*100+"%",e.h.style.left=c.x/u.x*100+"%",e.h.style.top=c.y/u.y*100+"%",e.h.style.width=d.x/u.x*100+"%"):(e.g.pause(),null!=t.resumeOffset&&0!=t.resumeOffset&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),h=!1,p=function(){if(!e.B&&!t.overlay&&null==t.resumeOffset)if(t.timelineRange&&t.endTime&&1/0!=t.endTime)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var n=Date.now();e.g.currentTime+=(n-r)/1e3,r=n}},f=function(a){var o,l;return U(function(u){if(1==u.g){if(p(),o=Gg(e,t.pre,i-s),a&&t.groupId)for(;o&&o.groupId==t.groupId;)i++,o=Gg(e,t.pre,i-s);return e.s&&(!t.groupId||o&&o.groupId!=t.groupId)&&(e.s.stop(),e.s=null),Yg(e,t),o&&!o.overlay?u.A(2):(t.post&&(e.m=null,e.u=null),e.B?S(u,e.j.detach(),4):S(u,e.j.lc(),4))}2!=u.g&&(e.B&&(l=t.resumeOffset,null==l&&(l=t.timelineRange&&t.endTime&&1/0!=t.endTime?t.endTime-(e.m||0):(Date.now()-r)/1e3),e.i(new K("ad-content-resume-requested",(new Map).set("offset",l)))),e.i(new K("ad-stopped")),e.l.Sa(),e.J=!1,e.B?Qg(e):(e.h.style.display="none",p(),e.g.ended||e.g.play())),jg(e),o&&(e.i(new K("ad-stopped")),e.l.Sa(),qg(e,o,n,++i,r,s)),E(u)})},g=function(t){return U(function(n){return h?n.return():(h=!0,e.i(new K("ad-error",(new Map).set("originalEvent",t))),S(n,f(!1),0))})},m=function(){return U(function(t){if(1==t.g)return h?t.return():(h=!0,S(t,f(!1),2));e.i(new K("ad-complete")),E(t)})},e.Z=function(){return U(function(t){return h?t.return():(h=!0,e.i(new K("ad-skipped")),S(t,f(!0),0))})},y=new Lg(e.h,t,e.Z,n,i,!e.B),e.B||(y.setMuted(e.g.muted),y.setVolume(e.g.volume)),e.i(new K("ad-started",(new Map).set("ad",y))),(v=y.canSkipNow())&&e.i(new K("ad-skip-state-changed")),e.l.qa(e.j,"error",g),e.l.o(e.h,"timeupdate",function(){if(e.h.duration){var t=y.canSkipNow();v!=t&&0<y.getRemainingTime()&&0<y.getDuration()&&e.i(new K("ad-skip-state-changed")),v=t}}),e.l.qa(e.j,"firstquartile",function(){p(),e.i(new K("ad-first-quartile"))}),e.l.qa(e.j,"midpoint",function(){p(),e.i(new K("ad-midpoint"))}),e.l.qa(e.j,"thirdquartile",function(){p(),e.i(new K("ad-third-quartile"))}),e.l.qa(e.j,"complete",m),e.l.o(e.h,"play",function(){e.i(new K("ad-resumed"))}),e.l.o(e.h,"pause",function(){var t=e.j.getConfiguration();e.h.currentTime>=t.playRangeEnd?m():e.i(new K("ad-paused"))}),e.l.o(e.h,"volumechange",function(){e.h.muted?e.i(new K("ad-muted")):e.i(new K("ad-volume-changed"))}),A(D,4),Zg(e),t.startTime&&t.endTime&&1/0!=t.endTime&&t.startTime!=t.endTime&&(b=t.endTime-t.startTime,0<b&&e.j.configure("playRangeEnd",b)),t.playoutLimit&&!e.s&&(e.s=new sr(function(){e.Z()}).X(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),S(D,e.j.$b(e.h),6);case 6:return T=null,e.L.allowStartInMiddleOfInterstitial&&null!=e.m&&(_=e.m-t.startTime,.25<Math.abs(_)&&(T=_)),e.F.has(t)?S(D,e.F.get(t),10):S(D,e.j.load(t.uri,T,t.mimeType||void 0),8);case 10:return w=D.h,e.F.delete(t),S(D,w?e.j.load(w):e.j.load(t.uri,T,t.mimeType||void 0),8);case 8:e.h.play(),C=(Date.now()-a)/1e3,e.i(new K("ads-loaded",(new Map).set("loadTime",C))),e.B&&e.g.play(),t.overlay&&(k=function(){var n=e.g.currentTime-t.startTime;.1<Math.abs(n-e.h.currentTime)&&(e.h.currentTime=n)},e.l.qa(e.h,"playing",k),e.l.o(e.g,"seeking",k),e.l.o(e.g,"seeked",function(){var n=e.g.currentTime;(n<t.startTime||t.endTime&&n>t.endTime)&&e.Z()})),I(D,0);break;case 4:if(M=x(D),!e.J)return D.return();g(M),E(D)}})}function Kg(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),null!=t.currentVideo){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],s=n.topLeft.x/n.viewport.x*100;0<s&&100>=s&&(r.push("translateX("+s+"%)"),i=!1),s=n.topLeft.y/n.viewport.y*100,0<s&&100>=s&&(r.push("translateY("+s+"%)"),i=!1),s=n.size.x/n.viewport.x,1>s&&r.push("scaleX("+s+")"),n=n.size.y/n.viewport.y,1>s&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.C&&(e.C.style.pointerEvents="none",t.background&&(e.C.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Yg(e,t){t&&!t.displayOnBackground||(e.g.style.zIndex=""),t&&null==t.currentVideo||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.C&&(e.C.style.pointerEvents="",!t||t.background)&&(e.C.style.background=""),e.G&&(e.G.style.background="")}function $g(e,t){var n,i,r,s,a,o,l,u,c,d,h,p,f,g,m,y,v,b,T,_,w,E,C,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q,W,X,K;return U(function(U){switch(U.g){case 1:if(n=[],!t)return U.return(n);if(i=t.values.find(function(e){return"X-ASSET-URI"==e.key}),r=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!i&&!r)return U.return(n);if(s=null,(a=t.values.find(function(e){return"ID"==e.key}))&&(s=a.data),o=null==s?Math.floor(10*t.startTime)/10:t.startTime,(l=t.endTime)&&1/0!=t.endTime&&"number"==typeof t.endTime&&(l=null==s?Math.floor(10*t.endTime)/10:t.endTime),u=t.values.find(function(e){return"X-RESTRICT"==e.key}),d=c=!0,u&&u.data&&(h=u.data,c=!h.includes("SKIP"),d=!h.includes("JUMP")),p=c?0:null,(f=t.values.find(function(e){return"X-ENABLE-SKIP-AFTER"==e.key}))&&(g=f.data,p=parseFloat(g),isNaN(p)&&(p=c?0:null)),m=null,(y=t.values.find(function(e){return"X-ENABLE-SKIP-FOR"==e.key}))&&(v=y.data,m=parseFloat(v),isNaN(p)&&(m=null)),b=null,(T=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(_=T.data,b=parseFloat(_),isNaN(b)&&(b=null)),w=null,(E=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(C=E.data,w=parseFloat(C),isNaN(w)&&(w=null)),D=M=k=!1,(R=t.values.find(function(e){return"CUE"==e.key}))&&(O=R.data,k=O.includes("ONCE"),M=O.includes("PRE"),D=O.includes("POST")),N=!1,(L=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(P=L.data,N=P.includes("RANGE")):!T&&e.D.T()&&(N=!M&&!D),i){if(B=i.data,!B)return U.return(n);n.push({id:s,groupId:null,startTime:o,endTime:l,uri:B,mimeType:null,isSkippable:c,skipOffset:p,skipFor:m,canJump:d,resumeOffset:b,playoutLimit:w,once:k,pre:M,post:D,timelineRange:N,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),U.A(2);break}if(!r){U.A(2);break}return F=r.data,F?(A(U,4),j={type:11},S(U,Jg(e,F,j),6)):U.return(n);case 6:for(V=U.h,H=ze(V),z=JSON.parse(H),(G=z["SKIP-CONTROL"])&&(q=G["ENABLE-SKIP-AFTER"],"number"==typeof q&&(p=parseFloat(q),isNaN(q)&&(p=c?0:null)),W=G["ENABLE-SKIP-FOR"],"number"==typeof W&&(m=parseFloat(W),isNaN(W)&&(m=null))),X=0;X<z.ASSETS.length;X++)K=z.ASSETS[X],K.URI&&n.push({id:s+"_shaka_asset_"+X,groupId:s,startTime:o,endTime:l,uri:K.URI,mimeType:null,isSkippable:c,skipOffset:p,skipFor:m,canJump:d,resumeOffset:b,playoutLimit:w,once:k,pre:M,post:D,timelineRange:N,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});I(U,2);break;case 4:x(U);case 2:return U.return(n)}})}function Qg(e){for(var t=[],n=d(e.H),i=n.next(),r={};!i.done;r={Bc:void 0},i=n.next())i=i.value,i.overlay||(r.Bc={start:i.startTime,end:null},i.pre?(r.Bc.start=0,r.Bc.end=null):i.post?(r.Bc.start=-1,r.Bc.end=null):i.timelineRange&&(r.Bc.end=i.endTime),t.find(function(e){return function(t){return e.Bc.start==t.start&&e.Bc.end==t.end}}(r))||t.push(r.Bc));e.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function Zg(e){e.j.configure(e.D.Ri()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),vs(e.D.Ib(),e.j.Ib())}function Jg(e,t,n){var i,r,s;return U(function(a){return 1==a.g?(i=bs([t],ss()),r=e.D.Ib().request(7,i,n),S(a,r.promise,2)):(s=a.h,a.return(s.data))})}function em(e){return!(e=e.mimeType)||!e.startsWith("image/")&&"text/html"!==e}function tm(){var e=Be().Ja();return"TV"==e||"CONSOLE"==e||"CAST"==e}function nm(e,t){if(!(e.K.has(t)||e.L&&!e.L.allowPreloadOnDomElements)){var n=function(e){var t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t),t},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.K.set(t,i)}}function im(e,t){if(e.K.has(t)){var n=e.K.get(t);n=d(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.K.delete(t)}}function rm(e,t,n,i,r){this.h=e,this.j=yn(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.s=i,this.m=!1}function sm(e,t,n,i){this.C=e,this.J=t,this.h=n,this.l=null,this.O=NaN,this.i=i,this.I=!1,this.B=null,this.j=[],this.L=[],this.K=this.D=this.g=null,this.F=new Map,this.m=[],this.u=[],this.G="",this.N=!0,this.H="",this.s=new Rt}function am(e,t,n){var i,r,s,a,o,l,u,c,d,h,p,f;U(function(g){if(1==g.g)return i={type:7},r=bs([t],ss()),r.method="POST",n&&(s=JSON.stringify(n),r.body=We(s)),a=e.J.request(7,r,i),A(g,2),S(g,a.promise,4);if(2!=g.g){if(o=g.h,l=ze(o.data),u=JSON.parse(l),!u.manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return c=new he(t),d=new he(u.trackingUrl),e.G=c.resolve(d).toString(),h=Date.now()/1e3,p=h-e.O,e.i(new K("ads-loaded",(new Map).set("loadTime",p))),f=new he(u.manifestUrl),e.l.resolve(c.resolve(f).toString()),e.l=null,I(g,0)}if(x(g),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,g.return();e.l.resolve(e.H),e.l=null,E(g)})}function om(e,t,n){var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b;U(function(T){if(1==T.g)return i={type:8},r=bs([t],ss()),s=e.J.request(7,r,i),A(T,2),S(T,s.promise,4);if(2!=T.g){if(a=T.h,o=[],l=ze(a.data),u=JSON.parse(l),0<u.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(u.avails)){for(e.j=u.avails,c=d(e.j),h=c.next();!h.done;h=c.next())for(p=h.value,f=d(p.nonLinearAdsList),g=f.next();!g.done;g=f.next())for(m=g.value,y=d(m.nonLinearAdList),v=y.next();!v.done;v=y.next())b=v.value,lm(e,b);o=e.getCuePoints(),e.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",o)))}}else e.j.length&&e.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",o))),pm(e),e.j=[];return n&&(e.I||0<o.length)&&cm(e),I(T,0)}x(T),E(T)})}function lm(e,t){var n,i,r,s,a,o,l,u;U(function(c){return 1==c.g?t.staticResource?(n=um(t),e.F.get(n)?c.return():(i={type:9},r=bs([t.staticResource],ss()),s=e.J.request(7,r,i),A(c,2),e.F.set(n,[]),S(c,s.promise,4))):c.return():2!=c.g?(a=c.h,o=ze(a.data),l=JSON.parse(o),u=l.apps,e.F.set(n,u),I(c,0)):(x(c),e.F.delete(n),void E(c))})}function um(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function cm(e){hm(e),e.I||(dm(e),e.s.o(e.h,"seeked",function(){dm(e)}),e.s.o(e.h,"ended",function(){pm(e)})),e.s.o(e.h,"timeupdate",function(){hm(e)})}function dm(e){var t=e.h.currentTime;if(0!=t&&null==e.B){for(var n,i,r=d(e.j),s=r.next();!s.done;s=r.next()){s=s.value;for(var a=d(s.ads),o=a.next();!o.done;o=a.next())if(o=o.value,i){if(o.startTimeInSeconds<t&&o.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=o,n=s;break}}else o.startTimeInSeconds<t&&(i=o,n=s)}n&&i&&!e.L.includes(i.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function hm(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.D,r=i.startTimeInSeconds+.5*i.durationInSeconds,s=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),gm(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),gm(e,"midpoint")):t>=s&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),gm(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&0<i&&0<r&&gm(e,"skipStateChanged"),0<r&&(0>=i||i>r)&&pm(e)}if(!e.g||!e.g.isLinear()){e:for(i=d(e.j),r=i.next();!r.done;r=i.next()){if(r=r.value,e.g&&e.g.isLinear())break;for(s=0;s<r.ads.length;s++){var a=r.ads[s],o=a.startTimeInSeconds+a.durationInSeconds;if(a.startTimeInSeconds<=t&&o>t){if(e.L.includes(a.adId)){if(e.h.ended)continue;e.h.currentTime=o;break e}pm(e),e.K=r,e.g=new rm(a,s+1,r.ads.length,!0,e.h),e.D=a,0===s&&gm(e,"breakStart"),fm(e);break}}}if(!e.g)for(i=d(e.j),r=i.next();!r.done;r=i.next()){if(r=r.value,e.g)break;for(s=0;s<r.nonLinearAdsList.length;s++)if(a=r.nonLinearAdsList[s],a.nonLinearAdList.length){o=r.startTimeInSeconds;var l=e.F.get(um(a.nonLinearAdList[0]));if(o<=t&&l&&l.length){pm(e),o=e,l=d(l);for(var u=l.next();!u.done;u=l.next())if(u=u.value,u.data.source.length){var c=document.createElement("img");c.src=u.data.source[0].url,c.style.top=(u.placeholder.top||0)+"%",c.style.height=100-(u.placeholder.top||0)+"%",c.style.left=(u.placeholder.left||0)+"%",c.style.maxWidth=100-(u.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",o.C.appendChild(c)}e.K=r,e.g=new rm(a,s+1,r.ads.length,!1,e.h),e.D=a,0===s&&gm(e,"breakStart"),fm(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function pm(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.I||e.L.push(e.D.adId);var t=e.g.m;gm(e,void 0!==t&&t?"skip":"complete"),t=d(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.s.Da(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&gm(e,"breakEnd"),e.g=null,e.D=null,e.K=null}}function fm(e){var t=!1;e.h.paused?t=!0:(gm(e,"impression"),gm(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&gm(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||gm(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(gm(e,"impression"),gm(e,"start"),t=!1):gm(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){gm(e,"pause")}});for(var n=d(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.s.o(i.target,i.type,i.listener)}function gm(e,t){var n=e.D.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.K.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n){var i={type:10};n=d(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&""!=r&&(r=bs([r],ss()),r.method="POST",e.J.request(7,r,i))}switch(t){case"impression":e.i(new K("ad-impression"));break;case"start":e.i(new K("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new K("ad-muted"));break;case"unmute":e.i(new K("ad-volume-changed"));break;case"resume":e.i(new K("ad-resumed"));break;case"pause":e.i(new K("ad-paused"));break;case"firstQuartile":e.i(new K("ad-first-quartile"));break;case"midpoint":e.i(new K("ad-midpoint"));break;case"thirdQuartile":e.i(new K("ad-third-quartile"));break;case"complete":e.i(new K("ad-complete")),e.i(new K("ad-stopped"));break;case"skip":e.i(new K("ad-skipped")),e.i(new K("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new K("ad-skip-state-changed"))}}function mm(e,t){this.g=e,this.i=null,this.h=t}function ym(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.B=this.m=this.s=null,this.C="",this.D=[],this.h=new Rt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new K("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){vm(r,e)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),r.m=new mm(e,r.l),r.B&&(r.m.i=r.B),r.i(new K("ad-started",(new Map).set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var e=r.l.currentTime;r.s&&r.s>e&&(r.l.currentTime=r.s,r.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){r.B=e.getStreamData().adProgressData,r.m&&(r.m.i=r.B)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new K("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new K("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new K("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new K("ad-complete")),r.i(new K("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new K("ad-skipped")),r.i(new K("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[],t=d(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new K("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function vm(e,t){e.i(new K("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.o(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.s=t,e.l.currentTime=n.start)}})}function bm(){ae.call(this),this.h=this.i=this.j=this.g=null,this.m=new Sg,this.s=navigator.language,this.l=null}function Tm(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function _m(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof K){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=d(Object.getOwnPropertyNames(t)),e=n.next();!e.done;e=n.next())i.add(e.value);for(n={},i=d(i),e=i.next();!e.done;e=i.next())e=e.value,n[e]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},t=d(el(t)),n=t.next();!n.done;n=t.next())n=n.value,e=n.end,i.start.push(n.start),i.end.push(e);t=i}else t=ArrayBuffer.isView(t)&&1===t.BYTES_PER_ELEMENT?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function wm(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=Sm(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}function Sm(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}i=Ag.prototype,i.needsSkipUI=function(){return!1},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!0},i.getDuration=function(){return this.g.getDuration()},i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.h.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.h.getAdSkippableState()},i.skip=function(){return this.h.skip()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.resume()},i.getVolume=function(){return this.h.getVolume()},i.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},i.isMuted=function(){return 0==this.h.getVolume()},i.isLinear=function(){return this.g.isLinear()},i.resize=function(e,t){this.h.resize(e,t)},i.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return this.g.getMediaUrl()},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.g=null},X("shaka.ads.ClientSideAd",Ag),Ag.prototype.release=Ag.prototype.release,Ag.prototype.getPodIndex=Ag.prototype.getPodIndex,Ag.prototype.getTimeOffset=Ag.prototype.getTimeOffset,Ag.prototype.getMediaUrl=Ag.prototype.getMediaUrl,Ag.prototype.getAdvertiserName=Ag.prototype.getAdvertiserName,Ag.prototype.getCreativeAdId=Ag.prototype.getCreativeAdId,Ag.prototype.getAdId=Ag.prototype.getAdId,Ag.prototype.getVastAdId=Ag.prototype.getVastAdId,Ag.prototype.getVastMediaWidth=Ag.prototype.getVastMediaWidth,Ag.prototype.getVastMediaHeight=Ag.prototype.getVastMediaHeight,Ag.prototype.getVastMediaBitrate=Ag.prototype.getVastMediaBitrate,Ag.prototype.getDescription=Ag.prototype.getDescription,Ag.prototype.getTitle=Ag.prototype.getTitle,Ag.prototype.getPositionInSequence=Ag.prototype.getPositionInSequence,Ag.prototype.getSequenceLength=Ag.prototype.getSequenceLength,Ag.prototype.setMuted=Ag.prototype.setMuted,Ag.prototype.resize=Ag.prototype.resize,Ag.prototype.isLinear=Ag.prototype.isLinear,Ag.prototype.isMuted=Ag.prototype.isMuted,Ag.prototype.setVolume=Ag.prototype.setVolume,Ag.prototype.getVolume=Ag.prototype.getVolume,Ag.prototype.play=Ag.prototype.play,Ag.prototype.pause=Ag.prototype.pause,Ag.prototype.skip=Ag.prototype.skip,Ag.prototype.canSkipNow=Ag.prototype.canSkipNow,Ag.prototype.getTimeUntilSkippable=Ag.prototype.getTimeUntilSkippable,Ag.prototype.isSkippable=Ag.prototype.isSkippable,Ag.prototype.isPaused=Ag.prototype.isPaused,Ag.prototype.getRemainingTime=Ag.prototype.getRemainingTime,Ag.prototype.getMinSuggestedDuration=Ag.prototype.getMinSuggestedDuration,Ag.prototype.getDuration=Ag.prototype.getDuration,Ag.prototype.isUsingAnotherMediaElement=Ag.prototype.isUsingAnotherMediaElement,Ag.prototype.hasCustomClick=Ag.prototype.hasCustomClick,Ag.prototype.isClientRendering=Ag.prototype.isClientRendering,Ag.prototype.needsSkipUI=Ag.prototype.needsSkipUI,X("shaka.ads.Utils",Cg),Cg.ADS_LOADED="ads-loaded",Cg.AD_STARTED="ad-started",Cg.AD_FIRST_QUARTILE="ad-first-quartile",Cg.AD_MIDPOINT="ad-midpoint",Cg.AD_THIRD_QUARTILE="ad-third-quartile",Cg.AD_COMPLETE="ad-complete",Cg.AD_STOPPED="ad-stopped",Cg.AD_SKIPPED="ad-skipped",Cg.AD_VOLUME_CHANGED="ad-volume-changed",Cg.AD_MUTED="ad-muted",Cg.AD_PAUSED="ad-paused",Cg.AD_RESUMED="ad-resumed",Cg.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Cg.CUEPOINTS_CHANGED="ad-cue-points-changed",Cg.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Cg.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Cg.AD_CLICKED="ad-clicked",Cg.AD_PROGRESS="ad-progress",Cg.AD_BUFFERING="ad-buffering",Cg.AD_IMPRESSION="ad-impression",Cg.AD_DURATION_CHANGED="ad-duration-changed",Cg.AD_CLOSED="ad-closed",Cg.AD_LOADED="ad-loaded",Cg.ALL_ADS_COMPLETED="all-ads-completed",Cg.AD_LINEAR_CHANGED="ad-linear-changed",Cg.AD_METADATA="ad-metadata",Cg.AD_RECOVERABLE_ERROR="ad-recoverable-error",Cg.AD_ERROR="ad-error",Cg.AD_BREAK_READY="ad-break-ready",Cg.AD_INTERACTION="ad-interaction",Cg.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Cg.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Cg.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",kg.prototype.configure=function(e){this.s=e},kg.prototype.stop=function(){this.g&&this.g.stop(),this.u&&ol(this.u)},kg.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.D.destroy()},i=Lg.prototype,i.needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return this.u},i.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.h&&null!=this.l?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},i.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},i.canSkipNow=function(){return this.h&&0==this.getTimeUntilSkippable()},i.skip=function(){this.canSkipNow()&&this.B()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return null==this.C},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.s},i.getPositionInSequence=function(){return this.m},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.i.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.i.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.g=null},X("shaka.ads.InterstitialAd",Lg),Lg.prototype.release=Lg.prototype.release,Lg.prototype.getPodIndex=Lg.prototype.getPodIndex,Lg.prototype.getTimeOffset=Lg.prototype.getTimeOffset,Lg.prototype.getMediaUrl=Lg.prototype.getMediaUrl,Lg.prototype.getAdvertiserName=Lg.prototype.getAdvertiserName,Lg.prototype.getCreativeAdId=Lg.prototype.getCreativeAdId,Lg.prototype.getAdId=Lg.prototype.getAdId,Lg.prototype.getVastAdId=Lg.prototype.getVastAdId,Lg.prototype.getVastMediaWidth=Lg.prototype.getVastMediaWidth,Lg.prototype.getVastMediaHeight=Lg.prototype.getVastMediaHeight,Lg.prototype.getVastMediaBitrate=Lg.prototype.getVastMediaBitrate,Lg.prototype.getDescription=Lg.prototype.getDescription,Lg.prototype.getTitle=Lg.prototype.getTitle,Lg.prototype.getPositionInSequence=Lg.prototype.getPositionInSequence,Lg.prototype.getSequenceLength=Lg.prototype.getSequenceLength,Lg.prototype.setMuted=Lg.prototype.setMuted,Lg.prototype.resize=Lg.prototype.resize,Lg.prototype.isLinear=Lg.prototype.isLinear,Lg.prototype.isMuted=Lg.prototype.isMuted,Lg.prototype.setVolume=Lg.prototype.setVolume,Lg.prototype.getVolume=Lg.prototype.getVolume,Lg.prototype.play=Lg.prototype.play,Lg.prototype.pause=Lg.prototype.pause,Lg.prototype.skip=Lg.prototype.skip,Lg.prototype.canSkipNow=Lg.prototype.canSkipNow,Lg.prototype.getTimeUntilSkippable=Lg.prototype.getTimeUntilSkippable,Lg.prototype.isSkippable=Lg.prototype.isSkippable,Lg.prototype.isPaused=Lg.prototype.isPaused,Lg.prototype.getRemainingTime=Lg.prototype.getRemainingTime,Lg.prototype.getMinSuggestedDuration=Lg.prototype.getMinSuggestedDuration,Lg.prototype.getDuration=Lg.prototype.getDuration,Lg.prototype.isUsingAnotherMediaElement=Lg.prototype.isUsingAnotherMediaElement,Lg.prototype.hasCustomClick=Lg.prototype.hasCustomClick,Lg.prototype.isClientRendering=Lg.prototype.isClientRendering,Lg.prototype.needsSkipUI=Lg.prototype.needsSkipUI,i=Pg.prototype,i.needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return-1},i.isPaused=function(){return!1},i.isSkippable=function(){return!1},i.getTimeUntilSkippable=function(){return 0},i.canSkipNow=function(){return!1},i.skip=function(){},i.pause=function(){},i.play=function(){},i.getVolume=function(){return 1},i.setVolume=function(){},i.isMuted=function(){return!1},i.isLinear=function(){return this.i},i.resize=function(){},i.setMuted=function(){},i.getSequenceLength=function(){return this.j},i.getPositionInSequence=function(){return this.h},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.g.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){},X("shaka.ads.InterstitialStaticAd",Pg),Pg.prototype.release=Pg.prototype.release,Pg.prototype.getPodIndex=Pg.prototype.getPodIndex,Pg.prototype.getTimeOffset=Pg.prototype.getTimeOffset,Pg.prototype.getMediaUrl=Pg.prototype.getMediaUrl,Pg.prototype.getAdvertiserName=Pg.prototype.getAdvertiserName,Pg.prototype.getCreativeAdId=Pg.prototype.getCreativeAdId,Pg.prototype.getAdId=Pg.prototype.getAdId,Pg.prototype.getVastAdId=Pg.prototype.getVastAdId,Pg.prototype.getVastMediaWidth=Pg.prototype.getVastMediaWidth,Pg.prototype.getVastMediaHeight=Pg.prototype.getVastMediaHeight,Pg.prototype.getVastMediaBitrate=Pg.prototype.getVastMediaBitrate,Pg.prototype.getDescription=Pg.prototype.getDescription,Pg.prototype.getTitle=Pg.prototype.getTitle,Pg.prototype.getPositionInSequence=Pg.prototype.getPositionInSequence,Pg.prototype.getSequenceLength=Pg.prototype.getSequenceLength,Pg.prototype.setMuted=Pg.prototype.setMuted,Pg.prototype.resize=Pg.prototype.resize,Pg.prototype.isLinear=Pg.prototype.isLinear,Pg.prototype.isMuted=Pg.prototype.isMuted,Pg.prototype.setVolume=Pg.prototype.setVolume,Pg.prototype.getVolume=Pg.prototype.getVolume,Pg.prototype.play=Pg.prototype.play,Pg.prototype.pause=Pg.prototype.pause,Pg.prototype.skip=Pg.prototype.skip,Pg.prototype.canSkipNow=Pg.prototype.canSkipNow,Pg.prototype.getTimeUntilSkippable=Pg.prototype.getTimeUntilSkippable,Pg.prototype.isSkippable=Pg.prototype.isSkippable,Pg.prototype.isPaused=Pg.prototype.isPaused,Pg.prototype.getRemainingTime=Pg.prototype.getRemainingTime,Pg.prototype.getMinSuggestedDuration=Pg.prototype.getMinSuggestedDuration,Pg.prototype.getDuration=Pg.prototype.getDuration,Pg.prototype.isUsingAnotherMediaElement=Pg.prototype.isUsingAnotherMediaElement,Pg.prototype.hasCustomClick=Pg.prototype.hasCustomClick,Pg.prototype.isClientRendering=Pg.prototype.isClientRendering,Pg.prototype.needsSkipUI=Pg.prototype.needsSkipUI,i=Ug.prototype,i.configure=function(e){this.L=e,jg(this)},i.stop=function(){if(this.l&&this.l.Sa(),this.R.clear(),this.H.clear(),this.j.Og(),this.F.size){var e=Array.from(this.F.values());e=d(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(e){e&&e.destroy()})}if(this.F.clear(),this.K.size)for(e=Array.from(this.K.keys()),e=d(e),t=e.next();!t.done;t=e.next())im(this,t.value);this.K.clear(),this.j.detach(),this.J=!1,this.u=this.m=null,this.B=!0,this.h=this.g,this.G=null,Yg(this),Fg(this),this.C&&ol(this.C),this.s&&(this.s.stop(),this.s=null)},i.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.P&&(this.P.stop(),this.P=null),this.N&&(this.N.stop(),this.N=null),this.j.destroy()},i.Sb=function(){return this.j},i.addAdUrlInterstitial=function(e){var t,n,i,r,s,a,o,l,u,c=this;return U(function(p){switch(p.g){case 1:return t={type:12},S(p,Jg(c,e,t),2);case 2:if(n=p.h,i=wn(n,"VAST,vmap:VMAP"),!i)throw new Le(2,10,10007);if(r=[],"VAST"==i.tagName){r=Ig(i,c.m),p.A(3);break}if("vmap:VMAP"!=i.tagName){p.A(3);break}for(var f=[],g=d(xn(i,"vmap:AdBreak")),m=g.next();!m.done;m=g.next()){var y=m.value,v=y.attributes.timeOffset;v&&(m=null,m="start"==v?0:"end"==v?1/0:yn(v),(y=Rn(y,"vmap:AdSource"))&&(y=Rn(y,"vmap:AdTagURI"))&&(y=kn(y))&&f.push({time:m,uri:y}))}s=d(f),a=s.next();case 5:if(a.done){p.A(3);break}return o=a.value,S(p,Jg(c,o.uri,t),8);case 8:if(l=p.h,u=wn(l,"VAST"),!u)throw new Le(2,10,10007);r.push.apply(r,h(Ig(u,o.time))),a=s.next(),p.A(5);break;case 3:zg(c,r),E(p)}})},i=rm.prototype,i.needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.h.durationInSeconds},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return"number"==typeof this.j},i.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return this.s},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.l?this.l:1},i.getPositionInSequence=function(){return this.i?this.i:1},i.getTitle=function(){return this.h.adTitle},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return this.h.vastAdId||""},i.getAdId=function(){return this.h.adId},i.getCreativeAdId=function(){return this.h.creativeId},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.l=this.i=this.g=this.h=null},X("shaka.ads.MediaTailorAd",rm),rm.prototype.release=rm.prototype.release,rm.prototype.getPodIndex=rm.prototype.getPodIndex,rm.prototype.getTimeOffset=rm.prototype.getTimeOffset,rm.prototype.getMediaUrl=rm.prototype.getMediaUrl,rm.prototype.getAdvertiserName=rm.prototype.getAdvertiserName,rm.prototype.getCreativeAdId=rm.prototype.getCreativeAdId,rm.prototype.getAdId=rm.prototype.getAdId,rm.prototype.getVastAdId=rm.prototype.getVastAdId,rm.prototype.getVastMediaWidth=rm.prototype.getVastMediaWidth,rm.prototype.getVastMediaHeight=rm.prototype.getVastMediaHeight,rm.prototype.getVastMediaBitrate=rm.prototype.getVastMediaBitrate,rm.prototype.getDescription=rm.prototype.getDescription,rm.prototype.getTitle=rm.prototype.getTitle,rm.prototype.getPositionInSequence=rm.prototype.getPositionInSequence,rm.prototype.getSequenceLength=rm.prototype.getSequenceLength,rm.prototype.setMuted=rm.prototype.setMuted,rm.prototype.resize=rm.prototype.resize,rm.prototype.isLinear=rm.prototype.isLinear,rm.prototype.isMuted=rm.prototype.isMuted,rm.prototype.setVolume=rm.prototype.setVolume,rm.prototype.getVolume=rm.prototype.getVolume,rm.prototype.play=rm.prototype.play,rm.prototype.pause=rm.prototype.pause,rm.prototype.skip=rm.prototype.skip,rm.prototype.canSkipNow=rm.prototype.canSkipNow,rm.prototype.getTimeUntilSkippable=rm.prototype.getTimeUntilSkippable,rm.prototype.isSkippable=rm.prototype.isSkippable,rm.prototype.isPaused=rm.prototype.isPaused,rm.prototype.getRemainingTime=rm.prototype.getRemainingTime,rm.prototype.getMinSuggestedDuration=rm.prototype.getMinSuggestedDuration,rm.prototype.getDuration=rm.prototype.getDuration,rm.prototype.isUsingAnotherMediaElement=rm.prototype.isUsingAnotherMediaElement,rm.prototype.hasCustomClick=rm.prototype.hasCustomClick,rm.prototype.isClientRendering=rm.prototype.isClientRendering,rm.prototype.needsSkipUI=rm.prototype.needsSkipUI,sm.prototype.stop=function(){for(var e=d(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.s.Da(t.target,t.type,t.listener);pm(this),this.m=[],this.u=[],this.G="",this.N=!0,this.H="",this.B=null,this.j=[],this.L=[],this.F.clear()},sm.prototype.release=function(){this.stop(),this.s&&this.s.release()},sm.prototype.onManifestUpdated=function(e){this.I=e,""!=this.G&&(om(this,this.G,this.N),this.N=!1)},sm.prototype.getCuePoints=function(){for(var e=[],t=d(this.j),n=t.next();!n.done;n=t.next()){n=d(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e},i=mm.prototype,i.needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.i?this.i.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},i.isPaused=function(){return this.h.paused},i.isSkippable=function(){return this.g.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.h.currentTime+=this.getRemainingTime()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.play()},i.getVolume=function(){return this.h.volume},i.setVolume=function(e){this.h.volume=e},i.isMuted=function(){return this.h.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.h.muted=e},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.i=this.g=null},X("shaka.ads.ServerSideAd",mm),mm.prototype.release=mm.prototype.release,mm.prototype.getPodIndex=mm.prototype.getPodIndex,mm.prototype.getTimeOffset=mm.prototype.getTimeOffset,mm.prototype.getMediaUrl=mm.prototype.getMediaUrl,mm.prototype.getAdvertiserName=mm.prototype.getAdvertiserName,mm.prototype.getCreativeAdId=mm.prototype.getCreativeAdId,mm.prototype.getAdId=mm.prototype.getAdId,mm.prototype.getVastAdId=mm.prototype.getVastAdId,mm.prototype.getVastMediaWidth=mm.prototype.getVastMediaWidth,mm.prototype.getVastMediaHeight=mm.prototype.getVastMediaHeight,mm.prototype.getVastMediaBitrate=mm.prototype.getVastMediaBitrate,mm.prototype.getDescription=mm.prototype.getDescription,mm.prototype.getTitle=mm.prototype.getTitle,mm.prototype.getPositionInSequence=mm.prototype.getPositionInSequence,mm.prototype.getSequenceLength=mm.prototype.getSequenceLength,mm.prototype.setMuted=mm.prototype.setMuted,mm.prototype.resize=mm.prototype.resize,mm.prototype.isLinear=mm.prototype.isLinear,mm.prototype.isMuted=mm.prototype.isMuted,mm.prototype.setVolume=mm.prototype.setVolume,mm.prototype.getVolume=mm.prototype.getVolume,mm.prototype.play=mm.prototype.play,mm.prototype.pause=mm.prototype.pause,mm.prototype.skip=mm.prototype.skip,mm.prototype.canSkipNow=mm.prototype.canSkipNow,mm.prototype.getTimeUntilSkippable=mm.prototype.getTimeUntilSkippable,mm.prototype.isSkippable=mm.prototype.isSkippable,mm.prototype.isPaused=mm.prototype.isPaused,mm.prototype.getRemainingTime=mm.prototype.getRemainingTime,mm.prototype.getMinSuggestedDuration=mm.prototype.getMinSuggestedDuration,mm.prototype.getDuration=mm.prototype.getDuration,mm.prototype.isUsingAnotherMediaElement=mm.prototype.isUsingAnotherMediaElement,mm.prototype.hasCustomClick=mm.prototype.hasCustomClick,mm.prototype.isClientRendering=mm.prototype.isClientRendering,mm.prototype.needsSkipUI=mm.prototype.needsSkipUI,i=ym.prototype,i.configure=function(){},i.stop=function(){this.C="",this.s=null,this.D=[]},i.release=function(){this.stop(),this.h&&this.h.release()},i.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},i.getCuePoints=function(){return this.D},b(bm,ae),i=bm.prototype,i.setLocale=function(e){this.s=e},i.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},i.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new Ug(e,t,n,function(e){return Tm(i,e)}),this.g.configure(this.l)},i.initClientSide=function(t,n,i){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Le(2,10,1e4);this.j&&this.j.release(),this.j=new kg(t,n,this.s,i,function(e){return Tm(r,e)}),this.j.configure(this.l)},i.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),ae.prototype.release.call(this)},i.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new K("ad-stopped")),this.dispatchEvent(new K("ad-content-attach-requested")),this.m=new Sg},i.requestClientSideAds=function(e){if(!this.j)throw new Le(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},i.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Le(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},i.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new sm(e,t,n,function(e){return Tm(i,e)})},i.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Le(1,10,10005);var i=this.i;return n=void 0===n?"":n,i.l?e=Promise.reject(new Le(1,10,10004)):(i.l=new as,am(i,e,t),i.H=n||"",i.O=Date.now()/1e3,e=i.l),e},i.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Le(1,10,10005);var t=this.i;t.G=e,t.i(new K("ads-loaded",(new Map).set("loadTime",0)))},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Le(2,10,10002);this.h&&this.h.release(),this.h=new ym(t,n,this.s,function(e){return Tm(i,e)}),this.h.configure(this.l)},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.h)throw new Le(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&J('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.15.3",n=this.h,n.j?e=Promise.reject(new Le(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new as,n.g.requestStream(e),n.C=t||"",n.F=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new Le(1,10,10003);(e.mpt||e.mpv)&&J('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.15.3",this.h.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){return Bt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},i.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},i.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Eg(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},i.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},i.onDashTimedMetadata=function(e){this.h&&"urn:google:dai:2018"==e.schemeIdUri&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},i.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},i.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&Vg(this.g,n))},i.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if("urn:mpeg:dash:event:alternativeMPD:insert:2025"==i||"urn:mpeg:dash:event:alternativeMPD:replace:2025"==i){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t="urn:mpeg:dash:event:alternativeMPD:replace:2025"==n.schemeIdUri,i="urn:mpeg:dash:event:alternativeMPD:insert:2025"==n.schemeIdUri,t||i)){for(var r,s=n.startTime,a=n.endTime,o=null,l=0,u=d(n.eventNode.children),c=u.next();!c.done;c=u.next())if(c=c.value,"AlternativeMPD"==c.tagName){if(c=c.attributes.uri){r=c;break}}else if("InsertPresentation"==c.tagName||"ReplacePresentation"==c.tagName){var h=c.attributes.url;if(h){r=h,(u=Nn(c,"maxDuration",Vn))&&(o=u/n.timescale),(u=Nn(c,"returnOffset",Vn))&&(l=u/n.timescale),t&&l&&(a=s+l);break}}r&&zg(e,[{id:n.id,groupId:null,startTime:s,endTime:a,uri:r,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?l:null,playoutLimit:o,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else("urn:mpeg:dash:event:2012"==i||"urn:scte:dash:scte214-events"==i)&&n.eventNode&&Rn(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&Hg(this.g,n))}},i.addCustomInterstitial=function(e){if(!this.g)throw new Le(1,10,10006);zg(this.g,[e])},i.addAdUrlInterstitial=function(e){if(!this.g)throw new Le(1,10,10006);return this.g.addAdUrlInterstitial(e)},i.getInterstitialPlayer=function(){if(!this.g)throw new Le(1,10,10006);return this.g.Sb()},X("shaka.ads.AdManager",bm),bm.prototype.getInterstitialPlayer=bm.prototype.getInterstitialPlayer,bm.prototype.addAdUrlInterstitial=bm.prototype.addAdUrlInterstitial,bm.prototype.addCustomInterstitial=bm.prototype.addCustomInterstitial,bm.prototype.onDASHInterstitialMetadata=bm.prototype.onDASHInterstitialMetadata,bm.prototype.onHLSInterstitialMetadata=bm.prototype.onHLSInterstitialMetadata,bm.prototype.onCueMetadataChange=bm.prototype.onCueMetadataChange,bm.prototype.onHlsTimedMetadata=bm.prototype.onHlsTimedMetadata,bm.prototype.onDashTimedMetadata=bm.prototype.onDashTimedMetadata,bm.prototype.onManifestUpdated=bm.prototype.onManifestUpdated,bm.prototype.getStats=bm.prototype.getStats,bm.prototype.getCuePoints=bm.prototype.getCuePoints,bm.prototype.getServerSideCuePoints=bm.prototype.getServerSideCuePoints,bm.prototype.replaceServerSideAdTagParameters=bm.prototype.replaceServerSideAdTagParameters,bm.prototype.requestServerSideStream=bm.prototype.requestServerSideStream,bm.prototype.initServerSide=bm.prototype.initServerSide,bm.prototype.addMediaTailorTrackingUrl=bm.prototype.addMediaTailorTrackingUrl,bm.prototype.requestMediaTailorStream=bm.prototype.requestMediaTailorStream,bm.prototype.initMediaTailor=bm.prototype.initMediaTailor,bm.prototype.updateClientSideAdsRenderingSettings=bm.prototype.updateClientSideAdsRenderingSettings,bm.prototype.requestClientSideAds=bm.prototype.requestClientSideAds,bm.prototype.onAssetUnload=bm.prototype.onAssetUnload,bm.prototype.release=bm.prototype.release,bm.prototype.initClientSide=bm.prototype.initClientSide,bm.prototype.initInterstitial=bm.prototype.initInterstitial,bm.prototype.configure=bm.prototype.configure,bm.prototype.setLocale=bm.prototype.setLocale,bm.ADS_LOADED="ads-loaded",bm.AD_STARTED="ad-started",bm.AD_FIRST_QUARTILE="ad-first-quartile",bm.AD_MIDPOINT="ad-midpoint",bm.AD_THIRD_QUARTILE="ad-third-quartile",bm.AD_COMPLETE="ad-complete",bm.AD_STOPPED="ad-stopped",bm.AD_SKIPPED="ad-skipped",bm.AD_VOLUME_CHANGED="ad-volume-changed",bm.AD_MUTED="ad-muted",bm.AD_PAUSED="ad-paused",bm.AD_RESUMED="ad-resumed",bm.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",bm.CUEPOINTS_CHANGED="ad-cue-points-changed",bm.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",bm.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",bm.AD_CLICKED="ad-clicked",bm.AD_PROGRESS="ad-progress",bm.AD_BUFFERING="ad-buffering",bm.AD_IMPRESSION="ad-impression",bm.AD_DURATION_CHANGED="ad-duration-changed",bm.AD_CLOSED="ad-closed",bm.AD_LOADED="ad-loaded",bm.ALL_ADS_COMPLETED="all-ads-completed",bm.AD_LINEAR_CHANGED="ad-linear-changed",bm.AD_METADATA="ad-metadata",bm.AD_RECOVERABLE_ERROR="ad-recoverable-error",bm.AD_ERROR="ad-error",bm.AD_BREAK_READY="ad-break-ready",bm.AD_INTERACTION="ad-interaction",bm.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",bm.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",bm.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",_g=function(){return new bm};var Em="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Am="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Cm=["loop","playbackRate"],Im=["pause","play"],xm=(new Map).set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),km=(new Map).set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),Mm=(new Map).set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),Dm=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Rm=[["isTextTrackVisible","setTextTrackVisibility"]],Om="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),Nm="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function Lm(e,t,n,i,r,s,a){var o=this;this.G=e,this.J=a,this.l=new sr(t),this.K=n,this.u=!1,this.B=i,this.F=r,this.L=s,this.i=this.m=!1,this.I="",this.s=null,this.C=function(){return jm(o)},this.D=function(e,t){switch(e=wm(t),e.type){case"event":var n=e.targetName,i=Y(e.event);o.B(n,i);break;case"update":for(i in n=e.update,n)for(var r in e=o.g[i]||{},n[i])e[r]=n[i][r];o.u&&(o.K(),o.u=!1);break;case"asyncComplete":if(r=e.id,i=e.error,t=e.res,e=o.h.get(r),o.h.delete(r),e)if(i){for(n in r=new Le(i.severity,i.category,i.code),i)r[n]=i[n];e.reject(r)}else e.resolve(t)}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,Xm.add(this)}function Pm(e){e.i&&chrome.cast.requestSession(function(t){return Um(e,t)},function(t){return Bm(e,t)})}function Um(e,t){var n=e.L();qm=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),jm(e),Hm(e,{type:"init",initState:n,appData:e.s}),e.j.resolve()}function Bm(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Le(2,8,n,t))}function Fm(e){var t=qm;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function jm(e){var t=!!qm&&"connected"==qm.status;if(e.i&&!t){for(var n in e.F(),e.g)e.g[n]={};Vm(e)}e.i=t,e.I=t?qm.receiver.friendlyName:"",e.l.Ka()}function Vm(e){if(e.h)for(var t=d(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new Le(1,7,7e3))}}function Hm(e,t){t=_m(t);var n=qm;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},te)}catch(i){throw t=new Le(2,8,8005,i),n=new K("error",(new Map).set("detail",t)),e.B("player",n),e.yd(),t}}i=Lm.prototype,i.destroy=function(){return Xm.delete(this),Vm(this),qm&&Fm(this),this.l&&(this.l.stop(),this.l=null),this.F=this.B=null,this.i=this.m=!1,this.D=this.C=this.j=this.h=this.g=this.s=null,Promise.resolve()},i.Pa=function(){return this.i},i.Tf=function(){return this.I},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Ka();var t=new chrome.cast.SessionRequest(this.G,[],null,this.J,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=d(Xm),n=t.next();!n.done;n=t.next()){n=n.value;var i=e;n.j=new as,n.u=!0,Um(n,i)}},function(e){for(var t=d(Xm),n=t.next();!n.done;n=t.next())n=n.value,Gm="available"==e,n.l.Ka()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),Gm&&this.l.X(zm),(t=qm)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new as,this.u=!0,Um(this,t)):qm=null}else e.__onGCastApiAvailable!==Km&&(Wm=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Km)},i.Th=function(e){this.s=e,this.i&&Hm(this,{type:"appData",appData:this.s})},i.cast=function(){var e=this;return U(function(t){if(!e.m)throw new Le(1,8,8e3);if(!Gm)throw new Le(1,8,8001);if(e.i)throw new Le(1,8,8002);return e.j=new as,chrome.cast.requestSession(function(t){return Um(e,t)},function(t){return Bm(e,t)}),S(t,e.j,0)})},i.yd=function(){if(this.i){if(Vm(this),qm){Fm(this);try{qm.stop(function(){},function(){})}catch(XO){}qm=null}jm(this)}},i.get=function(e,t){var n=this;if("video"==e){if(Im.includes(t))return function(){return n.qj.apply(n,[e,t].concat(h(B.apply(0,arguments))))}}else if("player"==e){if(Mm.has(t)&&!this.get("player","isLive")())return function(){};if(Om.includes(t))return function(){return n.qj.apply(n,[e,t].concat(h(B.apply(0,arguments))))};if(Nm.includes(t))return function(){return n.Wl.apply(n,[e,t].concat(h(B.apply(0,arguments))))};if(xm.has(t)||km.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Hm(this,{type:"set",targetName:e,property:t,value:n})},i.qj=function(e,t){Hm(this,{type:"call",targetName:e,methodName:t,args:B.apply(2,arguments)})},i.Wl=function(e,t){var n=B.apply(2,arguments),i=new as,r=this.H.toString();this.H++,this.h.set(r,i);try{Hm(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(s){i.reject(s)}return i};var zm=.02,Gm=!1,qm=null,Wm=null,Xm=new Set;function Km(t){if(Wm?e.__onGCastApiAvailable=Wm:delete e.__onGCastApiAvailable,Wm=null,t)for(var n=d(Xm),i=n.next();!i.done;i=n.next())i.value.init();"function"===typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Ym(t,n,i,r){r=void 0!==r&&r,ae.call(this);var s=this;this.i=t,this.h=n,this.l=this.s=this.m=this.u=this.j=null,this.H=i,this.G=r,this.D=[],this.C=[],this.B=[],this.F=new Map,this.g=null,e.chrome?(this.g=new Lm(i,function(){return ey(s)},function(){return ty(s)},function(e,t){return sy(s,e,t)},function(){return ny(s)},function(){return Jm(s)},r),$m(this)):(this.j=this.i,this.u=this.h)}function $m(e){e.g.init(),e.l=new Rt;for(var t=d(Em),n=t.next();!n.done;n=t.next())e.l.o(e.i,n.value,function(t){e.g.Pa()||(t=Y(t),e.m.dispatchEvent(t))});for(var i in $)e.l.o(e.h,$[i],function(t){e.g.Pa()||e.s.dispatchEvent(t)});for(var r in e.j={},t={},e.i)t={me:t.me},t.me=r,Object.defineProperty(e.j,t.me,{configurable:!1,enumerable:!0,get:function(t){return function(){return iy(e,t.me)}}(t),set:function(t){return function(n){var i=t.me;e.g.Pa()?e.g.set("video",i,n):e.i[i]=n}}(t)});e.u={},Zm(e,function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return ry(e,t)}})}),Qm(e),e.m=new ae,e.m.Qe=e.j,e.s=new ae,e.s.Qe=e.u,e.l.o(e.h,"unloading",function(){e.g&&e.g.Pa()||ay(e)})}function Qm(e){var t=new Map;Zm(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.F.set(n,i):e.F.set(i,n)):t.set(i,n)})}function Zm(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!s.has(e)}var i,r=e.h,s=new Set;for(i in r)n(i)&&(s.add(i),t(i,r[i]));for(e=Object.getPrototypeOf(r),i=Object.getPrototypeOf({});e&&e!=i;){for(var a=d(Object.getOwnPropertyNames(e)),o=a.next();!o.done;o=a.next())o=o.value,n(o)&&(s.add(o),t(o,r[o]));e=Object.getPrototypeOf(e)}}function Jm(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.zd(),startTime:null,addThumbnailsTrackCalls:e.D,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=d(Cm),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=d(Dm),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=d(Rm),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function ey(e){var t=new K("caststatuschanged");e.dispatchEvent(t)}function ty(e){var t=new K(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function ny(e){for(var t=d(Dm),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.D,s=e.C,a=e.B;ay(e);var o=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var l,u=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime")),(i=e.g.get("player","getTextTracks")())&&i.length&&(l=i.find(function(e){return e.active}));var c=e.g.get("player","isTextTrackVisible")();o&&(e.i.autoplay=!1,t=e.h.load(o,n));var p={};for(n=d(Cm),i=n.next();!i.done;i=n.next())i=i.value,p[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var t=d(r),n=t.next();!n.done;n=t.next()){var i;n=n.value,(i=e.Sb()).Ye.apply(i,h(n))}for(t=d(s),i=t.next();!i.done;i=t.next()){var f;i=i.value,(f=e.Sb()).Ud.apply(f,h(i))}for(f=d(a),t=f.next();!t.done;t=f.next()){var g;t=t.value,(g=e.Sb()).Xe.apply(g,h(t))}for(g=d(Cm),f=g.next();!f.done;f=g.next())f=f.value,e.i[f]=p[f];for(g=d(Rm),f=g.next();!f.done;f=g.next())t=f.value,f=t[1],t=e.g.get("player",t[0])(),e.h[f](t);e.h.Ae(c),l&&e.h.Sh(l.language,l.roles,l.forced),e.i.autoplay=u,o&&e.i.play()}},function(t){t=(new Map).set("detail",t),t=new K("error",t),e.h.dispatchEvent(t)})}function iy(e,t){if("addEventListener"==t)return function(t,n,i){return e.m.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.m.removeEventListener(t,n,i)};if(e.g.Pa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.Pa()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function ry(e,t,n){if(n=void 0!==n&&n,e.F.has(t)&&(t=e.F.get(t)),"addEventListener"==t)return function(t,n,i){return e.s.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.s.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.j};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Ib()};if("getDrmEngine"==t)return function(){return e.h.D};if("getAdManager"==t)return function(){return e.h.mf()};if("getQueueManager"==t)return function(){return e.h.lh()};if("setVideoContainer"==t)return function(t){return e.h.Zh(t)};if(!n){if("addThumbnailsTrack"==t)return function(){var n=B.apply(0,arguments);return e.D.push(n),ry(e,t,!0).apply(null,h(n))};if("addTextTrackAsync"==t)return function(){var n=B.apply(0,arguments);return e.C.push(n),ry(e,t,!0).apply(null,h(n))};if("addChaptersTrack"==t)return function(){var n=B.apply(0,arguments);return e.B.push(n),ry(e,t,!0).apply(null,h(n))}}if(e.g.Pa()){if("getManifest"==t||"drmInfo"==t)return function(){return J(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return J(t+"() does not work while casting!"),Promise.resolve()};if("getChapters"==t)return function(){return J(t+"() does not work while casting!"),[]}}return e.g.Pa()&&0==Object.keys(e.g.g.video).length&&(xm.has(t)||km.has(t))||!e.g.Pa()?e.h[t].bind(e.h):e.g.get("player",t)}function sy(e,t,n){e.g.Pa()&&("video"==t?e.m.dispatchEvent(n):"player"==t&&("unloading"==n.type&&ay(e),e.s.dispatchEvent(n)))}function ay(e){e.D=[],e.C=[],e.B=[]}function oy(e,t,n,i){ae.call(this);var r=this;this.h=e,this.g=t,this.j=new Rt,this.H={video:e,player:t},this.F=n||function(){},this.I=i||function(e){return e},this.i=null,this.G=!1,this.s=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.D=new sr(function(){py(r)}),ly(this)}function ly(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return uy(e)},t.onSenderDisconnected=function(){return uy(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&by(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),by(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(t){return yy(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return my(e,t)},t.start(),t=d(Em);for(var n=t.next();!n.done;n=t.next())e.j.o(e.h,n.value,function(t){return hy(e,"video",t)});for(var i in $)e.j.o(e.g,$[i],function(t){return hy(e,"player",t)});e.j.o(e.h,"loadeddata",function(){e.C=!0}),e.j.o(e.g,"loading",function(){e.s=!1,cy(e)}),e.j.o(e.h,"playing",function(){e.s=!1,cy(e)}),e.j.o(e.h,"pause",function(){cy(e)}),e.j.o(e.g,"unloading",function(){e.s=!0,cy(e)}),e.j.o(e.h,"ended",function(){new sr(function(){e.h&&e.h.ended&&(e.s=!0,cy(e))}).X(wy)})}function uy(e){e.m=0,e.B=!0,e.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,cy(e)}function cy(e){var t;U(function(n){return 1==n.g?S(n,Promise.resolve(),2):e.g?(t=new K("caststatuschanged"),e.dispatchEvent(t),fy(e)||Ty(e),void E(n)):n.return()})}function dy(e,t,n){var i,r,s,a,o,l,u,c,p,f,g,m,y,v,b,T,_,w,C;U(function(k){switch(k.g){case 1:for(i in t.player)r=t.player[i],e.g[i](r);return e.F(n),s=e.h.autoplay,t.manifest?(e.h.autoplay=!1,A(k,5),S(k,e.g.load(t.manifest,t.startTime),7)):S(k,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(a=d(t.addThumbnailsTrackCalls),o=a.next();!o.done;o=a.next())l=o.value,e.g.Ye.apply(e.g,h(l));if(t.addTextTrackAsyncCalls)for(u=d(t.addTextTrackAsyncCalls),c=u.next();!c.done;c=u.next())p=c.value,e.g.Ud.apply(e.g,h(p));if(t.addChaptersTrackCalls)for(f=d(t.addChaptersTrackCalls),g=f.next();!g.done;g=f.next())m=g.value,e.g.Xe.apply(e.g,h(m));I(k,3);break;case 5:return y=x(k),v=(new Map).set("detail",y),b=new K("error",v),e.g&&e.g.dispatchEvent(b),k.return();case 3:if(!e.g)return k.return();for(T in t.video)_=t.video[T],e.h[T]=_;for(w in t.playerAfterLoad)C=t.playerAfterLoad[w],e.g[w](C);e.h.autoplay=s,t.manifest&&(e.h.play(),Ty(e)),E(k)}})}function hy(e,t,n){e.g&&(py(e),by(e,{type:"event",targetName:t,event:n},e.l))}function py(e){e.D.X(_y);for(var t={video:{},player:{}},n=d(Am),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.h[i];e.g.T()&&Mm.forEach(function(n,i){0==e.m%n&&(t.player[i]=e.g[i]())}),xm.forEach(function(n,i){0==e.m%n&&(t.player[i]=e.g[i]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),by(e,{type:"update",update:t},e.l),km.forEach(function(t,n){0==e.m%t&&(t={player:{}},t.player[n]=e.g[n](),by(e,{type:"update",update:t},e.l))}),e.C&&(e.m+=1),fy(e)}function fy(e){return!(!e.B||!e.h.duration&&!e.g.T())&&(gy(e),e.B=!1,!0)}function gy(e,t){var n={contentId:e.g.zd(),streamType:e.g.T()?"LIVE":"BUFFERED",contentType:""};e.g.T()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Ty(e,void 0===t?0:t,n)}function my(e,t){var n=wm(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,dy(e,n.initState,n.appData),py(e);break;case"appData":e.F(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}if("muted"==r){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":i=e.H[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.m=0,e.C=!1);var s=n.id,a=t.senderId;t=e.H[i],n=t[r].apply(t,n.args),"player"==i&&"load"==r&&(n=n.then(function(){e.B=!0})),n.then(function(t){return vy(e,a,s,null,t)},function(t){return vy(e,a,s,t,null)})}}function yy(e,t){var n=wm(t.data);switch(n.type){case"PLAY":e.h.play(),Ty(e);break;case"PAUSE":e.h.pause(),Ty(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.h.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(e.h.play(),Ty(e)):i&&"PLAYBACK_PAUSE"==i&&(e.h.pause(),Ty(e));break;case"STOP":e.g.lc().then(function(){e.g&&Ty(e)});break;case"GET_STATUS":gy(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.h.volume,s=e.h.muted;null!=t&&(e.h.volume=Number(t)),null!=i&&(e.h.muted=i),r==e.h.volume&&s==e.h.muted||Ty(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,i=n.currentTime,r=e.I(t.contentId),s=n.autoplay||!0,e.F(t.customData),s&&(e.h.autoplay=!0),e.g.load(r,i).then(function(){e.g&&gy(e)}).catch(function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),by(e,{requestId:Number(n.requestId),type:i},e.u)});break;default:by(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function vy(e,t,n,i,r){e.g&&by(e,{type:"asyncComplete",id:n,error:i,res:r},e.l,t)}function by(e,t,n,i){e.G&&(e=_m(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ty(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.s?Sy:e.g.xf()?Ay:e.h.paused?Cy:Ey,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(i.media=n),by(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}b(Ym,ae),i=Ym.prototype,i.destroy=function(e){return this.g&&void 0!==e&&e&&this.g.yd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,ae.prototype.release.call(this),Promise.all(e)},i.Jc=function(){return this.j},i.Sb=function(){return this.u},i.Dg=function(){return!!this.g&&(this.g.m&&Gm)},i.Pa=function(){return!!this.g&&this.g.Pa()},i.Tf=function(){return this.g?this.g.Tf():""},i.cast=function(){var e=this;return U(function(t){return 1==t.g?e.g?S(t,e.g.cast(),2):t.return():e.h?S(t,e.h.lc(),0):t.return()})},i.Th=function(e){this.g&&this.g.Th(e)},i.Oj=function(){this.g&&Pm(this.g)},i.yd=function(){this.g&&this.g.yd()},i.Ei=function(e,t){t=void 0!==t&&t;var n=this;return U(function(i){if(1==i.g)return e==n.H&&t==n.G?i.return():(n.H=e,n.G=t,n.g?(n.g.yd(),S(i,n.g.destroy(),2)):i.return());n.g=null,n.g=new Lm(e,function(){return ey(n)},function(){return ty(n)},function(e,t){return sy(n,e,t)},function(){return ny(n)},function(){return Jm(n)},t),n.g.init(),E(i)})},X("shaka.cast.CastProxy",Ym),Ym.prototype.changeReceiverId=Ym.prototype.Ei,Ym.prototype.forceDisconnect=Ym.prototype.yd,Ym.prototype.suggestDisconnect=Ym.prototype.Oj,Ym.prototype.setAppData=Ym.prototype.Th,Ym.prototype.cast=Ym.prototype.cast,Ym.prototype.receiverName=Ym.prototype.Tf,Ym.prototype.isCasting=Ym.prototype.Pa,Ym.prototype.canCast=Ym.prototype.Dg,Ym.prototype.getPlayer=Ym.prototype.Sb,Ym.prototype.getVideo=Ym.prototype.Jc,Ym.prototype.destroy=Ym.prototype.destroy,b(oy,ae),i=oy.prototype,i.isConnected=function(){return this.G},i.wl=function(){return this.s},i.gm=function(e){this.i=e},i.jk=function(){this.i=null},i.hm=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.fm=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.em=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t,n=this;return U(function(i){if(1==i.g)return n.j&&(n.j.release(),n.j=null),e=[],n.g&&(e.push(n.g.destroy()),n.g=null),n.D&&(n.D.stop(),n.D=null),n.h=null,n.H=null,n.F=null,n.G=!1,n.s=!0,n.l=null,n.u=null,ae.prototype.release.call(n),S(i,Promise.all(e),2);t=cast.receiver.CastReceiverManager.getInstance(),t.stop(),E(i)})},X("shaka.cast.CastReceiver",oy),oy.prototype.destroy=oy.prototype.destroy,oy.prototype.setContentArtist=oy.prototype.em,oy.prototype.setContentImage=oy.prototype.fm,oy.prototype.setContentTitle=oy.prototype.hm,oy.prototype.clearContentMetadata=oy.prototype.jk,oy.prototype.setContentMetadata=oy.prototype.gm,oy.prototype.isIdle=oy.prototype.wl,oy.prototype.isConnected=oy.prototype.isConnected;var _y=.5,wy=5,Sy="IDLE",Ey="PLAYING",Ay="BUFFERING",Cy="PAUSED";function Iy(e,t,n,i,r){if(i>=r)return null;for(var s=-1,a=-1,o=0;o<n.length;o++)if(n[o].some(function(e){return null!=e&&""!=e.g.trim()})){s=o;break}for(o=n.length-1;0<=o;o--)if(n[o].some(function(e){return null!=e&&""!=e.g.trim()})){a=o;break}if(-1===s||-1===a)return null;for(var l=o=!1,u="white",c="black",d=xy(i,r,o,l,u,c);s<=a;s++){for(var h=n[s],p=-1,f=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}if(-1===p||-1===f)h=ky(i,r),e.nestedCues.push(h);else{for(;p<=f;p++)if(g=h[p]){var m=g.l,y=g.i,v=g.j,b=g.h;m==o&&y==l&&v==u&&b==c||(d.payload&&e.nestedCues.push(d),d=xy(i,r,m,y,v,b),o=m,l=y,u=v,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),s!==a&&(d=ky(i,r),e.nestedCues.push(d)),d=xy(i,r,o,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function xy(e,t,n,i,r,s){return e=new ti(e,t,""),n&&e.textDecoration.push(Ci),i&&(e.fontStyle=Ei),e.color=r,e.backgroundColor=s,e}function ky(e,t){return e=new ti(e,t,""),e.lineBreak=!0,e}function My(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function Dy(e,t){this.i=[],this.g=1,this.h=0,this.D=e,this.C=t,this.j=this.m=!1,this.l="white",this.s="black",this.u=this.B=null,Oy(this)}function Ry(e,t,n){var i="CC"+(1+(e.D<<1|e.C)),r=new ti(t,n,"");r.lineInterpretation=1;var s=Vy.get(e.g);return s&&(r.line=s),null!=e.u&&null!=e.B&&(r.position=10+Math.min(70,10*e.u)+2.5*e.B),(t=Iy(r,i,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(s=Vy.get(e.g+3-t.cue.nestedCues.length))&&(r.line=s),t}function Oy(e){Py(e,0,15),e.g=1}function Ny(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case 0:i=Uy.has(n)?Uy.get(n):String.fromCharCode(n);break;case 1:i=By.get(n);break;case 2:e.i[e.g].pop(),i=Fy.get(n);break;case 3:e.i[e.g].pop(),i=jy.get(n)}i&&e.i[e.g].push(new My(i,e.m,e.j,e.s,e.l))}}function Ly(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(e){return e});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(e){return e})}function Py(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Uy=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),By=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Fy=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),jy=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),Vy=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Hy(e,t){this.h=0,this.s=new Dy(e,t),this.i=new Dy(e,t),this.g=this.j=new Dy(e,t),this.l=0,this.m=null}function zy(e,t,n){e.g=e.i;var i=e.g,r=null;return 3!==e.h&&4!==e.h&&(r=Ry(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Py(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Py(n,0,15),i.g=15),e.h=3,i.h=t,r}function Gy(e){e.h=1,e.g=e.j,e.g.h=0}function qy(e){ee("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=4}var Wy="black green blue cyan red yellow magenta black".split(" "),Xy="white green blue cyan red yellow magenta white_italics".split(" ");function Ky(e,t){this.I=t,this.L=e,this.J=this.l=!1,this.m=this.s=this.G=this.K=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.D=this.B=!1,this.C="white",this.u="black",Yy(this)}function Yy(e){e.i=[];for(var t=0;16>t;t++)e.i.push($y())}function $y(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Qy(e,t){Zy(e)&&(e.i[e.h][e.g]=new My(t,e.D,e.B,e.u,e.C),e.g++)}function Zy(e){var t=e.g<e.m&&0<=e.g;return e.h<e.s&&0<=e.h&&t}function Jy(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=$y()}function ev(e,t,n){var i=new ti(e.j,t,"");i.textAlign=0===e.F?"left":1===e.F?"right":ci;var r=i.region;switch(e.I&&(r.id+="svc"+e.I),r.id+="win"+e.L,r.height=e.s,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.H,r.viewportAnchorY=e.K,r.viewportAnchorUnits=e.J?an:2,e.G){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=Iy(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function tv(){this.i=[],this.h=null,this.g=0}function nv(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new iv(e.h)),e.h=null,e.g=0))}function iv(e){this.g=0,this.h=e}function rv(e){if(!e.Oa())throw new Le(2,2,3e3);return e.h[e.g++]}function sv(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function av(e,t,n,i){if(!e.g)return[];if(24==n)return n=rv(t).value,i=rv(t).value,n=function(e){return e.map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join("")}([n,i]),Qy(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!Zy(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=ev(t,i,e.i)),t.h+1>=t.s?Jy(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=ev(t,i,e.i)),t.i[t.h]=$y(),t.g=0;break;case 12:t.isVisible()&&(r=ev(t,i,e.i)),Yy(t),t.h=0,t.g=0}return r?[r]:[]}function ov(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=rv(t).value,t=[],n=d(lv(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var s=ev(r,i,e.i);s&&t.push(s)}Yy(r)}return t}if(137===n)for(t=rv(t).value,t=d(lv(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(138===n){for(n=rv(t).value,t=null,n=d(lv(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=ev(r,i,e.i)),r.l=!1;return t?[t]:[]}if(139===n){for(n=rv(t).value,t=null,n=d(lv(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=ev(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(140===n)return t=rv(t).value,uv(e,t,i);if(143===n)return i=uv(e,255,i),cv(e),i;if(144===n)t.skip(1),i=rv(t).value,e.g&&(e.g.B=0<(128&i),e.g.D=0<(64&i));else if(145===n)i=rv(t).value,n=rv(t).value,t.skip(1),e.g&&(t=dv((48&n)>>4,(12&n)>>2,3&n),e.g.C=dv((48&i)>>4,(12&i)>>2,3&i),e.g.u=t);else if(146===n)i=rv(t).value,t=rv(t).value,e.g&&(e=e.g,e.h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=rv(t).value,t.skip(1),e.g&&(e.g.F=3&i);else if(152<=n&&159>=n){n=(15&n)-8,r=null!==e.h[n],r||(s=new Ky(n,e.i),s.j=i,e.h[n]=s),i=rv(t).value,s=rv(t).value;var a=rv(t).value,o=rv(t).value,l=rv(t).value;t=rv(t).value,r&&0===(7&t)||(t=e.h[n],t.h=0,t.g=0,t.D=!1,t.B=!1,t.C="white",t.u="black"),t=e.h[n],t.l=0<(32&i),t.K=127&s,t.H=a,t.G=(240&o)>>4,t.J=0<(128&s),t.s=1+(15&o),t.m=1+(63&l),e.g=e.h[n]}}}return[]}function lv(e,t){for(var n=[],i=0;8>i;i++)1===(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function uv(e,t,n){var i=[];t=d(lv(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=e.h[r];s.isVisible()&&(s=ev(s,n,e.i))&&i.push(s),e.h[r]=null}return i}function cv(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function dv(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],pv[e<<2|t<<1|n]}Ky.prototype.isVisible=function(){return this.l},Ky.prototype.display=function(){this.l=!0},iv.prototype.Oa=function(){return this.g<this.h.length},iv.prototype.Ua=function(){return this.g},iv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Le(2,2,3e3);this.g+=e},iv.prototype.vj=function(e){if(0>this.g-e)throw new Le(2,2,3e3);this.g-=e};var hv=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),pv="black blue green cyan red magenta yellow white".split(" ");function fv(){this.h=[],this.g=[],this.i=new tv,this.l=0,this.m=new Map([["CC1",new Hy(0,0)],["CC2",new Hy(0,1)],["CC3",new Hy(1,0)],["CC4",new Hy(1,1)]]),this.u=this.s=0,this.j=new Map,this.C=!0,this.B=new Set,gv(this)}function gv(e){e.s=0,e.u=0;for(var t=d(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Oy(n.i),Oy(n.j),Oy(n.s);e.C=!0}function mv(e,t){var n=t.type;if(16===(112&t.Fb)){var i=t.Fb>>3&1;0===n?e.s=i:e.u=i}if(i="CC"+(1+(n<<1|(n?e.u:e.s))),n=e.m.get(i),255===t.Fb&&255===t.mc||!t.Fb&&!t.mc||!vv(t.Fb)||!vv(t.mc))return 45<=++e.l&&gv(e),null;e.l=0,t.Fb&=127,t.mc&=127;var r=t.Fb;if(1<=r&&15>=r||!t.Fb&&!t.mc)return null;if(r=null,16===(112&t.Fb))e:{if(e.B.add(i),i=t.Fb,e=t.mc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16===(240&i)&&64===(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|e>>5&1],i="white",r=!1;var s=null,a=95<e?e-96:e-64;13>=a?i=Xy[Math.floor(a/2)]:15>=a?r=!0:s=Math.floor((a-16)/2),e=1===(1&e),4!==n.h&&(a=n.g,3===n.h&&t!==a.g&&(n=1+t-a.h,Ly(a,n,1+a.g-a.h,a.h),Py(a,0,n-1),Py(a,t+1,15-t)),a.g=t,a.m=e,a.j=r,a.l=i,a.u=s,a.s="black")}else if(17===(247&i)&&32===(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Ny(n.g,0,32),i=!1,t=Xy[(14&e)>>1],"white_italics"===t&&(t="white",i=!0),n.g.m=1===(1&e),n.g.j=i,n.g.l=t;else if(16===(247&i)&&32===(240&e)||23===(247&i)&&45===(255&e))t="black",0===(7&i)&&(t=Wy[(14&e)>>1]),n.g.s=t;else if(17===(247&i)&&48===(240&e))Ny(n.g,1,e);else if(18===(246&i)&&32===(224&e))Ny(n.g,1&i?3:2,e);else{if(20===(246&i)&&32===(240&e)){switch(e=t.pts,i=null,t.mc){case 32:Gy(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=zy(n,2,e);break;case 38:i=zy(n,3,e);break;case 39:i=zy(n,4,e);break;case 40:Ny(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Oy(n.s),qy(n);break;case 43:qy(n);break;case 44:t=n.i,i=null,4!==n.h&&(i=Ry(t,n.l,e)),Py(t,0,15);break;case 45:t=n.g,3!==n.h?i=null:(i=Ry(t,n.l,e),r=t.g-t.h+1,Ly(t,r-1,r,t.h),Py(t,0,r-1),Py(t,t.g,15-t.g),n.l=e);break;case 46:Py(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=Ry(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Gy(n),n.l=e,i=t}r=i;break e}(23==i||31==i)&&33<=e&&35>=e&&(n.g.B=e-32)}r=null}else e=t.mc,Ny(n.g,0,t.Fb),Ny(n.g,0,e);return r}function yv(e,t){var n=[];try{for(;t.Oa();){var i=rv(t).value,r=(224&i)>>5,s=31&i;if(7===r&&0!=s&&(r=63&rv(t).value),0!=r){e.B.add("svc"+r),e.j.has(r)||e.j.set(r,new sv(r));for(var a=e.j.get(r),o=t.Ua();t.Ua()-o<s;){r=a;var l=t,u=rv(l),c=u.value,d=u.pts;if(16===c){var p=rv(l);c=c<<16|p.value}if(0<=c&&31>=c)var f=av(r,l,c,d);else if(128<=c&&159>=c)f=ov(r,l,c,d);else{if(4096<=c&&4127>=c)r=l,l=255&c,8<=l&&15>=l?r.skip(1):16<=l&&23>=l?r.skip(2):24<=l&&31>=l&&r.skip(3);else if(4224<=c&&4255>=c)r=l,l=255&c,128<=l&&135>=l?r.skip(4):136<=l&&143>=l&&r.skip(5);else if(32<=c&&127>=c)l=c,r.g&&Qy(r.g,127===l?"":String.fromCharCode(l));else if(160<=c&&255>=c)r.g&&Qy(r.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(l=255&c,r.g)if(hv.has(l)){var g=hv.get(l);Qy(r.g,g)}else Qy(r.g,"_")}else 4256<=c&&4351>=c&&r.g&&Qy(r.g,160!=(255&c)?"_":"[CC]");f=[]}n.push.apply(n,h(f))}}}}catch(m){if(!(m instanceof Le&&3e3===m.code))throw m;ee("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function vv(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function bv(e){for(var t=[],n=e,i=e=0;i<n.length;)2==e&&3==n[i]?(e=0,n=[].concat(h(n)),n.splice(i,1),n=new Uint8Array(n)):0==n[i]?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;255==e[i];)n+=255,i++;n+=e[i++];for(var r=0;255==e[i];)r+=255,i++;r+=e[i++],4==n&&t.push(e.subarray(i,i+r)),i+=r}return t}function Tv(){this.j=new Map,this.i=this.h=0,this.g=wv}function _v(e,t,n,i,r,s,a,o,l){var u=0,c=s,p=o.map(function(e){return e.Qh});for(p=[].concat.apply([],h(p)),p.length&&(c=p[0].sampleSize||s),t.skip(a+o[0].Ng);t.Oa();){a=t.W();var f=t.aa(),g=null;switch(g=!1,o=1,e.g){case Sv:g=31&f,g=6==g;break;case Ev:o=2,t.skip(1),g=f>>1&63,g=39==g||40==g;break;case Av:o=2,t.skip(1),g=f>>1&63,g=23==g||24==g;break;default:return}if(g)for(f=0,u<p.length&&(f=p[u].Xf||0),f=(n+f)/i,o=d(bv(t.Xb(a-o))),g=o.next();!g.done;g=o.next())l.push({packet:g.value,pts:f});else try{t.skip(a-o)}catch(m){break}c-=a+4,0==c&&(n=u<p.length?n+(p[u].Rh||r):n+r,u++,c=u<p.length&&p[u].sampleSize||s)}}fv.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,gv(this),e=d(this.j.values());for(var t=e.next();!t.done;t=e.next())cv(t.value)},fv.prototype.extract=function(e,t){if(this.C){for(var n=d(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.C=!1}if(e=new Os(e,0),!(8>e.getLength())&&181===e.aa()&&49===e.Fa()&&1195456820===e.W()&&3===e.aa()&&(n=e.aa(),0!==(64&n)))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.aa(),s=(4&r)>>2,a=e.aa(),o=e.aa();s&&(r&=3,0===r||1===r?this.h.push({pts:t,type:r,Fb:a,mc:o,order:this.h.length}):(this.g.push({pts:t,type:r,value:a,order:this.g.length}),this.g.push({pts:t,type:2,value:o,order:this.g.length})))}},fv.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=d(this.h),i=n.next();!i.done;i=n.next())(i=mv(this,i.value))&&t.push(i);for(n=d(this.g),i=n.next();!i.done;i=n.next())nv(this.i,i.value);for(n=d(this.i.i),i=n.next();!i.done;i=n.next())i=yv(this,i.value),t.push.apply(t,h(i));return this.i.i=[],this.h=[],this.g=[],t},fv.prototype.getStreams=function(){return Array.from(this.B)},X("shaka.cea.CeaDecoder",fv),rn=function(){return new fv},Tv.prototype.init=function(e){function t(e){e=e.name,Cv.has(e)&&(n.g=Cv.get(e))}var n=this,i=[],r=[];if((new Ps).box("moov",Us).box("mvex",Us).V("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.W(),t=t.W(),n.h=e,n.i=t}).box("trak",Us).V("tkhd",function(e){var t=e.reader;e=e.version,1==e?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.W();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.Fa(),t.Fa(),t.Fa(),t.Fa(),i.push(n)}).box("mdia",Us).V("mdhd",function(e){e=to(e.reader,e.version),r.push(e.timescale)}).box("minf",Us).box("stbl",Us).V("stsd",Bs).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Fs).box("sinf",Us).box("frma",function(e){e=ro(e.reader).codec,Cv.has(e)&&(n.g=Cv.get(e))}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new Le(2,2,2010);this.g==wv&&J("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(e,t){n.j.set(e,r[t])})},Tv.prototype.parse=function(e){var t=this;if(this.g==wv)return[];var n=[],i=0,r=[];return(new Ps).box("moof",function(e){i=e.start,r=[],Us(e)}).box("traf",function(e){r.push({baseMediaDecodeTime:null,Yd:t.h,Zd:t.i,mj:[],timescale:9e4}),Us(e)}).V("trun",function(e){var t=r[r.length-1];e=no(e.reader,e.version,e.flags),t.mj.push(e)}).V("tfhd",function(e){var n=r[r.length-1];e=Ja(e.reader,e.flags),n.Yd=e.Yd||t.h,n.Zd=e.Zd||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).V("tfdt",function(e){var t=r[r.length-1];e=eo(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var s=i-e.start-8,a=e.reader.Ua(),o=d(r),l=o.next();!l.done;l=o.next())l=l.value,null===l.baseMediaDecodeTime?J("Unable to find base media decode time for CEA captions!"):(e.reader.seek(a),_v(t,e.reader,l.baseMediaDecodeTime,l.timescale,l.Yd,l.Zd,s,l.mj,n))}).parse(e,!1),n},X("shaka.cea.Mp4CeaParser",Tv);var wv=0,Sv=1,Ev=2,Av=3,Cv=(new Map).set("avc1",Sv).set("avc3",Sv).set("dvav",Sv).set("dva1",Sv).set("hev1",Ev).set("hvc1",Ev).set("dvh1",Ev).set("dvhe",Ev).set("vvc1",Av).set("vvi1",Av).set("dvc1",Av).set("dvi1",Av);function Iv(){this.g=null}function xv(e){var t=0,n=Oe(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var s=De(n,e,r);t.push({type:i,value:s}),e+=r}n=t}return n}function kv(e){return e=et(kn(e)),e=xv(e).filter(function(e){return e.type===Dv})[0],e?(e=Ge(e.value,!0),(e=Sn(e,"WRMHEADER"))?e:null):null}function Mv(e){try{var t=kv(e);if(t)e:{for(var n=d(Dn(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var s=d(r.children),a=s.next();!a.done;a=s.next()){var o=a.value;if("LA_URL"==o.tagName){var l=kn(o);break e}}}l=""}else l="";return l}catch(u){return""}}en("video/mp4",function(){return new Tv}),Iv.prototype.init=function(){},Iv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Rl;var t=[];if(e=De(e),!Bl(e))return t;e=this.g.parse(e);var n=e.ae(),i=e.tf();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=d(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&null!=i.time)for(var r=d(bv(i.data)),s=r.next();!s.done;s=r.next())t.push({packet:s.value,pts:i.time});return t},X("shaka.cea.TsCeaParser",Iv),en("video/mp2t",function(){return new Iv});var Dv=1;function Rv(e,t,n){var i=Pv(e),r=null;e=[];var s=[],a=null,o=new Set(i.map(function(e){return e.keyId}));o.delete(null);var l="cenc";if(1<o.size)throw new Le(2,4,4010);if(!t){if(s=i.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Nd}),1<s.length)throw new Le(2,4,4050);s.length&&(a=Bv(s[0])),(s=i.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Nd}))&&s.encryptionScheme&&(l=s.encryptionScheme),s=i.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Nd?(r=e.init||r,!1):"urn:mpeg:dash:sea:2012"!=e.Nd}),s.length&&(e=Lv(r,l,s,n,o),0==e.length&&(e=[st("",l,r)]))}if(i.length&&!a&&(t||!s.length))for(e=[],t=d(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,"org.w3.clearkey"!=n&&e.push(st(n,l,r));if(o=Array.from(o)[0]||null)for(l=d(e),t=l.next();!t.done;t=l.next())for(t=d(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=o;return{Ii:o,Gn:r,drmInfos:e,Ag:a,Ni:!0}}function Ov(e,t,n,i){var r=Rv(e,n,i);if(t.Ni)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Ni=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return r.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new Le(2,4,4008);return r.Ii||t.Ii}function Nv(e){var t=On(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=kn(t)))return t;if((t=On(e.node,"urn:microsoft:playready","pro"))&&kn(t))return Mv(t);if((e=On(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=kn(e))){t=et(e),e=8,t=Oe(t);var n=t.getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),e=De(t,e+4),e=Ze(e),e=Sn("<pro>"+e+"</pro>"),Mv(e)}return""}function Lv(e,t,n,i,r){var s=[];n=d(n);for(var a=n.next();!a.done;a=n.next()){a=a.value;var o=i[a.Nd];if(o){var l;if((l=On(a.node,"urn:microsoft:playready","pro"))&&kn(l)){l=kn(l),l=et(l);var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);l=[{initData:Ks(l,u,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else l=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.Nd){u=a;var c=r;if(0==c.size)u=null;else{var h=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),p=new Uint8Array([]);u=[{initData:Ks(p,h,c,1),initDataType:"cenc",keyId:u.keyId}]}}l=st(o,t,a.init||e||l||u),(o=Fv.get(o))&&(l.licenseServerUri=o(a)),s.push(l)}}return s}function Pv(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next())(n=Uv(n.value))&&t.push(n);return t}function Uv(e){var t=e.attributes.schemeIdUri,n=Ln(e,"urn:mpeg:cenc:2013","default_KID"),i=Pn(e,"urn:mpeg:cenc:2013","pssh").map(Mn),r=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Le(2,4,4009);var s=[];try{s=i.map(function(e){return{initDataType:"cenc",initData:et(e),keyId:null}})}catch(a){throw new Le(2,4,4007)}return{node:e,Nd:t,keyId:n,init:0<s.length?s:null,encryptionScheme:r}}function Bv(t){if(!e.crypto||!e.crypto.subtle)throw J("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Le(2,4,4042);var n=On(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new Le(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new Le(2,4,4051);if(n=On(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!n)throw new Le(2,4,4051);if(t=n.attributes.IV,n=Ye(n.attributes.keyUriTemplate),!t||!n)throw new Le(2,4,4051);if(t=tt(t.substr(2)),16!=t.byteLength)throw new Le(2,4,4048);return{Cl:n,iv:t}}var Fv=(new Map).set("com.apple.fps",function(t){if("apple"===e.shakaMediaKeysPolyfill)throw new Le(2,4,4054);return(t=On(t.node,"https://dashif.org/CPS","Laurl"))&&(t=kn(t))?t:""}).set("com.widevine.alpha",function(e){var t=On(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=kn(t))?t:(e=On(e.node,"urn:microsoft","laurl"))&&Ye(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Nv).set("com.microsoft.playready.recommendation",Nv).set("com.microsoft.playready.software",Nv).set("com.microsoft.playready.hardware",Nv).set("org.w3.clearkey",function(e){var t=On(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=kn(t))?t:(e=On(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=kn(e))?e:""});function jv(t,n,i,r,s,a){var o=(new Map).set("RepresentationID",n).set("Number",i).set("SubNumber",r).set("Bandwidth",s).set("Time",a);return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,i,r){if("$$"==t)return"$";var s=o.get(n);if(null==s)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&"bigint"!=typeof s&&(.2<=Math.abs(s-Math.round(s))&&J("Calculated $Time$ values must be close to integers"),s=Math.round(s)),r){case void 0:case"d":case"i":case"u":t=s.toString();break;case"o":t=s.toString(8);break;case"x":t=s.toString(16);break;case"X":t=s.toString(16).toUpperCase();break;default:t=s.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t})}function Vv(e,t){var n=zv(e,t,"timescale"),i=1;n&&(i=Hn(n)||1),n=zv(e,t,"duration");var r=(n=Hn(n||""))?n/i:null,s=zv(e,t,"startNumber"),a=Number(zv(e,t,"presentationTimeOffset"))||0,o=zn(s||"");if(null!=s&&null!=o||(o=1),s=null,t=Gv(e,t,"SegmentTimeline")){t=xn(t,"S"),s=i,e=e.va.duration||1/0;for(var l=o,u=[],c=-a,d=0;d<t.length;++d){var h=t[d],p=t[d+1],f=Nn(h,"t",zn),g=Nn(h,"d",zn),m=Nn(h,"r",Vn);if(h=Nn(h,"k",Vn)||0,null!=f&&(f-=a),g){if(f=null!=f?f:c,m=m||0,0>m)if(p){if(p=Nn(p,"t",zn),null==p)break;if(f>=p)break;m=Math.ceil((p-f)/g)-1}else{if(1/0==e)break;if(f/s>=e)break;m=Math.ceil((e*s-f)/g)-1}for(0<u.length&&f!=c&&(u[u.length-1].end=f/s),p=0;p<=m;++p)c=f+g,u.push({start:f/s,end:c/s,ni:f,ec:h,cm:u.length+l}),f=c}}s=u}return{timescale:i,hg:n,mb:r,Be:o,fc:a/i||0,mi:a,timeline:s}}function Hv(e,t){return[t(e.M),t(e.ua),t(e.za)].filter(lr)}function zv(e,t,n){t=Hv(e,t),e=null,t=d(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Gv(e,t,n){t=Hv(e,t),e=null,t=d(t);for(var i=t.next();!i.done&&!(e=Rn(i.value,n));i=t.next());return e}function qv(e,t,n,i,r,s){for(var a=Ln(e,"http://www.w3.org/1999/xlink","href"),o=Ln(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=d(Object.keys(e.attributes)),u=l.next();!u.done;u=l.next()){u=u.value;var c=u.split(":"),h=En("http://www.w3.org/1999/xlink");c[0]==h&&delete e.attributes[u]}if(5<=s)return ls(new Le(2,4,4028));if("onLoad"!=o)return ls(new Le(2,4,4027));var p=rt([i],[a]);return r.request(0,bs(p,t)).ab(function(i){if(i=wn(i.data,e.tagName),!i)return ls(new Le(2,4,4001,a));for(e.children=[];i.children.length;){var o=i.children.shift();e.children.push(o)}o=d(Object.keys(i.attributes));for(var l=o.next();!l.done;l=o.next())l=l.value,e.attributes[l]=i.attributes[l];return Wv(e,t,n,p[0],r,s+1)})}function Wv(e,t,n,i,r,s){if(s=void 0===s?0:s,Ln(e,"http://www.w3.org/1999/xlink","href")){var a=qv(e,t,n,i,r,s);return n&&(a=a.ab(void 0,function(){return Wv(e,t,n,i,r,s)})),a}a=[];for(var o=d(In(e)),l=o.next(),u={};!l.done;u={Vd:void 0},l=o.next())u.Vd=l.value,"urn:mpeg:dash:resolve-to-zero:2013"==Ln(u.Vd,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Vd}}(u)):"SegmentTimeline"!=u.Vd.tagName&&a.push(Wv(u.Vd,t,n,i,r,s));return hs(a).ab(function(){return e})}function Xv(e,t,n,i,r,s,a){var o,l=(new Ps).V("sidx",function(e){o=Kv(t,i,r,s,a,n,e)});if(e&&l.parse(e),o)return o;throw new Le(2,3,3004)}function Kv(e,t,n,i,r,s,a){var o=[];a.reader.skip(4);var l=a.reader.W();if(0==l)throw new Le(2,3,3005);if(0==a.version)var u=a.reader.W(),c=a.reader.W();else u=a.reader.Ld(),c=a.reader.Ld();a.reader.skip(2);var d=a.reader.Fa();for(e=e+a.size+c,c=0;c<d;c++){var h=a.reader.W(),p=(2147483648&h)>>>31;h&=2147483647;var f=a.reader.W();if(a.reader.skip(4),1==p)throw new Le(2,3,3006);o.push(new qo(u/l+n,(u+f)/l+n,function(){return s},e,e+h-1,t,n,i,r)),u+=f,e+=h}return a.parser.stop(),o}function Yv(e){this.h=Oe(e),this.g=new Os(this.h,0)}function $v(e){var t=Qv(e);if(7<t.length)throw new Le(2,3,3002);var n=0;t=d(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Qv(e);e:{i=d(Zv);for(var r=i.next();!r.done;r=i.next())if(ke(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Ua();else{if(8==t.length&&224&t[1])throw new Le(2,3,3001);for(r=i=0;r<t.length;r++){var s=t[r];i=0==r?s&(1<<8-t.length)-1:256*i+s}t=i}return t=e.g.Ua()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ua(),i=Oe(e.h,e.g.Ua(),t),e.g.skip(t),new Jv(n,i)}function Qv(e){var t=e.g.Ua(),n=e.g.aa();if(0==n)throw new Le(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),De(e.h,t,n)}Yv.prototype.Oa=function(){return this.g.Oa()};var Zv=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Jv(e,t){this.id=e,this.g=t}function eb(e){if(8<e.g.byteLength)throw new Le(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Le(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function tb(e,t,n,i,r,s,a,o,l){function u(){return r}var c=[];e=new Yv(e.g);for(var d=null,h=null;e.Oa();){var p=$v(e);if(187==p.id){var f=nb(p);f&&(p=n*f.rm,f=t+f.Ul,null!=d&&c.push(new qo(d+a,p+a,u,h,f-1,s,a,o,l)),d=p,h=f)}}return null!=d&&c.push(new qo(d+a,i+a,u,h,null,s,a,o,l)),c}function nb(e){var t=new Yv(e.g);if(e=$v(t),179!=e.id)throw new Le(2,3,3013);if(e=eb(e),t=$v(t),183!=t.id)throw new Le(2,3,3012);t=new Yv(t.g);for(var n=0;t.Oa();){var i=$v(t);if(241==i.id){n=eb(i);break}}return{rm:e,Ul:n}}function ib(e,t,n){if(t=Gv(e,t,"Initialization"),!t)return null;var i=e.M.jb(),r=t.attributes.sourceURL;r&&(i=rt(i,[Ye(r)],e.Ob())),r=0;var s=null;return(t=Nn(t,"range",jn))&&(r=t.start,s=t.end),n=new zo(function(){return i},r,s,cb(e),null,null,n,e.ua.encrypted),n.codecs=e.M.codecs,n.mimeType=e.M.mimeType,e.va&&(n.g=e.va.start+e.va.duration),n}function rb(e,t,n){var i=Number(zv(e,ab,"presentationTimeOffset"))||0,r=zv(e,ab,"timescale"),s=1;r&&(s=Hn(r)||1);var a=i/s||0,o=ib(e,ab,n);lb(e,o);var l=Tn(e);return{endTime:-1,timeline:-1,Zc:function(){var e=Gv(l,ab,"RepresentationIndex"),n=l.M.jb();return e&&(e=Ye(e.attributes.sourceURL))&&(n=rt(n,[e],l.Ob())),e=ob(l),sb(l,t,o,n,e.start,e.end,a)},timescale:s}}function sb(e,t,n,i,r,s,a){var o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,E,A,C;return U(function(I){if(1==I.g)return o=e.presentationTimeline,l=!e.qc||!e.va.Zi,u=e.va.start,c=e.va.duration,h=e.M.mimeType.split("/")[1],p=t,f=null,g=[p(i,r,s,!1),"webm"==h?p(n.S(),n.startByte,n.endByte,!0):null],p=null,S(I,Promise.all(g),2);if(m=I.h,y=m[0],v=m[1]||null,b=null,T=u-a,_=u,w=c?u+c:1/0,"mp4"==h)var x=Xv(y,r,i,n,T,_,w);else{x=y;var k=new Yv(v);if(440786851!=$v(k).id)throw new Le(2,3,3008);var M=$v(k);if(408125543!=M.id)throw new Le(2,3,3009);k=M.g.byteOffset,M=new Yv(M.g);for(var D=null;M.Oa();){var R=$v(M);if(357149030==R.id){D=R;break}}if(!D)throw new Le(2,3,3010);for(D=new Yv(D.g),R=1e6,M=null;D.Oa();){var O=$v(D);if(2807729==O.id)R=eb(O);else if(17545==O.id)if(4==O.g.byteLength)M=O.g.getFloat32(0);else{if(8!=O.g.byteLength)throw new Le(2,3,3003);M=O.g.getFloat64(0)}}if(null==M)throw new Le(2,3,3011);if(D=R/1e9,M*=D,x=$v(new Yv(x)),475249515!=x.id)throw new Le(2,3,3007);x=tb(x,k,D,M,i,n,T,_,w)}for(b=x,E=d(b),A=E.next();!A.done;A=E.next())C=A.value,C.codecs=e.M.codecs,C.mimeType=e.M.mimeType,C.bandwidth=e.bandwidth;return o.re(b),f=new ic(b),l&&f.xd(_,w,!0),I.return(f)})}function ab(e){return e.Od}function ob(e){var t=Gv(e,ab,"RepresentationIndex");return e=zv(e,ab,"indexRange"),e=jn(e||""),t&&(e=Nn(t,"range",jn,e)),e}function lb(e,t){if(ub(e,t),!ob(e))throw new Le(2,4,4002)}function ub(e,t){var n=e.M.mimeType.split("/")[1];if(e.M.contentType!=ct&&"mp4"!=n&&"webm"!=n)throw new Le(2,4,4006);if("webm"==n&&!t)throw new Le(2,4,4005)}function cb(e){var t=e.M;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Kf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ua.label||null,roles:e.roles||null,language:e.ua.language||null}}function db(e,t,n){var i=ib(e,hb,n),r=pb(e);if(!r.mb&&!r.timeline&&1<r.Fd.length)throw new Le(2,4,4002);if(!r.mb&&!e.va.duration&&!r.timeline&&1==r.Fd.length)throw new Le(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new Le(2,4,4002);var s=null,a=null;e.za.id&&e.M.id&&(a=t.get(e.za.id+","+e.M.id))&&(s=a.segmentIndex);var o=fb(e.va.start,e.va.duration,e.M.jb,r,i,n,e.M.mimeType,e.M.codecs,e.bandwidth,e.Ob);return t=!s,s?s.pe(o,e.presentationTimeline.Kb()):s=new ic(o),e.presentationTimeline.re(o),e.qc&&e.va.Zi||s.xd(e.va.start,e.va.duration?e.va.start+e.va.duration:1/0,t),a&&(a.segmentIndex=s),{endTime:-1,timeline:-1,Zc:function(){return s&&0!=s.getNumReferences()||s.Ff(o),Promise.resolve(s)},timescale:r.timescale}}function hb(e){return e.Ac}function pb(e){var t=gb(e);e=Vv(e,hb);var n=e.Be;0==n&&(n=1);var i=0;return e.mb?i=e.mb*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{mb:e.mb,startTime:i,Be:n,fc:e.fc,timescale:e.timescale,timeline:e.timeline,Fd:t}}function fb(e,t,n,i,r,s,a,o,l,u){var c=i.Fd.length;i.timeline&&i.timeline.length!=i.Fd.length&&(c=Math.min(i.timeline.length,i.Fd.length));for(var d=e-i.fc,h=t?e+t:1/0,p=[],f=i.startTime,g={},m=0;m<c;g={jg:void 0,Yf:void 0},m++){g.Yf=i.Fd[m];var y=f;f=void 0,f=null!=i.mb?y+i.mb:i.timeline?i.timeline[m].end:y+t,g.jg=null,g=new qo(e+y,e+f,function(e){return function(){return null==e.jg&&(e.jg=rt(n(),[e.Yf.Jl],u())),e.jg}}(g),g.Yf.start,g.Yf.end,r,d,e,h,[],"",null,null,Xo,s),g.codecs=o,g.mimeType=a,g.bandwidth=l,p.push(g)}return p}function gb(e){return[e.M.Ac,e.ua.Ac,e.za.Ac].filter(lr).map(function(e){return xn(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){t.attributes.indexRange&&!e.rh&&(e.rh=!0);var n=Ye(t.attributes.media);return t=Nn(t,"mediaRange",jn,{start:0,end:null}),{Jl:n,start:t.start,end:t.end}})}function mb(e,t,n,i,r,s,a,o,l,u){l||e.M.vf||(e.M.vf=zv(e,yb,"initialization"));var c=e.M.vf?_b(e,a):null,h=vb(e);bb(h);var p=Tn(e);if(h.je)return ub(e,c),{endTime:-1,timeline:-1,Zc:function(){var e=jv(h.je,p.M.originalId,null,null,p.bandwidth||null,null);return e=rt(p.M.jb(),[e]),sb(p,t,c,e,0,null,h.fc)},timescale:h.timescale};if(h.mb)return i||"image"===e.ua.contentType||"text"===e.ua.contentType||(i=e.va.start,u=e.za.id,n=e.va.duration,u=(u=null!=u&&s.get(u)||n)?i+u:1/0,e.presentationTimeline.Ch(h.mb),e.presentationTimeline.kj(i,u)),{endTime:-1,timeline:-1,Zc:function(){return Tb(p,h,r,c,s,a,o,e.M.Zf)},timescale:h.timescale};var f=null;i=i=null,e.za.id&&e.M.id&&(i=e.za.id+","+e.M.id,i=n.get(i))&&(f=i.segmentIndex);var g=e.va.start,m=e.va.duration?g+e.va.duration:1/0;if(f)u=f,Sb(u,h,g,m,c),u.hb(e.presentationTimeline.Kb());else{if(n=0,l=-1,null!=e.za.id&&null!=e.M.id){var y=u.get(e.za.id);if(y)l=y.timeline;else for(u=d(u.values()),y=u.next();!y.done;y=u.next()){if(y=y.value,Math.abs(h.fc-y.endTime)<=ht&&y.Lh.includes(e.M.id)){l=y.timeline;break}y.timeline>=n&&(n=y.timeline+1)}}-1==l&&(l=n),f=new wb(h,e.M.originalId,e.bandwidth,e.M.jb,e.Ob,g,m,c,a,e.M.Zf,l)}return h.timeline&&"image"!==e.ua.contentType&&"text"!==e.ua.contentType&&e.presentationTimeline.lj(f.h?f.h.timeline:[],g),i&&e.qc&&(i.segmentIndex=f),i=(i=(i=h.timeline)&&i[i.length-1])?i.end+h.fc:-1,u=-1,f instanceof wb&&(u=f.hf()),{endTime:i,timeline:u,Zc:function(){return f instanceof wb&&0==f.getNumReferences()&&Sb(f,h,g,m,c),Promise.resolve(f)},timescale:h.timescale}}function yb(e){return e.Pc}function vb(e){var t=Vv(e,yb),n=zv(e,yb,"media"),i=zv(e,yb,"index"),r=zv(e,yb,"k"),s=0;return r&&(s=parseInt(r,10)),{hg:t.hg,mb:t.mb,timescale:t.timescale,Be:t.Be,fc:t.fc,mi:t.mi,timeline:t.timeline,Nc:n&&Ye(n),je:i,mimeType:e.M.mimeType,codecs:e.M.codecs,bandwidth:e.bandwidth,Kl:s}}function bb(e){var t=e.je?1:0;if(t+=e.timeline?1:0,t+=e.mb?1:0,0==t)throw new Le(2,4,4002);if(1!=t&&(e.je&&(e.timeline=null),e.hg=null,e.mb=null),!e.je&&!e.Nc)throw new Le(2,4,4002)}function Tb(t,n,i,r,s,a,o,l){function u(i){var s=i-v,o=s*y,u=n.hg,c=s*u;"BigInt"in e&&c>Number.MAX_SAFE_INTEGER&&(c=BigInt(s)*BigInt(u)),o+=f,s=o+y,u=Math.min(s,h());var d=[],p=n.Kl;if(p)for(var g=(u-o)/p,m={},A=0;A<p;m={Mj:void 0},A++){var C=o+g*A,I=C+g;m.Mj=A+1,m=new qo(C,I,function(e){return function(){var t=jv(b,_,i,e.Mj,T,c);return rt(w(),[t],S())}}(m),0,null,r,E,f,h(),[],"",null,null,Xo,a),m.codecs=t.M.codecs,m.mimeType=t.M.mimeType,0==l?0<A&&m.Dd():0!=A%l&&m.Dd(),d.push(m)}return o=new qo(o,u,function(){if(p)return[];var e=jv(b,_,i,null,T,c);return rt(w(),[e],S())},0,null,r,E,f,h(),d,"",null,null,Xo,a,0<d.length),o.codecs=t.M.codecs,o.mimeType=t.M.mimeType,o.bandwidth=t.bandwidth,o.j=s,o}function c(){var e=[Math.max(p.Kb(),f),Math.min(p.Gc(),h())].map(function(e){return e-f});return e=[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1],t.M.wb&&e[1]++,e.map(function(e){return e+v})}function h(){var e=null!=g&&s.get(g)||m;return e?f+e:1/0}var p=t.presentationTimeline,f=t.va.start,g=t.za.id,m=t.va.duration,y=n.mb,v=n.Be,b=n.Nc,T=t.bandwidth||null,_=t.M.id,w=t.M.jb,S=t.Ob,E=f-n.fc,A=c();i=t.qc?Math.max(A[0],A[1]-i+1):A[0],o=o||A[1],A=[];for(var C=i;C<=o;++C){var I=u(C);A.push(I)}var x=new ic(A);if(A=p.Gc()<h(),C=p.T(),A||C){var k=Math.max(i,o+1);i=y,t.M.wb&&(i=.1),x.ig(i,function(){var e=p.Kb();x.hb(e);var t=d(c());t.next(),t=t.next().value;for(var n=[];k<=t;){var i=u(k);n.push(i),k++}return e>h()&&!n.length?null:n})}return Promise.resolve(x)}function _b(e,t){var n=e.M.vf;if(n||(n=zv(e,yb,"initialization")),!n)return null;n=Ye(n);var i=e.M.originalId,r=e.bandwidth||null,s=e.M.jb,a=e.Ob;return t=new zo(function(){var e=jv(n,i,null,null,r,null);return rt(s(),[e],a())},0,null,cb(e),null,null,t,e.ua.encrypted),t.codecs=e.M.codecs,t.mimeType=e.M.mimeType,e.va&&(t.g=e.va.start+e.va.duration),t}function wb(e,t,n,i,r,s,a,o,l,u,c){ic.call(this,[]),this.h=e,this.F=t,this.C=n,this.D=i,this.H=r,this.j=s,this.l=a,this.u=o,this.B=l,this.G=u,this.I=c,Ab(this)}function Sb(e,t,n,i,r){if(Eb(e,r),e.h){if(n=e.h.timeline,e.h.Nc!==t.Nc&&(e.h.Nc=t.Nc),n.length){var s=n[n.length-1];t=t.timeline.filter(function(e){return e.end>s.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,h(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;Ab(e)}function Eb(e,t){if(e.u!==t){e.u=t,e=d(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Wo(n,t)}}function Ab(e){if(e.h&&!e.s){for(var t=[],n=d(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||0>=i.end||t.push(i);e.h.timeline=t,e.hb(e.j)}}function Cb(e,t,n,i,r,s,a,o){return e=jv(e,t,n,s,i||null,r),rt(a(),[e],o()).map(function(e){return e.toString()})}function Ib(e){this.s=null,this.B=e,this.G=new fs,this.i=[],this.h=null,this.m=[],this.C=null,this.F=[],this.D=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}function xb(e,t){var n,i,r,s,a,o,l;return U(function(u){return 1==u.g?(n=rt(e.i,[kb(e,t)]),i=bs(n,e.s.retryParameters),r=e.B.networkingEngine.request(8,i),gs(e.G,r),A(u,2),S(u,r.promise,4)):2!=u.g?(s=u.h,a=ze(s.data),o=JSON.parse(a),1==o.VERSION&&Mb(e,o,s.uri),I(u,0)):(l=x(u))&&7001==l.code?u.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new sr(function(){xb(e,t)}),e.g.X(e.D),void E(u))})}function kb(e,t){if(!e.m.length)return t;t=new he(t);var n=e.C||e.m[0],i=Math.round(e.B.getBandwidthEstimate()),r=t.g;return"DASH"==e.u?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):"HLS"==e.u&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Ie(r)&&me(t,r),t.toString()}function Mb(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new sr(function(){xb(e,i)}),(n=t.TTL)&&(e.D=n),e.g.X(e.D),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Db(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}function Rb(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var i=[],r=d(e.m),s=r.next(),a={};!s.done;a={Hd:void 0},s=r.next())if(a.Hd=s.value,s=t.get(a.Hd))i.push({Hh:a.Hd,location:s});else if(s=e.F.find(function(e){return function(t){return t.Pm==e.Hd}}(a))){var o=t.get(s["BASE-ID"]);o&&(s["URI-REPLACEMENT"].$j?(o=new he(o),fe(o,s["URI-REPLACEMENT"].$j),i.push({Hh:a.Hd,location:o.toString()})):i.push({Hh:a.Hd,location:o}))}for(r=Date.now(),a=d(e.j.keys()),s=a.next();!s.done;s=a.next())s=s.value,o=e.j.get(s),r>o&&e.j.delete(s);if(i=i.filter(function(t){for(var n=d(e.j.keys()),i=n.next();!i.done;i=n.next())if(i.value.includes(new he(t.location).Gb))return!1;return!0}),i.length&&(e.C=i[0].Hh),i=i.map(function(e){return e.location}),!i.length&&e.h)for(r=d(e.h.split(",")),a=r.next();!a.done;a=r.next())(a=t.get(a.value))&&(e.C=e.h,i.push(a));if(!i.length)for(t=d(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:rt(e.i,i)}function Ob(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=this.s=!1,this.m=new Set}function Nb(e,t){var n=[],i=[],r=[],s=[];e=d(e);for(var a=e.next();!a.done;a=e.next()){var o=a.value;a=new Map(o.audioStreams.map(function(e){return[oT(e),e]}));var l=new Map(o.videoStreams.map(function(e){return[aT(e),e]})),u=new Map(o.textStreams.map(function(e){return[lT(e),e]}));if(o=new Map(o.imageStreams.map(function(e){return[uT(e),e]})),t){var c=nT(ct);u.set(lT(c),c),c=nT("image"),o.set(uT(c),c)}n.push(a),i.push(l),r.push(u),s.push(o)}return{zi:n,Xj:i,Sj:r,Wi:s}}function Lb(e){var t,n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,E,A,C,I,x,k,M,D,R;return U(function(O){switch(O.g){case 1:if(t=dt,1==e.length)return O.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ma}).map(function(e){return[oT(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Ea}).map(function(e){return[aT(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.gb}).map(function(e){return[lT(e),e]}))}),s=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.qg}).map(function(e){return[uT(e),e]}))}),a=d(r),o=a.next();!o.done;o=a.next())l=o.value,u=tT(t.gb),l.set(lT(u),u);for(c=d(s),h=c.next();!h.done;h=c.next())p=h.value,f=tT(t.qg),p.set(uT(f),f);return g=new Ob,S(O,Pb(g,[],n,0,Hb,Gb,0),2);case 2:return m=O.h,S(O,Pb(g,[],i,0,Hb,Gb,0),3);case 3:return y=O.h,S(O,Pb(g,[],r,0,Hb,Gb,0),4);case 4:return v=O.h,S(O,Pb(g,[],s,0,Hb,Gb,0),5);case 5:if(b=O.h,T=0,y.length&&m.length)for(C=d(m),I=C.next();!I.done;I=C.next())for(x=I.value,k=d(y),M=k.next();!M.done;M=k.next())D=M.value,R=T++,D.variantIds.push(R),x.variantIds.push(R);else for(_=y.concat(m),w=d(_),E=w.next();!E.done;E=w.next())A=E.value,A.variantIds=[T++];return O.return(y.concat(m).concat(v).concat(b))}})}function Pb(e,t,n,i,r,s,a){var o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,E,A,C,I;return U(function(x){switch(x.g){case 1:for(o=[],l=0;l<n.length;l++)l>=i?o.push(new Set(n[l].values())):o.push(new Set);u=d(t),c=u.next();case 2:if(c.done){x.A(4);break}return h=c.value,S(x,Ub(e,h,n,i,s,o,a),5);case 5:if(p=x.h,!p)throw new Le(2,4,4037);c=u.next(),x.A(2);break;case 4:for(f=d(o),g=f.next();!g.done;g=f.next())for(m=g.value,y=d(m),v=y.next();!v.done;v=y.next())b=v.value,(T=Fb(e,b,n,r,s,o))&&t.push(T);for(_=d(o),w=_.next();!w.done;w=_.next())for(E=w.value,A=d(E),C=A.next(),I={};!C.done;I={ai:void 0},C=A.next())if(I.ai=C.value,!sT(I.ai)&&t.some(function(t){return function(n){return Kb(e,t.ai,n)}}(I)))throw new Le(2,4,4037);return x.return(t)}})}function Ub(e,t,n,i,r,s,a){return U(function(o){return 1==o.g?(qb(e,n,t,0<a),t.matchedStreams?t.segmentIndex?S(o,Bb(t,i+a),2):o.A(2):o.return(!1)):(jb(t,i,r,s,a),o.return(!0))})}function Bb(e,t){var n,i,r,s,a,o;return U(function(l){if(1==l.g){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)s=i[r],n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex()),s.dependencyStream&&!s.dependencyStream.segmentIndex&&n.push(s.dependencyStream.createSegmentIndex());return S(l,Promise.all(n),2)}if(e.segmentIndex instanceof oc)for(a=t;a<i.length;a++)o=i[a],o.segmentIndex&&e.segmentIndex.h.push(o.segmentIndex);E(l)})}function Fb(e,t,n,i,r,s){if(sT(t))return null;var a=i(t);return qb(e,n,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return U(function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new oc,S(e,Bb(a,0),0))})}),a.matchedStreams&&a.matchedStreams.length?(jb(a,0,r,s,0),a):null}function jb(e,t,n,i,r){var s=e.matchedStreams;for(t+=r;t<s.length;t++){var a=s[t];n(e,a);var o=!0;if("audio"==e.type&&0==Tt(e.language,a.language)&&(o=!1),o&&(i[t-r].delete(a),a.fullMimeTypes))for(a=d(a.fullMimeTypes.values()),o=a.next();!o.done;o=a.next())e.fullMimeTypes.add(o.value)}}function Vb(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=d(t.matchedStreams),n=e.next();!n.done;n=e.next())n=n.value,n.segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Hb(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function zb(e,t){function n(e,t){e||(e=[]),t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=d(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(null==e.originalId?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=Qr(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new Le(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=d(t.closedCaptions),r=i.next();!r.done;r=i.next()){var s=d(r.value);r=s.next().value,s=s.next().value,e.closedCaptions.set(r,s)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Vb(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var t=new oc,n=d(e.trickModeVideo.matchedStreams),i=n.next();!i.done;i=n.next())t.h.push(i.value.segmentIndex);return e.trickModeVideo.segmentIndex=t,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),zb(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),zb(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=Vb(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var t=new oc,n=d(e.dependencyStream.matchedStreams),i=n.next();!i.done;i=n.next())t.h.push(i.value.segmentIndex);return e.dependencyStream.segmentIndex=t,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),zb(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),zb(e.dependencyStream,t))}function Gb(e,t){var n=e.roles;n||(n=[]);for(var i=d(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=d(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,h(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=d(t.closedCaptions),n=t.next();!n.done;n=t.next())i=d(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function qb(e,t,n,i){i=void 0!==i&&i?n.matchedStreams:[],t=d(t);for(var r=t.next();!r.done;r=t.next()){if(r=Wb(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function Wb(e,t,n){var i={audio:oT,video:aT,text:lT,image:uT}[n.type],r=null,s=i(n);if(t.has(s))r=t.get(s);else{s={audio:function(t,n){return Kb(e,t,n)},video:function(t,n){return Kb(e,t,n)},text:Yb,image:$b}[n.type];for(var a={audio:Qb,video:Zb,text:Jb,image:eT}[n.type],o=d(t.values()),l=o.next();!l.done;l=o.next())l=l.value,!s(n,l)||n.fastSwitching!=l.fastSwitching||r&&!a(n,r,l)||(r=l)}return e.u&&!sT(r)&&t.delete(i(r)),r}function Xb(e,t){return e.mimeType==t.mimeType&&cT(e.codecs)===cT(t.codecs)}function Kb(e,t,n){return!(!Xb(t,n)&&!e.s||t.drmInfos&&!$r(t.drmInfos,n.drmInfos))}function Yb(e,t){return!t.language||e.forced===t.forced&&0!=Tt(e.language,t.language)&&t.kind==e.kind}function $b(){return!0}function Qb(e,t,n){var i=Xb(e,t),r=Xb(e,n);if(i&&!r)return!1;if(!i&&r)return!0;if(i=Tt(e.language,t.language),r=Tt(e.language,n.language),r>i)return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(t){return e.roles.includes(t)}),r=n.roles.filter(function(t){return e.roles.includes(t)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(i=iT(e.channelsCount,t.channelsCount,n.channelsCount),i==dT||i!=pT&&(i=iT(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==dT||i!=pT&&!(!e.bandwidth||rT(e.bandwidth,t.bandwidth,n.bandwidth)!=dT)))}function Zb(e,t,n){var i=Xb(e,t),r=Xb(e,n);if(i&&!r)return!1;if(!i&&r)return!0;if(i=iT(e.width*e.height,t.width*t.height,n.width*n.height),i==dT)return!0;if(i==pT)return!1;if(e.frameRate){if(i=iT(e.frameRate,t.frameRate,n.frameRate),i==dT)return!0;if(i==pT)return!1}return!(!e.bandwidth||rT(e.bandwidth,t.bandwidth,n.bandwidth)!=dT)}function Jb(e,t,n){var i=Tt(e.language,t.language),r=Tt(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(t){return e.roles.includes(t)}),r=n.roles.filter(function(t){return e.roles.includes(t)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function eT(e,t,n){return iT(e.width*e.height,t.width*t.height,n.width*n.height)==dT}function tT(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function nT(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ic([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function iT(e,t,n){if(t==e&&e!=n)return pT;if(n==e&&e!=t)return dT;if(t>e){if(n<=e||n-e<t-e)return dT;if(n-e>t-e)return pT}else{if(n>e)return pT;if(e-n<e-t)return dT;if(e-n>e-t)return pT}return hT}function rT(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?dT:t<e?pT:hT}function sT(e){switch(e.type){case ct:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function aT(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,cT(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function oT(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,cT(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function lT(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function uT(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function cT(e){if(!fT.has(e)){var t=Vi(e);fT.set(e,t)}return fT.get(e)}b(wb,ic),i=wb.prototype,i.getNumReferences=function(){return this.h?this.h.timeline.length:0},i.release=function(){ic.prototype.release.call(this),this.h=null},i.hb=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length;i+=1){if(!(n[i].end+this.j<=e))break;t+=1}0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},i.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],s=r.start+this.j;if(r=i<n?t[i+1].start+this.j:1/0===this.l?r.end+this.j:this.l,e>=s&&e<r)return i+this.i}return null},i.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.timeline[e],r=i.cm,s=i.ni+this.h.mi;n=this.j-this.h.fc;var a=this.j+i.end,o=a;e===this.getNumReferences()-1&&1/0!==this.l&&(o=.1<Math.abs(o-this.l)?Math.min(o,this.l):this.l);for(var l=this.h.codecs,u=this.h.mimeType,c=this.h.bandwidth,d=[],h=(i.end-i.start)/i.ec,p={},f=0;f<i.ec;p={kg:void 0,Nj:void 0},f++){var g=i.start+h*f,m=g+h;p.Nj=f+1,p.kg=null,p=new qo(this.j+g,this.j+m,function(e){return function(){return t.h?(null==e.kg&&(e.kg=Cb(t.h.Nc,t.F,r,t.C,s,e.Nj,t.D,t.H)),e.kg):[]}}(p),0,null,this.u,n,this.j,this.l,[],"",null,null,Xo,this.B),p.codecs=l,p.mimeType=u,p.bandwidth=c,0==this.G?0<f&&p.Dd():0!=f%this.G&&p.Dd(),d.push(p)}n=new qo(this.j+i.start,o,function(){return 0<i.ec||!t.h?[]:Cb(t.h.Nc,t.F,r,t.C,s,null,t.D,t.H)},0,null,this.u,n,this.j,this.l,d,"",null,null,Xo,this.B,0<i.ec),n.codecs=l,n.mimeType=u,n.j=a,n.bandwidth=c,this.g[e]=n}return n},i.Hb=function(e){Ab(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}},i.hf=function(){return this.I},Ib.prototype.configure=function(e){this.s=e},Ib.prototype.destroy=function(){return this.B=this.s=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},Ib.prototype.setManifestType=function(e){this.u=e},Ib.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},i=Ob.prototype,i.release=function(){for(var e=d(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=this.s=!1,this.m.clear()},i.jl=function(){return this.l},i.mh=function(){return this.j.slice()},i.Hk=function(){return this.i},i.Ji=function(e,t){if(e){if("audio"==e.type)for(var n=d(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(t){return t!==e});else if("video"==e.type)for(n=d(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(t){return t!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(t){return t!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(t){return t!==e}));else if(e.type==ct)for(n=d(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(t){return t!==e});else if("image"==e.type)for(n=d(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(t){return t!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}},i.Hg=function(e,t,n){n=void 0!==n&&n;var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,A,C,I,x,k,M,D,R,O,N,L,P,B,F=this;return U(function(U){if(1==U.g){if(i=dt,!t&&1==e.length)return r=Nb(e,!1),s=r.zi,a=r.Xj,o=r.Sj,l=r.Wi,F.h=Array.from(s[0].values()),F.g=Array.from(a[0].values()),F.j=Array.from(o[0].values()),F.i=Array.from(l[0].values()),U.A(2);for(u=n?F.m.size:0,c=-1,h=0;h<e.length;h++)p=e[h],F.m.has(p.id)||(F.m.add(p.id),-1==c&&(c=h));return-1==c?U.return():(f=Nb(e,!0),g=f.zi,m=f.Xj,y=f.Sj,v=f.Wi,S(U,Promise.all([Pb(F,F.h,g,c,Vb,zb,u),Pb(F,F.g,m,c,Vb,zb,u),Pb(F,F.j,y,c,Vb,zb,u),Pb(F,F.i,v,c,Vb,zb,u)]),2))}if(b=0,T=[],F.g.length&&F.h.length)for(k=d(F.h),M=k.next();!M.done;M=k.next())for(D=M.value,R=d(F.g),O=R.next();!O.done;O=R.next())N=O.value,L=Qr(D.drmInfos,N.drmInfos),D.drmInfos.length&&N.drmInfos.length&&!L.length||(P=(D.bandwidth||0)+(N.bandwidth||0),D.dependencyStream&&(P+=D.dependencyStream.bandwidth||0),N.dependencyStream&&(P+=N.dependencyStream.bandwidth||0),B=b++,T.push({id:B,language:D.language,disabledUntilTime:0,primary:D.primary,audio:D,video:N,bandwidth:P,drmInfos:L,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(_=F.g.length?F.g:F.h,w=d(_),A=w.next();!A.done;A=w.next())C=A.value,I=b++,x=C.bandwidth||0,C.dependencyStream&&(x+=C.dependencyStream.bandwidth||0),T.push({id:I,language:C.language,disabledUntilTime:0,primary:C.primary,audio:C.type==i.ma?C:null,video:C.type==i.Ea?C:null,bandwidth:x,drmInfos:C.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});F.l=T,E(U)})},i.Bj=function(e){this.s=e},i.Hj=function(e){this.u=e},X("shaka.util.PeriodCombiner",Ob),Ob.prototype.setUseStreamOnce=Ob.prototype.Hj,Ob.prototype.setAllowMultiTypeVariants=Ob.prototype.Bj,Ob.prototype.combinePeriods=Ob.prototype.Hg,Ob.prototype.deleteStream=Ob.prototype.Ji,Ob.prototype.getImageStreams=Ob.prototype.Hk,Ob.prototype.getTextStreams=Ob.prototype.mh,Ob.prototype.getVariants=Ob.prototype.jl;var dT=1,hT=0,pT=-1,fT=new Map;function gT(e,t){var n=new DOMParser,i=yT.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(r){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function mT(e,t){try{var n=qe(e);return gT(n,t)}catch(i){return null}}var yT=new Ue(function(){if("undefined"!==typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function vT(){var e=this;this.j=this.g=null,this.B=[],this.i=null,this.sa=1,this.G=[],this.l={Hf:"",type:"",profiles:[],vc:null,wb:0,jb:null,ue:0},this.u=new Map,this.C=new Map,this.s=new Map,this.D=new Map,this.oa=new Map,this.m=new Ob,this.J=0,this.ra=new kt(5),this.K=new sr(function(){e.I&&!e.g.continueLoadingWhenPaused&&(e.H.Da(e.I,"timeupdate"),e.I.paused)?e.H.qa(e.I,"timeupdate",function(){return jT(e)}):jT(e)}),this.O=new fs,this.N=null,this.F=[],this.Z=1/0,this.na=!1,this.h=null,this.L=0,this.P=!1,this.H=new Rt,this.I=null,this.R=!1,this.Y="",this.ba=function(){return!1},this.U=[],this.$=new Set}function bT(e){var t,n,i,r,s,a,o,l,u,c,d;return U(function(h){return 1==h.g?(t=4,n="MPD",i=ZT(e),r=e.B,i.length?(r=i,n="Patch",t=6):1<e.B.length&&e.h&&(s=Rb(e.h,"Location",!0),s.length&&(r=s)),a=bs(r,e.g.retryParameters),o=Date.now(),S(h,QT(e,a,0,{type:t}),2)):3!=h.g?(l=h.h,e.j?(l.uri&&l.uri!=l.originalUri&&!e.B.includes(l.uri)&&e.B.unshift(l.uri),u=new he(l.uri),e.Y=u.g.toString(),S(h,TT(e,l.data,l.uri,n),3)):h.return(0)):(c=Date.now(),d=(c-o)/1e3,e.ra.sample(1,d),e.$.clear(),h.return(d))})}function TT(e,t,n,i){var r,s,a,o,l,u,c,d,h,p;return U(function(f){if(1==f.g){if(r=t,s=e.g.dash.manifestPreprocessor,a=Jd,s!=a){if(Bt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),o=mT(r,i),!o)throw new Le(2,4,4001,n);s(o),r=We(o.outerHTML)}if(l=wn(r,i),!l)throw new Le(2,4,4001,n);return u=e.g.dash.manifestPreprocessorTXml,c=eh,u!=c&&u(l),"Patch"===i?f.return(ST(e,l)):e.g.dash.disableXlinkProcessing?f.return(_T(e,l,n)):(d=e.g.dash.xlinkFailGracefully,h=Wv(l,e.g.retryParameters,d,n,e.j.networkingEngine),gs(e.O,h),S(f,h.promise,2))}return p=f.h,f.return(_T(e,p,n))})}function _T(e,t,n){var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,A,C,I,x,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q,W,X,K,Y,$,Q,Z,J,ee,te,ne,ie,re;return U(function(U){switch(U.g){case 1:for(e.h&&e.h.l.clear(),i=[n],r=[],s=new Map,a=xn(t,"Location"),o=d(a),l=o.next();!l.done;l=o.next())u=l.value,c=u.attributes.serviceLocation,(h=Mn(u))&&(p=rt(i,[h])[0],c&&(e.h?Db(e.h,"Location",c,p):s.set(c,p)),r.push(p));if(e.h?(f=Rb(e.h,"Location",!0),0<f.length&&(i=e.B=f)):r.length&&(i=e.B=r),e.l.Hf=t.attributes.id||"",e.l.ue=Nn(t,"publishTime",Bn)||0,e.G=xn(t,"PatchLocation"),g=Promise.resolve(),(m=Rn(t,"ContentSteering"))&&e.j)for(y=m.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=y):(e.h=new Ib(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=y,(v=Mn(m))&&(Nn(m,"queryBeforeStart",qn,!1)?g=xb(e.h,v):xb(e.h,v))),b=d(s.keys()),T=b.next();!T.done;T=b.next())_=T.value,w=s.get(_),Db(e.h,"Location",_,w);if(A=xn(t,"BaseURL"),C=!1,e.h)for(I=d(A),x=I.next();!x.done;x=I.next())k=x.value,M=k.attributes.serviceLocation,D=Mn(k),M&&D&&(Db(e.h,"BaseURL",M,D),C=!0);if(e.U=null,C&&e.h||(R=A.map(Mn),e.U=rt(i,R)),O=function(){return e.h&&C?Rb(e.h,"BaseURL"):e.U?e.U:[]},e.l.jb=O,N=0,A&&A.length&&(N=Nn(A[0],"availabilityTimeOffset",Gn)||0),e.l.wb=N,e.J=Nn(t,"minimumUpdatePeriod",Fn,-1),L=Nn(t,"availabilityStartTime",Bn),P=Nn(t,"timeShiftBufferDepth",Fn),B=e.g.dash.ignoreSuggestedPresentationDelay,F=null,B||(F=Nn(t,"suggestedPresentationDelay",Fn)),j=e.g.dash.ignoreMaxSegmentDuration,V=null,j||(V=Nn(t,"maxSegmentDuration",Fn)),H=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.R=e.i.presentationTimeline.T()&&"static"==H),e.l.type=H,e.i)for(z=e.i.presentationTimeline,G=z.Kb(),q=d(e.s.values()),W=q.next();!W.done;W=q.next())X=W.value,X.segmentIndex&&X.segmentIndex.hb(G);else K=e.g.dash.ignoreMinBufferTime,Y=0,K||(Y=Nn(t,"minBufferTime",Fn)||0),$=0,$=null!=F?Math.min(F,P||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*Y,P||1/0),z=new Ou(L,$,e.g.dash.autoCorrectDrift);return z.md("static"==H),z.T()&&!isNaN(e.g.availabilityWindowOverride)&&(P=e.g.availabilityWindowOverride),null==P&&(P=1/0),z.ag(P),Q=t.attributes.profiles||"",e.l.profiles=Q.split(","),Z={qc:"static"!=H,presentationTimeline:z,za:null,va:null,ua:null,M:null,bandwidth:0,rh:!1,wb:N,vc:null,profiles:Q.split(","),roles:null,Ob:function(){return""}},S(U,g,2);case 2:return e.L=0,J=MT(e,Z,O,t,!1),ee=J.duration,te=J.periods,("static"!=H||e.R)&&J.Li||z.vb(ee||1/0),e.P&&e.na&&z.Cj(e.Z),z.Ch(V||1),e.P&&e.na&&(ne=null!=F?F:e.g.defaultPresentationDelay,z.Uh(ne)),e.i?(e.i.periodCount=te.length,e.i.gapCount=e.L,S(U,wT(e,te,!1),4)):S(U,e.m.Hg(te,Z.qc),6);case 6:if(e.i={presentationTimeline:z,variants:e.m.l,textStreams:e.m.mh(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:xT(t),nextUrl:kT(t),periodCount:te.length,gapCount:e.L,isLowLatency:e.P,startTime:null},!z.Vj()){U.A(7);break}return ie=xn(t,"UTCTiming"),S(U,XT(e,O,ie),8);case 8:if(re=U.h,!e.j)return U.return();z.Dj(re);case 7:z.Df(),e.m&&!e.i.presentationTimeline.T()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),DT(e),RT(e,te),E(U)}})}function wT(e,t,n){var i;return U(function(r){if(1==r.g)return S(r,e.m.Hg(t,!0,n),2);e.i.variants=e.m.l,i=e.m.mh(),0<i.length&&(e.i.textStreams=i),e.i.imageStreams=e.m.i,e.j.filter(e.i),E(r)})}function ST(e,t){var n,i,r,s,a,o,l,u,c,p,f,g,m,y,v,b,T,_,w,A,C,I,x,k,M,D,R;return U(function(O){if(1==O.g){if(n=t.attributes.mpdId,i=Nn(t,"originalPublishTime",Bn),!n||n!==e.l.Hf||i!==e.l.ue)throw e.G=[],new Le(1,4,4052);for(r=[],s=[],a=new Set,o=d(In(t)),l=o.next();!l.done;l=o.next())if(u=l.value,c=Xn(u.attributes.sel||""),p=c[c.length-1],f=Mn(u)||"","MPD"===p.name)if("mediaPresentationDuration"===p.Dc){g=Mn(u)||"";var N=Fn(g);if(null!=N){e.l.vc=N;for(var L=d(e.u.values()),P=L.next();!P.done;P=L.next())P.value.vc=N}}else if("type"===p.Dc){for(e.i.presentationTimeline.md("static"==f),e.l.type=f,N=d(e.u.values()),L=N.next();!L.done;L=N.next())L.value.qc="dynamic"==f;"static"==f&&(e.J=-1)}else"publishTime"===p.Dc?e.l.ue=Bn(f)||0:null===p.Dc&&"add"===u.tagName&&s.push(u);else if("PatchLocation"===p.name)Kn(e.G,u);else if("Period"===p.name)"add"===u.tagName?s.push(u):"remove"===u.tagName&&p.id&&AT(e,p.id);else if("SegmentTemplate"===p.name){if(L=Xn(u.attributes.sel||""),N=L[L.length-1],N.Dc){L=CT(e,L),P=Mn(u)||"";for(var U=d(L),B=U.next();!B.done;B=U.next())B=e.u.get(B.value),$n(B.M.Pc,u.tagName,N.Dc,P);N=L}else N=[];for(m=N,y=d(m),v=y.next();!v.done;v=y.next())b=v.value,a.add(b)}else if("SegmentTimeline"===p.name||"S"===p.name){for(N=Xn(u.attributes.sel||""),N=CT(e,N),L=d(N),P=L.next();!P.done;P=L.next())P=e.u.get(P.value),P=Gv(P,yb,"SegmentTimeline"),U=xn(P,"S"),Kn(U,u),P.children=U;for(T=N,_=d(T),w=_.next();!w.done;w=_.next())A=w.value,a.add(A)}for(C=d(a),I=C.next();!I.done;I=C.next())x=I.value,IT(e,x);for(k=d(s),M=k.next();!M.done;M=k.next())D=M.value,r.push.apply(r,h(ET(e,D)));return r.length?(e.i.periodCount+=r.length,e.i.gapCount=e.L,S(O,wT(e,r,!0),2)):O.A(2)}"static"==e.l.type&&(R=e.l.vc,e.i.presentationTimeline.vb(R||1/0)),E(O)})}function ET(e,t){return MT(e,{qc:"dynamic"==e.l.type,presentationTimeline:e.i.presentationTimeline,za:null,va:null,ua:null,M:null,bandwidth:0,rh:!1,wb:e.l.wb,profiles:e.l.profiles,vc:e.l.vc,roles:null,Ob:function(){return""}},e.l.jb,t,!0).periods}function AT(e,t){e.i.periodCount--;for(var n=d(e.u.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.u.get(i);Gv(r,yb,"SegmentTimeline").children=[],IT(e,i),e.u.delete(i)}e.F=e.F.filter(function(e){return e!==t})}function CT(e,t){var n="",i="",r=-1,s="";t=d(t);for(var a=t.next();!a.done;a=t.next())a=a.value,"Period"===a.name?n=a.id:"AdaptationSet"===a.name?(i=a.id,null!==a.position&&(r=a.position)):"Representation"===a.name&&(s=a.id);if(t=[],s)t.push(n+","+s);else if(i)for(r=d(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.za.id===n&&e.ua.id===i&&e.M.id&&t.push(n+","+e.M.id);else if(-1<r)for(i=d(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.za.id===n&&e.ua.position===r&&e.M.id&&t.push(n+","+e.M.id);return t}function IT(e,t){var n=e.u.get(t),i=e.s.get(t);i.segmentIndex&&i.segmentIndex.hb(e.i.presentationTimeline.Kb());try{var r=mb(n,function(t,n,i,r){return YT(e,t,n,i,r)},e.s,!0,e.g.dash.initialSegmentLimit,e.oa,n.M.aesKey,null,!0,e.C);i.createSegmentIndex=function(){return U(function(e){if(1==e.g)return i.segmentIndex?e.A(0):S(e,r.Zc(),3);i.segmentIndex=e.h,E(e)})}}catch(s){if(t=n.M.contentType,t!=ct&&"application"!=t&&"image"!=t||4002!=s.code)throw s}}function xT(e){var t=Rn(e,"ServiceDescription");if(!t)return null;if(e=Rn(t,"Latency"),t=Rn(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function kT(e){if(e=xn(e,"SupplementalProperty"),!e.length)return null;e=d(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,"urn:mpeg:dash:chaining:2016"==t.attributes.schemeIdUri)return t.attributes.value;return null}function MT(e,t,n,i,r){var s=t.vc;s||(s=Nn(i,"mediaPresentationDuration",Fn),e.l.vc=s);var a=0;e.i&&e.i.presentationTimeline&&e.R&&(a=e.i.presentationTimeline.bc());var o=[],l=a;i=xn(i,"Period");for(var u=0;u<i.length;u++){var c=i[u],h=i[u+1],p=Nn(c,"start",Fn,l),f=c.attributes.id,g=Nn(c,"duration",Fn);p=0==u&&0==p&&e.R?a:p;var m=null;if(h){var y=Nn(h,"start",Fn);null!=y&&(m=y-p+a)}else null!=s&&(m=s-p+a);if(y=ht,m&&g&&Math.abs(m-g)>y&&m>g&&e.L++,null==m&&(m=g),!(null!==e.N&&null!==f&&null!==p&&p<e.N)||e.F.includes(f)||u+1==i.length){if(null!==p&&(null===e.N||p>e.N)&&(e.N=p),l=OT(e,t,n,{start:p,duration:m,node:c,Zi:null==m||!h}),o.push(l),t.za.id&&m&&e.oa.set(t.za.id,m),null==m){l=null;break}l=p+m}}if(r)for(t=d(o),n=t.next();!n.done;n=t.next())n=n.value.id,e.F.includes(n)||e.F.push(n);else e.F=o.map(function(e){return e.id});return null!=s?{periods:o,duration:s+a,Li:!1}:{periods:o,duration:l,Li:!0}}function DT(e){var t=Array.from(e.D.keys()).filter(function(t){return!e.F.includes(t)});t=d(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=d(e.D.get(n)),s=r.next();!s.done;s=r.next()){s=s.value;var a=e.s.get(s);a&&(a.segmentIndex&&0!=a.segmentIndex.getNumReferences()?i=!1:(e.m&&e.m.Ji(a,n),e.s.delete(s)))}i&&e.D.delete(n)}}function RT(e,t){t=new Set(t.map(function(e){return e.id}));for(var n=d(e.C.keys()),i=n.next();!i.done;i=n.next())i=i.value,t.has(i)||e.C.delete(i)}function OT(e,t,n,i){t.za=HT(e,i.node,null,n),t.va=i,t.za.wb=t.wb,t.za.id||(t.za.id="__shaka_period_"+i.start);var r=xn(i.node,"EventStream");n=t.presentationTimeline.Kb(),r=d(r);for(var s=r.next();!s.done;s=r.next())KT(e,i.start,i.duration,s.value,n);for(n=xn(i.node,"SupplementalProperty"),n=d(n),r=n.next();!r.done;r=n.next())r=r.value,"urn:mpeg:dash:urlparam:2014"==r.attributes.schemeIdUri&&(r=PT(e,r))&&(t.Ob=r);if(n=xn(i.node,"AdaptationSet").map(function(n,i){return LT(e,t,i,n)}).filter(lr),t.qc){r=[],s=d(n);for(var a=s.next();!a.done;a=s.next()){a=d(a.value.Yl);for(var o=a.next();!o.done;o=a.next())r.push(o.value)}if(r.length!=new Set(r).size)throw new Le(2,4,4018)}for(r=new Map,s=d(n),a=s.next();!a.done;a=s.next())for(a=d(a.value.nk),o=a.next();!o.done;o=a.next()){var l=d(o.value);o=l.next().value,l=l.next().value,r.set(o,l)}if(r.size)for(s=null,a=d(n),o=a.next();!o.done;o=a.next()){o=o.value,l=[];for(var u=d(o.streams),c=u.next(),p={};!c.done;p={bi:void 0},c=u.next())if(p.bi=c.value,r.has(p.bi.originalId)){s||(s=xn(i.node,"AdaptationSet").map(function(n,i){return LT(e,t,i,n)}).filter(lr)),c=d(s);for(var f=c.next();!f.done;f=c.next())(f=f.value.streams.find(function(e){return function(t){return t.originalId==e.bi.originalId}}(p)))&&(f.dependencyStream=r.get(f.originalId),f.originalId+=f.dependencyStream.originalId,l.push(f))}l.length&&o.streams.push.apply(o.streams,h(l))}if(i=n.filter(function(e){return!e.li}),n=n.filter(function(e){return e.li}),!e.g.disableIFrames)for(n=d(n),r=n.next();!r.done;r=n.next())for(r=r.value,s=r.li.split(" "),a=d(i),o=a.next();!o.done;o=a.next())if(o=o.value,s.includes(o.id))for(o=d(o.streams),l=o.next();!l.done;l=o.next())Br(l.value,r.streams);if(n=NT(e.g.disableAudio,i,"audio"),r=NT(e.g.disableVideo,i,"video"),s=NT(e.g.disableText,i,ct),i=NT(e.g.disableThumbnails,i,"image"),0===r.length&&0===n.length)throw new Le(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:r,textStreams:s,imageStreams:i}}function NT(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,h(t.streams)),e},[])}function LT(e,t,n,i){function r(n){var i=n.attributes["dvb:fontFamily"];n=n.attributes["dvb:url"],i&&n&&(n=rt(t.ua.jb(),[n],t.Ob()),e.j.addFont(i,n[0]))}function s(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function a(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=HT(e,i,t.za,null),t.ua.position=n;var o=!1;n=xn(i,"Role");var l=n.map(function(e){return e.attributes.value}).filter(lr),u=void 0,c=t.ua.contentType==ct;c&&(u="subtitle"),n=d(n);for(var p=n.next();!p.done;p=n.next()){p=p.value;var f=p.attributes.schemeIdUri;if(null==f||"urn:mpeg:dash:role:2011"==f)switch(p=p.attributes.value,p){case"main":o=!0;break;case"caption":case"subtitle":u=p}}var g=xn(i,"EssentialProperty");n=null;var m=!1;p=null,f=!1,g=d(g);for(var y=g.next();!y.done;y=g.next()){y=y.value;var v=y.attributes.schemeIdUri;if("http://dashif.org/guidelines/trickmode"==v)n=y.attributes.value;else if("urn:mpeg:mpegB:cicp:TransferCharacteristics"==v)var b=a(parseInt(y.attributes.value,10));else if("urn:mpeg:mpegB:cicp:ColourPrimaries"==v)var T=s(parseInt(y.attributes.value,10));else"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=v&&("urn:mpeg:dash:ssr:2023"==v&&e.g.dash.enableFastSwitching?m=!0:"urn:dvb:dash:fontdownload:2014"==v?r(y):"urn:mpeg:dash:urlparam:2014"==v&&(p=PT(e,y))||(f=!0))}if(f)return null;var _=null;for(f=xn(i,"SupplementalProperty"),f=d(f),g=f.next();!g.done;g=f.next())g=g.value,y=g.attributes.schemeIdUri,"http://dashif.org/guidelines/last-segment-number"==y?_=parseInt(g.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==y?b=a(parseInt(g.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==y?T=s(parseInt(g.attributes.value,10)):"urn:dvb:dash:fontdownload:2014"==y?r(g):"urn:mpeg:dash:urlparam:2014"==y&&(p=PT(e,g));p&&(t.Ob=p),p=xn(i,"Accessibility");var w,S=new Map;for(p=d(p),f=p.next();!f.done;f=p.next())if(g=f.value,f=g.attributes.schemeIdUri,g=g.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=f||e.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=f||e.g.disableText)"urn:mpeg:dash:role:2011"==f?null!=g&&(l.push(g),"captions"==g&&(u="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==f&&("1"==g?w="visually impaired":"2"==g?w="hard of hearing":"9"==g&&(w="spoken subtitles"));else if(f=1,null!=g)for(g=d(g.split(";")),y=g.next();!y.done;y=g.next()){v=y.value;var E=y=void 0;v.includes("=")?(v=v.split("="),y="svc"+v[0],E=v[1].split(",")[0].split(":").pop()):(y="svc"+f,f++,E=v),S.set(y,vt(E))}else S.set("svc1","und");else if(f=1,null!=g)for(g=g.split(";"),y=d(g),v=y.next();!v.done;v=y.next()){E=v.value;var A=v=void 0;E.includes("=")?(E=E.split("="),v=E[0].startsWith("CC")?E[0]:"CC"+E[0],A=E[1]||"und"):(v="CC"+f,2==g.length?f+=2:f++,A=E),S.set(v,vt(A))}else S.set("CC1","und");p=xn(i,"ContentProtection");var C=Rv(p,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.ua.encrypted=0<p.length;var I=vt(t.ua.language||"und"),x=t.ua.label,k=new Map;if(i=xn(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(p=[],f=d(i),g=f.next();!g.done;g=f.next())y=g.value,(g=Ln(y,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(y=bn(y),y.attributes.codecs=g.split(" ").join(","),y.attributes.id&&(y.attributes.supplementalId=y.attributes.id+"_supplementalCodecs"),p.push(y));i.push.apply(i,h(p))}if(p=i.map(function(n){var i=UT(e,t,C,u,I,x,o,l,S,n,w,_);return i&&(i.hdr=i.hdr||b,i.colorGamut=i.colorGamut||T,i.fastSwitching=m,n=n.attributes.dependencyId)?(i.baseOriginalId=n,k.set(n,i),null):i}).filter(function(e){return!!e}),0==p.length&&0==k.size){if(n="image"==t.ua.contentType,e.g.dash.ignoreEmptyAdaptationSet||c||n)return null;throw new Le(2,4,4003)}if(!t.ua.contentType||"application"==t.ua.contentType)for(t.ua.contentType=$T(p[0].mimeType,p[0].codecs),c=d(p),f=c.next();!f.done;f=c.next())f.value.type=t.ua.contentType;for(c=t.ua.id||"__fake__"+e.sa++,f=d(p),g=f.next();!g.done;g=f.next()){for(g=g.value,y=d(C.drmInfos),v=y.next();!v.done;v=y.next())v=v.value,v.keyIds=v.keyIds&&g.keyIds?new Set([].concat(h(v.keyIds),h(g.keyIds))):v.keyIds||g.keyIds;g.groupId=c}return i=i.map(function(e){return e.attributes.supplementalId||e.attributes.id}).filter(lr),{id:c,contentType:t.ua.contentType,language:I,Hn:o,streams:p,drmInfos:C.drmInfos,li:n,Yl:i,nk:k}}function PT(e,t){if((t=On(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Nn(t,"useMPDUrlQuery",qn,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return"$querypart$"==n?e.Y:n.split("&").map(function(t){if("$querypart$"==t)return e.Y;var n=/\$query:(.*?)\$/g.exec(t);if(n&&2==n.length){n=n[1];var i=new Ae(e.Y).get(n);if(i.length)return n+"="+i[0]}return t}).join("&")}}return null}function UT(t,n,i,r,s,a,o,l,u,c,d,h){n.M=HT(t,c,n.ua,null);var p=n.M.id;if(t.Z=Math.min(t.Z,n.M.wb),t.P=0<t.Z,!qT(n.M))return null;var f=n.va.start;n.bandwidth=Nn(c,"bandwidth",Hn)||0,n.roles=l;var g=xn(c,"SupplementalProperty"),m=xn(c,"EssentialProperty"),y=xn(c,"ContentProtection");c=null;var v,b,T=m.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri});(T||(T=g.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri})))&&(c=PT(t,T)),c&&(n.Ob=c),T=n.M.contentType,c=T==ct||"application"==T,T="image"==T,y.length&&(n.ua.encrypted=!0);try{var _=void 0;if(i.Ag){var w=n.M.jb,A=n.Ob,C=rt(w(),[i.Ag.Cl],A()),I=bs(C,t.g.retryParameters);_={bitsKey:128,blockCipherMode:"CBC",iv:i.Ag.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,i,r;return U(function(s){if(1==s.g)return S(s,QT(t,I,6),2);if(3!=s.g){if(n=s.h,!n.data||16!=n.data.byteLength)throw new Le(2,4,4049);return i={name:"AES-CBC"},r=_,S(s,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=s.h,_.fetchKey=void 0,E(s)})}}}if(n.M.aesKey=_,w=function(e,n,i,r){return YT(t,e,n,i,r)},n.M.Od)var x=rb(n,w,_);else if(n.M.Ac)x=db(n,t.s,_);else if(n.M.Pc)x=mb(n,w,t.s,!!t.i,t.g.dash.initialSegmentLimit,t.oa,_,h,!1,t.C);else{var k=n.va.duration||0,M=n.M.jb,D=n.M.mimeType,R=n.M.codecs;x={endTime:-1,timeline:-1,Zc:function(){var e=sc(f,k,M());return e.Hb(function(e){e.mimeType=D,e.codecs=R}),Promise.resolve(e)},timescale:1}}}catch(N){if((c||T)&&4002==N.code)return null;throw N}if(h=Ov(y,i,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI),h=new Set(h?[h]:[]),y=!1,g.some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(y=!0),g=!1,c&&(g=l.includes("forced_subtitle")||l.includes("forced-subtitle")),T&&((m=m.find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(v=m.attributes.value),!v))return null;c=n.M.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(b="PQ"),m=n.M.id?n.za.id+","+n.M.id:"",t.G.length&&p&&t.u.set(n.za.id+","+p,FT(n)),n.M.Rf&&BT(t,n.M.Rf,x,n.presentationTimeline),-1!=x.endTime&&null!=n.za.id&&null!=n.M.id&&((p=t.C.get(n.za.id))?(p.endTime=x.endTime,p.Lh.includes(n.M.id)||p.Lh.push(n.M.id),t.C.set(n.za.id,p)):t.C.set(n.za.id,{endTime:x.endTime,timeline:x.timeline,Lh:[n.M.id]}));var O=m&&t.s.has(m)?t.s.get(m):{id:t.sa++,originalId:n.M.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){O.segmentIndex&&(O.segmentIndex.release(),O.segmentIndex=null)},segmentIndex:null,mimeType:n.M.mimeType,codecs:c,frameRate:n.M.frameRate,pixelAspectRatio:n.M.pixelAspectRatio,bandwidth:n.bandwidth,width:n.M.width,height:n.M.height,kind:r,encrypted:0<i.drmInfos.length,drmInfos:i.drmInfos,keyIds:h,language:s,originalLanguage:n.ua.language,label:a,type:n.ua.contentType,primary:o,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.M.emsgSchemeIdUris,roles:l,forced:g,channelsCount:n.M.Kf,audioSamplingRate:n.M.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:v,accessibilityPurpose:d,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Ui(n.M.mimeType,n.M.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return O.createSegmentIndex=function(){var e;return U(function(t){if(1==t.g)return O.segmentIndex?t.A(0):(e=O,S(t,x.Zc(),3));e.segmentIndex=t.h,E(t)})},m&&n.qc&&!t.s.has(m)&&(n=n.za.id||"",t.D.has(n)||t.D.set(n,[]),t.s.set(m,O),t.D.get(n).push(m)),O}function BT(e,t,n,i){if(!e.$.has(t)){e.$.add(t);var r,s=Nn(t,"presentationTime",zn)||0,a=Rn(t,"UTCTiming");(r=a&&a.attributes.schemeIdUri)&&(a=a.attributes.schemeIdUri,r=!("urn:mpeg:dash:utc:http-ntp:2014"===a||"urn:mpeg:dash:utc:ntp:2014"===a||"urn:mpeg:dash:utc:sntp:2014"===a)),r?t=1e3*(Nn(t,"wallClockTime",Bn)||0):(t=Nn(t,"wallClockTime",zn)||0,t=bl(t)),n=new Date(t-s/n.timescale*1e3),s=n.getTime()/1e3,isNaN(s)||(i.s||i.Wh(s),i=(new Map).set("detail",{wallClockTime:t,programStartDate:n}),i=new K("prft",i),e.j.onEvent(i))}}function FT(e){function t(e){return e?(e=Tn(e),e.Od=null,e.Ac=null,e.Pc=Zn(e.Pc),e.Rf=null,e):null}return e=Tn(e),e.za=t(e.za),e.ua=t(e.ua),e.M=t(e.M),e.va&&(e.va=Tn(e.va),e.va.node=null),e}function jT(e){var t,n;return U(function(i){switch(i.g){case 1:return t=0,A(i,2),S(i,bT(e),4);case 4:t=i.h,I(i,3);break;case 2:if(n=x(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),VT(e,t),E(i)}})}function VT(e,t){if(!(0>e.J)){var n=e.J;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.K.X(Math.max(n-t,Mt(e.ra)))}}function HT(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Kf:null,audioSamplingRate:null,wb:0,Zf:0,encrypted:!1},i=i||n.jb;var r,s=t.attributes.id,a=t.attributes.supplementalId,o=xn(t,"BaseURL"),l=!1;if(e.h)for(var u=d(o),c=u.next();!c.done;c=u.next()){var h=c.value;c=h.attributes.serviceLocation,h=Mn(h),c&&h&&(Db(e.h,s,c,h),l=!0)}l&&e.h||(r=o.map(Mn)),u=t.attributes.contentType||n.contentType,c=t.attributes.mimeType||n.mimeType,h=Uc([t.attributes.codecs||n.codecs]).join(",");var p=Nn(t,"frameRate",Wn)||n.frameRate,f=t.attributes.sar||n.pixelAspectRatio,g=zT(xn(t,"InbandEventStream"),n.emsgSchemeIdUris),m=xn(t,"AudioChannelConfiguration");m=GT(m)||n.Kf;var y=Nn(t,"audioSamplingRate",zn)||n.audioSamplingRate;u||(u=$T(c,h));var v=Rn(t,"SegmentBase"),b=Rn(t,"SegmentTemplate"),T=v&&Nn(v,"availabilityTimeOffset",Gn)||0,_=b&&Nn(b,"availabilityTimeOffset",Gn)||0,w=o&&o.length&&Nn(o[0],"availabilityTimeOffset",Gn)||0;T=n.wb+w+T+_,_=null,(w=Rn(t,"SegmentSequenceProperties"))&&(w=Rn(w,"SAP"))&&(_=Nn(w,"cadence",Vn)),w=t.attributes.label;var S=xn(t,"Label");return S&&S.length&&(S=S[0],kn(S)&&(w=kn(S))),{jb:function(){return rt(i(),o.length?e.h&&l?Rb(e.h,s):r||[]:[])},Od:v||n.Od,Ac:Rn(t,"SegmentList")||n.Ac,Pc:b||n.Pc,Rf:Rn(t,"ProducerReferenceTime")||n.Rf,width:Nn(t,"width",zn)||n.width,height:Nn(t,"height",zn)||n.height,contentType:u,mimeType:c,codecs:h,frameRate:p,pixelAspectRatio:f,emsgSchemeIdUris:g,id:a||s,originalId:s,language:t.attributes.lang,Kf:m,audioSamplingRate:y,wb:T,vf:null,Zf:_||n.Zf,label:w||null,encrypted:!1}}function zT(e,t){t=t.slice(),e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function GT(e){e=d(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}function qT(e){var t=e.Od?1:0;return t+=e.Ac?1:0,t+=e.Pc?1:0,0==t?e.contentType==ct||"application"==e.contentType:(1!=t&&(e.Od&&(e.Ac=null),e.Pc=null),!0)}function WT(e,t,n,i){var r,s,a,o,l,u,c;return U(function(d){if(1==d.g)return r=[Ye(n)],s=rt(t(),r),a=bs(s,e.g.retryParameters),a.method=i,o=e.j.networkingEngine.request(4,a,{isPreload:e.ba()}),gs(e.O,o),S(d,o.promise,2);if(l=d.h,"HEAD"==i){if(!l.headers||!l.headers.date)return d.return(0);u=l.headers.date}else u=ze(l.data);return c=Date.parse(u),isNaN(c)?d.return(0):d.return(c-Date.now())})}function XT(e,t,n){var i,r,s,a,o,l,u,c;return U(function(h){switch(h.g){case 1:i=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),s=d(i),a=s.next();case 2:if(a.done){h.A(4);break}switch(o=a.value,A(h,5),l=o.scheme,u=o.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(u),h.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":J("NTP UTCTiming scheme is not supported");break;default:J("Unrecognized scheme in UTCTiming element",l)}h.A(9);break;case 7:return S(h,WT(e,t,u,"HEAD"),10);case 10:return h.return(h.h);case 8:return S(h,WT(e,t,u,"GET"),11);case 11:return h.return(h.h);case 9:I(h,3);break;case 5:x(h);case 3:a=s.next(),h.A(2);break;case 4:return J("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}})}function KT(e,t,n,i,r){var s=i.attributes.schemeIdUri||"",a=i.attributes.value||"",o=Nn(i,"timescale",zn)||1,l=Nn(i,"presentationTimeOffset",zn)||0;i=d(xn(i,"Event"));for(var u=i.next();!u.done;u=i.next()){u=u.value;var c=Nn(u,"presentationTime",zn)||0,h=Nn(u,"duration",zn)||0;c=Math.max((c-l)/o+t,t),h=c+h/o,null!=n&&(c=Math.min(c,t+n),h=Math.min(h,t+n)),h<r||(u={schemeIdUri:s,value:a,startTime:c,endTime:h,id:u.attributes.id||"",timescale:o,eventElement:Qn(u),eventNode:Zn(u)},e.j.onTimelineRegionAdded(u))}}function YT(e,t,n,i,r){var s,a,o,l;return U(function(u){return 1==u.g?(s=Cs,a=r?0:1,o=Vc(t,n,i,e.g.retryParameters),S(u,QT(e,o,s,{type:a}),2)):(l=u.h,u.return(l.data))})}function $T(e,t){return t=Ui(e,t),Qi(t)?ct:e.split("/")[0]}function QT(e,t,n,i){return i||(i={}),i.isPreload=e.ba(),t=e.j.networkingEngine.request(n,t,i),gs(e.O,t),t.promise}function ZT(e){var t=e.l.ue;if(!e.l.Hf||!t||!e.G.length)return[];var n=Date.now()/1e3,i=e.G.filter(function(e){return e=zn(e.attributes.ttl),!e||t+e>n}).map(Mn).filter(lr);return i.length?rt(e.B,i):[]}function JT(){}i=vT.prototype,i.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.ba=t),n&&this.i&&this.i.presentationTimeline.T()&&this.K.Ka(),this.h&&this.h.configure(this.g),this.m&&(this.m.Bj(this.g.dash.multiTypeVariantsAllowed&&Xt()),this.m.Hj(this.g.dash.useStreamOnceInPeriodFlattening))},i.start=function(e,t){var n,i=this;return U(function(r){if(1==r.g)return i.na=t.isLowLatencyMode(),i.B=[e],i.j=t,S(r,bT(i),2);if(n=r.h,i.j&&VT(i,n),!i.j)throw new Le(2,7,7001);return r.return(i.i)})},i.stop=function(){for(var e=d(this.s.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.i=null,this.s.clear(),this.D.clear(),this.u.clear(),this.C.clear(),this.l={Hf:"",type:"",profiles:[],vc:null,wb:0,jb:null,ue:0},this.m=null,null!=this.K&&(this.K.stop(),this.K=null),this.h&&this.h.destroy(),this.H&&(this.H.release(),this.H=null),this.$.clear(),this.O.destroy()},i.update=function(){var e,t=this;return U(function(n){return 1==n.g?(A(n,2),S(n,bT(t),4)):2!=n.g?I(n,0):(e=x(n),t.j&&e?(t.j.onError(e),void E(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.T()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Gc();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.J=t.endTime-e,VT(this,0))}}},i.banLocation=function(e){this.h&&this.h.banLocation(e)},i.setMediaElement=function(e){this.I=e},X("shaka.dash.DashParser",vT),Ya("application/dash+xml",function(){return new vT}),Ya("video/vnd.mpeg.dash.mpd",function(){return new vT}),X("shaka.dependencies",JT),JT.has=function(e){return n_.has(e)},JT.add=function(e,t){if(!t_[e])throw Error(e+" is not supported");e==e_?Bt("mux.js","mux.js is no longer used in Shaka Player."):n_.set(e,function(){return t})};var e_="muxjs",t_={In:e_,ISOBoxer:"ISOBoxer"};JT.Allowed=t_;var n_=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function i_(){this.j=new Ue(function(){return navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase()?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new Ue(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function r_(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function s_(t){return Be(),void 0!==e.matchMedia&&e.matchMedia("(color-gamut: p3)").matches?t?"HLG":"PQ":"SDR"}function a_(){i_.call(this),this.g=new Ue(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new Ue(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints?"xr"in navigator?"VR":"MOBILE":"xr"in navigator?"VR":"DESKTOP"})}function o_(){if(!l_())throw Error("Not a Chromecast device!");i_.call(this),this.h=new Ue(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new Ue(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?u_:e.includes("fuchsia")?c_:d_})}function l_(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}i=i_.prototype,i.ic=function(){return!!navigator.mediaCapabilities},i.Ja=function(){return this.j.value()},i.Ia=function(){return this.l.value()},i.xe=function(){return!1},i.rj=function(){return!1},i.wf=function(){return!1},i.sj=function(){return!1},i.we=function(){return!1},i.nd=function(){return!0},i.od=function(){return!0},i.Ce=function(){return!0},i.xj=function(){return 0},i.nc=function(){return Promise.resolve({width:1/0,height:1/0})},i.Jj=function(){return!1},i.$h=function(){return!1},i.$a=function(e){var t=this.Ja();return"TV"!==t&&"CONSOLE"!==t&&"CAST"!==t||(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},i.ei=function(){return!!e.indexedDB},i.pj=function(){return[]},i.eg=function(){return!1},i.fj=function(){return!1},i.Ph=function(){return!1},i.di=function(){return!0},i.gj=function(){return!1},i.Rj=function(){return!0},i.toString=function(){return"Device: "+this.Rb()+" v"+this.Ga()+"; Type: "+this.Ja()},b(a_,i_),i=a_.prototype,i.Ga=function(){return this.g.value()},i.Rb=function(){return"Apple Browser"},i.Ja=function(){return this.h.value()},i.Ia=function(){return"WEBKIT"},i.ic=function(){return!1},i.xe=function(e,t){return"audio"===t},i.wf=function(){return!0},i.sj=function(e){return"audio"===e},i.$a=function(e){return i_.prototype.$a.call(this,e),e.abr.minTimeToSwitch=.5,e},i.eg=function(){return!0},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(Fe=function(){return new a_}),b(o_,i_),i=o_.prototype,i.Ga=function(){return this.h.value()},i.Rb=function(){return"Chromecast with "+this.g.value()},i.Ja=function(){return"CAST"},i.Ia=function(){return"CHROMIUM"},i.ic=function(){return i_.prototype.ic.call(this)&&this.g.value()!==d_},i.od=function(){return this.g.value()!==d_},i.xj=function(){switch(this.g.value()){case u_:return 0;case c_:return 3;default:return 1}},i.nc=function(){var t,n,i,r,s;return U(function(a){switch(a.g){case 1:if(t=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},A(a,2),!(i=t)){a.A(4);break}return S(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:i=a.h;case 4:if(i){n.width=3840,n.height=2160,a.A(6);break}if(!(r=t)){a.A(7);break}return S(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:r=a.h;case 7:r&&(n.width=1920,n.height=1080);case 6:I(a,3);break;case 2:s=x(a),Z("Failed to check canDisplayType:",s);case 3:return a.return(n)}})},i.$a=function(e){return i_.prototype.$a.call(this,e),e.streaming.stallSkip=0,e},i.ei=function(){return!1};var u_="Android",c_="Fuchsia",d_="Linux";function h_(){i_.call(this);var e=this;this.i=new Ue(function(){var e=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return e?parseInt(e[2],10):null}),this.g=new Ue(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new Ue(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("win32")}),this.s=new Ue(function(){return!navigator.userAgent.match(/Edge?\//)||!e.h.value()}),this.m=new Ue(function(){return navigator.userAgent.includes("sony.hbbtv.tv.G5")})}function p_(){i_.apply(this,arguments)}function f_(){i_.call(this),this.g=new Ue(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}function g_(){i_.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}function m_(){i_.apply(this,arguments)}function y_(){i_.call(this),this.h=new Ue(function(){return navigator.userAgent.includes("DT_STB_BCM")}),this.g=new Ue(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}function v_(){i_.call(this),this.g=b_()}function b_(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}function T_(){i_.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}function __(){var e=null;try{e="undefined"!==typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows}catch(t){}return e}function w_(e,t,n){this.type=e,this.ka=t,this.segments=n||null}function S_(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=void 0===i?null:i}function E_(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function A_(e,t){return e=e.attributes.filter(function(e){return e.name==t}),e.length?e[0]:null}function C_(e,t,n){return(e=A_(e,t))?e.value:n||null}function I_(e,t){if(e=A_(e,t),!e)throw new Le(2,4,4023,t);return e.value}function x_(e,t,n){n=void 0===n?[]:n,this.ka=t,this.g=e,this.ec=n}function k_(e,t){this.name=e,this.value=t}function M_(e,t){return e.filter(function(e){return e.name==t})}function D_(e,t){return e.filter(function(e){return I_(e,"TYPE")==t})}function R_(e,t){e=d(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function O_(e,t,n){return n=void 0===n?0:n,(e=R_(e,t))?Number(e.value):n}function N_(e,t,n){return t?L_(e,[t],n):[]}function L_(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(e){return P_(e,n)})),rt(e,i)}function P_(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=d(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),s=t.get(r);if(!s)throw new Le(2,4,4039,r);e=e.replace(i,s)}}return e}function U_(){this.g=0}function B_(e,t){t=ze(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Le(2,4,4015);t=0;for(var i=!0,r=d(n),s=r.next();!s.done;s=r.next())if(s=s.value,/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=F_(e,s),--e.g,j_.includes(s.name)){t=1;break}"EXT-X-STREAM-INF"==s.name&&(i=!0)}for(r=[],i=!0,s=0;s<n.length;s++){var a=n[s],o=n[s+1];if(/^#(?!EXT)/m.test(a)||i)i=!1;else{if(a=F_(e,a),V_.includes(a.name)){if(1!=t)throw new Le(2,4,4017);a=n.splice(s,n.length-s),n=[],i=[],s=[],o=null,a=d(a);for(var l=a.next();!l.done;l=a.next())l=l.value,/^(#EXT)/.test(l)?(l=F_(e,l),j_.includes(l.name)?r.push(l):"EXT-X-MAP"==l.name?o=l:"EXT-X-PART"==l.name?s.push(l):"EXT-X-PRELOAD-HINT"==l.name?"PART"==C_(l,"TYPE")?s.push(l):"MAP"==C_(l,"TYPE")&&(l.name="EXT-X-MAP",o=l):i.push(l)):/^#(?!EXT)/m.test(l)||(l=l.trim(),o&&i.push(o),n.push(new x_(l,i,s)),i=[],s=[]);return s.length&&(o&&i.push(o),n.push(new x_("",i,s))),new w_(t,r,n)}r.push(a),"EXT-X-STREAM-INF"==a.name&&(a.attributes.push(new k_("URI",o)),i=!0)}}return new w_(t,r)}function F_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Le(2,4,4016,t);t=n[1];var i,r=n[2];if(n=[],r){var s;r=new hn(r),(s=fn(r,/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=fn(r,a);)n.push(new k_(s[1],s[2]||s[3])),pn(r)}return new S_(e,t,n,i)}l_()&&(Fe=function(){return new o_}),b(h_,i_),i=h_.prototype,i.Ga=function(){return this.i.value()},i.Rb=function(){return this.g.value()},i.xe=function(e){return!!Zr(e)&&("Edge"===this.g.value()&&this.h.value())},i.rj=function(){return"Edge"===this.g.value()&&this.h.value()},i.wf=function(){return"Edge"===this.g.value()&&this.h.value()},i.od=function(){return this.s.value()},i.$a=function(e){if(i_.prototype.$a.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return e},i.Ph=function(){return"Edge"===this.g.value()||this.m.value()},je=function(){return new h_},b(p_,i_),i=p_.prototype,i.Ga=function(){return null},i.Rb=function(){return"Hisense"},i.Ja=function(){return"TV"},i.ic=function(){return!1},i.nc=function(){var t={width:1920,height:1080},n=null;if(e.Hisense_Get4KSupportState)try{n=e.Hisense_Get4KSupportState()}catch(i){}return null==n&&(n=navigator.userAgent.includes("UHD")),n&&(t.width=3840,t.height=2160),Promise.resolve(t)},i.$a=function(e){return i_.prototype.$a.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(Fe=function(){return new p_}),b(f_,i_),i=f_.prototype,i.Rb=function(){return"PlayStation"},i.Ja=function(){return"CONSOLE"},i.Ia=function(){return"WEBKIT"},i.Ga=function(){return this.g.value()},i.ic=function(){return!1},i.nd=function(){return!1},i.od=function(){return!1},i.$h=function(){return 4===this.Ga()},i.nc=function(){var t,n,i,r,s;return U(function(a){switch(a.g){case 1:return t={width:1920,height:1080},n=!1,A(a,2),S(a,e.msdk.device.getDisplayInfo(),4);case 4:i=a.h,n="4K"===i.resolution,I(a,3);break;case 2:return x(a),A(a,5),S(a,e.msdk.device.getDisplayInfoImmediate(),7);case 7:r=a.h,n="4K"===r.resolution,I(a,3);break;case 5:s=x(a),J("PlayStation: Failed to get the display info:",s);case 3:return n&&(t.width=3840,t.height=2160),a.return(t)}})},i.$a=function(e){return i_.prototype.$a.call(this,e),4===this.Ga()&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},i.Ph=function(){return 4===this.Ga()},i.di=function(){return 4!==this.Ga()},navigator.userAgent.includes("PlayStation")&&(Fe=function(){return new f_}),b(g_,i_),i=g_.prototype,i.Ga=function(){return this.g},i.Rb=function(){return"Tizen"},i.Ia=function(){return"CHROMIUM"},i.Ja=function(){return"TV"},i.xe=function(){return!0},i.we=function(){return 3===this.Ga()},i.ic=function(){return!1},i.nd=function(){var e=this.Ga();return null!==e?4<=e:i_.prototype.nd.call(this)},i.od=function(){return!1},i.Ce=function(){return this.g&&this.h?5===this.g?5<=this.h:5<this.g:i_.prototype.Ce.call(this)},i.nc=function(){var e={width:1920,height:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(n){J("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},i.$a=function(e){return i_.prototype.$a.call(this,e),e.drm.ignoreDuplicateInitData=2!==this.Ga(),3===this.Ga()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},i.pj=function(){var e=[];return null!==this.g&&5>this.g&&e.push("opus"),e},i.fj=function(){return!0},i.gj=function(){return 3===this.Ga()},navigator.userAgent.includes("Tizen")&&(Fe=function(){return new g_}),b(m_,i_),m_.prototype.Ga=function(){return null},m_.prototype.Rb=function(){return"Vizio"},m_.prototype.Ja=function(){return"TV"},m_.prototype.ic=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(Fe=function(){return new m_}),b(y_,i_),i=y_.prototype,i.Ga=function(){return this.g.value()},i.Rb=function(){return"WebKit STB"},i.Ja=function(){return"TV"},i.Ia=function(){return"WEBKIT"},i.ic=function(){return!1},i.nd=function(){var e=this.g.value();return null===e||15<=e},i.nc=function(){return Promise.resolve({width:e.screen.width*e.devicePixelRatio,height:e.screen.height*e.devicePixelRatio})},i.di=function(){return!this.h.value()},(navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("DT_STB_BCM")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(Fe=function(){return new y_}),b(v_,i_),i=v_.prototype,i.Ga=function(){return this.g},i.Rb=function(){return"WebOS"},i.Ja=function(){return"TV"},i.Ia=function(){return"CHROMIUM"},i.ic=function(){return!1},i.nd=function(){var e=this.Ga();return null!==e?3<e:i_.prototype.nd.call(this)},i.od=function(){var e=this.Ga();return null!==e?6<e:i_.prototype.od.call(this)},i.Ce=function(){var e=this.Ga();return null!==e?3<e:i_.prototype.Ce.call(this)},i.nc=function(){var t={width:1920,height:1080};try{var n=JSON.parse(e.PalmSystem.deviceInfo);t.width=Math.max(1920,n.screenWidth),t.height=Math.max(1080,n.screenHeight)}catch(i){J("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.$a=function(e){return i_.prototype.$a.call(this,e),3===this.Ga()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},i.Rj=function(){return!1},navigator.userAgent.includes("Web0S")&&(Fe=function(){return new v_}),b(T_,i_),i=T_.prototype,i.Ga=function(){return this.h},i.Rb=function(){return"Xbox"},i.Ja=function(){return"CONSOLE"},i.Ia=function(){return this.g?"EDGE":"CHROMIUM"},i.xe=function(){return!0},i.wf=function(){return!0},i.Jj=function(){return this.g},i.nc=function(){var e={width:1920,height:1080},t=__();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,i=t.Media.Protection.ProtectionCapabilityResult;t=null;do{t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(t===i.maybe);t===i.probably&&(e.width=3840,e.height=2160)}catch(r){J("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},i.$a=function(e){return i_.prototype.$a.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},i.ei=function(){return!1},(navigator.userAgent.includes("Xbox One")||null!==__())&&(Fe=function(){return new T_}),S_.prototype.toString=function(e){function t(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};var j_="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),V_="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function H_(){}function z_(e,t){try{var n=G_(e);return cs({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return ls(i)}}function G_(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Le(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new Le(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r,s=!1;return 1<n.length&&"base64"==n[n.length-1]&&(s=!0,n.pop()),r=s?et(t):We(t),{data:r,contentType:i}}function q_(){var e=this;this.g=this.h=null,this.F=1,this.B=new Map,this.I=new Map,this.L=new Map,this.L.set("video",new Map),this.L.set("audio",new Map),this.L.set(ct,new Map),this.L.set("image",new Map),this.dc=(new Map).set("com.apple.streamingkeydelivery",function(t,n,i){return Zw(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(e){var t=I_(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),t=I_(e,"URI"),t=G_(t.split("?")[0]),t=De(t.data),n=st("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=C_(e,"KEYID"))&&n.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(n)}else e=Promise.resolve(null);return e}).set("com.microsoft.playready",function(e){var t=I_(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),e=I_(e,"URI"),e=G_(e.split("?")[0]),e=De(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),t=Ks(e,t,new Set,0),n=st("com.microsoft.playready",n,[{initDataType:"cenc",initData:t}]),(e=Sn(["<PLAYREADY>",Je(e),"</PLAYREADY>"].join("\n")))&&(n.licenseServerUri=Mv(e)),n=Promise.resolve(n)}else n=Promise.resolve(null);return n}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(e){var t=I_(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),t=I_(e,"URI"),t=G_(t.split("?")[0]),t=De(t.data),n=st("com.huawei.wiseplay",n,[{initDataType:"cenc",initData:t}]),(e=C_(e,"KEYID"))&&n.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(n)}else e=Promise.resolve(null);return e}),this.Ya=new Set,this.i=new Map,this.l=null,this.D="",this.La=new U_,this.J=-1,this.Z=1/0,this.Y=this.yc=this.Ta=!1,this.C=new sr(function(){e.R&&!e.g.continueLoadingWhenPaused&&(e.P.Da(e.R,"timeupdate"),e.R.paused)?e.P.qa(e.R,"timeupdate",function(){return Xw(e)}):Xw(e)}),this.sa=lS,this.m=null,this.Na=0,this.s=1/0,this.fb=this.Ha=this.O=0,this.U=new fs,this.G=new Map,this.H=new Map,this.ra=new Map,this.ba=new Map,this.K=new Map,this.na=new Map,this.oa=new Map,this.wc=this.$=!1,this.cb=new kt(5),this.j=null,this.N=!0,this.P=new Rt,this.u=this.R=null,this.Lb=function(){return!1}}function W_(e,t){return Kw(e)?e.L.get(t.type):t.Ef}function X_(e,t){var n,i,r,s,a,o,l,u,c,p,f,g,m,y,v,b,T,_,w,C,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q;return U(function(U){switch(U.g){case 1:if(t.stream.isAudioMuxedInVideo)return U.return();for(n=[],i=d(t.S()),r=i.next();!r.done;r=i.next())s=r.value,a=new he(s),o=a.g,t.df&&(0<=t.Vb&&o.add("_HLS_msn",String(t.Vb)),0<=t.Wb&&o.add("_HLS_part",String(t.Wb))),t.ef&&o.add("_HLS_skip","YES"),Ie(o)&&me(a,ye(o.toString())),n.push(a.toString());return A(U,2),S(U,Ww(e,n,!0).promise,4);case 4:l=U.h,I(U,3);break;case 2:throw u=x(U),e.h&&e.h.disableStream(t.stream),u;case 3:if(!t.stream.segmentIndex)return U.return();if(c=B_(e.La,l.data),1!=c.type)throw new Le(2,4,4017);return p=l.uri,p==l.originalUri||t.S().includes(p)||t.Uf.push(p),f=M_(c.ka,"EXT-X-DEFINE"),g=nw(e,f,p),m=t.stream,y=W_(e,t),S(U,kw(e,c,m.mimeType,t.S,g),5);case 5:for(v=U.h,b=v.keyIds,T=v.drmInfos,_=v.encrypted,w=v.wi,m.encrypted||!_||w||(m.encrypted=!0),C=function(e,t){return e.size===t.size&&[].concat(h(e)).every(function(e){return t.has(e)})},C(m.keyIds,b)||(m.keyIds=b,m.drmInfos=T,e.h.newDrmInfo(m)),k=jw(e,c,y,g,t.S,t.type),M=k.segments,(D=k.bandwidth)&&(m.bandwidth=D),R=bc(m),O=d(M),N=O.next();!N.done;N=O.next())L=N.value,L.ea&&(L.ea.Ed=R);m.segmentIndex.pe(M,e.l.Kb()),M.length&&(P=O_(c.ka,"EXT-X-MEDIA-SEQUENCE",0),F=(B=R_(c.ka,"EXT-X-SKIP"))?Number(C_(B,"SKIPPED-SEGMENTS")):0,j=Iw(P,M),V=j.Vb,H=j.Wb,t.Vb=V+F,t.Wb=H,z=y.get(P),m.segmentIndex.hb(z)),(G=rc(m.segmentIndex))&&(t.gd=G.startTime,q=M[M.length-1],t.uc=q.endTime),R_(c.ka,"EXT-X-ENDLIST")&&(t.ee=!0),Ow(e,c),Fw(e,c.ka,m.type,g,t.S),E(U)}})}function K_(e,t,n){n=void 0!==n&&n;for(var i=-1==e.J,r=d(t),s=r.next();!s.done;s=r.next()){s=s.value;var a=s.stream.segmentIndex,o=W_(e,s);if(a=rc(a)){o=d(o);for(var l=o.next();!l.done;l=o.next()){l=d(l.value);var u=l.next().value;if(l.next().value==a.startTime){i&&(e.J=Math.max(e.J,u)),s.Pg=u;break}}}}if(!(0>e.J))for(t=d(t),i=t.next();!i.done;i=t.next())i=i.value,(Ew(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(s=e.J-i.Pg,0<s&&(r.g.splice(0,s),r=rc(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),$_(e,i,r)))}function Y_(e,t){if(1/0==e.Z){t=d(t);for(var n=t.next();!n.done;n=t.next())n=rc(n.value.stream.segmentIndex),null!=n&&null!=n.h&&(e.Z=Math.min(e.Z,n.h))}if(t=e.Z,1/0!=t){n=d(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!Ew(e,i.type)){var r=i.stream.segmentIndex;if(null!=r){var s=rc(r);if(s)if(null==s.h)Z("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.S(),"Expect AV sync issues!");else for($_(e,i,s.h-t-s.startTime),i=d(r),r=i.next();!r.done;r=i.next())r.value.gi(t)}}}}function $_(e,t,n){if(!(.001>Math.abs(n))){t.gd+=n,t.uc+=n,e=W_(e,t);for(var i=d(e),r=i.next();!r.done;r=i.next()){var s=d(r.value);r=s.next().value,s=s.next().value,e.set(r,s+n)}t.S()}}function Q_(e,t){var n,i,r,s,a,o,l,u,c,p,f,g,m,y,v,b,T,_,w,A,C,I,x,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q,W,X,K,Y;return U(function(U){switch(U.g){case 1:return n=dt,i=B_(e.La,t),r=M_(i.ka,"EXT-X-DEFINE"),s=[],a=[],o=[],e.l=new Ou(null,0),e.l.md(!0),l=function(){return[e.D]},u=null,c=new Map,1==i.type?(e.N=!1,B=M_(i.ka,"EXT-X-DEFINE"),c=nw(e,B,e.D),u=n.Ea,F="",j=new Map,S(U,Cw(e,e.F++,c,i,l,"",u,F,!0,"Media Playlist",null,j,null,!1,null,!1),7)):(tw(e,r),p=M_(i.ka,"EXT-X-MEDIA"),f=M_(i.ka,"EXT-X-STREAM-INF"),g=M_(i.ka,"EXT-X-IMAGE-STREAM-INF"),m=M_(i.ka,"EXT-X-I-FRAME-STREAM-INF"),y=M_(i.ka,"EXT-X-SESSION-KEY"),v=M_(i.ka,"EXT-X-SESSION-DATA"),b=M_(i.ka,"EXT-X-CONTENT-STEERING"),rw(e,v),S(U,sw(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(T=[],_=d(f),w=_.next(),A={};!w.done;A={Pj:void 0},w=_.next())C=w.value,(I=C_(C,"SUPPLEMENTAL-CODECS"))&&(A.Pj=I.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),x=C.attributes.map(function(e){return function(t){var n=t.name,i=t.value;return"CODECS"==n&&(i=e.Pj.join(","),t=t.value.split(","),1<t.length&&(t=lt("audio",t))&&(i+=","+t)),new k_(n,i)}}(A)),T.push(new S_(C.id,C.name,x,null)));for(f.push.apply(f,h(T)),k=[],M=d(m),D=M.next(),R={};!D.done;R={Qj:void 0},D=M.next())O=D.value,(N=C_(O,"SUPPLEMENTAL-CODECS"))&&(R.Qj=N.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),L=O.attributes.map(function(e){return function(t){var n=t.name;return t=t.value,"CODECS"==n&&(t=e.Qj.join(",")),new k_(n,t)}}(R)),k.push(new S_(O.id,O.name,L,null)));m.push.apply(m,h(k))}return iw(e,f),gw(e,p),P=cw(e,m),S(U,dw(e,f,y,p,l,e.B,P),5);case 5:return s=U.h,a=aw(e,p),S(U,lw(e,g,m),6);case 6:o=U.h,U.A(3);break;case 7:V=U.h,e.i.set(e.D,V),V.stream&&(H=bc(V.stream),V.stream.segmentIndex.Hb(function(e){e.ea&&(e.ea.Ed=H)})),u=V.stream.type,z=!0,(e.g.disableAudio&&"audio"==V.type||e.g.disableVideo&&"video"==V.type&&!V.stream.codecs.includes(","))&&(z=!1),z&&s.push({id:0,language:vt(F||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==V.type?V.stream:null,video:"video"==V.type?V.stream:null,bandwidth:V.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Le(2,7,7001);if(Dw(e,i),1==i.type&&(Kw(e)&&(Nw(e,i),G=e.s,e.C.X(G)),q=Array.from(e.i.values()),Sw(e,q),ew(e),Fw(e,i.ka,u,c,l)),e.m={presentationTimeline:e.l,variants:s,textStreams:a,imageStreams:o,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.Y||!e.g.hls.disableCodecGuessing){U.A(8);break}for(W=[],X=d(e.m.variants),K=X.next();!K.done;K=X.next())Y=K.value,Y.audio&&""===Y.audio.codecs&&W.push(Y.audio.createSegmentIndex()),Y.video&&""===Y.video.codecs&&W.push(Y.video.createSegmentIndex());return S(U,Promise.all(W),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),E(U)}})}function Z_(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T;return U(function(_){if(1==_.g)return n=Lc(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=zw(e,t),r=i.segment,s=i.segmentIndex,a=r.S(),o=a[0],l=new he(o),u=l.ub.split(".").pop(),(c=tS.get(u))?_.return(Lc(c)):S(_,Promise.all([J_(e,r.ea,0),J_(e,r,s)]),2)):_.return(n);if(h=_.h,p=h[1].mimeType,f=h[0].data,g=h[1].data,m="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),y=["audio/mp4","video/mp4","video/iso.segment"],v=r.ea||y.includes(p),!v&&Bl(De(g))){var w=g,E=e.g.disableAudio,A=e.g.disableVideo,C=e.g.disableText,I=De(w),x=(new Rl).parse(I),k=x.ae();I=x.nh();var M=[],D=!1,R=!1;if(!E)switch(k.audio){case"aac":case"aac-loas":x.yb().length&&(M.push("mp4a.40.2"),D=!0);break;case"mp3":x.yb().length&&(M.push("mp4a.40.34"),D=!0);break;case"ac3":x.yb().length&&(M.push("ac-3"),D=!0);break;case"ec3":x.yb().length&&(M.push("ec-3"),D=!0);break;case"opus":x.yb().length&&(M.push("opus"),D=!0)}if(!A)switch(k.video){case"avc":I.codec?M.push(I.codec):M.push("avc1.42E01E"),R=!0;break;case"hvc":I.codec?M.push(I.codec):M.push("hvc1.1.6.L93.90"),R=!0;break;case"av1":M.push("av01.0.01M.08"),R=!0}if(M.length){if(E=D&&!R,A=new Map,R&&!C){for(C=new Jt("video/mp2t"),C.Of(w),w=d(C.rg()),R=w.next();!R.done;R=w.next())R=R.value,A.set(R,R);C.Sd()}I={type:E?"audio":"video",mimeType:"video/mp2t",codecs:M.join(", "),language:null,height:I.height,width:I.width,channelCount:null,sampleRate:null,closedCaptions:A,Ge:null,colorGamut:null,frameRate:I.frameRate}}else I=null;if(b=I)return _.return(b)}else if((v||m.includes(u))&&(T=Pc(f,g,e.g.disableText)))return _.return(T);return p?_.return(Lc(p)):_.return(n)})}function J_(e,t,n){var i,r,s,a,o,l;return U(function(u){switch(u.g){case 1:return t?(i=Cs,r=Vc(t.S(),t.Hc(),t.Fc(),e.g.retryParameters),s=t instanceof qo?1:0,S(u,$w(e,r,i,{type:s}).promise,2)):u.return({mimeType:null,data:null});case 2:if(a=u.h,o=a.data,!t.aesKey){u.A(3);break}return S(u,jc(o,t.aesKey,n),4);case 4:o=u.h;case 3:return t instanceof qo?t.ze(o,!0):t.ze(o),(l=a.headers["content-type"])&&(l=l.split(";")[0].toLowerCase()),u.return({mimeType:l,data:o})}})}function ew(e){if(Kw(e)){if(e.sa==cS){for(var t=1/0,n=1/0,i=d(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&"text"!=r.stream.type&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.uc),n=Math.min(n,r.gd));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.ag(t)}}else e.l.vb(_w(e));if(!e.l.s)for(t=d(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=rc(n.stream.segmentIndex))&&n.h&&e.l.Wh(n.h);e.l.Df()}function tw(e,t){var n=new he(e.D).g;t=d(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=C_(r,"NAME");var s=C_(r,"VALUE");r=C_(r,"QUERYPARAM"),i&&s&&(e.B.has(i)||e.B.set(i,s)),r&&(i=n.get(r)[0])&&!e.B.has(i)&&e.B.set(r,i)}}function nw(e,t,n){n=new he(n).g;var i=new Map;t=d(t);for(var r=t.next();!r.done;r=t.next()){var s=r.value,a=C_(s,"NAME"),o=C_(s,"VALUE");r=C_(s,"QUERYPARAM"),s=C_(s,"IMPORT"),a&&o&&(i.has(a)||i.set(a,o)),r&&(a=n.get(r)[0])&&!i.has(a)&&i.set(r,a),s&&(r=e.B.get(s))&&i.set(s,r)}return i}function iw(e,t){t=d(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=C_(i,"AUDIO");n=C_(i,"VIDEO");var s=C_(i,"SUBTITLES");if(i=pw(e,i),s){var a=lt(ct,i);e.H.set(s,a),un(i,a)}r&&(s=lt("audio",i),s||(s=e.g.hls.defaultAudioCodec),e.H.set(r,s)),n&&(r=lt("video",i),r||(r=e.g.hls.defaultVideoCodec),e.H.set(n,r))}}function rw(e,t){t=d(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=C_(i,"DATA-ID");n=C_(i,"URI");var s=C_(i,"LANGUAGE");i=C_(i,"VALUE"),r=(new Map).set("id",r),n&&r.set("uri",N_([e.D],n,e.B)[0]),s&&r.set("language",s),i&&r.set("value",i),n=new K("sessiondata",r),e.h&&e.h.onEvent(n)}}function sw(e,t){var n,i,r,s,a,o;return U(function(l){if(!e.h||!e.g)return l.return();for(i=d(t),r=i.next();!r.done;r=i.next())if(s=r.value,a=C_(s,"PATHWAY-ID"),o=C_(s,"SERVER-URI"),a&&o){e.j=new Ib(e.h),e.j.configure(e.g),e.j.i=[e.D],e.j.setManifestType("HLS"),e.j.h=a,n=xb(e.j,o);break}return S(l,n,0)})}function aw(e,t){var n=D_(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return mw(e,[t],new Map).stream}catch(n){if(e.g.hls.ignoreTextStreamFailures)return null;throw n}}),n=d(n);for(var i=n.next();!i.done;i=n.next()){var r=I_(i.value,"GROUP-ID");if((i=e.H.get(r))&&(r=e.I.get(r))){r=d(r);for(var s=r.next();!s.done;s=r.next())s=s.value,s.stream.codecs=i,s.stream.mimeType=Vw(ct,i)||Hw(ct),ow(s.stream)}}return t.filter(function(e){return e})}function ow(e){var t=new Set([Ui(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Ui(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function lw(e,t,n){var i,s;return U(function(a){return 1==a.g?(i=t.map(function(t){var n,i;return U(function(r){if(1==r.g)return e.g.disableThumbnails?r.return(null):(A(r,2),S(r,yw(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=x(r),e.g.hls.ignoreImageStreamFailures)return r.return(null);throw i})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=vw(e,t);return"image"!==n.stream.type?null:n.stream}catch(r){if(e.g.hls.ignoreImageStreamFailures)return null;throw r}})),S(a,Promise.all(i),2)):(s=a.h,a.return(s.filter(function(e){return e})))})}function uw(e,t,n){t=t.filter(function(e){var t=C_(e,"URI")||"";return e=C_(e,"TYPE"),"SUBTITLES"!=e&&(""!=t||"AUDIO"==e)});var i={};t=d(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var s=E_(r,!e.j);i[s]?i[s].push(r):i[s]=[r]}for(var a in i)mw(e,i[a],n,!1)}function cw(e,t){return t.map(function(t){return t=vw(e,t),"video"!==t.stream.type?null:t.stream}).filter(function(e){return e})}function dw(e,t,n,i,r,s,a){var o,l,u,c,p,f,g,m,y,v,b,T,_,w,E,A,C,I,x,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q,W;return U(function(U){switch(U.g){case 1:if(o=[],l=new Set,e.g.ignoreDrmInfo||!(0<n.length)){U.A(2);break}u=d(n),c=u.next();case 3:if(c.done){U.A(2);break}if(p=c.value,f=I_(p,"METHOD"),g=C_(p,"KEYFORMAT")||"identity",m=null,"NONE"==f){U.A(4);break}if(Qw(f)){y=N_(r(),I_(p,"URI"),s),v=y.sort().join(""),e.K.has(v)||(b=bs(y,e.g.retryParameters),T=$w(e,b,6).promise,e.K.set(v,T)),U.A(4);break}if("identity"==g)return S(U,Jw(e,p,"",r,null,s),12);if(_=e.dc.get(g),!_){w=null,U.A(10);break}return S(U,_(p,"",null),11);case 11:w=U.h;case 10:m=w,U.A(6);break;case 12:m=U.h;case 6:if(m){if(m.keyIds)for(E=d(m.keyIds),A=E.next();!A.done;A=E.next())C=A.value,l.add(C);o.push(m)}case 4:c=u.next(),U.A(3);break;case 2:for(I={},x=d(t),k=x.next();!k.done;k=x.next())M=k.value,D=E_(M,!e.j),I[D]?I[D].push(M):I[D]=[M];for(O in R=[],I)N=I[O],L=N[0],P=C_(L,"FRAME-RATE"),B=Number(C_(L,"AVERAGE-BANDWIDTH"))||Number(I_(L,"BANDWIDTH")),F=C_(L,"RESOLUTION"),j=d(F?F.split("x"):[null,null]),V=j.next().value,H=j.next().value,z=C_(L,"VIDEO-RANGE"),(G=C_(L,"REQ-VIDEO-LAYOUT"))&&G.includes(",")&&(q=G.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),G=q[0]),G=G||"CH-MONO",W=hw(e,N,i),R.push.apply(R,h(fw(e,W.audio,W.video,B,V,H,P,z,G,o,l,a)));return U.return(R.filter(function(e){return null!=e}))}})}function hw(e,t,n){for(var i={audio:[],video:[]},r=new Map,s=[],a=!1,o=!1,l=d(t),u=l.next();!u.done;u=l.next()){var c=u.value;u=C_(c,"AUDIO");var p=C_(c,"VIDEO"),f=u||p;f&&(s.includes(f)||s.push(f),(c=C_(c,"PATHWAY-ID"))&&r.set(f,c),u?a=!0:p&&(o=!0))}s.length&&n.length&&(n=n.filter(function(e){return s.includes(I_(e,"GROUP-ID"))}),uw(e,n,r)),n=(r=s.sort().join(","))&&e.I.has(r)?e.I.get(r):[],a?i.audio.push.apply(i.audio,h(n)):o&&i.video.push.apply(i.video,h(n)),a=!1;var g=t.map(function(e){return I_(e,"URI")});return u=i.audio.find(function(e){return e&&e.S().find(function(e){return g.includes(e)})}),o=pw(e,t[0]),n=lt("video",o),(l=lt("audio",o))&&!n?(u="audio",a=0<i.audio.length):!i.audio.length&&!i.video.length&&l&&n?(u="video",o=[[n,l].join()]):i.audio.length&&u?(u="audio",a=!0):u=i.video.length&&!i.audio.length?"audio":"video",a||(e=bw(e,t,o,u),r&&(e.stream.groupId=r),i[e.stream.type]=[e]),i}function pw(e,t){return t=C_(t,"CODECS")||"",e.Y=0<t.length,e.Y||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Uc(t.split(/\s*,\s*/))}function fw(e,t,n,i,r,s,a,o,l,u,c,h){for(var p=d(n),f=p.next();!f.done;f=p.next())qw(f.value.stream,r,s,a,o,l,null);for(r=e.g.disableAudio,t.length&&!r||(t=[null]),r=e.g.disableVideo,n.length&&!r||(n=[null]),r=[],t=d(t),s=t.next();!s.done;s=t.next())for(s=s.value,a=d(n),o=a.next();!o.done;o=a.next()){var g=o.value;(o=s?s.stream:null)&&(o.drmInfos=u,o.keyIds=c),(l=g?g.stream:null)&&(l.drmInfos=u,l.keyIds=c,e.g.disableIFrames||Br(l,h)),l&&!o&&(l.bandwidth=i),!l&&o&&(o.bandwidth=i),p=s?s.stream.drmInfos:null,f=g?g.stream.drmInfos:null,g=g?g.S().sort().join(","):"";var m=s?s.S().sort().join(","):"",y=[];o&&o.codecs&&y.push(o.codecs),l&&l.codecs&&y.push(l.codecs),g=[g,m,y.sort()].join("-"),o&&l&&!$r(p,f)||e.Ya.has(g)||(o={id:e.F++,language:o?o.language:"und",disabledUntilTime:0,primary:!!o&&o.primary||!!l&&l.primary,audio:o,video:l,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(o),e.Ya.add(g))}return r}function gw(e,t){t=D_(t,"CLOSED-CAPTIONS"),e.N=0==t.length,t=d(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=C_(i,"LANGUAGE");n=vt(r||"und"),r||(r=C_(i,"NAME"))&&(n=r),r=I_(i,"GROUP-ID"),i=I_(i,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(r)||e.G.set(r,new Map),e.G.get(r).set(i,n)}}function mw(e,t,n,i){i=void 0===i||i;for(var r=[],s=[],a=new Map,o=d(t),l=o.next();!l.done;l=o.next()){var u=l.value;l=i?I_(u,"URI"):C_(u,"URI")||"shaka://hls-muxed",u=I_(u,"GROUP-ID"),r.push(l),s.push(u),a.set(u,l)}if(i=s.sort().join(","),l=t[0],t="",o=I_(l,"TYPE").toLowerCase(),"subtitles"==o&&(o=ct),o==ct)t=C_(l,"CODECS")||"";else for(s=d(s),u=s.next();!u.done;u=s.next())if(u=u.value,e.H.has(u)){t=e.H.get(u);break}if(s=r.sort().join(","),e.i.has(s))return e.i.get(s);if(u=e.F++,e.j){a=d(a);for(var c=a.next();!c.done;c=a.next()){var h=d(c.value);c=h.next().value,h=h.next().value,(c=n.get(c))&&Db(e.j,u,c,h)}}var p;n=C_(l,"LANGUAGE"),a=C_(l,"NAME"),c="YES"==C_(l,"DEFAULT"),h="audio"==o&&(h=C_(l,"CHANNELS"))?parseInt(h.split("/")[0],10):null,"audio"==o&&(p=C_(l,"CHANNELS"))?(p=p.split("/"),p=2==p.length&&("JOC"===p[1]||p[1].includes("ATMOS"))):p=!1;var f=C_(l,"CHARACTERISTICS"),g="YES"==C_(l,"FORCED");return l="audio"==o&&(l=C_(l,"SAMPLE-RATE"))?parseInt(l,10):null,r=Tw(e,u,r,t,o,n,c,a,h,null,f,g,l,p),r.stream&&(r.stream.groupId=i),e.I.has(i)?e.I.get(i).push(r):e.I.set(i,[r]),e.i.set(s,r),r}function yw(e,t){var n,i,r,s,a,o,l,u,c,d;return U(function(h){return 1==h.g?(n=I_(t,"URI"),i=C_(t,"CODECS","jpeg")||"",e.i.has(n)?h.return(e.i.get(n)):(r=C_(t,"LANGUAGE"),s=C_(t,"NAME"),a=C_(t,"CHARACTERISTICS"),o=Tw(e,e.F++,[n],i,"image",r,!1,s,null,null,a,!1,null,!1),(l=C_(t,"RESOLUTION"))?S(h,o.stream.createSegmentIndex(),3):h.A(2))):(2!=h.g&&(u=rc(o.stream.segmentIndex),c=u.tilesLayout)&&(o.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),o.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(d=C_(t,"BANDWIDTH"))&&(o.stream.bandwidth=Number(d)),e.i.set(n,o),h.return(o))})}function vw(e,t){var n="video",i=I_(t,"URI"),r=C_(t,"CODECS")||"";if("mjpg"==r&&(n="image"),e.i.has(i))return e.i.get(i);var s=C_(t,"LANGUAGE"),a=C_(t,"NAME"),o=C_(t,"CHARACTERISTICS");return n=Tw(e,e.F++,[i],r,n,s,!1,a,null,null,o,!1,null,!1),r=C_(t,"RESOLUTION"),s=d(r?r.split("x"):[null,null]),r=s.next().value,s=s.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(s)||void 0,(t=C_(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function bw(e,t,n,i){for(var r=e.F++,s=[],a=d(t),o=a.next();!o.done;o=a.next()){var l=o.value;o=I_(l,"URI"),l=C_(l,"PATHWAY-ID"),e.j&&l&&Db(e.j,r,l,o),s.push(o)}if(a=s.sort().join(",")+n.sort().join(","),e.i.has(a))return e.i.get(a);o=s.join(",");e:{if(t=C_(t[0],"CLOSED-CAPTIONS"),"video"==i){if(e.g.disableText){e.N=!1,t=null;break e}if(t){if("NONE"!=t){t=e.G.get(t);break e}e.N=!1}else if(!t&&e.G.size)for(t=d(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=ot(i,n),i=Tw(e,r,s,n,i,null,!1,o,null,t,null,!1,null,!1),e.i.set(a,i),i}function Tw(e,t,n,i,r,s,a,o,l,u,c,h,p,f){function g(t){var n,g,v,T,_,w,C,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q;return U(function(U){switch(U.g){case 1:return n=dt,A(U,2),S(U,t.promise,4);case 4:if(g=U.h,t.aborted)return U.return();if(v=g.uri,v!=g.originalUri&&(T=b.S(),T.includes(v)||b.Uf.push(v)),_=B_(e.La,g.data),1!=_.type)throw new Le(2,4,4017);return w=M_(_.ka,"EXT-X-DEFINE"),C=nw(e,w,v),k=!1,(!e.Y&&e.g.hls.disableCodecGuessing||e.N&&r==n.Ea&&!e.g.hls.disableClosedCaptionsDetection)&&0<_.segments.length&&(e.N=!1,k=!0),M=!e.Y&&e.g.hls.disableCodecGuessing,D=Kw(e),S(U,Cw(e,0,C,_,m,i,r,s,a,o,l,u,c,h,p,f,void 0,k,M),5);case 5:if(R=U.h,t.aborted)return U.return();if(O=R.stream,Dw(e,_),Kw(e)&&!D&&Nw(e,_),b.gd=R.gd,b.uc=R.uc,b.ef=R.ef,b.df=R.df,b.ee=R.ee,b.Ef=R.Ef,b.Vb=R.Vb,b.Wb=R.Wb,b.Ah=!0,y.segmentIndex=O.segmentIndex,y.encrypted=O.encrypted,y.drmInfos=O.drmInfos,y.keyIds=O.keyIds,y.mimeType=O.mimeType,y.bandwidth=y.bandwidth||O.bandwidth,y.codecs=y.codecs||O.codecs,y.closedCaptions=y.closedCaptions||O.closedCaptions,y.width=y.width||O.width,y.height=y.height||O.height,y.hdr=y.hdr||O.hdr,y.colorGamut=y.colorGamut||O.colorGamut,y.frameRate=y.frameRate||O.frameRate,"und"==y.language&&"und"!=O.language&&(y.language=O.language),y.language=y.language||O.language,y.channelsCount=y.channelsCount||O.channelsCount,y.audioSamplingRate=y.audioSamplingRate||O.audioSamplingRate,ow(y),y.drmInfos.length&&e.h.newDrmInfo(y),N=!1,(!u&&y.closedCaptions||u&&y.closedCaptions&&u.size!=y.closedCaptions.size)&&(N=!0),e.m&&N&&e.h.makeTextStreamsForClosedCaptions(e.m),r==n.Ea||r==n.ma)for(L=d(e.i.values()),P=L.next();!P.done;P=L.next())B=P.value,B.Ah||B.type!=r||B.stream.isAudioMuxedInVideo||(B.stream.mimeType=O.mimeType,ow(B.stream));r==n.gb&&(F=rc(O.segmentIndex))&&F.ea&&(y.mimeType="application/mp4",ow(y)),j=bc(y),y.segmentIndex.Hb(function(e){e.ea&&(e.ea.Ed=j)}),Aw(e)&&(e.yc?Sw(e,[b]):(e.yc=!0,V=Array.from(e.i.values()),H=V.filter(function(e){return e.stream.segmentIndex}),Sw(e,H),ew(e),z=e.s,0<z&&e.C.X(z))),Fw(e,_.ka,y.type,C,m),e.m&&(e.m.startTime=e.u),I(U,0);break;case 2:if(G=x(U),y.closeSegmentIndex(),7001===G.code)return U.return();if(q=e.h.disableStream(y),!q)throw G;E(U)}})}function m(){return e.j&&1<n.length?Rb(e.j,t):b.Uf.concat(L_([e.D],n,e.B))}var y=xw(e,i,r,s,a,o,l,u,c,h,p,f);n.includes("shaka://hls-muxed")&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",ow(y));var v,b={stream:y,type:r,Uf:[],gd:0,uc:0,Ef:new Map,ef:!1,df:!1,ee:!1,Pg:-1,Vb:-1,Wb:-1,Ah:!1,S:m},T=null;return y.createSegmentIndex=function(){return T||(y.isAudioMuxedInVideo?(y.segmentIndex=new ic([]),Promise.resolve()):(v=Ww(e,b.S(),!0),T=new Promise(function(e){e(g(v))})))},y.closeSegmentIndex=function(){T&&!y.segmentIndex&&v.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),T=null},b}function _w(e){var t=1/0;e=d(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&"text"!=n.stream.type&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.uc));return t}function ww(e,t){var n=[];t=d(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.Hb(function(e){n.push(e)});e.l.re(n)}function Sw(e,t){if(!Kw(e))for(var n=_w(e),i=d(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.xd(0,n);ww(e,t.map(function(e){return e.stream})),i=Array.from(e.i.values()).filter(function(e){return e.stream.segmentIndex}),n=i.some(function(e){return"audio"==e.stream.type}),r=i.some(function(e){return"video"==e.stream.type}),i=Kw(e)&&!e.Ta,n=!Kw(e)&&e.Ta&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?K_(e,t,i):(Y_(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&K_(e,t))}function Ew(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Aw(e){if(!e.m)return!1;var t=[],n=[];e=d(e.m.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(e){return e.segmentIndex})||0<n.length&&!n.some(function(e){return e.segmentIndex}))}function Cw(e,t,n,i,r,s,a,o,l,u,c,d,h,p,f,g,m,y,v){var b,T,_,w,E,A,C,I,x,k,M,D,R,O,N,L,P,B,F,j,V,H,z,G,q,W,X,K,Y;return y=void 0===y||y,v=void 0===v||v,U(function(t){switch(t.g){case 1:if(b=i.segments||[],T=b.every(function(e){return!!R_(e.ka,"EXT-X-GAP")}),!b.length||T)throw new Le(2,4,4053);if(Rw(e,i),Kw(e)&&Ow(e,i),_=Kw(e)?e.L.get(a):new Map,w=jw(e,i,_,n,r,a),E=w.segments,A=w.bandwidth,M=k=x=I=C=null,!(0<E.length&&y)){t.A(2);break}return S(t,Z_(e,E),3);case 3:D=t.h,a=D.type,o=D.language,c=D.channelCount,f=D.sampleRate,e.g.disableText||(d=D.closedCaptions),I=D.height,C=D.width,x=D.Ge,k=D.colorGamut,M=D.frameRate,v&&(m=D.mimeType,s=D.codecs);case 2:if(m){t.A(4);break}return S(t,Gw(e,a,s,E),5);case 5:m=t.h,a!=ct||s||"application/mp4"!=m||!E[0]||E[0].ea||(m="text/vtt");case 4:return S(t,kw(e,i,m,r,n),6);case 6:if(R=t.h,O=R.drmInfos,N=R.keyIds,L=R.encrypted,P=R.wi,L&&!O.length&&!P)throw new Le(2,4,4026);return B=xw(e,s,a,o,l,u,c,d,h,p,f,g),B.encrypted=L&&!P,B.drmInfos=O,B.keyIds=N,B.mimeType=m,A&&(B.bandwidth=A),ow(B),"video"==a&&(C||I||x||k)&&qw(B,C,I,M,x,null,k),Kw(e)&&Ow(e,i),F=E[0].startTime,j=E[E.length-1],V=j.endTime,H=new ic(E),B.segmentIndex=H,G=!!(z=R_(i.ka,"EXT-X-SERVER-CONTROL"))&&null!=A_(z,"CAN-SKIP-UNTIL"),q=!!z&&null!=A_(z,"CAN-BLOCK-RELOAD"),W=O_(i.ka,"EXT-X-MEDIA-SEQUENCE",0),X=Iw(W,E),K=X.Vb,Y=X.Wb,t.return({stream:B,type:a,Uf:[],S:r,gd:F,uc:V,ef:G,df:q,ee:!1,Pg:-1,Vb:K,Wb:Y,Ef:_,Ah:!1})}})}function Iw(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Vb:e,Wb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Vb:e,Wb:n}):(e++,t.m&&(n=0),{Vb:e,Wb:n})}function xw(e,t,n,i,r,s,a,o,l,u,c,h){var p=Vw(n,t)||Hw(n),f=[];if(l){l=d(l.split(","));for(var g=l.next();!g.done;g=l.next())f.push(g.value)}return l=void 0,g=null,n==ct?l=f.includes("public.accessibility.transcribes-spoken-dialog")&&f.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":f.includes("public.accessibility.describes-video")&&(g="visually impaired"),f.length||"subtitle"!==l||f.push("subtitle"),e={id:e.F++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:p,codecs:t,kind:n==ct?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:vt(i||"und"),originalLanguage:i,label:s,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:f,forced:u,channelsCount:a,audioSamplingRate:c,spatialAudio:h,closedCaptions:o,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:g,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},ow(e),e}function kw(e,t,n,i,r){var s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,E,A,C,I,x,k,M,D,R,O,N,L;return U(function(P){switch(P.g){case 1:if(s=new Map,!e.g.ignoreDrmInfo&&t.segments)for(a=d(t.segments),o=a.next();!o.done;o=a.next())if(l=o.value,u=M_(l.ka,"EXT-X-KEY"),c=null,u.length)for(c=Lw(e,t,l.ka,i,r),h=d(u),p=h.next();!p.done;p=h.next())f=p.value,s.set(f,c);m=g=!1,y=[],v=new Set,b=d(s),T=b.next();case 2:if(T.done){P.A(4);break}if(_=T.value,w=d(_),E=w.next().value,A=w.next().value,C=E,I=A,x=I_(C,"METHOD"),"NONE"==x){P.A(3);break}if(g=!0,k=C_(C,"KEYFORMAT")||"identity",M=null,Qw(x)){m=!0,P.A(3);break}if("identity"==k)return S(P,Jw(e,C,n,i,I,r),11);if(D=e.dc.get(k),!D){R=null,P.A(9);break}return S(P,D(C,n,I),10);case 10:R=P.h;case 9:M=R,P.A(6);break;case 11:M=P.h;case 6:if(M){if(M.keyIds)for(O=d(M.keyIds),N=O.next();!N.done;N=O.next())L=N.value,v.add(L);y.push(M)}case 3:T=b.next(),P.A(2);break;case 4:return P.return({drmInfos:y,keyIds:v,encrypted:g,wi:m})}})}function Mw(t,n,i,r,s){if(!e.crypto||!e.crypto.subtle)throw J("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Le(2,4,4042);var a=0,o=C_(n,"IV","");if(o){var l=tt(o.substr(2));if(16!=l.byteLength)throw new Le(2,4,4048)}else a=O_(i.ka,"EXT-X-MEDIA-SEQUENCE",0);var u=N_(r(),I_(n,"URI"),s),c=u.sort().join("");if(i=n.toString()+"-"+a+"-"+c,!t.ba.has(i)){var d={bitsKey:128,blockCipherMode:"CBC",iv:l,firstMediaSequenceNumber:a};switch(I_(n,"METHOD")){case"AES-256":d.bitsKey=256;break;case"AES-256-CTR":d.bitsKey=256,d.blockCipherMode="CTR"}d.fetchKey=function(){var n,i,r,s;return U(function(a){if(1==a.g)return t.K.has(c)||(n=bs(u,t.g.retryParameters),i=$w(t,n,6).promise,t.K.set(c,i)),S(a,t.K.get(c),2);if(3!=a.g){if(r=a.h,!r.data||r.data.byteLength!=d.bitsKey/8)throw new Le(2,4,4049);return s={name:"CTR"==d.blockCipherMode?"AES-CTR":"AES-CBC",length:d.bitsKey},S(a,e.crypto.subtle.importKey("raw",r.data,s,!0,["decrypt"]),3)}d.cryptoKey=a.h,d.fetchKey=void 0,E(a)})},t.ba.set(i,d)}return t.ba.get(i)}function Dw(e,t){null==e.u&&(t=R_(t.ka,"EXT-X-START"))&&(e.u=Number(I_(t,"TIME-OFFSET")))}function Rw(e,t){var n=R_(t.ka,"EXT-X-PLAYLIST-TYPE");t=R_(t.ka,"EXT-X-ENDLIST"),t=n&&"VOD"==n.value||t,n=n&&"EVENT"==n.value&&!t,n=!t&&!n,Yw(e,t?lS:n?cS:uS)}function Ow(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var s=R_(i[r].ka,"EXTINF");if(s){n=Number(s.value.split(",")[0]);break}r--}if(i=R_(t.ka,"EXT-X-TARGETDURATION"),!i)throw new Le(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=R_(t.ka,"EXT-X-PART-INF"))&&(e.O=Number(I_(r,"PART-TARGET"))),t=R_(t.ka,"EXT-X-SERVER-CONTROL"),e.$&&e.O?(e.s=e.wc?5*e.O<=n?Math.min(e.O,e.s):Math.min(n,e.s):Math.min(e.O,e.s),e.fb=t?Number(I_(t,"PART-HOLD-BACK")):0):(e.s=Math.min(n,e.s),n=t?A_(t,"HOLD-BACK"):null,e.Ha=n?Number(n.value):0),e.Na=Math.max(i,e.Na)}function Nw(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.fb)n=e.fb;else if(e.Ha)n=e.Ha;else{var i=t.segments.length,r=e.g.hls.liveSegmentsDelay;for(r>i-2&&(r=Math.max(1,i-2)),r=i-r;r<i;r++){var s=R_(t.segments[r].ka,"EXTINF");n=s?n+Math.ceil(Number(s.value.split(",")[0])):n+e.Na}}e.u&&0>e.u&&(n=Math.min(-e.u,n),e.u+=n),e.l.Gj(0),e.l.Uh(n),e.l.md(!1)}function Lw(e,t,n,i,r){var s=R_(n,"EXT-X-MAP");if(!s)return null;var a=I_(s,"URI"),o=N_(i(),a,r);if(a=[o.toString(),C_(s,"BYTERANGE","")].join("-"),!e.ra.has(a)){var l=void 0,u=null,c=!1;n=d(n);for(var h=n.next();!h.done;h=n.next())h=h.value,"EXT-X-KEY"==h.name?(c=I_(h,"METHOD"),Qw(c)&&h.id<s.id?(c=!1,l=Mw(e,h,t,i,r)):c="NONE"!=c):"EXT-X-BYTERANGE"==h.name&&h.id<s.id&&(u=h);t=Pw(o,s,u,l,c),e.ra.set(a,t)}return e.ra.get(a)}function Pw(e,t,n,i,r){var s=0,a=null;return t=C_(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(s=t.split("@"),a=Number(s[0]),s=Number(s[1]),a=s+a-1,i&&(n=a+1-s,n%16&&(a+=16-n%16))),new zo(function(){return e},s,a,null,null,null,i,r)}function Uw(t,n,i,r,s,a,o,l,u){function c(e){e=new he(e).ub.split(".").pop();var t=aS.get(o).get(e);return t||(t=tS.get(e)),t}var h=r.ka,p=R_(h,"EXTINF"),f=0,g=0,m=null;r.ec.length&&(t.m.isLowLatency=!0);var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var v=R_(h,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=Bn(v.value),t.Ta=!0)}var b=Xo;if(R_(h,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!p){if(0==r.ec.length)throw new Le(2,4,4024,"EXTINF");if(!t.$)return null}var T=[];v=!1;var _=null,w=!1,S=!1;if(t.$&&r.ec.length){f=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var E=y,A={},C=0;C<r.ec.length;A={lg:void 0,Nf:void 0},C++){var I=r.ec[C],x=0==C?i:T[T.length-1],k=0==C?s:x.endTime,M=Number(C_(I,"DURATION"))||t.O;if(M){var D=k+M,R=0,O=null;if("EXT-X-PRELOAD-HINT"==I.name?(R=(R=C_(I,"BYTERANGE-START"))?Number(R):0,(x=C_(I,"BYTERANGE-LENGTH"))?O=R+Number(x)-1:R&&(O=Number.MAX_SAFE_INTEGER)):(R=C_(I,"BYTERANGE"),O=d(Bw(x,R)),R=O.next().value,O=O.next().value),A.Nf=C_(I,"URI"),A.Nf){x=Xo,"YES"==C_(I,"GAP")&&(t.m.gapCount++,x=2,w=!0),A.lg=null;var N=function(e){return function(){return null==e.lg&&(e.lg=N_(l(),e.Nf,a)),e.lg}}(A);f&&0<=R&&null!=O&&(_=N,v=!0),k=new qo(k,D,N,R,O,n,0,0,1/0,[],"",null,E,x,u),"EXT-X-PRELOAD-HINT"==I.name&&(k.Bh(),S=!0),"YES"!=C_(I,"INDEPENDENT")&&0<C&&k.Dd(),(A=c(A.Nf))&&(k.mimeType=A,oS.has(A)&&(k.ea=null)),T.push(k),E&&(E+=M)}}}}if(p){if(p=Number(p.value.split(",")[0]),0==p)return null;f=s+p}else{if(!T.length)return null;f=T[T.length-1].endTime}v&&(w||0!=T[0].startByte?(v=!1,_=null):T=[]),(p=R_(h,"EXT-X-BYTERANGE"))?(m=d(Bw(i,p.value)),g=m.next().value,m=m.next().value):T.length&&(g=T[0].startByte,m=T[T.length-1].endByte),i="",p=null,"image"==o&&(i="1x1",h=R_(h,"EXT-X-TILES"))&&(i=I_(h,"LAYOUT"),(h=C_(h,"DURATION"))&&(p=Number(h)));var L=null;return n=new qo(s,f,function(){return _?_():(null==L&&(L=N_(l(),r.g,a)),L||[])},g,m,n,0,0,1/0,T,i,p,y,b,u,0<T.length&&!!r.g),(s=c(r.g))&&(n.mimeType=s,oS.has(s)&&(n.ea=null)),v&&(t.wc=!0,n.cj(),S&&n.Bh()),n}function Bw(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,i=n+t-1),[n,i]}function Fw(e,t,n,i,r){if("video"==n||"audio"==n){var s=e.l.m;if(s&&!Ew(e,n))for(t=M_(t,"EXT-X-DATERANGE"),t=t.filter(function(e){return null!=A_(e,"START-DATE")}).sort(function(e,t){return e=I_(e,"START-DATE"),t=I_(t,"START-DATE"),e<t?-1:e>t?1:0}),n=0;n<t.length;n++){var a=t[n];try{var o=I_(a,"START-DATE"),l=Bn(o);if(!isNaN(l)){var u=Math.max(0,l-s),c=null,h=C_(a,"END-DATE");if(h){var p=Bn(h);if(!isNaN(p)&&(c=p-s,0>c))continue}if(null==c){var f=C_(a,"DURATION")||C_(a,"PLANNED-DURATION");if(f){var g=parseFloat(f);if(isNaN(g)||(c=u+g),0>l-s+g)continue}}var m=C_(a,"CLASS")||"com.apple.quicktime.HLS",y="YES"==C_(a,"END-ON-NEXT");if(null==c&&y){for(var v=n+1;v<t.length;v++){var b=C_(t[v],"CLASS")||"com.apple.quicktime.HLS";if(m==b){var T=I_(t[v],"START-DATE"),_=Bn(T);if(!isNaN(_)&&_&&_>l){c=Math.max(0,_-s);break}}}if(null==c)continue}v=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var w=[],S=d(a.attributes),E=S.next();!E.done;E=S.next()){var A=E.value;if(!v.includes(A.name)){var C=P_(A.value,i);"X-ASSET-URI"!=A.name&&"X-ASSET-LIST"!=A.name||(C=N_(r(),A.value,i)[0]),w.push({key:A.name,description:"",data:C,mimeType:null,pictureType:null})}}1<w.length&&e.h.onMetadata(m,u,c,w)}}catch(I){}}}}function jw(e,t,n,i,r,s){var a=t.segments,o=void 0,l=O_(t.ka,"EXT-X-DISCONTINUITY-SEQUENCE",-1),u=O_(t.ka,"EXT-X-MEDIA-SEQUENCE",0),c=R_(t.ka,"EXT-X-SKIP"),h=c?Number(C_(c,"SKIPPED-SEGMENTS")):0,p=u+h,f=0;Kw(e)&&n.has(p)&&(f=n.get(p)),0===f&&e.sa==cS&&0<n.size&&!n.has(p)&&null!=e.l.i&&(f=e.l.Kb());var g=[],m=null;c=[];for(var y=0;y<a.length;y++){var v=a[y],b=0==y?f:m.endTime;p=u+h+y,R_(v.ka,"EXT-X-DISCONTINUITY")&&(l++,m&&m.ea&&(m.ea.g=b));for(var T=d(v.ka),_=T.next();!_.done;_=T.next())_=_.value,"EXT-X-KEY"==_.name&&(o=Qw(I_(_,"METHOD"))?Mw(e,_,t,r,i):void 0);n.set(p,b),T=Lw(e,t,v.ka,r,i),(b=Uw(e,T,m,v,b,i,s,r,o))&&((m=O_(v.ka,"EXT-X-BITRATE"))?c.push({bitrate:m,duration:b.endTime-b.startTime}):c.length&&(m=c.pop(),m.duration+=b.endTime-b.startTime,c.push(m)),m=b,b.i=l,Ew(e,s)&&null!=e.J&&p<e.J||g.push(b))}if(t=void 0,c.length&&(t=c.reduce(function(e,t){return e+t.duration},0),t=Math.round(c.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),c=g.some(function(e){return null!=e.h}))for(n={},i=0;i<g.length;n={lf:void 0,kf:void 0,$e:void 0,jd:void 0,Ze:void 0},i++)if(n.jd=g[i],null==n.jd.h)for(n.kf=0,n.lf=i,r=function(e){return function(){var t=g[e.lf];if(t){if(null!=t.h)return t.h+e.kf;e.kf-=t.endTime-t.startTime,e.lf+=1}return null}}(n),n.Ze=0,n.$e=i,a=function(e){return function(){var t=g[e.$e];if(t){if(t!=e.jd&&(e.Ze+=t.endTime-t.startTime),null!=t.h)return t.h+e.Ze;--e.$e}return null}}(n);null==n.jd.h;)n.jd.h=a(),null==n.jd.h&&(n.jd.h=r());if(c)for(n=d(g),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=d(r.g),a=r.next();!a.done;a=r.next())a=a.value,a.h=i,i+=a.endTime-a.startTime;if(n=e.Z,c&&1/0!=n&&!Ew(e,s))for(e=d(g),s=e.next();!s.done;s=e.next())s.value.gi(n);return{segments:g,bandwidth:t}}function Vw(e,t){if(e==ct){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function Hw(e){return e==ct?"text/vtt":aS.get(e).get("mp4")}function zw(e,t){e=Kw(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];2==n.Ic()&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function Gw(e,t,n,i){var r,s,a,o,l,u,c,d,h,p,f,g,m;return U(function(y){switch(y.g){case 1:return r=Cs,s=zw(e,i),a=s.segment,2==a.status?y.return(Hw(t)):(o=a.S(),l=new he(o[0]),u=l.ub.split(".").pop(),c=aS.get(t),(d=c.get(u))||(d=tS.get(u))||(d=Vw(t,n))?y.return(d):(p=1,f=bs(o,e.g.retryParameters),A(y,2),f.method="HEAD",S(y,$w(e,f,r,{type:p}).promise,4)));case 4:g=y.h,h=g.headers["content-type"],I(y,3);break;case 2:if(m=x(y),!m||1002!=m.code&&1001!=m.code){y.A(3);break}return f.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(f.headers.Range="bytes=0-0"),S(y,$w(e,f,r,{type:p}).promise,6);case 6:g=y.h,h=g.headers["content-type"];case 3:if(!h){y.A(7);break}if(d=h.toLowerCase().split(";")[0],"application/octet-stream"!=d){y.A(8);break}if(g.data.byteLength){y.A(9);break}return f.method="GET",S(y,$w(e,f,r,{type:p}).promise,10);case 10:g=y.h;case 9:Bl(De(g.data))&&(d="video/mp2t");case 8:if("application/octet-stream"!=d)return y.return(d);case 7:return y.return(Hw(t))}})}function qw(e,t,n,i,r,s,a){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=s||void 0,e.colorGamut=a||void 0)}function Ww(e,t,n){return $w(e,bs(t,e.g.retryParameters),0,{type:n?2:3})}function Xw(e){var t,n,i,r,s,a;return U(function(o){switch(o.g){case 1:return e.h?(A(o,2),t=Date.now(),S(o,e.update(),4)):o.return();case 4:n=Date.now(),Kw(e)&&(i=(n-t)/1e3,e.cb.sample(1,i),r=0<e.g.updatePeriod?e.g.updatePeriod:e.s,s=Math.max(0,r-Mt(e.cb)),e.C.X(s)),I(o,3);break;case 2:if(a=x(o),!e.h)return o.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(a),o.return();a.severity=1,e.h.onError(a),e.C.X(.1);case 3:if(!e.h)return o.return();e.h.onManifestUpdated(),E(o)}})}function Kw(e){return e.sa!=lS}function Yw(e,t){e.sa=t,e.l&&e.l.md(!Kw(e)),Kw(e)||e.C.stop()}function $w(e,t,n,i){if(!e.U)throw new Le(2,7,7001);return i||(i={}),i.isPreload=e.Lb(),t=e.h.networkingEngine.request(n,t,i),gs(e.U,t),t}function Qw(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function Zw(t,n,i,r){var s,a,o,l,u,c;return U(function(d){if(1==d.g){if("video/mp2t"==i)throw new Le(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Le(2,4,4041);if(s=I_(n,"METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"],!a.includes(s))return d.return(null);o="cenc","SAMPLE-AES"==s&&(o="cbcs"),l=I_(n,"URI"),u=st("com.apple.fps",o,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],l);var h=new he(l).Gb.replace(/-/g,"").toLowerCase();return(c=32===h.length&&/^[0-9a-f]+$/.test(h)?h:null)||!r?d.A(2):S(d,eS(t,r),3)}return 2!=d.g&&(c=d.h),c&&u.keyIds.add(c),d.return(u)})}function Jw(t,n,i,r,s,a){var o,l,u,c,d,h,p,f,g,m,y,v;return U(function(b){switch(b.g){case 1:if("video/mp2t"==i)throw new Le(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Le(2,4,4041);if(o=I_(n,"METHOD"),l=["SAMPLE-AES","SAMPLE-AES-CTR"],!l.includes(o))return b.return(null);if(u=N_(r(),I_(n,"URI"),a),u[0].startsWith("data:text/plain;base64,")){c=nt(et(u[0].split("data:text/plain;base64,").pop())),b.A(2);break}return d=u.sort().join(""),t.na.has(d)||(h=bs(u,t.g.retryParameters),p=$w(t,h,6).promise,t.na.set(d,p)),S(b,t.na.get(d),3);case 3:f=b.h,c=nt(f.data);case 2:if(g="00000000000000000000000000000000",!s){b.A(4);break}return S(b,eS(t,s),5);case 5:(m=b.h)&&(g=m);case 4:return y=new Map,y.set(g,c),v="cenc","SAMPLE-AES"==o&&(v="cbcs"),b.return(at(y,v))}})}function eS(e,t){var n,i,r,s;return U(function(a){return 1==a.g?(n=null,e.oa.has(t)?(n=e.oa.get(t),a.A(2)):(i=Vc(t.S(),t.Hc(),t.Fc(),e.g.retryParameters),r=Cs,S(a,$w(e,i,r,{type:0}).promise,3))):(2!=a.g&&(s=a.h,t.ze(s.data),n=Fc(s.data),e.oa.set(t,n)),a.return(n))})}X("shaka.net.DataUriPlugin",H_),H_.parse=z_,ys("data",z_),i=q_.prototype,i.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Lb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.T()&&this.C.Ka()},i.start=function(e,t){var n,i=this;return U(function(r){return 1==r.g?(i.h=t,i.$=t.isLowLatencyMode(),S(r,Ww(i,[e]).promise,2)):3!=r.g?(n=r.h,i.D=n.uri,S(r,Q_(i,n.data),3)):r.return(i.m)})},i.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.U&&(e.push(this.U.destroy()),this.U=null),this.g=this.h=null,this.Ya.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.B.clear(),this.ra.clear(),this.ba.clear(),this.K.clear(),this.na.clear(),this.oa.clear(),this.j&&this.j.destroy(),this.P&&(this.P.release(),this.P=null),Promise.all(e)},i.update=function(){var e,t,n,i,r,s,a,o,l,u,c,p,f=this;return U(function(g){if(1==g.g){if(!Kw(f))return g.return();for(e=[],t=Array.from(f.i.values()),f.s=1/0,f.m.gapCount=0,n=t.filter(function(e){return e.stream.segmentIndex}),i=d(n),r=i.next();!r.done;r=i.next())s=r.value,e.push(X_(f,s));return S(g,Promise.all(e),2)}for(ww(f,n.map(function(e){return e.stream})),a=n.some(function(e){return 0==e.ee}),n.length&&!a&&(o=dS,Yw(f,o.bk),l=n.map(function(e){return e.uc}),f.l.vb(Math.min.apply(Math,h(l))),f.h.updateDuration()),a&&ew(f),u=d(n),c=u.next();!c.done;c=u.next())p=c.value,p.stream.isAudioMuxedInVideo||!p.stream.segmentIndex||rc(p.stream.segmentIndex)||f.h.disableStream(p.stream);E(g)})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(e){this.j&&this.j.banLocation(e)},i.setMediaElement=function(e){this.R=e},X("shaka.hls.HlsParser",q_);var tS=(new Map).set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),nS=(new Map).set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),iS=(new Map).set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),rS=(new Map).set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),sS=(new Map).set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),aS=(new Map).set("audio",nS).set("video",iS).set("text",rS).set("image",sS),oS=new Set(["video/mp2t"].concat(h(Xi))),lS="VOD",uS="EVENT",cS="LIVE",dS={bk:lS,Jm:uS,Tm:cS};function hS(e){return Mv(e)}Ya("application/x-mpegurl",function(){return new q_}),Ya("application/vnd.apple.mpegurl",function(){return new q_});var pS=(new Map).set("com.microsoft.playready",hS).set("com.microsoft.playready.recommendation",hS).set("com.microsoft.playready.software",hS).set("com.microsoft.playready.hardware",hS);function fS(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.D=new kt(5),this.s=new sr(function(){gS(e)}),this.C=new fs,this.m=new Map,this.B=function(){return!1}}function gS(e){var t;U(function(n){switch(n.g){case 1:return A(n,2),S(n,mS(e),4);case 4:I(n,3);break;case 2:t=x(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();E(n)}})}function mS(e){var t,n,i,r,s,a,o;return U(function(l){if(1==l.g)return t=bs(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.B()}),gs(e.C,r),S(l,r.promise,2);if(s=l.h,!e.h)return l.return();s.uri&&!e.l.includes(s.uri)&&e.l.unshift(s.uri);var u=s.uri,c=s.data,p=e.g.mss.manifestPreprocessor;if(p!=Jd){if(Bt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=mT(c,"SmoothStreamingMedia"),!c)throw new Le(2,4,4046,u);p(c),c=We(c.outerHTML)}var f=wn(c,"SmoothStreamingMedia");if(!f)throw new Le(2,4,4046,u);if(u=e.g.mss.manifestPreprocessorTXml,u!=eh&&u(f),e.i||(e.i=new Ou(null,0)),u=Nn(f,"IsLive",qn,!1))throw new Le(2,4,4047);e.i.md(!u),p=Nn(f,"TimeScale",zn,1e7),c=Nn(f,"DVRWindowLength",zn),u&&(0===c||isNaN(c))&&(c=1/0);var g,m=Nn(f,"CanSeek",qn,!1);for(0===c&&m&&(c=1/0),m=null,c&&0<c&&(m=c/p),u&&!isNaN(e.g.availabilityWindowOverride)&&(m=e.g.availabilityWindowOverride),null==m&&(m=1/0),e.i.ag(m),c=Nn(f,"Duration",zn,1/0),u||e.i.vb(c/p),u={variants:[],textStreams:[],timescale:p,duration:c/p},m=xn(f,"Protection"),p=e.g.mss.keySystemsBySystemId,c=[],m=d(m),g=m.next();!g.done;g=m.next())c=c.concat(xn(g.value,"ProtectionHeader"));if(c.length){for(m=[],g=0;g<c.length;g++){var y=c[g],v=y.attributes.SystemID.toLowerCase(),b=p[v];if(b){var T;e:{if(T=kv(y)){T=d(Dn(T,"DATA"));for(var _=T.next();!_.done;_=T.next())if(_=Rn(_.value,"KID")){T=et(kn(_)),T=new Uint8Array([T[3],T[2],T[1],T[0],T[5],T[4],T[7],T[6]].concat(h(T.slice(8)))),T=nt(T);break e}}T=null}_=et(kn(y)),v=tt(v.replace(/-/g,"")),v=[{initData:Ks(_,v,new Set,0),initDataType:"cenc",keyId:T}],v=st(b,"cenc",v),T&&v.keyIds.add(T),(b=pS.get(b))&&(v.licenseServerUri=b(y)),m.push(v)}}p=m}else p=[];for(g=p,m=[],p=[],c=[],f=xn(f,"StreamIndex"),f=d(f),y=f.next();!y.done;y=f.next()){y=y.value,b=xn(y,"QualityLevel"),v=u.timescale,T=u.duration,_=xn(y,"c");for(var w=[],A=0,C=0;C<_.length;++C){var I=_[C],x=_[C+1],k=Nn(I,"t",zn),M=Nn(I,"d",zn);if(I=Nn(I,"r",Vn),!M)break;if(k=null!=k?k:A,(I=I||0)&&I--,0>I)if(x){if(x=Nn(x,"t",zn),null==x)break;if(k>=x)break;I=Math.ceil((x-k)/M)-1}else{if(1/0==T)break;if(k/v>=T)break;I=Math.ceil((T*v-k)/M)-1}for(x=0;x<=I;++x)A=k+M,w.push({start:k/v,end:A/v,ni:k}),k=A}for(v=w,b=d(b),T=b.next();!T.done;T=b.next())(T=yS(e,y,T.value,v,g,u))&&("audio"!=T.type||e.g.disableAudio?"video"!=T.type||e.g.disableVideo?T.type!=ct||e.g.disableText||c.push(T):p.push(T):m.push(T))}for(f=[],m=d(0<m.length?m:[null]),g=m.next();!g.done;g=m.next())for(g=g.value,y=d(0<p.length?p:[null]),w=y.next();!w.done;w=y.next())b=f,v=b.push,T=e,_=g,w=w.value,C=0,_&&_.bandwidth&&0<_.bandwidth&&(C+=_.bandwidth),w&&w.bandwidth&&0<w.bandwidth&&(C+=w.bandwidth),T={id:T.u++,language:_?_.language:"und",disabledUntilTime:0,primary:!!_&&_.primary||!!w&&w.primary,audio:_,video:w,bandwidth:C,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(b,T);u.variants=f,u.textStreams=c,e.j?(e.j.variants=u.variants,e.j.textStreams=u.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:u.variants,textStreams:u.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.Df()),Promise.resolve(),a=Date.now(),o=(a-i)/1e3,e.D.sample(1,o),E(l)})}function yS(e,t,n,i,r,s){var a=t.attributes.Type;if("audio"!==a&&"video"!==a&&"text"!==a)return J("Ignoring unrecognized type:",a),null;var o=t.attributes.Language,l=e.u++,u=Nn(n,"Bitrate",Hn),c=Nn(n,"MaxWidth",Hn),d=Nn(n,"MaxHeight",Hn),h=Nn(n,"Channels",Hn),p=Nn(n,"SamplingRate",Hn),f=s.duration;i.length&&(f=i[i.length-1].end-i[0].start);var g=e.i.getDuration();e.i.vb(Math.min(f,g));var m={id:l,originalId:t.attributes.Name||String(l),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:u||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:vt(o||"und"),originalLanguage:o,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:f,timescale:s.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=SS.get(r))&&m.roles.push(r),"main"===r&&(m.primary=!0)),r=n.attributes.FourCC,null!==r&&""!==r||(r=t.attributes.FourCC),!r)if("audio"===a)r="AAC";else if("video"===a)return J('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!wS.includes(r.toUpperCase()))return J("Codec not supported:",r),null;switch(n=vS(n,a,r,m),m.mssPrivateData.codecPrivateData=n,a){case"audio":if(!n)return J("Quality unsupported without CodecPrivateData",a),null;m.type="audio",m.mimeType="mss/audio/mp4",m.codecs=bS(r,n);break;case"video":if(!n)return J("Quality unsupported without CodecPrivateData",a),null;m.type="video",m.mimeType="mss/video/mp4",m.codecs=TS(n);break;case"text":m.type=ct,m.mimeType="application/mp4",("TTML"===r||"DFXP"===r)&&(m.codecs="stpp")}return m.fullMimeTypes.add(Ui(m.mimeType,m.codecs)),m.createSegmentIndex=function(){if(m.segmentIndex)return Promise.resolve();if(e.m.has(m.id))var n=e.m.get(m.id);else n=[],"video"==m.type&&(n=m.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n={id:m.id,type:m.type,codecs:m.codecs,encrypted:m.encrypted,timescale:m.mssPrivateData.timescale,duration:m.mssPrivateData.duration,Eb:n,Ma:new Uint8Array([]),Wa:new Uint8Array([]),bb:0,eb:0,data:null,stream:m},n=uo(new lo([n])),e.m.set(m.id,n);return n=_S(e,new zo(function(){return[]},0,null,bc(m),m.mssPrivateData.timescale,n,null,m.encrypted),m,t,i),m.segmentIndex=new ic(n),Promise.resolve()},m.closeSegmentIndex=function(){m.segmentIndex&&(m.segmentIndex.release(),m.segmentIndex=null)},m}function vS(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],"AACH"===n?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function bS(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}function TS(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function _S(e,t,n,i,r){var s=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=d(r);for(var a=r.next(),o={};!a.done;o={fg:void 0},a=r.next())o.fg=a.value,i.push(new qo(o.fg.start,o.fg.end,function(t){return function(){return rt(e.l,[s.replace("{start time}",String(t.fg.ni))])}}(o),0,null,t,0,0,n.mssPrivateData.duration));return i}i=fS.prototype,i.configure=function(e,t){this.g=e,t&&(this.B=t)},i.start=function(e,t){var n=this;return U(function(i){if(1==i.g)return n.l=[e],n.h=t,S(i,mS(n),2);if(!n.h)throw new Le(2,7,7001);return i.return(n.j)})},i.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.s&&(this.s.stop(),this.s=null),this.m.clear(),this.C.destroy()},i.update=function(){var e,t=this;return U(function(n){return 1==n.g?(A(n,2),S(n,mS(t),4)):2!=n.g?I(n,0):(e=x(n),t.h&&e?(t.h.onError(e),void E(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},X("shaka.mss.MssParser",fS);var wS="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),SS=(new Map).set("CAPT","main").set("SUBT","alternate").set("DESC","main");function ES(e,t,n,i,r,s,a){if(200<=n&&299>=n&&202!=n||304==n)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:s};s=null;try{s=qe(t)}catch(o){}throw new Le(401==n||403==n?2:1,1,1001,i,n,s,e,a,r||i)}function AS(){}function CS(e,t,n,i,r,s){var a=new OS;Ds(t.headers).forEach(function(e,t){a.append(t,e)});var o=new DS,l={Ci:!1,Uj:!1};if(e=IS(e,t,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},l,i,r,t.streamDataCallback,s.minBytesForProgressEvents||0),e=new os(e,function(){return l.Ci=!0,o.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new sr(function(){l.Uj=!0,o.abort()});u.X(t/1e3),e.finally(function(){u.stop()})}return e}function IS(e,t,n,i,r,s,a,o,l){var u,c,d,h,p,f,g,m,y,v,b,T,_,w,C;return U(function(k){switch(k.g){case 1:return u=MS,c=RS,h=new ArrayBuffer(0),f=p=0,g={},m=Date.now(),A(k,2),S(k,u(e,i),4);case 4:if(d=k.h,g=xS(d.headers),a(g),"HEAD"==i.method){k.A(5);break}return v=(y=d.headers.get("Content-Length"))?parseInt(y,10):0,d.body?(b=d.clone().body.getReader(),T=function(e){function t(){var n,i,r,a;return U(function(u){switch(u.g){case 1:return A(u,2),S(u,b.read(),4);case 4:n=u.h,I(u,3);break;case 2:return x(u),u.return();case 3:if(n.done){u.A(5);break}if(p+=n.value.byteLength,!o){u.A(5);break}return S(u,o(n.value),5);case 5:i=Date.now(),r=p-f,(100<i-m&&r>=l||n.done)&&(a=n.done?0:v-p,s(i-m,r,a),f=p,m=i),n.done?e.close():(e.enqueue(n.value),t()),E(u)}})}t()},new c({start:T}),S(k,d.arrayBuffer(),8)):S(k,d.arrayBuffer(),9);case 8:h=k.h,k.A(5);break;case 9:h=k.h,_=Date.now(),s(_-m,h.byteLength,0);case 5:t.headers.Range&&(w=t.headers.Range.replace("bytes=","").split("-").filter(function(e){return e}).map(function(e){return parseInt(e,10)}),2==w.length&&h.byteLength!=w[1]-w[0]+1&&J("Payload length does not match range requested bytes",t,d)),I(k,3);break;case 2:if(C=x(k),r.Ci)throw new Le(1,1,7001,e,n);if(r.Uj)throw new Le(1,1,1003,e,n);throw new Le(1,1,1002,e,C,n);case 3:return k.return(ES(g,h,d.status,e,d.url,t,n))}})}function xS(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}function kS(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(XO){return!1}return!!e.Response&&(!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController))}Ya("application/vnd.ms-sstr+xml",function(){return new fS}),X("shaka.net.HttpFetchPlugin",AS),AS.isSupported=kS,AS.parse=CS;var MS=e.fetch,DS=e.AbortController,RS=e.ReadableStream,OS=e.Headers;function NS(){}function LS(e,t,n,i,r,s){var a=new PS,o=Date.now(),l=0,u=new Promise(function(u,c){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials;var h={};for(var p in a.onabort=function(){c(new Le(1,1,7001,e,n))},a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.HEADERS_RECEIVED){var e=a.getAllResponseHeaders().trim().split("\r\n"),t={};e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value.split(": "),t[n[0].toLowerCase()]=n.slice(1).join(": ");h=t,r(h)}},a.onload=function(r){var s=a.response;try{i(Date.now()-o,r.loaded-l,0);var d=ES(h,s,a.status,e,a.responseURL,t,n);u(d)}catch(p){c(p)}},a.onerror=function(t){c(new Le(1,1,1002,e,t,n))},a.ontimeout=function(){c(new Le(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now(),n=s.minBytesForProgressEvents||0,r=e.loaded-l;(100<t-o&&r>=n||e.lengthComputable&&e.loaded==e.total)&&(i(t-o,r,4==a.readyState?0:e.total-e.loaded),l=e.loaded,o=t)},t.headers)a.setRequestHeader(p.toLowerCase(),t.headers[p]);a.send(t.body)});return new os(u,function(){return a.abort(),Promise.resolve()})}kS()&&(ys("http",CS,2,!0),ys("https",CS,2,!0),ys("blob",CS,2,!0)),X("shaka.net.HttpXHRPlugin",NS),NS.parse=LS;var PS=e.XMLHttpRequest;function US(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function BS(e){var t=e.cc(!1);return t?Je(t):e.S().map(function(e){return"{"+encodeURI(e.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function FS(e,t){return Vc(e.g.S(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function jS(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function VS(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}function HS(e){return 0==e.i?0:e.j/e.i}function zS(e){var t=this;this.u=e,this.i=new Map,this.h=new ks(function(){return qS(t).catch(function(){})}),this.j=[],this.s=function(){},this.m=function(){},this.g=new jS,this.l=!1}function GS(e,t,n){e.s=t,e.m=n}function qS(e){e.l=!0;var t=e.j.map(function(e){return e()});return e.j=[],Promise.all(t)}function WS(e,t,n,i,r,s){Ms(e.h);var a=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new Le(2,9,7001);if(r){var t=De(n);for(var a in t=new Xs(t),t.data){var o=Number(a);e.m(t.data[o],t.g[o])}}return e.g.close(i,n.byteLength),e.s(HS(e.g),e.g.g),s(n)});e.i.set(t,a)}function XS(e){return U(function(t){return 1==t.g?S(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function KS(e,t){var n,i,r,s;return U(function(a){return 1==a.g?(n=Cs,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),S(a,i.promise,2)):(s=a.h,un(e.j,r),a.return(s.data))})}function YS(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new as,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function $S(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return U(function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,S(i,t(e.key,e.value,e),2));e.continue(),E(i)})}})}function QS(e){this.h=e,this.g=[]}function ZS(e,t){return JS(e,t,"readwrite")}function JS(e,t,n){n=e.h.transaction([t],n);var i=new YS(n,t);return e.g.push(i),i.promise().then(function(){un(e.g,i)},function(){un(e.g,i)}),i}function eE(e,t,n){this.h=new QS(e),this.i=t,this.g=n}function tE(e,t,n){e=ZS(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}function nE(e){return Promise.reject(new Le(2,9,9011,"Cannot add new value to "+e))}function iE(e,t,n,i){e=ZS(e.h,t),t=e.store(),n=d(n);for(var r=n.next(),s={};!r.done;s={yh:void 0},r=n.next())s.yh=r.value,t.delete(s.yh).onsuccess=function(e){return function(){return i(e.yh)}}(s);return e.promise()}function rE(e,t,n){var i,r,s,a,o,l,u;return U(function(c){if(1==c.g){for(i=JS(e.h,t,"readonly"),r=i.store(),s={},a=[],o=d(n),l=o.next(),u={};!l.done;u={Wf:void 0,zf:void 0},l=o.next())u.zf=l.value,u.Wf=r.get(u.zf),u.Wf.onsuccess=function(e){return function(){void 0==e.Wf.result&&a.push(e.zf),s[e.zf]=e.Wf.result}}(u);return S(c,i.promise(),2)}if(a.length)throw new Le(2,9,9012,"Could not find values for "+a);return c.return(n.map(function(e){return s[e]}))})}function sE(e){this.g=new QS(e)}function aE(){this.g=new Map}function oE(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,i){e.hasFixedKeySpace()||t||(t={path:{Ub:n,ib:i},ib:e})})}),t)return t;throw new Le(2,9,9013,"Could not find a cell that supports add-operations")}function lE(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,i){t({Ub:n,ib:i},e)})})}function uE(e,t,n){if(e=e.g.get(t),!e)throw new Le(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new Le(2,9,9013,"Could not find cell with name "+n);return t}function cE(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}function dE(e){var t=Array.from(e.g.keys());if(!t.length)throw new Le(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function hE(e){var t,n,i;return U(function(r){return 1==r.g?(t=Array.from(e.g.values()),n=0<t.length,n||(i=fE,i.forEach(function(e){(e=e())&&t.push(e)})),S(r,Promise.all(t.map(function(e){return e.erase()})),2)):n?r.A(0):S(r,Promise.all(t.map(function(e){return e.destroy()})),0)})}function pE(e,t){fE.set(e,t)}ys("http",LS,1,!0),ys("https",LS,1,!0),ys("blob",LS,1,!0),jS.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}},zS.prototype.destroy=function(){return this.h.destroy()},zS.prototype.queue=function(e,t,n,i,r){var s=this;Ms(this.h);var a=(this.i.get(e)||Promise.resolve()).then(function(){var e,a,o,l,u,c,d;return U(function(h){if(1==h.g)return S(h,KS(s,t),2);if(e=h.h,s.h.g)throw new Le(2,9,7001);if(i)for(l in a=De(e),o=new Xs(a),o.data)u=Number(l),c=o.data[u],d=o.g[u],s.m(c,d);return s.g.close(n,e.byteLength),s.s(HS(s.g),s.g.g),h.return(r(e))})});return this.i.set(e,a),a},YS.prototype.abort=function(){var e=this;return U(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return A(t,2),S(t,e.g,4)}if(2!=t.g)return I(t,0);x(t),E(t)})},YS.prototype.store=function(){return this.h},YS.prototype.promise=function(){return this.g},QS.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},i=eE.prototype,i.destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return nE(this.i)},i.removeSegments=function(e,t){return iE(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return U(function(i){return 1==i.g?S(i,rE(n,n.i,e),2):(t=i.h,i.return(t.map(function(e){return n.Hi(e)})))})},i.addManifests=function(){return nE(this.g)},i.updateManifest=function(){return Promise.reject(new Le(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=ZS(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return iE(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return U(function(i){return 1==i.g?S(i,rE(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map(function(e){return n.Wd(e)}))))})},i.getAllManifests=function(){var e,t,n=this;return U(function(i){return 1==i.g?(e=JS(n.h,n.g,"readonly"),t=new Map,S(i,$S(e,function(e,i){var r;return U(function(s){if(1==s.g)return S(s,n.Wd(i),2);r=s.h,t.set(e,r),E(s)})}),2)):3!=i.g?S(i,e.promise(),3):i.return(t)})},i.Hi=function(e){return e},i.Wd=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,s,a,o,l,u=this;return U(function(c){if(1==c.g){for(n=ZS(u.h,e),i=n.store(),r=[],s=d(t),a=s.next(),o={};!a.done;o={Mh:void 0},a=s.next())l=a.value,o.Mh=i.add(l),o.Mh.onsuccess=function(e){return function(){r.push(e.Mh.result)}}(o);return S(c,n.promise(),2)}return c.return(r)})},sE.prototype.destroy=function(){return this.g.destroy()},sE.prototype.getAll=function(){var e,t,n=this;return U(function(i){return 1==i.g?(e=JS(n.g,"session-ids","readonly"),t=[],S(i,$S(e,function(e,n){t.push(n)}),2)):3!=i.g?S(i,e.promise(),3):i.return(t)})},sE.prototype.add=function(e){var t=ZS(this.g,"session-ids"),n=t.store();e=d(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},sE.prototype.remove=function(e){var t,n=this;return U(function(i){return 1==i.g?(t=ZS(n.g,"session-ids"),S(i,$S(t,function(t,n,i){e.includes(n.sessionId)&&i.delete()}),2)):S(i,t.promise(),0)})},aE.prototype.destroy=function(){for(var e=[],t=d(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},aE.prototype.init=function(){var e=this;fE.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=d(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},X("shaka.offline.StorageMuxer",aE),aE.unregister=function(e){fE.delete(e)},aE.register=pE,aE.prototype.destroy=aE.prototype.destroy;var fE=new Map;function gE(){eE.apply(this,arguments)}function mE(e,t){bE(e);for(var n=d(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(n){return yE(n,e.startTime,t)})}function yE(e,t,n){var i=e.initSegmentUri?vE(e.initSegmentUri):null,r=t+e.presentationTimeOffset,s=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=vE(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:s,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function vE(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Le(2,9,9004,"Could not parse uri "+e)}function bE(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=d(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=d(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=d(e),s=r.next();!s.done;s=r.next())s.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=d(t),s=r.next();!s.done;s=r.next())s.value.variantIds.push(i);if(e.length&&t.length)for(t=d(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=d(e),s=r.next();!s.done;s=r.next()){s=s.value;var a=n++;i.variantIds.push(a),s.variantIds.push(a)}}}function TE(){eE.apply(this,arguments)}function _E(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function wE(){eE.apply(this,arguments)}function SE(){this.m=this.j=this.i=this.h=this.g=this.l=null}function EE(){var t=new as,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Le(2,9,9001,n.error)),e.preventDefault()},t}b(gE,eE),gE.prototype.updateManifestExpiration=function(e,t){var n,i,r,s=this;return U(function(a){return n=ZS(s.h,s.g),i=n.store(),r=new as,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Le(2,9,9012,"Could not find values for "+e))},S(a,Promise.all([n.promise(),r]),0)})},gE.prototype.Wd=function(e){var t,n,i,r,s,a;return U(function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,s=mE(e.periods[n],r),t.push(s);return S(o,Lb(t),2)}return a=o.h,o.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},gE.prototype.Hi=function(e){return{data:e.data}},b(TE,eE),TE.prototype.Wd=function(e){var t,n,i,r,s,a;return U(function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],u=[],c=d(l.streams),h=c.next();!h.done;h=c.next())h=h.value,0!=h.variantIds.length&&u.push(_E(h,l.startTime,l.startTime+r));s=u,t.push(s)}return S(o,Lb(t),2)}return a=o.h,o.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a,sequenceMode:!1})})},b(wE,eE),i=wE.prototype,i.hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return tE(this,e,t)},i.Wd=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},i=SE.prototype,i.init=function(){var t=this,n=new as,i=!1,r=new sr(function(){i=!0,n.reject(new Le(2,9,9017))});"number"===typeof AE&&0<AE&&r.X(AE);var s=e.indexedDB.open("shaka_offline_db",5);return s.onsuccess=function(){if(!i){r.stop();var e=s.result;t.l=e;var a=e.objectStoreNames;a=a.contains("manifest")&&a.contains("segment")?new gE(e,"segment","manifest"):null,t.g=a,a=e.objectStoreNames,a=a.contains("manifest-v2")&&a.contains("segment-v2")?new TE(e,"segment-v2","manifest-v2"):null,t.h=a,a=e.objectStoreNames,a=a.contains("manifest-v3")&&a.contains("segment-v3")?new TE(e,"segment-v3","manifest-v3"):null,t.i=a,a=e.objectStoreNames,a=a.contains("manifest-v5")&&a.contains("segment-v5")?new wE(e,"segment-v5","manifest-v5"):null,t.j=a,e=e.objectStoreNames.contains("session-ids")?new sE(e):null,t.m=e,n.resolve()}},s.onupgradeneeded=function(){for(var e=s.result,t=d(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},s.onerror=function(e){i||(r.stop(),n.reject(new Le(2,9,9001,s.error)),e.preventDefault())},n},i.destroy=function(){var e=this;return U(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),E(t)}})},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var e=this;return U(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return S(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),S(t,EE(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,S(t,e.init(),0)}})};var AE=5;function CE(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function IE(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new CE(t,n,i,Number(e[4])):null}function xE(e,t){this.h=e,this.g=t}function kE(e,t){var n=new Ou(null,0);n.vb(t.duration);var i=t.streams.filter(function(e){return"audio"==e.type}),r=t.streams.filter(function(e){return"video"==e.type});i=ME(e,i,r,n),r=t.streams.filter(function(e){return e.type==ct}).map(function(t){return DE(e,t,n)});var s=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return DE(e,t,n)}),a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=d(i.values()),l=o.next();!l.done;l=o.next())l=l.value,l.audio&&l.audio.encrypted&&(l.audio.drmInfos=a),l.video&&l.video.encrypted&&(l.video.drmInfos=a);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:s,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function ME(e,t,n,i){for(var r=new Set,s=d(t),a=s.next();!a.done;a=s.next()){a=d(a.value.variantIds);for(var o=a.next();!o.done;o=a.next())r.add(o.value)}for(s=d(n),a=s.next();!a.done;a=s.next())for(a=d(a.value.variantIds),o=a.next();!o.done;o=a.next())r.add(o.value);for(s=new Map,r=d(r),a=r.next();!a.done;a=r.next())a=a.value,s.set(a,{id:a,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=d(t),r=t.next();!r.done;r=t.next())for(a=r.value,r=DE(e,a,i),a=d(a.variantIds),o=a.next();!o.done;o=a.next())o=s.get(o.value),o.language=r.language,o.primary=o.primary||r.primary,o.audio=r;for(n=d(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=DE(e,r,i),r=d(r.variantIds),a=r.next();!a.done;a=r.next())a=s.get(a.value),a.primary=a.primary||t.primary,a.video=t;return s}function DE(e,t,n){var i=t.segments.map(function(n){return RE(e,n,t)});return n.re(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ic(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Ui(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function RE(e,t,n){var i=new CE("segment",e.h,e.g,t.dataKey);return e=new qo(t.startTime,t.endTime,function(){return[i.toString()]},0,null,null!=t.initSegmentKey?OE(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.dg(t.thumbnailSprite),e}function OE(e,t){var n=new CE("segment",e.h,e.g,t);return new zo(function(){return[n.toString()]},0,null)}function NE(){this.g=null}function LE(){}function PE(e,t){var n=IE(e);return n&&"manifest"==n.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=cs(e)):e=n&&"segment"==n.g?UE(n.key(),n,t):ls(new Le(2,1,9004,e)),e}function UE(e,t,n){var i=new aE;return cs(void 0).ab(function(){return i.init()}).ab(function(){return uE(i,t.Ub(),t.ib())}).ab(function(e){return e.getSegments([t.key()])}).ab(function(e){return{uri:t,data:e[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}function BE(e,t,n){var i,r,s,a,o,l;return U(function(u){switch(u.g){case 1:i=[];for(var c=[],h=d(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var f=!1,g=d(c),m=g.next();!m.done;m=g.next())if(m=m.value,jE(m.info,p)){m.sessionIds.push(p.sessionId),f=!0;break}f||c.push({info:p,sessionIds:[p.sessionId]})}r=d(c),s=r.next();case 2:if(s.done){u.A(4);break}return a=s.value,o=FE(e,t,a),S(u,o,5);case 5:l=u.h,i=i.concat(l),s=r.next(),u.A(2);break;case 4:return u.return(i)}})}function FE(e,t,n){var i,r;return U(function(s){switch(s.g){case 1:return i=new Ys({xc:t,onError:function(){},Lf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(s,2),i.configure(e),S(s,Js(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:I(s,3);break;case 2:return x(s),S(s,i.destroy(),5);case 5:return s.return([]);case 3:return r=[],S(s,Promise.all(n.sessionIds.map(function(e){return U(function(t){return 1==t.g?(A(t,2),S(t,ra(i,e),4)):2!=t.g?(r.push(e),I(t,0)):(x(t),void E(t))})})),6);case 6:return S(s,i.destroy(),7);case 7:return s.return(r)}})}function jE(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&cn(e.audioCapabilities,t.audioCapabilities,n)&&cn(e.videoCapabilities,t.videoCapabilities,n)}function VE(e,t,n){var i=t.presentationTimeline.getDuration();return t=zE(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function HE(e,t){var n=kE(new xE(e.Ub(),e.ib()),t),i=t.appMetadata||{};return n=zE(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function zE(e){var t=[],n=Lr(e.variants);n=d(n);for(var i=n.next();!i.done;i=n.next())t.push(xr(i.value));for(e=d(e.textStreams),n=e.next();!n.done;n=e.next())t.push(kr(n.value));return t}function GE(){this.g=new Map}function qE(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,s=i.bandwidth||t.bandwidth-r;0>=s&&(s=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,s)}}function WE(e,t){e.g.set(t.id,t.bandwidth||2048)}function XE(e,t){return e=e.g.get(t),null==e&&(e=0),e}function KE(e){var t=this;if(e&&e.constructor!=Gp)throw new Le(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Ib()):(this.h=Yd(),this.g=new ms,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new ks(function(){var e,i,r,s,a;return U(function(o){switch(o.g){case 1:return S(o,Promise.all(t.l.map(function(e){return qS(e)})),2);case 2:for(e=function(){},i=[],r=d(t.i),s=r.next();!s.done;s=r.next())a=s.value,i.push(a.then(e,e));return S(o,Promise.all(i),3);case 3:if(!n){o.A(4);break}return S(o,t.g.destroy(),4);case 4:t.h=null,t.g=null,E(o)}})}),this.m=1e9}function YE(){if(r_(Be()))e:{for(var e=d(fE.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function $E(e,t,n,i,r,s,a,o){var l,u,c,h,p,f,g,m,y,v,b,T,_,w,E,C,I,D,R,O,N,L,P,B;return U(function(U){switch(U.g){case 1:return TA(),u=l=null,c=new aE,f=p=h=null,A(U,2,3),S(U,s(),5);case 5:return l=U.h,S(U,dA(e,t,l,a),6);case 6:if(g=U.h,bA(e),m=!g.presentationTimeline.T()&&!g.presentationTimeline.ed(),!m)throw new Le(2,9,9005,t);y=d(i),v=y.next();case 7:if(v.done){U.A(9);break}return b=v.value,S(U,hA(e,b,g),10);case 10:T=U.h,g.imageStreams.push(T),bA(e),v=y.next(),U.A(7);break;case 9:_=d(r),w=_.next();case 11:return w.done?(Ma(a.drm.clearKeys,g.variants),I=g.variants.some(function(e){if(e.audio)for(var t=d(e.audio.drmInfos),n=t.next();!n.done;n=t.next())if(n.value.licenseServerUri.startsWith("data:"))return!0;if(e.video)for(e=d(e.video.drmInfos),t=e.next();!t.done;t=e.next())if(t.value.licenseServerUri.startsWith("data:"))return!0;return!1}),D=a.offline.usePersistentLicense,I&&(D=!1),S(U,e.ud(g,function(e){f=f||e},a,D),15)):(E=w.value,S(U,pA(e,g,E.uri,E.language,E.kind,E.mime,E.codecs),14));case 14:C=U.h,g.textStreams.push(C),bA(e),w=_.next(),U.A(11);break;case 15:if(u=U.h,bA(e),f)throw f;return S(U,eA(g,u,a,D),16);case 16:return S(U,c.init(),17);case 17:return bA(e),S(U,oE(c),18);case 18:return h=U.h,bA(e),R=tA(u,g,t,n,a,o,D),O=R.El,N=R.ki,S(U,h.ib.addManifests([O]),19);case 19:if(L=U.h,bA(e),p=L[0],bA(e),f)throw f;return S(U,QE(e,N,p,O,o,a,h.ib,g,u,D),20);case 20:return bA(e),rA(g,O,u,D),S(U,h.ib.updateManifest(p,O),21);case 21:return bA(e),P=new CE("manifest",h.path.Ub,h.path.ib,p),U.return(HE(P,O));case 3:return k(U),S(U,c.destroy(),22);case 22:if(!l){U.A(23);break}return S(U,l.stop(),23);case 23:if(!u){U.A(25);break}return S(U,u.destroy(),25);case 25:M(U,0);break;case 2:if(B=x(U),null==p){U.A(27);break}return S(U,ZE(p),27);case 27:throw f||B}})}function QE(e,t,n,i,r,s,a,o,l,u){var c,h,p,f,g,m,y,v,b,T,_;return U(function(w){switch(w.g){case 1:if(c={},h=0,p=function(){if(e.j.g||r.l)throw new Le(2,9,7001)},f=function(e,t){var f,g,m,y,v,b,T,_,w;return U(function(A){if(1==A.g){for(f=d(e),g=f.next(),m={};!g.done;m={pc:void 0},g=f.next())m.pc=g.value,p(),y=FS(m.pc,s),v=m.pc.i,b=m.pc.h,T=function(e){return function(t){var n,i,r,s;return U(function(o){switch(o.g){case 1:if(n=e.pc.g,i=n.cc(!1),!n.aesKey||i){o.A(2);break}return S(o,jc(t,n.aesKey,e.pc.j),3);case 3:t=o.h;case 2:return r=BS(n),S(o,a.addSegments([{data:t}]),4);case 4:s=o.h,p(),c[r]=s[0],h+=t.byteLength,E(o)}})}}(m),_=m.pc.g,(w=_.cc(!1))?WS(r,m.pc.groupId,w,v,b,T):r.queue(m.pc.groupId,y,v,b,T);return S(A,XS(r),2)}return p(),!t||r.l?A.A(0):(rA(o,i,l,u),S(A,a.updateManifest(n,i),0))})},g=!1,A(w,2),!nA(o)||!g||iA(o)){w.A(4);break}return S(w,f(t.filter(function(e){return e.h}),!0),5);case 5:return p(),t=t.filter(function(e){return!e.h}),m=c,y=h,c={},h=0,S(w,JE(a,n,i,m,y,function(){return bA(e)}),6);case 6:p();case 4:if(g){w.A(7);break}return S(w,f(t,!1),8);case 8:return p(),v=c,b=h,c={},h=0,S(w,JE(a,n,i,v,b,function(){return p()}),9);case 9:p();case 7:I(w,0);break;case 2:return T=x(w),_=Object.values(c),S(w,a.removeSegments(_,function(){}),10);case 10:throw T}})}function ZE(e){var t,n,i,r;return U(function(s){switch(s.g){case 1:return t=new aE,S(s,t.init(),2);case 2:return S(s,oE(t),3);case 3:return n=s.h,i=new CE("manifest",n.path.Ub,n.path.ib,e),S(s,t.destroy(),4);case 4:return r=new KE,S(s,r.remove(i.toString()),0)}})}function JE(e,t,n,i,r,s){var a,o,l,u,c,h,p,f,g,m,y;return U(function(v){switch(v.g){case 1:for(a=!1,A(v,2),o=!0,l=d(n.streams),u=l.next();!u.done;u=l.next())for(c=u.value,h=d(c.segments),p=h.next();!p.done;p=h.next())f=p.value,g=f.pendingSegmentRefId?i[f.pendingSegmentRefId]:null,null!=g&&(f.dataKey=g,f.pendingSegmentRefId=void 0),g=f.pendingInitSegmentRefId?i[f.pendingInitSegmentRefId]:null,null!=g&&(f.initSegmentKey=g,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(o=!1),f.pendingInitSegmentRefId&&(o=!1);return n.size+=r,o&&(n.isIncomplete=!1),S(v,e.updateManifest(t,n),4);case 4:a=!0,s(),I(v,0);break;case 2:return m=x(v),S(v,ZE(t),5);case 5:if(a){v.A(6);break}return y=Object.values(i),S(v,e.removeSegments(y,function(){}),6);case 6:throw m}})}function eA(e,t,n,i){var r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w,C,k,M,D,R,O,N,L,P,B,F,j;return U(function(U){switch(U.g){case 1:return r={width:1/0,height:1/0},pr(e,n.restrictions,r),S(U,mr(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(s=[],a=n.preferredDecodingAttributes,o=n.preferredVideoCodecs,l=n.preferredAudioCodecs,u=n.preferredTextFormats,dr(e,o,l,a,u),c=d(e.variants),h=c.next();!h.done;h=c.next())p=h.value,s.push(xr(p));for(f=d(e.textStreams),g=f.next();!g.done;g=f.next())m=g.value,s.push(kr(m));for(y=d(e.imageStreams),v=y.next();!v.done;v=y.next())b=v.value,s.push(Mr(b));return S(U,n.offline.trackSelectionCallback(s),3);case 3:for(T=U.h,_=e.presentationTimeline.getDuration(),w=0,C=d(T),k=C.next();!k.done;k=C.next())M=k.value,D=M.bandwidth*_/8,w+=D;return A(U,4),S(U,n.offline.downloadSizeCallback(w),6);case 6:if(R=U.h,!R)throw new Le(2,9,9014);I(U,5);break;case 4:if(O=x(U),O instanceof Le)throw O;throw new Le(2,9,9015);case 5:for(N=new Set,L=new Set,P=new Set,B=d(T),F=B.next();!F.done;F=B.next())j=F.value,"variant"==j.type&&N.add(j.id),"text"==j.type&&L.add(j.id),"image"==j.type&&P.add(j.id);e.variants=e.variants.filter(function(e){return N.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return L.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return P.has(e.id)}),CA(e),E(U)}})}function tA(e,t,n,i,r,s,a){var o=VE(n,t,i),l=r.offline.progressCallback;GS(s,function(e,t){o.size=t,l(o,e)},function(t,n){u&&a&&c==n&&aa(e,"cenc",t)});var u=nA(t)&&!iA(t),c=null;u&&(c=IA.get(e.g.keySystem));for(var h=new GE,p=d(t.textStreams),f=p.next();!f.done;f=p.next())h.g.set(f.value.id,52);for(p=d(t.imageStreams),f=p.next();!f.done;f=p.next())WE(h,f.value);for(p=d(t.variants),f=p.next();!f.done;f=p.next())qE(h,f.value);return s=mA(s,h,t,r),r=s.streams,s=s.ki,(h=e.g)&&a&&(h.initData=[]),{El:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.be(),streams:r,sessionIds:a?oa(e):[],drmInfo:h,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},ki:s}}function nA(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function iA(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function rA(e,t,n,i){if(t.expiration=n.be(),n=oa(n),t.sessionIds=i?n:[],nA(e)&&i&&!n.length)throw new Le(2,9,9007)}function sA(e,t){var n,i,r,s,a,o;return U(function(l){switch(l.g){case 1:if(TA(),n=IE(t),null==n||"manifest"!=n.g)throw new Le(2,9,9004,t);return i=n,r=new aE,C(l,2),S(l,r.init(),4);case 4:return S(l,uE(r,i.Ub(),i.ib()),5);case 5:return s=l.h,S(l,s.getManifests([i.key()]),6);case 6:return a=l.h,o=a[0],S(l,Promise.all([oA(e,o,r),lA(s,i,o)]),2);case 2:return k(l),S(l,r.destroy(),8);case 8:M(l,0)}})}function aA(e,t){for(var n=[],i=d(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Ui(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Ui(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function oA(e,t,n){return U(function(i){return S(i,EA(e.g,e.h.drm,n,t),0)})}function lA(e,t,n){function i(){}var r=SA(n);return HE(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function uA(e){var t,n,i,r,s,a,o,l,u,c;return U(function(h){switch(h.g){case 1:return TA(),t=e.g,n=e.h.drm,i=new aE,r=!1,C(h,2),S(h,i.init(),4);case 4:s=[],cE(i,function(e){return s.push(e)}),a=d(s),o=a.next();case 5:if(o.done){h.A(2);break}return l=o.value,S(h,l.getAll(),8);case 8:return u=h.h,S(h,BE(n,t,u),9);case 9:return c=h.h,S(h,l.remove(c),10);case 10:c.length!=u.length&&(r=!0),o=a.next(),h.A(5);break;case 2:return k(h),S(h,i.destroy(),11);case 11:M(h,3);break;case 3:return h.return(!r)}})}function cA(){var e,t,n;return U(function(i){switch(i.g){case 1:return TA(),e=[],t=new aE,C(i,2),S(i,t.init(),4);case 4:return n=Promise.resolve(),lE(t,function(t,i){n=n.then(function(){var n;return U(function(r){if(1==r.g)return S(r,i.getAllManifests(),2);n=r.h,n.forEach(function(n,i){n=HE(new CE("manifest",t.Ub,t.ib,i),n),e.push(n)}),E(r)})})}),S(i,n,2);case 2:return k(i),S(i,t.destroy(),6);case 6:M(i,3);break;case 3:return i.return(e)}})}function dA(e,t,n,i){var r,s,a,o,l;return U(function(u){if(1==u.g)return r=null,s=e.g,a={networkingEngine:s,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),bA(e),S(u,n.start(t,a),2);if(3!=u.g)return o=u.h,bA(e),l=AA(o),S(u,Promise.all(oe(l,function(e){return e.createSegmentIndex()})),3);if(bA(e),r)throw r;return u.return(o)})}function hA(e,t,n){var i,r,s,a,o,l,u,c,h,p,f,g,m,y,v;return U(function(b){switch(b.g){case 1:return S(b,fA(e,t),2);case 2:if(i=b.h,"text/vtt"!=i)throw new Le(1,2,2017,t);return S(b,gA(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=b.h,s=$i(i),!s)throw new Le(2,2,2014,i);for(a=s(),o={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},l=De(r),u=a.parseMedia(l,o,t,[]),c=[],h=d(u),p=h.next(),f={};!p.done;f={mg:void 0,wd:void 0},p=h.next())f.wd=p.value,f.mg=null,g=function(e){return function(){return null==e.mg&&(e.mg=rt([t],[e.wd.payload])),e.mg||[]}}(f),m=new qo(f.wd.startTime,f.wd.endTime,g,0,null,null,0,0,1/0),f.wd.payload.includes("#xywh")&&(y=f.wd.payload.split("#xywh=")[1].split(","),4===y.length&&m.dg({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),c.push(m);if(v=i,!c.length){b.A(4);break}return S(b,Rh(c[0].S()[0],e.g,e.h.manifest.retryParameters),5);case 5:v=b.h;case 4:return b.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ic(c),mimeType:v||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ui(v||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function pA(e,t,n,i,r,s,a){var o,l,u;return U(function(c){if(1==c.g)return s?c.A(2):S(c,fA(e,n),3);if(2!=c.g&&(s=c.h),o={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:sc(0,t.presentationTimeline.getDuration(),[n]),mimeType:s||"",codecs:a||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:ct,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Ui(s||"",a||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},l=Ui(o.mimeType,o.codecs),u=Qi(l),!u)throw new Le(2,2,2014,s);return c.return(o)})}function fA(e,t){var n;return U(function(i){switch(i.g){case 1:return A(i,2),S(i,Rh(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,I(i,3);break;case 2:x(i);case 3:if(n)return i.return(n);throw new Le(1,2,2011,t)}})}function gA(e,t,n){var i,r,s;return U(function(a){return 1==a.g?(i=Cs,r=bs([e],n),r.method="GET",S(a,t.request(i,r).promise,2)):(s=a.h,a.return(s.data))})}function mA(e,t,n,i){var r=new Map,s=AA(n),a=new Map;s=d(s);for(var o=s.next();!o.done;o=s.next()){o=o.value;var l=yA(e,t,n,o,i,r);a.set(o.id,l)}for(e=d(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&a.get(t.audio.id).variantIds.push(t.id),t.video&&a.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(a.values()),ki:Array.from(r.values())}}function yA(e,t,n,i,r,s){var a={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},o=r.offline.numberOfParallelDownloads,l=0===o?i.id:0;return vA(i,n.presentationTimeline.Kb(),function(n,r){var u=BS(n),c=void 0;if(!s.has(u)){var d=n.endTime-n.startTime;d=XE(t,i.id)*d,d=VS(e.g,d),s.set(u,new US(n,d,l,!1,r))}n.ea&&(c=BS(n.ea),s.has(c)||(d=.5*XE(t,i.id),d=VS(e.g,d),s.set(c,new US(n.ea,d,l,!0,r)))),a.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:u,dataKey:0,mimeType:n.mimeType,codecs:n.codecs,thumbnailSprite:n.thumbnailSprite}),0!==o&&(l=(l+1)%o)}),a}function vA(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function bA(e){if(e.j.g)throw new Le(2,9,7001)}function TA(){if(!YE())throw new Le(2,9,9e3)}function _A(e,t){return U(function(n){return 1==n.g?(e.i.push(t),C(n,2),S(n,t,4)):2!=n.g?n.return(n.h):(k(n),un(e.i,t),M(n,0))})}function wA(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){un(e.i,n)})}function SA(e){var t=new Set;e=d(e.streams);for(var n=e.next();!n.done;n=e.next()){n=d(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,null!=i.initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function EA(e,t,n,i){var r,s,a;return U(function(o){return 1==o.g?i.drmInfo?(r=dE(n),s=i.sessionIds.map(function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:aA(i,!1),videoCapabilities:aA(i,!0)}}),S(o,BE(t,e,s),2)):o.return():3!=o.g?(a=o.h,S(o,r.remove(a),3)):S(o,r.add(s.filter(function(e){return!a.includes(e.sessionId)})),0)})}function AA(e){for(var t=new Set,n=d(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=d(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=d(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function CA(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=d(t),i=n.next();!i.done;i=n.next()){i=d(t);for(var r=i.next();!r.done;r=i.next());}for(t=d(e),n=t.next();!n.done;n=t.next())for(n=d(e),i=n.next();!i.done;i=n.next());}X("shaka.offline.indexeddb.StorageMechanismOpenTimeout",AE),pE("idb",function(){return Be().ei()?new SE:null}),CE.prototype.Ub=function(){return this.i},CE.prototype.ib=function(){return this.h},CE.prototype.key=function(){return this.l},CE.prototype.toString=function(){return this.j},i=NE.prototype,i.configure=function(){},i.start=function(e,t){var n,i,r,s,a,o,l,u=this;return U(function(c){switch(c.g){case 1:if(n=IE(e),u.g=n,null==n||"manifest"!=n.g)throw new Le(2,1,9004,e);return i=new aE,C(c,2),S(c,i.init(),4);case 4:return S(c,uE(i,n.Ub(),n.ib()),5);case 5:return r=c.h,S(c,r.getManifests([n.key()]),6);case 6:return s=c.h,a=s[0],o=new xE(n.Ub(),n.ib()),l=kE(o,a),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return k(c),S(c,i.destroy(),7);case 7:M(c,0)}})},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,s,a,o,l,u=this;return U(function(c){switch(c.g){case 1:return n=u.g,i=new aE,A(c,2,3),S(c,i.init(),5);case 5:return S(c,uE(i,n.Ub(),n.ib()),6);case 6:return r=c.h,S(c,r.getManifests([n.key()]),7);case 7:if(s=c.h,a=s[0],o=a.sessionIds.includes(e),l=void 0==a.expiration||a.expiration>t,!o||!l){c.A(3);break}return S(c,r.updateManifestExpiration(n.key(),t),3);case 3:return k(c),S(c,i.destroy(),10);case 10:M(c,0);break;case 2:x(c),c.A(3)}})},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},Ya("application/x-offline-manifest",function(){return new NE}),X("shaka.offline.OfflineScheme",LE),LE.plugin=PE,ys("offline",PE),i=KE.prototype,i.destroy=function(){return this.j.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Md(e,t)),Qd(this.h,e)},i.getConfiguration=function(){var e=Yd();return Qd(e,this.h,Yd()),e},i.Ib=function(){return this.g},i.store=function(e,t,n,i,r){var s=this,a=this.getConfiguration(),o=new zS(this.g);return this.l.push(o),t=$E(this,e,t||{},i||[],r||[],function(){var t;return U(function(i){return 1==i.g?n?i.A(2):S(i,Rh(e,s.g,a.manifest.retryParameters),3):(2!=i.g&&(n=i.h),t=Qa(e,n||null),i.return(t()))})},a,o),t=new os(t,function(){return qS(o)}),t.finally(function(){un(s.l,o)}),wA(this,t)},i.remove=function(e){return _A(this,sA(this,e))},i.Xl=function(){return _A(this,uA(this))},i.list=function(){return _A(this,cA())},i.ud=function(e,t,n,i){var r,s=this;return U(function(a){return 1==a.g?(r=new Ys({xc:s.g,onError:t,Lf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(n.drm),S(a,Qs(r,e.variants,i),2)):3!=a.g?S(a,sa(r),3):a.return(r)})},X("shaka.offline.Storage",KE),KE.deleteAll=function(){var e;return U(function(t){return 1==t.g?(e=new aE,C(t,2),S(t,hE(e),2)):5!=t.g?(k(t),S(t,e.destroy(),5)):M(t,0)})},KE.prototype.list=KE.prototype.list,KE.prototype.removeEmeSessions=KE.prototype.Xl,KE.prototype.remove=KE.prototype.remove,KE.prototype.store=KE.prototype.store,KE.prototype.getNetworkingEngine=KE.prototype.Ib,KE.prototype.getConfiguration=KE.prototype.getConfiguration,KE.prototype.configure=KE.prototype.configure,KE.prototype.destroy=KE.prototype.destroy,KE.support=YE;var IA=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");function xA(){}function kA(){for(var e=d(DA),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){J("Error installing polyfill!",n)}}}function MA(e,t){for(e={priority:t||0,callback:e},t=0;t<DA.length;t++)if(DA[t].priority<e.priority)return void DA.splice(t,0,e);DA.push(e)}Kp("offline",YE),X("shaka.polyfill",xA),xA.register=MA,xA.installAll=kA;var DA=[];function RA(){}function OA(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=d(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())NA(t.value)}function NA(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function LA(){}function PA(){Be().di()&&pk()}function UA(){}function BA(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",FA),document.addEventListener("webkitfullscreenerror",FA),document.addEventListener("mozfullscreenchange",FA),document.addEventListener("mozfullscreenerror",FA),document.addEventListener("MSFullscreenChange",FA),document.addEventListener("MSFullscreenError",FA)}}function FA(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function jA(){}function VA(){Be().ic()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),jA.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=HA)}function HA(e){var t,n,i,r,s,a,o,l,u,c,d;return U(function(h){switch(h.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},Be(),n=e.video,i=e.audio,"media-source"!=e.type){if("file"!=e.type)return h.return(t);if(n&&(r=n.contentType,s=""!=ll().canPlayType(r),!s)||i&&(a=i.contentType,o=""!=ll().canPlayType(a),!o))return h.return(t);h.A(2);break}if(!r_())return h.return(t);if(!n){h.A(3);break}return S(h,zA(n),4);case 4:if(l=h.h,!l)return h.return(t);case 3:if(i){var p=Be().Ja(),f=i.contentType;if("CAST"===p&&i.spatialRendering&&(f+="; spatialRendering=true"),u=Wt(f),!u)return h.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,S(h,GA(n,i,c),6)):(t.supported=!0,h.return(t));case 6:(d=h.h)&&(t.supported=!0,t.keySystemAccess=d);case 5:return h.return(t)}})}function zA(e){var t,n,i;return U(function(r){return 1==r.g?(t=Be(),n=t.Ja(),"CAST"!==n?r.A(2):S(r,qA(e),3)):2!=r.g?(i=r.h,r.return(i)):r.return(Wt(e.contentType))})}function GA(e,t,n){var i,r,s,a,o,l,u,c,d,h,p;return U(function(f){switch(f.g){case 1:if(i=[],r=[],n.audio&&(s={robustness:n.audio.robustness||"",contentType:t.contentType},Be().fj()&&t.contentType.includes('codecs="ac-3"')&&(s.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(s.encryptionScheme=n.audio.encryptionScheme),i.push(s)),n.video&&(a={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(a.encryptionScheme=n.video.encryptionScheme),r.push(a)),o={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(o.audioCapabilities=i),r.length&&(o.videoCapabilities=r),l=e?e.contentType:"",u=t?t.contentType:"",c=zi(l)+";"+Hi(l),d=zi(u)+";"+Hi(u),h=n.keySystem,p=null,A(f,2),ns.has(c+"#"+d+"#"+h)){p=ns.get(c+"#"+d+"#"+h)||null,f.A(4);break}return S(f,navigator.requestMediaKeySystemAccess(n.keySystem,[o]),5);case 5:p=f.h,ns.set(c+"#"+d+"#"+h,p);case 4:I(f,3);break;case 2:x(f);case 3:return f.return(p)}})}function qA(t){var n,i,r,s,a;return U(function(o){if(1==o.g){if(!(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return o.return(Wt(t.contentType));switch(n=t.contentType,t.width&&t.height&&1280<t.width&&720<t.height&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&(i=Math.round(t.framerate),24>i||30<i)&&(n+="; framerate="+t.framerate),r=t.transferFunction||"",r){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return o.return(!1)}return s=!1,a=ZA,a.has(n)?(s=a.get(n),o.A(2)):S(o,cast.__platform__.canDisplayType(n),3)}return 2!=o.g&&(s=o.h,a.set(n,s)),o.return(s)})}xA.Aria=RA,RA.install=OA,MA(OA),xA.EncryptionScheme=LA,LA.install=PA,MA(PA,-2),xA.Fullscreen=UA,UA.install=BA,MA(BA),xA.MediaCapabilities=jA,jA.install=VA,jA.originalMcap=null;var WA,XA,KA,YA,$A,QA,ZA=new Map;function JA(){}function eC(){var t=Be(),n="WEBKIT"===t.Ia()?t.Ga():null;for((e.MediaSource||e.ManagedMediaSource)&&n&&e.MediaSource&&(12>=n?(tC(),nC()):15>=n&&tC()),t=d(t.pj()),n=t.next();!n.done;n=t.next())rC(n.value);(e.MediaSource||e.ManagedMediaSource)&&iC(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&sC()}function tC(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,B.apply(0,arguments));return t.abort=function(){},t}}function nC(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function iC(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=ji(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=ji(e)&&n(e)}}}function rC(t){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return Hi(e)!=t&&n(e)},e.ManagedMediaSource){var i=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return Hi(e)!=t&&i(e)}}}function sC(){var e=MediaSource.isTypeSupported;Be().Rj()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),s=r.findIndex(function(e){return e.startsWith("vp09")});return 0<=s&&(r[s]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}function aC(){}function oC(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?lC():void 0!=e.orientation&&uC())}function lC(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}function uC(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new cC;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new K("change");n.dispatchEvent(e)})}function cC(){ae.call(this),this.type="",this.angle=0}function dC(){}function hC(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&e.shakaMediaKeysPolyfill!=wC&&(void 0!==t&&t&&(WA=!0,XA=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),KA=HTMLMediaElement.prototype.setMediaKeys,YA=e.MediaKeys,$A=e.MediaKeySystemAccess,QA=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=fC,e.MediaKeys=yC,e.MediaKeySystemAccess=mC,navigator.requestMediaKeySystemAccess=pC,e.shakaMediaKeysPolyfill=wC,Vr.clear(),ns.clear())}function pC(e,t){try{var n=new mC(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function fC(e){var t=this.mediaKeys;return t&&t!=e&&vC(t,null),delete this.mediaKeys,(this.mediaKeys=e)?vC(e,this):Promise.resolve()}function gC(e){if(e=De(e.initData),Oe(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ge(e.subarray(4),!0),e=We(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Me(e),this.dispatchEvent(t)}function mC(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=d(t),t=e.next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var s=d(n.audioCapabilities),a=s.next();!a.done;a=s.next())a=a.value,a.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.audioCapabilities.push(a),r=!0));if(n.videoCapabilities)for(n=d(n.videoCapabilities),s=n.next();!s.done;s=n.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.videoCapabilities.push(s),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t)return void(this.g=t)}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function yC(e){this.h=new WebKitMediaKeys(e),this.g=new Rt}function vC(e,t){if(e.g.Sa(),!t)return Promise.resolve();e.g.o(t,"webkitneedkey",gC);try{return ju(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function bC(e){ae.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Rt,this.sessionId="",this.expiration=NaN,this.closed=new as,this.keyStatuses=new _C}function TC(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new K("keystatuseschange"),e.dispatchEvent(t)}function _C(){this.size=0,this.g=void 0}MA(VA,-1),xA.MediaSource=JA,JA.install=eC,MA(eC),xA.Orientation=aC,aC.install=oC,b(cC,ae),cC.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},cC.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},MA(oC),xA.PatchedMediaKeysApple=dC,dC.uninstall=function(){e.shakaMediaKeysPolyfill==wC&&WA&&(WA=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",XA),HTMLMediaElement.prototype.setMediaKeys=KA,e.MediaKeys=YA,e.MediaKeySystemAccess=$A,navigator.requestMediaKeySystemAccess=QA,XA=QA=KA=$A=YA=null,e.shakaMediaKeysPolyfill="",Vr.clear(),ns.clear())},dC.install=hC,mC.prototype.createMediaKeys=function(){var e=new yC(this.keySystem);return Promise.resolve(e)},mC.prototype.getConfiguration=function(){return this.g},yC.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new bC(this.h,e)},yC.prototype.setServerCertificate=function(){return Promise.resolve(!1)},yC.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},b(bC,ae),i=bC.prototype,i.generateRequest=function(e,t){var n=this;this.h=new as;try{var i=this.l.createSession("video/mp4",De(t));this.i=i,this.sessionId=i.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=(new Map).set("messageType",void 0==n.keyStatuses.Ic()?"license-request":"license-renewal").set("message",Me(e.message)),e=new K("message",e),n.dispatchEvent(e)}),this.j.o(i,"webkitkeyadded",function(){n.g&&(TC(n,"usable"),n.g.resolve(),n.g=null)}),this.j.o(i,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:TC(n,"output-not-allowed");break;default:TC(n,"internal-error")}}),TC(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new as;try{this.i.update(De(e))}catch(t){this.g.reject(t)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Sa()}catch(XO){this.closed.reject(XO)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i=_C.prototype,i.Ic=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,ts.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=ts.value();return!(!this.g||!ke(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var wC="apple";function SC(){}function EC(){if(e.MediaKeys){var t=Be();MediaKeys.prototype.setServerCertificate&&t.Ce()||(MediaKeys.prototype.setServerCertificate=AC)}}function AC(){return Promise.resolve(!1)}function CC(){}function IC(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)jC="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=kC,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=MC,e.MediaKeys=RC,e.MediaKeySystemAccess=DC,e.shakaMediaKeysPolyfill=VC}}function xC(e){var t=jC;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function kC(e,t){try{var n=new DC(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function MC(e){var t=this.mediaKeys;return t&&t!=e&&OC(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&OC(e,this),Promise.resolve()}function DC(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=d(t);for(var s=t.next();!s.done;s=t.next()){s=s.value;var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label},o=!1;if(s.audioCapabilities)for(var l=d(s.audioCapabilities),u=l.next();!u.done;u=l.next())u=u.value,u.contentType&&(o=!0,r.canPlayType(u.contentType.split(";")[0],this.g)&&(a.audioCapabilities.push(u),i=!0));if(s.videoCapabilities)for(l=d(s.videoCapabilities),u=l.next();!u.done;u=l.next())u=u.value,u.contentType&&(o=!0,r.canPlayType(u.contentType,this.g)&&(a.videoCapabilities.push(u),i=!0));if(o||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==s.persistentState&&(n?(a.persistentState="required",a.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=a)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function RC(e){this.l=e,this.h=null,this.g=new Rt,this.i=[],this.j=new Map}function OC(e,t){e.h=t,e.g.Sa();var n=jC;t&&(e.g.o(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Me(t.initData),e.h.dispatchEvent(n)}),e.g.o(t,n+"keymessage",function(t){var n=NC(e,t.sessionId);n&&(t=(new Map).set("messageType",void 0==n.keyStatuses.Ic()?"licenserequest":"licenserenewal").set("message",t.message),t=new K("message",t),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.o(t,n+"keyadded",function(t){(t=NC(e,t.sessionId))&&t.ready()}),e.g.o(t,n+"keyerror",function(t){var n=NC(e,t.sessionId);if(n){var i=Error("EME v0.1b key error"),r=t.errorCode;r.systemCode=t.systemCode,i.errorCode=r,!t.sessionId&&n.h?(45==t.systemCode&&(i.message="Unsupported session type."),n.h.reject(i),n.h=null):t.sessionId&&n.g?(n.g.reject(i),n.g=null):(i=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?BC(n,"output-restricted"):BC(n,1==i?"expired":"internal-error"))}}))}function NC(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function LC(e,t,n){ae.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new as,this.keyStatuses=new FC}function PC(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=De(We("LOAD_SESSION|"+n));else{var r=We("PERSISTENT|");i=it(r,t)}else i=De(t)}catch(a){return Promise.reject(a)}e.h=new as;var s=xC("generateKeyRequest");try{e.j[s](e.i,i)}catch(a){if("InvalidStateError"!=a.name)return e.h=null,Promise.reject(a);new sr(function(){try{e.j[s](e.i,i)}catch(t){e.h.reject(t),e.h=null}}).X(.01)}return e.h}function UC(e,t,n){if(e.g)e.g.then(function(){return UC(e,t,n)}).catch(function(){return UC(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=ze(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=et(r.keys[0].k),r=et(r.keys[0].kid)}else i=De(n),r=null;var s=xC("addKey");try{e.j[s](e.i,i,r,e.sessionId)}catch(a){e.g.reject(a),e.g=null}}}function BC(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,t=new K("keystatuseschange"),e.dispatchEvent(t)}function FC(){this.size=0,this.g=void 0}MA(function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||hC())}),xA.PatchedMediaKeysCert=SC,SC.install=EC,MA(EC),xA.PatchedMediaKeysWebkit=CC,CC.install=IC,DC.prototype.createMediaKeys=function(){var e=new RC(this.g);return Promise.resolve(e)},DC.prototype.getConfiguration=function(){return this.h},RC.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new LC(t,this.l,e),this.i.push(e),e},RC.prototype.setServerCertificate=function(){return Promise.resolve(!1)},RC.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},b(LC,ae),i=LC.prototype,i.ready=function(){BC(this,"usable"),this.g&&this.g.resolve(),this.g=null},i.generateRequest=function(e,t){return PC(this,t,null)},i.load=function(e){return"persistent-license"==this.l?PC(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new as;return UC(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=xC("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},i=FC.prototype,i.Ic=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,ts.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=ts.value();return!(!this.g||!ke(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var jC="",VC="webkit";function HC(){}function zC(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=qC,Object.defineProperty(t,"disablePictureInPicture",{get:XC,set:KC,enumerable:!0,configurable:!0}),document.exitPictureInPicture=WC,document.addEventListener("webkitpresentationmodechanged",GC,!0))}}function GC(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function qC(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function WC(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function XC(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function KC(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function YC(){}function $C(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=QC))}function QC(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function ZC(){}function JC(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:eI})}function eI(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function tI(){}function nI(){for(var e=d([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=iI),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=rI),t.prototype.includes||(t.prototype.includes=sI)}function iI(e,t){return Array.prototype.indexOf.call(this,e,t)}function rI(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function sI(e,t){return-1!==this.indexOf(e,t)}function aI(){}function oI(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function lI(){}function uI(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||"number"===typeof ll().webkitDroppedFrameCount)&&(t.getVideoPlaybackQuality=cI)}}function cI(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function dI(){}function hI(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=pI;else if(6==n)t=fI;else{try{var i=!!pI(1,2,"")}catch(r){i=!1}i&&(t=pI)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function pI(t,n,i){return new e.TextTrackCue(t,n,i)}function fI(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function gI(e){ae.call(this),this.h=e,this.l=null,this.g=[],this.i=-1,this.j=null,this.m=new Rt}function mI(){}MA(IC),xA.PiPWebkit=HC,HC.install=zC,MA(zC),xA.RandomUUID=YC,YC.install=$C,MA($C),xA.Symbol=ZC,ZC.install=JC,MA(JC),xA.TypedArray=tI,tI.install=nI,MA(nI),xA.VideoPlayPromise=aI,aI.install=oI,MA(oI),xA.VideoPlaybackQuality=lI,lI.install=uI,MA(uI),xA.VTTCue=dI,dI.install=hI,MA(hI),b(gI,ae),i=gI.prototype,i.destroy=function(){var e=this;return U(function(t){if(1==t.g)return S(t,e.removeAllItems(),2);e.h=null,e.m&&(e.m.release(),e.m=null),ae.prototype.release.call(e),E(t)})},i.configure=function(e){this.l=e},i.getConfiguration=function(){return this.l},i.getCurrentItem=function(){return this.g.length&&0<=this.i&&this.i<this.g.length?this.g[this.i]:null},i.getCurrentItemIndex=function(){return this.i},i.getItems=function(){return this.g.slice()},i.insertItems=function(e){this.g.push.apply(this.g,h(e)),this.dispatchEvent(new K("itemsinserted"))},i.removeAllItems=function(){var e=this;return U(function(t){switch(t.g){case 1:if(e.m.Sa(),!(e.g.length&&0<=e.i)){t.A(2);break}return S(t,e.h.lc(),2);case 2:if(!e.j){t.A(4);break}if(e.j.Qf.s){t.A(5);break}return S(t,e.j.Qf.destroy(),5);case 5:e.j=null;case 4:e.g=[],e.i=-1,e.dispatchEvent(new K("itemsremoved")),E(t)}})},i.playItem=function(e){var t,n,i,r,s,a,o,l,u,c,h,p,f,g,m=this;return U(function(y){if(1==y.g){if(m.m.Sa(),!m.g.length||e>=m.g.length)throw new Le(2,7,7007);return t=m.g[e],m.i!=e&&(m.i=e,m.dispatchEvent(new K("currentitemchanged"))),n=m.h.h,i=m.l?m.l.preloadNextUrlWindow:0,0<i&&(r=!1,m.m.o(n,"timeupdate",function(){var e,t,s,a;return U(function(o){switch(o.g){case 1:if(m.j||1>=m.g.length||r||m.h.T()||!n.duration)return o.return();if(e=m.h.xa().end-n.currentTime,isNaN(e)){o.A(0);break}if(!(e<=i)){o.A(0);break}if(t=m.l&&m.l.repeatMode,s=null,m.i+1<m.g.length?s=m.g[m.i+1]:1==t&&(s=m.g[0]),!s){o.A(0);break}return r=!0,a=null,A(o,5),S(o,m.h.preload(s.manifestUri,s.startTime,s.mimeType,s.config),7);case 7:a=o.h,I(o,6);break;case 5:x(o),a=null;case 6:m.j={item:s,Qf:a},r=!1,E(o)}})})),m.m.o(m.h,"complete",function(){var e=m.l&&m.l.repeatMode,t=!1;if(2==e)t=!0;else{var i=m.i+1;i<m.g.length?m.playItem(i):1==e&&(1==m.g.length?t=!0:m.playItem(0))}t&&(n.paused?(n.currentTime=m.h.xa().start,n.play()):m.m.o(n,"paused",function(){n.currentTime=m.h.xa().start,n.play()}))}),t.config&&(m.h.tj(),m.h.configure(t.config)),s=t.manifestUri,m.j&&m.j.item==t&&m.j.Qf&&(s=m.j.Qf),S(y,m.h.load(s,t.startTime,t.mimeType),2)}if(m.j=null,t.extraText)for(a=d(t.extraText),o=a.next();!o.done;o=a.next())l=o.value,l.mime?m.h.Ud(l.uri,l.language,l.kind,l.mime,l.codecs):m.h.Ud(l.uri,l.language,l.kind);if(t.extraThumbnail)for(u=d(t.extraThumbnail),c=u.next();!c.done;c=u.next())h=c.value,m.h.Ye(h);if(t.extraChapter)for(p=d(t.extraChapter),f=p.next();!f.done;f=p.next())g=f.value,m.h.Xe(g.uri,g.language,g.mime);E(y)})},X("shaka.queue.QueueManager",gI),gI.prototype.playItem=gI.prototype.playItem,gI.prototype.removeAllItems=gI.prototype.removeAllItems,gI.prototype.insertItems=gI.prototype.insertItems,gI.prototype.getItems=gI.prototype.getItems,gI.prototype.getCurrentItemIndex=gI.prototype.getCurrentItemIndex,gI.prototype.getCurrentItem=gI.prototype.getCurrentItem,gI.prototype.getConfiguration=gI.prototype.getConfiguration,gI.prototype.configure=gI.prototype.configure,gI.prototype.destroy=gI.prototype.destroy,wg=function(e){return new gI(e)},mI.prototype.parseInit=function(){},mI.prototype.setSequenceMode=function(){},mI.prototype.setManifestType=function(){},mI.prototype.parseMedia=function(e,t){var n=null,i=[];e=ze(e).split(/\r?\n/),e=d(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=yI.exec(r))){var s=vI.exec(r[1]);s=60*parseInt(s[1],10)+parseFloat(s[2].replace(",",".")),r=new ti(s,t.segmentEnd?t.segmentEnd:s+2,r[2]),n&&(n.endTime=s,i.push(n)),n=r}return n&&i.push(n),i},X("shaka.text.LrcTextParser",mI),mI.prototype.parseMedia=mI.prototype.parseMedia,mI.prototype.setManifestType=mI.prototype.setManifestType,mI.prototype.setSequenceMode=mI.prototype.setSequenceMode,mI.prototype.parseInit=mI.prototype.parseInit;var yI=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,vI=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function bI(){}function TI(e,t,n,i,r,s,a,o,l,u,c,h,p){var f=u;if(Cn(e)){if(!c)return null;var g={tagName:"span",children:[kn(e)],attributes:{},parent:null}}else g=e;for(var m=null,y=d($I),v=y.next();!v.done&&!(m=kI(g,"backgroundImage",i,"#",v.value)[0]);v=y.next());y=null,v=Un(g,$I,"backgroundImage");var b=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(v&&b.test(v)){if(y=parseInt(v.split(":").pop(),10)-1,y>=p.length)return null;y=p[y]}else h&&v&&!v.startsWith("#")&&(b=new he(h),v=new he(v),(v=b.resolve(v).toString())&&(y=v));if(("p"==e.tagName||m||y)&&(c=!0),e=c,v="default"==(g.attributes["xml:space"]||(o?"default":"preserve")),b=g.children.every(Cn),o=[],!b)for(var T=d(g.children),_=T.next();!_.done;_=T.next())(_=TI(_.value,t,n,i,r,s,a,v,l,g,c,h,p))&&o.push(_);if(i=null!=u,h=kn(g),h=g.children.length&&h&&/\S/.test(h),T=g.attributes.begin||g.attributes.end||g.attributes.dur,!(T||h||"br"==g.tagName||0!=o.length||i&&!v))return null;for(p=DI(g,n),h=p.start,p=p.end;f&&f.tagName&&"tt"!=f.tagName;)p=MI(f,n,h,p),h=p.start,p=p.end,f=f.parent;if(null==h&&(h=0),h+=t.periodStart,p=null==p?1/0:p+t.periodStart,h=Math.max(h,t.segmentStart),p=Math.min(p,t.segmentEnd),!T&&0<o.length)for(h=1/0,p=0,t=d(o),n=t.next();!n.done;n=t.next())n=n.value,h=Math.min(h,n.startTime),p=Math.max(p,n.endTime);if("br"==g.tagName)return r=new ti(h,p,""),r.lineBreak=!0,r;if(t="",b&&(t=Ye(kn(g)||""),v&&(t=t.replace(/\s+/g," "))),t=new ti(h,p,t),t.nestedCues=o,c||(t.isContainer=!0),l&&(t.cellResolution=l),l=kI(g,"region",s,"")[0],g.attributes.region&&l&&l.attributes["xml:id"]){var w=l.attributes["xml:id"];t.region=a.filter(function(e){return e.id==w})[0]}return a=l,u&&i&&!g.attributes.region&&!g.attributes.style&&(a=kI(u,"region",s,"")[0]),SI(t,g,a,m,y,r,e,0==o.length),t}function _I(e,t,n){var i=new sn,r=e.attributes["xml:id"];if(!r)return null;i.id=r,r=null,n&&(r=PI.exec(n)||FI.exec(n)),n=r?Number(r[1]):null,r=r?Number(r[2]):null;var s,a=CI(e,t,"extent");if(a){var o=(s=PI.exec(a))||FI.exec(a);null!=o&&(i.width=Number(o[1]),i.height=Number(o[2]),s||(null!=n&&(i.width=100*i.width/n),null!=r&&(i.height=100*i.height/r)),i.widthUnits=s||null!=n?an:0,i.heightUnits=s||null!=r?an:0)}return(e=CI(e,t,"origin"))&&(o=(s=PI.exec(e))||FI.exec(e),null!=o&&(i.viewportAnchorX=Number(o[1]),i.viewportAnchorY=Number(o[2]),s?a||(i.width=100-i.viewportAnchorX,i.widthUnits=an,i.height=100-i.viewportAnchorY,i.heightUnits=an):(null!=r&&(i.viewportAnchorY=100*i.viewportAnchorY/r),null!=n&&(i.viewportAnchorX=100*i.viewportAnchorX/n)),i.viewportAnchorUnits=s||null!=n?an:0)),i}function wI(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),4==t.length)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function SI(e,t,n,i,r,s,a,o){if(a=a||o,"rtl"==AI(t,n,s,"direction",a)&&(e.direction="rtl"),o=AI(t,n,s,"writingMode",a),"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=fi),(o=AI(t,n,s,"textAlign",!0))?(e.positionAlign=XI.get(o),e.lineAlign=WI.get(o),e.textAlign=di[o.toUpperCase()]):e.textAlign=ci,(o=AI(t,n,s,"displayAlign",!0))&&(e.displayAlign=pi[o.toUpperCase()]),(o=AI(t,n,s,"color",a))&&(e.color=wI(o)),(o=AI(t,n,s,"backgroundColor",a))&&(e.backgroundColor=wI(o)),(o=AI(t,n,s,"border",a))&&(e.border=o),o=AI(t,n,s,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o.split(",").filter(function(e){return"default"!=e}).join(",")}switch((o=AI(t,n,s,"fontWeight",a))&&"bold"==o&&(e.fontWeight=wi),o=AI(t,n,s,"wrapOption",a),e.wrapLine=!o||"noWrap"!=o,(o=AI(t,n,s,"lineHeight",a))&&o.match(BI)&&(e.lineHeight=o),(o=AI(t,n,s,"fontSize",a))&&(o.match(BI)||o.match(UI))&&(e.fontSize=o),(o=AI(t,n,s,"fontStyle",a))&&(e.fontStyle=Ai[o.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,o=i.attributes.encoding,i=kn(i).trim(),"PNG"==r&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=AI(t,n,s,"textOutline",a))&&(i=i.split(" "),i[0].match(BI)?e.textStrokeColor=e.color:(e.textStrokeColor=wI(i[0]),i.shift()),i[0]&&i[0].match(BI)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=AI(t,n,s,"letterSpacing",a))&&i.match(BI)&&(e.letterSpacing=i),(i=AI(t,n,s,"linePadding",a))&&i.match(BI)&&(e.linePadding=i),(i=AI(t,n,s,"opacity",a))&&(e.opacity=parseFloat(i)),(i=CI(n,s,"textDecoration"))&&EI(e,i),(i=II(t,s,"textDecoration"))&&EI(e,i),(i=AI(t,n,s,"textCombine",a))&&(e.textCombineUpright=i),AI(t,n,s,"ruby",a)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function EI(e,t){t=d(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Ci)||e.textDecoration.push(Ci);break;case"noUnderline":e.textDecoration.includes(Ci)&&un(e.textDecoration,Ci);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&un(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&un(e.textDecoration,"overline")}}function AI(e,t,n,i,r){return r=void 0===r||r,(e=II(e,n,i))?e:r?CI(t,n,i):null}function CI(e,t,n){if(!e)return null;var i=Un(e,YI,n);return i||xI(e,t,n)}function II(e,t,n){var i=Un(e,YI,n);return i||xI(e,t,n)}function xI(e,t,n){e=kI(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var s=Ln(e[r],"urn:ebu:tt:style",n);s||(s=Un(e[r],YI,n)),s||(s=II(e[r],t,n)),s&&(i=s)}return i}function kI(e,t,n,i,r){var s=[];if(!e||1>n.length)return s;var a=e;for(e=null;!e&&!(e=r?Ln(a,r,t):a.attributes[t])&&(a=a.parent,a););if(t=e)for(t=d(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=d(n),a=e.next();!a.done;a=e.next())if(a=a.value,i+a.attributes["xml:id"]==r){s.push(a);break}return s}function MI(e,t,n,i){return e=DI(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function DI(e,t){var n=RI(e.attributes.begin,t),i=RI(e.attributes.end,t);return e=RI(e.attributes.dur,t),null==i&&null!=e&&(i=n+e),{start:n,end:i}}function RI(e,t){var n=null;if(jI.test(e)){e=jI.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),s=Number(e[4]);s+=(Number(e[5])||0)/t.h,r+=s/t.frameRate,n=r+60*i+3600*n}else if(VI.test(e))n=OI(VI,e);else if(HI.test(e))n=OI(HI,e);else if(zI.test(e))e=zI.exec(e),n=Number(e[1])/t.frameRate;else if(GI.test(e))e=GI.exec(e),n=Number(e[1])/t.g;else if(qI.test(e))n=OI(qI,e);else if(e)throw new Le(2,2,2001,"Could not parse cue time range in TTML");return n}function OI(e,t){return e=e.exec(t),null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function NI(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{Wc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function LI(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Yi("application/x-subtitle-lrc",function(){return new mI}),bI.prototype.parseInit=function(){},bI.prototype.setSequenceMode=function(){},bI.prototype.setManifestType=function(){},bI.prototype.parseMedia=function(e,t,n,i){var r=ze(e);if(e=[],""==r)return e;var s=Sn(r,"tt",!0);if(!s)throw new Le(2,2,2005,"Failed to parse TTML.");if(r=Dn(s,"body")[0],!r)return[];var a=Un(s,KI,"frameRate"),o=Un(s,KI,"subFrameRate"),l=Un(s,KI,"frameRateMultiplier"),u=Un(s,KI,"tickRate"),c=Un(s,KI,"cellResolution"),h=s.attributes["xml:space"]||"default",p=Un(s,YI,"extent");if("default"!=h&&"preserve"!=h)throw new Le(2,2,2005,"Invalid xml:space value: "+h);h="default"==h,a=new LI(a,o,l,u),c=NI(c),o=Dn(s,"metadata")[0],o=(o?o.children:[]).filter(function(e){return"\n"!=e}),l=Dn(s,"style"),s=Dn(s,"region"),u=[];for(var f=d(s),g=f.next();!g.done;g=f.next())(g=_I(g.value,l,p))&&u.push(g);if(xn(r,"p").length)throw new Le(2,2,2001,"<p> can only be inside <div> in TTML");for(p=d(xn(r,"div")),f=p.next();!f.done;f=p.next())if(xn(f.value,"span").length)throw new Le(2,2,2001,"<span> can only be inside <p> in TTML");return(t=TI(r,t,a,o,l,s,u,h,c,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},X("shaka.text.TtmlTextParser",bI),bI.prototype.parseMedia=bI.prototype.parseMedia,bI.prototype.setManifestType=bI.prototype.setManifestType,bI.prototype.setSequenceMode=bI.prototype.setSequenceMode,bI.prototype.parseInit=bI.prototype.parseInit;var PI=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,UI=/^(\d{1,4}(?:\.\d+)?|100)%$/,BI=/^(\d+px|\d+em|\d*\.?\d+c)$/,FI=/^(\d+)px (\d+)px$/,jI=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,VI=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,HI=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,zI=/^(\d*(?:\.\d*)?)f$/,GI=/^(\d*(?:\.\d*)?)t$/,qI=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),WI=(new Map).set("left",yi).set("center","center").set("right","end").set("start",yi).set("end","end"),XI=(new Map).set("left","line-left").set("center","center").set("right","line-right"),KI=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],YI=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],$I=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function QI(){this.g=new bI}function ZI(){this.g="UNKNOWN"}function JI(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?ci:di[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":ui)):(i=/^region:(.*)$/.exec(t))?(t=ex(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=vi[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=mi,e.line=Number(n[1]),n[2]&&(e.lineAlign=vi[n[2].toUpperCase()]))}function ex(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}function tx(){this.g=null}function nx(e,t,n){var i,r,s;return(new Ps).box("payl",Vs(function(e){i=ze(e)})).box("iden",Vs(function(e){r=ze(e)})).box("sttg",Vs(function(e){s=ze(e)})).parse(e),i?ix(i,r,s,t,n):null}function ix(e,t,n,i,r){if(e=new ti(i,r,e),ri(e),t&&(e.id=t),n)for(t=new hn(n),n=gn(t);n;)JI(e,n,[]),pn(t),n=gn(t);return e}function rx(){}function sx(){this.g=new ZI}function ax(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,""),e=e.trim(),e=d(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function ox(){}function lx(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ux(n))&&(e.color=n),(n=t.BackColour)&&(n=ux(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=wi),t.Italic&&(e.fontStyle=Ei),t.Underline&&e.textDecoration.push(Ci),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=hi,e.textAlign="start";break;case 2:e.displayAlign=hi,e.textAlign=ci;break;case 3:e.displayAlign=hi,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=ci;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=ci;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ux(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function cx(e){return e=fx.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Yi("application/ttml+xml",function(){return new bI}),QI.prototype.parseInit=function(e){var t=!1;if((new Ps).box("moov",Us).box("trak",Us).box("mdia",Us).box("minf",Us).box("stbl",Us).V("stsd",Bs).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Le(2,2,2007)},QI.prototype.setSequenceMode=function(){},QI.prototype.setManifestType=function(){},QI.prototype.parseMedia=function(e,t,n){var i=[],r=null,s=[],a=new Map,o=[];if((new Ps).box("moof",Us).box("traf",Us).V("tfhd",function(e){r=Ja(e.reader,e.flags).Zd}).V("trun",function(e){e=no(e.reader,e.version,e.flags),e=d(e.Qh);for(var t=e.next();!t.done;t=e.next())o.push(t.value.sampleSize||r||0)}).V("subs",function(e){for(var t=e.reader,n=t.W(),i=-1,r=0;r<n;r++){var s=t.W();i+=s,s=t.Fa();for(var o=[],l=0;l<s;l++)1==e.version?o.push(t.W()):o.push(t.Fa()),t.aa(),t.aa(),t.W();a.set(i,o)}}).box("mdat",Vs(function(e){s.push(e)})).parse(e,!1),0==s.length)throw new Le(2,2,2007);for(var l=it.apply(Qe,h(s)),u=0,c=0;c<o.length;c++){var p=De(l,u,o[c]);u+=o[c];var f=a.get(c);if(f&&f.length){p=De(p,0,f[0]);for(var g=[],m=f[0],y=1;y<f.length;y++){var v=De(e,m,f[y]);v=Ze(v),g.push("data:image/png;base64,"+v),m+=f[y]}i=i.concat(this.g.parseMedia(p,t,n,g))}else i=i.concat(this.g.parseMedia(p,t,n,[]))}return i},X("shaka.text.Mp4TtmlParser",QI),QI.prototype.parseMedia=QI.prototype.parseMedia,QI.prototype.setManifestType=QI.prototype.setManifestType,QI.prototype.setSequenceMode=QI.prototype.setSequenceMode,QI.prototype.parseInit=QI.prototype.parseInit,Yi('application/mp4; codecs="stpp"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.im1i"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.im1t"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.im2i"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.im2t"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.etd1"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new QI}),Yi('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new QI}),Yi('application/mp4; codecs="stpp.TTML.im1t"',function(){return new QI}),ZI.prototype.parseInit=function(){},ZI.prototype.setSequenceMode=function(){},ZI.prototype.setManifestType=function(e){this.g=e},ZI.prototype.parseMedia=function(e,t){e=ze(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Le(2,2,2e3);if(e=t.vttOffset,"HLS"==this.g)if(n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new Le(2,2,2e3);if(e=yn(e[1]),null==e)throw new Le(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=d(n[0].split("\n")),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new hn(r);var s=new sn;gn(r),pn(r);for(var a=gn(r);a;){var o=s,l=a;(a=/^id=(.*)$/.exec(l))?o.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(l))?o.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(l))?(o.height=Number(a[1]),o.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(o.regionAnchorX=Number(a[1]),o.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(o.viewportAnchorX=Number(a[1]),o.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(l)&&(o.scroll="up"),pn(r),a=gn(r)}t.push(s)}for(i=new Map,si(i),r=[],n=d(n.slice(1)),s=n.next();!s.done;s=n.next()){if(s=s.value.split("\n"),(1!=s.length||s[0])&&!/^NOTE($|[ \t])/.test(s[0])&&"STYLE"==s[0]){for(o=[],a=-1,l=1;l<s.length;l++)s[l].includes("::cue")&&(o.push([]),a=o.length-1),-1!=a&&(o[a].push(s[l]),s[l].includes("}")&&(a=-1));for(o=d(o),a=o.next();!a.done;a=o.next()){var u=a.value;a="global",(l=u[0].match(/\((.*)\)/))&&(a=l.pop()),l=u.slice(1,-1),u[0].includes("}")&&(u=/\{(.*?)\}/.exec(u[0]))&&(l=u[1].split(";")),(u=i.get(a))||(u=new ti(0,0,""));for(var c=!1,h=0;h<l.length;h++){var p=/^\s*([^:]+):\s*(.*)/.exec(l[h]);if(p){var f=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":c=!0,u.backgroundColor=f;break;case"color":c=!0,u.color=f;break;case"font-family":c=!0,u.fontFamily=f;break;case"font-size":c=!0,u.fontSize=f;break;case"font-weight":(700<=parseInt(f,10)||"bold"==f)&&(c=!0,u.fontWeight=wi);break;case"font-style":switch(f){case"normal":c=!0,u.fontStyle=Si;break;case"italic":c=!0,u.fontStyle=Ei;break;case"oblique":c=!0,u.fontStyle="oblique"}break;case"opacity":c=!0,u.opacity=parseFloat(f);break;case"text-combine-upright":c=!0,u.textCombineUpright=f;break;case"text-shadow":c=!0,u.textShadow=f;break;case"white-space":c=!0,u.wrapLine="noWrap"!=f}}}c&&i.set(a,u)}}if(u=s,c=e,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])s=null;else if(s=null,u[0].includes("--\x3e")||(s=u[0],u.splice(0,1)),o=new hn(u[0]),a=mn(o),h=fn(o,/[ \t]+--\x3e[ \t]+/g),l=mn(o),null==a||null==h||null==l)J("Failed to parse VTT time code. Cue skipped:",s,u),s=null;else{for(a+=c,l+=c,c=u.slice(1).join("\n").trim(),i.has("global")?(u=i.get("global").clone(),u.startTime=a,u.endTime=l,u.payload=c):u=new ti(a,l,c),pn(o),a=gn(o);a;)JI(u,a,t),pn(o),a=gn(o);ri(u,i),null!=s&&(u.id=s),s=u}s&&r.push(s)}return r},X("shaka.text.VttTextParser",ZI),ZI.prototype.parseMedia=ZI.prototype.parseMedia,ZI.prototype.setManifestType=ZI.prototype.setManifestType,ZI.prototype.setSequenceMode=ZI.prototype.setSequenceMode,ZI.prototype.parseInit=ZI.prototype.parseInit,Yi("text/vtt",function(){return new ZI}),Yi('text/vtt; codecs="vtt"',function(){return new ZI}),Yi('text/vtt; codecs="wvtt"',function(){return new ZI}),tx.prototype.parseInit=function(e){var t=this,n=!1;if((new Ps).box("moov",Us).box("trak",Us).box("mdia",Us).V("mdhd",function(e){e=to(e.reader,e.version),t.g=e.timescale}).box("minf",Us).box("stbl",Us).V("stsd",Bs).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Le(2,2,2008);if(!n)throw new Le(2,2,2008)},tx.prototype.setSequenceMode=function(){},tx.prototype.setManifestType=function(){},tx.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Le(2,2,2008);var n,i=0,r=[],s=[],a=!1,o=!1,l=!1,u=null;if((new Ps).box("moof",Us).box("traf",Us).V("tfdt",function(e){a=!0,i=eo(e.reader,e.version).baseMediaDecodeTime}).V("tfhd",function(e){u=Ja(e.reader,e.flags).Yd}).V("trun",function(e){o=!0,r=no(e.reader,e.version,e.flags).Qh}).box("mdat",Vs(function(e){l=!0,n=e})).parse(e,!1),!l&&!a&&!o)throw new Le(2,2,2008);e=i;for(var c=new Os(n,0),h=d(r),p=h.next();!p.done;p=h.next()){p=p.value;var f=p.Rh||u,g=p.Xf?i+p.Xf:e;e=g+(f||0);var m=0;do{var y=c.W();m+=y;var v=c.W(),b=null;"vttc"==zs(v)?8<y&&(b=c.Xb(y-8)):c.skip(y-8),f&&b&&(y=nx(b,t.periodStart+g/this.g,t.periodStart+e/this.g),s.push(y))}while(p.sampleSize&&m<p.sampleSize)}return s.filter(lr)},X("shaka.text.Mp4VttParser",tx),tx.prototype.parseMedia=tx.prototype.parseMedia,tx.prototype.setManifestType=tx.prototype.setManifestType,tx.prototype.setSequenceMode=tx.prototype.setSequenceMode,tx.prototype.parseInit=tx.prototype.parseInit,Yi('application/mp4; codecs="wvtt"',function(){return new tx}),rx.prototype.parseInit=function(){},rx.prototype.setSequenceMode=function(){},rx.prototype.setManifestType=function(){},rx.prototype.parseMedia=function(e){var t=ze(e).replace(/\r+/g,"");if(t=t.trim(),e=[],""==t)return e;t=d(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new hn(n[0]),r=mn(i),s=fn(i,/,/g);if(i=mn(i),null==r||null==s||null==i)throw new Le(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new ti(r,i,n.slice(1).join("\n").trim()))}return e},X("shaka.text.SbvTextParser",rx),rx.prototype.parseMedia=rx.prototype.parseMedia,rx.prototype.setManifestType=rx.prototype.setManifestType,rx.prototype.setSequenceMode=rx.prototype.setSequenceMode,rx.prototype.parseInit=rx.prototype.parseInit,Yi("text/x-subviewer",function(){return new rx}),sx.prototype.parseInit=function(){},sx.prototype.setSequenceMode=function(){},sx.prototype.setManifestType=function(){},sx.prototype.parseMedia=function(e,t,n){return e=ze(e),e=ax(e),e=De(We(e)),this.g.parseMedia(e,t,n,[])},X("shaka.text.SrtTextParser",sx),sx.srt2webvtt=ax,sx.prototype.parseMedia=sx.prototype.parseMedia,sx.prototype.setManifestType=sx.prototype.setManifestType,sx.prototype.setSequenceMode=sx.prototype.setSequenceMode,sx.prototype.parseInit=sx.prototype.parseInit,Yi("text/srt",function(){return new sx}),ox.prototype.parseInit=function(){},ox.prototype.setSequenceMode=function(){},ox.prototype.setManifestType=function(){},ox.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=ze(e).split(/\r?\n\s*\r?\n/),e=d(r),r=e.next();!r.done;r=e.next()){var s=r.value;r=s,(s=dx.exec(s))&&(i=s[1],r=s[2]),"V4 Styles"==i||"V4+ Styles"==i?(t=r,t=n?t+"\n"+r:r):"Events"==i&&(n=n?n+"\n"+r:r)}for(i=[],r=null,t=d(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(s=hx.exec(e)))if(e=s[1].trim(),s=s[2].trim(),"Format"==e)r=s.split(px);else if("Style"==e){e=s.split(px),s={};for(var a=0;a<r.length&&a<e.length;a++)s[r[a]]=e[a];i.push(s)}for(r=[],t=null,n=d(n.split(/\r?\n/)),s=n.next(),e={};!s.done;e={Lj:void 0},s=n.next())if(s=s.value,!/^\s*;/.test(s)&&(a=hx.exec(s)))if(s=a[1].trim(),a=a[2].trim(),"Format"==s)t=a.split(px);else if("Dialogue"==s){a=a.split(px),s={};for(var o=0;o<t.length&&o<a.length;o++)s[t[o]]=a[o];o=cx(s.Start);var l=cx(s.End);a=new ti(o,l,a.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Lj=s.Style,(e=i.find(function(e){return function(t){return t.Name==e.Lj}}(e)))&&lx(a,e),r.push(a)}return r},X("shaka.text.SsaTextParser",ox),ox.prototype.parseMedia=ox.prototype.parseMedia,ox.prototype.setManifestType=ox.prototype.setManifestType,ox.prototype.setSequenceMode=ox.prototype.setSequenceMode,ox.prototype.parseInit=ox.prototype.parseInit;var dx=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,hx=/^\s*([^:]+):\s*(.*)/,px=/\s*,\s*/,fx=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function gx(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n,0<e)?{ie:n,wa:e}:null}function mx(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(60&e[t+2])>>>2;if(i>n.length-1)return null;var r=((192&e[t+2])>>>6)+1,s=(1&e[t+2])<<2;return s|=(192&e[t+3])>>>6,{sampleRate:n[i],channelCount:s,codec:"mp4a.40."+r}}function yx(e,t){if(t+1<e.length&&255===e[t]&&240===(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var i=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(i<=n)&&(t+=i,t===e.length||t+1<e.length&&255===e[t]&&240===(246&e[t+1]))}return!1}function vx(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function bx(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function Tx(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var i=63&e[t+4],r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var s=e[t+6]>>5,a=0;2===s?a+=2:(1&s&&1!==s&&(a+=2),4&s&&(a+=2)),a=(e[t+6]<<8|e[t+7])>>12-a&1;var o=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|o>>2,(3&o)<<6|s<<3|a<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][s]+a,Ma:e,wa:r}}function _x(e,t){if(11===e[t]&&119===e[t+1]){var n,i,r=0,s=5;for(t+=s;0<s;){i=e[t];var a=Math.min(s,8),o=8-a;n=4278190080>>>24+o<<o,n=(i&n)>>o,r=r?r<<a|n:n,t+=1,s-=a}if(16>r)return!0}return!1}function wx(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function Sx(e,t){if(t+8>e.length||2935!==(e[t]<<8|e[t+1]))return null;var n=new Tl(e.subarray(t+2));wl(n,2),wl(n,3);var i=Sl(n,11)+1<<1,r=Sl(n,2);if(3==r){r=Sl(n,2),r=[24e3,22060,16e3][r];var s=3}else r=[48e3,44100,32e3][r],s=Sl(n,2);var a=Sl(n,3),o=Sl(n,1);return n=Sl(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][s])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,r<<6|n<<1,a<<1|o,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][a]+o,Ma:e,wa:i})}function Ex(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function Ax(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new Tl(t.data),i=kl(n);if(kl(n),kl(n),Al(n),Ix.includes(i)&&(i=Cl(n),3===i&&wl(n,1),Al(n),Al(n),wl(n,1),xl(n))){i=3!==i?8:12;for(var r=0;r<i;r++)xl(n)&&Ml(n,6>r?16:64)}if(Al(n),i=Cl(n),0===i)Cl(n);else if(1===i)for(wl(n,1),Al(n),Al(n),i=Cl(n),r=0;r<i;r++)Al(n);Al(n),wl(n,1);var s=Cl(n),a=Cl(n),o=Sl(n,1);0===o&&wl(n,1),wl(n,1);var l=0,u=0,c=0,d=0;if(xl(n)&&(l=Cl(n),u=Cl(n),c=Cl(n),d=Cl(n)),r=i=1,xl(n)&&xl(n)){var p=kl(n),f=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],g=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<p&&16>=p?(i=f[p-1],r=g[p-1]):255===p&&(i=Sl(n,16),r=Sl(n,16))}return n=(2-o)*(a+1)*16-2*c-2*d,s=16*(s+1)-2*l-2*u,l=[],t=t.fullData,l.push(t.byteLength>>>8&255),l.push(255&t.byteLength),l=l.concat.apply(l,h(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,h(e)),e=new Uint8Array([1,l[3],l[4],l[5],255,225].concat(l,[1],t)),{height:n,width:s,Wa:e,bb:i,eb:r}}function Cx(e){function t(e){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:e.pts,dts:e.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var e=[],t=d(r.nalus),n=t.next();!n.done;n=t.next()){n=n.value;var s=n.fullData.byteLength,a=new Uint8Array(4);a[0]=s>>24&255,a[1]=s>>16&255,a[2]=s>>8&255,a[3]=255&s,e.push(a),e.push(n.fullData)}r.data=it.apply(Qe,h(e)),i.push(r)}}for(var i=[],r=null,s=!1,a=0;a<e.length;a++){var o=e[a],l=o.nalus,u=!1;r&&l.length&&!s&&(n(),t(o)),l=d(o.nalus);for(var c=l.next();!c.done;c=l.next()){c=c.value;var p=!1;switch(c.type){case 1:var f=!1;p=!0;var g=c.data;u&&4<g.length&&(g=Dl(new Tl(g)),2===g||4===g||7===g||9===g)&&(f=!0),f&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(o),r.frame=!0,r.isKeyframe=f;break;case 5:p=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(o),r.frame=!0,r.isKeyframe=!0;break;case 6:p=!0;break;case 7:u=p=!0;break;case 8:p=!0;break;case 9:s=p=!0,r&&r.frame&&(n(),r=null),r||t(o);break;case 12:p=!0;break;default:p=!1}r&&p&&r.nalus.push(c)}}return n(),i}Yi("text/x-ssa",function(){return new ox}),i=bx.prototype,i.destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&Wt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Gi(t)||"mp4a.40.2")+'"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){for(var r=De(e),s=vl(r),a=s.length;a<r.length&&!yx(r,a);a++);if(e=1e3*n.endTime,s=yl(s),s.length&&n&&(s=s.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=s.data),s=mx(r,a),!s)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));t.audioSamplingRate=s.sampleRate,t.channelsCount=s.channelCount;for(var o=[];a<r.length;){var l=gx(r,a);if(!l)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));var u=l.ie+l.wa;a+u<=r.length&&o.push({data:r.subarray(a+l.ie,a+u),size:l.wa,duration:1024,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),a+=u}return r=s.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:s.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.h,baseMediaDecodeTime:e,Cb:o},stream:t},i=new lo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=uo(i),this.g.set(n,t)),n=this.i!==t,i=go(i),this.i=t,this.h++,n?(t=it(t,i),Promise.resolve(t)):Promise.resolve(i)},X("shaka.transmuxer.AacTransmuxer",bx),bx.prototype.transmux=bx.prototype.transmux,bx.prototype.getOriginalMimeType=bx.prototype.getOriginalMimeType,bx.prototype.convertCodecs=bx.prototype.convertCodecs,bx.prototype.isSupported=bx.prototype.isSupported,bx.prototype.destroy=bx.prototype.destroy,ki("audio/aac",function(){return new bx("audio/aac")},Ri),i=wx.prototype,i.destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&Wt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?Be().we()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){e=De(e);for(var r=vl(e),s=r.length;s<e.length&&!_x(e,s);s++);var a=1e3*n.endTime;r=yl(r),r.length&&n&&(r=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=r.data),r=0;for(var o=new Uint8Array([]),l=[];s<e.length;){var u=Tx(e,s);if(!u)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,r=u.sampleRate,o=u.Ma,l.push({data:e.subarray(s,s+u.wa),size:u.wa,duration:1536,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),s+=u.wa}return e=Math.floor(a*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Eb:[],Ma:o,Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.h,baseMediaDecodeTime:e,Cb:l},stream:t},i=new lo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=uo(i),this.g.set(n,t)),n=this.i!==t,i=go(i),this.i=t,this.h++,n?(t=it(t,i),Promise.resolve(t)):Promise.resolve(i)},X("shaka.transmuxer.Ac3Transmuxer",wx),wx.prototype.transmux=wx.prototype.transmux,wx.prototype.getOriginalMimeType=wx.prototype.getOriginalMimeType,wx.prototype.convertCodecs=wx.prototype.convertCodecs,wx.prototype.isSupported=wx.prototype.isSupported,wx.prototype.destroy=wx.prototype.destroy,ki("audio/ac3",function(){return new wx("audio/ac3")},Ri),i=Ex.prototype,i.destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&Wt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){e=De(e);for(var r=vl(e),s=r.length;s<e.length&&2935!==(e[s]<<8|e[s+1]);s++);var a=1e3*n.endTime;r=yl(r),r.length&&n&&(r=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(a=r.data),r=0;for(var o=new Uint8Array([]),l=[];s<e.length;){var u=Sx(e,s);if(!u)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,r=u.sampleRate,o=u.Ma,l.push({data:e.subarray(s,s+u.wa),size:u.wa,duration:1536,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),s+=u.wa}return e=Math.floor(a*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Eb:[],Ma:o,Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.h,baseMediaDecodeTime:e,Cb:l},stream:t},i=new lo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=uo(i),this.g.set(n,t)),n=this.i!==t,i=go(i),this.i=t,this.h++,n?(t=it(t,i),Promise.resolve(t)):Promise.resolve(i)},X("shaka.transmuxer.Ec3Transmuxer",Ex),Ex.prototype.transmux=Ex.prototype.transmux,Ex.prototype.getOriginalMimeType=Ex.prototype.getOriginalMimeType,Ex.prototype.convertCodecs=Ex.prototype.convertCodecs,Ex.prototype.isSupported=Ex.prototype.isSupported,Ex.prototype.destroy=Ex.prototype.destroy,ki("audio/ec3",function(){return new Ex("audio/ec3")},Ri);var Ix=[100,110,122,244,44,83,86,118,128,138,139,134];function xx(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),i=e.find(function(e){return 34==e.type});if(!t||!n||!i)return null;var r=kx(t.fullData);e=Mx(n.fullData);var s=Dx(i.fullData);return t=Rx(t.fullData,n.fullData,i.fullData,{Dh:r.Dh,ii:r.ii,bh:e.bh,dh:e.dh,Wg:e.Wg,ah:e.ah,Xg:e.Xg,Yg:e.Yg,Zg:e.Zg,$g:e.$g,Qg:e.Qg,Rg:e.Rg,Sg:e.Sg,Tg:e.Tg,Ug:e.Ug,Vg:e.Vg,Ig:e.Ig,Gf:e.Gf,Gg:e.Gg,Cg:e.Cg,Bg:e.Bg,Fh:s.Fh}),{height:e.height,width:e.width,Wa:t,bb:e.bm,eb:e.am}}function kx(e){var t=new Tl(e,!0);return kl(t),kl(t),Sl(t,4),Sl(t,2),Sl(t,6),e=Sl(t,3),t=xl(t),{Dh:e+1,ii:t}}function Mx(e){e=new Tl(e,!0),kl(e),kl(e);var t=0,n=0,i=0,r=0;Sl(e,4);var s=Sl(e,3);xl(e);for(var a=Sl(e,2),o=Sl(e,1),l=Sl(e,5),u=kl(e),c=kl(e),d=kl(e),h=kl(e),p=kl(e),f=kl(e),g=kl(e),m=kl(e),y=kl(e),v=kl(e),b=kl(e),T=[],_=[],w=0;w<s;w++)T.push(xl(e)),_.push(xl(e));if(0<s)for(w=s;8>w;w++)Sl(e,2);for(w=0;w<s;w++)T[w]&&Sl(e,88),_[w]&&kl(e);Cl(e),T=Cl(e),3==T&&Sl(e,1),_=Cl(e),w=Cl(e),xl(e)&&(t+=Cl(e),n+=Cl(e),i+=Cl(e),r+=Cl(e));var S=Cl(e),E=Cl(e),A=Cl(e);if(xl(e))for(var C=0;C<=s;C++)Cl(e),Cl(e),Cl(e);else Cl(e),Cl(e),Cl(e);if(Cl(e),Cl(e),Cl(e),Cl(e),Cl(e),Cl(e),xl(e)&&xl(e))for(C=0;4>C;C++)for(var I=0;I<(3===C?2:6);I++)if(xl(e)){var x=Math.min(64,1<<4+(C<<1));1<C&&Il(e);for(var k=0;k<x;k++)Il(e)}else Cl(e);for(xl(e),xl(e),xl(e)&&(kl(e),Cl(e),Cl(e),xl(e)),C=Cl(e),x=I=0;x<C;x++)if(k=!1,0!==x&&(k=xl(e)),k){x===C&&Cl(e),xl(e),Cl(e);for(var M=k=0;M<=I;M++){var D=xl(e),R=!1;D||(R=xl(e)),(D||R)&&k++}I=k}else{for(M=Cl(e),k=Cl(e),I=M+k,D=0;D<M;D++)Cl(e),xl(e);for(M=0;M<k;M++)Cl(e),xl(e)}if(xl(e))for(C=Cl(e),I=0;I<C;I++){for(x=0;x<A+4;x++)Sl(e,1);Sl(e,1)}if(C=A=1,I=0,xl(e),xl(e),xl(e)){if(xl(e)&&(x=kl(e),k=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<x&&16>=x?(A=k[x-1],C=M[x-1]):255===x&&(A=Sl(e,16),C=Sl(e,16))),xl(e)&&xl(e),xl(e)&&(Sl(e,3),xl(e),xl(e)&&(kl(e),kl(e),kl(e))),xl(e)&&(Cl(e),Cl(e)),xl(e),xl(e),xl(e),(x=xl(e))&&(Cl(e),Cl(e),Cl(e),Cl(e)),xl(e)&&(Sl(e,32),Sl(e,32),xl(e)&&Cl(e),xl(e)))for(M=!1,x=xl(e),k=xl(e),(x||k)&&((M=xl(e))&&(kl(e),Sl(e,5),xl(e),Sl(e,5)),Sl(e,4),Sl(e,4),M&&Sl(e,4),Sl(e,5),Sl(e,5),Sl(e,5)),D=0;D<=s;D++){var O=!0;R=1,xl(e)||(O=xl(e));var N=!1;if(O?Cl(e):N=xl(e),N||(R=Cl(e)+1),x){for(O=0;O<R;O++)Cl(e),Cl(e),M&&(Cl(e),Cl(e));xl(e)}if(k){for(O=0;O<R;O++)Cl(e),Cl(e),M&&(Cl(e),Cl(e));xl(e)}}xl(e)&&(xl(e),xl(e),xl(e),I=Cl(e),Cl(e),Cl(e),Cl(e),Cl(e))}return{Wg:b,bh:a,dh:o,ah:l,Xg:u,Yg:c,Zg:d,$g:h,Qg:p,Rg:f,Sg:g,Tg:m,Ug:y,Vg:v,Gf:I,Ig:0,Gg:T,Cg:S,Bg:E,width:_-(t+n)*(1===T||2===T?2:1),height:w-(i+r)*(1===T?2:1),bm:A,am:C}}function Dx(e){var t=new Tl(e,!0);kl(t),kl(t),Cl(t),Cl(t),xl(t),xl(t),Sl(t,3),xl(t),xl(t),Cl(t),Cl(t),Il(t),xl(t),xl(t),xl(t)&&Cl(t),Il(t),Il(t),xl(t),xl(t),xl(t),xl(t),e=xl(t),t=xl(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Fh:n}}function Rx(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(3&i.bh)<<6|(i.dh?1:0)<<5|31&i.ah,r[2]=i.Xg,r[3]=i.Yg,r[4]=i.Zg,r[5]=i.$g,r[6]=i.Qg,r[7]=i.Rg,r[8]=i.Sg,r[9]=i.Tg,r[10]=i.Ug,r[11]=i.Vg,r[12]=i.Wg,r[13]=240|(3840&i.Gf)>>8,r[14]=255&i.Gf,r[15]=252|3&i.Fh,r[16]=252|3&i.Gg,r[17]=248|7&i.Cg,r[18]=248|7&i.Bg,r[19]=0,r[20]=0,r[21]=(3&i.Ig)<<6|(7&i.Dh)<<3|(i.ii?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=255&e.byteLength,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(65280&t.byteLength)>>8,r[e.byteLength+32]=255&t.byteLength,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,r[e.byteLength+10+t.byteLength+27]=255&n.byteLength,r.set(n,e.byteLength+10+t.byteLength+28),r}function Ox(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,s=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==s){var a=e[t+3]>>6;r=1e3*Px[14*(3===n?3-i:3===i?3:4)+r-1],s=Ux[3*(3===n?0:2===n?1:2)+s],n=Bx[n][i];var o=Fx[i],l=Math.floor(n*r/s+(e[t+2]>>1&1))*o,u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(u=u?parseInt(u[1],10):0)&&87>=u&&2===i&&224e3<=r&&0===a&&(e[t+3]|=128),{sampleRate:s,channelCount:3===a?1:2,wa:l,$l:8*n*o}}return null}function Nx(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function Lx(e,t){if(t+1<e.length&&Nx(e,t)){var n=Ox(e,t),i=4;return n&&n.wa&&(i=n.wa),t+=i,t===e.length||t+1<e.length&&Nx(e,t)}return!1}var Px=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Ux=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Bx=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Fx=[0,1,1,4];function jx(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function Vx(e){this.h=e,this.g=null}
/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/
function Hx(e){this.h=e,(this.g=n_.get("ISOBoxer")())&&zx(this)}function zx(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==qx[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}function Gx(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}i=jx.prototype,i.destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&Wt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){for(var r=De(e),s=vl(r).length;s<r.length&&!Lx(r,s);s++);var a;for(e=[];s<r.length;){var o=Ox(r,s);if(!o)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));a||(a=o),s+o.wa<=r.length&&e.push({data:r.subarray(s,s+o.wa),size:o.wa,duration:1152,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),s+=o.wa}return a?(r=9e4*a.$l/a.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a.sampleRate,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.h,baseMediaDecodeTime:r,Cb:e},stream:t},i=new lo([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=uo(i),this.g.set(n,t)),n=this.i!==t,i=go(i),this.i=t,this.h++,n?(t=it(t,i),Promise.resolve(t)):Promise.resolve(i)):Promise.reject(new Le(2,3,3018,n?n.S()[0]:null))},X("shaka.transmuxer.Mp3Transmuxer",jx),jx.prototype.transmux=jx.prototype.transmux,jx.prototype.getOriginalMimeType=jx.prototype.getOriginalMimeType,jx.prototype.convertCodecs=jx.prototype.convertCodecs,jx.prototype.isSupported=jx.prototype.isSupported,jx.prototype.destroy=jx.prototype.destroy,ki("audio/mpeg",function(){return new jx("audio/mpeg")},Ri),i=Vx.prototype,i.destroy=function(){},i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Gi(e).split(","),n=lt("audio",t);return t=lt("video",t),!(!n||t||"mp3"!=Vi(n))&&Wt(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Rl,e=De(e),e=this.g.parse(e),"mp3"!=e.ae().audio||"audio"!=r)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));for(n=new Uint8Array([]),r=d(e.yb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=Ox(e,t))?(t+i.wa<=e.length&&(n=it(n,e.subarray(t,t+i.wa))),t+=i.wa):t++;return Promise.resolve(n)},X("shaka.transmuxer.MpegTsTransmuxer",Vx),Vx.prototype.transmux=Vx.prototype.transmux,Vx.prototype.getOriginalMimeType=Vx.prototype.getOriginalMimeType,Vx.prototype.convertCodecs=Vx.prototype.convertCodecs,Vx.prototype.isSupported=Vx.prototype.isSupported,Vx.prototype.destroy=Vx.prototype.destroy,ki("video/mp2t",function(){return new Vx("video/mp2t")},Oi),i=Hx.prototype,i.destroy=function(){},i.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?Wt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Wt(t)||Wt(e)))},i.convertCodecs=function(e,t){return t.replace("mss/","")},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n){if(!n)return Promise.resolve(De(e));if(!t.mssPrivateData)return Promise.reject(new Le(2,3,3020,n?n.S()[0]:null));try{var i,r=this.g.parseBuffer(e),s=r.fetch("tfhd");s.track_ID=t.id+1;var a=r.fetch("tfdt"),o=r.fetch("traf");null===a&&(a=this.g.createFullBox("tfdt",o,s),a.version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var l=r.fetch("trun"),u=r.fetch("tfxd");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=r.fetch("sepiff");if(null!==d){d.type="senc",d.usertype=void 0;var h=r.fetch("saio");if(null===h){h=this.g.createFullBox("saio",o),h.version=0,h.flags=0,h.entry_count=1,h.offset=[0];var p=this.g.createFullBox("saiz",o);if(p.version=0,p.flags=0,p.sample_count=d.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],2&d.flags)for(i=0;i<d.sample_count;i+=1)p.sample_info_size[i]=10+6*d.entry[i].NumberOfEntries;else p.default_sample_info_size=8}}s.flags&=16777214,s.flags|=131072,l.flags|=1;var f=r.fetch("moof");l.data_offset=f.getLength()+8;var g=r.fetch("saio");null!==g&&(g.offset[0]=Gx(f,"traf")+Gx(o,"senc")+16);var m=De(r.write());return Promise.resolve(m)}catch(y){return y instanceof Le?Promise.reject(y):Promise.reject(new Le(2,3,3022,n?n.S()[0]:null))}},X("shaka.transmuxer.MssTransmuxer",Hx),Hx.prototype.transmux=Hx.prototype.transmux,Hx.prototype.getOriginalMimeType=Hx.prototype.getOriginalMimeType,Hx.prototype.convertCodecs=Hx.prototype.convertCodecs,Hx.prototype.isSupported=Hx.prototype.isSupported,Hx.prototype.destroy=Hx.prototype.destroy;var qx=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function Wx(e){this.m=e,this.g=0,this.i=new Map,this.l=this.h=this.j=null}ki("mss/audio/mp4",function(){return new Hx("mss/audio/mp4")},Ri),ki("mss/video/mp4",function(){return new Hx("mss/video/mp4")},Ri),i=Wx.prototype,i.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Gi(n).split(",");return n=lt("audio",i),i=lt("video",i),!(n&&(n=Vi(n),!Yx.includes(n))||i&&(n=Vi(i),!$x.includes(n)))&&(t?Wt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Wt(t)||Wt(e)))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Gi(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return Sr(e,"audio/mp4")}).map(Er).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},i.getOriginalMimeType=function(){return this.m},i.transmux=function(e,t,n,i,r){var s=De(e);if("audio"==r&&!Bl(s)){for(var a=vl(s),o=a.length;o<s.length;o++)if(Lx(s,o))return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));for(o=a.length;o<s.length;o++)if(yx(s,o))return this.h||(this.h=new bx("audio/aac")),this.h.transmux(e,t,n,i,r);return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null))}this.j?this.j.clearData():this.j=new Rl;var l=this.j.parse(s),u=[],c=l.ae();try{var p=null;if("video"==r){switch(c.video){case"avc":var f=[],g=null,m=l.cd(),y=Cx(m);if(!y.length)throw new Le(2,3,3023,n?n.S()[0]:null);for(var v=0;v<y.length;v++){var b=y[v];null==g&&(g=b.dts);var T=void 0;T=v+1<y.length?(y[v+1].dts||0)-(b.dts||0):1<y.length?(b.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),f.push({data:b.data,size:b.data.byteLength,duration:T,xb:Math.round((b.pts||0)-(b.dts||0)),flags:{zb:0,sb:0,rb:0,ob:0,pb:b.isKeyframe?2:1,Ab:b.isKeyframe?0:1}})}for(var _=[],w=d(m),S=w.next();!S.done;S=w.next())_.push.apply(_,h(S.value.nalus));var E=Ax(_);if(!E||null==g)throw new Le(2,3,3018,n?n.S()[0]:null);t.height=E.height,t.width=E.width,p={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:E.Wa,bb:E.bb,eb:E.eb,data:{Yb:this.g,baseMediaDecodeTime:g,Cb:f},stream:t};break;case"hvc":var A=[],C=null,I=[],x=l.cd();if(!x.length)throw new Le(2,3,3023,n?n.S()[0]:null);for(var k=0;k<x.length;k++){var M=x[k],D=M.nalus;I.push.apply(I,h(D));for(var R=!1,O=[],N=!1,L=d(D),P=L.next();!P.done;P=L.next()){var U=P.value;switch(U.type){case 1:case 0:var B=N=!0;break;case 19:case 20:case 21:R=B=N=!0;break;case 32:B=!0;break;case 33:B=!0;break;case 34:B=!0;break;case 35:N=B=!0;break;case 39:case 40:B=!0;break;default:B=!1}if(N&&B){var F=U.fullData.byteLength,j=new Uint8Array(4);j[0]=F>>24&255,j[1]=F>>16&255,j[2]=F>>8&255,j[3]=255&F,O.push(j),O.push(U.fullData)}}var V=O.length?{data:it.apply(Qe,h(O)),isKeyframe:R}:null;if(V){null==C&&null!=M.dts&&(C=M.dts);var H=void 0;H=k+1<x.length?(x[k+1].dts||0)-(M.dts||0):1<x.length?(M.dts||0)-(x[k-1].dts||0):9e4*(n.endTime-n.startTime),A.push({data:V.data,size:V.data.byteLength,duration:H,xb:Math.round((M.pts||0)-(M.dts||0)),flags:{zb:0,sb:0,rb:0,ob:0,pb:V.isKeyframe?2:1,Ab:V.isKeyframe?0:1}})}}var z=xx(I);if(!z||null==C)throw new Le(2,3,3018,n?n.S()[0]:null);t.height=z.height,t.width=z.width,p={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:z.Wa,bb:z.bb,eb:z.eb,data:{Yb:this.g,baseMediaDecodeTime:C,Cb:A},stream:t}}p&&(u.push(p),p=null)}if("audio"==r){switch(c.audio){case"aac":for(var G,q=[],W=null,X=null,K=null,Y=d(l.yb()),$=Y.next();!$.done;$=Y.next()){var Q=$.value,Z=Q.data;if(Z){var J=0;if(-1==X&&K)Z=it(K,Q.data),X=null;else if(null!=X&&K){J=Math.max(0,X);var ee=it(K,Z.subarray(0,J));q.push({data:ee,size:ee.byteLength,duration:1024,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),X=K=null}if(G=mx(Z,J),!G)throw new Le(2,3,3018,n?n.S()[0]:null);for(t.audioSamplingRate=G.sampleRate,t.channelsCount=G.channelCount,null==W&&null!==Q.pts&&(W=Q.pts);J<Z.length;){var te=gx(Z,J);if(!te){K=Z.subarray(J,Z.length),X=-1;break}var ne=te.ie+te.wa;X=Math.max(0,J+ne-Z.length),0!=X?K=Z.subarray(J+te.ie,J+ne):J+ne<=Z.length&&q.push({data:Z.subarray(J+te.ie,J+ne),size:te.wa,duration:1024,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),J+=ne}}}if(!G||null==W){if(!l.cd().length)throw new Le(2,3,3018,n?n.S()[0]:null);W=9e4*n.startTime;var ie=lt("audio",t.codecs.split(","));if(!ie||!t.channelsCount||!t.audioSamplingRate)throw new Le(2,3,3018,n?n.S()[0]:null);G={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:ie};var re=vx(ie,t.channelsCount);if(!re)throw new Le(2,3,3018,n?n.S()[0]:null);for(var se=W+9e4*(n.endTime-n.startTime),ae=W;ae<se;)q.push({data:re,size:re.byteLength,duration:1024,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),ae+=1024/G.sampleRate*9e4}var oe=G.sampleRate,le=W/9e4*oe;p={id:t.id,type:"audio",codecs:G.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:oe,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.g,baseMediaDecodeTime:le,Cb:q},stream:t};break;case"ac3":for(var ue=[],ce=0,de=new Uint8Array([]),he=null,pe=d(l.yb()),fe=pe.next();!fe.done;fe=pe.next()){var ge=fe.value,me=ge.data;null==he&&null!==ge.pts&&(he=ge.pts);for(var ye=0;ye<me.length;){var ve=Tx(me,ye);ve?(t.audioSamplingRate=ve.sampleRate,t.channelsCount=ve.channelCount,ce=ve.sampleRate,de=ve.Ma,ue.push({data:me.subarray(ye,ye+ve.wa),size:ve.wa,duration:1536,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),ye+=ve.wa):ye++}}if(0==ce||0==de.byteLength||null==he)throw new Le(2,3,3018,n?n.S()[0]:null);var be=he/9e4*ce;p={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ce,duration:i,Eb:[],Ma:de,Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.g,baseMediaDecodeTime:be,Cb:ue},stream:t};break;case"ec3":for(var Te=[],_e=0,we=new Uint8Array([]),Se=null,Ee=d(l.yb()),Ae=Ee.next();!Ae.done;Ae=Ee.next()){var Ce=Ae.value,Ie=Ce.data;null==Se&&null!==Ce.pts&&(Se=Ce.pts);for(var xe=0;xe<Ie.length;){var ke=Sx(Ie,xe);ke?(t.audioSamplingRate=ke.sampleRate,t.channelsCount=ke.channelCount,_e=ke.sampleRate,we=ke.Ma,Te.push({data:Ie.subarray(xe,xe+ke.wa),size:ke.wa,duration:1536,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),xe+=ke.wa):xe++}}if(0==_e||0==we.byteLength||null==Se)throw new Le(2,3,3018,n?n.S()[0]:null);var Me=Se/9e4*_e;p={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:_e,duration:i,Eb:[],Ma:we,Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.g,baseMediaDecodeTime:Me,Cb:Te},stream:t};break;case"mp3":for(var Re,Oe=[],Ne=null,Pe=d(l.yb()),Ue=Pe.next();!Ue.done;Ue=Pe.next()){var Be=Ue.value,Fe=Be.data;if(Fe){null==Ne&&null!==Be.pts&&(Ne=Be.pts);for(var je=0;je<Fe.length;){var Ve=Ox(Fe,je);Ve?(Re||(Re=Ve),je+Ve.wa<=Fe.length&&Oe.push({data:Fe.subarray(je,je+Ve.wa),size:Ve.wa,duration:1152,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),je+=Ve.wa):je++}}}if(!Re||null==Ne)throw new Le(2,3,3018,n?n.S()[0]:null);var He=Re.sampleRate,ze=Ne/9e4*He;p={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:He,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.g,baseMediaDecodeTime:ze,Cb:Oe},stream:t};break;case"opus":var Ge=[],qe=null,We=l.F;if(!We)throw new Le(2,3,3018,n?n.S()[0]:null);var Xe=[];switch(We.gk){case 1:case 2:Xe=[0];break;case 0:Xe=[255,1,1,0,1];break;case 128:Xe=[255,2,0,0,1];break;case 3:Xe=[1,2,1,0,2,1];break;case 4:Xe=[1,2,2,0,1,2,3];break;case 5:Xe=[1,3,2,0,4,1,2,3];break;case 6:Xe=[1,4,2,0,4,1,2,3,5];break;case 7:Xe=[1,4,2,0,4,1,2,3,5,6];break;case 8:Xe=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Xe=[1,1,2,0,1];break;case 131:Xe=[1,1,3,0,1,2];break;case 132:Xe=[1,1,4,0,1,2,3];break;case 133:Xe=[1,1,5,0,1,2,3,4];break;case 134:Xe=[1,1,6,0,1,2,3,4,5];break;case 135:Xe=[1,1,7,0,1,2,3,4,5,6];break;case 136:Xe=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ke=new Uint8Array([0,We.channelCount,0,0,We.sampleRate>>>24&255,We.sampleRate>>>17&255,We.sampleRate>>>8&255,We.sampleRate>>>0&255,0,0].concat(h(Xe))),Ye=We.sampleRate,$e=d(l.yb()),Ze=$e.next();!Ze.done;Ze=$e.next()){var Je=Ze.value,et=Je.data;null==qe&&null!==Je.pts&&(qe=Je.pts);for(var tt=0;tt<et.length;){for(var nt=0!==(16&et[tt+1]),rt=0!==(8&et[tt+1]),st=tt+2,at=0;255===et[st];)at+=255,st+=1;at+=et[st],st+=1,st+=nt?2:0,st+=rt?2:0;var ot=et.slice(st,st+at);Ge.push({data:ot,size:ot.byteLength,duration:960,xb:0,flags:{zb:0,sb:0,rb:0,ob:0,pb:2,Ab:0}}),tt=st+at}}if(0==Ke.byteLength||null==qe)throw new Le(2,3,3018,n?n.S()[0]:null);t.audioSamplingRate=We.sampleRate,t.channelsCount=We.channelCount;var ut=qe/9e4*Ye;p={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ye,duration:i,Eb:[],Ma:Ke,Wa:new Uint8Array([]),bb:0,eb:0,data:{Yb:this.g,baseMediaDecodeTime:ut,Cb:Ge},stream:t}}p&&(u.push(p),p=null)}}catch(mt){return mt&&3023==mt.code?Promise.resolve(new Uint8Array([])):Promise.reject(mt)}if(!u.length)return Promise.reject(new Le(2,3,3018,n?n.S()[0]:null));var ct=new lo(u),dt=t.id+"_"+n.i;if(this.i.has(dt))var ht=this.i.get(dt);else ht=uo(ct),this.i.set(dt,ht);var pt=this.l!==ht,ft=go(ct);if(this.l=ht,this.g++,pt){var gt=it(ht,ft);return Promise.resolve(gt)}return Promise.resolve(ft)},X("shaka.transmuxer.TsTransmuxer",Wx),Wx.prototype.transmux=Wx.prototype.transmux,Wx.prototype.getOriginalMimeType=Wx.prototype.getOriginalMimeType,Wx.prototype.convertCodecs=Wx.prototype.convertCodecs,Wx.prototype.isSupported=Wx.prototype.isSupported,Wx.prototype.destroy=Wx.prototype.destroy;var Xx,Kx,Yx=["aac","ac-3","ec-3","mp3","opus"],$x=["avc","hevc"];function Qx(){}
/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Zx(){}function Jx(){Xx||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Xx=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=ek,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function ek(e,t){var n,i=this;return U(function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),S(r,Xx.call(i,e,t),2)):(n=r.h,ck(n)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Xx,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=tk,r.return(tk.call(i,e,t))))})}function tk(e,t){var n,i,r,s,a,o,l,u,c,h,p,f,g=this;return U(function(m){if(1==m.g){for(console.assert(g==navigator,'bad "this" for requestMediaKeySystemAccess'),n=uk(e),i=[],r=d(t),s=r.next();!s.done;s=r.next())a=s.value,o=nk(a.videoCapabilities,n),l=nk(a.audioCapabilities,n),a.videoCapabilities&&a.videoCapabilities.length&&!o.length||a.audioCapabilities&&a.audioCapabilities.length&&!l.length||(u=Object.assign({},a),u.videoCapabilities=o,u.audioCapabilities=l,i.push(u));if(!i.length)throw c=Error("Unsupported keySystem or supportedConfigurations."),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(m,Xx.call(g,e,i),2)}return h=m.h,f=p=null,i[0]&&(i[0].videoCapabilities&&(p=i[0].videoCapabilities[0].encryptionScheme),i[0].audioCapabilities&&(f=i[0].audioCapabilities[0].encryptionScheme)),m.return(new lk(h,p,f))})}function nk(e,t){return e?e.filter(function(e){return dk(e.encryptionScheme,t)}):e}function ik(){}function rk(){Kx||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Kx=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=sk,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function sk(e){var t,n,i=this;return U(function(r){switch(r.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(r,Kx.call(i,e),2);case 2:if(t=r.h,!t.supported||!e.keySystemConfiguration)return r.return(t);if((n=t.keySystemAccess)&&ck(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Kx,r.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ak,n){r.A(3);break}return S(r,ok(e),4);case 4:return t.keySystemAccess=r.h,r.return(t);case 3:return r.return(ak.call(i,e))}})}function ak(e){var t,n,i,r,s,a,o,l=this;return U(function(u){switch(u.g){case 1:return console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=t=null,!e.keySystemConfiguration||(i=e.keySystemConfiguration,r=i.keySystem,n=i.audio&&i.audio.encryptionScheme,t=i.video&&i.video.encryptionScheme,s=uk(r),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},dk(n,s)&&dk(t,s))?S(u,Kx.call(l,e),2):u.return(a);case 2:if(o=u.h,o.keySystemAccess){o.keySystemAccess=new lk(o.keySystemAccess,t,n),u.A(3);break}if(!e.keySystemConfiguration){u.A(3);break}return S(u,ok(e),5);case 5:o.keySystemAccess=u.h;case 3:return u.return(o)}})}function ok(e){var t,n;return U(function(i){if(1==i.g){var r=e.keySystemConfiguration,s=[],a=[];return r.audio&&s.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&a.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},s.length&&(r.audioCapabilities=s),a.length&&(r.videoCapabilities=a),t=r,S(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}function lk(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function uk(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.huawei")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function ck(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function dk(e,t){return!e||e==t||!("cbcs"!=e&&"cbcs-1-9"!=e||!(mk||bk||gk))}function hk(){}function pk(){Jx(),rk()}ki("video/mp2t",function(){return new Wx("video/mp2t")},Ni),b(Qx,Od),X("shaka.util.FairPlayUtils",Qx),X("EmeEncryptionSchemePolyfill",Zx),Zx.install=Jx,X("McEncryptionSchemePolyfill",ik),ik.install=rk,lk.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=d(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=d(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},lk.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},X("EncryptionSchemePolyfills",hk),hk.install=pk;var fk,gk=navigator.userAgent.includes("CrKey"),mk=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10),yk=navigator.userAgent||"";if(yk.includes("Web0S")){var vk=yk.match(/Chrome\/(\d+)/);fk=!!vk&&79<=parseInt(vk[1],10)}else fk=!1;var bk=fk;function Tk(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new Rt,this.localization=this.controls.ra,this.player=this.controls.Sb(),this.video=this.controls.Jc(),this.adManager=this.player.mf(),this.ad=t.getAd(),this.eventManager.o(this.adManager,"ad-started",function(e){n.ad=e.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null})}function _k(e){return wk(e,"shaka-back-to-overflow-button")}function wk(e,t){return e=e.getElementsByClassName(t),e.length?e[0]:null}function Sk(e){e&&(e=wk(e,"shaka-chosen-item"))&&e.parentElement.focus()}function Ek(){var e=nl("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function Ak(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function Ck(e,t){var n=Math.floor(e/86400),i=Math.floor(e%86400/3600),r=Math.floor(e/60%60);return e=Math.floor(e%60),10>e&&(e="0"+e),e=r+":"+e,t&&(10>r&&(e="0"+e),e=i+":"+e,0<n&&(10>i&&(e="0"+e),e=n+":"+e)),e}function Ik(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("shaka-ad-info"),this.g.disabled=!0,this.parent.appendChild(this.g),this.h=new sr(function(){if(n.ad.isLinear()){var e="",t=n.ad.getSequenceLength();1<t&&(e=n.ad.getPositionInSequence(),e=n.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(e)).replace("[NUM_ADS]",String(t)));var i=Math.round(n.ad.getRemainingTime()),r=n.ad.getDuration();-1==i||-1==r?(n.g.textContent=e,Ak(n.g,""!=e)):0<i?(i=Ck(r-i,!1)+" / "+Ck(r,!1),e=1<t?e+""+i:n.localization.resolve("AD_TIME").replace("[AD_TIME]",i),n.g.textContent=e,Ak(n.g,""!=e)):(n.h.stop(),n.g.textContent="")}}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){n.h.Ka(),n.h.ya(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.h.stop(),n.g.textContent=""}),this.ad&&(this.h.Ka(),this.h.ya(.5))}function xk(t,n){Tk.call(this,t,n);var i=this;this.j=this.controls.g,this.h=this.controls.h,this.i=[],this.g=nl("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(e){if(i.g.classList.contains("shaka-hidden")){e.preventDefault();var t=i.h.getBoundingClientRect();i.g.style.left=e.clientX-t.left+"px",i.g.style.top=e.clientY-t.top+"px",Ak(i.g,!0)}else Ak(i.g,!1)}),this.eventManager.o(e,"click",function(){Ak(i.g,!1)}),this.eventManager.o(this.g,"click",function(){Ak(i.g,!1)}),Mk(this)}function kk(e,t){Dk.set(e,t)}function Mk(e){for(var t=d(e.j.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var i=Dk.get(n);i?e.i.push(i.create(e.g,e.controls)):J("Unrecognized context menu element:",n)}}"undefined"!==typeof n&&n.exports&&(n.exports=hk),Tk.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},X("shaka.ui.Element",Tk),Tk.prototype.release=Tk.prototype.release,b(Ik,Tk),Ik.prototype.release=function(){this.h.stop(),this.h=null,Tk.prototype.release.call(this)},X("shaka.ui.AdInfo",Ik),b(xk,Tk),xk.prototype.release=function(){this.h=null;for(var e=d(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],Tk.prototype.release.call(this)},xk.prototype.Gi=function(){Ak(this.g,!1)},X("shaka.ui.ContextMenu",xk),xk.registerElement=kk,xk.prototype.closeMenu=xk.prototype.Gi;var Dk=new Map;function Rk(e,t){Tk.call(this,e,t);var n=this;this.button=il(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){Ok(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Ok(n)}),this.eventManager.o(this.video,"play",function(){Ok(n),n.g()}),this.eventManager.o(this.video,"pause",function(){Ok(n),n.g()}),this.eventManager.o(this.video,"seeking",function(){Ok(n),n.g()}),this.eventManager.o(this.player,"loaded",function(){Ok(n),n.g()}),this.eventManager.o(this.adManager,"ad-paused",function(){Ok(n),n.g()}),this.eventManager.o(this.adManager,"ad-resumed",function(){Ok(n),n.g()}),this.eventManager.o(this.adManager,"ad-started",function(){Ok(n),n.g()}),this.eventManager.o(this.adManager,"ad-stopped",function(){Ok(n),n.g()}),this.eventManager.o(this.button,"click",function(){n.controls.Ba()&&BM(n.controls)}),Ok(this),this.g()}function Ok(e){if(e.isEnded()&&e.video.duration)e.button.ariaLabel=e.localization.resolve("REPLAY");else{var t=e.isPaused()?"PLAY":"PAUSE";e.button.ariaLabel=e.localization.resolve(t)}}function Nk(e,t){Rk.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation")}function Lk(e,t){Tk.call(this,e,t);var n=this;this.s=null,this.j=this.C=!1,this.B=this.u=null,this.l=new sr(function(){0===parseInt(n.h.textContent,10)&&iD(n.controls,!0);var e=parseInt(n.h.textContent,10);0!==e&&(n.video.currentTime=n.controls.gh()+e),n.g.style.opacity="0",n.C=!1,n.h.textContent="0s"}),this.g=nl("div"),this.g.classList.add("shaka-no-propagation"),this.parent.appendChild(this.g),this.h=nl("span"),this.h.textContent="0s",this.g.appendChild(this.h),this.i=nl("span"),this.i.classList.add("shaka-forward-rewind-container-icon"),this.g.appendChild(this.i),this.m=!1,this.eventManager.o(this.g,"touchstart",function(e){n.controls.Ba()&&(0<e.touches.length&&(n.u=e.touches[0].clientX,n.B=e.touches[0].clientY),n.j=!1)}),this.eventManager.o(this.g,"touchmove",function(e){if(0<e.touches.length&&null!=n.u&&null!=n.B){var t=e.touches[0].clientX-n.u;e=e.touches[0].clientY-n.B,10<Math.sqrt(t*t+e*e)&&(n.j=!0)}}),this.eventManager.o(this.g,"touchend",function(e){if(n.controls.Ba()&&!n.j)if(n.controls.Cc())e.preventDefault(),n.controls.Lc();else if(0<n.controls.g.tapSeekDistance)if(e.preventDefault(),e=n.controls.g.tapSeekDistance,n.C){if(n.s+500>Date.now()){n.l.stop(),n.s=Date.now();var t=parseInt(n.h.textContent,10);t=n.m?t-e:t+e,n.h.textContent=t.toString()+"s",n.g.style.opacity="1",n.l.X(.5)}}else n.C=!0,n.s=Date.now(),n.l.X(.5)})}function Pk(e,t){Lk.call(this,e,t),this.g.classList.add("shaka-fast-forward-container"),this.i.textContent="fast_forward",this.m=!1}function Uk(e,t){Lk.call(this,e,t),this.g.classList.add("shaka-rewind-container"),this.i.textContent="fast_rewind",this.m=!0}function Bk(e,t,n,i){Tk.call(this,e,t);var r=this;this.container=nl("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,h(n)),this.i=!1,this.bar=document.createElement("input"),this.F=new sr(function(){r.onChangeEnd(),r.i=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,h(i)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.bar.disabled=!this.controls.Ba(),this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.K=new sr(function(){r.bar.disabled=!1}),this.eventManager.o(this.controls,"showingui",function(){r.K.X(0)}),this.eventManager.o(this.controls,"hidingui",function(){r.K.stop(),r.bar.disabled=!0}),this.eventManager.o(this.bar,"mousedown",function(e){r.bar.disabled||(r.i=!0,r.onChangeStart(),e.stopPropagation())}),this.eventManager.o(this.bar,"touchstart",function(e){r.bar.disabled||(r.i=!0,Fk(r,e),r.onChangeStart(),e.stopPropagation())}),this.eventManager.o(this.bar,"input",function(){r.onChange()}),this.eventManager.o(this.bar,"touchmove",function(e){r.i&&(Fk(r,e),r.onChange(),e.stopPropagation())}),this.eventManager.o(this.bar,"touchend",function(e){r.i&&(r.i=!1,Fk(r,e),r.onChangeEnd(),e.stopPropagation())}),this.eventManager.o(this.bar,"touchcancel",function(e){r.i&&(r.i=!1,Fk(r,e),r.onChangeEnd(),e.stopPropagation())}),this.eventManager.o(this.bar,"mouseup",function(e){r.i&&(r.i=!1,r.onChangeEnd(),e.stopPropagation())}),this.eventManager.o(this.bar,"blur",function(){r.i&&(r.i=!1,r.onChangeEnd())}),this.eventManager.o(this.bar,"contextmenu",function(e){e.preventDefault(),e.stopPropagation()})}function Fk(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.bar.getBoundingClientRect();t=parseFloat(e.bar.min);var r=parseFloat(e.bar.max);n=t+(r-t)/i.width*(n.clientX-i.left),n<t?n=t:n>r&&(n=r),e.bar.value=n}function jk(e,t){Bk.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.D=nl("div"),this.D.classList.add("shaka-ad-markers"),this.container.insertBefore(this.D,this.container.childNodes[0]),this.H=this.controls.g,this.u=new sr(function(){var e=n.getValue();n.player.T()||e==n.video.duration&&(e-=.001),n.video.currentTime=e}),this.B=new sr(function(){Vk(n)}),this.L=!1,this.h=nl("div"),this.h.id="shaka-player-ui-thumbnail-container",this.g=nl("img"),this.g.id="shaka-player-ui-thumbnail-image",this.g.draggable=!1,this.J=nl("div"),this.J.id="shaka-player-ui-thumbnail-time-container",this.G=nl("div"),this.G.id="shaka-player-ui-thumbnail-time",this.J.appendChild(this.G),this.h.appendChild(this.g),this.h.appendChild(this.J),this.container.appendChild(this.h),this.j=nl("div"),this.j.id="shaka-player-ui-time-container",this.container.appendChild(this.j),this.l=this.m=null,this.I=!1,this.s=new sr(function(){Xk(n)}),this.C=[],this.eventManager.o(this.bar,"input",function(){n.controls.Lc()}),this.eventManager.o(this.localization,"locale-updated",function(){return Gk(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return Gk(n)}),this.eventManager.o(this.adManager,"ad-started",function(){zk(n)||Ak(n.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){zk(n)&&Ak(n.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(e){n.C=e.cuepoints,Hk(n)}),this.eventManager.o(this.player,"unloading",function(){n.C=[],Hk(n),n.l&&(n.l.abort(),n.l=null),n.m=null,Xk(n),Kk(n)}),this.eventManager.o(this.bar,"mousemove",function(e){if(n.controls.Cc())Kk(n),Xk(n);else{var t=n.bar.getBoundingClientRect(),i=parseFloat(n.bar.min),r=parseFloat(n.bar.max);e=Math.max(0,e.clientX-t.left),t=Math.min(r,Math.round(i+(r-i)/t.width*e)),n.player.hh().length?(Kk(n),Wk(n,e,t)):(Xk(n),qk(n,e,t))}}),this.eventManager.o(this.container,"mouseleave",function(){Kk(n),n.s.stop(),n.s.X(.25)}),this.setValue(this.video.currentTime),this.update(),Gk(this),this.ad&&Ak(this.container,!1)}function Vk(e){if(e.C.length){for(var t=e.player.xa(),n=t.end-t.start,i=["to right"],r=[],s=e.H.seekBarColors.adBreaks,a=!1,o=d(e.C),l=o.next();!l.done;l=o.next())if(l=l.value,-1!=l.start||l.end){if(!l.end&&l.start>=t.start||"number"==typeof l.end&&l.end>t.start){var u=(Math.max(l.start,t.start)-t.start)/n||0,c=u+.01;l.end&&(c=(l.end-t.start)/n||0),r.push({start:u,end:c})}}else a=!0;for(r=r.sort(function(e,t){return e.start-t.start}),t=d(r),n=t.next();!n.done;n=t.next())n=n.value,i.push("transparent "+100*n.start+"%"),i.push(s+" "+100*n.start+"%"),i.push(s+" "+100*n.end+"%"),i.push("transparent "+100*n.end+"%");a&&(i.push("transparent 99%"),i.push(s+" 99%")),e.D.style.background="linear-gradient("+i.join(",")+")"}else e.D.style.background="transparent",e.B.stop()}function Hk(e){function t(){Vk(e);var t=e.player.xa();t=t.end-t.start,e.player.T()&&5<t&&e.B.ya(.25)}e.player.Y?t():e.eventManager.qa(e.player,"loaded",t)}function zk(e){var t=e.player.xa();return t=t.end-t.start,!(e.player.T()&&(5>t||!isFinite(t)))&&(null==e.ad||!e.ad.isLinear())}function Gk(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function qk(e,t,n){var i=e.j.clientWidth;e.j.style.width="auto",e.j.style.height="20px",e.j.style.top="-30px",e.j.style.left=Math.min(e.bar.offsetWidth-i,Math.max(0,t-i/2))+"px",e.j.style.right="",e.j.style.visibility="visible",t=e.player.xa(),e.player.T()?(n=t.end-n,1>n?(e.j.textContent=e.localization.resolve("LIVE"),e.j.style.left="",e.j.style.right="0px"):e.j.textContent="-"+Yk(n)):e.j.textContent=Yk(n-t.start)}function Wk(e,t,n){var i,r,s,a,o,l,u,c,d,h,p,f,g,m,y,v,b;U(function(T){switch(T.g){case 1:return 0>n&&(n=0),i=e.player.xa(),r=Math.max(Math.ceil(i.start),Math.min(Math.floor(i.end),n)),e.player.T()?(s=i.end-n,e.G.textContent=1>s?e.localization.resolve("LIVE"):"-"+Yk(s)):e.G.textContent=Yk(n),S(T,e.player.Si(null,r),2);case 2:if(a=T.h,!a||!a.uris||!a.uris.length)return Xk(e),qk(e,t,n),T.return();if(a.width<a.height?e.h.classList.add("portrait-thumbnail"):e.h.classList.remove("portrait-thumbnail"),o=-10,l=e.h.clientWidth,u=Math.floor(9*l/16),e.h.style.height=u+"px",e.h.style.top=-(u-o)+"px",c=Math.min(e.bar.offsetWidth-l,Math.max(0,t-l/2)),e.h.style.left=c+"px",e.h.style.visibility="visible",d=a.uris[0].split("#xywh=")[0],e.m&&d===e.m.uris[0].split("#xywh=")[0]&&a.startByte==e.m.startByte&&a.endByte==e.m.endByte){T.A(3);break}if(e.m=a,e.l&&(e.l.abort(),e.l=null),"mjpg"!=a.codecs&&!d.startsWith("offline:")){T.A(4);break}return e.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',A(T,5),h=Cs,p=Vc(a.uris,a.startByte,a.endByte,e.player.getConfiguration().streaming.retryParameters),e.l=e.player.Ib().request(h,p,{type:1}),S(T,e.l.promise,7);case 7:f=T.h,e.l=null,"mjpg"==a.codecs?(g=(new Ps).box("mdat",Vs(function(e){d=URL.createObjectURL(new Blob([e],{type:"image/jpeg"}))})),g.parse(f.data,!1)):(m=a.mimeType||"image/jpeg",y=new Blob([f.data],{type:m}),d=URL.createObjectURL(y)),I(T,4);break;case 5:if(v=x(T),7001==v.code)return T.return();throw v;case 4:try{e.h.removeChild(e.g)}catch(_){}e.g=nl("img"),e.g.id="shaka-player-ui-thumbnail-image",e.g.draggable=!1,e.g.src=d,e.g.onload=function(){d.startsWith("blob:")&&URL.revokeObjectURL(d)},e.h.insertBefore(e.g,e.h.firstChild);case 3:b=l/a.width,a.imageHeight?e.g.height=a.imageHeight:a.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain"),a.imageWidth?e.g.width=a.imageWidth:a.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain"),e.g.style.left="-"+b*a.positionX+"px",e.g.style.top="-"+b*a.positionY+"px",e.g.style.transform="scale("+b+")",e.g.style.transformOrigin="left top",u=Math.floor(l*a.height/a.width),e.h.style.height=u+"px",e.h.style.top=-(u-o)+"px",E(T)}})}function Xk(e){e.h.style.visibility="hidden"}function Kk(e){e.j.style.visibility="hidden"}function Yk(e){var t=Math.round(e);e=Math.floor(t/3600);var n=Math.floor((t-3600*e)/60);return t=t-3600*e-60*n,10>t&&(t="0"+t),0<e?(10>n&&(n="0"+n),e+":"+n+":"+t):n+":"+t}function $k(){}function Qk(e,t){Tk.call(this,e,t);var n=this;this.j=nl("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=nl("div"),this.h.classList.add("shaka-skip-ad-counter"),Ak(this.h,!1),this.j.appendChild(this.h),this.g=il(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,Ak(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),Zk(this),this.i=new sr(function(){if(n.ad.isSkippable()){var e=Math.round(n.ad.getTimeUntilSkippable());0<e?n.h.textContent=e:(n.i.stop(),Ak(n.h,!1))}else eM(n)}),this.eventManager.o(this.localization,"locale-updated",function(){Zk(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Zk(n)}),this.eventManager.o(this.adManager,"ad-started",function(){Jk(n)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){n.ad.isSkippable()?n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),Ak(n.h,!1)):eM(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){eM(n)}),this.eventManager.o(this.g,"click",function(){n.ad.skip()}),this.ad&&Jk(this)}function Zk(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function Jk(e){e.ad.isSkippable()&&e.ad.needsSkipUI()&&(Ak(e.g,!0),Ak(e.h,!0),e.h.textContent="",e.i.Ka(),e.i.ya(.5))}function eM(e){e.i.stop(),e.g.disabled=!0,Ak(e.g,!1),Ak(e.h,!1)}
/*
 @license
 glMatrix: https://github.com/toji/gl-matrix/
 Copyright 2015-2021, Brandon Jones, Colin MacKenzie IV
 SPDX-License-Identifier: MIT
*/
function tM(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function nM(e,t,n){t=1/Math.tan(t/2),e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n=1/-99.9,e[10]=100.1*n,e[14]=20*n}function iM(e,t,n){var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],p=t[10],f=t[11],g=t[12],m=t[13],y=t[14];t=t[15];var v=n[0],b=n[1],T=n[2],_=n[3];e[0]=v*i+b*o+T*d+_*g,e[1]=v*r+b*l+T*h+_*m,e[2]=v*s+b*u+T*p+_*y,e[3]=v*a+b*c+T*f+_*t,v=n[4],b=n[5],T=n[6],_=n[7],e[4]=v*i+b*o+T*d+_*g,e[5]=v*r+b*l+T*h+_*m,e[6]=v*s+b*u+T*p+_*y,e[7]=v*a+b*c+T*f+_*t,v=n[8],b=n[9],T=n[10],_=n[11],e[8]=v*i+b*o+T*d+_*g,e[9]=v*r+b*l+T*h+_*m,e[10]=v*s+b*u+T*p+_*y,e[11]=v*a+b*c+T*f+_*t,v=n[12],b=n[13],T=n[14],_=n[15],e[12]=v*i+b*o+T*d+_*g,e[13]=v*r+b*l+T*h+_*m,e[14]=v*s+b*u+T*p+_*y,e[15]=v*a+b*c+T*f+_*t}function rM(e,t){var n=new Float32Array(3),i=t[0],r=t[1],s=t[2],a=t[4],o=t[5],l=t[6],u=t[8],c=t[9],d=t[10];n[0]=Math.sqrt(i*i+r*r+s*s),n[1]=Math.sqrt(a*a+o*o+l*l),n[2]=Math.sqrt(u*u+c*c+d*d),l=1/n[0],u=1/n[1],c=1/n[2],a=t[0]*l,n=t[1]*u,i=t[2]*c,r=t[4]*l,o=t[5]*u,s=t[6]*c,l*=t[8],u*=t[9],t=t[10]*c,c=a+o+t,0<c?(t=2*Math.sqrt(c+1),e[3]=.25*t,e[0]=(s-u)/t,e[1]=(l-i)/t,e[2]=(n-r)/t):a>o&&a>t?(t=2*Math.sqrt(1+a-o-t),e[3]=(s-u)/t,e[0]=.25*t,e[1]=(n+r)/t,e[2]=(l+i)/t):o>t?(t=2*Math.sqrt(1+o-a-t),e[3]=(l-i)/t,e[0]=(n+r)/t,e[1]=.25*t,e[2]=(s+u)/t):(t=2*Math.sqrt(1+t-a-o),e[3]=(n-r)/t,e[0]=(l+i)/t,e[1]=(s+u)/t,e[2]=.25*t)}function sM(e,t){var n=t[0],i=t[1],r=t[2];t=t[3];var s=n+n,a=i+i,o=r+r;n*=s;var l=i*s;i*=a;var u=r*s,c=r*a;r*=o,s*=t,a*=t,t*=o,e[0]=1-i-r,e[1]=l+t,e[2]=u-a,e[3]=0,e[4]=l-t,e[5]=1-n-r,e[6]=c+s,e[7]=0,e[8]=u+a,e[9]=c-s,e[10]=1-n-i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}function aM(){var e=new Float32Array(4);return e[3]=1,e}function oM(e,t){var n=t[0],i=t[1],r=t[2];t=t[3];var s=n*n+i*i+r*r+t*t;0<s&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=i*s,e[2]=r*s,e[3]=t*s}function lM(e){var t=[],n=[],i=[],r=Math.PI;e=void 0!==e&&e?r/2:r;for(var s=0;100>=s;s++){var a=s*r/100,o=Math.sin(a);a=Math.cos(a);for(var l=0;100>=l;l++){var u=2*l*e/100;t.push(Math.sin(u)*o,a,Math.cos(u)*o),n.push(l/100,s/100)}}for(r=0;100>r;r++)for(e=0;100>e;e++)s=101*r+e,o=s+101,i.push(s,o,s+1),i.push(o,o+1,s+1);return{Wj:t,Tj:n,indices:i}}function uM(e,t,n,i,r){this.i=e,this.oa=t,this.s=n,this.g=i,this.u=new Rt,this.L=aM(),this.h=aM(),this.ba=this.na=this.$=this.l=null,this.D=tM(),this.I=tM(),this.N=tM(),this.Y=tM(),this.C=null,this.O=!1,this.J=this.B=null,this.ra=this.sa=0,this.Z=this.P=this.R=this.K=null,this.H=this.G=0,this.j=75,this.U=0,this.m=r,this.F=-1,cM(this)}function cM(e){dM(e),hM(e),pM(e),gM(e),mM(e),ju(e.i,HTMLMediaElement.HAVE_CURRENT_DATA,e.u,function(){if(e.i.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA&&yM(e),"requestVideoFrameCallback"in e.i){var t=function(){-1!=e.F&&(yM(e),-1!=e.F&&(e.F=e.i.requestVideoFrameCallback(t)))};e.F=e.i.requestVideoFrameCallback(t)}else{var n;e.u.o(e.i,"canplaythrough",function(){yM(e)}),e.u.o(e.i,"playing",function(){if(e.B&&e.B.stop(),!n){var t=e.oa.qb();t=d(t);for(var i=t.next();!i.done;i=t.next())(i=i.value.frameRate)&&(!n||n<i)&&(n=i)}n||(n=60),yM(e),e.B=new sr(function(){yM(e)}).Ka().ya(1/n)}),e.u.o(e.i,"pause",function(){e.B&&e.B.stop(),e.B=null,yM(e)}),e.u.o(e.i,"seeked",function(){yM(e)}),e.u.o(document,"visibilitychange",function(){yM(e)})}})}function dM(e){var t=e.D,n=[0,0,0],i=[1,0,0],r=[0,1,0],s=n[0],a=n[1];n=n[2];var o=r[0],l=r[1],u=r[2],c=i[0];r=i[1];var d=i[2];if(1e-6>Math.abs(s-c)&&1e-6>Math.abs(a-r)&&1e-6>Math.abs(n-d))for(s=0;16>s;s++)t[s]=0==s%5?1:0;else{i=s-c,r=a-r,c=n-d;var h=1/Math.sqrt(i*i+r*r+c*c);i*=h,r*=h,c*=h,d=l*c-u*r,u=u*i-o*c,o=o*r-l*i,(h=Math.sqrt(d*d+u*u+o*o))?(h=1/h,d*=h,u*=h,o*=h):o=u=d=0,l=r*o-c*u;var p=c*d-i*o,f=i*u-r*d;(h=Math.sqrt(l*l+p*p+f*f))?(h=1/h,l*=h,p*=h,f*=h):f=p=l=0,t[0]=d,t[1]=l,t[2]=i,t[3]=0,t[4]=u,t[5]=p,t[6]=r,t[7]=0,t[8]=o,t[9]=f,t[10]=c,t[11]=0,t[12]=-(d*s+u*a+o*n),t[13]=-(l*s+p*a+f*n),t[14]=-(i*s+r*a+c*n),t[15]=1}rM(e.L,e.D),e=t=e.Y,n=[4,4,4],s=n[0],a=n[1],n=n[2],t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}function hM(e){vM(e),e.g.viewport(0,0,e.g.drawingBufferWidth,e.g.drawingBufferHeight),e.g.clearColor(0,0,0,1),e.g.enable(e.g.CULL_FACE),e.g.cullFace(e.g.FRONT),e.g.clear(e.g.COLOR_BUFFER_BIT)}function pM(e){var t=fM(e,e.g.VERTEX_SHADER),n=fM(e,e.g.FRAGMENT_SHADER);e.l=e.g.createProgram(),e.g.attachShader(e.l,t),e.g.attachShader(e.l,n),e.g.linkProgram(e.l),"cubemap"==e.m?(e.R=e.g.getAttribLocation(e.l,"aVertexPosition"),e.P=e.g.getAttribLocation(e.l,"aTextureCoord")):(e.R=e.g.getAttribLocation(e.l,"a_vPosition"),e.g.enableVertexAttribArray(e.R),e.P=e.g.getAttribLocation(e.l,"a_TexCoordinate"),e.g.enableVertexAttribArray(e.P))}function fM(e,t){switch(t){case e.g.VERTEX_SHADER:var n="cubemap"==e.m?"attribute vec4 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvarying highp vec2 vTextureCoord;\nvarying highp vec3 vLighting;\nvoid main(void) {\n  gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n  vTextureCoord = aTextureCoord;\n}":"attribute vec4 a_vPosition;\n// Per-vertex texture coordinate info\nattribute vec2 a_TexCoordinate;\nuniform mat4 u_VPMatrix;\n// Passed into the fragment shader.\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nvoid main()\n{\n gl_Position = u_VPMatrix * a_vPosition;\n // Pass through texture coord\n v_TexCoordinate = a_TexCoordinate;\n pass_position = a_vPosition.xyz;\n}";break;case e.g.FRAGMENT_SHADER:n="cubemap"==e.m?"varying highp vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\n  highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n  gl_FragColor = vec4(texelColor.rgb , texelColor.a);\n}":"precision highp float;\n#define PI 3.141592653589793238462643383279\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nuniform sampler2D uSampler;\nvoid main(void) {\nhighp float xValue =\n      (PI + atan(pass_position.z, pass_position.x)) / (2.0 * PI);\n vec2 tc = vec2(xValue, v_TexCoordinate.t);\n tc = vec2(tc.x , tc.y);\nhighp vec4 texelColor =\n      texture2D(uSampler, tc);\n  gl_FragColor = vec4(texelColor.rgb, texelColor.a);\n}";break;default:return null}return t=e.g.createShader(t),e.g.shaderSource(t,n),e.g.compileShader(t),t}function gM(e){e.K="cubemap"==e.m?{Wj:[-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1],Tj:[2/3,.5,1/3,.5,1/3,0,2/3,0,2/3,.5,2/3,0,1,0,1,.5,1,1,2/3,1,2/3,.5,1,.5,0,.5,0,0,1/3,0,1/3,.5,0,.5,1/3,.5,1/3,1,0,1,1/3,1,1/3,.5,2/3,.5,2/3,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}:"halfequirectangular"==e.m?lM(!0):lM(),e.$=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.$),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.K.Wj),e.g.STATIC_DRAW),e.na=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.na),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.K.Tj),e.g.STATIC_DRAW),e.ba=e.g.createBuffer(),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ba),e.g.bufferData(e.g.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.K.indices),e.g.STATIC_DRAW)}function mM(e){e.Z=e.g.createTexture(),e.g.bindTexture(e.g.TEXTURE_2D,e.Z),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_S,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_T,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MIN_FILTER,e.g.NEAREST),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MAG_FILTER,e.g.NEAREST)}function yM(e,t){t=void 0===t||t;var n=e.oa.m==yg;!e.i||2>e.i.readyState||!n&&0==e.i.playbackRate||(nM(e.I,e.j*Math.PI/180,1.5625),"cubemap"==e.m?nM(e.I,e.j*Math.PI/180,2.5):nM(e.I,e.j*Math.PI/180,1.5625),e.g.useProgram(e.l),e.g.clear(e.g.COLOR_BUFFER_BIT),vM(e),t&&(e.g.activeTexture(e.g.TEXTURE0),e.g.bindTexture(e.g.TEXTURE_2D,e.Z),e.g.pixelStorei(e.g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.g.texImage2D(e.g.TEXTURE_2D,0,e.g.RGBA,e.g.RGBA,e.g.UNSIGNED_BYTE,e.i)),"equirectangular"!=e.m&&"halfequirectangular"!=e.m||(iM(e.N,e.D,e.Y),iM(e.N,e.I,e.N)),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.$),e.g.vertexAttribPointer(e.R,3,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.R),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.na),e.g.vertexAttribPointer(e.P,2,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.P),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ba),"cubemap"==e.m?(e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"uProjectionMatrix"),!1,e.I),e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"uModelViewMatrix"),!1,e.N)):e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"u_VPMatrix"),!1,e.N),e.g.uniform1i(e.g.getUniformLocation(e.l,"uSampler"),0),e.O&&e.g.viewport(0,0,e.s.width/2,e.s.height),e.g.drawElements(e.g.TRIANGLES,e.K.indices.length,e.g.UNSIGNED_SHORT,0),e.O&&(e.g.viewport(e.s.width/2,0,e.s.width/2,e.s.height),e.g.drawElements(e.g.TRIANGLES,e.K.indices.length,e.g.UNSIGNED_SHORT,0)))}function vM(e){var t=e.i.videoWidth;t||(t=e.s.scrollWidth);var n=e.i.videoHeight;if(n||(n=e.s.scrollHeight),e.sa!==t||e.ra!==n){e.s.width=t,e.s.height=n,e.sa=t,e.ra=n;var i=t/n,r=e.I,s=-i,a=1/(i-s);r[0]=0*a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=(i+s)*a,r[9]=0,r[10]=-1,r[11]=-1,r[12]=0,r[13]=0,r[14]=-0,r[15]=0,e.I=r,e.g.viewport(0,0,t,n)}}function bM(e,t,n,i){var r=1/0,s=90*Math.PI/180;"halfequirectangular"==e.m&&(r=90*Math.PI/180,s/=2);var a="cubemap"==e.m?e.N:e.D;if(e.G+=t,e.H+=n,e.G<r&&e.G>-r){r=Math.sin(t),t=Math.cos(t);var o=a[0],l=a[1],u=a[2],c=a[3],d=a[8],h=a[9],p=a[10],f=a[11];a!==a&&(a[4]=a[4],a[5]=a[5],a[6]=a[6],a[7]=a[7],a[12]=a[12],a[13]=a[13],a[14]=a[14],a[15]=a[15]),a[0]=o*t-d*r,a[1]=l*t-h*r,a[2]=u*t-p*r,a[3]=c*t-f*r,a[8]=o*r+d*t,a[9]=l*r+h*t,a[10]=u*r+p*t,a[11]=c*r+f*t}else e.G-=t;e.H<s&&e.H>-s?(s=tM(),r=tM(),t=-1*n,n=Math.sin(t),t=Math.cos(t),o=r[4],l=r[5],u=r[6],c=r[7],d=r[8],h=r[9],p=r[10],f=r[11],r!==s&&(s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[4]=o*t+d*n,s[5]=l*t+h*n,s[6]=u*t+p*n,s[7]=c*t+f*n,s[8]=d*t-o*n,s[9]=h*t-l*n,s[10]=p*t-u*n,s[11]=f*t-c*n,iM(a,s,a)):e.H-=n,n=tM(),s=tM(),r=Math.sin(i),i=Math.cos(i),t=s[0],o=s[1],l=s[2],u=s[3],c=s[4],d=s[5],h=s[6],p=s[7],s!==n&&(n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15]),n[0]=t*i+c*r,n[1]=o*i+d*r,n[2]=l*i+h*r,n[3]=u*i+p*r,n[4]=c*i-t*r,n[5]=d*i-o*r,n[6]=h*i-l*r,n[7]=p*i-u*r,iM(a,n,a),yM(e,!1)}function TM(e,t){(void 0===t||t)&&(rM(e.h,e.D),e.U=0,e.C=aM(),e.C[0]=(e.h[0]-e.L[0])/20,e.C[1]=(e.h[1]-e.L[1])/20,e.C[2]=(e.h[2]-e.L[2])/20,e.C[3]=(e.h[3]-e.L[3])/20),e.h[0]-=e.C[0],e.h[1]-=e.C[1],e.h[2]-=e.C[2],e.h[3]-=e.C[3],t=tM(),oM(e.h,e.h),sM(t,e.h),e.D=t,e.J&&(e.J.stop(),e.J=null),20>e.U?e.J=new sr(function(){TM(e,!1),e.G=0,e.H=0,e.U++,yM(e,!1)}).X(.025):(sM(t,e.L),e.D=t)}function _M(e,t,n,i,r){ae.call(this);var s=this;this.i=e,this.l=t,this.F=n,this.J=i,this.u=r,this.s=new Rt,this.h=new Rt,this.B=EM(this.l),this.g=null,this.m=!1,this.I=this.H=this.G=this.D=this.C=0,this.j=null,this.s.o(i,"loading",function(){s.g&&TM(s.g),wM(s)}),this.s.o(i,"spatialvideoinfo",function(e){switch(e=e.detail,e.projection){case"rect":s.j=null;break;case"equi":s.j="equirectangular";break;case"hequ":switch(e.hfov){case 360:s.j="equirectangular";break;case 180:s.j="halfequirectangular";break;default:null==e.hfov?s.j="halfequirectangular":s.j=null}break;case"fish":s.j="halfequirectangular";break;default:s.j=null}wM(s)}),this.s.o(i,"nospatialvideoinfo",function(){s.j=null,wM(s)}),this.s.o(i,"unloading",function(){s.j=null,wM(s)}),wM(this)}function wM(e){if(e.u.displayInVrMode||e.j){e.l||(e.l=document.createElement("canvas"),e.l.classList.add("shaka-vr-canvas-container"),e.F.parentElement.insertBefore(e.l,e.F.nextElementSibling),e.B=EM(e.l));var t=e.j||e.u.defaultVrProjectionMode;e.g?e.g.m!=t&&(e.h.Sa(),e.g.release(),SM(e,t)):(e.l.style.display="",SM(e,t),e.dispatchEvent(new K("vrstatuschanged",(new Map).set("newStatus",e.Tb()))))}else!e.u.displayInVrMode&&!e.j&&e.l&&e.g&&(e.l.style.display="none",e.h.Sa(),e.g.release(),e.g=null,e.dispatchEvent(new K("vrstatuschanged",(new Map).set("newStatus",e.Tb()))))}function SM(e,t){e.B&&e.l&&(e.g=new uM(e.F,e.J,e.l,e.B,t),AM(e))}function EM(e){if(!e)return null;var t=Be().Ja();if("TV"==t||"CONSOLE"==t||"CAST"==t)return null;t=d(["webgl2","webgl"]);for(var n=t.next();!n.done;n=t.next())if(n=e.getContext(n.value))return n;return null}function AM(t){t.h.o(t.i,"mousedown",function(e){if(!t.m){var n=e.clientX;e=e.clientY,t.m=!0,t.C=n,t.D=e}}),0<navigator.maxTouchPoints&&t.h.o(t.i,"touchstart",function(e){if(!t.m){var n=e.touches[0].clientX;e=e.touches[0].clientY,t.m=!0,t.C=n,t.D=e}}),t.h.o(t.i,"wheel",function(e){if(!t.m){var n=t.g,i=e.deltaY;i/=50,20<=n.j&&100>=n.j&&(n.j+=i),20>n.j?n.j=20:100<n.j&&(n.j=100),yM(n,!1),e.preventDefault(),e.stopPropagation()}}),t.h.o(t.i,"mousemove",function(e){t.m&&IM(t,e.clientX,e.clientY)}),0<navigator.maxTouchPoints&&t.h.o(t.i,"touchmove",function(e){t.m&&IM(t,e.touches[0].clientX,e.touches[0].clientY),e.preventDefault()}),t.h.o(t.i,"mouseleave",function(){t.m=!1}),t.h.o(t.i,"mouseup",function(){t.m=!1}),0<navigator.maxTouchPoints&&t.h.o(t.i,"touchend",function(){t.m=!1});var n=!1;if(e.DeviceOrientationEvent)if("function"==typeof DeviceMotionEvent.requestPermission){var i=function(){DeviceMotionEvent.requestPermission().then(function(e){"granted"!==e||n||(n=!0,CM(t))})};DeviceMotionEvent.requestPermission().then(function(e){t.h.Da(t.i,"click",i),t.h.Da(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.Da(t.i,"touchend",i),"granted"!==e?(t.h.qa(t.i,"click",i),t.h.qa(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.qa(t.i,"touchend",i)):(n=!0,CM(t))}).catch(function(){t.h.Da(t.i,"click",i),t.h.Da(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.Da(t.i,"touchend",i),t.h.qa(t.i,"click",i),t.h.qa(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.qa(t.i,"touchend",i)})}else n=!0,CM(t)}function CM(t){t.h.o(e,"deviceorientation",function(e){if(t.g){var n=(e.alpha||0)-t.G,i=(e.beta||0)-t.H,r=(e.gamma||0)-t.I;(10<Math.abs(n)||10<Math.abs(i)||5<Math.abs(r))&&(i=r=n=0),t.G=e.alpha||0,t.H=e.beta||0,t.I=e.gamma||0,e=screen.orientation.angle,bM(t.g,n*xM*-1,90==e||-90==e?r*xM*-1:i*xM,0)}})}function IM(e,t,n){var i=-.6*Math.PI/180;bM(e.g,(t-e.C)*i,-1*(n-e.D)*i,0),e.C=t,e.D=n}b(Rk,Tk),Rk.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.B.paused&&!e.R;return e},Rk.prototype.isEnded=function(){return(!this.ad||!this.ad.isLinear())&&(!this.player||this.player.isEnded())},Rk.prototype.g=function(){this.isEnded()&&this.video.duration?this.button.textContent="replay":this.button.textContent=this.isPaused()?"play_arrow":"pause"},X("shaka.ui.PlayButton",Rk),b(Nk,Rk),Nk.prototype.g=function(){this.isEnded()?this.button.setAttribute("icon","replay"):this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},X("shaka.ui.BigPlayButton",Nk),b(Lk,Tk),X("shaka.ui.HiddenSeekButton",Lk),b(Pk,Lk),X("shaka.ui.HiddenFastForwardButton",Pk),b(Uk,Lk),X("shaka.ui.HiddenRewindButton",Uk),b(Bk,Tk),i=Bk.prototype,i.release=function(){this.F&&(this.F.stop(),this.F=null),Tk.prototype.release.call(this)},i.setRange=function(e,t){this.bar.min=e,this.bar.max=t},i.onChangeStart=function(){},i.onChange=function(){},i.onChangeEnd=function(){},i.changeTo=function(e){this.i||(this.i=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.F.X(.5)},i.getValue=function(){return parseFloat(this.bar.value)},i.setValue=function(e){this.i||(this.bar.value=e)},X("shaka.ui.RangeElement",Bk),Bk.prototype.setValue=Bk.prototype.setValue,Bk.prototype.getValue=Bk.prototype.getValue,Bk.prototype.changeTo=Bk.prototype.changeTo,Bk.prototype.onChangeEnd=Bk.prototype.onChangeEnd,Bk.prototype.onChange=Bk.prototype.onChange,Bk.prototype.onChangeStart=Bk.prototype.onChangeStart,Bk.prototype.setRange=Bk.prototype.setRange,b(jk,Bk),i=jk.prototype,i.release=function(){this.u&&(this.u.stop(),this.u=null,this.B.stop(),this.B=null),Bk.prototype.release.call(this)},i.onChangeStart=function(){this.L=!this.video.paused,this.controls.Yh(!0),this.video.pause(),this.s.stop(),this.I=!0},i.onChange=function(){if(this.video.duration)if(this.update(),this.u.X(.125),this.player.hh().length&&!this.controls.Cc()){var e=parseFloat(this.bar.min),t=parseFloat(this.bar.max),n=this.bar.getBoundingClientRect(),i=Math.round(this.getValue());Wk(this,(i-e)/((t-e)/n.width),i)}else Xk(this)},i.onChangeEnd=function(){this.u.Ka(),this.controls.Yh(!1),this.L&&this.video.play(),this.I&&(this.I=!1,this.s.stop(),this.s.X(.25))},i.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},i.update=function(){var e=this.H.seekBarColors,t=this.getValue(),n=this.video.buffered.length,i=n?this.video.buffered.start(0):0,r=n?this.video.buffered.end(n-1):0;n=this.player.xa();var s=n.end-n.start;this.setRange(n.start,n.end),zk(this)?(Ak(this.container,!0),i=(Math.max(i,n.start)-n.start)/s||0,r=(Math.min(r,n.end)-n.start)/s||0,t=(Math.min(Math.max(t,n.start),n.end)-n.start)/s||0,this.container.style.background="linear-gradient("+["to right",(this.H.showUnbufferedStart?e.base:e.played)+" "+100*i+"%",e.played+" "+100*i+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*r+"%",e.base+" "+100*r+"%"].join()+")"):Ak(this.container,!1)},X("shaka.ui.SeekBar",jk),$k.prototype.create=function(e,t){return new jk(e,t)},jk.Factory=$k,b(Qk,Tk),Qk.prototype.release=function(){this.i.stop(),this.i=null,Tk.prototype.release.call(this)},X("shaka.ui.SkipAdButton",Qk),uM.prototype.release=function(){-1!=this.F&&(this.i.cancelVideoFrameCallback(this.F),this.F=-1),this.u&&(this.u.release(),this.u=null),this.B&&(this.B.stop(),this.B=null),this.J&&(this.J.stop(),this.J=null)},uM.prototype.Qd=function(){(this.O=!this.O)||this.g.viewport(0,0,this.s.width,this.s.height),yM(this,!1)},b(_M,ae),i=_M.prototype,i.release=function(){this.s&&(this.s.release(),this.s=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),ae.prototype.release.call(this)},i.configure=function(e){this.u=e,wM(this)},i.Eg=function(){return this.l?!!this.B:!!EM(document.createElement("canvas"))},i.Tb=function(){return!!this.g},i.Qd=function(){this.g?this.g.Qd():J("Not playing VR content")},i.qh=function(e){this.g?bM(this.g,e*xM,0,0):J("Not playing VR content")},i.oh=function(e){this.g?bM(this.g,0,e*xM,0):J("Not playing VR content")},i.ph=function(e){this.g?bM(this.g,0,0,e*xM):J("Not playing VR content")};var xM=Math.PI/180;function kM(e,t,n,i,r){ae.call(this);var s=this;this.Y=!0,this.g=r,this.D=new Ym(n,e,this.g.castReceiverAppId,this.g.castAndroidReceiverCompatible),this.oa=!0,this.B=this.D.Jc(),this.m=n,this.u=this.D.Sb(),this.Z=e,this.l=t,this.Lb=i,this.na=this.u.mf(),this.s=this.j=null,this.R=!1,this.I=[],this.Ta=[],this.Na=!1,this.J=new sr(function(){s.l.classList.add("no-cursor"),s.Na=!1,nD(s)}),this.$=new sr(function(){s.h.removeAttribute("shown"),aD(s),tD(s),s.U&&s.U.Gi(),s.N.X(s.g.closeMenusDelay)}),this.N=new sr(function(){for(var e=d(s.I),t=e.next();!t.done;t=e.next())Ak(t.value,!1);s.g.enableTooltips&&s.F.classList.add("shaka-tooltips-on")}),this.sa=new sr(function(){s.Ba()&&lD(s)}),this.O=null,this.H=[],this.ra=dD(),this.i=new Rt,this.C=null,this.configure(this.g),YM(this),$M(this),this.ba=new Set,rD(this),this.sa.ya(this.g.refreshTickInSeconds),this.i.o(this.ra,"locale-changed",function(e){e=e.locales[0],s.na.setLocale(e),s.l.setAttribute("lang",e)}),this.na.initInterstitial(this.G,this.Z,this.m),this.i.o(this.u,"texttrackvisibility",function(){tD(s)})}function MM(e){for(var t=d(e.H),n=t.next();!n.done;n=t.next())n.value.release();e.H=[]}function DM(e,t){hD.set(e,t)}function RM(e){return!(!document.fullscreenEnabled||e.m.webkitSupportsFullscreen&&e.g.preferVideoFullScreenInVisionOS&&"VR"==Be().Ja())}function OM(t){return"documentPictureInPicture"in e&&t.g.preferDocumentPictureInPicture}function NM(e){var t,n,i;return U(function(r){switch(r.g){case 1:if(A(r,2),!RM(e)){t=e.m,t.webkitSupportsFullscreen&&t.webkitEnterFullscreen(),r.A(4);break}if(!e.le()){r.A(5);break}return S(r,e.pd(),6);case 6:if(!OM(e)){r.A(5);break}return S(r,new Promise(function(e){new sr(e).X(.05)}),5);case 5:return n=e.g.fullScreenElement,S(r,n.requestFullscreen({navigationUI:"hide"}),9);case 9:if(!e.g.forceLandscapeOnFullscreen||!screen.orientation){r.A(4);break}return A(r,11),S(r,screen.orientation.lock("landscape"),13);case 13:I(r,4,2);break;case 11:x(r,2);case 4:I(r,0);break;case 2:i=x(r),e.dispatchEvent(new K("error",(new Map).set("detail",i))),E(r)}})}function LM(e){var t;return U(function(n){return RM(e)?(screen.orientation&&screen.orientation.unlock(),S(n,document.exitFullscreen(),0)):(t=e.m,t.webkitSupportsFullscreen&&t.webkitExitFullscreen(),n.A(0))})}function PM(t){var n,i,r,s,a,o;return U(function(l){if(1==l.g)return e.documentPictureInPicture.window?(e.documentPictureInPicture.window.close(),l.return()):(n=t.l,i=n.getBoundingClientRect(),S(l,e.documentPictureInPicture.requestWindow({width:i.width,height:i.height}),2));r=l.h,UM(r),s=n.parentNode||document.body,a=t.l.cloneNode(!0),a.style.visibility="hidden",a.style.height=getComputedStyle(n).height,s.appendChild(a),o=document.createElement("style"),o.append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}"),r.document.head.append(o),r.document.body.append(n),t.i.qa(r,"pagehide",function(){a.replaceWith(n)}),E(l)})}function UM(e){var t=[].concat(h(document.styleSheets)).map(function(t){try{return[].concat(h(t.cssRules)).map(function(e){return e.cssText}).join("")}catch(i){var n=document.createElement("link");n.rel="stylesheet",n.type=t.type,n.media=t.media,n.href=t.href,e.document.head.appendChild(n)}return""}).filter(Boolean).join("\n"),n=document.createElement("style");n.textContent=t,e.document.head.appendChild(n)}function BM(e){if(e.Y){if(e.j&&(e.j&&e.j.isPaused()?e.j.play():e.j&&e.j.pause(),e.j.isLinear()))return;e.B.duration&&(e.B.paused&&!e.R?(e.u.isEnded()&&(e.B.currentTime=e.u.xa().start),e.B.play()):e.B.pause())}}function FM(e){e.h=nl("div"),e.h.classList.add("shaka-controls-container"),e.l.appendChild(e.h),e.l.setAttribute("shaka-controls","true"),e.i.o(e.h,"touchend",function(t){e.B.duration&&(e.Ba()?(e.O=Date.now(),iD(e,!0)):JM(e,t),t.cancelable&&t.preventDefault())}),e.i.o(e.h,"click",function(){iD(e)}),e.i.o(e.h,"dblclick",function(){e.g.doubleClickForFullscreen&&e.ke()&&e.gg()})}function jM(e){var t=nl("div");t.classList.add("shaka-play-button-container"),e.h.appendChild(t),e.La=new Nk(t,e),e.H.push(e.La)}function VM(e){var t=nl("div");t.classList.add("shaka-scrim-container"),e.h.appendChild(t)}function HM(e){e.P=nl("div"),e.P.classList.add("shaka-ad-controls");var t=null!=e.j&&e.j.isLinear();Ak(e.P,t),e.L.appendChild(e.P),t=new Qk(e.P,e),e.H.push(t)}function zM(e){e.K=nl("div"),e.K.classList.add("shaka-spinner-container"),e.l.appendChild(e.K);var t=nl("div");t.classList.add("shaka-spinner"),e.K.appendChild(t),t.insertAdjacentHTML("beforeend",'<svg focusable="false" stroke="currentColor"\n         viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg"\n         width="50px" height="50px" class="q-spinner text-grey-9">\n      <g transform="translate(1 1)" stroke-width="6" fill="none"\n        fill-rule="evenodd">\n        <circle stroke-opacity=".5" cx="18" cy="18" r="16"></circle>\n        <path d="M34 18c0-9.94-8.06-16-16-16">\n          <animateTransform attributeName="transform" type="rotate"\n            from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite">\n          </animateTransform>\n        </path>\n      </g>\n    </svg>')}function GM(e){var t=nl("div");t.classList.add("shaka-hidden-fast-forward-container"),e.h.appendChild(t),e.Ya=new Pk(t,e),e.H.push(e.Ya)}function qM(e){var t=nl("div");t.classList.add("shaka-hidden-rewind-container"),e.h.appendChild(t),e.cb=new Uk(t,e),e.H.push(e.cb)}function WM(e){e.L=nl("div"),e.L.classList.add("shaka-bottom-controls"),e.L.classList.add("shaka-no-propagation"),e.h.appendChild(e.L),e.i.o(e.L,"click",function(t){t.target.closest(".shaka-overflow-button")||e.Lc()}),HM(e),XM(e),e.F=nl("div"),e.F.classList.add("shaka-controls-button-panel"),e.F.classList.add("shaka-show-controls-on-mouse-over"),e.g.enableTooltips&&e.F.classList.add("shaka-tooltips-on"),e.L.appendChild(e.F);for(var t=d(e.g.controlPanelElements),n=t.next();!n.done;n=t.next())if(n=n.value,hD.get(n)){var i=hD.get(n).create(e.F,e);e.H.push(i),"time_and_duration"==n&&(n=new Ik(e.F,e),e.H.push(n))}else J("Unrecognized control panel element requested:",n)}function XM(e){if(e.g.addSeekBar)e.s=pD.create(e.L,e),e.H.push(e.s);else{for(var t=d(e.I),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e=e.F,e.classList.contains("shaka-tooltips-on")&&e.classList.add("shaka-tooltips-low-position")}}function KM(e){e.G=nl("div"),e.G.classList.add("shaka-client-side-ad-container"),Ak(e.G,!1),e.i.o(e.G,"click",function(){iD(e)}),e.l.appendChild(e.G)}function YM(t){t.i.o(t.u,"buffering",function(){sD(t)}),sD(t),t.i.o(e,"keydown",function(e){uD(t,e)}),t.i.o(e,"click",function(){return t.Lc()}),t.i.o(t,"submenuopen",function(){t.Lc()}),t.i.o(t.B,"play",function(){nD(t)}),t.i.o(t.B,"pause",function(){nD(t)}),t.i.o(t.l,"mousemove",function(e){JM(t,e)}),t.i.o(t.l,"touchmove",function(e){JM(t,e)},{passive:!0}),t.i.o(t.l,"touchend",function(e){JM(t,e)},{passive:!0}),t.i.o(t.l,"mouseleave",function(){t.O||t.J.Ka()}),t.i.o(t.l,"wheel",function(e){JM(t,e)},{passive:!0}),t.i.o(t.D,"caststatuschanged",function(){rD(t)}),t.i.o(t.C,"vrstatuschanged",function(){t.dispatchEvent(new K("vrstatuschanged"))}),t.i.o(t.l,"keydown",function(e){var n=document.activeElement,i=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),r=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(t.h.contains(n)&&JM(t,e),t.g.enableKeyboardPlaybackControls){n=t.g.keyboardSeekDistance;var s=t.g.keyboardLargeSeekDistance;switch(e.key){case"ArrowLeft":t.s&&r&&!i&&0<n&&(e.preventDefault(),oD(t,t.s.getValue()-n));break;case"ArrowRight":t.s&&r&&!i&&0<n&&(e.preventDefault(),oD(t,t.s.getValue()+n));break;case"PageDown":t.s&&r&&0<n&&(e.preventDefault(),oD(t,t.s.getValue()-s));break;case"PageUp":t.s&&r&&0<n&&(e.preventDefault(),oD(t,t.s.getValue()+s));break;case"Home":t.s&&oD(t,t.u.xa().start);break;case"End":t.s&&oD(t,t.u.xa().end);break;case"f":t.ke()&&t.gg();break;case"m":t.j&&t.j.isLinear()?t.j.setMuted(!t.j.isMuted()):t.m.muted=!t.m.muted;break;case"p":t.yf()&&t.pd();break;case" ":r&&BM(t)}}}),t.i.o(t.l,"keyup",function(e){t.ba.delete(e.key)}),t.i.o(t.na,"ad-started",function(e){t.j=e.ad,t.Kj(),sD(t)}),t.i.o(t.na,"ad-stopped",function(){t.j=null,t.Ti(),sD(t)}),screen.orientation&&t.i.o(screen.orientation,"change",function(){return U(function(e){return S(e,ZM(t),0)})})}function $M(t){if(t.g.setupMediaSession&&navigator.mediaSession){var n=function(e,t){try{navigator.mediaSession.setActionHandler(e,function(e){t(e)})}catch(n){}},i=function(){if(t.j&&t.j.isLinear())r();else{var e=t.u.xa(),n=e.end-e.start;e=parseFloat((t.B.currentTime-e.start).toFixed(2)),t.u.T()&&1>Math.abs(n-e)&&(n=1/0);try{navigator.mediaSession.setPositionState({duration:Math.max(0,n),playbackRate:t.B.playbackRate,position:Math.max(0,e)})}catch(i){}}},r=function(){try{navigator.mediaSession.setPositionState()}catch(e){}},s=function(e){var n=t.g.keyboardSeekDistance;switch(e.action){case"pause":BM(t);break;case"play":BM(t);break;case"seekbackward":if(e.seekOffset&&!isFinite(e.seekOffset))break;t.j&&t.j.isLinear()||oD(t,t.s.getValue()-(e.seekOffset||n));break;case"seekforward":if(e.seekOffset&&!isFinite(e.seekOffset))break;t.j&&t.j.isLinear()||oD(t,t.s.getValue()+(e.seekOffset||n));break;case"seekto":if(e.seekTime&&!isFinite(e.seekTime))break;t.j&&t.j.isLinear()||oD(t,t.u.xa().start+e.seekTime);break;case"stop":t.u.lc();break;case"enterpictureinpicture":t.j&&t.j.isLinear()||t.pd()}};n("pause",s),n("play",s),n("seekbackward",s),n("seekforward",s),n("seekto",s),n("stop",s),("documentPictureInPicture"in e||document.pictureInPictureEnabled)&&n("enterpictureinpicture",s),n=function(){t.u.T()||0!=t.u.xa().start?(i(),t.i.o(t.B,"timeupdate",i)):r()},t.u.Y&&n(),t.i.o(t.u,"loaded",n),t.i.o(t.u,"unloading",function(){t.i.Da(t.B,"timeupdate",i)}),t.i.o(t.u,"metadata",function(e){var n,i;(e=e.payload)&&("TIT2"==e.key&&e.data&&(n=e.data),"APIC"==e.key&&"--\x3e"==e.mimeType&&(i=e.data),n&&(e={title:n,artwork:[]},navigator.mediaSession.metadata&&(e=navigator.mediaSession.metadata,e.title=n),navigator.mediaSession.metadata=new MediaMetadata(e)),i&&(n=t.m,i!=n.poster&&(n.poster=i),n={title:"",artwork:[{src:i}]},navigator.mediaSession.metadata&&(n=navigator.mediaSession.metadata,n.artwork=[{src:i}]),navigator.mediaSession.metadata=new MediaMetadata(n)))})}}function QM(e){if(e.g.setupMediaSession&&navigator.mediaSession){try{navigator.mediaSession.setPositionState()}catch(t){}e=function(e){try{navigator.mediaSession.setActionHandler(e,null)}catch(t){}},e("pause"),e("play"),e("seekbackward"),e("seekforward"),e("seekto"),e("stop"),e("enterpictureinpicture")}}function ZM(e){return U(function(t){return e.B&&0!=e.B.readyState&&!e.D.Pa()&&e.g.enableFullscreenOnRotation&&e.ke()?screen.orientation.type.includes("landscape")&&!e.Mc()?S(t,NM(e),0):screen.orientation.type.includes("portrait")&&e.Mc()?S(t,LM(e),0):t.A(0):t.return()})}function JM(e,t){"mousemove"==t.type&&(e.h.classList.remove("shaka-keyboard-navigation"),nD(e)),"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.O=Date.now():e.O+1e3<Date.now()&&(e.O=null),e.O&&"mousemove"==t.type||(e.l.classList.remove("no-cursor"),e.Na=!0,e.N.stop(),e.Ba()||(lD(e),nD(e)),e.J.stop(),"touchend"!=t.type&&"wheel"!=t.type&&"keyup"!=t.type&&e.O||e.J.X(3))}function eD(t){return!!e.matchMedia("hover: hover").matches&&t.Ta.some(function(e){return e.matches(":hover")})}function tD(e){var t=e.l.getElementsByClassName("shaka-text-container")[0];t&&(e.Ba()?t.style.bottom=e.L.clientHeight+"px":t.style.bottom="0px")}function nD(e){var t=!!e.j&&e.j.isPaused(),n=e.B.paused&&!e.R,i=e.h.classList.contains("shaka-keyboard-navigation");t||(!e.j||!e.j.isLinear())&&n||e.Na||i||eD(e)?(lD(e),null==e.h.getAttribute("shown")&&(e.h.setAttribute("shown","true"),aD(e)),tD(e),e.$.stop()):e.$.X(e.g.fadeDelay),e.Cc()&&e.F.classList.remove("shaka-tooltips-on")}function iD(e,t){t=void 0!==t&&t,e.Y&&!e.Tb()&&(e.Cc()?e.N.Ka():e.g.singleClickForPlayAndPause?BM(e):t&&e.Ba()&&e.Ui())}function rD(e){var t=e.D.Pa();e.dispatchEvent(new K("caststatuschanged",(new Map).set("newStatus",t))),t?null==e.h.getAttribute("casting")&&(e.h.setAttribute("casting","true"),aD(e)):null!=e.h.getAttribute("casting")&&(e.h.removeAttribute("casting"),aD(e))}function sD(e){e.Y&&(e.j&&e.j.isClientRendering()&&e.j.isLinear()?Ak(e.K,!1):Ak(e.K,e.u.xf()))}function aD(e){e.Ba()?e.dispatchEvent(new K("showingui")):e.dispatchEvent(new K("hidingui"))}function oD(e,t){e.B.currentTime=t,lD(e)}function lD(e){if(e.s)if(e.s.setValue(e.B.currentTime),e.s.update(),e.s.isShowing()){for(var t=d(e.I),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");t=e.F,t.classList.contains("shaka-tooltips-on")&&t.classList.remove("shaka-tooltips-low-position")}else{for(t=d(e.I),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");t=e.F,t.classList.contains("shaka-tooltips-on")&&t.classList.add("shaka-tooltips-low-position")}e.dispatchEvent(new K("timeandseekrangeupdated"))}function uD(t,n){t.ba.add(n.key);var i=t.Cc();"Tab"==n.key&&(t.h.classList.add("shaka-keyboard-navigation"),nD(t),t.i.o(e,"mousedown",function(){t.i.Da(e,"mousedown")})),"Escape"==n.key&&t.N.Ka(),i&&t.ba.has("Tab")&&cD(t,n)}function cD(e,t){var n=e.I.filter(function(e){return!e.classList.contains("shaka-hidden")});if(n.length){var i=n[0];if(i.childNodes.length){for(n=i.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(i=i.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;e.ba.has("Shift")?r==n&&(t.preventDefault(),i.focus()):r==i&&(t.preventDefault(),n.focus())}}}function dD(){var e=new At("en");return e.Va("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_STATISTICS"," "],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME","  "],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["QUALITY",""],["RECENTER_VR"," "],["REPLAY"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["STATISTICS",""],["SUBTITLE_FORCED"," "],["SURROUND"," "],["TOGGLE_STEREOSCOPIC","    "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),e.Va("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_STATISTICS","Anzeigenstatistiken"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["CHAPTERS","Kapitel"],["DOWNLOAD_VIDEO_FRAME","Videoframe speichern"],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild im Bild aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild im Bild beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["QUALITY","Qualitt"],["RECENTER_VR","Zentrieren"],["REPLAY","Noch einmal wiedergeben"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["STATISTICS","Statistiken"],["SUBTITLE_FORCED","Erzwungen"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Einstellung stereoskopisch ein/ausschalten"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),e.Va("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["CHAPTERS","Chapters"],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recenter"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_NEXT","Next"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.Va("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["CHAPTERS","Chapters"],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recentre"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.Va("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadsticas del anuncio"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["CHAPTERS","Captulos"],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["QUALITY","Calidad"],["RECENTER_VR","Volver a centrar"],["REPLAY","Volver a reproducir"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_NEXT","Siguiente"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["STATISTICS","Estadsticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["TOGGLE_STEREOSCOPIC","Activar/Desactivar estereoscpica"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Va("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadsticas de anuncios"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["CHAPTERS","Captulos"],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["QUALITY","Calidad"],["RECENTER_VR","Volver a centrar"],["REPLAY","Volver a reproducir"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["STATISTICS","Estadsticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Sonido envolvente"],["TOGGLE_STEREOSCOPIC","Activar o desactivar el modo estereoscpico"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Va("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_STATISTICS","Statistiques sur les annonces"],["AD_TIME","Annonce: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["CHAPTERS","Chapitres"],["DOWNLOAD_VIDEO_FRAME","Tlcharger l'image de la vido"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["QUALITY","Qualit"],["RECENTER_VR","Recentrer"],["REPLAY","Revoir"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_NEXT","Suivante"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["STATISTICS","Statistiques"],["SUBTITLE_FORCED","Forc"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Activer/Dsactiver le mode stroscopique"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.Va("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_STATISTICS","Statistiche sugli annunci"],["AD_TIME","Annuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["CHAPTERS","Capitoli"],["DOWNLOAD_VIDEO_FRAME","Salva fotogramma"],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["QUALITY","Qualit"],["RECENTER_VR","Ricentra"],["REPLAY","Riproduci di nuovo"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["STATISTICS","Statistiche"],["SUBTITLE_FORCED","Forzata"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Pulsante di attivazione/disattivazione stereoscopico"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.Va("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_STATISTICS",""],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Va("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_STATISTICS"," "],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME","  "],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["QUALITY",""],["RECENTER_VR"," "],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.Va("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_STATISTICS","Advertentiestatistieken"],["AD_TIME","Advertentie: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["CHAPTERS","Hoofdstukken"],["DOWNLOAD_VIDEO_FRAME","Videoframe opslaan"],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Geluid uitzetten"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["QUALITY","Kwaliteit"],["RECENTER_VR","Opnieuw centreren"],["REPLAY","Opnieuw afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["STATISTICS","Statistieken"],["SUBTITLE_FORCED","Afgedwongen"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stereoscopisch aan-/uitzetten"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Geluid aanzetten"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.Va("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_STATISTICS","Statystyki reklam"],["AD_TIME","Reklama: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["CHAPTERS","Rozdziay"],["DOWNLOAD_VIDEO_FRAME","Zapisz klatk filmu"],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["QUALITY","Jako"],["RECENTER_VR","Wyrodkuj"],["REPLAY","Odtwrz ponownie"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_NEXT","Dalej"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["STATISTICS","Statystyki"],["SUBTITLE_FORCED","Wymuszone"],["SURROUND","Przestrzenny"],["TOGGLE_STEREOSCOPIC","Przecz tryb stereoskopowy"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),e.Va("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estatsticas de anncios"],["AD_TIME","Anncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["CHAPTERS","Captulos"],["DOWNLOAD_VIDEO_FRAME","Salvar frame do vdeo"],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["QUALITY","Qualidade"],["RECENTER_VR","Centralizar"],["REPLAY","Repetir"],["RESOLUTION","Resoluo"],["REWIND","Voltar"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["STATISTICS","Estatsticas"],["SUBTITLE_FORCED","Exibio forada"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Alternar imagem estereoscpica"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),e.Va("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_STATISTICS"," "],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME","  "],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["QUALITY",""],["RECENTER_VR"," "],["REPLAY",""],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["STATISTICS",""],["SUBTITLE_FORCED"," "],["SURROUND"," "],["TOGGLE_STEREOSCOPIC","    "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.Va("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_STATISTICS",""],["AD_TIME",": [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC","/"],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Va("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_STATISTICS","Reklam istatistikleri"],["AD_TIME","Reklam: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["CHAPTERS","Blmler"],["DOWNLOAD_VIDEO_FRAME","Video karesini kaydet"],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["QUALITY","Kalite"],["RECENTER_VR","Ortala"],["REPLAY","Tekrar Oynat"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["STATISTICS","statistikler"],["SUBTITLE_FORCED","Zorunlu"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stereoskopik modu a/kapat"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),e.Va("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_STATISTICS",""],["AD_TIME","[AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Va("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_STATISTICS",""],["AD_TIME","[AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["CHAPTERS",""],["DOWNLOAD_VIDEO_FRAME",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["QUALITY",""],["RECENTER_VR",""],["REPLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["STATISTICS",""],["SUBTITLE_FORCED",""],["SURROUND",""],["TOGGLE_STEREOSCOPIC",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Di(navigator.languages||[]),e}b(kM,ae),i=kM.prototype,i.destroy=function(e){e=void 0!==e&&e;var t=this;return U(function(n){switch(n.g){case 1:if(document.pictureInPictureElement!=t.m){n.A(2);break}return S(n,document.exitPictureInPicture(),2);case 2:if(t.i&&(t.i.release(),t.i=null),t.J&&(t.J.stop(),t.J=null),t.$&&(t.$.stop(),t.$=null),t.N&&(t.N.stop(),t.N=null),t.sa&&(t.sa.stop(),t.sa=null),t.C&&(t.C.release(),t.C=null),MM(t),t.h&&(t.l.removeChild(t.h),t.h=null),!t.D){n.A(4);break}return S(n,t.D.destroy(e),5);case 5:t.D=null;case 4:if(t.K&&(t.l.removeChild(t.K),t.K=null),t.G&&(t.l.removeChild(t.G),t.G=null),!t.Z){n.A(6);break}return S(n,t.Z.destroy(),7);case 7:t.Z=null;case 6:t.u=null,t.m=null,t.B=null,t.ra=null,t.ba.clear(),QM(t),ae.prototype.release.call(t),E(n)}})},i.ck=function(e){this.oa=e,rD(this)},i.Dl=function(){nD(this)},i.configure=function(e){var t=this;this.g=e,this.D.Ei(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.s&&(this.s=null),this.La&&(this.La=null),this.U&&(this.U=null),this.C&&this.C.configure(e),this.h?(ol(this.h),MM(this)):(FM(this),KM(this),this.C=new _M(this.h,this.Lb,this.m,this.u,this.g)),this.l.classList.add("shaka-video-container"),this.m.classList.add("shaka-video"),VM(this),this.g.addBigPlayButton&&jM(this),this.g.customContextMenu&&(this.U=new xk(this.F,this),this.H.push(this.U)),this.K||zM(this),this.g.seekOnTaps&&(GM(this),qM(this)),this.Ha=nl("div"),this.Ha.classList.add("shaka-server-side-ad-container"),this.h.appendChild(this.Ha),WM(this),this.I=Array.from(this.l.getElementsByClassName("shaka-settings-menu")),this.I.push.apply(this.I,h(Array.from(this.l.getElementsByClassName("shaka-overflow-menu")))),this.Ta=Array.from(this.l.getElementsByClassName("shaka-show-controls-on-mouse-over")),nD(this),e=d(this.l.getElementsByClassName("shaka-no-propagation"));for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=function(e){return e.stopPropagation()};this.i.o(n,"click",i),this.i.o(n,"dblclick",i),0<navigator.maxTouchPoints&&this.i.o(n,"touchend",function(e){t.Ba()&&e.stopPropagation()})}},i.Vh=function(e){(this.Y=e)?(this.l.setAttribute("shaka-controls","true"),this.m.tabIndex=-1,this.m.controls=!1):this.l.removeAttribute("shaka-controls"),nD(this)},i.Ej=function(e){this.m.controls=e,this.m.tabIndex=e?0:-1,e&&this.Vh(!1)},i.getAd=function(){return this.j},i.vk=function(){return this.D},i.Nk=function(){return this.ra},i.kl=function(){return this.l},i.Jc=function(){return this.B},i.Mk=function(){return this.m},i.Sb=function(){return this.u},i.Lk=function(){return this.Z},i.Ck=function(){return this.h},i.Yk=function(){return this.Ha},i.yk=function(){return this.G},i.zk=function(){return this.g},i.Al=function(){return this.R},i.Yh=function(e){(this.R=e)?this.J.stop():this.J.X(3)},i.ul=function(){return this.oa},i.gh=function(){return this.s?this.s.getValue():this.B.currentTime},i.Fj=function(e){this.O=e},i.Cc=function(){return this.I.some(function(e){return!e.classList.contains("shaka-hidden")})},i.Lc=function(){this.N.Ka()},i.ke=function(){return!this.D.Pa()&&!(!RM(this)&&(this.j&&this.j.isUsingAnotherMediaElement()||!this.m.webkitSupportsFullscreen))},i.Mc=function(){if(RM(this))return!!document.fullscreenElement;var e=this.m;return!!e.webkitSupportsFullscreen&&e.webkitDisplayingFullscreen},i.gg=function(){var e=this;return U(function(t){return e.Mc()?S(t,LM(e),0):S(t,NM(e),0)})},i.yf=function(){return!this.D.Pa()&&(!(!document.pictureInPictureEnabled&&!OM(this))&&!this.m.disablePictureInPicture)},i.le=function(){return!!(e.documentPictureInPicture&&e.documentPictureInPicture.window||document.pictureInPictureElement)},i.pd=function(){var e,t,n=this;return U(function(i){switch(i.g){case 1:if(A(i,2),OM(n)){if(!n.Mc()){i.A(10);break}return S(i,LM(n),10)}return document.pictureInPictureElement?S(i,document.exitPictureInPicture(),5):(n.Mc()&&LM(n),e=n.m,S(i,e.requestPictureInPicture(),5));case 10:return S(i,PM(n),5);case 5:I(i,0);break;case 2:t=x(i),n.dispatchEvent(new K("error",(new Map).set("detail",t))),E(i)}})},i.Kj=function(){Ak(this.P,!0),Ak(this.G,!0),this.j.hasCustomClick()?this.h.setAttribute("ad-active","true"):this.h.removeAttribute("ad-active")},i.Ti=function(){Ak(this.P,!1),Ak(this.G,!1),this.h.removeAttribute("ad-active")},i.Ba=function(){return!!this.Y&&(null!=this.h.getAttribute("shown")||null!=this.h.getAttribute("casting"))},i.mm=function(){var e=new Event("mousemove",{bubbles:!1,cancelable:!1});JM(this,e)},i.Ui=function(){this.J.Ka()},i.Eg=function(){return this.C.Eg()},i.Tb=function(){return this.C.Tb()},i.il=function(){var e=this.C;if(e.g){e=e.g,rM(e.h,e.D);var t=e.h;e=t[0];var n=t[1],i=t[2];t=t[3];var r=i*i,s=t*t,a=e*e+n*n+r+s,o=e*t-n*i;o>.499995*a?(a=Math.PI/2,e=2*Math.atan2(n,e)):o<-.499995*a?(a=-Math.PI/2,e=2*Math.atan2(n,e)):(a=Math.asin(2*(e*i-t*n)),e=Math.atan2(2*(e*t+n*i),1-2*(r+s))),e=180*Math.acos(Math.cos(e)*Math.cos(a))/Math.PI}else J("Not playing VR content"),e=null;return e},i.hl=function(){var e=this.C;return e.g?e=e.g.j:(J("Not playing VR content"),e=null),e},i.lm=function(e){var t=this.C;t.g?(0>e?(J("Field of view should be greater than 0"),e=0):100<e&&(J("Field of view should be less than 100"),e=100),t=t.g,t.j=e,yM(t,!1)):J("Not playing VR content")},i.Qd=function(){this.C.Qd()},i.qh=function(e){this.C.qh(e)},i.oh=function(e){this.C.oh(e)},i.ph=function(e){this.C.ph(e)},X("shaka.ui.Controls",kM),kM.prototype.incrementRoll=kM.prototype.ph,kM.prototype.incrementPitch=kM.prototype.oh,kM.prototype.incrementYaw=kM.prototype.qh,kM.prototype.toggleStereoscopicMode=kM.prototype.Qd,kM.prototype.setVRFieldOfView=kM.prototype.lm,kM.prototype.getVRFieldOfView=kM.prototype.hl,kM.prototype.getVRNorth=kM.prototype.il,kM.prototype.isPlayingVR=kM.prototype.Tb,kM.prototype.canPlayVR=kM.prototype.Eg,kM.prototype.hideUI=kM.prototype.Ui,kM.prototype.showUI=kM.prototype.mm,kM.prototype.isOpaque=kM.prototype.Ba,kM.prototype.hideAdUI=kM.prototype.Ti,kM.prototype.showAdUI=kM.prototype.Kj,kM.prototype.togglePiP=kM.prototype.pd,kM.prototype.isPiPEnabled=kM.prototype.le,kM.prototype.isPiPAllowed=kM.prototype.yf,kM.prototype.toggleFullScreen=kM.prototype.gg,kM.prototype.isFullScreenEnabled=kM.prototype.Mc,kM.prototype.isFullScreenSupported=kM.prototype.ke,kM.prototype.hideSettingsMenus=kM.prototype.Lc,kM.prototype.anySettingsMenusAreOpen=kM.prototype.Cc,kM.prototype.setLastTouchEventTime=kM.prototype.Fj,kM.prototype.getDisplayTime=kM.prototype.gh,kM.prototype.isCastAllowed=kM.prototype.ul,kM.prototype.setSeeking=kM.prototype.Yh,kM.prototype.isSeeking=kM.prototype.Al,kM.prototype.getConfig=kM.prototype.zk,kM.prototype.getClientSideAdContainer=kM.prototype.yk,kM.prototype.getServerSideAdContainer=kM.prototype.Yk,kM.prototype.getControlsContainer=kM.prototype.Ck,kM.prototype.getLocalPlayer=kM.prototype.Lk,kM.prototype.getPlayer=kM.prototype.Sb,kM.prototype.getLocalVideo=kM.prototype.Mk,kM.prototype.getVideo=kM.prototype.Jc,kM.prototype.getVideoContainer=kM.prototype.kl,kM.prototype.getLocalization=kM.prototype.Nk,kM.prototype.getCastProxy=kM.prototype.vk,kM.prototype.getAd=kM.prototype.getAd,kM.prototype.setEnabledNativeControls=kM.prototype.Ej,kM.prototype.setEnabledShakaControls=kM.prototype.Vh,kM.prototype.configure=kM.prototype.configure,kM.prototype.loadComplete=kM.prototype.Dl,kM.prototype.allowCast=kM.prototype.ck,kM.registerSeekBar=function(e){pD=e},kM.registerElement=DM,kM.prototype.destroy=kM.prototype.destroy;var hD=new Map,pD=new $k;function fD(t,n){function i(){return TD(r)}Tk.call(this,t,n);var r=this;this.m=this.controls.g,this.l=this.controls.h,this.s=this.controls.l,this.j=[],mD(this),this.g=nl("div"),this.g.classList.add("shaka-overflow-menu"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-hidden"),this.l.appendChild(this.g),yD(this),this.eventManager.o(this.localization,"locale-updated",function(){bD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){bD(r)}),this.eventManager.o(this.adManager,"ad-started",function(){r.ad&&r.ad.isLinear()&&Ak(r.h,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){Ak(r.h,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){Ak(r.g,!1)}),this.eventManager.o(this.g,"touchstart",function(e){r.controls.Fj(Date.now()),e.stopPropagation()}),this.eventManager.o(this.h,"click",function(){r.controls.Ba()&&vD(r)}),bD(this),this.ad&&this.ad.isLinear()&&Ak(this.h,!1),this.i=null,e.ResizeObserver?(this.i=new ResizeObserver(i),this.i.observe(this.controls.l)):this.eventManager.o(e,"resize",i)}function gD(e,t){wD.set(e,t)}function mD(e){e.h=il(),e.h.classList.add("shaka-overflow-menu-button"),e.h.classList.add("shaka-no-propagation"),e.h.classList.add("material-icons-round"),e.h.classList.add("shaka-tooltip"),e.h.textContent="settings";var t=nl("span");t.classList.add("shaka-overflow-quality-mark"),t.style.display="none",e.h.appendChild(t),e.parent.appendChild(e.h)}function yD(e){for(var t=d(e.m.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,wD.get(n)?(n=wD.get(n),e.j.push(n.create(e.g,e.controls))):J("Unrecognized overflow menu element requested:",n)}function vD(e){if(e.controls.Cc())e.controls.Lc();else{Ak(e.g,!0),nD(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};ue(e.g.childNodes,t)&&ce(e.g.childNodes,t)[0].focus(),TD(e)}}function bD(e){e.h.ariaLabel=e.localization.resolve("MORE_SETTINGS")}function TD(t){var n=t.g.getBoundingClientRect(),i=e.getComputedStyle(t.g),r=parseFloat(i.paddingTop);i=parseFloat(i.paddingBottom);var s=t.s.getBoundingClientRect();t.g.style.maxHeight=n.bottom-s.top-r-i+"px"}function _D(){}b(fD,Tk),fD.prototype.release=function(){this.l=null;for(var e=d(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[],this.i&&(this.i.disconnect(),this.i=null),Tk.prototype.release.call(this)},X("shaka.ui.OverflowMenu",fD),fD.registerElement=gD,_D.prototype.create=function(e,t){return new fD(e,t)},DM("overflow_menu",new _D);var wD=new Map;function SD(e,t){function n(e){return i.i[e]}Tk.call(this,e,t);var i=this;this.h=il(),this.h.classList.add("shaka-ad-statistics-button"),this.j=nl("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.h.appendChild(this.j),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.u=nl("span"),e.appendChild(this.u),this.m=nl("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.h.appendChild(e),this.parent.appendChild(this.h),this.g=nl("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-ad-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.h.appendChild(this.g),this.C=[],this.i=this.adManager.getStats(),Ak(this.h,0<this.i.started),this.s=new Map,this.B=(new Map).set("loadTimes",function(e){var t=0;e=d(i.i[e]);for(var n=e.next();!n.done;n=e.next())t+=parseFloat(n.value);return t}).set("averageLoadTime",n).set("started",n).set("overlayAds",n).set("playedCompletely",n).set("skipped",n).set("errors",n),this.l=new sr(function(){i.i=i.adManager.getStats();for(var e=d(i.C),t=e.next();!t.done;t=e.next())t=t.value,i.s.get(t).textContent=i.B.get(t)(t)}),AD(this),ID(this),this.eventManager.o(this.localization,"locale-updated",function(){AD(i)}),this.eventManager.o(this.localization,"locale-changed",function(){AD(i)}),this.eventManager.o(this.h,"click",function(){i.controls.Ba()&&(ED(i),AD(i))}),this.eventManager.o(this.player,"loading",function(){Ak(i.h,!1)}),this.eventManager.o(this.adManager,"ad-started",function(){Ak(i.h,!0)})}function ED(e){e.g.classList.contains("shaka-hidden")?(e.j.textContent="insert_chart",e.l.ya(.1),Ak(e.g,!0)):(e.j.textContent="insert_chart_outlined",e.l.stop(),Ak(e.g,!1))}function AD(e){e.u.textContent=e.localization.resolve("AD_STATISTICS"),e.h.ariaLabel=e.localization.resolve("AD_STATISTICS"),e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function CD(e,t){var n=nl("div"),i=nl("label");return i.textContent=t+":",n.appendChild(i),i=nl("span"),i.textContent=e.B.get(t)(t),n.appendChild(i),e.s.set(t,i),n}function ID(e){var t=nl("div");t.classList.add("shaka-no-propagation"),t.classList.add("shaka-statistics-close");var n=nl("i");for(n.classList.add("material-icons"),n.classList.add("notranslate"),n.classList.add("material-icons-round"),n.textContent="close",t.appendChild(n),e.g.appendChild(t),e.eventManager.o(n,"click",function(){ED(e)}),t=d(e.controls.g.adStatisticsList),n=t.next();!n.done;n=t.next())n=n.value,n in e.i?(e.g.appendChild(CD(e,n)),e.C.push(n)):J("Unrecognized ad statistic element:",n)}function xD(){}function kD(t,n){Tk.call(this,t,n);var i=this;this.g=il(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=nl("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),t=nl("label"),t.classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),this.j=nl("span"),t.appendChild(this.j),this.i=nl("span"),this.i.classList.add("shaka-current-selection-span"),t.appendChild(this.i),this.g.appendChild(t),this.parent.appendChild(this.g),DD(this),MD(this),this.eventManager.o(this.localization,"locale-updated",function(){DD(i)}),this.eventManager.o(this.localization,"locale-changed",function(){DD(i)}),this.eventManager.o(this.g,"click",function(){i.controls.Ba()&&i.controls.Jc().webkitShowPlaybackTargetPicker()}),t=this.controls.Jc(),this.eventManager.o(t,"webkitplaybacktargetavailabilitychanged",function(e){var t=i.player.m==vg;Ak(i.g,"available"==e.availability&&t)}),this.eventManager.o(t,"webkitcurrentplaybacktargetiswirelesschanged",function(){MD(i)})}function MD(e){var t=e.controls.Jc();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function DD(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}function RD(){}function OD(t,n){Tk.call(this,t,n);var i=this;this.g=document.createElement("canvas"),this.g.style.position="absolute",this.g.style.top="0",this.g.style.left="0",this.g.style.pointerEvents="none",this.parent.appendChild(this.g),LD(this),this.i=this.h=null,e.ResizeObserver?(this.i=new ResizeObserver(function(){return LD(i)}),this.i.observe(this.parent)):e.addEventListener("resize",function(){return LD(i)})}function ND(e){return(e=e.g.getContext("2d"))?e:null}function LD(e){e.g.width=e.parent.offsetWidth,e.g.height=e.parent.offsetHeight}function PD(e,t){function n(){if(e.h){switch(r.clearRect(0,0,e.g.width,e.g.height),o){case"fadeIn":a=Math.min(t.alpha,a+u),a>=t.alpha&&(o="display");break;case"display":0>=--l&&(o="fadeOut");break;case"fadeOut":a=Math.max(0,a-u),0>=a&&(o="transition",s=i(),l=Math.round(60*t.displayDuration),o="fadeIn")}0<a&&(r.globalAlpha=a,r.fillStyle=t.color,r.font=t.size+"px Arial",r.fillText(t.text,s.left,s.top)),e.h&&(e.h=requestAnimationFrame(n))}}function i(){r.font=t.size+"px Arial";var n=r.measureText(t.text).width,i=t.size;return n=[{left:20,top:i+20},{left:e.g.width-n-20,top:i+20},{left:20,top:e.g.height-20},{left:e.g.width-n-20,top:e.g.height-20},{left:(e.g.width-n)/2,top:(e.g.height+i)/2}],i=n[c],c=(c+1)%n.length,i}var r=e.g.getContext("2d"),s={left:0,top:0},a=0,o="fadeIn",l=Math.round(60*t.displayDuration),u=1/(Math.round(60*t.transitionDuration)/2),c=0;s=i(),e.h=requestAnimationFrame(n)}function UD(e,t,n,i){i=void 0===i?null:i,this.j=e,this.l=t,this.h=BD(this);var r="",s=!1;t.dataset&&t.dataset.shakaPlayerCastReceiverId?(s=t.dataset,r=s.shakaPlayerCastReceiverId,s="true"===s.shakaPlayerCastAndroidReceiverCompatible):n.dataset&&n.dataset.shakaPlayerCastReceiverId&&(s=n.dataset,r=s.shakaPlayerCastReceiverId,s="true"===s.shakaPlayerCastAndroidReceiverCompatible),r.length&&(this.h.castReceiverAppId=r,this.h.castAndroidReceiverCompatible=s),t.dataset.shakaPlayerContainer="",t.ui=this,this.vh()&&t.classList.add("shaka-mobile"),this.g=new kM(e,t,n,i,this.h),n.controls||e.Zh(t),t.ui=this,n.ui=this,this.i=null}function BD(t){var n="play_pause skip_next mute volume time_and_duration spacer overflow_menu".split(" ");if(e.chrome&&n.push("cast"),"remote"in HTMLMediaElement.prototype?n.push("remote"):e.WebKitPlaybackTargetAvailabilityEvent&&n.push("airplay"),n.push("fullscreen"),n={controlPanelElements:n,overflowMenuButtons:"captions quality language chapter picture_in_picture playback_rate recenter_vr toggle_stereoscopic save_video_frame".split(" "),statisticsList:"width height currentCodecs corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent manifestSizeBytes bytesDownloaded nonFatalErrorCount manifestPeriodCount manifestGapCount".split(" "),adStatisticsList:"loadTimes averageLoadTime started overlayAds playedCompletely skipped errors".split(" "),contextMenuElements:["loop","picture_in_picture","save_video_frame","statistics","ad_statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},qualityMarks:{720:"",1080:"HD",1440:"2K",2160:"4K",4320:"8K"},trackLabelFormat:zD,textTrackLabelFormat:zD,fadeDelay:0,closeMenusDelay:2,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!1,forceLandscapeOnFullscreen:!1,enableTooltips:!0,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:t.l,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!1,tapSeekDistance:10,refreshTickInSeconds:.125,displayInVrMode:!1,defaultVrProjectionMode:"equirectangular",setupMediaSession:!0,preferVideoFullScreenInVisionOS:!1,showAudioCodec:!0,showVideoCodec:!0,castSenderUrl:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"},t.vh()){n.addBigPlayButton=!0,n.singleClickForPlayAndPause=!1,n.seekOnTaps=!0,n.enableTooltips=!1,n.doubleClickForFullscreen=!1,n.enableFullscreenOnRotation=!0,n.forceLandscapeOnFullscreen=!0;var i=["play_pause","skip_next","volume"];n.controlPanelElements=n.controlPanelElements.filter(function(e){return!i.includes(e)}),n.overflowMenuButtons=n.overflowMenuButtons.filter(function(e){return!i.includes(e)}),n.contextMenuElements=n.contextMenuElements.filter(function(e){return!i.includes(e)})}else if(t.wh()){n.addBigPlayButton=!0,n.singleClickForPlayAndPause=!1,n.enableTooltips=!1,n.doubleClickForFullscreen=!1;var r="play_pause cast remote airplay volume save_video_frame".split(" ");n.controlPanelElements=n.controlPanelElements.filter(function(e){return!r.includes(e)}),n.overflowMenuButtons=n.overflowMenuButtons.filter(function(e){return!r.includes(e)}),n.contextMenuElements=n.contextMenuElements.filter(function(e){return!r.includes(e)})}return n}function FD(){var e,t,n,i,r,s,a,o,l,u,c,h,p,f,g,m,y,v,b,T,_,w;return U(function(C){switch(C.g){case 1:if(kA(),!Yp())return jD("shaka-ui-load-failed",GD),C.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),t=document.querySelectorAll("[data-shaka-player]"),n=document.querySelectorAll("[data-shaka-player-canvas]"),i=document.querySelectorAll("[data-shaka-player-vr-canvas]"),!t.length&&!e.length){C.A(2);break}if(t.length&&!e.length){for(r=d(t),s=r.next();!s.done;s=r.next())a=s.value,a.ui||(o=document.createElement("div"),l=a.parentElement,l.replaceChild(o,a),o.appendChild(a),u=HD(o,n,i),c=u.aj,h=u.Yj,VD(o,a,c,h));C.A(2);break}p=d(e),f=p.next();case 4:if(f.done){C.A(2);break}if(g=f.value,g.ui){C.A(5);break}for(m=null,y=d(t),v=y.next();!v.done;v=y.next())if(b=v.value,b.parentElement==g){m=b;break}return m||(m=document.createElement("video"),m.setAttribute("playsinline",""),g.appendChild(m)),T=HD(g,n,i),_=T.aj,w=T.Yj,A(C,7),S(C,VD(g,m,_,w),9);case 9:I(C,5);break;case 7:return x(C),jD("shaka-ui-load-failed",qD),C.return();case 5:f=p.next(),C.A(4);break;case 2:jD("shaka-ui-loaded"),E(C)}})}function jD(e,t){var n=null;void 0!=t&&(n={reasonCode:t}),e=new CustomEvent(e,{detail:n}),document.dispatchEvent(e)}function VD(e,t,n,i){var r,s,a,o,l,u,c,h,p,f;return U(function(g){switch(g.g){case 1:for(r=new Gp,s=new UD(r,e,t,i||null),r.xi(n),t.controls&&s.g.Ej(!0),a=[],(o=t.getAttribute("src"))&&(a.push(o),t.removeAttribute("src")),l=d(t.getElementsByTagName("source")),u=l.next();!u.done;u=l.next())c=u.value,a.push(c.src),t.removeChild(c);return S(g,r.$b(t),2);case 2:h=d(a),p=h.next();case 3:if(p.done){g.A(0);break}return f=p.value,A(g,6),S(g,s.g.Sb().load(f),8);case 8:g.A(0);break;case 6:x(g);case 4:p=h.next(),g.A(3)}})}function HD(e,t,n){var i=null;t=d(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.parentElement==e){i=r;break}for(i||(i=document.createElement("canvas"),i.classList.add("shaka-canvas-container"),e.appendChild(i)),t=null,n=d(n),r=n.next();!r.done;r=n.next())if(r=r.value,r.parentElement==e){t=r;break}return{aj:i,Yj:t}}b(SD,Tk),SD.prototype.release=function(){this.l.stop(),this.l=null,Tk.prototype.release.call(this)},X("shaka.ui.AdStatisticsButton",SD),xD.prototype.create=function(e,t){return new SD(e,t)},gD("ad_statistics",new xD),kk("ad_statistics",new xD),b(kD,Tk),X("shaka.ui.AirPlayButton",kD),RD.prototype.create=function(e,t){return new kD(e,t)},gD("airplay",new RD),DM("airplay",new RD),b(OD,Tk),OD.prototype.cg=function(e,t){if(e={type:"static",text:e,position:"top-right",color:"rgba(255, 255, 255, 0.7)",size:20,alpha:.7,interval:2e3,skip:500,displayDuration:2e3,transitionDuration:.5},t=Object.assign({},e,t||e),"static"===t.type){if(e=ND(this)){e.clearRect(0,0,this.g.width,this.g.height),e.globalAlpha=t.alpha,e.fillStyle=t.color,e.font=t.size+"px Arial";var n=e.measureText(t.text);switch(t.position){case"top-left":n=20;var i=t.size+20;break;case"top-right":n=this.g.width-n.width-20,i=t.size+20;break;case"bottom-left":n=20,i=this.g.height-20;break;case"bottom-right":n=this.g.width-n.width-20,i=this.g.height-20;break;default:n=(this.g.width-n.width)/2,i=(this.g.height+t.size)/2}e.fillText(t.text,n,i)}}else"dynamic"===t.type&&PD(this,t)},OD.prototype.Vf=function(){this.h&&(cancelAnimationFrame(this.h),this.h=null);var e=ND(this);e&&e.clearRect(0,0,this.g.width,this.g.height)},OD.prototype.release=function(){var t=this;this.g&&this.g.parentNode&&this.g.parentNode.removeChild(this.g),this.i?(this.i.disconnect(),this.i=null):e.removeEventListener("resize",function(){return LD(t)}),Tk.prototype.release.call(this)},X("shaka.ui.Watermark",OD),OD.prototype.removeWatermark=OD.prototype.Vf,OD.prototype.setTextWatermark=OD.prototype.cg,i=UD.prototype,i.destroy=function(e){e=void 0!==e&&e;var t=this;return U(function(n){return 1==n.g?t.g?S(n,t.g.destroy(e),2):n.A(2):4!=n.g?(t.g=null,t.j?S(n,t.j.destroy(),4):n.A(4)):(t.j=null,t.i=null,void E(n))})},i.vh=function(){return"MOBILE"==Be().Ja()},i.wh=function(){return"TV"==Be().Ja()},i.getConfiguration=function(){var e=BD(this);return kd(e,this.h,BD(this),{},""),e},i.configure=function(t,n){2==arguments.length&&"string"==typeof t&&(t=Md(t,n));var i=Object.assign({},this.h);kd(i,t,BD(this),{},"");var r=Rd(i,this.h);if(Object.keys(r).length&&(this.h=i,this.g.configure(this.h),this.g.dispatchEvent(new K("uiupdated")),(i=this.h.castSenderUrl)&&this.h.castReceiverAppId&&e.chrome&&!chrome.cast&&!this.wh())){r=!1;for(var s=d(document.getElementsByTagName("script")),a=s.next();!a.done;a=s.next())if(a.value.src===i){r=!0;break}r||(r=document.createElement("script"),r.src=i,r.defer=!0,document.head.appendChild(r))}},i.Bk=function(){return this.g},i.im=function(e){this.g.Vh(e)},i.cg=function(e,t){e&&!this.i&&this.l&&this.g&&(this.i=new OD(this.l,this.g)),this.i&&this.i.cg(e,t)},i.Vf=function(){this.i&&this.i.Vf()},X("shaka.ui.Overlay",UD),UD.prototype.removeWatermark=UD.prototype.Vf,UD.prototype.setTextWatermark=UD.prototype.cg,UD.prototype.setEnabled=UD.prototype.im,UD.prototype.getControls=UD.prototype.Bk,UD.prototype.configure=UD.prototype.configure,UD.prototype.getConfiguration=UD.prototype.getConfiguration,UD.prototype.isSmartTV=UD.prototype.wh,UD.prototype.isMobile=UD.prototype.vh,UD.prototype.destroy=UD.prototype.destroy;var zD=0;UD.TrackLabelFormat={LANGUAGE:zD,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var GD=0,qD=1;function WD(e,t,n,i,r,s,a,o){function l(e){var t="";return"aac"==e?t="AAC":"ac-3"===e?t="Dolby":"ec-3"===e?t="DD+":"ac-4"===e?t="Dolby AC-4":"opus"===e?t="Opus":"flac"===e&&(t="fLaC"),t?" "+t:t}function u(e){var t="";return 5<=e&&(t=" "+r.resolve("SURROUND")),t}function c(e,t,n,i,r,l){return t=[e,t,l],a&&null!=i&&t.push(i),o&&h(e)&&r&&t.push(r),n&&3==s&&t.push(n),t.join(": ")}function h(e){return f.has(e)&&1<f.get(e).size}for(var p=e.find(function(e){return 1==e.active}),f=new Map,g=d(e),m=g.next();!m.done;m=g.next())m=m.value,m.codecs&&(f.has(m.language)||f.set(m.language,new Set),f.get(m.language).add(Vi(m.codecs)));g=_k(t),ol(t),t.appendChild(g),g=new Set,p=p?c(p.language,p.roles.join(", "),p.label,p.channelsCount,p.codecs&&Vi(p.codecs),p.spatialAudio):"",e=d(e);var y=e.next();for(m={};!y.done;m={Zb:void 0},y=e.next()){m.Zb=y.value,y=m.Zb.language;var v=m.Zb.roles.join(", "),b=m.Zb.label,T=m.Zb.channelsCount,_=m.Zb.codecs&&Vi(m.Zb.codecs),w=m.Zb.spatialAudio,S=c(y,v,b,T,_,w);if(!g.has(S)){g.add(S);var E=il();E.addEventListener("click",function(e){return function(){n(e.Zb)}}(m));var A=nl("span");E.appendChild(A),A.textContent=KD(y,r);var C="";switch(o&&a&&w&&("ec-3"==_||"ac-4"==_)?C+=" Dolby Atmos":(o&&h(y)&&(C+=l(_)),a&&(C+=u(T))),s){case zD:A.textContent+=C;break;case 1:A.textContent+=C,v?A.textContent=v:(J("Track #"+JSON.stringify(m.Zb)+" does not have a role, but the UI is configured to only show role."),A.textContent="?");break;case 2:A.textContent+=C,v&&(A.textContent+=": "+v);break;case 3:b?A.textContent=b:(J("Track #"+JSON.stringify(m.Zb)+" does not have a label, but the UI is configured to only show labels."),A.textContent="?")}S==p&&(E.appendChild(Ek()),A.classList.add("shaka-chosen-item"),E.ariaSelected="true",i.textContent=A.textContent),t.appendChild(E)}}}function XD(e,t,n,i,r,s,a){function o(e,t,n){return e=[e,t],n&&3==a&&e.push(n),e.join(": ")}var l=e.find(function(e){return 1==e.active}),u=_k(t);ol(t),t.appendChild(u),u=new Set,l=l?o(l.language,l.roles.join(", "),l.label):"",e=d(e);for(var c=e.next(),h={};!c.done;h={Rc:void 0},c=e.next()){h.Rc=c.value,c=h.Rc.language;var p=h.Rc.forced,f=s.resolve("SUBTITLE_FORCED"),g=h.Rc.roles.join(", "),m=h.Rc.label,y=o(c,g,m);if(!u.has(y)){u.add(y);var v=il();v.addEventListener("click",function(e){return function(){n(e.Rc)}}(h));var b=nl("span");switch(v.appendChild(b),b.textContent=KD(c,s),a){case zD:p&&(b.textContent+=" ("+f+")");break;case 1:g?b.textContent=g:(J("Track #"+h.Rc.id+" does not have a role, but the UI is configured to only show role."),b.textContent="?"),p&&(b.textContent+=" ("+f+")");break;case 2:g&&(b.textContent+=": "+g),p&&(b.textContent+=" ("+f+")");break;case 3:m?b.textContent=m:(J("Track #"+h.Rc.id+" does not have a label, but the UI is configured to only show labels."),b.textContent="?")}i&&y==l&&(v.appendChild(Ek()),b.classList.add("shaka-chosen-item"),v.ariaSelected="true",r.textContent=b.textContent),t.appendChild(v)}}}function KD(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=_t(e);return e in Nh?Nh[e]:n in Nh?Nh[n]+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function YD(t,n,i){function r(){return JD(s)}Tk.call(this,t,n);var s=this;this.m=this.controls.l,$D(this,i),QD(this),ZD(this),this.eventManager.o(this.button,"click",function(){s.controls.Ba()&&(s.menu.classList.contains("shaka-hidden")?(s.controls.dispatchEvent(new K("submenuopen")),Ak(s.menu,!0),Sk(s.menu),JD(s)):Ak(s.menu,!1))}),this.j=null,e.ResizeObserver?(this.j=new ResizeObserver(r),this.j.observe(this.controls.l)):this.eventManager.o(e,"resize",r)}function $D(e,t){e.button=il(),e.button.classList.add("shaka-overflow-button"),e.icon=nl("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon),t=nl("label"),t.classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),t.classList.add("shaka-overflow-button-label-inline"),e.nameSpan=nl("span"),t.appendChild(e.nameSpan),e.currentSelection=nl("span"),e.currentSelection.classList.add("shaka-current-selection-span"),t.appendChild(e.currentSelection),e.button.appendChild(t),e.parent.appendChild(e.button)}function QD(e){e.menu=nl("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=il(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.Lc()});var t=nl("i");t.classList.add("material-icons-round"),t.textContent="close",e.backButton.appendChild(t),e.backSpan=nl("span"),e.backButton.appendChild(e.backSpan),e.controls.h.appendChild(e.menu)}function ZD(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="navigate_before",e.eventManager.o(e.menu,"click",function(){function t(e){return 0==e.classList.contains("shaka-hidden")}Ak(e.menu,!1),Ak(e.parent,!0),ue(e.parent.childNodes,t)&&ce(e.parent.childNodes,t)[0].focus(),nD(e.controls),JD(e)}))}function JD(t){var n=t.menu.getBoundingClientRect(),i=e.getComputedStyle(t.menu),r=parseFloat(i.paddingTop);i=parseFloat(i.paddingBottom);var s=t.m.getBoundingClientRect();t.menu.style.maxHeight=n.bottom-s.top-r-i+"px"}function eR(e,t){YD.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){nR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){nR(n)}),this.eventManager.o(this.player,"loading",function(){tR(n)}),this.eventManager.o(this.player,"loaded",function(){tR(n)}),this.eventManager.o(this.player,"unloading",function(){tR(n)}),this.eventManager.o(this.player,"audiotrackschanged",function(){tR(n)}),nR(this),tR(this)}function tR(e){var t=e.player.getAudioTracks()||[];WD(t,e.menu,function(t){e.player.zj(t),e.player.configure("preferredAudioLanguage",t.language),t.label&&e.player.configure("preferredAudioLabel",t.label),t.channelsCount&&e.player.configure("preferredAudioChannelCount",t.channelsCount),e.player.configure("preferSpatialAudio",t.spatialAudio)},e.currentSelection,e.localization,e.controls.g.trackLabelFormat,e.controls.g.showAudioChannelCountVariants,e.controls.g.showAudioCodec),Sk(e.menu),e.controls.dispatchEvent(new K("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText),Ak(e.button,2<e.menu.getElementsByTagName("button").length)}function nR(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}function iR(){}function rR(e,t){Tk.call(this,e,t);var n=this;this.h=this.controls.D,this.g=il(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=nl("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.l=nl("span"),e.appendChild(this.l),this.j=nl("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),lR(this),aR(this),this.eventManager.o(this.localization,"locale-updated",function(){lR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){lR(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&sR(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){aR(n)})}function sR(e){var t;U(function(n){return 1==n.g?e.h.Pa()?(e.h.Oj(),n.A(0)):(A(n,3),e.g.disabled=!0,S(n,e.h.cast(),5)):3!=n.g?(e.g.disabled=!1,I(n,0)):(t=x(n),e.g.disabled=!1,8004!=t.code&&e.controls.dispatchEvent(new K("error",(new Map).set("detail",t))),void E(n))})}function aR(e){var t=e.h.Dg()&&e.controls.oa,n=e.h.Pa();Ak(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),oR(e)}function oR(e){e.j.textContent=e.h.Pa()?e.h.Tf():e.localization.resolve("OFF")}function lR(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),oR(e)}function uR(){}function cR(e,t){YD.call(this,e,t,"bookmarks");var n=this;this.button.classList.add("shaka-chapter-button"),this.menu.classList.add("shaka-chapters"),this.button.classList.add("shaka-tooltip-status"),this.g=[],this.h="und",this.eventManager.o(this.localization,"locale-updated",function(){dR(n),pR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){dR(n),pR(n)}),this.eventManager.o(this.player,"unloading",function(){hR(n),n.h="und",n.g=[]}),this.eventManager.o(this.player,"trackschanged",function(){pR(n)}),dR(this),pR(this)}function dR(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("CHAPTERS"),e.nameSpan.textContent=e.localization.resolve("CHAPTERS"),e.backSpan.textContent=e.localization.resolve("CHAPTERS")}function hR(e){var t=_k(e.menu);ol(e.menu),e.menu.appendChild(t),Ak(e.button,!1)}function pR(e){var t,n,i,r,s,a,o,l,u,c,h,p,f;U(function(g){switch(g.g){case 1:t=function(e,t){return!e&&!t||e.id===t.id&&e.title===t.title&&e.startTime===t.startTime&&e.endTime===t.endTime},n="und",i=[],r=e.localization.g,s=d(Array.from(r)),a=s.next();case 2:if(a.done){g.A(4);break}if(n=a.value,!e.player){g.A(5);break}return S(g,e.player.fh(n),6);case 6:i=g.h||[];case 5:if(i.length){g.A(4);break}a=s.next(),g.A(2);break;case 4:if(i.length){g.A(7);break}if(n="und",!e.player){g.A(7);break}return S(g,e.player.fh(n),9);case 9:i=g.h||[];case 7:if(o=n!==e.h,l=e.g.length!==i.length||!e.g.some(function(e,n){return n=i.at(n),t(e,n)||i.some(function(n){return t(e,n)})}),e.h=n,e.g=i,i.length){if(o||l){for(u=d(e.g),c=u.next(),h={};!c.done;h={Fg:void 0},c=u.next())h.Fg=c.value,p=il(),f=nl("span"),f.classList.add("shaka-chapter"),f.textContent=h.Fg.title,p.appendChild(f),e.eventManager.o(p,"click",function(t){return function(){e.controls.Ba()&&(e.video.currentTime=t.Fg.startTime)}}(h)),e.menu.appendChild(p);Ak(e.button,!0),Sk(e.menu)}}else hR(e);E(g)}})}function fR(){}function gR(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),mR(this),this.h=this.controls.g.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){mR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){mR(n)}),this.eventManager.o(this.g,"click",function(){if(n.controls.Ba()&&n.video.duration){var e=n.h.indexOf(n.player.Xa())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.video.paused&&n.video.play(),n.player.Sc(e),n.g.setAttribute("shaka-status",e+"x")}}),this.eventManager.o(this.player,"ratechange",function(){n.g.setAttribute("shaka-status",n.player.Xa()+"x")})}function mR(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}function yR(){}function vR(e,t){Tk.call(this,e,t);var n=this;this.h=this.controls.m,this.g=il(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),bR(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),TR(this),this.eventManager.o(this.localization,"locale-updated",function(){TR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){TR(n)}),this.eventManager.o(this.g,"click",function(){return U(function(e){return n.controls.Ba()?S(e,n.controls.gg(),0):e.return()})}),this.eventManager.o(document,"fullscreenchange",function(){n.g.textContent=n.controls.Mc()?"fullscreen_exit":"fullscreen",TR(n)}),this.eventManager.o(this.h,"loadedmetadata",function(){bR(n)}),this.eventManager.o(this.h,"loadeddata",function(){bR(n)}),this.eventManager.o(this.adManager,"ad-started",function(){bR(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){bR(n)})}function bR(e){e.controls.ke()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function TR(e){var t=e.controls.Mc()?"EXIT_FULL_SCREEN":"FULL_SCREEN";e.g.ariaLabel=e.localization.resolve(t)}function _R(){}function wR(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=nl("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.l=nl("span"),this.l.textContent=this.localization.resolve("LOOP"),e.appendChild(this.l),this.j=nl("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),SR(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){SR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){SR(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&(n.video.loop=!n.video.loop,n.h.Ka(),n.h.ya(1))}),this.m=this.video.loop,this.h=new sr(function(){n.m!=n.video.loop&&(SR(n),n.m=n.video.loop)}),this.h.ya(1),this.eventManager.o(this.player,"unloading",function(){ER(n)}),this.eventManager.o(this.player,"loaded",function(){ER(n)}),this.eventManager.o(this.player,"manifestupdated",function(){ER(n)}),this.eventManager.o(this.video,"durationchange",function(){ER(n)})}function SR(e){e.l.textContent=e.localization.resolve("LOOP"),e.j.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function ER(e){Ak(e.g,!e.player.T())}function AR(){}function CR(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("shaka-tooltip"),this.h=nl("i"),this.h.classList.add("material-icons-round"),this.h.textContent="volume_up",this.g.appendChild(this.h),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=nl("span"),this.i.textContent=this.localization.resolve("MUTE"),e.appendChild(this.i),this.j=nl("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),IR(this),xR(this),this.eventManager.o(this.localization,"locale-updated",function(){IR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){IR(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&(n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted||0!=n.video.volume?n.video.muted=!n.video.muted:n.video.volume=1)}),this.eventManager.o(this.video,"volumechange",function(){IR(n),xR(n)}),this.eventManager.o(this.player,"loading",function(){IR(n),xR(n)}),this.eventManager.o(this.player,"loaded",function(){kR(n)}),this.eventManager.o(this.player,"unloading",function(){kR(n)}),this.eventManager.o(this.player,"trackschanged",function(){kR(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){IR(n),xR(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){IR(n),xR(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){IR(n),xR(n)}),this.eventManager.o(this.adManager,"ad-started",function(){kR(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null,IR(n),xR(n),kR(n)}),kR(this)}function IR(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted||0==e.video.volume?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t),e.i.textContent=e.localization.resolve(t)}function xR(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted||0==e.video.volume?"volume_off":"volume_up";e.h.textContent=t}function kR(e){var t=!0;e.ad&&e.ad.isLinear()?t=!0:e.player.xh()&&(t=!1),Ak(e.g,t)}function MR(){}function DR(t,n){Tk.call(this,t,n);var i=this;this.l=this.controls.m,this.g=il(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=nl("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),t=nl("label"),t.classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),t.classList.add("shaka-simple-overflow-button-label-inline"),this.j=nl("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),t.appendChild(this.j),this.h=nl("span"),this.h.classList.add("shaka-current-selection-span"),t.appendChild(this.h),this.g.appendChild(t),NR(this),this.parent.appendChild(this.g),this.controls.yf()||Ak(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){NR(i)}),this.eventManager.o(this.localization,"locale-changed",function(){NR(i)}),this.eventManager.o(this.g,"click",function(){i.controls.Ba()&&i.controls.pd()}),this.eventManager.o(this.l,"enterpictureinpicture",function(){RR(i)}),this.eventManager.o(this.l,"leavepictureinpicture",function(){OR(i)}),this.eventManager.o(this.controls,"caststatuschanged",function(){LR(i)}),this.eventManager.o(this.player,"trackschanged",function(){LR(i)}),"documentPictureInPicture"in e&&this.eventManager.o(e.documentPictureInPicture,"enter",function(e){RR(i),i.eventManager.qa(e.window,"pagehide",function(){OR(i)})})}function RR(e){e.i.textContent="branding_watermark",e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("ON")}function OR(e){e.i.textContent="picture_in_picture_alt",e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("OFF")}function NR(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE");var t=e.controls.le();e.g.ariaLabel=e.localization.resolve(t?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(t?"ON":"OFF")}function LR(e){U(function(t){return e.controls.yf()?e.player&&e.player.Cd()?(Ak(e.g,!1),e.controls.le()?S(t,e.controls.pd(),0):t.A(0)):(Ak(e.g,!0),t.A(0)):(Ak(e.g,!1),e.controls.le()?S(t,e.controls.pd(),0):t.A(0))})}function PR(){}function UR(e,t){YD.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),Array.from(e.classList).includes("shaka-overflow-menu")||(this.g=nl("span"),this.g.classList.add("shaka-overflow-playback-rate-mark"),this.button.appendChild(this.g)),this.eventManager.o(this.localization,"locale-updated",function(){BR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){BR(n)}),this.eventManager.o(this.player,"loaded",function(){FR(n)}),this.eventManager.o(this.player,"ratechange",function(){FR(n)}),BR(this),jR(this),FR(this)}function BR(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function FR(e){var t=e.player.Xa(),n=wk(e.menu,"material-icons-round shaka-chosen-item");if(n){var i=n.parentElement;i.removeAttribute("aria-selected"),i.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),i.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find(function(e){return e.textContent==t+"x"}))&&(i=n.parentElement,i.appendChild(Ek()),i.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x",e.button.setAttribute("shaka-status",t+"x"),e.g&&(e.g.textContent=t+"x")}function jR(e){for(var t=d(e.controls.g.playbackRates),n=t.next(),i={};!n.done;i={Sf:void 0},n=t.next()){i.Sf=n.value,n=il();var r=nl("span");r.textContent=i.Sf+"x",n.appendChild(r),e.eventManager.o(n,"click",function(t){return function(){t.Sf==e.video.defaultPlaybackRate?e.player.td():e.player.Sc(t.Sf,!1)}}(i)),e.menu.appendChild(n)}Sk(e.menu)}function VR(){}function HR(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("shaka-current-time"),zR(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&n.player.T()&&(n.video.currentTime=n.player.xa().end)}),this.eventManager.o(this.player,"loading",function(){Ak(n.g,!0)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var e=n.controls.R,t=n.controls.gh(),i=n.player.xa(),r=i.end-i.start;isFinite(r)?n.player.T()?(t=Math.max(0,Math.floor(i.end-t)),r=3600<=r,1<=t||e?(zR(n,"- "+Ck(t,r)),n.g.disabled=!1):(zR(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(e=3600<=r,t=Ck(Math.max(0,t-i.start),e),r&&(t+=" / "+Ck(r,e)),zR(n,t),n.g.disabled=!0):(zR(n,n.localization.resolve("LIVE")),n.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){n.player.T()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))}),this.eventManager.o(this.adManager,"ad-started",function(){Ak(n.g,!n.ad.isLinear())}),this.eventManager.o(this.adManager,"ad-stopped",function(){Ak(n.g,!0)})}function zR(e,t){t!=e.g.textContent&&(e.g.textContent=t)}function GR(){}function qR(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("shaka-recenter-vr-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=nl("i"),this.h.classList.add("material-icons-round"),this.h.textContent="control_camera",this.g.appendChild(this.h),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=nl("span"),e.appendChild(this.j),this.i=nl("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),WR(this),this.eventManager.o(this.localization,"locale-updated",function(){WR(n)}),this.eventManager.o(this.localization,"locale-changed",function(){WR(n)});var i=this.controls.C;this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&(i.g?TM(i.g):J("Not playing VR content"))}),this.eventManager.o(i,"vrstatuschanged",function(){Ak(n.g,n.controls.Tb())}),Ak(this.g,this.controls.Tb())}function WR(e){e.g.ariaLabel=e.localization.resolve("RECENTER_VR"),e.j.textContent=e.localization.resolve("RECENTER_VR")}function XR(){}function KR(e,t){Tk.call(this,e,t);var n=this;this.j=Be().eg(),this.g=il(),this.g.classList.add("shaka-remote-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=nl("i"),this.i.classList.add("material-icons-round"),this.i.textContent=this.j?"airplay":"cast",this.g.appendChild(this.i),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.m=nl("span"),e.appendChild(this.m),this.l=nl("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.g.appendChild(e),this.parent.appendChild(this.g),this.h=-1,$R(this),Ak(this.g,!1),this.video.remote?(this.eventManager.o(this.localization,"locale-updated",function(){$R(n)}),this.eventManager.o(this.localization,"locale-changed",function(){$R(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){YR(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&n.video.remote.prompt()}),this.eventManager.o(this.video.remote,"connect",function(){YR(n),QR(n)}),this.eventManager.o(this.video.remote,"connecting",function(){YR(n),QR(n)}),this.eventManager.o(this.video.remote,"disconnect",function(){YR(n),QR(n)}),this.eventManager.o(this.player,"loaded",function(){YR(n)}),YR(this,!0),QR(this)):this.g.classList.add("shaka-hidden")}function YR(e,t){var n,i;t=void 0!==t&&t,U(function(r){switch(r.g){case 1:if(e.controls.D.Dg()&&e.controls.oa||!e.video.remote){Ak(e.g,!1),-1!=e.h&&(e.video.remote.cancelWatchAvailability(e.h),e.h=-1),r.A(0);break}if("disconnected"==e.video.remote.state||t){if(n=function(t){if(e.player){var n=e.video.disableRemotePlayback,i=!0;Be().eg()&&e.player.m==yg&&"HLS"!=e.player.jh()&&(i=!1),Ak(e.g,i&&t&&!n)}else Ak(e.g,!1)},A(r,7),-1==e.h){r.A(9);break}return S(r,e.video.remote.cancelWatchAvailability(e.h),10)}if(Ak(e.g,!0),-1==e.h){r.A(0);break}return S(r,e.video.remote.cancelWatchAvailability(e.h),6);case 6:e.h=-1,r.A(0);break;case 10:e.h=-1;case 9:I(r,8);break;case 7:x(r);case 8:return A(r,11),S(r,e.video.remote.watchAvailability(n),13);case 13:i=r.h,e.h=i,I(r,0);break;case 11:x(r),n(!0),E(r)}})}function $R(e){var t=e.j?e.localization.resolve("AIRPLAY"):e.localization.resolve("CAST");e.g.ariaLabel=t,e.m.textContent=t}function QR(e){e.j||(e.i.textContent="disconnected"==e.video.remote.state?"cast":"cast_connected")}function ZR(){}function JR(e,t){YD.call(this,e,t,"tune");var n=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.h=nl("span"),this.h.classList.add("shaka-current-auto-quality"),this.h.style.display="none",this.i=nl("sup"),this.i.classList.add("shaka-current-quality-mark"),this.i.style.display="none",Array.from(e.classList).includes("shaka-overflow-menu")?this.parent.parentElement&&(this.g=al(this.parent.parentElement)):(this.g=nl("span"),this.g.classList.add("shaka-overflow-playback-rate-mark"),this.button.appendChild(this.g)),e=nl("span"),this.button.childNodes[1].appendChild(e),e.appendChild(this.currentSelection),e.appendChild(this.h),e.appendChild(this.i),this.eventManager.o(this.localization,"locale-updated",function(){oO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){oO(n)}),this.eventManager.o(this.player,"loading",function(){nO(n),eO(n)}),this.eventManager.o(this.player,"loaded",function(){nO(n),eO(n)}),this.eventManager.o(this.player,"unloading",function(){nO(n),eO(n)}),this.eventManager.o(this.player,"variantchanged",function(){nO(n),eO(n)}),this.eventManager.o(this.player,"trackschanged",function(){nO(n),eO(n)}),this.eventManager.o(this.player,"abrstatuschanged",function(){nO(n),eO(n)}),this.eventManager.o(this.player,"adaptation",function(){nO(n),eO(n)}),nO(this)}function eO(e){var t=e.player.getConfiguration().abr.enabled;if(e.player.Cd()){e.i.textContent="",e.i.style.display="none",e.g&&(e.g.textContent="",e.g.style.display="none");var n=e.player.qb()||[],i=n.find(function(e){return e.active});i&&(t?(e.h.textContent=i.bandwidth?aO(e,i,n):"Unknown",e.h.style.display=""):e.h.style.display="none")}else n=e.player.getVideoTracks()||[],(i=n.find(function(e){return e.active}))?(t?(e.h.textContent=i.height&&i.width?sO(e,i,n):i.bandwidth?Math.round(i.bandwidth/1e3)+" kbits/s":"Unknown",e.h.style.display=""):e.h.style.display="none",t=tO(e,i.width,i.height),e.i.textContent=t,e.i.style.display=""!==t?"":"none",e.g&&(e.g.textContent=t,e.g.style.display=""!==t?"":"none")):e.g&&(t=e.player.getStats(),t=tO(e,t.width,t.height),e.g.textContent=t,e.g.style.display=""!==t?"":"none")}function tO(e,t,n){return t&&n?(n>t&&(n=d([n,t]),t=n.next().value,n=n.next().value),t/n>16/9&&(n=Math.round(9*t/16)),e=e.controls.g.qualityMarks,8640<=n?n+"p":4320<=n?e["4320"]:2160<=n?e["2160"]:1440<=n?e["1440"]:1080<=n?e["1080"]:720<=n?e["720"]:""):""}function nO(e){var t=_k(e.menu);ol(e.menu),e.menu.appendChild(t),t=0,t=e.player.Cd()?iO(e):rO(e);var n=il();n.classList.add("shaka-enable-abr-button"),e.eventManager.o(n,"click",function(){e.player.configure({abr:{enabled:!0}}),nO(e)}),e.l=nl("span"),e.l.textContent=e.localization.resolve("AUTO_QUALITY"),n.appendChild(e.l),e.player.getConfiguration().abr.enabled&&(n.ariaSelected="true",n.appendChild(Ek()),e.l.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(n),Sk(e.menu),e.controls.dispatchEvent(new K("resolutionselectionupdated")),oO(e),Ak(e.button,0<t)}function iO(e){var t=[];e.player.m==vg||e.player.Ca()||(t=e.player.qb()||[]);var n=t.find(function(e){return e.active});n&&(t=t.filter(function(t){if(t.language!=n.language||e.controls.g.showAudioChannelCountVariants&&t.channelsCount&&n.channelsCount&&t.channelsCount!=n.channelsCount)return!1;var i=e.controls.g.trackLabelFormat;return!((1==i||2==i)&&JSON.stringify(t.audioRoles)!=JSON.stringify(n.audioRoles)||3==i&&t.label!=n.label||!t.bandwidth)})),t=t.filter(function(e,n){return t.findIndex(function(t){return t.bandwidth==e.bandwidth})==n}),t.sort(function(e,t){return t.bandwidth-e.bandwidth});for(var i=e.player.getConfiguration().abr.enabled,r=d(t),s=r.next(),a={};!s.done;a={De:void 0},s=r.next()){a.De=s.value,s=il(),s.classList.add("explicit-resolution"),e.eventManager.o(s,"click",function(t){return function(){var n=t.De;e.player.configure({abr:{enabled:!1}}),e.player.ye(n,e.controls.g.clearBufferOnQualityChange)}}(a));var o=nl("span");o.textContent=a.De.bandwidth?aO(e,a.De,t):"Unknown",s.appendChild(o),i||a.De!=n||(s.ariaSelected="true",s.appendChild(Ek()),o.classList.add("shaka-chosen-item"),e.currentSelection.textContent=o.textContent),e.menu.appendChild(s)}return t.length}function rO(e){var t=e.player.getVideoTracks()||[],n=t.find(function(e){return e.active});t=t.filter(function(n,i){return t.findIndex(function(t){var i=t.height==n.height&&t.bandwidth==n.bandwidth&&t.frameRate==n.frameRate&&t.hdr==n.hdr&&t.videoLayout==n.videoLayout;return i&&e.controls.g.showVideoCodec&&t.codecs&&n.codecs&&(i=Vi(t.codecs)==Vi(n.codecs)),i})==i}),t.sort(function(e,t){return t.height==e.height||null==e.height||null==t.height?t.bandwidth-e.bandwidth:t.height-e.height});for(var i=e.player.getConfiguration().abr.enabled,r=d(t),s=r.next(),a={};!s.done;a={jc:void 0},s=r.next()){a.jc=s.value,s=il(),s.classList.add("explicit-resolution"),e.eventManager.o(s,"click",function(t){return function(){var n=t.jc;e.player.configure({abr:{enabled:!1}}),e.player.Aj(n,e.controls.g.clearBufferOnQualityChange)}}(a));var o=nl("span");o.textContent=a.jc.height&&a.jc.width?sO(e,a.jc,t):a.jc.bandwidth?Math.round(a.jc.bandwidth/1e3)+" kbits/s":"Unknown",s.appendChild(o);var l=tO(e,a.jc.width,a.jc.height);if(""!==l){var u=nl("sup");u.classList.add("shaka-quality-mark"),u.textContent=l,s.appendChild(u)}i||a.jc!=n||(s.ariaSelected="true",s.appendChild(Ek()),o.classList.add("shaka-chosen-item"),e.currentSelection.textContent=o.textContent),e.menu.appendChild(s)}return t.length}function sO(e,t,n){function i(e,t){return e!=t&&e.height==t.height&&e.hdr==t.hdr&&Math.round(e.frameRate||0)==Math.round(t.frameRate||0)}var r=t.height||0,s=t.width||0;r>s&&(r=d([r,s]),s=r.next().value,r=r.next().value);var a=r;s/r>16/9&&(a=Math.round(9*s/16)),s=a+"p",r=new Set,a=d(n);for(var o=a.next();!o.done;o=a.next())o=o.value,o.frameRate&&r.add(Math.round(o.frameRate));if(1<r.size&&(r=t.frameRate)&&(50<=r||20>=r)&&(s+=Math.round(t.frameRate)),"PQ"!=t.hdr&&"HLG"!=t.hdr||(s+=" HDR"),(t.videoLayout||"").includes("CH-STEREO")&&(s+=" 3D"),n.some(function(e){return i(t,e)})&&(n.some(function(e){return i(t,e)&&e.bandwidth==t.bandwidth})||(s+=" ("+Math.round(t.bandwidth/1e3)+" kbits/s)"),e.controls.g.showVideoCodec)){var l=function(e){var t="";return e&&(e=Vi(e),t=e.startsWith("dovi-")?"Dolby Vision":e.toUpperCase()),t?" "+t:t};n.some(function(e){return i(t,e)&&l(e.codecs)!=l(t.codecs)})&&(s+=l(t.codecs))}return s}function aO(e,t,n){var i=Math.round(t.bandwidth/1e3)+" kbits/s";if(e.controls.g.showAudioCodec){var r=function(e){var t="";return e&&(t=Vi(e).toUpperCase()),t?" "+t:t};n.some(function(e){return r(e.codecs)!=r(t.codecs)})&&(i+=r(t.codecs))}return i}function oO(e){var t=e.player.Cd()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t),e.backButton.ariaLabel=e.localization.resolve(t),e.backSpan.textContent=e.localization.resolve(t),e.nameSpan.textContent=e.localization.resolve(t),e.l.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}function lO(){}function uO(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),cO(this),this.h=this.controls.g.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){cO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){cO(n)}),this.eventManager.o(this.g,"click",function(){if(n.controls.Ba()&&n.video.duration){var e=n.h.indexOf(n.player.Xa())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.video.paused&&n.video.play(),n.player.Sc(e),n.g.setAttribute("shaka-status",e+"x")}}),this.eventManager.o(this.player,"ratechange",function(){n.g.setAttribute("shaka-status",n.player.Xa()+"x")})}function cO(e){e.g.ariaLabel=e.localization.resolve("REWIND")}function dO(){}function hO(e,t){Tk.call(this,e,t);var n=this;this.l=this.controls.D,this.g=il(),this.g.classList.add("shaka-save.video-frame-button"),this.g.classList.add("shaka-tooltip"),this.h=nl("i"),this.h.classList.add("material-icons-round"),this.h.textContent="download",this.g.appendChild(this.h),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=nl("span"),this.i.textContent=this.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.appendChild(this.i),this.j=nl("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),fO(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){fO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){fO(n)}),this.eventManager.o(this.g,"click",function(){var e=document.createElement("canvas"),t=e.getContext("2d"),i=n.controls.m;e.width=i.videoWidth,e.height=i.videoHeight,t.drawImage(i,0,0,e.width,e.height),e=e.toDataURL("image/png"),t=document.createElement("a"),t.href=e,t.download="videoframe_"+i.currentTime.toFixed(3)+".png",t.click()}),this.eventManager.o(this.controls.C,"vrstatuschanged",function(){pO(n)}),this.eventManager.o(this.adManager,"ad-started",function(){pO(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){pO(n)}),this.eventManager.o(this.player,"unloading",function(){pO(n)}),this.eventManager.o(this.player,"loaded",function(){pO(n)}),this.eventManager.o(this.video,"play",function(){pO(n)}),this.eventManager.o(this.video,"pause",function(){pO(n)}),this.eventManager.o(this.video,"seeking",function(){pO(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){pO(n)}),pO(this)}function pO(e){var t=!0;e.controls.Tb()&&(t=!1),t&&e.l.Pa()&&(t=!1),t&&(e.player.drmInfo()||e.player.Cd())&&(t=!1),t&&e.ad&&(t=!1),t&&e.video.remote&&"disconnected"!=e.video.remote.state&&(t=!1),Ak(e.g,t)}function fO(e){e.g.ariaLabel=e.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.i.textContent=e.localization.resolve("DOWNLOAD_VIDEO_FRAME")}function gO(){}function mO(e,t){Tk.call(this,e,t);var n=this;(this.h=this.player.lh())&&(this.g=il(),this.g.classList.add("shaka-skip-next-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="skip_next",this.parent.appendChild(this.g),yO(this),vO(this),this.eventManager.o(this.localization,"locale-updated",function(){yO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){yO(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&n.h.playItem(n.h.getCurrentItemIndex()+1)}),this.eventManager.o(this.h,"currentitemchanged",function(){vO(n)}),this.eventManager.o(this.h,"itemsinserted",function(){vO(n)}),this.eventManager.o(this.h,"itemsremoved",function(){vO(n)}),this.eventManager.o(this.player,"loading",function(){vO(n)}))}function yO(e){e.g.ariaLabel=e.localization.resolve("SKIP_NEXT")}function vO(e){var t=e.h.getItems().length;t=1<t&&e.h.getCurrentItemIndex()+1<t,Ak(e.g,t)}function bO(){}function TO(e,t){Rk.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip")}function _O(){}function wO(e,t){Tk.call(this,e,t),e=nl("div"),e.classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}function SO(){}function EO(e,t){function n(e){return e=parseInt(u.g[e],10),2e9<e?(e/1e9).toFixed(2)+"GB":1e6<e?(e/1e6).toFixed(2)+"MB":1e3<e?(e/1e3).toFixed(2)+"KB":e+"B"}function i(e){return u.g[e]+" (gaps)"}function r(e){return Ck(u.g[e],!1)+" (m)"}function s(e){return Math.round(u.g[e]/1e3)+" (kbits/s)"}function a(e){return u.g[e].toFixed(2)+" (s)"}function o(e){return u.g[e]+" (frames)"}function l(e){return u.g[e]+" (px)"}Tk.call(this,e,t);var u=this;this.i=il(),this.i.classList.add("shaka-statistics-button"),this.j=nl("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.u=nl("span"),e.appendChild(this.u),this.m=nl("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.i.appendChild(e),this.parent.appendChild(this.i),this.h=nl("div"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-statistics-container"),this.h.classList.add("shaka-hidden"),this.controls.h.appendChild(this.h),this.C=[],this.D=["stateHistory","switchHistory"],this.g=this.player.getStats(),this.s=new Map,this.B=(new Map).set("width",l).set("height",l).set("currentCodecs",function(e){return u.g[e]}).set("completionPercent",function(e){return u.g[e]+" (%)"}).set("bufferingTime",a).set("drmTimeSeconds",a).set("licenseTime",a).set("liveLatency",a).set("loadLatency",a).set("manifestTimeSeconds",a).set("estimatedBandwidth",s).set("streamBandwidth",s).set("maxSegmentDuration",a).set("pauseTime",r).set("playTime",r).set("corruptedFrames",o).set("decodedFrames",o).set("droppedFrames",o).set("stallsDetected",function(e){return u.g[e]+" (stalls)"}).set("gapsJumped",i).set("manifestSizeBytes",n).set("bytesDownloaded",n).set("nonFatalErrorCount",function(e){return u.g[e]+" (errors)"}).set("manifestPeriodCount",function(e){return u.g[e]+" (periods)"}).set("manifestGapCount",i),this.l=new sr(function(){u.g=u.player.getStats();for(var e=d(u.C),t=e.next();!t.done;t=e.next()){var n=t.value;t=u.s.get(n),t.textContent=u.B.get(n)(n),t&&t.parentElement&&(n=u.g[n],Ak(t.parentElement,"string"==typeof n?""!=n:!isNaN(n)))}}),CO(this),xO(this),this.eventManager.o(this.localization,"locale-updated",function(){CO(u)}),this.eventManager.o(this.localization,"locale-changed",function(){CO(u)}),this.eventManager.o(this.i,"click",function(){AO(u),CO(u)})}function AO(e){e.h.classList.contains("shaka-hidden")?(e.j.textContent="insert_chart",e.l.ya(.1),Ak(e.h,!0)):(e.j.textContent="insert_chart_outlined",e.l.stop(),Ak(e.h,!1))}function CO(e){e.u.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.m.textContent=e.localization.resolve(e.h.classList.contains("shaka-hidden")?"OFF":"ON")}function IO(e,t){var n=nl("div"),i=nl("label");return i.textContent=t+":",n.appendChild(i),i=nl("span"),i.textContent=e.B.get(t)(t),n.appendChild(i),e.s.set(t,i),n}function xO(e){var t=nl("div");t.classList.add("shaka-no-propagation"),t.classList.add("shaka-statistics-close");var n=nl("i");for(n.classList.add("material-icons"),n.classList.add("notranslate"),n.classList.add("material-icons-round"),n.textContent="close",t.appendChild(n),e.h.appendChild(t),e.eventManager.o(n,"click",function(){AO(e)}),t=d(e.controls.g.statisticsList),n=t.next();!n.done;n=t.next())if(n=n.value,n in e.g&&!e.D.includes(n)){var i=IO(e,n);e.h.appendChild(i),e.C.push(n)}else J("Unrecognized statistic element:",n)}function kO(){}function MO(e,t){YD.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.fd()?this.button.ariaPressed="true":this.button.ariaPressed="false",DO(this),this.eventManager.o(this.localization,"locale-updated",function(){LO(n),OO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){LO(n),OO(n)}),this.eventManager.o(this.player,"loading",function(){RO(n),OO(n)}),this.eventManager.o(this.player,"loaded",function(){RO(n),OO(n)}),this.eventManager.o(this.player,"unloading",function(){RO(n),OO(n)}),this.eventManager.o(this.player,"texttrackvisibility",function(){RO(n),OO(n)}),this.eventManager.o(this.player,"textchanged",function(){OO(n)}),this.eventManager.o(this.player,"trackschanged",function(){OO(n)}),RO(this),LO(this),OO(this)}function DO(e){var t=il();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(Ek()),e.g=nl("span"),t.appendChild(e.g)}function RO(e){e.player.fd()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false"),e.controls.dispatchEvent(new K("captionselectionupdated"))}function OO(e){var t=e.player.rc()||[];XD(t,e.menu,function(t){return NO(e,t)},e.player.fd(),e.currentSelection,e.localization,e.controls.g.textTrackLabelFormat);var n=il();n.classList.add("shaka-turn-captions-off-button"),e.eventManager.o(n,"click",function(){e.player.Ae(!1),OO(e)}),n.appendChild(e.g),e.menu.appendChild(n),e.player.fd()?e.g.classList.remove("shaka-chosen-item"):(n.ariaSelected="true",n.appendChild(Ek()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),Sk(e.menu),e.controls.dispatchEvent(new K("captionselectionupdated")),Ak(e.button,0<t.length)}function NO(e,t){return U(function(n){if(1==n.g)return e.player.$f(t),S(n,e.player.Ae(!0),2);e.player.configure("preferredTextLanguage",t.language),e.player.configure("preferForcedSubs",t.forced),E(n)})}function LO(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function PO(){}function UO(e,t){Tk.call(this,e,t);var n=this;this.g=il(),this.g.classList.add("shaka-toggle-stereoscopic-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=nl("i"),this.h.classList.add("material-icons-round"),this.h.textContent="3d_rotation",this.g.appendChild(this.h),e=nl("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=nl("span"),e.appendChild(this.j),this.i=nl("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),BO(this),this.eventManager.o(this.localization,"locale-updated",function(){BO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){BO(n)});var i=this.controls.C;this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&i.Qd()}),this.eventManager.o(i,"vrstatuschanged",function(){Ak(n.g,n.controls.Tb())}),Ak(this.g,this.controls.Tb())}function BO(e){e.g.ariaLabel=e.localization.resolve("TOGGLE_STEREOSCOPIC"),e.j.textContent=e.localization.resolve("TOGGLE_STEREOSCOPIC")}function FO(){}function jO(e,t){Bk.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.g=this.controls.g,this.setRange(0,100),this.eventManager.o(this.video,"volumechange",function(){return VO(n)}),this.eventManager.o(this.player,"loading",function(){return VO(n)}),this.eventManager.o(this.player,"loaded",function(){return qO(n)}),this.eventManager.o(this.player,"unloading",function(){return qO(n)}),this.eventManager.o(this.player,"trackschanged",function(){return qO(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){return VO(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return HO(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){return HO(n)}),this.eventManager.o(this.adManager,"ad-started",function(){return qO(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){qO(n),VO(n)}),this.eventManager.o(this.localization,"locale-updated",function(){return GO(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return GO(n)}),VO(this),GO(this),this.ad&&this.onChange(),qO(this)}function VO(e){e.video.muted?e.setValue(0):e.setValue(100*e.video.volume),zO(e)}function HO(e){var t=e.ad.getVolume();e.setValue(100*t),zO(e)}function zO(e){var t=e.g.volumeBarColors,n=["to right"];n.push(t.level+e.getValue()+"%"),n.push(t.base+e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function GO(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}function qO(e){var t=!0;e.ad&&e.ad.isLinear()?t=!0:e.player.xh()&&(t=!1),Ak(e.container,t)}function WO(){}UD.FailReasonCode={NO_BROWSER_SUPPORT:GD,PLAYER_FAILED_TO_LOAD:qD},"complete"==document.readyState?U(function(e){if(1==e.g)return S(e,Promise.resolve(),2);FD(),E(e)}):e.addEventListener("load",FD),b(YD,Tk),YD.prototype.release=function(){this.j&&(this.j.disconnect(),this.j=null),Tk.prototype.release.call(this)},X("shaka.ui.SettingsMenu",YD),b(eR,YD),X("shaka.ui.AudioLanguageSelection",eR),iR.prototype.create=function(e,t){return new eR(e,t)},gD("language",new iR),DM("language",new iR),b(rR,Tk),X("shaka.ui.CastButton",rR),uR.prototype.create=function(e,t){return new rR(e,t)},gD("cast",new uR),DM("cast",new uR),b(cR,YD),X("shaka.ui.ChapterSelection",cR),fR.prototype.create=function(e,t){return new cR(e,t)},gD("chapter",new fR),DM("chapter",new fR),b(gR,Tk),X("shaka.ui.FastForwardButton",gR),yR.prototype.create=function(e,t){return new gR(e,t)},DM("fast_forward",new yR),b(vR,Tk),X("shaka.ui.FullscreenButton",vR),_R.prototype.create=function(e,t){return new vR(e,t)},DM("fullscreen",new _R),b(wR,Tk),wR.prototype.release=function(){this.h.stop(),this.h=null,Tk.prototype.release.call(this)},X("shaka.ui.LoopButton",wR),AR.prototype.create=function(e,t){return new wR(e,t)},gD("loop",new AR),DM("loop",new AR),kk("loop",new AR),b(CR,Tk),X("shaka.ui.MuteButton",CR),MR.prototype.create=function(e,t){return new CR(e,t)},gD("mute",new MR),DM("mute",new MR),kk("mute",new MR),b(DR,Tk),X("shaka.ui.PipButton",DR),PR.prototype.create=function(e,t){return new DR(e,t)},gD("picture_in_picture",new PR),DM("picture_in_picture",new PR),kk("picture_in_picture",new PR),b(UR,YD),X("shaka.ui.PlaybackRateSelection",UR),VR.prototype.create=function(e,t){return new UR(e,t)},gD("playback_rate",new VR),DM("playback_rate",new VR),b(HR,Tk),X("shaka.ui.PresentationTimeTracker",HR),GR.prototype.create=function(e,t){return new HR(e,t)},DM("time_and_duration",new GR),b(qR,Tk),X("shaka.ui.RecenterVRButton",qR),XR.prototype.create=function(e,t){return new qR(e,t)},gD("recenter_vr",new XR),DM("recenter_vr",new XR),b(KR,Tk),KR.prototype.release=function(){this.video.remote&&-1!=this.h&&this.video.remote.cancelWatchAvailability(this.h).catch(function(){}),Tk.prototype.release.call(this)},X("shaka.ui.RemoteButton",KR),ZR.prototype.create=function(e,t){return new KR(e,t)},gD("remote",new ZR),DM("remote",new ZR),b(JR,YD),X("shaka.ui.ResolutionSelection",JR),lO.prototype.create=function(e,t){return new JR(e,t)},gD("quality",new lO),DM("quality",new lO),b(uO,Tk),X("shaka.ui.RewindButton",uO),dO.prototype.create=function(e,t){return new uO(e,t)},DM("rewind",new dO),b(hO,Tk),X("shaka.ui.SaveVideoFrameButton",hO),gO.prototype.create=function(e,t){return new hO(e,t)},gD("save_video_frame",new gO),kk("save_video_frame",new gO),b(mO,Tk),X("shaka.ui.SkipNextButton",mO),bO.prototype.create=function(e,t){return new mO(e,t)},DM("skip_next",new bO),b(TO,Rk),X("shaka.ui.SmallPlayButton",TO),_O.prototype.create=function(e,t){return new TO(e,t)},DM("play_pause",new _O),b(wO,Tk),X("shaka.ui.Spacer",wO),SO.prototype.create=function(e,t){return new wO(e,t)},DM("spacer",new SO),b(EO,Tk),EO.prototype.release=function(){this.l.stop(),this.l=null,Tk.prototype.release.call(this)},X("shaka.ui.StatisticsButton",EO),kO.prototype.create=function(e,t){return new EO(e,t)},gD("statistics",new kO),kk("statistics",new kO),b(MO,YD),X("shaka.ui.TextSelection",MO),PO.prototype.create=function(e,t){return new MO(e,t)},gD("captions",new PO),DM("captions",new PO),b(UO,Tk),X("shaka.ui.ToggleStereoscopicButton",UO),FO.prototype.create=function(e,t){return new UO(e,t)},gD("toggle_stereoscopic",new FO),DM("toggle_stereoscopic",new FO),b(jO,Bk),jO.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()/100):(this.video.volume=this.getValue()/100,0<this.video.volume&&(this.video.muted=!1))},X("shaka.ui.VolumeBar",jO),WO.prototype.create=function(e,t){return new jO(e,t)},DM("volume",new WO)}.call(i,e,e,void 0),i.shaka)t[r]=i.shaka[r]}()},8919:function(e,t,n){var i=n(2281),r=e.exports={WebVTT:n(4252),VTTCue:n(4621),VTTRegion:n(2020)};i.vttjs=r,i.WebVTT=r.WebVTT;var s=r.VTTCue,a=r.VTTRegion,o=i.VTTCue,l=i.VTTRegion;r.shim=function(){i.VTTCue=s,i.VTTRegion=a},r.restore=function(){i.VTTCue=o,i.VTTRegion=l},i.VTTCue||r.shim()},8981:function(e,t,n){"use strict";var i=n(7750),r=Object;e.exports=function(e){return r(i(e))}},8982:function(e,t,n){"use strict";var i=n(8653).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES},9039:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},9143:function(e,t,n){"use strict";n.d(t,{j9:function(){return Z}});var i;n(4114),n(8111),n(7588);(function(e){e[e["QR_CODE"]=0]="QR_CODE",e[e["AZTEC"]=1]="AZTEC",e[e["CODABAR"]=2]="CODABAR",e[e["CODE_39"]=3]="CODE_39",e[e["CODE_93"]=4]="CODE_93",e[e["CODE_128"]=5]="CODE_128",e[e["DATA_MATRIX"]=6]="DATA_MATRIX",e[e["MAXICODE"]=7]="MAXICODE",e[e["ITF"]=8]="ITF",e[e["EAN_13"]=9]="EAN_13",e[e["EAN_8"]=10]="EAN_8",e[e["PDF_417"]=11]="PDF_417",e[e["RSS_14"]=12]="RSS_14",e[e["RSS_EXPANDED"]=13]="RSS_EXPANDED",e[e["UPC_A"]=14]="UPC_A",e[e["UPC_E"]=15]="UPC_E",e[e["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(i||(i={}));var r,s,a=new Map([[i.QR_CODE,"QR_CODE"],[i.AZTEC,"AZTEC"],[i.CODABAR,"CODABAR"],[i.CODE_39,"CODE_39"],[i.CODE_93,"CODE_93"],[i.CODE_128,"CODE_128"],[i.DATA_MATRIX,"DATA_MATRIX"],[i.MAXICODE,"MAXICODE"],[i.ITF,"ITF"],[i.EAN_13,"EAN_13"],[i.EAN_8,"EAN_8"],[i.PDF_417,"PDF_417"],[i.RSS_14,"RSS_14"],[i.RSS_EXPANDED,"RSS_EXPANDED"],[i.UPC_A,"UPC_A"],[i.UPC_E,"UPC_E"],[i.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function o(e){return Object.values(i).includes(e)}(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["URL"]=1]="URL"})(r||(r={})),function(e){e[e["SCAN_TYPE_CAMERA"]=0]="SCAN_TYPE_CAMERA",e[e["SCAN_TYPE_FILE"]=1]="SCAN_TYPE_FILE"}(s||(s={}));var l,u=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[s.SCAN_TYPE_CAMERA,s.SCAN_TYPE_FILE],e}(),c=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!a.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,a.get(t))},e}(),d=function(){function e(){}return e.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();(function(e){e[e["UNKWOWN_ERROR"]=0]="UNKWOWN_ERROR",e[e["IMPLEMENTATION_ERROR"]=1]="IMPLEMENTATION_ERROR",e[e["NO_CODE_FOUND_ERROR"]=2]="NO_CODE_FOUND_ERROR"})(l||(l={}));var h=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:l.UNKWOWN_ERROR}},e}(),p=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function f(e){return"undefined"===typeof e||null===e}function g(e,t,n){return e>n?n:e<t?t:e}var m,y=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),v=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),b=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),T=(n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],r=new Set(i),s=Object.keys(e),a=0,o=s;a<o.length;a++){var l=o[a];if(r.has(l))return t.logError("".concat(l," is not supported videoConstaints."),!0),!1}return!0},e}()),_=n(2710),w=function(){function e(e,t,n){if(this.formatMap=new Map([[i.QR_CODE,_.BarcodeFormat.QR_CODE],[i.AZTEC,_.BarcodeFormat.AZTEC],[i.CODABAR,_.BarcodeFormat.CODABAR],[i.CODE_39,_.BarcodeFormat.CODE_39],[i.CODE_93,_.BarcodeFormat.CODE_93],[i.CODE_128,_.BarcodeFormat.CODE_128],[i.DATA_MATRIX,_.BarcodeFormat.DATA_MATRIX],[i.MAXICODE,_.BarcodeFormat.MAXICODE],[i.ITF,_.BarcodeFormat.ITF],[i.EAN_13,_.BarcodeFormat.EAN_13],[i.EAN_8,_.BarcodeFormat.EAN_8],[i.PDF_417,_.BarcodeFormat.PDF_417],[i.RSS_14,_.BarcodeFormat.RSS_14],[i.RSS_EXPANDED,_.BarcodeFormat.RSS_EXPANDED],[i.UPC_A,_.BarcodeFormat.UPC_A],[i.UPC_E,_.BarcodeFormat.UPC_E],[i.UPC_EAN_EXTENSION,_.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),s=new Map;s.set(_.DecodeHintType.POSSIBLE_FORMATS,r),s.set(_.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,i){try{n(t.decode(e))}catch(r){i(r)}})},e.prototype.decode=function(e){var t=new _.MultiFormatReader(this.verbose,this.hints),n=new _.HTMLCanvasElementLuminanceSource(e),i=new _.BinaryBitmap(new _.HybridBinarizer(n)),r=t.decode(i);return{text:r.text,format:c.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,i){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.logError("".concat(r," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),S=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},E=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},A=function(){function e(t,n,r){if(this.formatMap=new Map([[i.QR_CODE,"qr_code"],[i.AZTEC,"aztec"],[i.CODABAR,"codabar"],[i.CODE_39,"code_39"],[i.CODE_93,"code_93"],[i.CODE_128,"code_128"],[i.DATA_MATRIX,"data_matrix"],[i.ITF,"itf"],[i.EAN_13,"ean_13"],[i.EAN_8,"ean_8"],[i.PDF_417,"pdf417"],[i.UPC_A,"upc_a"],[i.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return"undefined"!==typeof e},e.prototype.decodeAsync=function(e){return S(this,void 0,void 0,function(){var t,n;return E(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||0===t.length)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(t),[2,{text:n.rawValue,format:c.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,i=0,r=e;i<r.length;i++){var s=r[i],a=s.boundingBox.width*s.boundingBox.height;a>n&&(n=a,t=s)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.warn("".concat(r," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,i){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),C=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},I=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},x=function(){function e(e,t,n,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&A.isSupported()?(this.primaryDecoder=new A(e,n,i),this.secondaryDecoder=new w(e,n,i)):this.primaryDecoder=new w(e,n,i)}return e.prototype.decodeAsync=function(e){return C(this,void 0,void 0,function(){var t;return I(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return C(this,void 0,void 0,function(){var t,n;return I(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(n=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){var i=n[t];e+=i}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),k=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),M=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},D=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},R=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},e}(),O=function(e){function t(t,n){return e.call(this,t,n)||this}return k(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities(),t=e[this.name];return{min:t.min,max:t.max,step:t.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(R),N=function(e){function t(t){return e.call(this,"zoom",t)||this}return k(t,e),t}(O),L=function(e){function t(t){return e.call(this,"torch",t)||this}return k(t,e),t}(R),P=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new N(this.track)},e.prototype.torchFeature=function(){return new L(this.track)},e}(),U=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,r){return M(this,void 0,void 0,function(){var s,a;return D(this,function(o){switch(o.label){case 0:return s=new e(t,n,r),i.aspectRatio?(a={aspectRatio:i.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:o.sent(),o.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return M(this,void 0,void 0,function(){return D(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var i=e.mediaStream.getVideoTracks(),r=i.length,s=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++s,s>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new P(this.getFirstTrackOrFail())},e}(),B=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return M(this,void 0,void 0,function(){return D(this,function(i){return[2,U.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return M(this,void 0,void 0,function(){var n,i;return D(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=r.sent(),[2,new e(i)]}})})},e}(),F=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},j=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},V=function(){function e(){}return e.failIfNotSupported=function(){return F(this,void 0,void 0,function(){return j(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return F(this,void 0,void 0,function(){return j(this,function(t){return[2,B.create(e)]})})},e}(),H=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},z=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},G=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=y.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=y.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return H(this,void 0,void 0,function(){var e,t,n,i,r,s,a;return z(this,function(o){switch(o.label){case 0:return e=function(e){for(var t=e.getVideoTracks(),n=0,i=t;n<i.length;n++){var r=i[n];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=o.sent(),i=[],r=0,s=n;r<s.length;r++)a=s[r],"videoinput"===a.kind&&i.push({id:a.deviceId,label:a.label});return e(t),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var n=function(t){for(var n=[],i=0,r=t;i<r.length;i++){var s=r[i];"video"===s.kind&&n.push({id:s.id,label:s.label})}e(n)},i=MediaStreamTrack;i.getSources(n)})},e}();(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["NOT_STARTED"]=1]="NOT_STARTED",e[e["SCANNING"]=2]="SCANNING",e[e["PAUSED"]=3]="PAUSED"})(m||(m={}));var q,W=function(){function e(){this.state=m.NOT_STARTED,this.onGoingTransactionNewState=m.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===m.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=m.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===m.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=m.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==m.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case m.UNKNOWN:throw"Transition from unknown is not allowed";case m.NOT_STARTED:this.failIfNewStateIs(e,[m.PAUSED]);break;case m.SCANNING:break;case m.PAUSED:break}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e===r)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),X=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===m.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==m.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===m.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===m.PAUSED},e}(),K=function(){function e(){}return e.create=function(){return new X(new W)},e}(),Y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(u),Q=function(){function e(e,t){this.logger=t,this.fps=$.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=$.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?T.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!f(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Z=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new p(this.verbose),this.qrcode=new x(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=K.create()}return e.prototype.start=function(e,t,n,i){var r,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";r=i||(this.verbose?this.logger.log:function(){});var a=Q.create(t,this.logger);this.clearElement();var o=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?o=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=o,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:$.DEFAULT_WIDTH;u.style.position="relative",this.shouldScan=!0,this.element=u;var c=this,d=this.stateManagerProxy.startTransition(m.SCANNING);return new Promise(function(t,i){var o=l?a.videoConstraints:c.createVideoConstraints(e);if(!o)return d.cancel(),void i("videoConstraints should be defined");var u={};l&&!a.aspectRatio||(u.aspectRatio=a.aspectRatio);var h={onRenderSurfaceReady:function(e,t){c.setupUi(e,t,a),c.isScanning=!0,c.foreverScan(a,n,r)}};V.failIfNotSupported().then(function(e){e.create(o).then(function(e){return e.render(s.element,u,h).then(function(e){c.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),i(e)})}).catch(function(e){d.cancel(),i(y.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),i(y.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(m.PAUSED),this.showPausedState(),(f(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(m.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(m.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var t=document.getElementById($.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),n(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(f(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,r){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,a=s.height,o=document.getElementById(n.elementId),l=o.clientWidth?o.clientWidth:$.DEFAULT_WIDTH,u=Math.max(o.clientHeight?o.clientHeight:a,$.FILE_SCAN_MIN_HEIGHT),c=n.computeCanvasDrawConfig(e,a,l,u);if(t){var h=n.createCanvasElement(l,u,"qr-canvas-visible");h.style.display="inline-block",o.appendChild(h);var p=h.getContext("2d");if(!p)throw"Unable to get 2d context from canvas";p.canvas.width=l,p.canvas.height=u,p.drawImage(s,0,0,e,a,c.x,c.y,c.width,c.height)}var f=$.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(s.width,c.width),m=Math.max(s.height,c.height),y=g+2*f,v=m+2*f,b=n.createCanvasElement(y,v);o.appendChild(b);var T=b.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=y,T.canvas.height=v,T.drawImage(s,0,0,e,a,f,f,g,m);try{n.qrcode.decodeRobustlyAsync(b).then(function(e){i(d.createFromQrcodeResult(e))}).catch(r)}catch(_){r("QR code parse error, error = ".concat(_))}},s.onerror=r,s.onabort=r,s.onstalled=r,s.onsuspend=r,s.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return G.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!T.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[i.QR_CODE,i.AZTEC,i.CODABAR,i.CODE_39,i.CODE_93,i.CODE_128,i.DATA_MATRIX,i.MAXICODE,i.ITF,i.EAN_13,i.EAN_8,i.PDF_417,i.RSS_14,i.RSS_EXPANDED,i.UPC_A,i.UPC_E,i.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,s=e.formatsToSupport;r<s.length;r++){var a=s[r];o(a)?n.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(f(e))return!0;if(!f(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(f(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!f(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var i=this,r=n.qrbox;this.validateQrboxConfig(r);var s=this.toQrdimensions(e,t,r),a=function(e){if(e<$.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat($.MIN_QR_BOX_SIZE,"px.")},o=function(t){return t>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),t=e),t};a(s.width),a(s.height),s.width=o(s.width)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var i=f(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(i);var r=this.toQrdimensions(e,t,i);r.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&r.height<=t,a={x:0,y:0,width:e,height:t},o=s?this.getShadedRegionBounds(e,t,r):a,l=this.createCanvasElement(o.width,o.height),u={willReadFrequently:!0},c=l.getContext("2d",u);c.canvas.width=o.width,c.canvas.height=o.height,this.element.append(l),s&&this.possiblyInsertShadingElement(this.element,e,t,r),this.createScannerPausedUiElement(this.element),this.qrRegion=o,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=y.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,d.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var i=y.codeParseError(e);return t(i,h.createFrom(i)),!1})},e.prototype.foreverScan=function(e,t,n){var i=this;if(this.shouldScan&&this.renderedCamera){var r=this.renderedCamera.getSurface(),s=r.videoWidth/r.clientWidth,a=r.videoHeight/r.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var o=this.qrRegion.width*s,l=this.qrRegion.height*a,u=this.qrRegion.x*s,c=this.qrRegion.y*a;this.context.drawImage(r,u,c,o,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,t,n)},i.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(r){r||!0===e.disableFlip?d():(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,n).finally(function(){d()}))}).catch(function(e){i.logger.logError("Error happend while scanning context",e),d()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",i={user:!0,environment:!0},r="exact",s=function(e){if(e in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var o=Object.keys(e)[0];if(o!==t&&o!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(o!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(r in l)return{deviceId:{exact:l["".concat(r)]}};throw"'deviceId' should be string or object with"+" ".concat(r," as key.")}var u=typeof l;throw"Invalid type of 'deviceId' = ".concat(u)}var c=e.facingMode;if("string"==typeof c){if(s(c))return{facingMode:c}}else{if("object"!=typeof c){var d=typeof c;throw"Invalid type of 'facingMode' = ".concat(d)}if(!(r in c))throw"'facingMode' should be string or object with"+" ".concat(r," as key.");if(s(c["".concat(r)]))return{facingMode:{exact:c["".concat(r)]}}}}var h=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(h)},e.prototype.computeCanvasDrawConfig=function(e,t,n,i){if(e<=n&&t<=i){var r=(n-e)/2,s=(i-t)/2;return{x:r,y:s,width:e,height:t}}var a=e,o=t;return e>n&&(t*=n/e,e=n),t>i&&(e*=i/t,t=i),this.logger.log("Image downsampled from "+"".concat(a,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,i)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?$.BORDER_SHADER_MATCH_COLOR:$.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var i=e,r=t,s=document.createElement("canvas");return s.style.width="".concat(i,"px"),s.style.height="".concat(r,"px"),s.style.display="none",s.id=f(n)?"qr-canvas":n,s},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,i){if(!(t-i.width<1||n-i.height<1)){var r=document.createElement("div");r.style.position="absolute";var s=(t-i.width)/2,a=(n-i.height)/2;if(r.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),r.style.boxSizing="border-box",r.style.top="0px",r.style.bottom="0px",r.style.left="0px",r.style.right="0px",r.id="".concat($.SHADED_REGION_ELEMENT_ID),t-i.width<11||n-i.height<11)this.hasBorderShaders=!1;else{var o=5,l=40;this.insertShaderBorders(r,l,o,-o,null,0,!0),this.insertShaderBorders(r,l,o,-o,null,0,!1),this.insertShaderBorders(r,l,o,null,-o,0,!0),this.insertShaderBorders(r,l,o,null,-o,0,!1),this.insertShaderBorders(r,o,l+o,-o,null,-o,!0),this.insertShaderBorders(r,o,l+o,null,-o,-o,!0),this.insertShaderBorders(r,o,l+o,-o,null,-o,!1),this.insertShaderBorders(r,o,l+o,null,-o,-o,!1),this.hasBorderShaders=!0}e.append(r)}},e.prototype.insertShaderBorders=function(e,t,n,i,r,s,a){var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=$.BORDER_SHADER_DEFAULT_COLOR,o.style.width="".concat(t,"px"),o.style.height="".concat(n,"px"),null!==i&&(o.style.top="".concat(i,"px")),null!==r&&(o.style.bottom="".concat(r,"px")),a?o.style.left="".concat(s,"px"):o.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(o),e.appendChild(o)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),J="data:image/svg+xml;base64,",ee=J+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",te=J+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",ne=J+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",re=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),se=function(){function e(){this.data=re.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=re.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),ae=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=b.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(i);var r=document.createElement("a");r.innerText=b.reportIssues(),r.href="https://github.com/mebjas/html5-qrcode/issues",r.target="new",r.style.color="white",this.infoDiv.appendChild(r),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),oe=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=ne,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ie,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=ne,this.infoIcon.style.opacity="0.6")},e}(),le=function(){function e(){var e=this;this.infoDiv=new ae,this.infoIcon=new oe(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),ue=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},ce=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},de=function(){function e(){}return e.hasPermissions=function(){return ue(this,void 0,void 0,function(){var e,t,n,i;return ce(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)if(i=n[t],"videoinput"===i.kind&&i.label)return[2,!0];return[2,!1]}})})},e}(),he=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(e){return e===s.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===s.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return u.DEFAULT_SUPPORTED_SCAN_TYPE;var t=u.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,i=e;n<i.length;n++){var r=i[n];if(!u.DEFAULT_SUPPORTED_SCAN_TYPE.includes(r))throw"Unsupported scan type ".concat(r)}return e},e}(),pe=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),fe=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(pe.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),ge=function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function a(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?n(e.value):r(e.value).then(a,o)}l((i=i.apply(e,t||[])).next())})},me=function(e,t){var n,i,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(a=0)),a)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ye=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return ge(this,void 0,void 0,function(){var e,t;return me(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?v.torchOffButton():v.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?v.torchOnFailedMessage():v.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),ve=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=fe.createElement("button",pe.TORCH_BUTTON_ID),this.torchController=new ye(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=v.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var i=this;this.torchButton.addEventListener("click",function(e){return ge(n,void 0,void 0,function(){return me(this,function(e){switch(e.label){case 0:return[4,i.torchController.flipState()];case 1:return e.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(pe.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(pe.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(pe.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(pe.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new ye(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=v.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,r){var s=new e(n,r);return s.render(t,i),s},e}(),be=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=fe.createElement("button",pe.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=fe.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var r=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var i=t.files,s=i[0],a=s.name;r.setImageNameToButton(a),n(s)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(e){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),r.fileBasedScanRegion.style.border=r.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var i=t.files;if(!i||0===i.length)return;for(var a=!1,o=0;o<i.length;++o){var l=i.item(o);if(l){var u=/image.*/;if(l.type.match(u)){a=!0;var c=l.name;r.setImageNameToButton(c),n(l),s.innerText=v.dragAndDropMessage();break}}}a||(s.innerText=v.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=v.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){var t=20;if(e.length>t){var n=e.substring(0,8),i=e.length,r=e.substring(i-8,i);e="".concat(n,"....").concat(r)}var s=v.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=s},e.prototype.setInitialValueToButton=function(){var e=v.fileSelectionChooseImage()+" - "+v.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var r=new e(t,n,i);return r},e}(),Te=function(){function e(e){this.selectElement=fe.createElement("select",pe.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var i=v.selectCamera();t.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var r=1,s=0,a=this.cameras;s<a.length;s++){var o=a[s],l=o.id,u=null==o.label?l:o.label;u&&""!==u||(u=[v.anonymousCameraPrefix(),r++].join(" "));var c=document.createElement("option");c.value=l,c.innerText=u,this.options.push(c),this.selectElement.appendChild(c)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){var i=n[t];if(i.value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),_e=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=fe.createElement("input",pe.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=v.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=v.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,i){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}();function we(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function Se(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(function(e){e[e["STATUS_DEFAULT"]=0]="STATUS_DEFAULT",e[e["STATUS_SUCCESS"]=1]="STATUS_SUCCESS",e[e["STATUS_WARNING"]=2]="STATUS_WARNING",e[e["STATUS_REQUESTING_PERMISSION"]=3]="STATUS_REQUESTING_PERMISSION"})(q||(q={}));(function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new he(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new p(this.verbose),this.persistedDataManager=new se,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,i){if(e)e(t,i);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(v.lastMatch(t),q.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Z(this.getScanRegionId(),Se(this.config,this.verbose))},e.prototype.pause=function(e){(f(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,i){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(i){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),i(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=u.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!u.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=u.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=u.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:u.SCAN_DEFAULT_FPS,rememberLastUsedCamera:u.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:u.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),he.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),r=this.getDashboardId();i.id=r,i.style.width="100%",e.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t);var n=new le;n.renderInto(t);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",t.appendChild(i)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(v.cameraPermissionRequesting());var r=function(){n||i.createPermissionButton(e,t)};Z.getCameras().then(function(n){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),i.renderCameraSelection(n)):(i.setHeaderMessage(v.noCameraFound(),q.STATUS_WARNING),r())}).catch(function(e){i.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:r(),i.setHeaderMessage(e,q.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,i=fe.createElement("button",this.getCameraPermissionButtonId());i.innerText=v.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,n.createCameraListUi(e,t,i)}),t.appendChild(i)},e.prototype.createPermissionsUi=function(e,t){var n=this;he.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?de.hasPermissions().then(function(i){i?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(i){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=he.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var i=document.createElement("div");i.style.textAlign="center",n.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,i),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=he.isFileScanType(this.currentScanType),n=this,i=function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";he.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(v.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,q.STATUS_WARNING),n.qrCodeErrorCallback(e,h.createFrom(e))}))};this.fileSelectionUi=be.create(e,t,i)},e.prototype.renderCameraSelection=function(e){var t=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var r=_e.create(i,!1),s=function(e){var n=e.zoomFeature();if(n.isSupported()){r.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var i=1;t.config.defaultZoomValueIfSupported&&(i=t.config.defaultZoomValueIfSupported),i=g(i,n.min(),n.max()),r.setValues(n.min(),n.max(),i,n.step()),r.show()}},a=Te.create(i,e),o=document.createElement("span"),l=fe.createElement("button",pe.CAMERA_START_BUTTON_ID);l.innerText=v.scanButtonStartScanningText(),o.appendChild(l);var u,c=fe.createElement("button",pe.CAMERA_STOP_BUTTON_ID);c.innerText=v.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,o.appendChild(c);var d=function(e){e.torchFeature().isSupported()?(u?u.updateTorchCapability(e.torchFeature()):u=ve.create(o,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,q.STATUS_WARNING)}),u.show()):u&&u.hide()};i.appendChild(o);var h=function(e){e||(l.style.display="none"),l.innerText=v.scanButtonStartScanningText(),l.style.opacity="1",l.disabled=!1,e&&(l.style.display="inline-block")};if(l.addEventListener("click",function(e){l.innerText=v.scanButtonScanningStarting(),a.disable(),l.disabled=!0,l.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var i=a.getValue();n.persistedDataManager.setLastUsedCameraId(i),n.html5Qrcode.start(i,we(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",h(!1);var i=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&d(i),!0===t.config.showZoomSliderIfSupported&&s(i)}).catch(function(e){n.showHideScanTypeSwapLink(!0),a.enable(),h(!0),n.setHeaderMessage(e,q.STATUS_WARNING)})}),a.hasSingleItem()&&l.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),a.enable(),l.disabled=!1,c.style.display="none",l.style.display="inline-block",u&&(u.reset(),u.hide()),r.removeOnCameraZoomValueChangeCallback(),r.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,q.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var p=n.persistedDataManager.getLastUsedCameraId();a.hasValue(p)?(a.setValue(p),l.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=v.textIfCameraScanSelected(),n=v.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");r.style.textAlign="center";var a=fe.createElement("span",this.getDashboardSectionSwapLinkId());a.style.textDecoration="underline",a.style.cursor="pointer",a.innerText=he.isCameraScanType(this.currentScanType)?t:n,a.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,he.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),a.innerText=n,e.currentScanType=s.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),a.innerText=t,e.currentScanType=s.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),r.appendChild(a),i.appendChild(r)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&de.hasPermissions().then(function(n){if(n){var i=document.getElementById(t.getCameraPermissionButtonId());if(!i)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=q.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case q.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case q.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case q.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=ee,this.cameraScanImage.alt=v.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=te,this.fileScanImage.alt=v.fileScanAltText()},e.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return pe.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return pe.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}})()},9225:function(e,t,n){"use strict";var i,r,s,a,o=n(4576),l=n(8745),u=n(6080),c=n(4901),d=n(9297),h=n(9039),p=n(397),f=n(7680),g=n(4055),m=n(2812),y=n(9544),v=n(6193),b=o.setImmediate,T=o.clearImmediate,_=o.process,w=o.Dispatch,S=o.Function,E=o.MessageChannel,A=o.String,C=0,I={},x="onreadystatechange";h(function(){i=o.location});var k=function(e){if(d(I,e)){var t=I[e];delete I[e],t()}},M=function(e){return function(){k(e)}},D=function(e){k(e.data)},R=function(e){o.postMessage(A(e),i.protocol+"//"+i.host)};b&&T||(b=function(e){m(arguments.length,1);var t=c(e)?e:S(e),n=f(arguments,1);return I[++C]=function(){l(t,void 0,n)},r(C),C},T=function(e){delete I[e]},v?r=function(e){_.nextTick(M(e))}:w&&w.now?r=function(e){w.now(M(e))}:E&&!y?(s=new E,a=s.port2,s.port1.onmessage=D,r=u(a.postMessage,a)):o.addEventListener&&c(o.postMessage)&&!o.importScripts&&i&&"file:"!==i.protocol&&!h(R)?(r=R,o.addEventListener("message",D,!1)):r=x in g("script")?function(e){p.appendChild(g("script"))[x]=function(){p.removeChild(this),k(e)}}:function(e){setTimeout(M(e),0)}),e.exports={set:b,clear:T}},9286:function(e,t,n){"use strict";var i=n(4402),r=n(8469),s=i.Set,a=i.add;e.exports=function(e){var t=new s;return r(e,function(e){a(t,e)}),t}},9297:function(e,t,n){"use strict";var i=n(9504),r=n(8981),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},9306:function(e,t,n){"use strict";var i=n(4901),r=n(6823),s=TypeError;e.exports=function(e){if(i(e))return e;throw new s(r(e)+" is not a function")}},9309:function(e,t,n){"use strict";var i=n(6518),r=n(4576),s=n(9225).set,a=n(9472),o=r.setImmediate?a(s,!1):s;i({global:!0,bind:!0,enumerable:!0,forced:r.setImmediate!==o},{setImmediate:o})},9433:function(e,t,n){"use strict";var i=n(4576),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},9462:function(e,t,n){"use strict";var i=n(9565),r=n(2360),s=n(6699),a=n(6279),o=n(8227),l=n(1181),u=n(5966),c=n(7657).IteratorPrototype,d=n(2529),h=n(9539),p=n(1385),f=o("toStringTag"),g="IteratorHelper",m="WrapForValidIterator",y="normal",v="throw",b=l.set,T=function(e){var t=l.getterFor(e?m:g);return a(r(c),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return d(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:d(i,n.done)}catch(r){throw n.done=!0,r}},return:function(){var n=t(this),r=n.iterator;if(n.done=!0,e){var s=u(r,"return");return s?i(s,r):d(void 0,!0)}if(n.inner)try{h(n.inner.iterator,y)}catch(a){return h(r,v,a)}if(n.openIters)try{p(n.openIters,y)}catch(a){return h(r,v,a)}return r&&h(r,y),d(void 0,!0)}})},_=T(!0),w=T(!1);s(w,f,"Iterator Helper"),e.exports=function(e,t,n){var i=function(i,r){r?(r.iterator=i.iterator,r.next=i.next):r=i,r.type=t?m:g,r.returnHandlerResult=!!n,r.nextHandler=e,r.counter=0,r.done=!1,b(this,r)};return i.prototype=t?_:w,i}},9472:function(e,t,n){"use strict";var i=n(4576),r=n(8745),s=n(4901),a=n(4215),o=n(2839),l=n(7680),u=n(2812),c=i.Function,d=/MSIE .\./.test(o)||"BUN"===a&&function(){var e=i.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}();e.exports=function(e,t){var n=t?2:1;return d?function(i,a){var o=u(arguments.length,1)>n,d=s(i)?i:c(i),h=o?l(arguments,n):[],p=o?function(){r(d,this,h)}:d;return t?e(p,a):e(p)}:e}},9504:function(e,t,n){"use strict";var i=n(616),r=Function.prototype,s=r.call,a=i&&r.bind.bind(s,s);e.exports=i?a:function(e){return function(){return s.apply(e,arguments)}}},9519:function(e,t,n){"use strict";var i,r,s=n(4576),a=n(2839),o=s.process,l=s.Deno,u=o&&o.versions||l&&l.version,c=u&&u.v8;c&&(i=c.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&(i=a.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),e.exports=r},9539:function(e,t,n){"use strict";var i=n(9565),r=n(8551),s=n(5966);e.exports=function(e,t,n){var a,o;r(e);try{if(a=s(e,"return"),!a){if("throw"===t)throw n;return n}a=i(a,e)}catch(l){o=!0,a=l}if("throw"===t)throw n;if(o)throw a;return r(a),n}},9544:function(e,t,n){"use strict";var i=n(2839);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},9553:function(e){e.exports=n;var t=Object.prototype.toString;function n(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"===typeof e&&"[object RegExp]"!==n||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},9565:function(e,t,n){"use strict";var i=n(616),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},9577:function(e,t,n){"use strict";var i=n(9928),r=n(4644),s=n(1108),a=n(1291),o=n(5854),l=r.aTypedArray,u=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,d=function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}(),h=d&&function(){try{new Int8Array(1)["with"](-.5,1)}catch(e){return!0}}();c("with",{with:function(e,t){var n=l(this),r=a(e),c=s(n)?o(t):+t;return i(n,u(n),r,c)}}["with"],!d||h)},9617:function(e,t,n){"use strict";var i=n(5397),r=n(5610),s=n(6198),a=function(e){return function(t,n,a){var o=i(t),l=s(o);if(0===l)return!e&&-1;var u,c=r(a,l);if(e&&n!==n){while(l>c)if(u=o[c++],u!==u)return!0}else for(;l>c;c++)if((e||c in o)&&o[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9835:function(e){"use strict";e.exports=function(e){try{var t=new Set,n={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}},i=t[e](n);return 1!==i.size||4!==i.values().next().value}catch(r){return!1}}},9848:function(e,t,n){"use strict";n(6368),n(9309)},9928:function(e,t,n){"use strict";var i=n(6198),r=n(1291),s=RangeError;e.exports=function(e,t,n,a){var o=i(e),l=r(n),u=l<0?o+l:l;if(u>=o||u<0)throw new s("Incorrect index");for(var c=new t(o),d=0;d<o;d++)c[d]=d===u?a:e[d];return c}}}]);
//# sourceMappingURL=chunk-vendors.d5a4f6d6.js.map