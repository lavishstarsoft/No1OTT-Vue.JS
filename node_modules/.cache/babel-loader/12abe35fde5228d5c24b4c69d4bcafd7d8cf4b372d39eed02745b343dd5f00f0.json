{"ast":null,"code":"// Popup Manager Utility\nclass PopupManager {\n  constructor() {\n    this.config = null;\n    this.isLoaded = false;\n  }\n\n  // Load popup configuration from JSON file\n  async loadConfig() {\n    try {\n      const response = await fetch('/popup-config.json');\n      if (response.ok) {\n        this.config = await response.json();\n        this.isLoaded = true;\n        console.log('Popup config loaded successfully:', this.config);\n        return this.config;\n      } else {\n        console.warn('Failed to load popup config:', response.status);\n        return this.getDefaultConfig();\n      }\n    } catch (error) {\n      console.error('Error loading popup config:', error);\n      return this.getDefaultConfig();\n    }\n  }\n\n  // Get default configuration\n  getDefaultConfig() {\n    return {\n      showPopup: true,\n      popupContent: {\n        title: 'Welcome to OTT Platform!',\n        message: 'Enjoy unlimited streaming of your favorite movies and TV shows.',\n        imageUrl: '/images/placeholder.png',\n        buttonText: 'Get Started',\n        closeButtonText: 'Close'\n      },\n      popupSettings: {\n        autoShow: true,\n        showOnLoad: true,\n        delay: 2000,\n        dismissible: true\n      }\n    };\n  }\n\n  // Check if popup should be shown\n  shouldShowPopup() {\n    if (!this.config) return false;\n\n    // Check if popup is enabled\n    if (!this.config.showPopup) return false;\n\n    // Check if popup should show on load\n    if (!this.config.popupSettings?.showOnLoad) return false;\n\n    // Check device type\n    if (!this.shouldShowOnCurrentDevice()) return false;\n\n    // Check if popup has already been shown\n    const popupShown = localStorage.getItem('popupShown');\n    if (popupShown === 'true') return false;\n    return true;\n  }\n\n  // Check if popup should show on current device\n  shouldShowOnCurrentDevice() {\n    const deviceType = this.config?.popupSettings?.deviceType;\n    if (!deviceType) return true; // If no device type specified, show on all devices\n\n    const isMobile = this.isMobileDevice();\n    switch (deviceType.toLowerCase()) {\n      case 'desktop':\n        return !isMobile;\n      case 'mobile':\n        return isMobile;\n      case 'all':\n        return true;\n      default:\n        return true;\n    }\n  }\n\n  // Detect if current device is mobile\n  isMobileDevice() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;\n  }\n\n  // Get popup delay\n  getPopupDelay() {\n    return this.config?.popupSettings?.delay || 0;\n  }\n\n  // Mark popup as shown\n  markPopupAsShown() {\n    localStorage.setItem('popupShown', 'true');\n  }\n\n  // Reset popup state (for testing)\n  resetPopupState() {\n    localStorage.removeItem('popupShown');\n  }\n\n  // Update popup configuration\n  updateConfig(newConfig) {\n    this.config = {\n      ...this.config,\n      ...newConfig\n    };\n  }\n\n  // Get current configuration\n  getConfig() {\n    return this.config;\n  }\n\n  // Check if popup is dismissible\n  isDismissible() {\n    return this.config?.popupSettings?.dismissible ?? true;\n  }\n\n  // Get popup content\n  getPopupContent() {\n    return this.config?.popupContent || {};\n  }\n\n  // Get popup settings\n  getPopupSettings() {\n    return this.config?.popupSettings || {};\n  }\n}\n\n// Create singleton instance\nconst popupManager = new PopupManager();\nexport default popupManager;","map":{"version":3,"names":["PopupManager","constructor","config","isLoaded","loadConfig","response","fetch","ok","json","console","log","warn","status","getDefaultConfig","error","showPopup","popupContent","title","message","imageUrl","buttonText","closeButtonText","popupSettings","autoShow","showOnLoad","delay","dismissible","shouldShowPopup","shouldShowOnCurrentDevice","popupShown","localStorage","getItem","deviceType","isMobile","isMobileDevice","toLowerCase","test","navigator","userAgent","window","innerWidth","getPopupDelay","markPopupAsShown","setItem","resetPopupState","removeItem","updateConfig","newConfig","getConfig","isDismissible","getPopupContent","getPopupSettings","popupManager"],"sources":["D:/OTT/ott_frontend/src/utils/popupManager.js"],"sourcesContent":["// Popup Manager Utility\nclass PopupManager {\n  constructor() {\n    this.config = null;\n    this.isLoaded = false;\n  }\n\n  // Load popup configuration from JSON file\n  async loadConfig() {\n    try {\n      const response = await fetch('/popup-config.json');\n      if (response.ok) {\n        this.config = await response.json();\n        this.isLoaded = true;\n        console.log('Popup config loaded successfully:', this.config);\n        return this.config;\n      } else {\n        console.warn('Failed to load popup config:', response.status);\n        return this.getDefaultConfig();\n      }\n    } catch (error) {\n      console.error('Error loading popup config:', error);\n      return this.getDefaultConfig();\n    }\n  }\n\n  // Get default configuration\n  getDefaultConfig() {\n    return {\n      showPopup: true,\n      popupContent: {\n        title: 'Welcome to OTT Platform!',\n        message: 'Enjoy unlimited streaming of your favorite movies and TV shows.',\n        imageUrl: '/images/placeholder.png',\n        buttonText: 'Get Started',\n        closeButtonText: 'Close'\n      },\n      popupSettings: {\n        autoShow: true,\n        showOnLoad: true,\n        delay: 2000,\n        dismissible: true\n      }\n    };\n  }\n\n  // Check if popup should be shown\n  shouldShowPopup() {\n    if (!this.config) return false;\n    \n    // Check if popup is enabled\n    if (!this.config.showPopup) return false;\n    \n    // Check if popup should show on load\n    if (!this.config.popupSettings?.showOnLoad) return false;\n    \n    // Check device type\n    if (!this.shouldShowOnCurrentDevice()) return false;\n    \n    // Check if popup has already been shown\n    const popupShown = localStorage.getItem('popupShown');\n    if (popupShown === 'true') return false;\n    \n    return true;\n  }\n\n  // Check if popup should show on current device\n  shouldShowOnCurrentDevice() {\n    const deviceType = this.config?.popupSettings?.deviceType;\n    \n    if (!deviceType) return true; // If no device type specified, show on all devices\n    \n    const isMobile = this.isMobileDevice();\n    \n    switch (deviceType.toLowerCase()) {\n      case 'desktop':\n        return !isMobile;\n      case 'mobile':\n        return isMobile;\n      case 'all':\n        return true;\n      default:\n        return true;\n    }\n  }\n\n  // Detect if current device is mobile\n  isMobileDevice() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n           window.innerWidth <= 768;\n  }\n\n  // Get popup delay\n  getPopupDelay() {\n    return this.config?.popupSettings?.delay || 0;\n  }\n\n  // Mark popup as shown\n  markPopupAsShown() {\n    localStorage.setItem('popupShown', 'true');\n  }\n\n  // Reset popup state (for testing)\n  resetPopupState() {\n    localStorage.removeItem('popupShown');\n  }\n\n  // Update popup configuration\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  // Get current configuration\n  getConfig() {\n    return this.config;\n  }\n\n  // Check if popup is dismissible\n  isDismissible() {\n    return this.config?.popupSettings?.dismissible ?? true;\n  }\n\n  // Get popup content\n  getPopupContent() {\n    return this.config?.popupContent || {};\n  }\n\n  // Get popup settings\n  getPopupSettings() {\n    return this.config?.popupSettings || {};\n  }\n}\n\n// Create singleton instance\nconst popupManager = new PopupManager();\n\nexport default popupManager; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}