{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-[#121212] text-white py-6\"\n};\nconst _hoisted_2 = {\n  class: \"w-full px-2 md:px-4\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center mb-8 relative px-2 md:px-6\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"flex justify-center items-center py-8\"\n};\nconst _hoisted_5 = {\n  class: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"col-span-full flex flex-col items-center justify-center py-16\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  class: \"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2\"\n};\nconst _hoisted_9 = [\"src\", \"alt\"];\nconst _hoisted_10 = {\n  class: \"absolute top-1 left-1 flex gap-1\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded\"\n};\nconst _hoisted_12 = {\n  class: \"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white\"\n};\nconst _hoisted_13 = {\n  class: \"px-1\"\n};\nconst _hoisted_14 = {\n  class: \"text-sm font-medium mb-0.5 line-clamp-2\"\n};\nconst _hoisted_15 = {\n  key: 2,\n  class: \"mt-6 text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Back Button and Header \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.back()),\n    class: \"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10\"\n  }, _cache[2] || (_cache[2] = [_createElementVNode(\"i\", {\n    class: \"fas fa-arrow-left text-2xl\"\n  }, null, -1 /* HOISTED */)])), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"w-full text-center\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-3xl font-bold relative inline-block px-4\"\n  }, [_createTextVNode(\" Free Videos \"), _createElementVNode(\"div\", {\n    class: \"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-green-500 to-green-800\"\n  })])], -1 /* HOISTED */))]), _createCommentVNode(\" Loading State \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _cache[4] || (_cache[4] = [_createElementVNode(\"div\", {\n    class: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"\n  }, null, -1 /* HOISTED */)]))) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Videos Grid \"), _createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" Show Coming Soon message if no videos \"), $setup.freeVideos.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[5] || (_cache[5] = [_createElementVNode(\"i\", {\n    class: \"fas fa-play-circle text-6xl text-gray-600 mb-4\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-gray-400 mb-2\"\n  }, \"No Free Videos\", -1 /* HOISTED */), _createElementVNode(\"p\", {\n    class: \"text-gray-500 text-center\"\n  }, \"Free videos will be available soon.\", -1 /* HOISTED */)]))) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Show videos if available \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.freeVideos, video => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: video.id,\n      class: \"cursor-pointer group transform hover:scale-105 transition-transform duration-200\",\n      onClick: $event => $setup.playVideo(video)\n    }, [_createCommentVNode(\" 16:9 Aspect Ratio Container \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"img\", {\n      src: video.thumbnail_url,\n      alt: video.title,\n      class: \"w-full h-full object-cover\"\n    }, null, 8 /* PROPS */, _hoisted_9), _createCommentVNode(\" Video badges \"), _createElementVNode(\"div\", _hoisted_10, [$setup.isNewVideo(video.created_at) ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \" NEW \")) : _createCommentVNode(\"v-if\", true), _cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n      class: \"bg-green-600 text-white text-[10px] px-1.5 py-0.5 rounded\"\n    }, \" FREE \", -1 /* HOISTED */))]), _createCommentVNode(\" Duration badge \"), _createElementVNode(\"div\", _hoisted_12, _toDisplayString($setup.formatDuration(video.duration)), 1 /* TEXT */), _createCommentVNode(\" Play button overlay \"), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n      class: \"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\"\n    }, [_createElementVNode(\"div\", {\n      class: \"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\"\n    }, [_createElementVNode(\"i\", {\n      class: \"fas fa-play text-sm text-white\"\n    })])], -1 /* HOISTED */))]), _createCommentVNode(\" Video Info \"), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"h3\", _hoisted_14, _toDisplayString(video.title), 1 /* TEXT */)])], 8 /* PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" Load More Button \"), $setup.hasMoreVideos ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.loadMoreVideos && $setup.loadMoreVideos(...args)),\n    class: \"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm\"\n  }, \" Load More \")])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","onClick","_cache","$event","_ctx","$router","back","$setup","loading","_hoisted_4","_Fragment","key","_hoisted_5","freeVideos","length","_hoisted_6","_renderList","video","id","playVideo","_hoisted_8","src","thumbnail_url","alt","title","_hoisted_10","isNewVideo","created_at","_hoisted_11","_hoisted_12","_toDisplayString","formatDuration","duration","_hoisted_13","_hoisted_14","hasMoreVideos","_hoisted_15","args","loadMoreVideos"],"sources":["D:\\OTT\\ott_frontend\\src\\views\\FreeVideos.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-[#121212] text-white py-6\">\r\n    <div class=\"w-full px-2 md:px-4\">\r\n      <!-- Back Button and Header -->\r\n      <div class=\"flex items-center mb-8 relative px-2 md:px-6\">\r\n        <button \r\n          @click=\"$router.back()\" \r\n          class=\"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10\"\r\n        >\r\n          <i class=\"fas fa-arrow-left text-2xl\"></i>\r\n        </button>\r\n        <div class=\"w-full text-center\">\r\n          <h1 class=\"text-3xl font-bold relative inline-block px-4\">\r\n            Free Videos\r\n            <div class=\"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-green-500 to-green-800\"></div>\r\n          </h1>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"flex justify-center items-center py-8\">\r\n        <div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"></div>\r\n      </div>\r\n\r\n      <!-- Videos Grid -->\r\n      <div v-else class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0\">\r\n        <!-- Show Coming Soon message if no videos -->\r\n        <div v-if=\"freeVideos.length === 0\" class=\"col-span-full flex flex-col items-center justify-center py-16\">\r\n          <i class=\"fas fa-play-circle text-6xl text-gray-600 mb-4\"></i>\r\n          <h2 class=\"text-2xl font-bold text-gray-400 mb-2\">No Free Videos</h2>\r\n          <p class=\"text-gray-500 text-center\">Free videos will be available soon.</p>\r\n        </div>\r\n        \r\n        <!-- Show videos if available -->\r\n        <div \r\n          v-else\r\n          v-for=\"video in freeVideos\" \r\n          :key=\"video.id\"\r\n          class=\"cursor-pointer group transform hover:scale-105 transition-transform duration-200\"\r\n          @click=\"playVideo(video)\"\r\n        >\r\n          <!-- 16:9 Aspect Ratio Container -->\r\n          <div class=\"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2\">\r\n            <img \r\n              :src=\"video.thumbnail_url\" \r\n              :alt=\"video.title\"\r\n              class=\"w-full h-full object-cover\"\r\n            >\r\n            \r\n            <!-- Video badges -->\r\n            <div class=\"absolute top-1 left-1 flex gap-1\">\r\n              <span v-if=\"isNewVideo(video.created_at)\" class=\"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\r\n                NEW\r\n              </span>\r\n              <span class=\"bg-green-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\r\n                FREE\r\n              </span>\r\n            </div>\r\n            \r\n            <!-- Duration badge -->\r\n            <div class=\"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white\">\r\n              {{ formatDuration(video.duration) }}\r\n            </div>\r\n            \r\n            <!-- Play button overlay -->\r\n            <div class=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\">\r\n              <div class=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\r\n                <i class=\"fas fa-play text-sm text-white\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Video Info -->\r\n          <div class=\"px-1\">\r\n            <h3 class=\"text-sm font-medium mb-0.5 line-clamp-2\">{{ video.title }}</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Load More Button -->\r\n      <div v-if=\"hasMoreVideos\" class=\"mt-6 text-center\">\r\n        <button \r\n          @click=\"loadMoreVideos\" \r\n          class=\"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm\"\r\n        >\r\n          Load More\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'FreeVideos',\r\n  setup() {\r\n    const router = useRouter()\r\n    const freeVideos = ref([])\r\n    const currentPage = ref(1)\r\n    const hasMoreVideos = ref(true)\r\n    const loading = ref(true)\r\n    const pageSize = 20\r\n\r\n    const fetchFreeVideos = async (page = 1) => {\r\n      try {\r\n        loading.value = true\r\n        // Fetch all videos and filter client-side to ensure we get free videos\r\n        const response = await axios.get(`https://admin.no1ott.com/api/videos/?page=${page}&page_size=${pageSize * 2}&ordering=-created_at`)\r\n        \r\n        if (response.data) {\r\n          // Filter for free videos only (including videos without video_type set)\r\n          const filtered = response.data.filter(video => \r\n            video.video_type === 'free' || \r\n            !video.video_type || \r\n            video.video_type === null\r\n          )\r\n          \r\n          const processedVideos = filtered.map(video => ({\r\n            ...video,\r\n            title: capitalizeText(video.title),\r\n            description: capitalizeText(video.description)\r\n          }))\r\n\r\n          if (page === 1) {\r\n            freeVideos.value = processedVideos\r\n          } else {\r\n            freeVideos.value = [...freeVideos.value, ...processedVideos]\r\n          }\r\n\r\n          // Check if there are more videos\r\n          hasMoreVideos.value = response.data.length === pageSize * 2\r\n          currentPage.value = page\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching free videos:', error)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const loadMoreVideos = () => {\r\n      if (hasMoreVideos.value) {\r\n        fetchFreeVideos(currentPage.value + 1)\r\n      }\r\n    }\r\n\r\n    const playVideo = (video) => {\r\n      router.push({\r\n        name: 'MovieDetails',\r\n        params: { \r\n          id: video.id,\r\n          videoUrl: video.video_url,\r\n          videoType: 'hls'\r\n        }\r\n      })\r\n    }\r\n\r\n    const capitalizeText = (text) => {\r\n      if (!text) return '';\r\n      return text.split(/[\\s-]+/).map(word => {\r\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\r\n        if (specialWords.includes(word.toUpperCase())) {\r\n          return word.toUpperCase();\r\n        }\r\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\r\n        if (minorWords.includes(word.toLowerCase())) {\r\n          return word.toLowerCase();\r\n        }\r\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\r\n      }).join(' ');\r\n    }\r\n\r\n    const isNewVideo = (createdAt) => {\r\n      const videoDate = new Date(createdAt)\r\n      const now = new Date()\r\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24))\r\n      return diffDays <= 7\r\n    }\r\n\r\n    const formatDuration = (seconds) => {\r\n      const minutes = Math.floor(seconds / 60)\r\n      const remainingSeconds = seconds % 60\r\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`\r\n    }\r\n\r\n    onMounted(() => {\r\n      fetchFreeVideos()\r\n    })\r\n\r\n    return {\r\n      freeVideos,\r\n      hasMoreVideos,\r\n      loading,\r\n      loadMoreVideos,\r\n      playVideo,\r\n      isNewVideo,\r\n      formatDuration\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.aspect-video {\r\n  aspect-ratio: 16/9;\r\n}\r\n\r\n/* Add gradient text effect */\r\nh1 {\r\n  background: linear-gradient(to right, #ffffff, #cccccc);\r\n  -webkit-background-clip: text;\r\n  background-clip: text;\r\n  display: inline-block;\r\n  padding-bottom: 4px;\r\n  margin: 0 auto;\r\n}\r\n\r\n/* Add hover effect on back button */\r\nbutton:hover i {\r\n  transform: translateX(-3px);\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n/* Add line clamp for title */\r\n.line-clamp-2 {\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAA2C;;EAC/CA,KAAK,EAAC;AAAqB;;EAEzBA,KAAK,EAAC;AAA8C;;;EAgBrCA,KAAK,EAAC;;;EAKdA,KAAK,EAAC;AAA+G;;;EAE3FA,KAAK,EAAC;;;;EAenCA,KAAK,EAAC;AAA0E;;;EAQ9EA,KAAK,EAAC;AAAkC;;;EACDA,KAAK,EAAC;;;EAS7CA,KAAK,EAAC;AAAoF;;EAa5FA,KAAK,EAAC;AAAM;;EACXA,KAAK,EAAC;AAAyC;;;EAM/BA,KAAK,EAAC;;;uBA/EpCC,mBAAA,CAwFM,OAxFNC,UAwFM,GAvFJC,mBAAA,CAsFM,OAtFNC,UAsFM,GArFJC,mBAAA,4BAA+B,EAC/BF,mBAAA,CAaM,OAbNG,UAaM,GAZJH,mBAAA,CAKS;IAJNI,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;IACpBZ,KAAK,EAAC;gCAENG,mBAAA,CAA0C;IAAvCH,KAAK,EAAC;EAA4B,2B,8BAEvCG,mBAAA,CAKM;IALDH,KAAK,EAAC;EAAoB,IAC7BG,mBAAA,CAGK;IAHDH,KAAK,EAAC;EAA+C,I,iBAAC,eAExD,GAAAG,mBAAA,CAAsG;IAAjGH,KAAK,EAAC;EAAoF,G,0BAKrGK,mBAAA,mBAAsB,EACXQ,MAAA,CAAAC,OAAO,I,cAAlBb,mBAAA,CAEM,OAFNc,UAEM,EAAAP,MAAA,QAAAA,MAAA,OADJL,mBAAA,CAAwF;IAAnFH,KAAK,EAAC;EAAsE,2B,qBAInFC,mBAAA,CAoDMe,SAAA;IAAAC,GAAA;EAAA,IArDNZ,mBAAA,iBAAoB,EACpBF,mBAAA,CAoDM,OApDNe,UAoDM,GAnDJb,mBAAA,2CAA8C,EACnCQ,MAAA,CAAAM,UAAU,CAACC,MAAM,U,cAA5BnB,mBAAA,CAIM,OAJNoB,UAIM,EAAAb,MAAA,QAAAA,MAAA,OAHJL,mBAAA,CAA8D;IAA3DH,KAAK,EAAC;EAAgD,4BACzDG,mBAAA,CAAqE;IAAjEH,KAAK,EAAC;EAAuC,GAAC,gBAAc,qBAChEG,mBAAA,CAA4E;IAAzEH,KAAK,EAAC;EAA2B,GAAC,qCAAmC,oB,qBAI1EC,mBAAA,CA0CMe,SAAA;IAAAC,GAAA;EAAA,IA3CNZ,mBAAA,8BAAiC,G,kBACjCJ,mBAAA,CA0CMe,SAAA,QAAAM,WAAA,CAxCYT,MAAA,CAAAM,UAAU,EAAnBI,KAAK;yBAFdtB,mBAAA,CA0CM;MAvCHgB,GAAG,EAAEM,KAAK,CAACC,EAAE;MACdxB,KAAK,EAAC,kFAAkF;MACvFO,OAAK,EAAAE,MAAA,IAAEI,MAAA,CAAAY,SAAS,CAACF,KAAK;QAEvBlB,mBAAA,iCAAoC,EACpCF,mBAAA,CA4BM,OA5BNuB,UA4BM,GA3BJvB,mBAAA,CAIC;MAHEwB,GAAG,EAAEJ,KAAK,CAACK,aAAa;MACxBC,GAAG,EAAEN,KAAK,CAACO,KAAK;MACjB9B,KAAK,EAAC;yCAGRK,mBAAA,kBAAqB,EACrBF,mBAAA,CAOM,OAPN4B,WAOM,GANQlB,MAAA,CAAAmB,UAAU,CAACT,KAAK,CAACU,UAAU,K,cAAvChC,mBAAA,CAEO,QAFPiC,WAEO,EAFmG,OAE1G,K,6DACA/B,mBAAA,CAEO;MAFDH,KAAK,EAAC;IAA2D,GAAC,QAExE,qB,GAGFK,mBAAA,oBAAuB,EACvBF,mBAAA,CAEM,OAFNgC,WAEM,EAAAC,gBAAA,CADDvB,MAAA,CAAAwB,cAAc,CAACd,KAAK,CAACe,QAAQ,mBAGlCjC,mBAAA,yBAA4B,E,0BAC5BF,mBAAA,CAIM;MAJDH,KAAK,EAAC;IAAoH,IAC7HG,mBAAA,CAEM;MAFDH,KAAK,EAAC;IAAoF,IAC7FG,mBAAA,CAA8C;MAA3CH,KAAK,EAAC;IAAgC,G,0BAK/CK,mBAAA,gBAAmB,EACnBF,mBAAA,CAEM,OAFNoC,WAEM,GADJpC,mBAAA,CAA0E,MAA1EqC,WAA0E,EAAAJ,gBAAA,CAAnBb,KAAK,CAACO,KAAK,iB;wIAKxEzB,mBAAA,sBAAyB,EACdQ,MAAA,CAAA4B,aAAa,I,cAAxBxC,mBAAA,CAOM,OAPNyC,WAOM,GANJvC,mBAAA,CAKS;IAJNI,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAmC,IAAA,KAAE9B,MAAA,CAAA+B,cAAA,IAAA/B,MAAA,CAAA+B,cAAA,IAAAD,IAAA,CAAc;IACtB3C,KAAK,EAAC;KACP,aAED,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}