{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nimport { computed, onMounted, ref } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  name: 'PaymentPage',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n    const plans = ref([{\n      id: 1,\n      name: 'Basic Plan',\n      price: 199,\n      duration: 30\n    }, {\n      id: 2,\n      name: 'Standard Plan',\n      price: 499,\n      duration: 90\n    }, {\n      id: 3,\n      name: 'Premium Plan',\n      price: 999,\n      duration: 365\n    }]);\n    const selectedPlan = ref(null);\n    const showPaymentForm = ref(false);\n\n    // Computed properties\n    const user = computed(() => store.state.user);\n    const isAuthenticated = computed(() => store.state.isAuthenticated);\n    const loadRazorpay = () => {\n      return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n        script.onload = resolve;\n        script.onerror = () => reject(new Error('Failed to load Razorpay SDK'));\n        document.body.appendChild(script);\n      });\n    };\n    onMounted(async () => {\n      try {\n        // Load Razorpay SDK\n        await loadRazorpay();\n        console.log('Razorpay SDK loaded successfully');\n      } catch (error) {\n        console.error('Failed to load Razorpay:', error);\n        alert('Unable to initialize payment system. Please refresh the page.');\n        return;\n      }\n\n      // Check for any pending payment verification\n      const localData = localStorage.getItem('payment_success');\n      const sessionData = sessionStorage.getItem('payment_success');\n      const paymentData = localData || sessionData;\n      if (paymentData) {\n        const parsedData = JSON.parse(paymentData);\n\n        // If payment was verified in backend but app crashed\n        if (parsedData.backendVerified && !parsedData.verified) {\n          try {\n            // Double-check subscription status with backend\n            const checkResponse = await axios.post('/api/payment/check-subscription/', {\n              subscription_id: parsedData.subscriptionId\n            });\n            if (checkResponse.data.status === 'active') {\n              // Clear payment data and redirect to profile\n              localStorage.removeItem('payment_success');\n              sessionStorage.removeItem('payment_success');\n              router.replace('/profile');\n              return;\n            }\n          } catch (err) {\n            console.error('Error checking subscription:', err);\n          }\n        }\n      }\n      console.log('Payment Component Mounted:', {\n        user: user.value,\n        isAuthenticated: isAuthenticated.value,\n        route: route.fullPath\n      });\n      if (!isAuthenticated.value || !user.value) {\n        console.log('User not authenticated, redirecting to login');\n        router.push({\n          path: '/login',\n          query: {\n            redirect: route.fullPath\n          }\n        });\n        return;\n      }\n\n      // Check for plan in route query\n      const planType = route.query.plan;\n      if (planType) {\n        const plan = plans.value.find(p => p.name.toLowerCase().replace(' ', '_') === planType);\n        if (plan) {\n          selectPlan(plan);\n        }\n      }\n    });\n    const selectPlan = plan => {\n      console.log('Selected Plan:', plan);\n      selectedPlan.value = plan;\n      showPaymentForm.value = true;\n    };\n    const initiatePayment = async () => {\n      try {\n        // Check if Razorpay is loaded\n        if (!window.Razorpay) {\n          throw new Error('Payment gateway not initialized. Please refresh the page.');\n        }\n\n        // Validate plan selection\n        if (!selectedPlan.value || !selectedPlan.value.price) {\n          throw new Error('Please select a valid plan.');\n        }\n        console.log('Initiating payment for plan:', selectedPlan.value);\n        const orderResponse = await axios.post('/api/payment/create-order/', {\n          amount: selectedPlan.value.price,\n          currency: 'INR'\n        });\n        console.log('Order created:', orderResponse.data);\n        const options = {\n          key: orderResponse.data.key_id,\n          amount: orderResponse.data.amount,\n          currency: orderResponse.data.currency,\n          name: 'Your OTT Platform',\n          description: `${selectedPlan.value.name} Subscription`,\n          order_id: orderResponse.data.order_id,\n          handler: handlePaymentSuccess,\n          prefill: {\n            name: user.value?.name || '',\n            email: user.value?.email || '',\n            contact: user.value?.phone || ''\n          },\n          theme: {\n            color: '#3399cc'\n          },\n          // Add callback URLs for UPI app redirection with fast redirect\n          callback_url: `${window.location.origin}/payment/verify`,\n          redirect: true,\n          retry: {\n            enabled: false // Disable automatic retries\n          },\n          modal: {\n            confirm_close: false,\n            // Disable confirmation dialog\n            escape: false,\n            // Prevent escape key from closing\n            animation: false,\n            // Disable animations for faster response\n            handleback: true,\n            // Handle back button\n            backdropclose: false // Prevent closing on backdrop click\n          },\n          notes: {\n            plan_name: selectedPlan.value.name,\n            plan_duration: selectedPlan.value.duration\n          },\n          config: {\n            display: {\n              hide: [{\n                method: 'paylater'\n              }],\n              // Hide paylater options\n              sequence: ['upi', 'card', 'netbanking'],\n              // Preferred payment methods order\n              preferences: {\n                show_default_blocks: true // Show all payment blocks\n              }\n            }\n          }\n        };\n        const rzp = new window.Razorpay(options);\n        rzp.open();\n      } catch (error) {\n        console.error('Payment initiation failed:', error);\n        alert('Unable to initiate payment. Please try again.');\n      }\n    };\n    const handlePaymentSuccess = async response => {\n      try {\n        console.log('Payment successful, verifying:', response);\n        const verifyResponse = await axios.post('/api/payment/verify-payment/', {\n          razorpay_payment_id: response.razorpay_payment_id,\n          razorpay_order_id: response.razorpay_order_id,\n          razorpay_signature: response.razorpay_signature\n        });\n        if (verifyResponse.data.status === 'success') {\n          // Store payment success in localStorage for UPI app return\n          const verificationId = Math.random().toString(36).substring(7);\n          const paymentData = {\n            orderId: response.razorpay_order_id,\n            timestamp: new Date().getTime(),\n            verificationId: verificationId,\n            verified: false,\n            amount: response.amount,\n            plan: selectedPlan.value.name,\n            backendVerified: true,\n            // Backend verification flag\n            subscriptionId: verifyResponse.data.subscription_id,\n            // Store subscription ID\n            activationTime: verifyResponse.data.activation_time\n          };\n\n          // Store in both localStorage and sessionStorage for redundancy\n          localStorage.setItem('payment_success', JSON.stringify(paymentData));\n          sessionStorage.setItem('payment_success', JSON.stringify(paymentData));\n\n          // For non-UPI payments or when not redirecting\n          if (!response.isUpi) {\n            alert('Payment successful! Your subscription is now active.');\n            router.push('/profile');\n          }\n        }\n      } catch (error) {\n        console.error('Payment verification failed:', error);\n        alert('Payment verification failed. Please contact support.');\n      }\n    };\n    return {\n      plans,\n      selectedPlan,\n      showPaymentForm,\n      selectPlan,\n      initiatePayment\n    };\n  }\n};","map":{"version":3,"names":["axios","useStore","computed","onMounted","ref","useRouter","useRoute","name","setup","store","router","route","plans","id","price","duration","selectedPlan","showPaymentForm","user","state","isAuthenticated","loadRazorpay","Promise","resolve","reject","script","document","createElement","src","onload","onerror","Error","body","appendChild","console","log","error","alert","localData","localStorage","getItem","sessionData","sessionStorage","paymentData","parsedData","JSON","parse","backendVerified","verified","checkResponse","post","subscription_id","subscriptionId","data","status","removeItem","replace","err","value","fullPath","push","path","query","redirect","planType","plan","find","p","toLowerCase","selectPlan","initiatePayment","window","Razorpay","orderResponse","amount","currency","options","key","key_id","description","order_id","handler","handlePaymentSuccess","prefill","email","contact","phone","theme","color","callback_url","location","origin","retry","enabled","modal","confirm_close","escape","animation","handleback","backdropclose","notes","plan_name","plan_duration","config","display","hide","method","sequence","preferences","show_default_blocks","rzp","open","response","verifyResponse","razorpay_payment_id","razorpay_order_id","razorpay_signature","verificationId","Math","random","toString","substring","orderId","timestamp","Date","getTime","activationTime","activation_time","setItem","stringify","isUpi"],"sources":["D:\\OTT\\ott_frontend\\src\\components\\Payment.vue"],"sourcesContent":["<template>\n  <div class=\"payment-container\">\n    <div v-if=\"!showPaymentForm\" class=\"subscription-plans\">\n      <h2>Choose Your Plan</h2>\n      <div class=\"plans\">\n        <div class=\"plan\" v-for=\"plan in plans\" :key=\"plan.id\" @click=\"selectPlan(plan)\">\n          <h3>{{ plan.name }}</h3>\n          <p class=\"price\">₹{{ plan.price }}</p>\n          <p class=\"duration\">{{ plan.duration }} days</p>\n          <button class=\"select-btn\">Select</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedPlan\" class=\"payment-summary\">\n      <h3>Payment Summary</h3>\n      <p>Plan: {{ selectedPlan.name }}</p>\n      <p>Amount: ₹{{ selectedPlan.price }}</p>\n      <button @click=\"initiatePayment\" class=\"pay-btn\">Pay Now</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nimport { computed, onMounted, ref } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\n\nexport default {\n  name: 'PaymentPage',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    const plans = ref([\n      { id: 1, name: 'Basic Plan', price: 199, duration: 30 },\n      { id: 2, name: 'Standard Plan', price: 499, duration: 90 },\n      { id: 3, name: 'Premium Plan', price: 999, duration: 365 }\n    ]);\n\n    const selectedPlan = ref(null);\n    const showPaymentForm = ref(false);\n\n    // Computed properties\n    const user = computed(() => store.state.user);\n    const isAuthenticated = computed(() => store.state.isAuthenticated);\n\n         const loadRazorpay = () => {\n      return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n        script.onload = resolve;\n        script.onerror = () => reject(new Error('Failed to load Razorpay SDK'));\n        document.body.appendChild(script);\n      });\n    };\n\n    onMounted(async () => {\n        try {\n          // Load Razorpay SDK\n          await loadRazorpay();\n          console.log('Razorpay SDK loaded successfully');\n        } catch (error) {\n          console.error('Failed to load Razorpay:', error);\n          alert('Unable to initialize payment system. Please refresh the page.');\n          return;\n        }\n\n        // Check for any pending payment verification\n        const localData = localStorage.getItem('payment_success');\n        const sessionData = sessionStorage.getItem('payment_success');\n        const paymentData = localData || sessionData;\n        \n        if (paymentData) {\n          const parsedData = JSON.parse(paymentData);\n          \n          // If payment was verified in backend but app crashed\n          if (parsedData.backendVerified && !parsedData.verified) {\n            try {\n              // Double-check subscription status with backend\n              const checkResponse = await axios.post('/api/payment/check-subscription/', {\n                subscription_id: parsedData.subscriptionId\n              });\n              \n              if (checkResponse.data.status === 'active') {\n                // Clear payment data and redirect to profile\n                localStorage.removeItem('payment_success');\n                sessionStorage.removeItem('payment_success');\n                router.replace('/profile');\n                return;\n              }\n            } catch (err) {\n              console.error('Error checking subscription:', err);\n            }\n          }\n        }\n\n        console.log('Payment Component Mounted:', {\n        user: user.value,\n        isAuthenticated: isAuthenticated.value,\n        route: route.fullPath\n      });\n\n      if (!isAuthenticated.value || !user.value) {\n        console.log('User not authenticated, redirecting to login');\n        router.push({\n          path: '/login',\n          query: { redirect: route.fullPath }\n        });\n        return;\n      }\n\n      // Check for plan in route query\n      const planType = route.query.plan;\n      if (planType) {\n        const plan = plans.value.find(p => \n          p.name.toLowerCase().replace(' ', '_') === planType\n        );\n        if (plan) {\n          selectPlan(plan);\n        }\n      }\n    });\n\n    const selectPlan = (plan) => {\n      console.log('Selected Plan:', plan);\n      selectedPlan.value = plan;\n      showPaymentForm.value = true;\n    };\n\n    const initiatePayment = async () => {\n      try {\n        // Check if Razorpay is loaded\n        if (!window.Razorpay) {\n          throw new Error('Payment gateway not initialized. Please refresh the page.');\n        }\n\n        // Validate plan selection\n        if (!selectedPlan.value || !selectedPlan.value.price) {\n          throw new Error('Please select a valid plan.');\n        }\n\n        console.log('Initiating payment for plan:', selectedPlan.value);\n        \n        const orderResponse = await axios.post('/api/payment/create-order/', {\n          amount: selectedPlan.value.price,\n          currency: 'INR'\n        });\n\n        console.log('Order created:', orderResponse.data);\n\n        const options = {\n          key: orderResponse.data.key_id,\n          amount: orderResponse.data.amount,\n          currency: orderResponse.data.currency,\n          name: 'Your OTT Platform',\n          description: `${selectedPlan.value.name} Subscription`,\n          order_id: orderResponse.data.order_id,\n          handler: handlePaymentSuccess,\n          prefill: {\n            name: user.value?.name || '',\n            email: user.value?.email || '',\n            contact: user.value?.phone || ''\n          },\n          theme: {\n            color: '#3399cc'\n          },\n          // Add callback URLs for UPI app redirection with fast redirect\n          callback_url: `${window.location.origin}/payment/verify`,\n          redirect: true,\n          retry: {\n            enabled: false  // Disable automatic retries\n          },\n          modal: {\n            confirm_close: false,  // Disable confirmation dialog\n            escape: false,  // Prevent escape key from closing\n            animation: false,  // Disable animations for faster response\n            handleback: true,  // Handle back button\n            backdropclose: false  // Prevent closing on backdrop click\n          },\n          notes: {\n            plan_name: selectedPlan.value.name,\n            plan_duration: selectedPlan.value.duration\n          },\n          config: {\n            display: {\n              hide: [{method: 'paylater'}],  // Hide paylater options\n              sequence: ['upi', 'card', 'netbanking'],  // Preferred payment methods order\n              preferences: {\n                show_default_blocks: true  // Show all payment blocks\n              }\n            }\n          }\n        };\n\n        const rzp = new window.Razorpay(options);\n        rzp.open();\n      } catch (error) {\n        console.error('Payment initiation failed:', error);\n        alert('Unable to initiate payment. Please try again.');\n      }\n    };\n\n    const handlePaymentSuccess = async (response) => {\n      try {\n        console.log('Payment successful, verifying:', response);\n        \n        const verifyResponse = await axios.post('/api/payment/verify-payment/', {\n          razorpay_payment_id: response.razorpay_payment_id,\n          razorpay_order_id: response.razorpay_order_id,\n          razorpay_signature: response.razorpay_signature\n        });\n\n        if (verifyResponse.data.status === 'success') {\n          // Store payment success in localStorage for UPI app return\n          const verificationId = Math.random().toString(36).substring(7);\n          const paymentData = {\n            orderId: response.razorpay_order_id,\n            timestamp: new Date().getTime(),\n            verificationId: verificationId,\n            verified: false,\n            amount: response.amount,\n            plan: selectedPlan.value.name,\n            backendVerified: true,  // Backend verification flag\n            subscriptionId: verifyResponse.data.subscription_id,  // Store subscription ID\n            activationTime: verifyResponse.data.activation_time\n          };\n          \n          // Store in both localStorage and sessionStorage for redundancy\n          localStorage.setItem('payment_success', JSON.stringify(paymentData));\n          sessionStorage.setItem('payment_success', JSON.stringify(paymentData));\n          \n          // For non-UPI payments or when not redirecting\n          if (!response.isUpi) {\n            alert('Payment successful! Your subscription is now active.');\n            router.push('/profile');\n          }\n        }\n      } catch (error) {\n        console.error('Payment verification failed:', error);\n        alert('Payment verification failed. Please contact support.');\n      }\n    };\n\n    return {\n      plans,\n      selectedPlan,\n      showPaymentForm,\n      selectPlan,\n      initiatePayment\n    };\n  }\n}\n</script>\n\n<style scoped>\n.payment-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.subscription-plans {\n  text-align: center;\n}\n\n.plans {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  margin-top: 30px;\n}\n\n.plan {\n  background: white;\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  transition: transform 0.2s;\n  width: 250px;\n}\n\n.plan:hover {\n  transform: translateY(-5px);\n}\n\n.price {\n  font-size: 24px;\n  font-weight: bold;\n  color: #3399cc;\n  margin: 10px 0;\n}\n\n.duration {\n  color: #666;\n  margin-bottom: 15px;\n}\n\n.select-btn {\n  background: #3399cc;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 5px;\n  margin-top: 10px;\n  cursor: pointer;\n  width: 100%;\n}\n\n.payment-summary {\n  max-width: 400px;\n  margin: 20px auto;\n  padding: 20px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.pay-btn {\n  background: #3399cc;\n  color: white;\n  border: none;\n  padding: 12px 30px;\n  border-radius: 5px;\n  width: 100%;\n  margin-top: 20px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n.pay-btn:hover, .select-btn:hover {\n  background: #2980b9;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}