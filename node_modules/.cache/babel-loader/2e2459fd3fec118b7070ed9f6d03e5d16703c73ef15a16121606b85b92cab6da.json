{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { handleLogout } from '../utils/auth';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'ProfileMenu',\n  props: {\n    isOpen: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    ...mapGetters(['currentUser']),\n    user() {\n      return this.currentUser;\n    },\n    userInitials() {\n      if (!this.user) return '';\n      const firstName = this.user.first_name || '';\n      const lastName = this.user.last_name || '';\n      return (firstName.charAt(0) + lastName.charAt(0)).toUpperCase() || this.user.phone.slice(0, 2);\n    },\n    userName() {\n      if (!this.user) return '';\n      if (this.user.first_name || this.user.last_name) {\n        return `${this.user.first_name || ''} ${this.user.last_name || ''}`.trim();\n      }\n      return this.user.phone;\n    }\n  },\n  watch: {\n    isOpen(newVal) {\n      if (newVal) {\n        // Refresh store data when menu is opened\n        this.$store.dispatch('initializeStore');\n      }\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    },\n    handleProfileClick() {\n      this.close();\n      this.$nextTick(() => {\n        this.$router.push('/profile');\n      });\n    },\n    handleSignIn() {\n      this.$router.push('/login');\n      this.close();\n    },\n    handleSubscribe() {\n      this.$router.push('/plans');\n      this.close();\n    },\n    async handleLogout() {\n      try {\n        this.$emit('loading', true);\n        await handleLogout();\n        this.$store.commit('setUser', null);\n        this.$store.commit('setAuthenticated', false);\n        localStorage.removeItem('hasCompletedRegistration');\n        this.close();\n        this.$router.push('/login');\n      } catch (error) {\n        console.error('Logout failed:', error);\n        alert('Logout failed. Please try again.');\n      } finally {\n        this.$emit('loading', false);\n      }\n    }\n  }\n};","map":{"version":3,"names":["handleLogout","mapGetters","name","props","isOpen","type","Boolean","default","computed","user","currentUser","userInitials","firstName","first_name","lastName","last_name","charAt","toUpperCase","phone","slice","userName","trim","watch","newVal","$store","dispatch","methods","close","$emit","handleProfileClick","$nextTick","$router","push","handleSignIn","handleSubscribe","commit","localStorage","removeItem","error","console","alert"],"sources":["F:\\OTT\\ott_frontend\\src\\components\\ProfileMenu.vue"],"sourcesContent":["<template>\n  <div \n    v-if=\"isOpen\" \n    class=\"fixed inset-0 bg-black/95 z-50 flex flex-col overflow-y-auto\"\n  >\n    <!-- Header -->\n    <div class=\"flex justify-between items-center p-6\">\n      <h1 class=\"text-4xl font-bold text-white\">MENU<span class=\"text-[#ff4d4d]\">.</span></h1>\n      <button @click=\"close\" class=\"text-white/80 hover:text-white\">\n        <i class=\"fas fa-times text-2xl\"></i>\n      </button>\n    </div>\n\n    <!-- User Profile Section (if logged in) -->\n    <div v-if=\"user\" class=\"px-6 py-4 border-b border-white/10\">\n      <div class=\"flex items-center gap-4\">\n        <div class=\"w-16 h-16 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white\">\n          <span class=\"text-2xl font-semibold\">{{ userInitials }}</span>\n        </div>\n        <div>\n          <h2 class=\"text-xl font-semibold text-white\">{{ userName }}</h2>\n          <p class=\"text-white/60\">{{ user.phone }}</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Menu Items -->\n    <div class=\"flex-1 px-6 py-4\">\n      <div class=\"space-y-6\">\n        <!-- My Profile (if logged in) -->\n        <router-link \n          v-if=\"user\" \n          to=\"/profile\" \n          class=\"flex items-center gap-4 text-white/80 hover:text-white group\"\n          @click=\"handleProfileClick\"\n        >\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-user text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">My Profile</span>\n        </router-link>\n\n        <!-- My List (if logged in) -->\n        <a v-if=\"user\" href=\"#\" class=\"flex items-center gap-4 text-white/80 hover:text-white group\">\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-heart text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">My List</span>\n        </a>\n\n         <!-- My List (if logged in) -->\n         <router-link \n          v-if=\"user\" \n          to=\"/referral\" \n          class=\"flex items-center gap-4 text-white/80 hover:text-white group\"\n          @click=\"close\"\n        >\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-users text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">Referral</span>\n        </router-link>\n\n        <!-- Wallet -->\n        <router-link \n          to=\"/wallet\" \n          class=\"flex items-center gap-4 text-white/80 hover:text-white group\"\n          @click=\"close\"\n        >\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-wallet text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">Wallet</span>\n        </router-link>\n\n        <!-- Help -->\n        <a href=\"#\" class=\"flex items-center gap-4 text-white/80 hover:text-white group\">\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-headphones text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">Help</span>\n        </a>\n\n        <!-- Offers -->\n        <a href=\"#\" class=\"flex items-center gap-4 text-white/80 hover:text-white group\">\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-gift text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">Offers</span>\n        </a>\n\n        <!-- Terms and Conditions -->\n        <a href=\"#\" class=\"flex items-center gap-4 text-white/80 hover:text-white group\">\n          <div class=\"w-8 h-8 flex items-center justify-center text-[#ff4d4d]\">\n            <i class=\"fas fa-file-alt text-xl\"></i>\n          </div>\n          <span class=\"text-lg\">Terms and Conditions</span>\n        </a>\n      </div>\n    </div>\n\n    <!-- Bottom Actions -->\n    <div class=\"p-6 space-y-4 pb-24 md:pb-6\">\n      <template v-if=\"user\">\n        <button \n          @click=\"handleLogout\"\n          class=\"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors\"\n        >\n          Logout\n        </button>\n      </template>\n      <template v-else>\n        <button \n          @click=\"handleSignIn\"\n          class=\"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors\"\n        >\n          Sign In\n        </button>\n        <button \n          @click=\"handleSubscribe\"\n          class=\"w-full py-4 px-6 bg-[#ff4d4d] text-white font-semibold rounded-lg hover:opacity-90 transition-opacity\"\n        >\n          Subscribe Now\n        </button>\n      </template>\n      <p class=\"text-center text-white/40 text-sm\">Version 0.1.38</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { handleLogout } from '../utils/auth';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'ProfileMenu',\n  props: {\n    isOpen: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    ...mapGetters(['currentUser']),\n    user() {\n      return this.currentUser;\n    },\n    userInitials() {\n      if (!this.user) return '';\n      const firstName = this.user.first_name || '';\n      const lastName = this.user.last_name || '';\n      return (firstName.charAt(0) + lastName.charAt(0)).toUpperCase() || this.user.phone.slice(0, 2);\n    },\n    userName() {\n      if (!this.user) return '';\n      if (this.user.first_name || this.user.last_name) {\n        return `${this.user.first_name || ''} ${this.user.last_name || ''}`.trim();\n      }\n      return this.user.phone;\n    }\n  },\n  watch: {\n    isOpen(newVal) {\n      if (newVal) {\n        // Refresh store data when menu is opened\n        this.$store.dispatch('initializeStore');\n      }\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('close')\n    },\n    handleProfileClick() {\n      this.close()\n      this.$nextTick(() => {\n        this.$router.push('/profile')\n      })\n    },\n    handleSignIn() {\n      this.$router.push('/login')\n      this.close()\n    },\n    handleSubscribe() {\n      this.$router.push('/plans')\n      this.close()\n    },\n    async handleLogout() {\n      try {\n        this.$emit('loading', true);\n        await handleLogout();\n        this.$store.commit('setUser', null);\n        this.$store.commit('setAuthenticated', false);\n        localStorage.removeItem('hasCompletedRegistration');\n        this.close();\n        this.$router.push('/login');\n      } catch (error) {\n        console.error('Logout failed:', error);\n        alert('Logout failed. Please try again.');\n      } finally {\n        this.$emit('loading', false);\n      }\n    }\n  }\n}\n</script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}