{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  name: 'PaymentPage',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n    const plans = ref([{\n      id: 1,\n      name: 'Basic Plan',\n      price: 199,\n      duration: 30\n    }, {\n      id: 2,\n      name: 'Standard Plan',\n      price: 499,\n      duration: 90\n    }, {\n      id: 3,\n      name: 'Premium Plan',\n      price: 999,\n      duration: 365\n    }]);\n    const selectedPlan = ref(null);\n    const showPaymentForm = ref(false);\n    const showStatusModal = ref(false);\n    const statusCheckInterval = ref(null);\n\n    // Computed properties\n    const user = computed(() => store.state.user);\n    const isAuthenticated = computed(() => store.state.isAuthenticated);\n    onMounted(() => {\n      console.log('Payment Component Mounted');\n      if (!isAuthenticated.value || !user.value) {\n        router.push({\n          path: '/login',\n          query: {\n            redirect: route.fullPath\n          }\n        });\n        return;\n      }\n\n      // Check for pending payments\n      checkPendingPayments();\n\n      // Check for plan in route query\n      const planType = route.query.plan;\n      if (planType) {\n        const plan = plans.value.find(p => p.name.toLowerCase().replace(' ', '_') === planType);\n        if (plan) {\n          selectPlan(plan);\n        }\n      }\n    });\n    const checkPendingPayments = () => {\n      const pendingPayment = localStorage.getItem('pending_payment');\n      if (pendingPayment) {\n        const payment = JSON.parse(pendingPayment);\n        const timeElapsed = new Date().getTime() - payment.timestamp;\n\n        // Check if payment was initiated in last 10 minutes\n        if (timeElapsed < 600000) {\n          showStatusModal.value = true;\n          startPaymentStatusCheck(payment.order_id);\n        } else {\n          localStorage.removeItem('pending_payment');\n        }\n      }\n    };\n    const selectPlan = plan => {\n      console.log('Selected Plan:', plan);\n      selectedPlan.value = plan;\n      showPaymentForm.value = true;\n    };\n    const initiatePayment = async () => {\n      try {\n        console.log('Initiating payment for plan:', selectedPlan.value);\n        const orderResponse = await axios.post('/api/payment/create-order/', {\n          amount: selectedPlan.value.price,\n          plan_id: selectedPlan.value.id,\n          phone: user.value?.phone\n        });\n        console.log('Order created:', orderResponse.data);\n\n        // Save order details for recovery\n        localStorage.setItem('pending_payment', JSON.stringify({\n          order_id: orderResponse.data.order_id,\n          plan_id: selectedPlan.value.id,\n          amount: selectedPlan.value.price,\n          timestamp: new Date().getTime()\n        }));\n        const options = {\n          key: orderResponse.data.key_id,\n          amount: orderResponse.data.amount,\n          currency: orderResponse.data.currency,\n          name: 'Your OTT Platform',\n          description: `${selectedPlan.value.name} Subscription`,\n          order_id: orderResponse.data.order_id,\n          handler: handlePaymentSuccess,\n          prefill: {\n            name: user.value?.name || '',\n            email: user.value?.email || '',\n            contact: user.value?.phone || ''\n          },\n          theme: {\n            color: '#3399cc'\n          },\n          modal: {\n            ondismiss: function () {\n              // Start checking payment status when modal is closed\n              startPaymentStatusCheck(orderResponse.data.order_id);\n            }\n          },\n          config: {\n            display: {\n              blocks: {\n                upi: {\n                  preferred: true,\n                  name: \"UPI\",\n                  instruments: [{\n                    targetApp: \"phonepe\"\n                  }, {\n                    targetApp: \"googlePay\"\n                  }, {\n                    targetApp: \"paytm\"\n                  }, {\n                    targetApp: \"upi\"\n                  }]\n                }\n              }\n            }\n          }\n        };\n        const rzp = new window.Razorpay(options);\n        rzp.open();\n      } catch (error) {\n        console.error('Payment initiation failed:', error);\n        alert('Unable to initiate payment. Please try again.');\n      }\n    };\n    const startPaymentStatusCheck = async orderId => {\n      showStatusModal.value = true;\n      let attempts = 0;\n      const maxAttempts = 10; // 5 minutes (30 seconds * 10)\n\n      const checkStatus = async () => {\n        try {\n          const response = await axios.get(`/api/payment/check-status/${orderId}/`);\n          if (response.data.status === 'completed') {\n            // Payment successful\n            showStatusModal.value = false;\n            clearInterval(statusCheckInterval.value);\n            localStorage.removeItem('pending_payment');\n\n            // Show success message\n            alert('Payment successful! Your subscription is now active.');\n            router.push('/profile');\n            return;\n          }\n          attempts++;\n          if (attempts >= maxAttempts) {\n            showStatusModal.value = false;\n            clearInterval(statusCheckInterval.value);\n            alert('Payment status could not be verified. Please contact support.');\n          }\n        } catch (error) {\n          console.error('Status check failed:', error);\n        }\n      };\n\n      // Check immediately\n      await checkStatus();\n\n      // Then check every 30 seconds\n      statusCheckInterval.value = setInterval(checkStatus, 30000);\n    };\n    const handlePaymentSuccess = async response => {\n      try {\n        console.log('Payment successful, verifying:', response);\n        const verifyResponse = await axios.post('/api/payment/verify-payment/', {\n          razorpay_payment_id: response.razorpay_payment_id,\n          razorpay_order_id: response.razorpay_order_id,\n          razorpay_signature: response.razorpay_signature,\n          phone: user.value?.phone,\n          plan_id: selectedPlan.value.id\n        });\n        if (verifyResponse.data.status === 'success') {\n          localStorage.removeItem('pending_payment');\n          alert('Payment successful! Your subscription is now active.');\n          router.push('/profile');\n        }\n      } catch (error) {\n        console.error('Payment verification failed:', error);\n        alert('Payment verification failed. Please contact support.');\n      }\n    };\n\n    // Cleanup on component unmount\n    onUnmounted(() => {\n      if (statusCheckInterval.value) {\n        clearInterval(statusCheckInterval.value);\n      }\n    });\n    return {\n      plans,\n      selectedPlan,\n      showPaymentForm,\n      showStatusModal,\n      selectPlan,\n      initiatePayment\n    };\n  }\n};","map":{"version":3,"names":["axios","useStore","computed","onMounted","onUnmounted","ref","useRouter","useRoute","name","setup","store","router","route","plans","id","price","duration","selectedPlan","showPaymentForm","showStatusModal","statusCheckInterval","user","state","isAuthenticated","console","log","value","push","path","query","redirect","fullPath","checkPendingPayments","planType","plan","find","p","toLowerCase","replace","selectPlan","pendingPayment","localStorage","getItem","payment","JSON","parse","timeElapsed","Date","getTime","timestamp","startPaymentStatusCheck","order_id","removeItem","initiatePayment","orderResponse","post","amount","plan_id","phone","data","setItem","stringify","options","key","key_id","currency","description","handler","handlePaymentSuccess","prefill","email","contact","theme","color","modal","ondismiss","config","display","blocks","upi","preferred","instruments","targetApp","rzp","window","Razorpay","open","error","alert","orderId","attempts","maxAttempts","checkStatus","response","get","status","clearInterval","setInterval","verifyResponse","razorpay_payment_id","razorpay_order_id","razorpay_signature"],"sources":["F:\\ott_tv\\ott_frontend\\src\\components\\Payment.vue"],"sourcesContent":["<template>\n  <div class=\"payment-container\">\n    <div v-if=\"!showPaymentForm\" class=\"subscription-plans\">\n      <h2>Choose Your Plan</h2>\n      <div class=\"plans\">\n        <div class=\"plan\" v-for=\"plan in plans\" :key=\"plan.id\" @click=\"selectPlan(plan)\">\n          <h3>{{ plan.name }}</h3>\n          <p class=\"price\">₹{{ plan.price }}</p>\n          <p class=\"duration\">{{ plan.duration }} days</p>\n          <button class=\"select-btn\">Select</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedPlan\" class=\"payment-summary\">\n      <h3>Payment Summary</h3>\n      <p>Plan: {{ selectedPlan.name }}</p>\n      <p>Amount: ₹{{ selectedPlan.price }}</p>\n      <button @click=\"initiatePayment\" class=\"pay-btn\">Pay Now</button>\n    </div>\n\n    <!-- Payment Status Modal -->\n    <div v-if=\"showStatusModal\" class=\"status-modal\">\n      <div class=\"modal-content\">\n        <h3>Checking Payment Status...</h3>\n        <p>Please wait while we verify your payment.</p>\n        <div class=\"loader\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\n\nexport default {\n  name: 'PaymentPage',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    const plans = ref([\n      { id: 1, name: 'Basic Plan', price: 199, duration: 30 },\n      { id: 2, name: 'Standard Plan', price: 499, duration: 90 },\n      { id: 3, name: 'Premium Plan', price: 999, duration: 365 }\n    ]);\n\n    const selectedPlan = ref(null);\n    const showPaymentForm = ref(false);\n    const showStatusModal = ref(false);\n    const statusCheckInterval = ref(null);\n\n    // Computed properties\n    const user = computed(() => store.state.user);\n    const isAuthenticated = computed(() => store.state.isAuthenticated);\n\n    onMounted(() => {\n      console.log('Payment Component Mounted');\n      \n      if (!isAuthenticated.value || !user.value) {\n        router.push({\n          path: '/login',\n          query: { redirect: route.fullPath }\n        });\n        return;\n      }\n\n      // Check for pending payments\n      checkPendingPayments();\n\n      // Check for plan in route query\n      const planType = route.query.plan;\n      if (planType) {\n        const plan = plans.value.find(p => \n          p.name.toLowerCase().replace(' ', '_') === planType\n        );\n        if (plan) {\n          selectPlan(plan);\n        }\n      }\n    });\n\n    const checkPendingPayments = () => {\n      const pendingPayment = localStorage.getItem('pending_payment');\n      if (pendingPayment) {\n        const payment = JSON.parse(pendingPayment);\n        const timeElapsed = new Date().getTime() - payment.timestamp;\n        \n        // Check if payment was initiated in last 10 minutes\n        if (timeElapsed < 600000) {\n          showStatusModal.value = true;\n          startPaymentStatusCheck(payment.order_id);\n        } else {\n          localStorage.removeItem('pending_payment');\n        }\n      }\n    };\n\n    const selectPlan = (plan) => {\n      console.log('Selected Plan:', plan);\n      selectedPlan.value = plan;\n      showPaymentForm.value = true;\n    };\n\n    const initiatePayment = async () => {\n      try {\n        console.log('Initiating payment for plan:', selectedPlan.value);\n        \n        const orderResponse = await axios.post('/api/payment/create-order/', {\n          amount: selectedPlan.value.price,\n          plan_id: selectedPlan.value.id,\n          phone: user.value?.phone\n        });\n\n        console.log('Order created:', orderResponse.data);\n\n        // Save order details for recovery\n        localStorage.setItem('pending_payment', JSON.stringify({\n          order_id: orderResponse.data.order_id,\n          plan_id: selectedPlan.value.id,\n          amount: selectedPlan.value.price,\n          timestamp: new Date().getTime()\n        }));\n\n        const options = {\n          key: orderResponse.data.key_id,\n          amount: orderResponse.data.amount,\n          currency: orderResponse.data.currency,\n          name: 'Your OTT Platform',\n          description: `${selectedPlan.value.name} Subscription`,\n          order_id: orderResponse.data.order_id,\n          handler: handlePaymentSuccess,\n          prefill: {\n            name: user.value?.name || '',\n            email: user.value?.email || '',\n            contact: user.value?.phone || ''\n          },\n          theme: {\n            color: '#3399cc'\n          },\n          modal: {\n            ondismiss: function() {\n              // Start checking payment status when modal is closed\n              startPaymentStatusCheck(orderResponse.data.order_id);\n            }\n          },\n          config: {\n            display: {\n              blocks: {\n                upi: {\n                  preferred: true,\n                  name: \"UPI\",\n                  instruments: [\n                    { targetApp: \"phonepe\" },\n                    { targetApp: \"googlePay\" },\n                    { targetApp: \"paytm\" },\n                    { targetApp: \"upi\" }\n                  ]\n                }\n              }\n            }\n          }\n        };\n\n        const rzp = new window.Razorpay(options);\n        rzp.open();\n      } catch (error) {\n        console.error('Payment initiation failed:', error);\n        alert('Unable to initiate payment. Please try again.');\n      }\n    };\n\n    const startPaymentStatusCheck = async (orderId) => {\n      showStatusModal.value = true;\n      let attempts = 0;\n      const maxAttempts = 10; // 5 minutes (30 seconds * 10)\n\n      const checkStatus = async () => {\n        try {\n          const response = await axios.get(`/api/payment/check-status/${orderId}/`);\n          \n          if (response.data.status === 'completed') {\n            // Payment successful\n            showStatusModal.value = false;\n            clearInterval(statusCheckInterval.value);\n            localStorage.removeItem('pending_payment');\n            \n            // Show success message\n            alert('Payment successful! Your subscription is now active.');\n            router.push('/profile');\n            return;\n          }\n          \n          attempts++;\n          if (attempts >= maxAttempts) {\n            showStatusModal.value = false;\n            clearInterval(statusCheckInterval.value);\n            alert('Payment status could not be verified. Please contact support.');\n          }\n        } catch (error) {\n          console.error('Status check failed:', error);\n        }\n      };\n\n      // Check immediately\n      await checkStatus();\n      \n      // Then check every 30 seconds\n      statusCheckInterval.value = setInterval(checkStatus, 30000);\n    };\n\n    const handlePaymentSuccess = async (response) => {\n      try {\n        console.log('Payment successful, verifying:', response);\n        \n        const verifyResponse = await axios.post('/api/payment/verify-payment/', {\n          razorpay_payment_id: response.razorpay_payment_id,\n          razorpay_order_id: response.razorpay_order_id,\n          razorpay_signature: response.razorpay_signature,\n          phone: user.value?.phone,\n          plan_id: selectedPlan.value.id\n        });\n\n        if (verifyResponse.data.status === 'success') {\n          localStorage.removeItem('pending_payment');\n          alert('Payment successful! Your subscription is now active.');\n          router.push('/profile');\n        }\n      } catch (error) {\n        console.error('Payment verification failed:', error);\n        alert('Payment verification failed. Please contact support.');\n      }\n    };\n\n    // Cleanup on component unmount\n    onUnmounted(() => {\n      if (statusCheckInterval.value) {\n        clearInterval(statusCheckInterval.value);\n      }\n    });\n\n    return {\n      plans,\n      selectedPlan,\n      showPaymentForm,\n      showStatusModal,\n      selectPlan,\n      initiatePayment\n    };\n  }\n}\n</script>\n\n<style scoped>\n.payment-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.subscription-plans {\n  text-align: center;\n}\n\n.plans {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  margin-top: 30px;\n}\n\n.plan {\n  background: white;\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  cursor: pointer;\n  transition: transform 0.2s;\n  width: 250px;\n}\n\n.plan:hover {\n  transform: translateY(-5px);\n}\n\n.price {\n  font-size: 24px;\n  font-weight: bold;\n  color: #3399cc;\n  margin: 10px 0;\n}\n\n.duration {\n  color: #666;\n  margin-bottom: 15px;\n}\n\n.select-btn {\n  background: #3399cc;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 5px;\n  margin-top: 10px;\n  cursor: pointer;\n  width: 100%;\n}\n\n.payment-summary {\n  max-width: 400px;\n  margin: 20px auto;\n  padding: 20px;\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.pay-btn {\n  background: #3399cc;\n  color: white;\n  border: none;\n  padding: 12px 30px;\n  border-radius: 5px;\n  width: 100%;\n  margin-top: 20px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n.pay-btn:hover, .select-btn:hover {\n  background: #2980b9;\n}\n\n/* Status Modal Styles */\n.status-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n}\n\n.loader {\n  border: 4px solid #f3f3f3;\n  border-top: 4px solid #3498db;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 20px auto;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}