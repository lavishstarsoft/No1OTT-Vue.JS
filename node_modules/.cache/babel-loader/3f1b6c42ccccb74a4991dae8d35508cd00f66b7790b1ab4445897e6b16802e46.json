{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"fixed inset-0 z-50 flex items-center justify-center p-4\"\n};\nconst _hoisted_2 = {\n  class: \"p-0 flex flex-col items-center justify-center\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"flex justify-center mb-4 mt-2\"\n};\nconst _hoisted_4 = [\"src\", \"alt\"];\nconst _hoisted_5 = {\n  key: 1,\n  class: \"text-center mb-4\"\n};\nconst _hoisted_6 = {\n  class: \"block text-3xl font-light tracking-wide text-white mb-1\"\n};\nconst _hoisted_7 = {\n  class: \"block text-3xl font-black italic text-white\",\n  style: {\n    \"font-family\": \"'Arial Black', sans-serif\"\n  }\n};\nconst _hoisted_8 = {\n  key: 2,\n  class: \"text-white/90 text-center mb-6 text-base leading-relaxed\"\n};\nconst _hoisted_9 = {\n  class: \"flex flex-col gap-3 w-full\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $options.shouldShowOnThisPage && $data.showPopup ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Simple dark overlay \"), _createElementVNode(\"div\", {\n    class: \"absolute inset-0 bg-[#000000E8] bg-opacity-95\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.closePopup && $options.closePopup(...args))\n  }), _createCommentVNode(\" Popup card with plain background \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"relative w-auto h-auto max-w-full max-h-full transform transition-all duration-300 scale-100 rounded-xl p-0\", {\n      'scale-100 opacity-100': $data.showPopup,\n      'scale-95 opacity-0': !$data.showPopup\n    }])\n  }, [_createCommentVNode(\" Minimal close button \"), $data.popupConfig.popupSettings?.dismissible ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.closePopup && $options.closePopup(...args)),\n    class: \"absolute -top-6 right-5 w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-gray-100 transition-colors duration-200\",\n    title: \"Close popup\",\n    \"aria-label\": \"Close popup\",\n    style: {\n      \"margin-left\": \"8%\"\n    }\n  }, _cache[4] || (_cache[4] = [_createElementVNode(\"svg\", {\n    class: \"w-5 h-5 text-gray-800\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"2.5\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M6 6l12 12M6 18L18 6\",\n    \"stroke-linecap\": \"round\"\n  })], -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Content with Android modal style \"), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Image at the top center if available \"), $data.popupConfig.popupContent?.imageUrl && !$data.imageError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $data.popupConfig.popupContent.imageUrl,\n    alt: $data.popupConfig.popupContent.title,\n    style: _normalizeStyle({\n      width: typeof $data.popupConfig.popupContent.imageWidth === 'string' ? $data.popupConfig.popupContent.imageWidth : ($data.popupConfig.popupContent.imageWidth || 80) + 'px',\n      height: typeof $data.popupConfig.popupContent.imageHeight === 'string' ? $data.popupConfig.popupContent.imageHeight : ($data.popupConfig.popupContent.imageHeight || 80) + 'px'\n    }),\n    class: \"object-cover rounded-none max-w-full h-auto\",\n    onError: _cache[2] || (_cache[2] = (...args) => $options.handleImageError && $options.handleImageError(...args))\n  }, null, 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_4)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Title with mixed typography \"), $data.popupConfig.popupContent?.title ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_5, [_createElementVNode(\"span\", _hoisted_6, _toDisplayString($data.popupConfig.popupContent.title.split(' ')[0]), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.popupConfig.popupContent.title.split(' ').slice(1).join(' ')), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Clean message text \"), $data.popupConfig.popupContent?.message ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, _toDisplayString($data.popupConfig.popupContent.message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Simple action buttons \"), _createElementVNode(\"div\", _hoisted_9, [$data.popupConfig.popupContent?.buttonText ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.handleAction && $options.handleAction(...args)),\n    class: \"w-full bg-white text-indigo-700 py-3 rounded-lg font-semibold text-base hover:bg-gray-100 transition-colors duration-200 shadow\"\n  }, _toDisplayString($data.popupConfig.popupContent.buttonText), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])], 2 /* CLASS */)])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["class","style","$options","shouldShowOnThisPage","$data","showPopup","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","onClick","_cache","args","closePopup","_normalizeClass","popupConfig","popupSettings","dismissible","title","viewBox","fill","stroke","d","_hoisted_2","popupContent","imageUrl","imageError","_hoisted_3","src","alt","_normalizeStyle","imageWidth","imageHeight","onError","handleImageError","_hoisted_5","_hoisted_6","_toDisplayString","split","_hoisted_7","slice","join","message","_hoisted_8","_hoisted_9","buttonText","handleAction"],"sources":["F:\\OTT\\ott_frontend\\src\\components\\PopupModal.vue"],"sourcesContent":["<template>\n  <div v-if=\"shouldShowOnThisPage && showPopup\" class=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n    <!-- Simple dark overlay -->\n    <div \n      class=\"absolute inset-0 bg-[#000000E8] bg-opacity-95\"\n      @click=\"closePopup\"\n    ></div>\n    \n    <!-- Popup card with plain background -->\n    <div \n      class=\"relative w-auto h-auto max-w-full max-h-full transform transition-all duration-300 scale-100 rounded-xl p-0\"\n      :class=\"{'scale-100 opacity-100': showPopup, 'scale-95 opacity-0': !showPopup}\"\n    >\n      <!-- Minimal close button -->\n      <button \n        v-if=\"popupConfig.popupSettings?.dismissible\"\n        @click=\"closePopup\"\n        class=\"absolute -top-6 right-5 w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-gray-100 transition-colors duration-200\"\n        title=\"Close popup\"\n        aria-label=\"Close popup\"\n        style=\"margin-left: 8%\"\n         >\n        <svg class=\"w-5 h-5 text-gray-800\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\">\n          <path d=\"M6 6l12 12M6 18L18 6\" stroke-linecap=\"round\" />\n        </svg>\n      </button>\n      <!-- Content with Android modal style -->\n      <div class=\"p-0 flex flex-col items-center justify-center\">\n        <!-- Image at the top center if available -->\n        <div v-if=\"popupConfig.popupContent?.imageUrl && !imageError\" class=\"flex justify-center mb-4 mt-2\">\n          <img \n            :src=\"popupConfig.popupContent.imageUrl\" \n            :alt=\"popupConfig.popupContent.title\" \n            :style=\"{\n              width: typeof popupConfig.popupContent.imageWidth === 'string'\n                ? popupConfig.popupContent.imageWidth\n                : (popupConfig.popupContent.imageWidth || 80) + 'px',\n              height: typeof popupConfig.popupContent.imageHeight === 'string'\n                ? popupConfig.popupContent.imageHeight\n                : (popupConfig.popupContent.imageHeight || 80) + 'px'\n            }\"\n            class=\"object-cover rounded-none max-w-full h-auto\" \n            @error=\"handleImageError\" \n          />\n        </div>\n        <!-- Title with mixed typography -->\n        <h2 v-if=\"popupConfig.popupContent?.title\" class=\"text-center mb-4\">\n          <span class=\"block text-3xl font-light tracking-wide text-white mb-1\">{{ popupConfig.popupContent.title.split(' ')[0] }}</span>\n          <span class=\"block text-3xl font-black italic text-white\" style=\"font-family: 'Arial Black', sans-serif;\">{{ popupConfig.popupContent.title.split(' ').slice(1).join(' ') }}</span>\n        </h2>\n        <!-- Clean message text -->\n        <p v-if=\"popupConfig.popupContent?.message\" class=\"text-white/90 text-center mb-6 text-base leading-relaxed\">\n          {{ popupConfig.popupContent.message }}\n        </p>\n        <!-- Simple action buttons -->\n        <div class=\"flex flex-col gap-3 w-full\">\n          <button \n            v-if=\"popupConfig.popupContent?.buttonText\"\n            @click=\"handleAction\"\n            class=\"w-full bg-white text-indigo-700 py-3 rounded-lg font-semibold text-base hover:bg-gray-100 transition-colors duration-200 shadow\"\n          >\n            {{ popupConfig.popupContent.buttonText }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport popupManager from '@/utils/popupManager.js';\n\nexport default {\n  name: 'PopupModal',\n  data() {\n    return {\n      showPopup: false,\n      popupConfig: {\n        showPopup: false,\n        popupContent: {},\n        popupSettings: {}\n      },\n      imageError: false,\n      hasShownPopup: false,\n      currentDevice: 'desktop'\n    }\n  },\n  async mounted() {\n    this.detectDevice();\n    await this.loadPopupConfig();\n    this.checkAndShowPopup();\n  },\n  computed: {\n    shouldShowOnThisPage() {\n      const pages = this.popupConfig.popupSettings?.showOnPages;\n      // If showOnPages not set, show everywhere. Else, only show if current route name is in array.\n      return !pages || pages.includes(this.$route?.name);\n    }\n  },\n  watch: {\n    showPopup(newVal) {\n      if (newVal) {\n        document.body.style.overflow = 'hidden';\n      } else {\n        document.body.style.overflow = '';\n      }\n    }\n  },\n  beforeUnmount() {\n    document.body.style.overflow = '';\n  },\n  methods: {\n    async loadPopupConfig() {\n      try {\n        this.popupConfig = await popupManager.loadConfig();\n      } catch (error) {\n        console.error('Error loading popup config:', error);\n        this.popupConfig = popupManager.getDefaultConfig();\n      }\n    },\n    detectDevice() {\n      this.currentDevice = popupManager.isMobileDevice() ? 'mobile' : 'desktop';\n      console.log('Current device detected:', this.currentDevice);\n    },\n    checkAndShowPopup() {\n      if (popupManager.shouldShowPopup()) {\n        const delay = popupManager.getPopupDelay();\n        setTimeout(() => {\n          this.showPopup = true;\n          this.hasShownPopup = true;\n          this.playPopupSound(); // Play sound when popup opens\n        }, delay);\n      } else {\n        console.log('Popup not shown. Device type:', this.currentDevice, 'Config device type:', this.popupConfig.popupSettings?.deviceType);\n      }\n    },\n    playPopupSound() {\n      const url = this.popupConfig.popupContent?.soundUrl;\n      if (url) {\n        const audio = new Audio(url);\n        audio.play();\n      }\n    },\n    closePopup() {\n      this.showPopup = false;\n      popupManager.markPopupAsShown();\n    },\n    handleAction() {\n      this.closePopup();\n      this.$emit('popup-action');\n    },\n    handleImageError() {\n      this.imageError = true;\n    },\n    showPopupManually() {\n      this.showPopup = true;\n    },\n    resetPopup() {\n      popupManager.resetPopupState();\n      this.hasShownPopup = false;\n      this.showPopup = false;\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* Simple animations */\n.popup-enter-active, .popup-leave-active {\n  transition: all 0.3s ease;\n}\n\n.popup-enter-from, .popup-leave-to {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n/* Clean button focus state */\nbutton:focus-visible {\n  outline: 2px solid #000000FF;\n  outline-offset: 2px;\n}\n\n/* Simple hover effect */\nbutton {\n  position: relative;\n  overflow: hidden;\n}\n\n/* Responsive adjustments */\n@media (max-width: 640px) {\n  .popup-container {\n    margin: 1rem;\n  }\n  \n  h2 {\n    font-size: 1.75rem;\n  }\n  \n  p {\n    font-size: 1rem;\n  }\n}\n\n/* Android style shadow */\n.shadow-2xl {\n  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}