{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'FreeVideos',\n  setup() {\n    const router = useRouter();\n    const freeVideos = ref([]);\n    const currentPage = ref(1);\n    const hasMoreVideos = ref(true);\n    const loading = ref(true);\n    const pageSize = 20;\n    const fetchFreeVideos = async (page = 1) => {\n      try {\n        loading.value = true;\n        // Fetch all videos and filter client-side to ensure we get free videos\n        const response = await axios.get(`https://ott.no1news.in/api/videos/?page=${page}&page_size=${pageSize * 2}&ordering=-created_at`);\n        if (response.data) {\n          // Filter for free videos only (including videos without video_type set)\n          const filtered = response.data.filter(video => video.video_type === 'free' || !video.video_type || video.video_type === null);\n          const processedVideos = filtered.map(video => ({\n            ...video,\n            title: capitalizeText(video.title),\n            description: capitalizeText(video.description)\n          }));\n          if (page === 1) {\n            freeVideos.value = processedVideos;\n          } else {\n            freeVideos.value = [...freeVideos.value, ...processedVideos];\n          }\n\n          // Check if there are more videos\n          hasMoreVideos.value = response.data.length === pageSize * 2;\n          currentPage.value = page;\n        }\n      } catch (error) {\n        console.error('Error fetching free videos:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const loadMoreVideos = () => {\n      if (hasMoreVideos.value) {\n        fetchFreeVideos(currentPage.value + 1);\n      }\n    };\n    const playVideo = video => {\n      router.push({\n        name: 'MovieDetails',\n        params: {\n          id: video.id,\n          videoUrl: video.video_url,\n          videoType: 'hls'\n        }\n      });\n    };\n    const capitalizeText = text => {\n      if (!text) return '';\n      return text.split(/[\\s-]+/).map(word => {\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\n        if (specialWords.includes(word.toUpperCase())) {\n          return word.toUpperCase();\n        }\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\n        if (minorWords.includes(word.toLowerCase())) {\n          return word.toLowerCase();\n        }\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n      }).join(' ');\n    };\n    const isNewVideo = createdAt => {\n      const videoDate = new Date(createdAt);\n      const now = new Date();\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24));\n      return diffDays <= 7;\n    };\n    const formatDuration = seconds => {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = seconds % 60;\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    };\n    onMounted(() => {\n      fetchFreeVideos();\n    });\n    return {\n      freeVideos,\n      hasMoreVideos,\n      loading,\n      loadMoreVideos,\n      playVideo,\n      isNewVideo,\n      formatDuration\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","onMounted","useRouter","name","setup","router","freeVideos","currentPage","hasMoreVideos","loading","pageSize","fetchFreeVideos","page","value","response","get","data","filtered","filter","video","video_type","processedVideos","map","title","capitalizeText","description","length","error","console","loadMoreVideos","playVideo","push","params","id","videoUrl","video_url","videoType","text","split","word","specialWords","includes","toUpperCase","minorWords","toLowerCase","charAt","slice","join","isNewVideo","createdAt","videoDate","Date","now","diffDays","Math","ceil","formatDuration","seconds","minutes","floor","remainingSeconds","toString","padStart"],"sources":["D:\\OTT\\ott_frontend\\ott_frontend\\src\\views\\FreeVideos.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-[#121212] text-white py-6\">\r\n    <div class=\"w-full px-2 md:px-4\">\r\n      <!-- Back Button and Header -->\r\n      <div class=\"flex items-center mb-8 relative px-2 md:px-6\">\r\n        <button \r\n          @click=\"$router.back()\" \r\n          class=\"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10\"\r\n        >\r\n          <i class=\"fas fa-arrow-left text-2xl\"></i>\r\n        </button>\r\n        <div class=\"w-full text-center\">\r\n          <h1 class=\"text-3xl font-bold relative inline-block px-4\">\r\n            Free Videos\r\n            <div class=\"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-green-500 to-green-800\"></div>\r\n          </h1>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"flex justify-center items-center py-8\">\r\n        <div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"></div>\r\n      </div>\r\n\r\n      <!-- Videos Grid -->\r\n      <div v-else class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0\">\r\n        <!-- Show Coming Soon message if no videos -->\r\n        <div v-if=\"freeVideos.length === 0\" class=\"col-span-full flex flex-col items-center justify-center py-16\">\r\n          <i class=\"fas fa-play-circle text-6xl text-gray-600 mb-4\"></i>\r\n          <h2 class=\"text-2xl font-bold text-gray-400 mb-2\">No Free Videos</h2>\r\n          <p class=\"text-gray-500 text-center\">Free videos will be available soon.</p>\r\n        </div>\r\n        \r\n        <!-- Show videos if available -->\r\n        <div \r\n          v-else\r\n          v-for=\"video in freeVideos\" \r\n          :key=\"video.id\"\r\n          class=\"cursor-pointer group transform hover:scale-105 transition-transform duration-200\"\r\n          @click=\"playVideo(video)\"\r\n        >\r\n          <!-- 16:9 Aspect Ratio Container -->\r\n          <div class=\"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2\">\r\n            <img \r\n              :src=\"video.thumbnail_url\" \r\n              :alt=\"video.title\"\r\n              class=\"w-full h-full object-cover\"\r\n            >\r\n            \r\n            <!-- Video badges -->\r\n            <div class=\"absolute top-1 left-1 flex gap-1\">\r\n              <span v-if=\"isNewVideo(video.created_at)\" class=\"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\r\n                NEW\r\n              </span>\r\n              <span class=\"bg-green-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\r\n                FREE\r\n              </span>\r\n            </div>\r\n            \r\n            <!-- Duration badge -->\r\n            <div class=\"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white\">\r\n              {{ formatDuration(video.duration) }}\r\n            </div>\r\n            \r\n            <!-- Play button overlay -->\r\n            <div class=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\">\r\n              <div class=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\r\n                <i class=\"fas fa-play text-sm text-white\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Video Info -->\r\n          <div class=\"px-1\">\r\n            <h3 class=\"text-sm font-medium mb-0.5 line-clamp-2\">{{ video.title }}</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Load More Button -->\r\n      <div v-if=\"hasMoreVideos\" class=\"mt-6 text-center\">\r\n        <button \r\n          @click=\"loadMoreVideos\" \r\n          class=\"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm\"\r\n        >\r\n          Load More\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'FreeVideos',\r\n  setup() {\r\n    const router = useRouter()\r\n    const freeVideos = ref([])\r\n    const currentPage = ref(1)\r\n    const hasMoreVideos = ref(true)\r\n    const loading = ref(true)\r\n    const pageSize = 20\r\n\r\n    const fetchFreeVideos = async (page = 1) => {\r\n      try {\r\n        loading.value = true\r\n        // Fetch all videos and filter client-side to ensure we get free videos\r\n        const response = await axios.get(`https://ott.no1news.in/api/videos/?page=${page}&page_size=${pageSize * 2}&ordering=-created_at`)\r\n        \r\n        if (response.data) {\r\n          // Filter for free videos only (including videos without video_type set)\r\n          const filtered = response.data.filter(video => \r\n            video.video_type === 'free' || \r\n            !video.video_type || \r\n            video.video_type === null\r\n          )\r\n          \r\n          const processedVideos = filtered.map(video => ({\r\n            ...video,\r\n            title: capitalizeText(video.title),\r\n            description: capitalizeText(video.description)\r\n          }))\r\n\r\n          if (page === 1) {\r\n            freeVideos.value = processedVideos\r\n          } else {\r\n            freeVideos.value = [...freeVideos.value, ...processedVideos]\r\n          }\r\n\r\n          // Check if there are more videos\r\n          hasMoreVideos.value = response.data.length === pageSize * 2\r\n          currentPage.value = page\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching free videos:', error)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const loadMoreVideos = () => {\r\n      if (hasMoreVideos.value) {\r\n        fetchFreeVideos(currentPage.value + 1)\r\n      }\r\n    }\r\n\r\n    const playVideo = (video) => {\r\n      router.push({\r\n        name: 'MovieDetails',\r\n        params: { \r\n          id: video.id,\r\n          videoUrl: video.video_url,\r\n          videoType: 'hls'\r\n        }\r\n      })\r\n    }\r\n\r\n    const capitalizeText = (text) => {\r\n      if (!text) return '';\r\n      return text.split(/[\\s-]+/).map(word => {\r\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\r\n        if (specialWords.includes(word.toUpperCase())) {\r\n          return word.toUpperCase();\r\n        }\r\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\r\n        if (minorWords.includes(word.toLowerCase())) {\r\n          return word.toLowerCase();\r\n        }\r\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\r\n      }).join(' ');\r\n    }\r\n\r\n    const isNewVideo = (createdAt) => {\r\n      const videoDate = new Date(createdAt)\r\n      const now = new Date()\r\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24))\r\n      return diffDays <= 7\r\n    }\r\n\r\n    const formatDuration = (seconds) => {\r\n      const minutes = Math.floor(seconds / 60)\r\n      const remainingSeconds = seconds % 60\r\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`\r\n    }\r\n\r\n    onMounted(() => {\r\n      fetchFreeVideos()\r\n    })\r\n\r\n    return {\r\n      freeVideos,\r\n      hasMoreVideos,\r\n      loading,\r\n      loadMoreVideos,\r\n      playVideo,\r\n      isNewVideo,\r\n      formatDuration\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.aspect-video {\r\n  aspect-ratio: 16/9;\r\n}\r\n\r\n/* Add gradient text effect */\r\nh1 {\r\n  background: linear-gradient(to right, #ffffff, #cccccc);\r\n  -webkit-background-clip: text;\r\n  background-clip: text;\r\n  display: inline-block;\r\n  padding-bottom: 4px;\r\n  margin: 0 auto;\r\n}\r\n\r\n/* Add hover effect on back button */\r\nbutton:hover i {\r\n  transform: translateX(-3px);\r\n  transition: transform 0.2s ease;\r\n}\r\n\r\n/* Add line clamp for title */\r\n.line-clamp-2 {\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}