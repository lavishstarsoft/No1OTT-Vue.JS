{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\nimport shaka from 'shaka-player/dist/shaka-player.ui.js';\nimport 'shaka-player/dist/controls.css';\nimport { trackVideoView, trackVideoCompletion } from '@/utils/videoTracking';\nexport default {\n  name: 'AdvancedVideoPlayer',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    poster: {\n      type: String,\n      default: ''\n    },\n    autoplay: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    enableAutoRotate: {\n      type: Boolean,\n      default: true\n    },\n    videoId: {\n      type: [String, Number],\n      default: null\n    }\n  },\n  emits: ['close'],\n  // Add navigation guard to detect route leaving\n  beforeRouteLeave(to, from, next) {\n    console.log('ðŸŽ¬ Route leaving detected, cleaning up video player');\n    this.handleNavigationCleanup();\n    next();\n  },\n  data() {\n    return {\n      player: null,\n      shakaPlayer: null,\n      playerType: null,\n      // 'videojs' or 'shaka'\n      isPlaying: false,\n      currentTime: 0,\n      duration: 0,\n      buffered: 0,\n      isMuted: false,\n      volume: 1,\n      isFullscreen: false,\n      showControls: true,\n      controlsTimeout: null,\n      qualities: ['Auto', '1080p', '720p', '480p', '360p'],\n      selectedQuality: 'Auto',\n      bufferedPercent: 0,\n      playedPercent: 0,\n      isDragging: false,\n      isMobile: false,\n      isLandscape: false,\n      touchStartTime: 0,\n      touchStartX: 0,\n      touchStartY: 0,\n      touchMoved: false,\n      lastTapTime: 0,\n      controlsTimeoutDuration: 2000,\n      // 2 seconds\n      seekThreshold: 50,\n      // Minimum pixels to trigger seek\n      volumeThreshold: 30,\n      // Minimum pixels to trigger volume change\n      seekRate: 10,\n      // Seconds to seek per swipe,\n      isSeeking: false,\n      hasAutoRotated: false,\n      hasShownRotationHint: false,\n      isLoading: true,\n      loadingTimeout: null,\n      userPaused: false,\n      // Track if the user initiated the pause\n      continuousPlayback: true,\n      // Enable continuous playback mode\n      lastPlayTime: 0,\n      // Track last play time for continuity\n      pauseRecoveryAttempts: 0,\n      // Track recovery attempts\n      wasPlayingBeforeSeek: false,\n      // Track if video was playing before seeking\n      originalBodyStyles: {},\n      // Store original body styles\n      hasTrackedView: false,\n      // Track if we've already tracked the view\n      hasTrackedCompletion: false,\n      // Track if we've already tracked completion\n      startTime: null,\n      // Track when playback started\n      totalWatchTime: 0 // Track total watch time\n    };\n  },\n  computed: {\n    volumeIconState() {\n      if (this.isMuted || this.volume === 0) {\n        return 'muted';\n      } else if (this.volume < 0.5) {\n        return 'low';\n      } else {\n        return 'high';\n      }\n    }\n  },\n  mounted() {\n    console.log('ðŸŽ¬ AdvancedVideoPlayer mounted with props:', {\n      src: this.src,\n      title: this.title\n    });\n\n    // Store original body styles before video player takes over\n    this.originalBodyStyles = {\n      overflow: document.body.style.overflow,\n      position: document.body.style.position,\n      height: document.body.style.height,\n      touchAction: document.body.style.touchAction,\n      userSelect: document.body.style.userSelect,\n      pointerEvents: document.body.style.pointerEvents\n    };\n    this.initializePlayer();\n    this.checkMobileDevice();\n    this.checkOrientation();\n\n    // Initialize mobile audio context\n    this.initializeMobileAudioContext();\n\n    // Add window popstate event listener for handling browser back button\n    window.addEventListener('popstate', this.handleBackNavigation);\n\n    // Add orientation change listeners\n    if (this.isMobile) {\n      window.addEventListener('orientationchange', this.handleOrientationChange);\n      window.addEventListener('resize', this.checkOrientation);\n    }\n\n    // Setup orientation listener\n    this.setupOrientationListener();\n  },\n  methods: {\n    checkMobileDevice() {\n      this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && (typeof window.orientation !== 'undefined' || navigator.maxTouchPoints > 0);\n\n      // Add mobile-specific autoplay handling\n      if (this.isMobile && this.autoplay) {\n        // For mobile, we need to handle autoplay differently\n        this.handleMobileAutoplay();\n      }\n    },\n    handleMobileAutoplay() {\n      // Mobile browsers require user interaction for autoplay\n      // We'll start muted and unmute after user interaction\n      if (this.player) {\n        this.player.muted(true);\n        this.player.volume(0.5); // Set volume but keep muted\n        console.log('ðŸŽ¬ Mobile autoplay: Video muted for user interaction');\n      }\n    },\n    // Handle mobile audio permissions and user interaction\n    handleMobileAudioInteraction() {\n      if (this.isMobile && this.player) {\n        try {\n          // Resume audio context if suspended\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n\n          // Unmute video player\n          if (this.player.muted()) {\n            this.player.muted(false);\n            this.player.volume(0.5);\n            console.log('ðŸŽ¬ Mobile: Audio enabled after user interaction');\n          }\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio interaction error:', error);\n        }\n      }\n    },\n    // Mobile-specific audio cleanup\n    handleMobileAudioCleanup() {\n      if (this.isMobile && this.player) {\n        try {\n          // Force stop audio on mobile\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n\n          // For iOS Safari, we need to be more aggressive\n          if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {\n            // Create a silent audio context to stop any background audio\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n            audioContext.close();\n          }\n          console.log('ðŸŽ¬ Mobile audio cleanup completed');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio cleanup error:', error);\n        }\n      }\n    },\n    // Initialize mobile audio context for better audio support\n    initializeMobileAudioContext() {\n      if (this.isMobile) {\n        try {\n          // Create and resume audio context for mobile audio support\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n          console.log('ðŸŽ¬ Mobile audio context initialized');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio context error:', error);\n        }\n      }\n    },\n    setupOrientationListener() {\n      if (this.isMobile && this.enableAutoRotate) {\n        window.addEventListener('orientationchange', this.handleOrientationChange);\n        document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n\n        // Add play state listener - check player type\n        if (this.playerType === 'videojs' && this.player) {\n          this.player.on('play', this.handleFirstPlay);\n        } else if (this.playerType === 'shaka') {\n          // For Shaka Player, use video element events\n          const videoElement = this.$refs.videoElement;\n          if (videoElement) {\n            videoElement.addEventListener('play', this.handleFirstPlay);\n          }\n        }\n      }\n    },\n    async handleFirstPlay() {\n      // Only handle first play\n      if (!this.hasAutoRotated && this.isMobile && this.enableAutoRotate) {\n        this.hasAutoRotated = true;\n        await this.checkAndRotate();\n      }\n      // Remove listener after first play\n      if (this.playerType === 'videojs' && this.player) {\n        this.player.off('play', this.handleFirstPlay);\n      } else if (this.playerType === 'shaka') {\n        const videoElement = this.$refs.videoElement;\n        if (videoElement) {\n          videoElement.removeEventListener('play', this.handleFirstPlay);\n        }\n      }\n    },\n    async checkAndRotate() {\n      // Multiple ways to detect landscape mode\n      let isLandscape = false;\n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        isLandscape = window.innerWidth > window.innerHeight;\n      }\n      if (!isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      }\n    },\n    async handleOrientationChange() {\n      // Wait for orientation change to complete\n      await new Promise(resolve => setTimeout(resolve, 150));\n      const isLandscape = window.orientation === 90 || window.orientation === -90;\n      if (isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      } else if (!isLandscape && this.isFullscreen) {\n        await this.exitFullscreen();\n      }\n    },\n    async enterFullscreen() {\n      if (!this.isFullscreen) {\n        try {\n          const elem = this.$el;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n\n          // Try to lock orientation to landscape\n          if (this.isMobile && window.screen?.orientation?.lock) {\n            try {\n              await window.screen.orientation.lock('landscape');\n            } catch (e) {\n              console.log('Orientation lock not supported');\n            }\n          }\n        } catch (err) {\n          console.error('Fullscreen error:', err);\n        }\n      }\n    },\n    async exitFullscreen() {\n      if (this.isFullscreen) {\n        try {\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n\n          // Force update fullscreen state\n          this.isFullscreen = false;\n\n          // Unlock orientation\n          if (this.isMobile) {\n            this.tryUnlockOrientation();\n          }\n\n          // Reset page styles after exiting fullscreen\n          this.resetPageStyles();\n        } catch (err) {\n          console.error('Exit fullscreen error:', err);\n          // Force reset even if exit fails\n          this.isFullscreen = false;\n          this.resetPageStyles();\n        }\n      }\n    },\n    async toggleFullscreen() {\n      try {\n        if (!this.isFullscreen) {\n          // Enter fullscreen\n          const elem = this.$refs.videoElement.parentElement;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n        } else {\n          // Exit fullscreen\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n        }\n      } catch (error) {\n        console.error('Fullscreen toggle error:', error);\n      }\n    },\n    handleFullscreenChange() {\n      this.isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);\n\n      // Try to lock orientation to landscape if entering fullscreen on mobile\n      if (this.isFullscreen && this.isMobile) {\n        this.tryLockOrientation();\n      } else if (!this.isFullscreen && this.isMobile) {\n        this.tryUnlockOrientation();\n      }\n    },\n    tryLockOrientation() {\n      if (!this.isMobile) return;\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.lock && typeof window.screen.orientation.lock === 'function') {\n          window.screen.orientation.lock('landscape').catch(err => {\n            console.log('Orientation lock not supported or permission denied:', err);\n          });\n        } else if (window.screen?.lockOrientation) {\n          // Fallback for older browsers\n          try {\n            window.screen.lockOrientation('landscape');\n          } catch (err) {\n            console.log('Legacy orientation lock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation lock not supported:', err);\n      }\n    },\n    tryUnlockOrientation() {\n      if (!this.isMobile) return;\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.unlock && typeof window.screen.orientation.unlock === 'function') {\n          // Use Promise.resolve().catch() to safely handle both Promise and non-Promise returns\n          Promise.resolve(window.screen.orientation.unlock()).catch(err => {\n            console.log('Orientation unlock error:', err);\n          });\n        } else if (window.screen?.unlockOrientation && typeof window.screen.unlockOrientation === 'function') {\n          // Fallback for older browsers\n          try {\n            window.screen.unlockOrientation();\n          } catch (err) {\n            console.log('Legacy orientation unlock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation unlock not supported:', err);\n      }\n    },\n    initializePlayer() {\n      const videoElement = this.$refs.videoElement;\n\n      // Add fullscreen change event listeners\n      document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n\n      // Detect format based on file extension\n      const isMPD = this.src.toLowerCase().includes('.mpd');\n      if (isMPD) {\n        // Use Shaka Player for MPD/DASH\n        this.initializeShakaPlayer(videoElement);\n      } else {\n        // Use Video.js for HLS and other formats\n        this.initializeVideoJsPlayer(videoElement);\n      }\n    },\n    initializeShakaPlayer(videoElement) {\n      console.log('ðŸŽ¬ Initializing Shaka Player for MPD');\n      this.playerType = 'shaka';\n\n      // Install Shaka polyfills\n      shaka.polyfill.installAll();\n\n      // Check browser support\n      if (!shaka.Player.isBrowserSupported()) {\n        console.error('Browser not supported for Shaka Player');\n        return;\n      }\n\n      // Create Shaka player - NEW WAY (v4.15+)\n      this.shakaPlayer = new shaka.Player();\n\n      // Attach to video element\n      this.shakaPlayer.attach(videoElement);\n\n      // Configure Shaka player\n      this.shakaPlayer.configure({\n        streaming: {\n          bufferingGoal: 60,\n          rebufferingGoal: 2,\n          bufferBehind: 30\n        },\n        abr: {\n          enabled: true\n        }\n      });\n\n      // Error handling\n      this.shakaPlayer.addEventListener('error', event => {\n        const error = event.detail;\n        console.error('Shaka Player error:', error);\n\n        // Check for CORS errors\n        if (error.code === shaka.util.Error.Code.BAD_HTTP_STATUS || error.code === shaka.util.Error.Code.HTTP_ERROR) {\n          console.error('ðŸš¨ CORS Error: S3 bucket needs CORS configuration');\n          console.error('Add this CORS policy to your S3 bucket:');\n          console.error(JSON.stringify({\n            \"AllowedOrigins\": [\"*\"],\n            \"AllowedMethods\": [\"GET\", \"HEAD\"],\n            \"AllowedHeaders\": [\"*\"],\n            \"ExposeHeaders\": [\"Content-Length\", \"Content-Range\"],\n            \"MaxAgeSeconds\": 3000\n          }, null, 2));\n        }\n        this.handleVideoError(error);\n      });\n\n      // Load the manifest\n      this.shakaPlayer.load(this.src).then(() => {\n        console.log('ðŸŽ¬ MPD manifest loaded successfully');\n        this.isLoading = false;\n\n        // Setup event listeners\n        this.setupShakaEventListeners(videoElement);\n        if (this.autoplay) {\n          videoElement.play().catch(err => console.log('Autoplay prevented:', err));\n        }\n      }).catch(error => {\n        console.error('Error loading MPD:', error);\n\n        // Provide helpful error messages\n        if (error.code === shaka.util.Error.Code.BAD_HTTP_STATUS) {\n          console.error('ðŸš¨ HTTP Error - Check CORS configuration on S3 bucket');\n        } else if (error.code === shaka.util.Error.Code.HTTP_ERROR) {\n          console.error('ðŸš¨ Network Error - CORS policy blocking request');\n        }\n        this.isLoading = false;\n      });\n    },\n    setupShakaEventListeners(videoElement) {\n      // Time update\n      videoElement.addEventListener('timeupdate', () => {\n        this.currentTime = videoElement.currentTime;\n        this.playedPercent = this.currentTime / this.duration * 100;\n      });\n\n      // Duration\n      videoElement.addEventListener('loadedmetadata', () => {\n        this.duration = videoElement.duration;\n        console.log('ðŸŽ¬ Video duration:', this.duration);\n      });\n\n      // Play/Pause\n      videoElement.addEventListener('play', () => {\n        this.isPlaying = true;\n        this.handlePlay();\n      });\n      videoElement.addEventListener('pause', () => {\n        this.isPlaying = false;\n        this.handlePause();\n      });\n      videoElement.addEventListener('ended', () => {\n        this.isPlaying = false;\n        this.handleEnded();\n      });\n\n      // Loading states\n      videoElement.addEventListener('waiting', () => {\n        this.isLoading = true;\n      });\n      videoElement.addEventListener('playing', () => {\n        this.isLoading = false;\n      });\n      videoElement.addEventListener('canplay', () => {\n        this.isLoading = false;\n      });\n    },\n    initializeVideoJsPlayer(videoElement) {\n      console.log('ðŸŽ¬ Initializing Video.js for HLS');\n      this.playerType = 'videojs';\n      this.player = videojs(videoElement, {\n        controls: false,\n        // We'll use custom controls\n        autoplay: this.autoplay,\n        preload: 'auto',\n        fluid: true,\n        html5: {\n          hls: {\n            enableLowInitialPlaylist: true,\n            smoothQualityChange: true,\n            overrideNative: true,\n            handlePartialData: true,\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000,\n            maxBufferHole: 0.1,\n            lowLatencyMode: false,\n            backBufferLength: 60,\n            limitRenditionByPlayerDimensions: false\n          },\n          vhs: {\n            limitRenditionByPlayerDimensions: false,\n            smoothQualityChange: true,\n            maxPlaylistRetries: 10,\n            bufferSize: 60,\n            enableLowInitialPlaylist: true,\n            allowSeeksWithinUnsafeLiveWindow: true,\n            handlePartialData: true,\n            overrideNative: true,\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000,\n            maxBufferHole: 0.1,\n            lowLatencyMode: false,\n            backBufferLength: 60\n          },\n          nativeTextTracks: false,\n          nativeAudioTracks: false,\n          nativeVideoTracks: false\n        },\n        techOrder: ['html5'],\n        playbackRates: [0.5, 1, 1.5, 2],\n        responsive: true,\n        aspectRatio: '16:9',\n        liveui: true,\n        inactivityTimeout: 0,\n        suppressNotSupportedError: true,\n        playsinline: true,\n        'webkit-playsinline': true,\n        errorDisplay: false,\n        muted: this.isMobile,\n        volume: 0.5,\n        poster: this.poster\n      });\n\n      // Set source\n      this.player.src({\n        src: this.src,\n        type: 'application/x-mpegURL'\n      });\n\n      // Add loading event listeners\n      this.player.on('loadstart', () => {\n        console.log('ðŸŽ¬ Video loadstart event fired');\n        this.isLoading = true;\n      });\n      this.player.on('loadeddata', () => {\n        console.log('ðŸŽ¬ Video loadeddata event fired');\n        this.isLoading = false;\n      });\n      this.player.on('waiting', () => {\n        console.log('ðŸŽ¬ Video waiting event fired');\n        this.loadingTimeout = setTimeout(() => {\n          this.isLoading = true;\n        }, 500);\n        if (this.continuousPlayback && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after buffering:', err);\n              });\n            }\n          }, 2000);\n        }\n      });\n      this.player.on('playing', () => {\n        console.log('ðŸŽ¬ Video playing event fired');\n        this.isLoading = false;\n        if (this.loadingTimeout) {\n          clearTimeout(this.loadingTimeout);\n        }\n        if (this.player.muted()) {\n          this.player.muted(false);\n        }\n        this.showControlsTemporarily();\n      });\n      this.player.on('error', error => {\n        console.log('ðŸŽ¬ Video error event fired:', error);\n        this.isLoading = false;\n        this.handleVideoError(error);\n      });\n      this.player.on('canplay', () => {\n        console.log('ðŸŽ¬ Video canplay event fired');\n        this.isLoading = false;\n      });\n      this.player.on('canplaythrough', () => {\n        console.log('ðŸŽ¬ Video canplaythrough event fired');\n        this.isLoading = false;\n      });\n      this.player.on('stalled', () => {\n        console.log('ðŸŽ¬ Video stalled event fired');\n        if (this.isPlaying && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after stall:', err);\n              });\n            }\n          }, 2000);\n        }\n      });\n      this.player.on('suspend', () => {\n        console.log('ðŸŽ¬ Video suspend event fired');\n      });\n      this.player.on('abort', () => {\n        console.log('ðŸŽ¬ Video abort event fired');\n      });\n\n      // Event listeners\n      this.player.on('timeupdate', this.onTimeUpdate);\n      this.player.on('progress', this.onProgress);\n      this.player.on('play', () => {\n        console.log('ðŸŽ¬ Video play event fired');\n        this.isPlaying = true;\n        this.pauseRecoveryAttempts = 0;\n        this.isLoading = false;\n        this.showControlsTemporarily();\n      });\n      this.player.on('pause', () => {\n        console.log('ðŸŽ¬ Video pause event fired');\n        this.isPlaying = false;\n        this.lastPlayTime = this.player.currentTime();\n        if (!this.userPaused && this.continuousPlayback) {\n          this.ensureContinuousPlayback();\n        }\n      });\n      this.player.on('ended', () => {\n        console.log('ðŸŽ¬ Video ended event fired');\n        this.isPlaying = false;\n      });\n      this.player.on('loadedmetadata', () => {\n        this.duration = this.player.duration();\n        console.log('ðŸŽ¬ Video duration:', this.duration);\n        if (this.player.tech().hls) {\n          const qualities = this.player.tech().hls.representations();\n          if (qualities.length > 0) {\n            this.qualities = ['Auto', ...qualities.map(q => `${q.height}p`)];\n          }\n        }\n      });\n\n      // Add visibility change listener\n      document.addEventListener('visibilitychange', this.handleVisibilityChange);\n\n      // Add network recovery listener\n      window.addEventListener('online', this.handleNetworkRecovery);\n\n      // Add page unload listener\n      window.addEventListener('beforeunload', this.handlePageUnload);\n      window.addEventListener('pagehide', this.handlePageUnload);\n\n      // Add event listeners for view tracking\n      this.player.on('play', this.handlePlay);\n      this.player.on('pause', this.handlePause);\n      this.player.on('ended', this.handleEnded);\n      this.player.on('timeupdate', this.handleTimeUpdate);\n    },\n    handlePageUnload() {\n      // Stop all audio when page is unloading\n      if (this.player) {\n        this.player.pause();\n        this.player.muted(true);\n        this.player.volume(0);\n      }\n    },\n    handleVideoError(error) {\n      console.log('ðŸŽ¬ Handling video error:', error);\n      // Try to reload the video after a short delay\n      setTimeout(() => {\n        if (this.player) {\n          this.player.src(this.src);\n          this.player.load();\n          this.player.play().catch(err => {\n            console.log('Failed to play after error recovery:', err);\n            // Try one more time with a longer delay\n            setTimeout(() => {\n              if (this.player) {\n                this.player.play().catch(err2 => {\n                  console.log('Second attempt to play after error failed:', err2);\n                });\n              }\n            }, 3000);\n          });\n        }\n      }, 2000);\n    },\n    // Add network recovery method\n    handleNetworkRecovery() {\n      if (this.player && !this.isPlaying && !this.userPaused && this.continuousPlayback) {\n        console.log('ðŸŽ¬ Attempting network recovery');\n        this.player.play().catch(err => {\n          console.log('Network recovery failed:', err);\n        });\n      }\n    },\n    // Ensure continuous playback\n    ensureContinuousPlayback() {\n      if (this.continuousPlayback && this.player && !this.isPlaying && !this.userPaused) {\n        console.log('ðŸŽ¬ Ensuring continuous playback');\n        this.pauseRecoveryAttempts++;\n        if (this.pauseRecoveryAttempts <= 3) {\n          // Limit recovery attempts\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Continuous playback recovery failed:', err);\n              });\n            }\n          }, 1500 * this.pauseRecoveryAttempts); // Exponential backoff\n        } else {\n          console.log('ðŸŽ¬ Max recovery attempts reached, resetting');\n          this.pauseRecoveryAttempts = 0;\n        }\n      }\n    },\n    handleUnexpectedPause() {\n      // Only auto-resume if it's not a user-initiated pause\n      if (!this.userPaused && this.player && !this.player.ended()) {\n        console.log('ðŸŽ¬ Auto-resuming video after unexpected pause');\n        // Use a longer delay to prevent rapid pause/resume cycles\n        setTimeout(() => {\n          if (this.player && !this.isPlaying && !this.userPaused) {\n            this.player.play().catch(err => {\n              console.log('Failed to auto-resume:', err);\n              // Try one more time with exponential backoff\n              setTimeout(() => {\n                if (this.player && !this.isPlaying && !this.userPaused) {\n                  this.player.play().catch(err2 => {\n                    console.log('Second auto-resume attempt failed:', err2);\n                  });\n                }\n              }, 1000);\n            });\n          }\n        }, 1000); // Increased delay to prevent flickering\n      }\n    },\n    handleVisibilityChange() {\n      if (document.hidden) {\n        // Page is hidden, stop video and audio completely\n        if (this.player) {\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n        }\n      } else {\n        // Page is visible again, resume if it was playing\n        if (this.player && !this.isPlaying && !this.userPaused) {\n          this.player.muted(false);\n          this.player.volume(0.5);\n          this.player.play().catch(err => {\n            console.log('Failed to resume after visibility change:', err);\n          });\n        }\n      }\n    },\n    showControlsTemporarily() {\n      this.showControls = true;\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          // Only hide if we're not seeking or touching\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, this.controlsTimeoutDuration); // Use the configurable duration (2 seconds)\n      }\n    },\n    hideControls() {\n      if (this.isPlaying) {\n        this.showControls = false;\n      }\n    },\n    togglePlay() {\n      const videoElement = this.$refs.videoElement;\n      if (this.playerType === 'shaka') {\n        // Handle Shaka Player\n        if (this.isPlaying) {\n          this.userPaused = true;\n          videoElement.pause();\n        } else {\n          this.userPaused = false;\n          this.handleMobileAudioInteraction();\n          videoElement.play();\n        }\n      } else if (this.player && typeof this.player.paused === 'function') {\n        // Handle Video.js\n        if (this.isPlaying) {\n          this.userPaused = true;\n          this.pauseRecoveryAttempts = 0;\n          this.player.pause();\n        } else {\n          this.userPaused = false;\n          this.pauseRecoveryAttempts = 0;\n          this.handleMobileAudioInteraction();\n          this.player.play();\n        }\n      }\n      this.showControls = true;\n      this.showControlsTemporarily();\n    },\n    onTimeUpdate() {\n      if (!this.player || typeof this.player.currentTime !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      this.currentTime = this.player.currentTime();\n      this.playedPercent = this.currentTime / this.duration * 100;\n    },\n    onProgress() {\n      if (!this.player || typeof this.player.buffered !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      if (this.player.buffered().length > 0) {\n        this.buffered = this.player.buffered().end(0);\n        this.bufferedPercent = this.buffered / this.duration * 100;\n      }\n    },\n    handlePlay() {\n      this.isPlaying = true;\n      // Record start time\n      this.startTime = Date.now();\n\n      // Track view when video starts playing for the first time\n      if (this.videoId && !this.hasTrackedView) {\n        trackVideoView(this.videoId);\n        this.hasTrackedView = true;\n      }\n\n      // Hide loading indicator when video starts playing\n      this.isLoading = false;\n\n      // Start controls hide timer when video starts playing\n      this.showControlsTemporarily();\n    },\n    handlePause() {\n      this.isPlaying = false;\n      // Calculate watch time when paused\n      if (this.startTime) {\n        this.totalWatchTime += (Date.now() - this.startTime) / 1000; // Convert to seconds\n        this.startTime = null;\n      }\n    },\n    handleEnded() {\n      this.isPlaying = false;\n      // Calculate final watch time\n      if (this.startTime) {\n        this.totalWatchTime += (Date.now() - this.startTime) / 1000; // Convert to seconds\n        this.startTime = null;\n      }\n\n      // Track completion\n      if (this.videoId && !this.hasTrackedCompletion) {\n        trackVideoCompletion(this.videoId);\n        this.hasTrackedCompletion = true;\n      }\n    },\n    handleTimeUpdate() {\n      if (this.player) {\n        this.currentTime = this.player.currentTime();\n        this.duration = this.player.duration();\n        this.buffered = this.player.bufferedEnd();\n\n        // Update progress bar\n        if (this.duration > 0) {\n          this.playedPercent = this.currentTime / this.duration * 100;\n          this.bufferedPercent = this.buffered / this.duration * 100;\n        }\n      }\n    },\n    onProgressBarClick(event) {\n      // Only handle click if not dragging (to avoid conflicts with drag events)\n      if (this.isDragging) return;\n\n      // Calculate click position on progress bar\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const progressBarWidth = rect.width;\n      const seekPercent = clickX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n      const videoElement = this.$refs.videoElement;\n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = Math.max(0, Math.min(seekTime, this.duration));\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(Math.max(0, Math.min(seekTime, this.duration)));\n      }\n      this.isSeeking = true;\n      this.isLoading = true;\n      this.showControlsTemporarily();\n    },\n    onProgressChange(event) {\n      const time = parseFloat(event.target.value);\n      const videoElement = this.$refs.videoElement;\n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = time;\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(time);\n      }\n      this.isSeeking = true;\n      this.isLoading = true;\n    },\n    onVolumeChange(event) {\n      if (!this.player || typeof this.player.volume !== 'function') {\n        return;\n      }\n      const volume = parseFloat(event.target.value);\n      this.volume = volume;\n      this.player.volume(volume);\n      this.isMuted = volume === 0;\n    },\n    toggleMute() {\n      this.isMuted = !this.isMuted;\n      this.player.muted(this.isMuted);\n    },\n    skipForward() {\n      const videoElement = this.$refs.videoElement;\n      const newTime = this.currentTime + 10;\n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = Math.min(newTime, this.duration);\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(newTime);\n      }\n      this.isLoading = true;\n      this.showControlsTemporarily();\n    },\n    skipBackward() {\n      const videoElement = this.$refs.videoElement;\n      const newTime = this.currentTime - 10;\n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = Math.max(newTime, 0);\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(newTime);\n      }\n      this.isLoading = true;\n      this.showControlsTemporarily();\n    },\n    formatTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = Math.floor(seconds % 60);\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    },\n    beforeDestroy() {\n      console.log('ðŸŽ¬ Component destroying, starting cleanup');\n      this.performFullCleanup();\n    },\n    // For Vue 3 compatibility\n    beforeUnmount() {\n      console.log('ðŸŽ¬ Component unmounting, starting cleanup');\n      this.performFullCleanup();\n    },\n    // Comprehensive cleanup for component destruction\n    async performFullCleanup() {\n      try {\n        // Perform navigation cleanup\n        await this.handleNavigationCleanup();\n\n        // Clean up all event listeners\n        this.removeAllEventListeners();\n        console.log('ðŸŽ¬ Component cleanup completed successfully');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error during component cleanup:', error);\n        // Still try to clean up what we can\n        this.removeAllEventListeners();\n        this.resetPageStyles();\n      }\n    },\n    // Remove all event listeners\n    removeAllEventListeners() {\n      try {\n        // Remove popstate listener\n        window.removeEventListener('popstate', this.handleBackNavigation);\n\n        // Remove orientation and fullscreen listeners\n        if (this.isMobile && this.enableAutoRotate) {\n          window.removeEventListener('orientationchange', this.handleOrientationChange);\n          window.removeEventListener('resize', this.checkOrientation);\n          document.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange);\n        }\n\n        // Remove visibility change listener\n        document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n\n        // Remove network recovery listener\n        window.removeEventListener('online', this.handleNetworkRecovery);\n\n        // Remove page unload listeners\n        window.removeEventListener('beforeunload', this.handlePageUnload);\n        window.removeEventListener('pagehide', this.handlePageUnload);\n\n        // Remove mouse drag listeners (in case they're still attached)\n        document.removeEventListener('mousemove', this.handleProgressBarMouseMove);\n        document.removeEventListener('mouseup', this.handleProgressBarMouseUp);\n        console.log('ðŸŽ¬ All event listeners removed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error removing event listeners:', error);\n      }\n    },\n    onQualityChange() {\n      if (!this.player || !this.player.tech().hls) return;\n      const qualities = this.player.tech().hls.representations();\n      const selectedHeight = parseInt(this.selectedQuality);\n      if (this.selectedQuality === 'Auto') {\n        // Enable auto quality selection\n        qualities.forEach(q => q.enabled(true));\n      } else {\n        // Enable only selected quality\n        qualities.forEach(q => {\n          q.enabled(q.height === selectedHeight);\n        });\n      }\n    },\n    handleTouch(event) {\n      // Store touch start time and position\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n\n      // Show controls on touch\n      this.showControls = true;\n\n      // Clear any existing timeout\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n\n      // Handle double tap\n      const currentTime = Date.now();\n      const tapLength = currentTime - this.lastTapTime;\n      if (tapLength < 300 && tapLength > 0) {\n        // Double tap detected\n        this.togglePlay();\n        event.preventDefault();\n      }\n      this.lastTapTime = currentTime;\n    },\n    handleTouchEnd(event) {\n      const touchDuration = Date.now() - this.touchStartTime;\n\n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.toggleControlsVisibility();\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n\n      // Start hide timer for controls\n      if (this.isPlaying) {\n        this.startHideTimer();\n      }\n\n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    },\n    toggleControlsVisibility() {\n      this.showControls = !this.showControls;\n      if (this.showControls) {\n        this.startHideTimer();\n      }\n    },\n    handleVideoClick(event) {\n      // Prevent click if we were seeking\n      if (this.isSeeking) {\n        this.isSeeking = false;\n        return;\n      }\n\n      // If clicked on controls, don't toggle\n      if (event.target.closest('.custom-controls-overlay')) {\n        return;\n      }\n\n      // Handle mobile autoplay - unmute on first interaction\n      this.handleMobileAudioInteraction();\n      this.toggleControlsVisibility();\n    },\n    handleTouchStart(event) {\n      // Store initial touch data\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n\n      // Show controls immediately on touch\n      this.showControls = true;\n\n      // Handle mobile audio unmuting on first touch\n      this.handleMobileAudioInteraction();\n\n      // Handle double tap\n      const timeSinceLastTap = this.touchStartTime - this.lastTapTime;\n      if (timeSinceLastTap < 300 && timeSinceLastTap > 0) {\n        // Double tap detected\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.togglePlay();\n          event.preventDefault();\n        }\n      }\n      this.lastTapTime = this.touchStartTime;\n    },\n    handleTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n\n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = clampedX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n\n      // Update video time with throttling for smooth performance\n      if (this.player && typeof this.player.currentTime === 'function') {\n        const newTime = Math.max(0, Math.min(seekTime, this.duration));\n\n        // Only update if the time difference is significant to avoid excessive updates\n        if (Math.abs(newTime - this.currentTime) > 0.5) {\n          this.player.currentTime(newTime);\n\n          // Update UI immediately for responsive feel\n          this.currentTime = newTime;\n          this.playedPercent = newTime / this.duration * 100;\n\n          // Show loading indicator while seeking\n          this.isLoading = true;\n        }\n      }\n      this.isSeeking = true;\n    },\n    startHideTimer() {\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, this.controlsTimeoutDuration); // 2 seconds\n      }\n    },\n    async handleBackClick() {\n      console.log('ðŸŽ¬ Back button clicked');\n\n      // Use comprehensive navigation cleanup\n      await this.handleNavigationCleanup();\n\n      // Emit close event to parent\n      this.$emit('close');\n    },\n    // Comprehensive video player cleanup\n    cleanupVideoPlayer() {\n      console.log('ðŸŽ¬ Starting video player cleanup');\n      if (this.player) {\n        try {\n          // Stop all playback immediately\n          this.player.pause();\n\n          // Mute to stop audio immediately\n          this.player.muted(true);\n\n          // Set volume to 0\n          this.player.volume(0);\n\n          // Mobile-specific audio cleanup\n          this.handleMobileAudioCleanup();\n\n          // Remove all event listeners to prevent memory leaks\n          this.player.off('timeupdate');\n          this.player.off('progress');\n          this.player.off('play');\n          this.player.off('pause');\n          this.player.off('ended');\n          this.player.off('loadedmetadata');\n          this.player.off('loadstart');\n          this.player.off('loadeddata');\n          this.player.off('waiting');\n          this.player.off('playing');\n          this.player.off('error');\n          this.player.off('canplay');\n          this.player.off('canplaythrough');\n          this.player.off('stalled');\n          this.player.off('suspend');\n          this.player.off('abort');\n\n          // Remove all sources\n          this.player.src('');\n\n          // Reset player state\n          this.player.reset();\n\n          // Dispose the player completely\n          this.player.dispose();\n\n          // Clear the player reference\n          this.player = null;\n          console.log('ðŸŽ¬ Video player disposed successfully');\n        } catch (error) {\n          console.error('ðŸŽ¬ Error disposing video player:', error);\n          // Force clear player reference even if disposal fails\n          this.player = null;\n        }\n      }\n\n      // Clear all timeouts\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n        this.controlsTimeout = null;\n      }\n      if (this.loadingTimeout) {\n        clearTimeout(this.loadingTimeout);\n        this.loadingTimeout = null;\n      }\n\n      // Reset component state\n      this.isPlaying = false;\n      this.currentTime = 0;\n      this.duration = 0;\n      this.isLoading = false;\n      this.isFullscreen = false;\n      this.showControls = true;\n      this.isDragging = false;\n      this.isSeeking = false;\n      this.userPaused = false;\n      this.pauseRecoveryAttempts = 0;\n      console.log('ðŸŽ¬ Video player cleanup completed');\n    },\n    handleBackNavigation() {\n      console.log('ðŸŽ¬ Back navigation detected');\n      // Handle browser/mobile back button\n      this.handleNavigationCleanup();\n    },\n    // Comprehensive cleanup for navigation (mobile back button, browser back, route change)\n    async handleNavigationCleanup() {\n      console.log('ðŸŽ¬ Starting navigation cleanup');\n      try {\n        // Exit fullscreen if active\n        if (this.isFullscreen) {\n          await this.exitFullscreen();\n        }\n\n        // Clean up video player completely\n        this.cleanupVideoPlayer();\n\n        // IMMEDIATE emergency scroll reset first\n        this.emergencyScrollReset();\n\n        // Then do comprehensive reset\n        this.resetPageStyles();\n\n        // Force scroll restoration with multiple attempts\n        this.restorePageScroll();\n        console.log('ðŸŽ¬ Navigation cleanup completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Navigation cleanup error:', error);\n        // Emergency fallback\n        this.emergencyScrollReset();\n      }\n    },\n    // Emergency scroll reset - called immediately when navigation happens\n    emergencyScrollReset() {\n      try {\n        console.log('ðŸŽ¬ EMERGENCY SCROLL RESET');\n\n        // Nuclear approach - remove everything that could block scroll\n        document.body.style.cssText = '';\n        document.documentElement.style.cssText = '';\n\n        // Force enable scroll\n        document.body.style.overflow = 'auto';\n        document.body.style.position = 'static';\n        document.body.style.height = 'auto';\n        document.body.style.width = 'auto';\n        document.body.style.transform = 'none';\n        document.body.style.willChange = 'auto';\n        document.body.style.touchAction = 'auto';\n        document.body.style.pointerEvents = 'auto';\n        document.body.style.userSelect = 'auto';\n        document.body.style.webkitUserSelect = 'auto';\n        document.body.style.webkitOverflowScrolling = 'touch';\n\n        // Same for HTML\n        document.documentElement.style.overflow = 'auto';\n        document.documentElement.style.height = 'auto';\n        document.documentElement.style.position = 'static';\n\n        // Remove video classes immediately\n        document.body.classList.remove('vjs-fullscreen', 'video-playing', 'no-scroll');\n        document.documentElement.classList.remove('vjs-fullscreen', 'video-playing', 'no-scroll');\n\n        // Force scroll test\n        window.scrollTo(0, 1);\n        window.scrollTo(0, 0);\n        console.log('ðŸŽ¬ Emergency scroll reset completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Emergency scroll reset error:', error);\n      }\n    },\n    // Reset all body/document styles that might interfere with page scrolling\n    resetPageStyles() {\n      try {\n        console.log('ðŸŽ¬ Starting page styles reset');\n\n        // Restore original styles if available\n        if (this.originalBodyStyles && Object.keys(this.originalBodyStyles).length > 0) {\n          console.log('ðŸŽ¬ Restoring original body styles:', this.originalBodyStyles);\n          document.body.style.overflow = this.originalBodyStyles.overflow || 'auto';\n          document.body.style.position = this.originalBodyStyles.position || 'static';\n          document.body.style.height = this.originalBodyStyles.height || 'auto';\n          document.body.style.touchAction = this.originalBodyStyles.touchAction || 'auto';\n          document.body.style.userSelect = this.originalBodyStyles.userSelect || 'auto';\n          document.body.style.pointerEvents = this.originalBodyStyles.pointerEvents || 'auto';\n        } else {\n          // Fallback: force scrollable styles\n          console.log('ðŸŽ¬ No original styles found, using fallback');\n          document.body.style.overflow = 'auto';\n          document.body.style.position = 'static';\n          document.body.style.height = 'auto';\n          document.body.style.touchAction = 'auto';\n          document.body.style.userSelect = 'auto';\n          document.body.style.pointerEvents = 'auto';\n        }\n\n        // Reset additional problematic styles\n        document.body.style.transform = '';\n        document.body.style.willChange = '';\n        document.body.style.webkitOverflowScrolling = 'touch';\n        document.body.style.minHeight = '100vh';\n\n        // Reset HTML element\n        document.documentElement.style.overflow = 'auto';\n        document.documentElement.style.height = 'auto';\n        document.documentElement.style.position = 'static';\n        document.documentElement.style.touchAction = 'auto';\n\n        // Remove video-related classes\n        document.body.classList.remove('vjs-fullscreen', 'video-playing');\n        document.documentElement.classList.remove('vjs-fullscreen', 'video-playing');\n\n        // Add force scrollable temporarily\n        document.body.classList.add('force-scrollable');\n        setTimeout(() => {\n          document.body.classList.remove('force-scrollable');\n        }, 1000);\n\n        // Reset viewport\n        const viewport = document.querySelector('meta[name=\"viewport\"]');\n        if (viewport) {\n          viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, user-scalable=yes');\n        }\n        console.log('ðŸŽ¬ Page styles reset completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error resetting page styles:', error);\n        // Emergency reset\n        document.body.style.overflow = 'auto';\n        document.documentElement.style.overflow = 'auto';\n        document.body.style.position = 'static';\n        document.body.style.height = 'auto';\n      }\n    },\n    // Force restore page scrolling capability\n    restorePageScroll() {\n      try {\n        console.log('ðŸŽ¬ Starting scroll restoration');\n\n        // Multiple attempts to restore scroll\n        const restoreAttempts = [() => {\n          // Attempt 1: Immediate restoration\n          console.log('ðŸŽ¬ Scroll restore attempt 1');\n          document.body.style.overflow = 'auto';\n          document.documentElement.style.overflow = 'auto';\n          window.scrollTo(0, 0);\n          return Promise.resolve();\n        }, () => {\n          // Attempt 2: Force layout recalculation\n          console.log('ðŸŽ¬ Scroll restore attempt 2');\n          return new Promise(resolve => {\n            setTimeout(() => {\n              document.body.style.height = 'auto';\n              document.body.style.minHeight = '100vh';\n              document.body.style.position = 'static';\n\n              // Force reflow\n              void document.body.offsetHeight;\n              void document.documentElement.offsetHeight;\n\n              // Dispatch resize event\n              window.dispatchEvent(new Event('resize'));\n\n              // Try scroll\n              window.scrollTo(0, 1);\n              window.scrollTo(0, 0);\n              resolve();\n            }, 50);\n          });\n        }, () => {\n          // Attempt 3: DOM manipulation\n          console.log('ðŸŽ¬ Scroll restore attempt 3');\n          return new Promise(resolve => {\n            setTimeout(() => {\n              // Remove all potential scroll blockers\n              const body = document.body;\n              const html = document.documentElement;\n\n              // Clear all inline styles that might block scroll\n              ['overflow', 'position', 'height', 'width', 'transform', 'touchAction'].forEach(prop => {\n                body.style[prop] = '';\n                html.style[prop] = '';\n              });\n\n              // Force essential styles\n              body.style.overflow = 'auto';\n              body.style.position = 'static';\n              body.style.height = 'auto';\n              html.style.overflow = 'auto';\n\n              // Force layout\n              body.offsetHeight;\n              resolve();\n            }, 100);\n          });\n        }, () => {\n          // Attempt 4: Nuclear option\n          console.log('ðŸŽ¬ Scroll restore attempt 4 (nuclear)');\n          return new Promise(resolve => {\n            setTimeout(() => {\n              // Remove all classes that might interfere\n              document.body.className = document.body.className.replace(/vjs-\\S+/g, '');\n              document.documentElement.className = document.documentElement.className.replace(/vjs-\\S+/g, '');\n\n              // Force scroll capability\n              document.body.style.cssText = 'overflow: auto !important; position: static !important; height: auto !important;';\n              document.documentElement.style.cssText = 'overflow: auto !important; height: auto !important;';\n\n              // Try to scroll\n              window.scrollTo(0, 0);\n              resolve();\n            }, 200);\n          });\n        }];\n\n        // Execute attempts sequentially\n        restoreAttempts.reduce((promise, attempt) => {\n          return promise.then(attempt);\n        }, Promise.resolve()).then(() => {\n          console.log('ðŸŽ¬ All scroll restoration attempts completed');\n        });\n      } catch (error) {\n        console.error('ðŸŽ¬ Error restoring page scroll:', error);\n        // Emergency fallback\n        document.body.style.overflow = 'auto';\n        document.documentElement.style.overflow = 'auto';\n        document.body.style.position = 'static';\n        document.body.style.height = 'auto';\n      }\n    },\n    checkOrientation() {\n      // Multiple ways to detect landscape mode\n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        this.isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        this.isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        this.isLandscape = window.innerWidth > window.innerHeight;\n      }\n    },\n    // Mouse drag handlers for smooth seeking (YouTube-like)\n    handleProgressBarMouseDown(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      this.showControls = true;\n      const videoElement = this.$refs.videoElement;\n\n      // Pause video while seeking\n      if (this.playerType === 'shaka' && videoElement && !videoElement.paused) {\n        videoElement.pause();\n        this.wasPlayingBeforeSeek = true;\n      } else if (this.player && this.isPlaying) {\n        this.player.pause();\n        this.wasPlayingBeforeSeek = true;\n      }\n\n      // Seek to clicked position immediately\n      this.updateProgressFromMouse(event);\n\n      // Add global mouse move and up listeners\n      document.addEventListener('mousemove', this.handleProgressBarMouseMove);\n      document.addEventListener('mouseup', this.handleProgressBarMouseUp);\n      this.isLoading = true;\n    },\n    handleProgressBarMouseMove(event) {\n      if (!this.isDragging) return;\n      event.preventDefault();\n      this.updateProgressFromMouse(event);\n    },\n    handleProgressBarMouseUp(event) {\n      if (!this.isDragging) return;\n      event.preventDefault();\n      this.isDragging = false;\n      const videoElement = this.$refs.videoElement;\n\n      // Resume video if it was playing before\n      if (this.wasPlayingBeforeSeek) {\n        if (this.playerType === 'shaka' && videoElement) {\n          videoElement.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        } else if (this.player) {\n          this.player.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        }\n        this.wasPlayingBeforeSeek = false;\n      }\n\n      // Remove global listeners\n      document.removeEventListener('mousemove', this.handleProgressBarMouseMove);\n      document.removeEventListener('mouseup', this.handleProgressBarMouseUp);\n\n      // Hide loading after a delay\n      setTimeout(() => {\n        if (this.playerType === 'shaka' && videoElement && videoElement.readyState >= 2) {\n          this.isLoading = false;\n        } else if (this.player && this.player.readyState() >= 2) {\n          this.isLoading = false;\n        }\n      }, 300);\n      this.isSeeking = false;\n    },\n    updateProgressFromMouse(event) {\n      // Find the progress bar element\n      const progressBar = this.$el.querySelector('.progress-bar');\n      if (!progressBar) return;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const progressBarWidth = rect.width;\n\n      // Clamp to progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = clampedX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n      const videoElement = this.$refs.videoElement;\n      const newTime = Math.max(0, Math.min(seekTime, this.duration));\n\n      // Update video time\n      if (this.playerType === 'shaka' && videoElement) {\n        videoElement.currentTime = newTime;\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        this.player.currentTime(newTime);\n      }\n\n      // Update UI immediately\n      this.currentTime = newTime;\n      this.playedPercent = newTime / this.duration * 100;\n      this.isSeeking = true;\n    },\n    handleProgressBarTouchStart(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n\n      // Show controls when user starts dragging\n      this.showControls = true;\n      this.showControlsTemporarily();\n\n      // Add visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.add('progress-bar-active');\n\n      // Haptic feedback for mobile devices\n      if (navigator.vibrate) {\n        navigator.vibrate(50);\n      }\n\n      // Pause video while seeking for better performance\n      const videoElement = this.$refs.videoElement;\n      if (this.playerType === 'shaka' && videoElement && !videoElement.paused) {\n        videoElement.pause();\n        this.wasPlayingBeforeSeek = true;\n      } else if (this.player && this.isPlaying) {\n        this.player.pause();\n        this.wasPlayingBeforeSeek = true;\n      }\n\n      // Show loading indicator when seeking starts\n      this.isLoading = true;\n    },\n    handleProgressBarTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n\n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = clampedX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n      const videoElement = this.$refs.videoElement;\n      const newTime = Math.max(0, Math.min(seekTime, this.duration));\n\n      // Only update if the time difference is significant to avoid excessive updates\n      if (Math.abs(newTime - this.currentTime) > 0.5) {\n        if (this.playerType === 'shaka' && videoElement) {\n          // For Shaka Player, use video element directly\n          videoElement.currentTime = newTime;\n        } else if (this.player && typeof this.player.currentTime === 'function') {\n          // For Video.js\n          this.player.currentTime(newTime);\n        }\n\n        // Update UI immediately for responsive feel\n        this.currentTime = newTime;\n        this.playedPercent = newTime / this.duration * 100;\n\n        // Show loading indicator while seeking\n        this.isLoading = true;\n      }\n      this.isSeeking = true;\n    },\n    handleProgressBarTouchEnd(event) {\n      this.isDragging = false;\n      const touchDuration = Date.now() - this.touchStartTime;\n\n      // Remove visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.remove('progress-bar-active');\n      const videoElement = this.$refs.videoElement;\n\n      // Resume video if it was playing before\n      if (this.wasPlayingBeforeSeek) {\n        if (this.playerType === 'shaka' && videoElement) {\n          videoElement.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        } else if (this.player) {\n          this.player.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        }\n        this.wasPlayingBeforeSeek = false;\n      }\n\n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        // Calculate position for tap\n        const rect = progressBar.getBoundingClientRect();\n        const clickX = event.changedTouches[0].clientX - rect.left;\n        const progressBarWidth = rect.width;\n        const seekPercent = clickX / progressBarWidth;\n        const seekTime = seekPercent * this.duration;\n        if (this.playerType === 'shaka' && videoElement) {\n          videoElement.currentTime = Math.max(0, Math.min(seekTime, this.duration));\n        } else if (this.player && typeof this.player.currentTime === 'function') {\n          this.player.currentTime(Math.max(0, Math.min(seekTime, this.duration)));\n        }\n\n        // Haptic feedback for tap\n        if (navigator.vibrate) {\n          navigator.vibrate(30);\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n\n      // Hide loading indicator after a short delay if video is ready\n      setTimeout(() => {\n        if (this.playerType === 'shaka' && videoElement && videoElement.readyState >= 2) {\n          this.isLoading = false;\n        } else if (this.player && this.player.readyState() >= 2) {\n          this.isLoading = false;\n        }\n      }, 500);\n\n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    }\n  }\n};","map":{"version":3,"names":["videojs","shaka","trackVideoView","trackVideoCompletion","name","props","src","type","String","required","poster","default","autoplay","Boolean","title","enableAutoRotate","videoId","Number","emits","beforeRouteLeave","to","from","next","console","log","handleNavigationCleanup","data","player","shakaPlayer","playerType","isPlaying","currentTime","duration","buffered","isMuted","volume","isFullscreen","showControls","controlsTimeout","qualities","selectedQuality","bufferedPercent","playedPercent","isDragging","isMobile","isLandscape","touchStartTime","touchStartX","touchStartY","touchMoved","lastTapTime","controlsTimeoutDuration","seekThreshold","volumeThreshold","seekRate","isSeeking","hasAutoRotated","hasShownRotationHint","isLoading","loadingTimeout","userPaused","continuousPlayback","lastPlayTime","pauseRecoveryAttempts","wasPlayingBeforeSeek","originalBodyStyles","hasTrackedView","hasTrackedCompletion","startTime","totalWatchTime","computed","volumeIconState","mounted","overflow","document","body","style","position","height","touchAction","userSelect","pointerEvents","initializePlayer","checkMobileDevice","checkOrientation","initializeMobileAudioContext","window","addEventListener","handleBackNavigation","handleOrientationChange","setupOrientationListener","methods","test","navigator","userAgent","orientation","maxTouchPoints","handleMobileAutoplay","muted","handleMobileAudioInteraction","audioContext","AudioContext","webkitAudioContext","state","resume","error","handleMobileAudioCleanup","pause","close","handleFullscreenChange","on","handleFirstPlay","videoElement","$refs","checkAndRotate","off","removeEventListener","screen","includes","undefined","Math","abs","innerWidth","innerHeight","enterFullscreen","Promise","resolve","setTimeout","exitFullscreen","elem","$el","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","lock","e","err","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","tryUnlockOrientation","resetPageStyles","toggleFullscreen","parentElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","tryLockOrientation","catch","lockOrientation","unlock","unlockOrientation","isMPD","toLowerCase","initializeShakaPlayer","initializeVideoJsPlayer","polyfill","installAll","Player","isBrowserSupported","attach","configure","streaming","bufferingGoal","rebufferingGoal","bufferBehind","abr","enabled","event","detail","code","util","Error","Code","BAD_HTTP_STATUS","HTTP_ERROR","JSON","stringify","handleVideoError","load","then","setupShakaEventListeners","play","handlePlay","handlePause","handleEnded","controls","preload","fluid","html5","hls","enableLowInitialPlaylist","smoothQualityChange","overrideNative","handlePartialData","maxBufferLength","maxMaxBufferLength","maxBufferSize","maxBufferHole","lowLatencyMode","backBufferLength","limitRenditionByPlayerDimensions","vhs","maxPlaylistRetries","bufferSize","allowSeeksWithinUnsafeLiveWindow","nativeTextTracks","nativeAudioTracks","nativeVideoTracks","techOrder","playbackRates","responsive","aspectRatio","liveui","inactivityTimeout","suppressNotSupportedError","playsinline","errorDisplay","clearTimeout","showControlsTemporarily","onTimeUpdate","onProgress","ensureContinuousPlayback","tech","representations","length","map","q","handleVisibilityChange","handleNetworkRecovery","handlePageUnload","handleTimeUpdate","err2","handleUnexpectedPause","ended","hidden","hideControls","togglePlay","paused","end","Date","now","bufferedEnd","onProgressBarClick","progressBar","currentTarget","rect","getBoundingClientRect","clickX","clientX","left","progressBarWidth","width","seekPercent","seekTime","max","min","onProgressChange","time","parseFloat","target","value","onVolumeChange","toggleMute","skipForward","newTime","skipBackward","formatTime","seconds","minutes","floor","remainingSeconds","toString","padStart","beforeDestroy","performFullCleanup","beforeUnmount","removeAllEventListeners","handleProgressBarMouseMove","handleProgressBarMouseUp","onQualityChange","selectedHeight","parseInt","forEach","handleTouch","touches","clientY","tapLength","preventDefault","handleTouchEnd","touchDuration","closest","toggleControlsVisibility","startHideTimer","handleVideoClick","handleTouchStart","timeSinceLastTap","handleTouchMove","touchX","touchY","deltaX","deltaY","clampedX","handleBackClick","$emit","cleanupVideoPlayer","reset","dispose","emergencyScrollReset","restorePageScroll","cssText","documentElement","transform","willChange","webkitUserSelect","webkitOverflowScrolling","classList","remove","scrollTo","Object","keys","minHeight","add","viewport","querySelector","setAttribute","restoreAttempts","offsetHeight","dispatchEvent","Event","html","prop","className","replace","reduce","promise","attempt","handleProgressBarMouseDown","updateProgressFromMouse","readyState","handleProgressBarTouchStart","vibrate","handleProgressBarTouchMove","handleProgressBarTouchEnd","changedTouches"],"sources":["/Users/saisudhakarmanchala/Documents/No1OTT/ott_frontend_mpd/src/components/AdvancedVideoPlayer.vue"],"sourcesContent":["<template>\n  <div class=\"video-wrapper\" \n       @click=\"handleVideoClick\" \n       @touchstart=\"handleTouchStart\" \n       @touchmove=\"handleTouchMove\" \n       @touchend=\"handleTouchEnd\"\n       :class=\"{ 'mobile-view': isMobile }\">\n  <div class=\"video-container\">\n      <video ref=\"videoElement\" class=\"video-js vjs-big-play-centered vjs-theme-ott\" :poster=\"poster\" preload=\"auto\" playsinline webkit-playsinline crossorigin=\"anonymous\" data-setup='{}'>\n        <p class=\"vjs-no-js\">To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video</p>\n    </video>\n\n      <!-- Loading Indicator -->\n      <div v-if=\"isLoading\" class=\"loading-overlay\">\n        <div class=\"loading-spinner\">\n          <svg class=\"spinner-svg\" viewBox=\"0 0 50 50\">\n            <circle class=\"spinner-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"4\"></circle>\n          </svg>\n          <span class=\"loading-text\">Loading...</span>\n        </div>\n      </div>\n\n      <div class=\"custom-controls-overlay\" :class=\"{ 'controls-hidden': !showControls || isLoading }\">\n        <!-- Top Controls -->\n        <div class=\"top-controls\">\n          <div class=\"top-left\">\n            <h3 class=\"video-title\" v-if=\"title\">{{ title }}</h3>\n          </div>\n          \n          <div class=\"top-center\">\n            <!-- Empty center area -->\n          </div>\n          \n          <div class=\"top-right\">\n            <button @click=\"handleBackClick\" class=\"top-control-btn close-btn\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <!-- Center Controls -->\n        <div class=\"center-controls\">\n          <button @click=\"skipBackward\" class=\"center-control-btn skip-backward\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M11 17l-5-5 5-5\"/>\n              <path d=\"M17 17l-5-5 5-5\"/>\n            </svg>\n          </button>\n          \n          <button @click=\"togglePlay\" class=\"center-control-btn play-pause-btn\">\n            <svg v-if=\"!isPlaying\" xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"none\">\n              <polygon points=\"5 3 19 12 5 21 5 3\"/>\n            </svg>\n            <svg v-else xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"none\">\n              <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"/>\n              <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"/>\n            </svg>\n          </button>\n          \n          <button @click=\"skipForward\" class=\"center-control-btn skip-forward\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M7 17l5-5-5-5\"/>\n              <path d=\"M13 17l5-5-5-5\"/>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Mobile Rotation Hint -->\n        <div v-if=\"isMobile && !isLandscape && !hasShownRotationHint\" class=\"rotation-hint\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <path d=\"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9v-3m-9-9a9 9 0 019-9m-9 9v3\"/>\n          </svg>\n          <span>Rotate for fullscreen</span>\n        </div>\n\n        <!-- Bottom Controls -->\n        <div class=\"bottom-controls\">\n          <div class=\"progress-container\">\n            <div class=\"progress-bar\" \n                 @click=\"onProgressBarClick\" \n                 @mousedown=\"handleProgressBarMouseDown\"\n                 @touchstart=\"handleProgressBarTouchStart\" \n                 @touchmove=\"handleProgressBarTouchMove\" \n                 @touchend=\"handleProgressBarTouchEnd\">\n              <div class=\"progress-background\"></div>\n              <div class=\"progress-loaded\" :style=\"{ width: bufferedPercent + '%' }\"></div>\n              <div class=\"progress-played\" :style=\"{ width: playedPercent + '%' }\"></div>\n              <div class=\"progress-thumb\" :style=\"{ left: `calc(${playedPercent}% - 8px)` }\"></div>\n              <input type=\"range\" min=\"0\" :max=\"duration\" :value=\"currentTime\" @input=\"onProgressChange\" @mousedown=\"isDragging = true\" @mouseup=\"isDragging = false\" class=\"progress-slider\">\n            </div>\n            <div class=\"bottom-row\">\n              <div class=\"bottom-left\">\n              <div class=\"time-display\">\n                {{ formatTime(currentTime) }} / {{ formatTime(duration) }}\n              </div>\n              </div>\n              \n              <div class=\"bottom-center\">\n                <!-- Additional bottom controls can go here -->\n              </div>\n              \n              <div class=\"bottom-right\">\n                <!-- Quality Selector -->\n                <div class=\"quality-container\">\n                  <button class=\"bottom-control-btn quality-btn\" @click=\"$refs.qualitySelector && $refs.qualitySelector.focus()\" type=\"button\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <circle cx=\"12\" cy=\"12\" r=\"3\"/>\n                    <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 12 2.6V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z\"/>\n                  </svg>\n                    <span class=\"control-label\">{{ selectedQuality }}</span>\n                </button>\n                <select ref=\"qualitySelector\" v-model=\"selectedQuality\" class=\"quality-selector\" @change=\"onQualityChange\">\n                  <option v-for=\"quality in qualities\" :key=\"quality\" :value=\"quality\">{{ quality }}</option>\n                </select>\n                </div>\n                \n                <!-- Fullscreen Button -->\n                <button v-if=\"!isMobile\" @click=\"toggleFullscreen\" class=\"bottom-control-btn fullscreen-btn\">\n                  <svg v-if=\"!isFullscreen\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path d=\"M8 3H5a2 2 0 0 0-2 2v3\"/>\n                    <path d=\"M21 8V5a2 2 0 0 0-2-2h-3\"/>\n                    <path d=\"M3 16v3a2 2 0 0 0 2 2h3\"/>\n                    <path d=\"M16 21h3a2 2 0 0 0 2-2v-3\"/>\n                  </svg>\n                  <svg v-else xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path d=\"M8 3v3a2 2 0 0 1-2 2H3\"/>\n                    <path d=\"M21 8h-3a2 2 0 0 1-2-2V3\"/>\n                    <path d=\"M3 16h3a2 2 0 0 1 2 2v3\"/>\n                    <path d=\"M16 21v-3a2 2 0 0 1 2-2h3\"/>\n                  </svg>\n                  <span class=\"control-label\"></span>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"controls-row\">\n            <div class=\"left-controls\">\n            </div>\n\n            <div class=\"right-controls\">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\nimport shaka from 'shaka-player/dist/shaka-player.ui.js';\nimport 'shaka-player/dist/controls.css';\nimport { trackVideoView, trackVideoCompletion } from '@/utils/videoTracking';\n\nexport default {\n  name: 'AdvancedVideoPlayer',\n\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    poster: {\n      type: String,\n      default: ''\n    },\n    autoplay: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    enableAutoRotate: {\n      type: Boolean,\n      default: true\n    },\n    videoId: {\n      type: [String, Number],\n      default: null\n    }\n  },\n  emits: ['close'],\n  // Add navigation guard to detect route leaving\n  beforeRouteLeave(to, from, next) {\n    console.log('ðŸŽ¬ Route leaving detected, cleaning up video player');\n    this.handleNavigationCleanup();\n    next();\n  },\n  data() {\n    return {\n      player: null,\n      shakaPlayer: null,\n      playerType: null, // 'videojs' or 'shaka'\n      isPlaying: false,\n      currentTime: 0,\n      duration: 0,\n      buffered: 0,\n      isMuted: false,\n      volume: 1,\n      isFullscreen: false,\n      showControls: true,\n      controlsTimeout: null,\n      qualities: ['Auto', '1080p', '720p', '480p', '360p'],\n      selectedQuality: 'Auto',\n      bufferedPercent: 0,\n      playedPercent: 0,\n      isDragging: false,\n      isMobile: false,\n      isLandscape: false,\n      touchStartTime: 0,\n      touchStartX: 0,\n      touchStartY: 0,\n      touchMoved: false,\n      lastTapTime: 0,\n      controlsTimeoutDuration: 2000, // 2 seconds\n      seekThreshold: 50, // Minimum pixels to trigger seek\n      volumeThreshold: 30, // Minimum pixels to trigger volume change\n      seekRate: 10, // Seconds to seek per swipe,\n      isSeeking: false,\n      hasAutoRotated: false,\n      hasShownRotationHint: false,\n      isLoading: true,\n      loadingTimeout: null,\n      userPaused: false, // Track if the user initiated the pause\n      continuousPlayback: true, // Enable continuous playback mode\n      lastPlayTime: 0, // Track last play time for continuity\n      pauseRecoveryAttempts: 0, // Track recovery attempts\n      wasPlayingBeforeSeek: false, // Track if video was playing before seeking\n      originalBodyStyles: {}, // Store original body styles\n      hasTrackedView: false, // Track if we've already tracked the view\n      hasTrackedCompletion: false, // Track if we've already tracked completion\n      startTime: null, // Track when playback started\n      totalWatchTime: 0 // Track total watch time\n    }\n  },\n  computed: {\n    volumeIconState() {\n      if (this.isMuted || this.volume === 0) {\n        return 'muted';\n      } else if (this.volume < 0.5) {\n        return 'low';\n      } else {\n        return 'high';\n      }\n    }\n  },\n      mounted() {\n      console.log('ðŸŽ¬ AdvancedVideoPlayer mounted with props:', {\n        src: this.src,\n        title: this.title\n      })\n      \n      // Store original body styles before video player takes over\n      this.originalBodyStyles = {\n        overflow: document.body.style.overflow,\n        position: document.body.style.position,\n        height: document.body.style.height,\n        touchAction: document.body.style.touchAction,\n        userSelect: document.body.style.userSelect,\n        pointerEvents: document.body.style.pointerEvents\n      };\n      \n      this.initializePlayer();\n      this.checkMobileDevice();\n      this.checkOrientation();\n\n      // Initialize mobile audio context\n      this.initializeMobileAudioContext();\n\n      // Add window popstate event listener for handling browser back button\n      window.addEventListener('popstate', this.handleBackNavigation);\n\n      // Add orientation change listeners\n      if (this.isMobile) {\n        window.addEventListener('orientationchange', this.handleOrientationChange);\n        window.addEventListener('resize', this.checkOrientation);\n      }\n\n      // Setup orientation listener\n      this.setupOrientationListener();\n    },\n  methods: {\n    checkMobileDevice() {\n      this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) \n        && (typeof window.orientation !== 'undefined' || navigator.maxTouchPoints > 0);\n      \n      // Add mobile-specific autoplay handling\n      if (this.isMobile && this.autoplay) {\n        // For mobile, we need to handle autoplay differently\n        this.handleMobileAutoplay();\n      }\n    },\n\n    handleMobileAutoplay() {\n      // Mobile browsers require user interaction for autoplay\n      // We'll start muted and unmute after user interaction\n      if (this.player) {\n        this.player.muted(true);\n        this.player.volume(0.5); // Set volume but keep muted\n        console.log('ðŸŽ¬ Mobile autoplay: Video muted for user interaction');\n      }\n    },\n\n    // Handle mobile audio permissions and user interaction\n    handleMobileAudioInteraction() {\n      if (this.isMobile && this.player) {\n        try {\n          // Resume audio context if suspended\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n          \n          // Unmute video player\n          if (this.player.muted()) {\n            this.player.muted(false);\n            this.player.volume(0.5);\n            console.log('ðŸŽ¬ Mobile: Audio enabled after user interaction');\n          }\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio interaction error:', error);\n        }\n      }\n    },\n\n    // Mobile-specific audio cleanup\n    handleMobileAudioCleanup() {\n      if (this.isMobile && this.player) {\n        try {\n          // Force stop audio on mobile\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n          \n          // For iOS Safari, we need to be more aggressive\n          if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {\n            // Create a silent audio context to stop any background audio\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n            audioContext.close();\n          }\n          \n          console.log('ðŸŽ¬ Mobile audio cleanup completed');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio cleanup error:', error);\n        }\n      }\n    },\n\n    // Initialize mobile audio context for better audio support\n    initializeMobileAudioContext() {\n      if (this.isMobile) {\n        try {\n          // Create and resume audio context for mobile audio support\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n          console.log('ðŸŽ¬ Mobile audio context initialized');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio context error:', error);\n        }\n      }\n    },\n    \n    setupOrientationListener() {\n      if (this.isMobile && this.enableAutoRotate) {\n        window.addEventListener('orientationchange', this.handleOrientationChange);\n        document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n        \n        // Add play state listener - check player type\n        if (this.playerType === 'videojs' && this.player) {\n          this.player.on('play', this.handleFirstPlay);\n        } else if (this.playerType === 'shaka') {\n          // For Shaka Player, use video element events\n          const videoElement = this.$refs.videoElement;\n          if (videoElement) {\n            videoElement.addEventListener('play', this.handleFirstPlay);\n          }\n        }\n      }\n    },\n\n    async handleFirstPlay() {\n      // Only handle first play\n      if (!this.hasAutoRotated && this.isMobile && this.enableAutoRotate) {\n        this.hasAutoRotated = true;\n        await this.checkAndRotate();\n      }\n      // Remove listener after first play\n      if (this.playerType === 'videojs' && this.player) {\n        this.player.off('play', this.handleFirstPlay);\n      } else if (this.playerType === 'shaka') {\n        const videoElement = this.$refs.videoElement;\n        if (videoElement) {\n          videoElement.removeEventListener('play', this.handleFirstPlay);\n        }\n      }\n    },\n\n    async checkAndRotate() {\n      // Multiple ways to detect landscape mode\n      let isLandscape = false;\n      \n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        isLandscape = window.innerWidth > window.innerHeight;\n      }\n\n      if (!isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      }\n    },\n\n    async handleOrientationChange() {\n      // Wait for orientation change to complete\n      await new Promise(resolve => setTimeout(resolve, 150));\n      \n      const isLandscape = window.orientation === 90 || window.orientation === -90;\n      \n      if (isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      } else if (!isLandscape && this.isFullscreen) {\n        await this.exitFullscreen();\n      }\n    },\n\n    async enterFullscreen() {\n      if (!this.isFullscreen) {\n        try {\n          const elem = this.$el;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n\n          // Try to lock orientation to landscape\n          if (this.isMobile && window.screen?.orientation?.lock) {\n            try {\n              await window.screen.orientation.lock('landscape');\n            } catch (e) {\n              console.log('Orientation lock not supported');\n            }\n          }\n        } catch (err) {\n          console.error('Fullscreen error:', err);\n        }\n      }\n    },\n\n    async exitFullscreen() {\n      if (this.isFullscreen) {\n        try {\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n\n          // Force update fullscreen state\n          this.isFullscreen = false;\n\n          // Unlock orientation\n          if (this.isMobile) {\n            this.tryUnlockOrientation();\n          }\n          \n          // Reset page styles after exiting fullscreen\n          this.resetPageStyles();\n          \n        } catch (err) {\n          console.error('Exit fullscreen error:', err);\n          // Force reset even if exit fails\n          this.isFullscreen = false;\n          this.resetPageStyles();\n        }\n      }\n    },\n\n    async toggleFullscreen() {\n      try {\n        if (!this.isFullscreen) {\n          // Enter fullscreen\n          const elem = this.$refs.videoElement.parentElement;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n        } else {\n          // Exit fullscreen\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n        }\n      } catch (error) {\n        console.error('Fullscreen toggle error:', error);\n      }\n    },\n\n    handleFullscreenChange() {\n      this.isFullscreen = !!(\n        document.fullscreenElement ||\n        document.webkitFullscreenElement ||\n        document.mozFullScreenElement ||\n        document.msFullscreenElement\n      );\n\n      // Try to lock orientation to landscape if entering fullscreen on mobile\n      if (this.isFullscreen && this.isMobile) {\n        this.tryLockOrientation();\n      } else if (!this.isFullscreen && this.isMobile) {\n        this.tryUnlockOrientation();\n      }\n    },\n\n    tryLockOrientation() {\n      if (!this.isMobile) return;\n\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.lock && typeof window.screen.orientation.lock === 'function') {\n          window.screen.orientation.lock('landscape')\n            .catch(err => {\n              console.log('Orientation lock not supported or permission denied:', err);\n            });\n        } else if (window.screen?.lockOrientation) {\n          // Fallback for older browsers\n          try {\n            window.screen.lockOrientation('landscape');\n          } catch (err) {\n            console.log('Legacy orientation lock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation lock not supported:', err);\n      }\n    },\n\n    tryUnlockOrientation() {\n      if (!this.isMobile) return;\n\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.unlock && typeof window.screen.orientation.unlock === 'function') {\n          // Use Promise.resolve().catch() to safely handle both Promise and non-Promise returns\n          Promise.resolve(window.screen.orientation.unlock())\n            .catch(err => {\n              console.log('Orientation unlock error:', err);\n            });\n        } else if (window.screen?.unlockOrientation && typeof window.screen.unlockOrientation === 'function') {\n          // Fallback for older browsers\n          try {\n            window.screen.unlockOrientation();\n          } catch (err) {\n            console.log('Legacy orientation unlock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation unlock not supported:', err);\n      }\n    },\n\n    initializePlayer() {\n      const videoElement = this.$refs.videoElement;\n      \n      // Add fullscreen change event listeners\n      document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n      \n      // Detect format based on file extension\n      const isMPD = this.src.toLowerCase().includes('.mpd');\n      \n      if (isMPD) {\n        // Use Shaka Player for MPD/DASH\n        this.initializeShakaPlayer(videoElement);\n      } else {\n        // Use Video.js for HLS and other formats\n        this.initializeVideoJsPlayer(videoElement);\n      }\n    },\n\n    initializeShakaPlayer(videoElement) {\n      console.log('ðŸŽ¬ Initializing Shaka Player for MPD');\n      this.playerType = 'shaka';\n      \n      // Install Shaka polyfills\n      shaka.polyfill.installAll();\n      \n      // Check browser support\n      if (!shaka.Player.isBrowserSupported()) {\n        console.error('Browser not supported for Shaka Player');\n        return;\n      }\n      \n      // Create Shaka player - NEW WAY (v4.15+)\n      this.shakaPlayer = new shaka.Player();\n      \n      // Attach to video element\n      this.shakaPlayer.attach(videoElement);\n      \n      // Configure Shaka player\n      this.shakaPlayer.configure({\n        streaming: {\n          bufferingGoal: 60,\n          rebufferingGoal: 2,\n          bufferBehind: 30\n        },\n        abr: {\n          enabled: true\n        }\n      });\n      \n      // Error handling\n      this.shakaPlayer.addEventListener('error', (event) => {\n        const error = event.detail;\n        console.error('Shaka Player error:', error);\n        \n        // Check for CORS errors\n        if (error.code === shaka.util.Error.Code.BAD_HTTP_STATUS || \n            error.code === shaka.util.Error.Code.HTTP_ERROR) {\n          console.error('ðŸš¨ CORS Error: S3 bucket needs CORS configuration');\n          console.error('Add this CORS policy to your S3 bucket:');\n          console.error(JSON.stringify({\n            \"AllowedOrigins\": [\"*\"],\n            \"AllowedMethods\": [\"GET\", \"HEAD\"],\n            \"AllowedHeaders\": [\"*\"],\n            \"ExposeHeaders\": [\"Content-Length\", \"Content-Range\"],\n            \"MaxAgeSeconds\": 3000\n          }, null, 2));\n        }\n        \n        this.handleVideoError(error);\n      });\n      \n      // Load the manifest\n      this.shakaPlayer.load(this.src).then(() => {\n        console.log('ðŸŽ¬ MPD manifest loaded successfully');\n        this.isLoading = false;\n        \n        // Setup event listeners\n        this.setupShakaEventListeners(videoElement);\n        \n        if (this.autoplay) {\n          videoElement.play().catch(err => console.log('Autoplay prevented:', err));\n        }\n      }).catch((error) => {\n        console.error('Error loading MPD:', error);\n        \n        // Provide helpful error messages\n        if (error.code === shaka.util.Error.Code.BAD_HTTP_STATUS) {\n          console.error('ðŸš¨ HTTP Error - Check CORS configuration on S3 bucket');\n        } else if (error.code === shaka.util.Error.Code.HTTP_ERROR) {\n          console.error('ðŸš¨ Network Error - CORS policy blocking request');\n        }\n        \n        this.isLoading = false;\n      });\n    },\n\n    setupShakaEventListeners(videoElement) {\n      // Time update\n      videoElement.addEventListener('timeupdate', () => {\n        this.currentTime = videoElement.currentTime;\n        this.playedPercent = (this.currentTime / this.duration) * 100;\n      });\n      \n      // Duration\n      videoElement.addEventListener('loadedmetadata', () => {\n        this.duration = videoElement.duration;\n        console.log('ðŸŽ¬ Video duration:', this.duration);\n      });\n      \n      // Play/Pause\n      videoElement.addEventListener('play', () => {\n        this.isPlaying = true;\n        this.handlePlay();\n      });\n      \n      videoElement.addEventListener('pause', () => {\n        this.isPlaying = false;\n        this.handlePause();\n      });\n      \n      videoElement.addEventListener('ended', () => {\n        this.isPlaying = false;\n        this.handleEnded();\n      });\n      \n      // Loading states\n      videoElement.addEventListener('waiting', () => {\n        this.isLoading = true;\n      });\n      \n      videoElement.addEventListener('playing', () => {\n        this.isLoading = false;\n      });\n      \n      videoElement.addEventListener('canplay', () => {\n        this.isLoading = false;\n      });\n    },\n\n    initializeVideoJsPlayer(videoElement) {\n      console.log('ðŸŽ¬ Initializing Video.js for HLS');\n      this.playerType = 'videojs';\n      \n      this.player = videojs(videoElement, {\n        controls: false, // We'll use custom controls\n        autoplay: this.autoplay,\n        preload: 'auto',\n        fluid: true,\n        html5: {\n          hls: {\n            enableLowInitialPlaylist: true,\n            smoothQualityChange: true,\n            overrideNative: true,\n            handlePartialData: true,\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000,\n            maxBufferHole: 0.1,\n            lowLatencyMode: false,\n            backBufferLength: 60,\n            limitRenditionByPlayerDimensions: false\n          },\n          vhs: {\n            limitRenditionByPlayerDimensions: false,\n            smoothQualityChange: true,\n            maxPlaylistRetries: 10,\n            bufferSize: 60,\n            enableLowInitialPlaylist: true,\n            allowSeeksWithinUnsafeLiveWindow: true,\n            handlePartialData: true,\n            overrideNative: true,\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000,\n            maxBufferHole: 0.1,\n            lowLatencyMode: false,\n            backBufferLength: 60\n          },\n          nativeTextTracks: false,\n          nativeAudioTracks: false,\n          nativeVideoTracks: false\n        },\n        techOrder: ['html5'],\n        playbackRates: [0.5, 1, 1.5, 2],\n        responsive: true,\n        aspectRatio: '16:9',\n        liveui: true,\n        inactivityTimeout: 0,\n        suppressNotSupportedError: true,\n        playsinline: true,\n        'webkit-playsinline': true,\n        errorDisplay: false,\n        muted: this.isMobile,\n        volume: 0.5,\n        poster: this.poster\n      });\n\n      // Set source\n      this.player.src({ src: this.src, type: 'application/x-mpegURL' });\n\n      // Add loading event listeners\n      this.player.on('loadstart', () => {\n        console.log('ðŸŽ¬ Video loadstart event fired')\n        this.isLoading = true;\n      });\n\n      this.player.on('loadeddata', () => {\n        console.log('ðŸŽ¬ Video loadeddata event fired')\n        this.isLoading = false;\n      });\n\n      this.player.on('waiting', () => {\n        console.log('ðŸŽ¬ Video waiting event fired')\n        this.loadingTimeout = setTimeout(() => {\n          this.isLoading = true;\n        }, 500);\n        \n        if (this.continuousPlayback && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after buffering:', err);\n              });\n            }\n          }, 2000);\n        }\n      });\n\n      this.player.on('playing', () => {\n        console.log('ðŸŽ¬ Video playing event fired')\n        this.isLoading = false;\n        if (this.loadingTimeout) {\n          clearTimeout(this.loadingTimeout);\n        }\n        if (this.player.muted()) {\n          this.player.muted(false);\n        }\n        this.showControlsTemporarily();\n      });\n\n      this.player.on('error', (error) => {\n        console.log('ðŸŽ¬ Video error event fired:', error)\n        this.isLoading = false;\n        this.handleVideoError(error);\n      });\n\n      this.player.on('canplay', () => {\n        console.log('ðŸŽ¬ Video canplay event fired')\n        this.isLoading = false;\n      });\n\n      this.player.on('canplaythrough', () => {\n        console.log('ðŸŽ¬ Video canplaythrough event fired')\n        this.isLoading = false;\n      });\n\n      this.player.on('stalled', () => {\n        console.log('ðŸŽ¬ Video stalled event fired')\n        if (this.isPlaying && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after stall:', err);\n              });\n            }\n          }, 2000);\n        }\n      });\n\n      this.player.on('suspend', () => {\n        console.log('ðŸŽ¬ Video suspend event fired')\n      });\n\n      this.player.on('abort', () => {\n        console.log('ðŸŽ¬ Video abort event fired')\n      });\n\n      // Event listeners\n      this.player.on('timeupdate', this.onTimeUpdate);\n      this.player.on('progress', this.onProgress);\n      this.player.on('play', () => {\n        console.log('ðŸŽ¬ Video play event fired')\n        this.isPlaying = true;\n        this.pauseRecoveryAttempts = 0;\n        this.isLoading = false;\n        this.showControlsTemporarily();\n      });\n      this.player.on('pause', () => {\n        console.log('ðŸŽ¬ Video pause event fired')\n        this.isPlaying = false;\n        this.lastPlayTime = this.player.currentTime();\n        \n        if (!this.userPaused && this.continuousPlayback) {\n          this.ensureContinuousPlayback();\n        }\n      });\n      this.player.on('ended', () => {\n        console.log('ðŸŽ¬ Video ended event fired')\n        this.isPlaying = false;\n      });\n      this.player.on('loadedmetadata', () => {\n        this.duration = this.player.duration();\n        console.log('ðŸŽ¬ Video duration:', this.duration)\n        if (this.player.tech().hls) {\n          const qualities = this.player.tech().hls.representations();\n          if (qualities.length > 0) {\n            this.qualities = ['Auto', ...qualities.map(q => `${q.height}p`)];\n          }\n        }\n      });\n\n      // Add visibility change listener\n      document.addEventListener('visibilitychange', this.handleVisibilityChange);\n      \n      // Add network recovery listener\n      window.addEventListener('online', this.handleNetworkRecovery);\n      \n      // Add page unload listener\n      window.addEventListener('beforeunload', this.handlePageUnload);\n      window.addEventListener('pagehide', this.handlePageUnload);\n\n      // Add event listeners for view tracking\n      this.player.on('play', this.handlePlay);\n      this.player.on('pause', this.handlePause);\n      this.player.on('ended', this.handleEnded);\n      this.player.on('timeupdate', this.handleTimeUpdate);\n      \n    },\n\n    handlePageUnload() {\n      // Stop all audio when page is unloading\n      if (this.player) {\n        this.player.pause();\n        this.player.muted(true);\n        this.player.volume(0);\n      }\n    },\n\n    handleVideoError(error) {\n      console.log('ðŸŽ¬ Handling video error:', error);\n      // Try to reload the video after a short delay\n      setTimeout(() => {\n        if (this.player) {\n          this.player.src(this.src);\n          this.player.load();\n          this.player.play().catch(err => {\n            console.log('Failed to play after error recovery:', err);\n            // Try one more time with a longer delay\n            setTimeout(() => {\n              if (this.player) {\n                this.player.play().catch(err2 => {\n                  console.log('Second attempt to play after error failed:', err2);\n                });\n              }\n            }, 3000);\n          });\n        }\n      }, 2000);\n    },\n\n    // Add network recovery method\n    handleNetworkRecovery() {\n      if (this.player && !this.isPlaying && !this.userPaused && this.continuousPlayback) {\n        console.log('ðŸŽ¬ Attempting network recovery');\n        this.player.play().catch(err => {\n          console.log('Network recovery failed:', err);\n        });\n      }\n    },\n\n    // Ensure continuous playback\n    ensureContinuousPlayback() {\n      if (this.continuousPlayback && this.player && !this.isPlaying && !this.userPaused) {\n        console.log('ðŸŽ¬ Ensuring continuous playback');\n        this.pauseRecoveryAttempts++;\n        \n        if (this.pauseRecoveryAttempts <= 3) { // Limit recovery attempts\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Continuous playback recovery failed:', err);\n              });\n            }\n          }, 1500 * this.pauseRecoveryAttempts); // Exponential backoff\n        } else {\n          console.log('ðŸŽ¬ Max recovery attempts reached, resetting');\n          this.pauseRecoveryAttempts = 0;\n        }\n      }\n    },\n\n    handleUnexpectedPause() {\n      // Only auto-resume if it's not a user-initiated pause\n      if (!this.userPaused && this.player && !this.player.ended()) {\n        console.log('ðŸŽ¬ Auto-resuming video after unexpected pause');\n        // Use a longer delay to prevent rapid pause/resume cycles\n        setTimeout(() => {\n          if (this.player && !this.isPlaying && !this.userPaused) {\n            this.player.play().catch(err => {\n              console.log('Failed to auto-resume:', err);\n              // Try one more time with exponential backoff\n              setTimeout(() => {\n                if (this.player && !this.isPlaying && !this.userPaused) {\n                  this.player.play().catch(err2 => {\n                    console.log('Second auto-resume attempt failed:', err2);\n                  });\n                }\n              }, 1000);\n            });\n          }\n        }, 1000); // Increased delay to prevent flickering\n      }\n    },\n\n    handleVisibilityChange() {\n      if (document.hidden) {\n        // Page is hidden, stop video and audio completely\n        if (this.player) {\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n        }\n      } else {\n        // Page is visible again, resume if it was playing\n        if (this.player && !this.isPlaying && !this.userPaused) {\n          this.player.muted(false);\n          this.player.volume(0.5);\n          this.player.play().catch(err => {\n            console.log('Failed to resume after visibility change:', err);\n          });\n        }\n      }\n    },\n\n    showControlsTemporarily() {\n      this.showControls = true;\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          // Only hide if we're not seeking or touching\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, this.controlsTimeoutDuration); // Use the configurable duration (2 seconds)\n      }\n    },\n    \n    hideControls() {\n      if (this.isPlaying) {\n        this.showControls = false;\n      }\n    },\n\n    togglePlay() {\n      const videoElement = this.$refs.videoElement;\n      \n      if (this.playerType === 'shaka') {\n        // Handle Shaka Player\n        if (this.isPlaying) {\n          this.userPaused = true;\n          videoElement.pause();\n        } else {\n          this.userPaused = false;\n          this.handleMobileAudioInteraction();\n          videoElement.play();\n        }\n      } else if (this.player && typeof this.player.paused === 'function') {\n        // Handle Video.js\n        if (this.isPlaying) {\n          this.userPaused = true;\n          this.pauseRecoveryAttempts = 0;\n          this.player.pause();\n        } else {\n          this.userPaused = false;\n          this.pauseRecoveryAttempts = 0;\n          this.handleMobileAudioInteraction();\n          this.player.play();\n        }\n      }\n      this.showControls = true;\n      this.showControlsTemporarily();\n    },\n\n    onTimeUpdate() {\n      if (!this.player || typeof this.player.currentTime !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      this.currentTime = this.player.currentTime();\n      this.playedPercent = (this.currentTime / this.duration) * 100;\n    },\n\n    onProgress() {\n      if (!this.player || typeof this.player.buffered !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      if (this.player.buffered().length > 0) {\n        this.buffered = this.player.buffered().end(0);\n        this.bufferedPercent = (this.buffered / this.duration) * 100;\n      }\n    },\n\n    handlePlay() {\n      this.isPlaying = true;\n      // Record start time\n      this.startTime = Date.now();\n      \n      // Track view when video starts playing for the first time\n      if (this.videoId && !this.hasTrackedView) {\n        trackVideoView(this.videoId);\n        this.hasTrackedView = true;\n      }\n      \n      // Hide loading indicator when video starts playing\n      this.isLoading = false;\n      \n      // Start controls hide timer when video starts playing\n      this.showControlsTemporarily();\n    },\n\n    handlePause() {\n      this.isPlaying = false;\n      // Calculate watch time when paused\n      if (this.startTime) {\n        this.totalWatchTime += (Date.now() - this.startTime) / 1000; // Convert to seconds\n        this.startTime = null;\n      }\n    },\n\n    handleEnded() {\n      this.isPlaying = false;\n      // Calculate final watch time\n      if (this.startTime) {\n        this.totalWatchTime += (Date.now() - this.startTime) / 1000; // Convert to seconds\n        this.startTime = null;\n      }\n      \n      // Track completion\n      if (this.videoId && !this.hasTrackedCompletion) {\n        trackVideoCompletion(this.videoId);\n        this.hasTrackedCompletion = true;\n      }\n    },\n\n    handleTimeUpdate() {\n      if (this.player) {\n        this.currentTime = this.player.currentTime();\n        this.duration = this.player.duration();\n        this.buffered = this.player.bufferedEnd();\n        \n        // Update progress bar\n        if (this.duration > 0) {\n          this.playedPercent = (this.currentTime / this.duration) * 100;\n          this.bufferedPercent = (this.buffered / this.duration) * 100;\n        }\n      }\n    },\n\n\n\n\n\n    onProgressBarClick(event) {\n      // Only handle click if not dragging (to avoid conflicts with drag events)\n      if (this.isDragging) return;\n      \n      // Calculate click position on progress bar\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const progressBarWidth = rect.width;\n      const seekPercent = (clickX / progressBarWidth);\n      const seekTime = seekPercent * this.duration;\n      \n      const videoElement = this.$refs.videoElement;\n      \n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = Math.max(0, Math.min(seekTime, this.duration));\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(Math.max(0, Math.min(seekTime, this.duration)));\n      }\n      \n      this.isSeeking = true;\n      this.isLoading = true;\n      this.showControlsTemporarily();\n    },\n\n    onProgressChange(event) {\n      const time = parseFloat(event.target.value);\n      const videoElement = this.$refs.videoElement;\n      \n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = time;\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(time);\n      }\n      \n      this.isSeeking = true;\n      this.isLoading = true;\n    },\n\n    onVolumeChange(event) {\n      if (!this.player || typeof this.player.volume !== 'function') {\n        return;\n      }\n      const volume = parseFloat(event.target.value);\n      this.volume = volume;\n      this.player.volume(volume);\n      this.isMuted = volume === 0;\n    },\n\n    toggleMute() {\n      this.isMuted = !this.isMuted;\n      this.player.muted(this.isMuted);\n    },\n\n    skipForward() {\n      const videoElement = this.$refs.videoElement;\n      const newTime = this.currentTime + 10;\n      \n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = Math.min(newTime, this.duration);\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(newTime);\n      }\n      \n      this.isLoading = true;\n      this.showControlsTemporarily();\n    },\n\n    skipBackward() {\n      const videoElement = this.$refs.videoElement;\n      const newTime = this.currentTime - 10;\n      \n      if (this.playerType === 'shaka' && videoElement) {\n        // For Shaka Player, use video element directly\n        videoElement.currentTime = Math.max(newTime, 0);\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        // For Video.js\n        this.player.currentTime(newTime);\n      }\n      \n      this.isLoading = true;\n      this.showControlsTemporarily();\n    },\n\n    formatTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = Math.floor(seconds % 60);\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    },\n\n    beforeDestroy() {\n      console.log('ðŸŽ¬ Component destroying, starting cleanup');\n      this.performFullCleanup();\n    },\n\n    // For Vue 3 compatibility\n    beforeUnmount() {\n      console.log('ðŸŽ¬ Component unmounting, starting cleanup');\n      this.performFullCleanup();\n    },\n\n    // Comprehensive cleanup for component destruction\n    async performFullCleanup() {\n      try {\n        // Perform navigation cleanup\n        await this.handleNavigationCleanup();\n      \n      // Clean up all event listeners\n        this.removeAllEventListeners();\n        \n        console.log('ðŸŽ¬ Component cleanup completed successfully');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error during component cleanup:', error);\n        // Still try to clean up what we can\n        this.removeAllEventListeners();\n        this.resetPageStyles();\n      }\n    },\n\n    // Remove all event listeners\n    removeAllEventListeners() {\n      try {\n        // Remove popstate listener\n        window.removeEventListener('popstate', this.handleBackNavigation);\n        \n        // Remove orientation and fullscreen listeners\n      if (this.isMobile && this.enableAutoRotate) {\n        window.removeEventListener('orientationchange', this.handleOrientationChange);\n          window.removeEventListener('resize', this.checkOrientation);\n        document.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n        document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n        document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange);\n        document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange);\n      }\n        \n      // Remove visibility change listener\n      document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n        \n      // Remove network recovery listener\n      window.removeEventListener('online', this.handleNetworkRecovery);\n        \n      // Remove page unload listeners\n      window.removeEventListener('beforeunload', this.handlePageUnload);\n      window.removeEventListener('pagehide', this.handlePageUnload);\n      \n      // Remove mouse drag listeners (in case they're still attached)\n      document.removeEventListener('mousemove', this.handleProgressBarMouseMove);\n      document.removeEventListener('mouseup', this.handleProgressBarMouseUp);\n      \n        console.log('ðŸŽ¬ All event listeners removed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error removing event listeners:', error);\n      }\n    },\n\n\n    onQualityChange() {\n      if (!this.player || !this.player.tech().hls) return;\n      \n      const qualities = this.player.tech().hls.representations();\n      const selectedHeight = parseInt(this.selectedQuality);\n      \n      if (this.selectedQuality === 'Auto') {\n        // Enable auto quality selection\n        qualities.forEach(q => q.enabled(true));\n      } else {\n        // Enable only selected quality\n        qualities.forEach(q => {\n          q.enabled(q.height === selectedHeight);\n        });\n      }\n    },\n\n    handleTouch(event) {\n      // Store touch start time and position\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n\n      // Show controls on touch\n      this.showControls = true;\n      \n      // Clear any existing timeout\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      // Handle double tap\n      const currentTime = Date.now();\n      const tapLength = currentTime - this.lastTapTime;\n      \n      if (tapLength < 300 && tapLength > 0) {\n        // Double tap detected\n        this.togglePlay();\n        event.preventDefault();\n      }\n      \n      this.lastTapTime = currentTime;\n    },\n\n    handleTouchEnd(event) {\n      const touchDuration = Date.now() - this.touchStartTime;\n      \n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.toggleControlsVisibility();\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n      \n      // Start hide timer for controls\n      if (this.isPlaying) {\n        this.startHideTimer();\n      }\n\n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    },\n\n    toggleControlsVisibility() {\n      this.showControls = !this.showControls;\n      if (this.showControls) {\n        this.startHideTimer();\n      }\n    },\n\n    handleVideoClick(event) {\n      // Prevent click if we were seeking\n      if (this.isSeeking) {\n        this.isSeeking = false;\n        return;\n      }\n\n      // If clicked on controls, don't toggle\n      if (event.target.closest('.custom-controls-overlay')) {\n        return;\n      }\n\n      // Handle mobile autoplay - unmute on first interaction\n      this.handleMobileAudioInteraction();\n\n      this.toggleControlsVisibility();\n    },\n\n    handleTouchStart(event) {\n      // Store initial touch data\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n\n      // Show controls immediately on touch\n      this.showControls = true;\n      \n      // Handle mobile audio unmuting on first touch\n      this.handleMobileAudioInteraction();\n      \n      // Handle double tap\n      const timeSinceLastTap = this.touchStartTime - this.lastTapTime;\n      if (timeSinceLastTap < 300 && timeSinceLastTap > 0) {\n        // Double tap detected\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.togglePlay();\n          event.preventDefault();\n        }\n      }\n      this.lastTapTime = this.touchStartTime;\n    },\n\n    handleTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n\n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n      \n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = (clampedX / progressBarWidth);\n      const seekTime = seekPercent * this.duration;\n      \n      // Update video time with throttling for smooth performance\n      if (this.player && typeof this.player.currentTime === 'function') {\n        const newTime = Math.max(0, Math.min(seekTime, this.duration));\n        \n        // Only update if the time difference is significant to avoid excessive updates\n        if (Math.abs(newTime - this.currentTime) > 0.5) {\n          this.player.currentTime(newTime);\n          \n          // Update UI immediately for responsive feel\n          this.currentTime = newTime;\n          this.playedPercent = (newTime / this.duration) * 100;\n          \n          // Show loading indicator while seeking\n          this.isLoading = true;\n        }\n      }\n      \n      this.isSeeking = true;\n    },\n\n    startHideTimer() {\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, this.controlsTimeoutDuration); // 2 seconds\n      }\n    },\n\n    async handleBackClick() {\n      console.log('ðŸŽ¬ Back button clicked');\n      \n      // Use comprehensive navigation cleanup\n      await this.handleNavigationCleanup();\n      \n      // Emit close event to parent\n      this.$emit('close');\n    },\n\n    // Comprehensive video player cleanup\n    cleanupVideoPlayer() {\n      console.log('ðŸŽ¬ Starting video player cleanup');\n      \n      if (this.player) {\n        try {\n          // Stop all playback immediately\n          this.player.pause();\n          \n          // Mute to stop audio immediately\n          this.player.muted(true);\n          \n          // Set volume to 0\n          this.player.volume(0);\n          \n          // Mobile-specific audio cleanup\n          this.handleMobileAudioCleanup();\n          \n          // Remove all event listeners to prevent memory leaks\n          this.player.off('timeupdate');\n          this.player.off('progress');\n          this.player.off('play');\n          this.player.off('pause');\n          this.player.off('ended');\n          this.player.off('loadedmetadata');\n          this.player.off('loadstart');\n          this.player.off('loadeddata');\n          this.player.off('waiting');\n          this.player.off('playing');\n          this.player.off('error');\n          this.player.off('canplay');\n          this.player.off('canplaythrough');\n          this.player.off('stalled');\n          this.player.off('suspend');\n          this.player.off('abort');\n          \n          // Remove all sources\n          this.player.src('');\n          \n          // Reset player state\n          this.player.reset();\n          \n          // Dispose the player completely\n          this.player.dispose();\n          \n          // Clear the player reference\n          this.player = null;\n          \n          console.log('ðŸŽ¬ Video player disposed successfully');\n        } catch (error) {\n          console.error('ðŸŽ¬ Error disposing video player:', error);\n          // Force clear player reference even if disposal fails\n          this.player = null;\n        }\n      }\n      \n      // Clear all timeouts\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n        this.controlsTimeout = null;\n      }\n      \n      if (this.loadingTimeout) {\n        clearTimeout(this.loadingTimeout);\n        this.loadingTimeout = null;\n      }\n      \n      // Reset component state\n      this.isPlaying = false;\n      this.currentTime = 0;\n      this.duration = 0;\n      this.isLoading = false;\n      this.isFullscreen = false;\n      this.showControls = true;\n      this.isDragging = false;\n      this.isSeeking = false;\n      this.userPaused = false;\n      this.pauseRecoveryAttempts = 0;\n      \n      console.log('ðŸŽ¬ Video player cleanup completed');\n    },\n\n    handleBackNavigation() {\n      console.log('ðŸŽ¬ Back navigation detected');\n      // Handle browser/mobile back button\n      this.handleNavigationCleanup();\n    },\n\n    // Comprehensive cleanup for navigation (mobile back button, browser back, route change)\n    async handleNavigationCleanup() {\n      console.log('ðŸŽ¬ Starting navigation cleanup');\n      \n      try {\n        // Exit fullscreen if active\n      if (this.isFullscreen) {\n          await this.exitFullscreen();\n        }\n        \n        // Clean up video player completely\n        this.cleanupVideoPlayer();\n        \n        // IMMEDIATE emergency scroll reset first\n        this.emergencyScrollReset();\n        \n        // Then do comprehensive reset\n        this.resetPageStyles();\n        \n        // Force scroll restoration with multiple attempts\n        this.restorePageScroll();\n        \n        console.log('ðŸŽ¬ Navigation cleanup completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Navigation cleanup error:', error);\n        // Emergency fallback\n        this.emergencyScrollReset();\n      }\n    },\n\n    // Emergency scroll reset - called immediately when navigation happens\n    emergencyScrollReset() {\n      try {\n        console.log('ðŸŽ¬ EMERGENCY SCROLL RESET');\n        \n        // Nuclear approach - remove everything that could block scroll\n        document.body.style.cssText = '';\n        document.documentElement.style.cssText = '';\n        \n        // Force enable scroll\n        document.body.style.overflow = 'auto';\n        document.body.style.position = 'static';\n        document.body.style.height = 'auto';\n        document.body.style.width = 'auto';\n        document.body.style.transform = 'none';\n        document.body.style.willChange = 'auto';\n        document.body.style.touchAction = 'auto';\n        document.body.style.pointerEvents = 'auto';\n        document.body.style.userSelect = 'auto';\n        document.body.style.webkitUserSelect = 'auto';\n        document.body.style.webkitOverflowScrolling = 'touch';\n        \n        // Same for HTML\n        document.documentElement.style.overflow = 'auto';\n        document.documentElement.style.height = 'auto';\n        document.documentElement.style.position = 'static';\n        \n        // Remove video classes immediately\n        document.body.classList.remove('vjs-fullscreen', 'video-playing', 'no-scroll');\n        document.documentElement.classList.remove('vjs-fullscreen', 'video-playing', 'no-scroll');\n        \n        // Force scroll test\n        window.scrollTo(0, 1);\n        window.scrollTo(0, 0);\n        \n        console.log('ðŸŽ¬ Emergency scroll reset completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Emergency scroll reset error:', error);\n      }\n    },\n\n    // Reset all body/document styles that might interfere with page scrolling\n    resetPageStyles() {\n      try {\n        console.log('ðŸŽ¬ Starting page styles reset');\n        \n        // Restore original styles if available\n        if (this.originalBodyStyles && Object.keys(this.originalBodyStyles).length > 0) {\n          console.log('ðŸŽ¬ Restoring original body styles:', this.originalBodyStyles);\n          document.body.style.overflow = this.originalBodyStyles.overflow || 'auto';\n          document.body.style.position = this.originalBodyStyles.position || 'static';\n          document.body.style.height = this.originalBodyStyles.height || 'auto';\n          document.body.style.touchAction = this.originalBodyStyles.touchAction || 'auto';\n          document.body.style.userSelect = this.originalBodyStyles.userSelect || 'auto';\n          document.body.style.pointerEvents = this.originalBodyStyles.pointerEvents || 'auto';\n        } else {\n          // Fallback: force scrollable styles\n          console.log('ðŸŽ¬ No original styles found, using fallback');\n          document.body.style.overflow = 'auto';\n          document.body.style.position = 'static';\n          document.body.style.height = 'auto';\n          document.body.style.touchAction = 'auto';\n          document.body.style.userSelect = 'auto';\n          document.body.style.pointerEvents = 'auto';\n        }\n        \n        // Reset additional problematic styles\n        document.body.style.transform = '';\n        document.body.style.willChange = '';\n        document.body.style.webkitOverflowScrolling = 'touch';\n        document.body.style.minHeight = '100vh';\n        \n        // Reset HTML element\n        document.documentElement.style.overflow = 'auto';\n        document.documentElement.style.height = 'auto';\n        document.documentElement.style.position = 'static';\n        document.documentElement.style.touchAction = 'auto';\n        \n        // Remove video-related classes\n        document.body.classList.remove('vjs-fullscreen', 'video-playing');\n        document.documentElement.classList.remove('vjs-fullscreen', 'video-playing');\n        \n        // Add force scrollable temporarily\n        document.body.classList.add('force-scrollable');\n        setTimeout(() => {\n          document.body.classList.remove('force-scrollable');\n        }, 1000);\n        \n        // Reset viewport\n        const viewport = document.querySelector('meta[name=\"viewport\"]');\n        if (viewport) {\n          viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, user-scalable=yes');\n        }\n        \n        console.log('ðŸŽ¬ Page styles reset completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error resetting page styles:', error);\n        // Emergency reset\n        document.body.style.overflow = 'auto';\n        document.documentElement.style.overflow = 'auto';\n        document.body.style.position = 'static';\n        document.body.style.height = 'auto';\n      }\n    },\n\n    // Force restore page scrolling capability\n    restorePageScroll() {\n      try {\n        console.log('ðŸŽ¬ Starting scroll restoration');\n        \n        // Multiple attempts to restore scroll\n        const restoreAttempts = [\n          () => {\n            // Attempt 1: Immediate restoration\n            console.log('ðŸŽ¬ Scroll restore attempt 1');\n            document.body.style.overflow = 'auto';\n            document.documentElement.style.overflow = 'auto';\n            window.scrollTo(0, 0);\n            return Promise.resolve();\n          },\n          () => {\n            // Attempt 2: Force layout recalculation\n            console.log('ðŸŽ¬ Scroll restore attempt 2');\n            return new Promise(resolve => {\n              setTimeout(() => {\n                document.body.style.height = 'auto';\n                document.body.style.minHeight = '100vh';\n                document.body.style.position = 'static';\n                \n                // Force reflow\n                void document.body.offsetHeight;\n                void document.documentElement.offsetHeight;\n                \n                // Dispatch resize event\n                window.dispatchEvent(new Event('resize'));\n                \n                // Try scroll\n                window.scrollTo(0, 1);\n                window.scrollTo(0, 0);\n                \n                resolve();\n              }, 50);\n            });\n          },\n          () => {\n            // Attempt 3: DOM manipulation\n            console.log('ðŸŽ¬ Scroll restore attempt 3');\n            return new Promise(resolve => {\n              setTimeout(() => {\n                // Remove all potential scroll blockers\n                const body = document.body;\n                const html = document.documentElement;\n                \n                // Clear all inline styles that might block scroll\n                ['overflow', 'position', 'height', 'width', 'transform', 'touchAction'].forEach(prop => {\n                  body.style[prop] = '';\n                  html.style[prop] = '';\n                });\n                \n                // Force essential styles\n                body.style.overflow = 'auto';\n                body.style.position = 'static';\n                body.style.height = 'auto';\n                html.style.overflow = 'auto';\n                \n                // Force layout\n                body.offsetHeight;\n                \n                resolve();\n              }, 100);\n            });\n          },\n          () => {\n            // Attempt 4: Nuclear option\n            console.log('ðŸŽ¬ Scroll restore attempt 4 (nuclear)');\n            return new Promise(resolve => {\n              setTimeout(() => {\n                // Remove all classes that might interfere\n                document.body.className = document.body.className.replace(/vjs-\\S+/g, '');\n                document.documentElement.className = document.documentElement.className.replace(/vjs-\\S+/g, '');\n                \n                // Force scroll capability\n                document.body.style.cssText = 'overflow: auto !important; position: static !important; height: auto !important;';\n                document.documentElement.style.cssText = 'overflow: auto !important; height: auto !important;';\n                \n                // Try to scroll\n                window.scrollTo(0, 0);\n                \n                resolve();\n              }, 200);\n            });\n          }\n        ];\n        \n        // Execute attempts sequentially\n        restoreAttempts.reduce((promise, attempt) => {\n          return promise.then(attempt);\n        }, Promise.resolve()).then(() => {\n          console.log('ðŸŽ¬ All scroll restoration attempts completed');\n        });\n        \n      } catch (error) {\n        console.error('ðŸŽ¬ Error restoring page scroll:', error);\n        // Emergency fallback\n        document.body.style.overflow = 'auto';\n        document.documentElement.style.overflow = 'auto';\n        document.body.style.position = 'static';\n        document.body.style.height = 'auto';\n      }\n    },\n\n    checkOrientation() {\n      // Multiple ways to detect landscape mode\n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        this.isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        this.isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        this.isLandscape = window.innerWidth > window.innerHeight;\n      }\n    },\n\n    // Mouse drag handlers for smooth seeking (YouTube-like)\n    handleProgressBarMouseDown(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      this.showControls = true;\n      \n      const videoElement = this.$refs.videoElement;\n      \n      // Pause video while seeking\n      if (this.playerType === 'shaka' && videoElement && !videoElement.paused) {\n        videoElement.pause();\n        this.wasPlayingBeforeSeek = true;\n      } else if (this.player && this.isPlaying) {\n        this.player.pause();\n        this.wasPlayingBeforeSeek = true;\n      }\n      \n      // Seek to clicked position immediately\n      this.updateProgressFromMouse(event);\n      \n      // Add global mouse move and up listeners\n      document.addEventListener('mousemove', this.handleProgressBarMouseMove);\n      document.addEventListener('mouseup', this.handleProgressBarMouseUp);\n      \n      this.isLoading = true;\n    },\n\n    handleProgressBarMouseMove(event) {\n      if (!this.isDragging) return;\n      \n      event.preventDefault();\n      this.updateProgressFromMouse(event);\n    },\n\n    handleProgressBarMouseUp(event) {\n      if (!this.isDragging) return;\n      \n      event.preventDefault();\n      this.isDragging = false;\n      \n      const videoElement = this.$refs.videoElement;\n      \n      // Resume video if it was playing before\n      if (this.wasPlayingBeforeSeek) {\n        if (this.playerType === 'shaka' && videoElement) {\n          videoElement.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        } else if (this.player) {\n          this.player.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        }\n        this.wasPlayingBeforeSeek = false;\n      }\n      \n      // Remove global listeners\n      document.removeEventListener('mousemove', this.handleProgressBarMouseMove);\n      document.removeEventListener('mouseup', this.handleProgressBarMouseUp);\n      \n      // Hide loading after a delay\n      setTimeout(() => {\n        if (this.playerType === 'shaka' && videoElement && videoElement.readyState >= 2) {\n          this.isLoading = false;\n        } else if (this.player && this.player.readyState() >= 2) {\n          this.isLoading = false;\n        }\n      }, 300);\n      \n      this.isSeeking = false;\n    },\n\n    updateProgressFromMouse(event) {\n      // Find the progress bar element\n      const progressBar = this.$el.querySelector('.progress-bar');\n      if (!progressBar) return;\n      \n      const rect = progressBar.getBoundingClientRect();\n      const clickX = event.clientX - rect.left;\n      const progressBarWidth = rect.width;\n      \n      // Clamp to progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = clampedX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n      \n      const videoElement = this.$refs.videoElement;\n      const newTime = Math.max(0, Math.min(seekTime, this.duration));\n      \n      // Update video time\n      if (this.playerType === 'shaka' && videoElement) {\n        videoElement.currentTime = newTime;\n      } else if (this.player && typeof this.player.currentTime === 'function') {\n        this.player.currentTime(newTime);\n      }\n      \n      // Update UI immediately\n      this.currentTime = newTime;\n      this.playedPercent = (newTime / this.duration) * 100;\n      this.isSeeking = true;\n    },\n\n    handleProgressBarTouchStart(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n      \n      // Show controls when user starts dragging\n      this.showControls = true;\n      this.showControlsTemporarily();\n      \n      // Add visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.add('progress-bar-active');\n      \n      // Haptic feedback for mobile devices\n      if (navigator.vibrate) {\n        navigator.vibrate(50);\n      }\n      \n      // Pause video while seeking for better performance\n      const videoElement = this.$refs.videoElement;\n      if (this.playerType === 'shaka' && videoElement && !videoElement.paused) {\n        videoElement.pause();\n        this.wasPlayingBeforeSeek = true;\n      } else if (this.player && this.isPlaying) {\n        this.player.pause();\n        this.wasPlayingBeforeSeek = true;\n      }\n      \n      // Show loading indicator when seeking starts\n      this.isLoading = true;\n    },\n\n    handleProgressBarTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n      \n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n      \n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = (clampedX / progressBarWidth);\n      const seekTime = seekPercent * this.duration;\n      \n      const videoElement = this.$refs.videoElement;\n      const newTime = Math.max(0, Math.min(seekTime, this.duration));\n      \n      // Only update if the time difference is significant to avoid excessive updates\n      if (Math.abs(newTime - this.currentTime) > 0.5) {\n        if (this.playerType === 'shaka' && videoElement) {\n          // For Shaka Player, use video element directly\n          videoElement.currentTime = newTime;\n        } else if (this.player && typeof this.player.currentTime === 'function') {\n          // For Video.js\n          this.player.currentTime(newTime);\n        }\n        \n        // Update UI immediately for responsive feel\n        this.currentTime = newTime;\n        this.playedPercent = (newTime / this.duration) * 100;\n        \n        // Show loading indicator while seeking\n        this.isLoading = true;\n      }\n      \n      this.isSeeking = true;\n    },\n\n    handleProgressBarTouchEnd(event) {\n      this.isDragging = false;\n      const touchDuration = Date.now() - this.touchStartTime;\n      \n      // Remove visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.remove('progress-bar-active');\n      \n      const videoElement = this.$refs.videoElement;\n      \n      // Resume video if it was playing before\n      if (this.wasPlayingBeforeSeek) {\n        if (this.playerType === 'shaka' && videoElement) {\n          videoElement.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        } else if (this.player) {\n          this.player.play().catch(err => {\n            console.log('Failed to resume after seek:', err);\n          });\n        }\n        this.wasPlayingBeforeSeek = false;\n      }\n      \n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        // Calculate position for tap\n        const rect = progressBar.getBoundingClientRect();\n        const clickX = event.changedTouches[0].clientX - rect.left;\n        const progressBarWidth = rect.width;\n        const seekPercent = (clickX / progressBarWidth);\n        const seekTime = seekPercent * this.duration;\n        \n        if (this.playerType === 'shaka' && videoElement) {\n          videoElement.currentTime = Math.max(0, Math.min(seekTime, this.duration));\n        } else if (this.player && typeof this.player.currentTime === 'function') {\n          this.player.currentTime(Math.max(0, Math.min(seekTime, this.duration)));\n        }\n        \n        // Haptic feedback for tap\n        if (navigator.vibrate) {\n          navigator.vibrate(30);\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n      \n      // Hide loading indicator after a short delay if video is ready\n      setTimeout(() => {\n        if (this.playerType === 'shaka' && videoElement && videoElement.readyState >= 2) {\n          this.isLoading = false;\n        } else if (this.player && this.player.readyState() >= 2) {\n          this.isLoading = false;\n        }\n      }, 500);\n      \n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    },\n\n\n\n  }\n}\n</script>\n\n<style>\n.video-wrapper {\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  background: #000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  /* Add transform-style for better 3D rendering */\n  transform-style: preserve-3d;\n  /* Add will-change to optimize performance */\n  will-change: transform;\n  /* Force hardware acceleration */\n  -webkit-transform: translateZ(0);\n  -moz-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  -o-transform: translateZ(0);\n  transform: translateZ(0);\n  /* Prevent subpixel rendering */\n  backface-visibility: hidden;\n}\n\n.video-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* Add transform-style for better 3D rendering */\n  transform-style: preserve-3d;\n  /* Force GPU acceleration */\n  -webkit-transform: translateZ(0);\n  -moz-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  -o-transform: translateZ(0);\n  transform: translateZ(0);\n}\n\n.video-js {\n  width: 100% !important;\n  height: 100% !important;\n  position: absolute;\n  top: 0;\n  left: 0;\n  /* Change object-fit to contain for better scaling */\n  object-fit: contain !important;\n  /* Add transform properties for stability */\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  /* Prevent flickering */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.video-js video {\n  /* Change object-fit to contain for better scaling */\n  object-fit: contain !important;\n  width: 100%;\n  height: 100%;\n  /* Add transform properties for stability */\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  /* Force pixel alignment */\n  transform-style: preserve-3d;\n  /* Prevent flickering */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* Add specific styles for 4K displays */\n@media screen and (min-width: 3840px) {\n  .video-js,\n  .video-js video {\n    /* Ensure smooth scaling on 4K */\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: crisp-edges;\n  }\n}\n\n/* Ensure fullscreen mode works properly */\n.video-js.vjs-fullscreen {\n  width: 100vw !important;\n  height: 100vh !important;\n}\n\n.video-js.vjs-fullscreen video {\n  object-fit: contain;\n}\n\n.custom-controls-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    to bottom,\n    rgba(0, 0, 0, 0.9) 0%,\n    rgba(0, 0, 0, 0.3) 10%,\n    rgba(0, 0, 0, 0.1) 25%,\n    rgba(0, 0, 0, 0) 40%,\n    rgba(0, 0, 0, 0) 60%,\n    rgba(0, 0, 0, 0.1) 75%,\n    rgba(0, 0, 0, 0.6) 90%,\n    rgba(0, 0, 0, 0.95) 100%\n  );\n  opacity: 1;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 24px 32px;\n  z-index: 9999;\n  pointer-events: auto;\n  /* Remove backdrop blur that was affecting video */\n}\n\n.top-controls {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.top-left {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.top-center {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n\n.top-right {\n  display: flex;\n  align-items: center;\n}\n\n.top-control-btn {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 8px;\n  cursor: pointer;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n}\n\n.top-control-btn:hover {\n  background: rgba(0, 0, 0, 0.85);\n  border-color: rgba(255, 255, 255, 0.5);\n  transform: scale(1.05);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);\n}\n\n.top-control-btn svg {\n  width: 20px;\n  height: 20px;\n  stroke: white;\n  stroke-width: 2.5;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8));\n}\n\n.close-btn svg {\n  width: 24px;\n  height: 24px;\n}\n\n\n\n.back-button {\n  background: rgba(42, 42, 42, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: white;\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  padding: 0;\n  margin-right: 16px;\n  /* Removed backdrop blur to prevent video blurring */\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.back-button:hover {\n  background: rgba(60, 60, 60, 0.9);\n  border-color: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.back-button:active {\n  transform: translateY(0) scale(0.96);\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3), 0 1px 4px rgba(0, 0, 0, 0.2);\n}\n\n.back-button svg {\n  width: 24px;\n  height: 24px;\n  stroke: white;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));\n}\n\n.video-title {\n  color: white;\n  margin: 0;\n  font-size: 1.4em;\n  font-weight: 700;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8), 0 4px 16px rgba(0, 0, 0, 0.4);\n  letter-spacing: 0.3px;\n  line-height: 1.3;\n  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;\n}\n\n.center-controls {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 60px;\n  margin: 0;\n  padding: 40px 0;\n}\n\n.center-control-btn {\n  background: rgba(0, 0, 0, 0.6);\n  border: 2px solid rgba(255, 255, 255, 0.4);\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  padding: 12px;\n  border-radius: 50%;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.center-control-btn:hover {\n  transform: scale(1.1);\n  background: rgba(0, 0, 0, 0.8);\n  border-color: rgba(255, 255, 255, 0.6);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.8);\n}\n\n.center-control-btn svg {\n  filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.8));\n}\n\n.skip-backward,\n.skip-forward {\n  position: relative;\n}\n\n.skip-text {\n  position: absolute;\n  bottom: -8px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 14px;\n  font-weight: 600;\n  color: white;\n  text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);\n}\n\n.play-pause-btn {\n  background: rgba(0, 0, 0, 0.7);\n  border: 3px solid rgba(255, 255, 255, 0.5);\n  border-radius: 50%;\n  width: 70px;\n  height: 70px;\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n}\n\n.play-pause-btn:hover {\n  background: rgba(0, 0, 0, 0.85);\n  border-color: rgba(255, 255, 255, 0.7);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.8);\n}\n\n.bottom-controls {\n  display: flex;\n  flex-direction: column;\n  gap: 8px; /* reduced from 15px */\n  margin-bottom: 0; /* ensure no extra margin */\n  padding-bottom: 0; /* ensure no extra padding */\n}\n\n.progress-container {\n  display: flex;\n  flex-direction: column;\n  gap: 3px;\n  margin-bottom: 0;\n  padding-bottom: 0;\n}\n\n.bottom-row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  margin-top: 12px;\n}\n\n.bottom-left {\n  display: flex;\n  align-items: center;\n}\n\n.bottom-center {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n\n.bottom-right {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.quality-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.bottom-control-btn {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  cursor: pointer;\n  padding: 10px 14px;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n}\n\n.bottom-control-btn:hover {\n  background: rgba(0, 0, 0, 0.85);\n  border-color: rgba(255, 255, 255, 0.5);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);\n}\n\n.bottom-control-btn svg {\n  width: 18px;\n  height: 18px;\n  stroke: white;\n  stroke-width: 2.5;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8));\n}\n\n.control-label {\n  color: white;\n  font-size: 14px;\n  font-weight: 500;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);\n}\n\n.progress-bar {\n  position: relative;\n  height: 6px;\n  width: 100%;\n  cursor: pointer;\n  background: rgba(255, 255, 255, 0.25);\n  border-radius: 8px;\n  overflow: visible;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 2px rgba(0, 0, 0, 0.2);\n  /* Removed backdrop blur to prevent video blurring */\n}\n\n.progress-bar:hover {\n  height: 10px;\n  background: rgba(255, 255, 255, 0.35);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4), inset 0 1px 3px rgba(0, 0, 0, 0.3);\n  transform: scaleY(1.2);\n}\n\n.progress-background,\n.progress-loaded,\n.progress-played {\n  position: absolute;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n\n.progress-loaded {\n  background: rgba(255, 255, 255, 0.4);\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.progress-played {\n  background: linear-gradient(90deg, #e50914 0%, #ff1744 50%, #e50914 100%);\n  box-shadow: 0 0 20px rgba(229, 9, 20, 0.5), 0 0 10px rgba(229, 9, 20, 0.3);\n  border-radius: 8px;\n  position: relative;\n  transition: all 0.3s ease;\n}\n\n.progress-played::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);\n  border-radius: 8px;\n  animation: shimmer 2s infinite;\n}\n\n@keyframes shimmer {\n  0% { transform: translateX(-100%); }\n  100% { transform: translateX(100%); }\n}\n\n.progress-thumb {\n  position: absolute;\n  top: 50%;\n  width: 20px;\n  height: 20px;\n  background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);\n  border: 3px solid #e50914;\n  border-radius: 50%;\n  transform: translateY(-50%);\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  box-shadow: 0 4px 12px rgba(229, 9, 20, 0.4), 0 2px 6px rgba(0, 0, 0, 0.3);\n  opacity: 0;\n  pointer-events: none;\n  z-index: 15;\n}\n\n.progress-bar:hover .progress-thumb {\n  opacity: 1;\n  transform: translateY(-50%) scale(1.2);\n  box-shadow: 0 6px 20px rgba(229, 9, 20, 0.6), 0 3px 10px rgba(0, 0, 0, 0.4);\n}\n\n.progress-slider {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: pointer;\n  margin: 0;\n  z-index: 10;\n}\n\n.controls-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10px;\n}\n\n.control-button {\n  background: rgba(42, 42, 42, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  color: white;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  position: relative;\n  margin: 0 8px;\n  /* Removed backdrop blur to prevent video blurring */\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3), 0 3px 12px rgba(0, 0, 0, 0.2);\n}\n\n.control-button:hover {\n  background: rgba(60, 60, 60, 0.95);\n  border-color: rgba(255, 255, 255, 0.25);\n  transform: translateY(-3px) scale(1.08);\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4), 0 6px 16px rgba(0, 0, 0, 0.3);\n}\n\n.control-button:active {\n  transform: translateY(-1px) scale(1.02);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.control-button svg {\n  width: 28px;\n  height: 28px;\n  stroke: white;\n  stroke-width: 2.5;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));\n}\n\n.play-button {\n  width: 80px;\n  height: 60px;\n  background: linear-gradient(135deg, rgba(229, 9, 20, 0.95) 0%, rgba(179, 7, 16, 0.95) 100%);\n  border: 2px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 8px 32px rgba(229, 9, 20, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);\n  position: relative;\n  overflow: hidden;\n  border-radius: 30px;\n}\n\n.play-button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 50%);\n  border-radius: 50%;\n  transition: opacity 0.3s ease;\n  opacity: 0;\n}\n\n.play-button:hover::before {\n  opacity: 1;\n}\n\n.play-button:hover {\n  background: linear-gradient(135deg, rgba(229, 9, 20, 1) 0%, rgba(179, 7, 16, 1) 100%);\n  border-color: rgba(255, 255, 255, 0.3);\n  transform: translateY(-4px) scale(1.1);\n  box-shadow: 0 16px 40px rgba(229, 9, 20, 0.5), 0 8px 20px rgba(0, 0, 0, 0.4);\n}\n\n/* Secondary Button Design - Same width and height as play button */\n.play-button.secondary {\n  width: 80px;\n  height: 60px;\n  background: linear-gradient(135deg, rgba(0, 150, 136, 0.95) 0%, rgba(0, 121, 107, 0.95) 100%);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 8px 32px rgba(0, 150, 136, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);\n  position: relative;\n  overflow: hidden;\n  border-radius: 30px;\n}\n\n.play-button.secondary::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 50%);\n  border-radius: 50%;\n  transition: opacity 0.3s ease;\n  opacity: 0;\n}\n\n.play-button.secondary:hover::before {\n  opacity: 1;\n}\n\n.play-button.secondary:hover {\n  background: linear-gradient(135deg, rgba(0, 150, 136, 1) 0%, rgba(0, 121, 107, 1) 100%);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-4px) scale(1.1);\n  box-shadow: 0 16px 40px rgba(0, 150, 136, 0.5), 0 8px 20px rgba(0, 0, 0, 0.4);\n}\n\n/* Alternative Secondary Button Design - Blue Theme */\n.play-button.secondary-blue {\n  width: 80px;\n  height: 60px;\n  background: linear-gradient(135deg, rgba(33, 150, 243, 0.95) 0%, rgba(25, 118, 210, 0.95) 100%);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 8px 32px rgba(33, 150, 243, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);\n  position: relative;\n  overflow: hidden;\n  border-radius: 30px;\n}\n\n.play-button.secondary-blue::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 50%);\n  border-radius: 50%;\n  transition: opacity 0.3s ease;\n  opacity: 0;\n}\n\n.play-button.secondary-blue:hover::before {\n  opacity: 1;\n}\n\n.play-button.secondary-blue:hover {\n  background: linear-gradient(135deg, rgba(33, 150, 243, 1) 0%, rgba(25, 118, 210, 1) 100%);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-4px) scale(1.1);\n  box-shadow: 0 16px 40px rgba(33, 150, 243, 0.5), 0 8px 20px rgba(0, 0, 0, 0.4);\n}\n\n/* Purple Secondary Button Design */\n.play-button.secondary-purple {\n  width: 80px;\n  height: 60px;\n  background: linear-gradient(135deg, rgba(156, 39, 176, 0.95) 0%, rgba(123, 31, 162, 0.95) 100%);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 8px 32px rgba(156, 39, 176, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);\n  position: relative;\n  overflow: hidden;\n  border-radius: 30px;\n}\n\n.play-button.secondary-purple::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 50%);\n  border-radius: 50%;\n  transition: opacity 0.3s ease;\n  opacity: 0;\n}\n\n.play-button.secondary-purple:hover::before {\n  opacity: 1;\n}\n\n.play-button.secondary-purple:hover {\n  background: linear-gradient(135deg, rgba(156, 39, 176, 1) 0%, rgba(123, 31, 162, 1) 100%);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-4px) scale(1.1);\n  box-shadow: 0 16px 40px rgba(156, 39, 176, 0.5), 0 8px 20px rgba(0, 0, 0, 0.4);\n}\n\n/* Orange Secondary Button Design */\n.play-button.secondary-orange {\n  width: 80px;\n  height: 60px;\n  background: linear-gradient(135deg, rgba(255, 152, 0, 0.95) 0%, rgba(245, 124, 0, 0.95) 100%);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 8px 32px rgba(255, 152, 0, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);\n  position: relative;\n  overflow: hidden;\n  border-radius: 30px;\n}\n\n.play-button.secondary-orange::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 50%);\n  border-radius: 50%;\n  transition: opacity 0.3s ease;\n  opacity: 0;\n}\n\n.play-button.secondary-orange:hover::before {\n  opacity: 1;\n}\n\n.play-button.secondary-orange:hover {\n  background: linear-gradient(135deg, rgba(255, 152, 0, 1) 0%, rgba(245, 124, 0, 1) 100%);\n  border-color: rgba(255, 255, 255, 0.4);\n  transform: translateY(-4px) scale(1.1);\n  box-shadow: 0 16px 40px rgba(255, 152, 0, 0.5), 0 8px 20px rgba(0, 0, 0, 0.4);\n}\n\n.play-button svg {\n  width: 36px;\n  height: 36px;\n  stroke-width: 2;\n}\n\n.button-text {\n  position: absolute;\n  bottom: -20px;\n  font-size: 12px;\n  color: white;\n}\n\n.time-display {\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);\n  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;\n  letter-spacing: 0.3px;\n  background: rgba(0, 0, 0, 0.6);\n  padding: 8px 12px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n}\n\n.quality-selector {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: pointer;\n  background: transparent;\n  border: none;\n  color: white;\n}\n\n.controls-hidden {\n  opacity: 0;\n  transition: opacity 0.6s ease; /* Even slower fade out */\n  pointer-events: none;\n}\n\n.right-controls {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.resolution-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  background: rgba(42, 42, 42, 0.95);\n  padding: 12px 20px;\n  border-radius: 16px;\n  cursor: pointer;\n  /* Removed backdrop blur to prevent video blurring */\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.resolution-container:hover {\n  background: rgba(60, 60, 60, 0.95);\n  border-color: rgba(255, 255, 255, 0.2);\n  transform: translateY(-2px);\n  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.resolution-text {\n  color: white;\n  font-size: 15px;\n  font-weight: 700;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);\n  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;\n  letter-spacing: 0.3px;\n}\n\n.settings-icon-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.settings-icon-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: rotate(90deg);\n}\n\n.settings-icon {\n  width: 20px;\n  height: 20px;\n  stroke: white;\n  stroke-width: 2;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));\n}\n\n.fullscreen-btn {\n  background: rgba(42, 42, 42, 0.9);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  width: 48px;\n  height: 48px;\n  margin-left: 8px;\n}\n\n.fullscreen-btn:hover {\n  background: rgba(60, 60, 60, 0.95);\n  border-color: rgba(255, 255, 255, 0.25);\n  transform: translateY(-2px) scale(1.05);\n}\n\n.fullscreen-btn svg {\n  width: 20px;\n  height: 20px;\n  stroke-width: 2.5;\n}\n\n.quality-selector {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: pointer;\n}\n\n/* Mobile Specific Styles */\n.mobile-view .custom-controls-overlay {\n  padding: 20px 16px;\n  background: linear-gradient(\n    to bottom,\n    rgba(0, 0, 0, 0.95) 0%,\n    rgba(0, 0, 0, 0.4) 8%,\n    rgba(0, 0, 0, 0.1) 20%,\n    rgba(0, 0, 0, 0) 35%,\n    rgba(0, 0, 0, 0) 65%,\n    rgba(0, 0, 0, 0.1) 80%,\n    rgba(0, 0, 0, 0.4) 92%,\n    rgba(0, 0, 0, 0.95) 100%\n  );\n  /* Removed backdrop blur to prevent video blurring */\n}\n\n.rotation-hint {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.8);\n  padding: 15px 20px;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  color: white;\n  animation: fadeInOut 3s forwards;\n  pointer-events: none;\n}\n\n.rotation-hint svg {\n  width: 32px;\n  height: 32px;\n  animation: rotate 2s infinite;\n}\n\n.rotation-hint span {\n  font-size: 14px;\n  font-weight: 500;\n}\n\n@keyframes fadeInOut {\n  0% { opacity: 0; }\n  20% { opacity: 1; }\n  80% { opacity: 1; }\n  100% { opacity: 0; }\n}\n\n@keyframes rotate {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(90deg); }\n}\n\n/* Mobile Optimizations */\n@media (max-width: 768px) {\n  .custom-controls-overlay {\n    padding: 20px 16px;\n    background: linear-gradient(\n      to bottom,\n      rgba(0, 0, 0, 0.95) 0%,\n      rgba(0, 0, 0, 0.3) 10%,\n      rgba(0, 0, 0, 0.1) 25%,\n      rgba(0, 0, 0, 0) 40%,\n      rgba(0, 0, 0, 0) 60%,\n      rgba(0, 0, 0, 0.1) 75%,\n      rgba(0, 0, 0, 0.3) 90%,\n      rgba(0, 0, 0, 0.95) 100%\n    );\n    /* Removed backdrop blur to prevent video blurring */\n  }\n\n  .top-controls {\n    padding: 16px 12px;\n  }\n\n  .back-button {\n    width: 44px;\n    height: 44px;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3);\n  }\n\n  .back-button svg {\n    width: 22px;\n    height: 22px;\n  }\n\n  .video-title {\n    font-size: 1.2em;\n    font-weight: 600;\n  }\n\n  .center-controls {\n    gap: 32px;\n    margin: 24px 0;\n  }\n\n  .control-button {\n    width: 52px;\n    height: 52px;\n    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 3px 10px rgba(0, 0, 0, 0.3);\n  }\n\n  .control-button svg {\n    width: 26px;\n    height: 26px;\n  }\n\n  .play-button {\n    width: 72px;\n    height: 54px;\n    box-shadow: 0 8px 28px rgba(229, 9, 20, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n    border-radius: 27px;\n  }\n\n  /* Mobile Secondary Button Styles - Same width and height */\n  .play-button.secondary {\n    width: 72px;\n    height: 54px;\n    box-shadow: 0 8px 28px rgba(0, 150, 136, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n    border-radius: 27px;\n  }\n\n  .play-button.secondary-blue {\n    width: 72px;\n    height: 54px;\n    box-shadow: 0 8px 28px rgba(33, 150, 243, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n    border-radius: 27px;\n  }\n\n  .play-button.secondary-purple {\n    width: 72px;\n    height: 54px;\n    box-shadow: 0 8px 28px rgba(156, 39, 176, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n    border-radius: 27px;\n  }\n\n  .play-button.secondary-orange {\n    width: 72px;\n    height: 54px;\n    box-shadow: 0 8px 28px rgba(255, 152, 0, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n    border-radius: 27px;\n  }\n\n  .play-button svg {\n    width: 32px;\n    height: 32px;\n  }\n\n  .button-text {\n    display: none;\n  }\n\n  .volume-slider-container {\n    display: none;\n  }\n\n  .quality-selector {\n    font-size: 13px;\n    padding: 6px 12px;\n    border-radius: 10px;\n  }\n\n  .resolution-container {\n    padding: 10px 16px;\n    border-radius: 14px;\n    gap: 10px;\n  }\n\n  .resolution-text {\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  .time-display {\n    font-size: 14px;\n    padding: 6px 12px;\n    border-radius: 10px;\n  }\n\n  .volume-control {\n    background: none;\n    padding: 0;\n  }\n\n  .volume-slider-wrapper {\n    display: none;\n  }\n\n  /* Improved progress bar for mobile */\n  .progress-bar {\n    height: 12px;\n    border-radius: 8px;\n    background: rgba(255, 255, 255, 0.3);\n    position: relative;\n    cursor: pointer;\n    touch-action: pan-x;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    user-select: none;\n  }\n\n  .progress-bar:active {\n    height: 14px;\n    background: rgba(255, 255, 255, 0.4);\n  }\n\n  .progress-thumb {\n    width: 24px;\n    height: 24px;\n    border: 3px solid #fff;\n    box-shadow: 0 2px 8px rgba(255,0,98,0.4);\n    transition: transform 0.1s ease;\n  }\n\n  .progress-bar:active .progress-thumb {\n    transform: translateY(-50%) scale(1.2);\n    box-shadow: 0 4px 12px rgba(255,0,98,0.6);\n  }\n\n  .progress-loaded {\n    background: rgba(255,255,255,0.5);\n    border-radius: 8px;\n  }\n\n  .progress-played {\n    background: linear-gradient(90deg, #ff0062, #ff4081);\n    border-radius: 8px;\n    box-shadow: 0 0 15px rgba(255, 0, 98, 0.4);\n  }\n\n  /* Active state for progress bar */\n  .progress-bar-active {\n    height: 16px !important;\n    background: rgba(255, 255, 255, 0.5) !important;\n    transform: scale(1.02);\n    transition: all 0.2s ease;\n  }\n\n  .progress-bar-active .progress-thumb {\n    transform: translateY(-50%) scale(1.3);\n    box-shadow: 0 6px 16px rgba(255,0,98,0.8);\n  }\n\n  .progress-bar-active .progress-played {\n    box-shadow: 0 0 20px rgba(255, 0, 98, 0.6);\n  }\n}\n\n/* Video.js Theme Overrides */\n.video-js.vjs-theme-ott {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif;\n}\n\n.video-js.vjs-theme-ott .vjs-big-play-button {\n  background: rgba(0,0,0,0.6);\n  border: none;\n  border-radius: 50%;\n  width: 80px;\n  height: 80px;\n  line-height: 80px;\n  transform: translate(-50%, -50%);\n}\n\n.video-js.vjs-theme-ott .vjs-big-play-button:hover {\n    background: rgba(255,0,0,0.8);\n  }\n\n/* Mobile landscape optimizations */\n@media (max-width: 768px) and (orientation: landscape) {\n  .video-wrapper {\n    width: 100vw;\n    height: 100vh;\n  }\n\n  .custom-controls-overlay {\n    padding: 10px;\n  }\n\n  .center-controls {\n    gap: 15px;\n  }\n\n  .control-button {\n    width: 40px;\n    height: 40px;\n    font-size: 1em;\n  }\n\n  .bottom-controls {\n    gap: 4px; /* reduced from 8px */\n    padding-bottom: 0;\n  }\n\n  .progress-bar {\n    height: 6px;\n  }\n\n  .time-display {\n    font-size: 0.8em;\n  }\n\n  .volume-control {\n    background: rgba(255, 255, 255, 0.2);\n    padding: 4px;\n  }\n\n  .volume-slider-wrapper {\n    display: block;\n  }\n\n  .volume-control:hover .volume-slider-wrapper {\n    width: 60px;\n  }\n}\n\n/* Hide browser's default fullscreen button */\n.video-js .vjs-fullscreen-control {\n  display: none;\n}\n\n/* Touch device specific styles */\n@media (hover: none) and (pointer: coarse) {\n  .custom-controls-overlay {\n    opacity: 1;\n    transition: opacity 0.4s ease-in-out;\n  }\n\n  .controls-hidden {\n    opacity: 0;\n    transition: opacity 0.6s ease-in-out;\n  }\n\n  .control-button {\n    width: 44px;\n    height: 44px;\n    margin: 0 8px;\n    background-color: rgba(0, 0, 0, 0.6);\n    border-radius: 50%;\n    transition: transform 0.2s ease, background-color 0.2s ease;\n  }\n\n  .control-button:active {\n    transform: scale(0.95);\n    background-color: rgba(255, 0, 0, 0.7);\n  }\n\n  .progress-bar {\n    height: 8px;\n    transition: height 0.2s ease;\n  }\n\n  .progress-bar:active {\n    height: 10px;\n  }\n\n  /* Improve touch targets in landscape */\n  @media (orientation: landscape) {\n    .custom-controls-overlay {\n      padding: 10px 20px;\n    }\n\n    .control-button {\n      margin: 0 8px;\n    }\n\n    .progress-bar {\n      margin: 8px 0;\n    }\n  }\n\n  /* Prevent accidental touches */\n  .video-wrapper {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    user-select: none;\n    touch-action: manipulation;\n  }\n\n  /* Add active state feedback */\n  .volume-slider:active,\n  .quality-selector:active {\n    transform: scale(0.98);\n  }\n}\n\n/* Landscape mode optimizations */\n@media (hover: none) and (pointer: coarse) and (orientation: landscape) {\n  .custom-controls-overlay {\n    padding: 15px;\n    transition: opacity 0.4s ease-in-out;\n  }\n\n  .bottom-controls {\n    padding-bottom: max(env(safe-area-inset-bottom), 10px);\n  }\n\n  /* Ensure controls are more visible in landscape */\n  .control-button {\n    background-color: rgba(0, 0, 0, 0.7);\n  }\n\n  /* Improve touch targets in landscape */\n  .progress-bar {\n    margin: 10px 0;\n  }\n\n  /* Landscape Secondary Button Styles - Same dimensions */\n  .play-button.secondary,\n  .play-button.secondary-blue,\n  .play-button.secondary-purple,\n  .play-button.secondary-orange {\n    width: 72px;\n    height: 54px;\n    border-radius: 27px;\n  }\n\n  .play-button.secondary {\n    box-shadow: 0 8px 28px rgba(0, 150, 136, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n  }\n\n  .play-button.secondary-blue {\n    box-shadow: 0 8px 28px rgba(33, 150, 243, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n  }\n\n  .play-button.secondary-purple {\n    box-shadow: 0 8px 28px rgba(156, 39, 176, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n  }\n\n  .play-button.secondary-orange {\n    box-shadow: 0 8px 28px rgba(255, 152, 0, 0.5), 0 4px 14px rgba(0, 0, 0, 0.4);\n  }\n}\n\n/* Add loading indicator */\n.video-loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-radius: 50%;\n  border-top-color: #fff;\n  animation: spin 1s ease-in-out infinite;\n}\n\n@keyframes spin {\n  to { transform: translate(-50%, -50%) rotate(360deg); }\n}\n\n\n\n/* Hide fullscreen button on mobile */\n@media (max-width: 768px) {\n  .mobile-view .right-controls .control-button {\n    display: none;\n  }\n  \n  .mobile-view .resolution-container {\n    margin-right: 0;\n  }\n\n  /* YouTube-style progress bar improvements */\n  .progress-bar {\n    height: 14px;\n    border-radius: 10px;\n    background: rgba(255, 255, 255, 0.2);\n    position: relative;\n    cursor: pointer;\n    touch-action: pan-x;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    user-select: none;\n    transition: all 0.2s ease;\n    overflow: visible;\n  }\n\n  .progress-bar:hover {\n    height: 16px;\n    background: rgba(255, 255, 255, 0.3);\n  }\n\n  .progress-bar:active {\n    height: 18px;\n    background: rgba(255, 255, 255, 0.4);\n    transform: scale(1.02);\n  }\n\n  .progress-thumb {\n    width: 28px;\n    height: 28px;\n    border: 3px solid #fff;\n    box-shadow: 0 4px 12px rgba(255,0,98,0.5);\n    transition: all 0.2s ease;\n    background: linear-gradient(135deg, #ff0062, #ff4081);\n  }\n\n  .progress-bar:hover .progress-thumb {\n    transform: translateY(-50%) scale(1.1);\n    box-shadow: 0 6px 16px rgba(255,0,98,0.6);\n  }\n\n  .progress-bar:active .progress-thumb {\n    transform: translateY(-50%) scale(1.3);\n    box-shadow: 0 8px 20px rgba(255,0,98,0.8);\n  }\n\n  .progress-loaded {\n    background: rgba(255,255,255,0.4);\n    border-radius: 10px;\n    transition: all 0.2s ease;\n  }\n\n  .progress-played {\n    background: linear-gradient(90deg, #ff0062, #ff4081);\n    border-radius: 10px;\n    box-shadow: 0 0 15px rgba(255, 0, 98, 0.4);\n    transition: all 0.2s ease;\n  }\n\n  /* Active state for progress bar */\n  .progress-bar-active {\n    height: 20px !important;\n    background: rgba(255, 255, 255, 0.5) !important;\n    transform: scale(1.02);\n    transition: all 0.2s ease;\n    box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);\n  }\n\n  .progress-bar-active .progress-thumb {\n    transform: translateY(-50%) scale(1.4);\n    box-shadow: 0 8px 24px rgba(255,0,98,0.9);\n  }\n\n  .progress-bar-active .progress-played {\n    box-shadow: 0 0 25px rgba(255, 0, 98, 0.7);\n  }\n\n\n}\n\n/* Loading Indicator Styles */\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.85);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  /* Removed backdrop blur to prevent video blurring */\n}\n\n.loading-spinner {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  background: rgba(0, 0, 0, 0.9);\n  padding: 30px;\n  border-radius: 15px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.spinner-svg {\n  width: 60px;\n  height: 60px;\n  animation: rotate 2s linear infinite;\n}\n\n.spinner-path {\n  stroke: #ff0062;\n  stroke-linecap: round;\n  animation: dash 1.5s ease-in-out infinite;\n  stroke-width: 4;\n}\n\n.loading-text {\n  color: white;\n  font-size: 18px;\n  font-weight: 600;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\n  letter-spacing: 0.5px;\n}\n\n@keyframes rotate {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes dash {\n  0% {\n    stroke-dasharray: 1, 150;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -35;\n  }\n  100% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -124;\n  }\n}\n\n/* Mobile Loading Styles */\n@media (max-width: 768px) {\n  .loading-spinner {\n    transform: scale(0.9);\n    padding: 25px;\n  }\n\n  .loading-text {\n    font-size: 16px;\n  }\n\n  .spinner-svg {\n    width: 50px;\n    height: 50px;\n  }\n}\n\n/* Ensure proper scroll restoration after video cleanup */\n.scroll-restored {\n  overflow: auto !important;\n  position: static !important;\n  width: auto !important;\n  height: auto !important;\n  touch-action: auto !important;\n  -webkit-overflow-scrolling: touch !important;\n  transform: none !important;\n  pointer-events: auto !important;\n}\n\n/* Force scroll capability class */\n.force-scrollable {\n  overflow: auto !important;\n  height: auto !important;\n  min-height: 100vh !important;\n  position: static !important;\n  touch-action: auto !important;\n  -webkit-overflow-scrolling: touch !important;\n  pointer-events: auto !important;\n  user-select: auto !important;\n  -webkit-user-select: auto !important;\n  transform: none !important;\n  will-change: auto !important;\n}\n\n/* Reset any video-related transforms */\n.video-cleanup-reset {\n  transform: none !important;\n  transform-style: flat !important;\n  backface-visibility: visible !important;\n  will-change: auto !important;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}