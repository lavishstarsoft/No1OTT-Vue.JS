{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { ref, reactive } from 'vue';\nimport LiveTVPlayer from './LiveTVPlayer.vue';\n\n// API బేస్ URL ని కాన్స్టెంట్‌గా డిఫైన్ చేయడం\nconst API_BASE_URL = 'https://admin.no1ott.com/';\nexport default {\n  name: 'CategorySection',\n  components: {\n    LiveTVPlayer\n  },\n  props: {\n    title: {\n      type: String,\n      default: 'Categories'\n    }\n  },\n  setup() {\n    const categories = ref([]);\n    const categoryVideos = reactive({});\n    const categoryLiveStreams = reactive({});\n    const scrollStates = reactive({});\n    const containerRefs = reactive({});\n    const isPlayerOpen = ref(false);\n    const selectedVideoUrl = ref('');\n    const selectedVideoTitle = ref('');\n    const pollingInterval = ref(null);\n    const showViewAllModal = ref(false);\n    const selectedCategory = ref(null);\n    const setContainerRef = (el, categoryId) => {\n      if (el) {\n        containerRefs[categoryId] = el;\n      }\n    };\n    return {\n      categories,\n      categoryVideos,\n      categoryLiveStreams,\n      scrollStates,\n      containerRefs,\n      setContainerRef,\n      isPlayerOpen,\n      selectedVideoUrl,\n      selectedVideoTitle,\n      pollingInterval,\n      showViewAllModal,\n      selectedCategory\n    };\n  },\n  mounted() {\n    this.fetchCategories();\n    // Start polling for updates every 5 seconds\n    this.startPolling();\n  },\n  beforeUnmount() {\n    // Clean up polling when component is destroyed\n    this.stopPolling();\n  },\n  methods: {\n    startPolling() {\n      this.pollingInterval = setInterval(() => {\n        if (this.categories.length > 0) {\n          this.categories.forEach(category => {\n            this.fetchLiveStreams(category.id);\n          });\n        }\n      }, 5000);\n    },\n    stopPolling() {\n      if (this.pollingInterval) {\n        clearInterval(this.pollingInterval);\n        this.pollingInterval = null;\n      }\n    },\n    async fetchCategories() {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/api/frontend/categories/`);\n        if (response.data.status === 'success') {\n          this.categories = response.data.data;\n          // Initialize scroll states for each category\n          this.categories.forEach(category => {\n            this.scrollStates[category.id] = {\n              canScrollLeft: false,\n              canScrollRight: true\n            };\n            // Fetch videos for each category\n            this.fetchCategoryVideos(category.id);\n            this.fetchLiveStreams(category.id);\n          });\n        }\n      } catch (error) {\n        console.error('Error fetching categories:', error);\n      }\n    },\n    capitalizeText(text) {\n      if (!text) return '';\n      // Split by spaces and special characters\n      return text.split(/[\\s-]+/).map(word => {\n        // Don't change case for special words\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\n        if (specialWords.includes(word.toUpperCase())) {\n          return word.toUpperCase();\n        }\n        // Don't change case for articles and conjunctions in middle of title\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\n        if (minorWords.includes(word.toLowerCase())) {\n          return word.toLowerCase();\n        }\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n      }).join(' ');\n    },\n    async fetchCategoryVideos(categoryId, page = 1) {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/api/videos/category/${categoryId}/?page=${page}&page_size=10`);\n        if (response.data.status === 'success') {\n          console.log('API Response Videos:', response.data.data.map(video => ({\n            id: video.id,\n            video_url: video.video_url,\n            promo_url: video.promo_video_url,\n            hls_url: video.promo_hls_url\n          })));\n          const processedVideos = response.data.data.map(video => ({\n            ...video,\n            title: this.capitalizeText(video.title),\n            description: this.capitalizeText(video.description),\n            is_live: false\n          }));\n          if (page === 1) {\n            this.categoryVideos[categoryId] = {\n              ...response.data,\n              data: processedVideos\n            };\n          } else {\n            this.categoryVideos[categoryId] = {\n              ...response.data,\n              data: [...(this.categoryVideos[categoryId]?.data || []), ...processedVideos]\n            };\n          }\n        }\n      } catch (error) {\n        console.error(`Error fetching videos for category ${categoryId}:`, error);\n      }\n    },\n    async fetchLiveStreams(categoryId) {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/api/live-streams/by_category/?category_id=${categoryId}`);\n        const streams = response.data.map(stream => ({\n          ...stream,\n          title: this.capitalizeText(stream.title),\n          description: this.capitalizeText(stream.description),\n          is_live: true\n        }));\n        this.categoryLiveStreams[categoryId] = streams.sort((a, b) => a.order - b.order);\n      } catch (error) {\n        console.error(`Error fetching live streams for category ${categoryId}:`, error);\n      }\n    },\n    async loadMoreVideos(categoryId) {\n      const currentPage = this.categoryVideos[categoryId]?.pagination?.current_page || 1;\n      if (this.categoryVideos[categoryId]?.pagination?.has_next) {\n        await this.fetchCategoryVideos(categoryId, currentPage + 1);\n      }\n    },\n    scroll(direction, categoryId) {\n      const container = this.containerRefs[categoryId];\n      if (!container) return;\n      const scrollAmount = 300;\n      if (direction === 'left') {\n        container.scrollLeft -= scrollAmount;\n      } else {\n        container.scrollLeft += scrollAmount;\n      }\n    },\n    checkScroll(categoryId) {\n      const container = this.containerRefs[categoryId];\n      if (!container) return;\n      this.scrollStates[categoryId] = {\n        canScrollLeft: container.scrollLeft > 0,\n        canScrollRight: container.scrollLeft < container.scrollWidth - container.clientWidth\n      };\n    },\n    playVideo(video) {\n      // For regular videos, navigate to MovieDetails\n      if (!video.live_url) {\n        // Log the video URL we are using\n        console.log('Playing video with URL:', {\n          id: video.id,\n          video_url: video.video_url,\n          is_hls: video.video_url?.includes('.m3u8')\n        });\n\n        // Only use HLS URL\n        const videoUrl = video.video_url;\n\n        // Check if it's a valid HLS URL\n        if (!videoUrl || !videoUrl.includes('.m3u8')) {\n          console.error('Invalid or missing HLS URL:', video);\n          return;\n        }\n        this.$router.push({\n          name: 'MovieDetails',\n          params: {\n            id: video.id,\n            videoUrl: videoUrl,\n            videoType: 'hls'\n          }\n        });\n      }\n    },\n    playLiveStream(stream) {\n      if (stream.live_url) {\n        this.selectedVideoUrl = stream.live_url;\n        this.selectedVideoTitle = stream.title;\n        this.isPlayerOpen = true;\n      }\n    },\n    closePlayer() {\n      this.isPlayerOpen = false;\n      this.selectedVideoUrl = '';\n      this.selectedVideoTitle = '';\n    },\n    isNewVideo(createdAt) {\n      const videoDate = new Date(createdAt);\n      const now = new Date();\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24));\n      return diffDays <= 7; // 7 days or newer\n    },\n    formatViews(views) {\n      if (views >= 1000000) {\n        return `${(views / 1000000).toFixed(1)}M`;\n      } else if (views >= 1000) {\n        return `${(views / 1000).toFixed(1)}K`;\n      }\n      return views.toString();\n    },\n    showAllVideos(category) {\n      this.selectedCategory = category;\n      this.showViewAllModal = true;\n      // Fetch all videos for this category if not already loaded\n      this.fetchCategoryVideos(category.id, 1, 100);\n    },\n    closeViewAllModal() {\n      this.showViewAllModal = false;\n      this.selectedCategory = null;\n    }\n  }\n};","map":{"version":3,"names":["axios","ref","reactive","LiveTVPlayer","API_BASE_URL","name","components","props","title","type","String","default","setup","categories","categoryVideos","categoryLiveStreams","scrollStates","containerRefs","isPlayerOpen","selectedVideoUrl","selectedVideoTitle","pollingInterval","showViewAllModal","selectedCategory","setContainerRef","el","categoryId","mounted","fetchCategories","startPolling","beforeUnmount","stopPolling","methods","setInterval","length","forEach","category","fetchLiveStreams","id","clearInterval","response","get","data","status","canScrollLeft","canScrollRight","fetchCategoryVideos","error","console","capitalizeText","text","split","map","word","specialWords","includes","toUpperCase","minorWords","toLowerCase","charAt","slice","join","page","log","video","video_url","promo_url","promo_video_url","hls_url","promo_hls_url","processedVideos","description","is_live","streams","stream","sort","a","b","order","loadMoreVideos","currentPage","pagination","current_page","has_next","scroll","direction","container","scrollAmount","scrollLeft","checkScroll","scrollWidth","clientWidth","playVideo","live_url","is_hls","videoUrl","$router","push","params","videoType","playLiveStream","closePlayer","isNewVideo","createdAt","videoDate","Date","now","diffDays","Math","ceil","formatViews","views","toFixed","toString","showAllVideos","closeViewAllModal"],"sources":["D:\\OTT\\ott_frontend\\src\\components\\CategorySection.vue"],"sourcesContent":["# Create a new CategorySection component\n<template>\n  <section class=\"mb-8\">\n    <!-- Add ViewAllModal component -->\n    <div v-if=\"showViewAllModal\" class=\"fixed inset-0 z-50 overflow-y-auto bg-black/90\">\n      <div class=\"min-h-screen px-4 py-6\">\n        <div class=\"relative max-w-7xl mx-auto\">\n          <!-- Modal Header -->\n          <div class=\"flex items-center justify-between mb-6\">\n            <h2 class=\"text-2xl font-bold text-white\">{{ selectedCategory?.name }}</h2>\n            <button @click=\"closeViewAllModal\" class=\"text-white hover:text-gray-300\">\n              <i class=\"fas fa-times text-xl\"></i>\n            </button>\n          </div>\n\n          <!-- Videos Grid -->\n          <div class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n            <div \n              v-for=\"video in categoryVideos[selectedCategory?.id]?.data\" \n              :key=\"video.id\"\n              class=\"cursor-pointer group\"\n              @click=\"playVideo(video)\"\n            >\n              <div class=\"aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden relative\">\n                <img \n                  :src=\"video.portrait_thumbnail_url || video.thumbnail_url\" \n                  :alt=\"video.title\"\n                  class=\"w-full h-full object-cover\"\n                >\n                \n                <!-- Video badges -->\n                <div class=\"absolute top-0 left-0 right-0 flex justify-between items-start p-2 bg-gradient-to-b from-black/70 to-transparent\">\n                  <div class=\"flex gap-2\">\n                    <span \n                      v-if=\"video.is_premium\" \n                      class=\"badge-premium flex items-center justify-center w-6 h-6 rounded-full backdrop-blur-sm\"\n                    >\n                      <i class=\"fas fa-crown text-yellow-400\"></i>\n                    </span>\n                    <span \n                      v-if=\"video.video_type === 'rental'\" \n                      class=\"badge-rental flex items-center text-[10px] font-medium px-2 py-1 rounded backdrop-blur-sm\"\n                    >\n                      <i class=\"fas fa-ticket mr-1\"></i>\n                      RENTAL\n                    </span>\n                  </div>\n                </div>\n                \n                <!-- Duration badge -->\n                <div class=\"absolute bottom-2 right-2 bg-black/70 px-2 py-0.5 rounded text-xs text-white\">\n                  {{ formatDuration(video.duration) }}\n                </div>\n                \n                <!-- Play button overlay -->\n                <div class=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\">\n                  <div class=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n                    <i class=\"fas fa-play text-white\"></i>\n                  </div>\n                </div>\n              </div>\n              <div class=\"mt-2\">\n                <h4 class=\"text-white text-sm font-medium truncate w-full\">{{ video.title }}</h4>\n                <p class=\"text-gray-400 text-xs\">{{ formatViews(video.views_count) }} Views</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Add LiveTVPlayer component -->\n    <LiveTVPlayer\n      :is-open=\"isPlayerOpen\"\n      :video-url=\"selectedVideoUrl\"\n      :video-title=\"selectedVideoTitle\"\n      :is-direct-video=\"false\"\n      @close=\"closePlayer\"\n    />\n    \n    <!-- Categories with their videos -->\n    <div v-for=\"category in categories\" :key=\"category.id\" class=\"mb-8\">\n      <div class=\"flex items-center justify-between mb-4 pr-4\">\n        <h2 class=\"text-lg font-medium gradient-text\">{{ category.name }}</h2>\n        <div class=\"flex items-center gap-2\">\n          <router-link\n            :to=\"{ name: 'CategoryVideos', params: { id: category.id }}\"\n            class=\"text-white font-semibold text-sm hover:underline whitespace-nowrap\"\n          >\n            View All\n          </router-link>\n          <button \n            @click=\"loadMoreVideos(category.id)\"\n            v-if=\"categoryVideos[category.id]?.pagination?.has_next\"\n            class=\"text-sm text-blue-500 hover:text-blue-400\"\n          >\n            View More\n          </button>\n        </div>\n      </div>\n      \n      <div class=\"relative\">\n        <button \n          @click=\"scroll('left', category.id)\" \n          class=\"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70\"\n          v-show=\"scrollStates[category.id]?.canScrollLeft\"\n        >\n          <i class=\"fas fa-chevron-left\"></i>\n        </button>\n        \n        <div \n          :ref=\"el => setContainerRef(el, category.id)\"\n          class=\"flex gap-4 overflow-x-auto scrollbar-hide scroll-smooth\"\n          @scroll=\"checkScroll(category.id)\"\n        >\n          <!-- Live Streams -->\n          <div \n            v-for=\"stream in categoryLiveStreams[category.id] || []\" \n            :key=\"'live-' + stream.id\"\n            class=\"flex-shrink-0 relative group cursor-pointer\"\n            @click=\"playLiveStream(stream)\"\n          >\n            <div class=\"w-[200px] h-[120px] bg-gray-800 rounded-lg overflow-hidden relative\">\n              <img \n                :src=\"stream.thumbnail || 'https://via.placeholder.com/200x120'\" \n                :alt=\"stream.title\"\n                class=\"w-full h-full object-cover\"\n              >\n              \n              <!-- Live Stream Badge -->\n              <div class=\"absolute top-2 left-2 flex gap-2\">\n                <span class=\"bg-red-600 text-white text-xs px-2 py-0.5 rounded animate-pulse\">\n                  LIVE\n                </span>\n                <span v-if=\"stream.is_premium\" class=\"bg-purple-600 text-white text-xs px-2 py-0.5 rounded\">\n                  PREMIUM\n                </span>\n              </div>\n            </div>\n            <div class=\"mt-2 w-[200px]\">\n              <h4 class=\"text-white text-sm font-medium truncate\">{{ stream.title }}</h4>\n            </div>\n          </div>\n\n          <!-- Regular Videos -->\n          <div \n            v-for=\"video in categoryVideos[category.id]?.data || []\" \n            :key=\"video.id\"\n            class=\"flex-shrink-0 relative group cursor-pointer\"\n            @click=\"playVideo(video)\"\n          >\n            <div class=\"w-[200px] h-[120px] bg-gray-800 rounded-lg overflow-hidden relative\">\n              <img \n                :src=\"video.thumbnail_url || 'https://via.placeholder.com/200x120'\" \n                :alt=\"video.title\"\n                class=\"w-full h-full object-cover\"\n              >\n              \n              <!-- Video badges -->\n              <div class=\"absolute top-0 left-0 right-0 flex justify-between items-start p-2 bg-gradient-to-b from-black/70 to-transparent\">\n                <div class=\"flex gap-2\">\n                  <span \n                    v-if=\"video.is_premium\" \n                    class=\"badge-premium flex items-center justify-center w-6 h-6 rounded-full backdrop-blur-sm\"\n                  >\n                    <i class=\"fas fa-crown text-yellow-400\"></i>\n                  </span>\n                  <span \n                    v-if=\"video.video_type === 'rental'\" \n                    class=\"badge-rental flex items-center text-[10px] font-medium px-2 py-1 rounded backdrop-blur-sm\"\n                  >\n                    <i class=\"fas fa-ticket mr-1\"></i>\n                    RENTAL\n                  </span>\n                </div>\n              </div>\n              \n              <!-- Play button overlay -->\n              <div class=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\">\n                <div class=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n                  <i class=\"fas fa-play text-white\"></i>\n                </div>\n              </div>\n            </div>\n            <!-- Video title and views -->\n            <div class=\"mt-2 w-[200px]\">\n              <h4 class=\"text-white text-sm font-medium truncate\">{{ video.title }}</h4>\n            </div>\n          </div>\n        </div>\n        \n        <button \n          @click=\"scroll('right', category.id)\" \n          class=\"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70\"\n          v-show=\"scrollStates[category.id]?.canScrollRight\"\n        >\n          <i class=\"fas fa-chevron-right\"></i>\n        </button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { ref, reactive } from 'vue'\nimport LiveTVPlayer from './LiveTVPlayer.vue'\n\n// API బేస్ URL ని కాన్స్టెంట్‌గా డిఫైన్ చేయడం\nconst API_BASE_URL = 'https://admin.no1ott.com/'\n\nexport default {\n  name: 'CategorySection',\n  components: {\n    LiveTVPlayer\n  },\n  props: {\n    title: {\n      type: String,\n      default: 'Categories'\n    }\n  },\n  setup() {\n    const categories = ref([])\n    const categoryVideos = reactive({})\n    const categoryLiveStreams = reactive({})\n    const scrollStates = reactive({})\n    const containerRefs = reactive({})\n    const isPlayerOpen = ref(false)\n    const selectedVideoUrl = ref('')\n    const selectedVideoTitle = ref('')\n    const pollingInterval = ref(null)\n    const showViewAllModal = ref(false)\n    const selectedCategory = ref(null)\n\n    const setContainerRef = (el, categoryId) => {\n      if (el) {\n        containerRefs[categoryId] = el\n      }\n    }\n\n    return {\n      categories,\n      categoryVideos,\n      categoryLiveStreams,\n      scrollStates,\n      containerRefs,\n      setContainerRef,\n      isPlayerOpen,\n      selectedVideoUrl,\n      selectedVideoTitle,\n      pollingInterval,\n      showViewAllModal,\n      selectedCategory\n    }\n  },\n  mounted() {\n    this.fetchCategories()\n    // Start polling for updates every 5 seconds\n    this.startPolling()\n  },\n  beforeUnmount() {\n    // Clean up polling when component is destroyed\n    this.stopPolling()\n  },\n  methods: {\n    startPolling() {\n      this.pollingInterval = setInterval(() => {\n        if (this.categories.length > 0) {\n          this.categories.forEach(category => {\n            this.fetchLiveStreams(category.id)\n          })\n        }\n      }, 5000)\n    },\n    stopPolling() {\n      if (this.pollingInterval) {\n        clearInterval(this.pollingInterval)\n        this.pollingInterval = null\n      }\n    },\n    async fetchCategories() {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/api/frontend/categories/`)\n        if (response.data.status === 'success') {\n          this.categories = response.data.data\n          // Initialize scroll states for each category\n          this.categories.forEach(category => {\n            this.scrollStates[category.id] = {\n              canScrollLeft: false,\n              canScrollRight: true\n            }\n            // Fetch videos for each category\n            this.fetchCategoryVideos(category.id)\n            this.fetchLiveStreams(category.id)\n          })\n        }\n      } catch (error) {\n        console.error('Error fetching categories:', error)\n      }\n    },\n    capitalizeText(text) {\n      if (!text) return '';\n      // Split by spaces and special characters\n      return text.split(/[\\s-]+/).map(word => {\n        // Don't change case for special words\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\n        if (specialWords.includes(word.toUpperCase())) {\n          return word.toUpperCase();\n        }\n        // Don't change case for articles and conjunctions in middle of title\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\n        if (minorWords.includes(word.toLowerCase())) {\n          return word.toLowerCase();\n        }\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n      }).join(' ');\n    },\n    async fetchCategoryVideos(categoryId, page = 1) {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/api/videos/category/${categoryId}/?page=${page}&page_size=10`)\n        if (response.data.status === 'success') {\n          console.log('API Response Videos:', response.data.data.map(video => ({\n            id: video.id,\n            video_url: video.video_url,\n            promo_url: video.promo_video_url,\n            hls_url: video.promo_hls_url\n          })));\n\n          const processedVideos = response.data.data.map(video => ({\n            ...video,\n            title: this.capitalizeText(video.title),\n            description: this.capitalizeText(video.description),\n            is_live: false\n          }));\n\n          if (page === 1) {\n            this.categoryVideos[categoryId] = {\n              ...response.data,\n              data: processedVideos\n            }\n          } else {\n            this.categoryVideos[categoryId] = {\n              ...response.data,\n              data: [...(this.categoryVideos[categoryId]?.data || []), ...processedVideos]\n            }\n          }\n        }\n      } catch (error) {\n        console.error(`Error fetching videos for category ${categoryId}:`, error)\n      }\n    },\n    async fetchLiveStreams(categoryId) {\n      try {\n        const response = await axios.get(`${API_BASE_URL}/api/live-streams/by_category/?category_id=${categoryId}`)\n        const streams = response.data.map(stream => ({\n          ...stream,\n          title: this.capitalizeText(stream.title),\n          description: this.capitalizeText(stream.description),\n          is_live: true\n        }))\n        this.categoryLiveStreams[categoryId] = streams.sort((a, b) => a.order - b.order)\n      } catch (error) {\n        console.error(`Error fetching live streams for category ${categoryId}:`, error)\n      }\n    },\n    async loadMoreVideos(categoryId) {\n      const currentPage = this.categoryVideos[categoryId]?.pagination?.current_page || 1\n      if (this.categoryVideos[categoryId]?.pagination?.has_next) {\n        await this.fetchCategoryVideos(categoryId, currentPage + 1)\n      }\n    },\n    scroll(direction, categoryId) {\n      const container = this.containerRefs[categoryId]\n      if (!container) return\n      \n      const scrollAmount = 300\n      if (direction === 'left') {\n        container.scrollLeft -= scrollAmount\n      } else {\n        container.scrollLeft += scrollAmount\n      }\n    },\n    checkScroll(categoryId) {\n      const container = this.containerRefs[categoryId]\n      if (!container) return\n      \n      this.scrollStates[categoryId] = {\n        canScrollLeft: container.scrollLeft > 0,\n        canScrollRight: container.scrollLeft < (container.scrollWidth - container.clientWidth)\n      }\n    },\n    playVideo(video) {\n      // For regular videos, navigate to MovieDetails\n      if (!video.live_url) {\n        // Log the video URL we are using\n        console.log('Playing video with URL:', {\n          id: video.id,\n          video_url: video.video_url,\n          is_hls: video.video_url?.includes('.m3u8')\n        });\n\n        // Only use HLS URL\n        const videoUrl = video.video_url;\n        \n        // Check if it's a valid HLS URL\n        if (!videoUrl || !videoUrl.includes('.m3u8')) {\n          console.error('Invalid or missing HLS URL:', video);\n          return;\n        }\n\n        this.$router.push({\n          name: 'MovieDetails',\n          params: { \n            id: video.id,\n            videoUrl: videoUrl,\n            videoType: 'hls'\n          }\n        });\n      }\n    },\n    playLiveStream(stream) {\n      if (stream.live_url) {\n        this.selectedVideoUrl = stream.live_url;\n        this.selectedVideoTitle = stream.title;\n        this.isPlayerOpen = true;\n      }\n    },\n    closePlayer() {\n      this.isPlayerOpen = false\n      this.selectedVideoUrl = ''\n      this.selectedVideoTitle = ''\n    },\n    isNewVideo(createdAt) {\n      const videoDate = new Date(createdAt)\n      const now = new Date()\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24))\n      return diffDays <= 7 // 7 days or newer\n    },\n    formatViews(views) {\n      if (views >= 1000000) {\n        return `${(views / 1000000).toFixed(1)}M`\n      } else if (views >= 1000) {\n        return `${(views / 1000).toFixed(1)}K`\n      }\n      return views.toString()\n    },\n    showAllVideos(category) {\n      this.selectedCategory = category;\n      this.showViewAllModal = true;\n      // Fetch all videos for this category if not already loaded\n      this.fetchCategoryVideos(category.id, 1, 100);\n    },\n    closeViewAllModal() {\n      this.showViewAllModal = false;\n      this.selectedCategory = null;\n    },\n  }\n}\n</script>\n\n<style scoped>\n.scrollbar-hide {\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n.scrollbar-hide::-webkit-scrollbar {\n  display: none;\n}\n\n/* Add these new styles */\n.grid {\n  display: grid;\n  gap: 1rem;\n}\n\n/* Title styles */\n.truncate {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n}\n\n@media (min-width: 640px) {\n  .grid {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n}\n\n@media (min-width: 768px) {\n  .grid {\n    grid-template-columns: repeat(4, minmax(0, 1fr));\n  }\n}\n\n@media (min-width: 1024px) {\n  .grid {\n    grid-template-columns: repeat(5, minmax(0, 1fr));\n  }\n}\n\n/* Modal animation */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n\n.badge-new {\n  background: rgba(220, 38, 38, 0.8);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.badge-premium {\n  background: rgba(195, 0, 89, 0.8); /* Changed to pink color */\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.badge-rental {\n  background: rgba(234, 179, 8, 0.8);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}