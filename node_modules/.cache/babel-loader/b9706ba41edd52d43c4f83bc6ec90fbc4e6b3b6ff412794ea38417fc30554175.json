{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport api from '@/utils/api';\nexport default {\n  name: 'BannerAd',\n  props: {\n    position: {\n      type: String,\n      default: 'top'\n    },\n    userId: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      currentAd: null,\n      ads: [],\n      currentIndex: 0,\n      rotationInterval: null\n    };\n  },\n  async mounted() {\n    await this.loadBannerAds();\n    this.startRotation();\n  },\n  beforeUnmount() {\n    if (this.rotationInterval) {\n      clearInterval(this.rotationInterval);\n    }\n  },\n  methods: {\n    async loadBannerAds() {\n      try {\n        const response = await api.get('/api/ads/banner/');\n        this.ads = response.data.filter(ad => ad.is_active_now);\n        if (this.ads.length > 0) {\n          this.currentAd = this.ads[0];\n          this.trackImpression();\n        }\n      } catch (error) {\n        console.error('Error loading banner ads:', error);\n      }\n    },\n    startRotation() {\n      if (this.ads.length > 1) {\n        this.rotationInterval = setInterval(() => {\n          this.rotateAd();\n        }, 10000); // Rotate every 10 seconds\n      }\n    },\n    rotateAd() {\n      this.currentIndex = (this.currentIndex + 1) % this.ads.length;\n      this.currentAd = this.ads[this.currentIndex];\n      this.trackImpression();\n    },\n    async onAdClick() {\n      if (this.currentAd && this.currentAd.external_url) {\n        await this.trackClick();\n        window.open(this.currentAd.external_url, '_blank');\n      }\n    },\n    async trackImpression() {\n      if (this.currentAd) {\n        try {\n          await api.post(`/api/advertisements/${this.currentAd.id}/track_impression/`, {\n            user_id: this.userId,\n            impression_type: 'banner'\n          });\n        } catch (error) {\n          console.error('Error tracking banner impression:', error);\n        }\n      }\n    },\n    async trackClick() {\n      if (this.currentAd) {\n        try {\n          await api.post(`/api/advertisements/${this.currentAd.id}/track_click/`, {\n            user_id: this.userId\n          });\n        } catch (error) {\n          console.error('Error tracking banner click:', error);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["api","name","props","position","type","String","default","userId","Number","required","data","currentAd","ads","currentIndex","rotationInterval","mounted","loadBannerAds","startRotation","beforeUnmount","clearInterval","methods","response","get","filter","ad","is_active_now","length","trackImpression","error","console","setInterval","rotateAd","onAdClick","external_url","trackClick","window","open","post","id","user_id","impression_type"],"sources":["/Users/saisudhakarmanchala/Documents/No1OTT/ott_frontend_mpd/src/components/BannerAd.vue"],"sourcesContent":["<template>\r\n  <div class=\"banner-ad\" v-if=\"currentAd\">\r\n    <div class=\"banner-container\" @click=\"onAdClick\">\r\n      <img \r\n        :src=\"currentAd.banner_image\" \r\n        :alt=\"currentAd.title\"\r\n        class=\"banner-image\"\r\n      />\r\n      <div class=\"banner-overlay\">\r\n        <div class=\"banner-content\">\r\n          <h3 class=\"banner-title\">{{ currentAd.title }}</h3>\r\n          <p class=\"banner-description\">{{ currentAd.description }}</p>\r\n          <button class=\"banner-cta\">\r\n            {{ currentAd.call_to_action || 'Learn More' }}\r\n          </button>\r\n        </div>\r\n        <div class=\"banner-badge\">\r\n          <i class=\"fas fa-ad\"></i>\r\n          Ad\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/utils/api'\r\n\r\nexport default {\r\n  name: 'BannerAd',\r\n  props: {\r\n    position: {\r\n      type: String,\r\n      default: 'top'\r\n    },\r\n    userId: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentAd: null,\r\n      ads: [],\r\n      currentIndex: 0,\r\n      rotationInterval: null\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadBannerAds()\r\n    this.startRotation()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.rotationInterval) {\r\n      clearInterval(this.rotationInterval)\r\n    }\r\n  },\r\n  methods: {\r\n    async loadBannerAds() {\r\n      try {\r\n        const response = await api.get('/api/ads/banner/')\r\n        this.ads = response.data.filter(ad => ad.is_active_now)\r\n        \r\n        if (this.ads.length > 0) {\r\n          this.currentAd = this.ads[0]\r\n          this.trackImpression()\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading banner ads:', error)\r\n      }\r\n    },\r\n\r\n    startRotation() {\r\n      if (this.ads.length > 1) {\r\n        this.rotationInterval = setInterval(() => {\r\n          this.rotateAd()\r\n        }, 10000) // Rotate every 10 seconds\r\n      }\r\n    },\r\n\r\n    rotateAd() {\r\n      this.currentIndex = (this.currentIndex + 1) % this.ads.length\r\n      this.currentAd = this.ads[this.currentIndex]\r\n      this.trackImpression()\r\n    },\r\n\r\n    async onAdClick() {\r\n      if (this.currentAd && this.currentAd.external_url) {\r\n        await this.trackClick()\r\n        window.open(this.currentAd.external_url, '_blank')\r\n      }\r\n    },\r\n\r\n    async trackImpression() {\r\n      if (this.currentAd) {\r\n        try {\r\n          await api.post(`/api/advertisements/${this.currentAd.id}/track_impression/`, {\r\n            user_id: this.userId,\r\n            impression_type: 'banner'\r\n          })\r\n        } catch (error) {\r\n          console.error('Error tracking banner impression:', error)\r\n        }\r\n      }\r\n    },\r\n\r\n    async trackClick() {\r\n      if (this.currentAd) {\r\n        try {\r\n          await api.post(`/api/advertisements/${this.currentAd.id}/track_click/`, {\r\n            user_id: this.userId\r\n          })\r\n        } catch (error) {\r\n          console.error('Error tracking banner click:', error)\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.banner-ad {\r\n  width: 100%;\r\n  margin: 20px 0;\r\n}\r\n\r\n.banner-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 120px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.banner-container:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.banner-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.banner-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: linear-gradient(\r\n    135deg,\r\n    rgba(0, 0, 0, 0.7) 0%,\r\n    rgba(0, 0, 0, 0.3) 50%,\r\n    rgba(0, 0, 0, 0.7) 100%\r\n  );\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n}\r\n\r\n.banner-content {\r\n  flex: 1;\r\n  color: white;\r\n}\r\n\r\n.banner-title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  margin-bottom: 8px;\r\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.banner-description {\r\n  font-size: 14px;\r\n  margin-bottom: 12px;\r\n  opacity: 0.9;\r\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.banner-cta {\r\n  background: linear-gradient(135deg, #ff6b35, #f7931e);\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.banner-cta:hover {\r\n  transform: scale(1.05);\r\n}\r\n\r\n.banner-badge {\r\n  position: absolute;\r\n  top: 12px;\r\n  right: 12px;\r\n  background: rgba(255, 107, 53, 0.9);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .banner-container {\r\n    height: 100px;\r\n  }\r\n  \r\n  .banner-overlay {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .banner-title {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .banner-description {\r\n    font-size: 12px;\r\n  }\r\n  \r\n  .banner-cta {\r\n    padding: 6px 12px;\r\n    font-size: 12px;\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}