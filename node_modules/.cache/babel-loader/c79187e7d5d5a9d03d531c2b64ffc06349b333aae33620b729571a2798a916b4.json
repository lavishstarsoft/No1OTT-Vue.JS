{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-[#121212] text-white py-6\"\n};\nconst _hoisted_2 = {\n  class: \"w-full px-2 md:px-4\"\n};\nconst _hoisted_3 = {\n  class: \"flex items-center mb-8 relative px-2 md:px-6\"\n};\nconst _hoisted_4 = {\n  class: \"w-full text-center\"\n};\nconst _hoisted_5 = {\n  class: \"text-3xl font-bold relative inline-block px-4\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"flex justify-center items-center py-8\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"col-span-full flex flex-col items-center justify-center py-16\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  class: \"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2\"\n};\nconst _hoisted_11 = [\"src\", \"alt\"];\nconst _hoisted_12 = {\n  class: \"absolute top-1 left-1 flex gap-1\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded\"\n};\nconst _hoisted_14 = {\n  key: 1,\n  class: \"bg-purple-600 text-white text-[10px] px-1.5 py-0.5 rounded\"\n};\nconst _hoisted_15 = {\n  key: 2,\n  class: \"bg-yellow-600 text-white text-[10px] px-1.5 py-0.5 rounded\"\n};\nconst _hoisted_16 = {\n  class: \"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white\"\n};\nconst _hoisted_17 = {\n  class: \"px-1\"\n};\nconst _hoisted_18 = {\n  class: \"text-sm font-medium mb-0.5 line-clamp-2\"\n};\nconst _hoisted_19 = {\n  key: 2,\n  class: \"mt-6 text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.back()),\n    class: \"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10\"\n  }, _cache[2] || (_cache[2] = [_createElementVNode(\"i\", {\n    class: \"fas fa-arrow-left text-2xl\"\n  }, null, -1)])), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h1\", _hoisted_5, [_createTextVNode(_toDisplayString($setup.category?.name || 'Loading...') + \" \", 1), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-red-500 to-red-800\"\n  }, null, -1))])])]), !$setup.category ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[4] || (_cache[4] = [_createElementVNode(\"div\", {\n    class: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"\n  }, null, -1)]))) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [$setup.categoryVideos.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _cache[5] || (_cache[5] = [_createElementVNode(\"i\", {\n    class: \"fas fa-film text-6xl text-gray-600 mb-4\"\n  }, null, -1), _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-gray-400 mb-2\"\n  }, \"Coming Soon\", -1), _createElementVNode(\"p\", {\n    class: \"text-gray-500 text-center\"\n  }, \"Videos for this category will be available soon.\", -1)]))) : (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 1\n  }, _renderList($setup.categoryVideos, video => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: video.id,\n      class: \"cursor-pointer group transform hover:scale-105 transition-transform duration-200\",\n      onClick: $event => $setup.playVideo(video)\n    }, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"img\", {\n      src: video.thumbnail_url,\n      alt: video.title,\n      class: \"w-full h-full object-cover\"\n    }, null, 8, _hoisted_11), _createElementVNode(\"div\", _hoisted_12, [$setup.isNewVideo(video.created_at) ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \" NEW \")) : _createCommentVNode(\"\", true), video.is_premium ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \" PREMIUM \")) : _createCommentVNode(\"\", true), video.video_type === 'rental' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_15, \" RENTAL \")) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_16, _toDisplayString($setup.formatDuration(video.duration)), 1), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n      class: \"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\"\n    }, [_createElementVNode(\"div\", {\n      class: \"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\"\n    }, [_createElementVNode(\"i\", {\n      class: \"fas fa-play text-sm text-white\"\n    })])], -1))]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"h3\", _hoisted_18, _toDisplayString(video.title), 1)])], 8, _hoisted_9);\n  }), 128))])), $setup.hasMoreVideos ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.loadMoreVideos && $setup.loadMoreVideos(...args)),\n    class: \"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm\"\n  }, \" Load More \")])) : _createCommentVNode(\"\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$event","_ctx","$router","back","_hoisted_4","_hoisted_5","$setup","category","name","_hoisted_6","_hoisted_7","categoryVideos","length","_hoisted_8","_Fragment","key","_renderList","video","id","playVideo","_hoisted_10","src","thumbnail_url","alt","title","_hoisted_12","isNewVideo","created_at","_hoisted_13","is_premium","_hoisted_14","video_type","_hoisted_15","_hoisted_16","_toDisplayString","formatDuration","duration","_hoisted_17","_hoisted_18","hasMoreVideos","_hoisted_19","args","loadMoreVideos"],"sources":["D:\\OTT\\ott_frontend\\src\\views\\CategoryVideos.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-[#121212] text-white py-6\">\n    <div class=\"w-full px-2 md:px-4\">\n      <!-- Back Button and Category Header -->\n      <div class=\"flex items-center mb-8 relative px-2 md:px-6\">\n        <button \n          @click=\"$router.back()\" \n          class=\"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10\"\n        >\n          <i class=\"fas fa-arrow-left text-2xl\"></i>\n        </button>\n        <div class=\"w-full text-center\">\n          <h1 class=\"text-3xl font-bold relative inline-block px-4\">\n            {{ category?.name || 'Loading...' }}\n            <div class=\"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-red-500 to-red-800\"></div>\n          </h1>\n        </div>\n      </div>\n\n      <!-- Loading State -->\n      <div v-if=\"!category\" class=\"flex justify-center items-center py-8\">\n        <div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"></div>\n      </div>\n\n      <!-- Videos Grid -->\n      <div v-else class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0\">\n        <!-- Show Coming Soon message if no videos -->\n        <div v-if=\"categoryVideos.length === 0\" class=\"col-span-full flex flex-col items-center justify-center py-16\">\n          <i class=\"fas fa-film text-6xl text-gray-600 mb-4\"></i>\n          <h2 class=\"text-2xl font-bold text-gray-400 mb-2\">Coming Soon</h2>\n          <p class=\"text-gray-500 text-center\">Videos for this category will be available soon.</p>\n        </div>\n        \n        <!-- Show videos if available -->\n        <div \n          v-else\n          v-for=\"video in categoryVideos\" \n          :key=\"video.id\"\n          class=\"cursor-pointer group transform hover:scale-105 transition-transform duration-200\"\n          @click=\"playVideo(video)\"\n        >\n          <!-- 16:9 Aspect Ratio Container -->\n          <div class=\"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2\">\n            <img \n              :src=\"video.thumbnail_url\" \n              :alt=\"video.title\"\n              class=\"w-full h-full object-cover\"\n            >\n            \n            <!-- Video badges -->\n            <div class=\"absolute top-1 left-1 flex gap-1\">\n              <span v-if=\"isNewVideo(video.created_at)\" class=\"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\n                NEW\n              </span>\n              <span v-if=\"video.is_premium\" class=\"bg-purple-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\n                PREMIUM\n              </span>\n              <span v-if=\"video.video_type === 'rental'\" class=\"bg-yellow-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\n                RENTAL\n              </span>\n            </div>\n            \n            <!-- Duration badge -->\n            <div class=\"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white\">\n              {{ formatDuration(video.duration) }}\n            </div>\n            \n            <!-- Play button overlay -->\n            <div class=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\">\n              <div class=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n                <i class=\"fas fa-play text-sm text-white\"></i>\n              </div>\n            </div>\n          </div>\n\n          <!-- Video Info -->\n          <div class=\"px-1\">\n            <h3 class=\"text-sm font-medium mb-0.5 line-clamp-2\">{{ video.title }}</h3>\n          </div>\n        </div>\n      </div>\n\n      <!-- Load More Button -->\n      <div v-if=\"hasMoreVideos\" class=\"mt-6 text-center\">\n        <button \n          @click=\"loadMoreVideos\" \n          class=\"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm\"\n        >\n          Load More\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nexport default {\n  name: 'CategoryVideos',\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const category = ref(null)\n    const categoryVideos = ref([])\n    const currentPage = ref(1)\n    const hasMoreVideos = ref(true)\n    const pageSize = 20\n\n    const fetchVideos = async (page = 1) => {\n      try {\n        const response = await axios.get(`https://admin.no1ott.com/api/videos/category/${route.params.id}/?page=${page}&page_size=${pageSize}`)\n        if (response.data.status === 'success') {\n          // Set category name from the response\n          if (response.data.category) {\n            category.value = {\n              ...response.data.category,\n              name: capitalizeText(response.data.category.name)\n            }\n          }\n\n          const processedVideos = response.data.data.map(video => ({\n            ...video,\n            title: capitalizeText(video.title),\n            description: capitalizeText(video.description)\n          }))\n\n          if (page === 1) {\n            categoryVideos.value = processedVideos\n          } else {\n            categoryVideos.value = [...categoryVideos.value, ...processedVideos]\n          }\n\n          hasMoreVideos.value = response.data.pagination.has_next\n          currentPage.value = page\n        }\n      } catch (error) {\n        console.error('Error fetching videos:', error)\n      }\n    }\n\n    const loadMoreVideos = () => {\n      if (hasMoreVideos.value) {\n        fetchVideos(currentPage.value + 1)\n      }\n    }\n\n    const playVideo = (video) => {\n      router.push({\n        name: 'MovieDetails',\n        params: { \n          id: video.id,\n          videoUrl: video.video_url,\n          videoType: 'hls'\n        }\n      })\n    }\n\n    const capitalizeText = (text) => {\n      if (!text) return '';\n      return text.split(/[\\s-]+/).map(word => {\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\n        if (specialWords.includes(word.toUpperCase())) {\n          return word.toUpperCase();\n        }\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\n        if (minorWords.includes(word.toLowerCase())) {\n          return word.toLowerCase();\n        }\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n      }).join(' ');\n    }\n\n    const isNewVideo = (createdAt) => {\n      const videoDate = new Date(createdAt)\n      const now = new Date()\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24))\n      return diffDays <= 7\n    }\n\n    const formatDuration = (seconds) => {\n      const minutes = Math.floor(seconds / 60)\n      const remainingSeconds = seconds % 60\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`\n    }\n\n    const formatViews = (views) => {\n      if (views >= 1000000) {\n        return `${(views / 1000000).toFixed(1)}M`\n      } else if (views >= 1000) {\n        return `${(views / 1000).toFixed(1)}K`\n      }\n      return views.toString()\n    }\n\n    onMounted(() => {\n      fetchVideos()\n    })\n\n    return {\n      category,\n      categoryVideos,\n      hasMoreVideos,\n      loadMoreVideos,\n      playVideo,\n      isNewVideo,\n      formatDuration,\n      formatViews\n    }\n  }\n}\n</script>\n\n<style scoped>\n.aspect-video {\n  aspect-ratio: 16/9;\n}\n\n/* Add gradient text effect */\nh1 {\n  background: linear-gradient(to right, #ffffff, #cccccc);\n  -webkit-background-clip: text;\n  background-clip: text;\n  display: inline-block;\n  padding-bottom: 4px;\n  margin: 0 auto;\n}\n\n/* Add hover effect on back button */\nbutton:hover i {\n  transform: translateX(-3px);\n  transition: transform 0.2s ease;\n}\n\n/* Add line clamp for title */\n.line-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}