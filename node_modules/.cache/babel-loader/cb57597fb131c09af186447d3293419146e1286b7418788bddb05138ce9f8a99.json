{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport axios from 'axios';\nimport store from '../store';\nimport router from '../router';\n\n// Clear all types of storage\nconst clearAllStorage = () => {\n  // Clear localStorage\n  const preservedKeys = ['theme']; // Keys to preserve if any\n  Object.keys(localStorage).forEach(key => {\n    if (!preservedKeys.includes(key)) {\n      localStorage.removeItem(key);\n    }\n  });\n\n  // Clear sessionStorage\n  sessionStorage.clear();\n\n  // Clear cookies\n  document.cookie.split(\";\").forEach(cookie => {\n    const name = cookie.split(\"=\")[0].trim();\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  });\n};\n\n// Reset Vuex store\nconst resetStore = async () => {\n  await store.dispatch('resetState');\n};\n\n// Logout from backend\nconst logoutFromBackend = async () => {\n  try {\n    await axios.post('/users/logout/');\n  } catch (error) {\n    console.error('Logout API error:', error);\n    // Continue with frontend logout even if backend fails\n  }\n};\n\n// Main logout function\nexport const handleLogout = async () => {\n  try {\n    // 1. Logout from backend first\n    await logoutFromBackend();\n\n    // 2. Clear all storage\n    clearAllStorage();\n\n    // 3. Reset Vuex store\n    await resetStore();\n\n    // 4. Use Vue Router for navigation (replace instead of push)\n    await router.replace('/login');\n  } catch (error) {\n    console.error('Logout error:', error);\n    // Force redirect to login even if there's an error\n    await router.replace('/login');\n  }\n};","map":{"version":3,"names":["axios","store","router","clearAllStorage","preservedKeys","Object","keys","localStorage","forEach","key","includes","removeItem","sessionStorage","clear","document","cookie","split","name","trim","resetStore","dispatch","logoutFromBackend","post","error","console","handleLogout","replace"],"sources":["/Users/saisudhakarmanchala/Documents/No1OTT/ott_frontend_mpd/src/utils/auth.js"],"sourcesContent":["import axios from 'axios';\nimport store from '../store';\nimport router from '../router';\n\n// Clear all types of storage\nconst clearAllStorage = () => {\n  // Clear localStorage\n  const preservedKeys = ['theme']; // Keys to preserve if any\n  Object.keys(localStorage).forEach(key => {\n    if (!preservedKeys.includes(key)) {\n      localStorage.removeItem(key);\n    }\n  });\n\n  // Clear sessionStorage\n  sessionStorage.clear();\n\n  // Clear cookies\n  document.cookie.split(\";\").forEach(cookie => {\n    const name = cookie.split(\"=\")[0].trim();\n    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n  });\n};\n\n// Reset Vuex store\nconst resetStore = async () => {\n  await store.dispatch('resetState');\n};\n\n// Logout from backend\nconst logoutFromBackend = async () => {\n  try {\n    await axios.post('/users/logout/');\n  } catch (error) {\n    console.error('Logout API error:', error);\n    // Continue with frontend logout even if backend fails\n  }\n};\n\n// Main logout function\nexport const handleLogout = async () => {\n  try {\n    // 1. Logout from backend first\n    await logoutFromBackend();\n    \n    // 2. Clear all storage\n    clearAllStorage();\n    \n    // 3. Reset Vuex store\n    await resetStore();\n    \n    // 4. Use Vue Router for navigation (replace instead of push)\n    await router.replace('/login');\n    \n  } catch (error) {\n    console.error('Logout error:', error);\n    // Force redirect to login even if there's an error\n    await router.replace('/login');\n  }\n}; "],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,UAAU;AAC5B,OAAOC,MAAM,MAAM,WAAW;;AAE9B;AACA,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAC5B;EACA,MAAMC,aAAa,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;EACjCC,MAAM,CAACC,IAAI,CAACC,YAAY,CAAC,CAACC,OAAO,CAACC,GAAG,IAAI;IACvC,IAAI,CAACL,aAAa,CAACM,QAAQ,CAACD,GAAG,CAAC,EAAE;MAChCF,YAAY,CAACI,UAAU,CAACF,GAAG,CAAC;IAC9B;EACF,CAAC,CAAC;;EAEF;EACAG,cAAc,CAACC,KAAK,CAAC,CAAC;;EAEtB;EACAC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAACR,OAAO,CAACO,MAAM,IAAI;IAC3C,MAAME,IAAI,GAAGF,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC;IACxCJ,QAAQ,CAACC,MAAM,GAAG,GAAGE,IAAI,mDAAmD;EAC9E,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,MAAME,UAAU,GAAG,MAAAA,CAAA,KAAY;EAC7B,MAAMlB,KAAK,CAACmB,QAAQ,CAAC,YAAY,CAAC;AACpC,CAAC;;AAED;AACA,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;EACpC,IAAI;IACF,MAAMrB,KAAK,CAACsB,IAAI,CAAC,gBAAgB,CAAC;EACpC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IACzC;EACF;AACF,CAAC;;AAED;AACA,OAAO,MAAME,YAAY,GAAG,MAAAA,CAAA,KAAY;EACtC,IAAI;IACF;IACA,MAAMJ,iBAAiB,CAAC,CAAC;;IAEzB;IACAlB,eAAe,CAAC,CAAC;;IAEjB;IACA,MAAMgB,UAAU,CAAC,CAAC;;IAElB;IACA,MAAMjB,MAAM,CAACwB,OAAO,CAAC,QAAQ,CAAC;EAEhC,CAAC,CAAC,OAAOH,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACrC;IACA,MAAMrB,MAAM,CAACwB,OAAO,CAAC,QAAQ,CAAC;EAChC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}