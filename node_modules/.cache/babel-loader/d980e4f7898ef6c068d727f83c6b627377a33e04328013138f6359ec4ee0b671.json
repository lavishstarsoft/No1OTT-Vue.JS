{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\nexport default {\n  name: 'AdvancedVideoPlayer',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    poster: {\n      type: String,\n      default: ''\n    },\n    autoplay: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    enableAutoRotate: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['close'],\n  // Add navigation guard to detect route leaving\n  beforeRouteLeave(to, from, next) {\n    console.log('ðŸŽ¬ Route leaving detected, cleaning up video player');\n    this.handleNavigationCleanup();\n    next();\n  },\n  data() {\n    return {\n      player: null,\n      isPlaying: false,\n      currentTime: 0,\n      duration: 0,\n      buffered: 0,\n      isMuted: false,\n      volume: 1,\n      isFullscreen: false,\n      showControls: true,\n      controlsTimeout: null,\n      qualities: ['Auto', '1080p', '720p', '480p', '360p'],\n      selectedQuality: 'Auto',\n      bufferedPercent: 0,\n      playedPercent: 0,\n      isDragging: false,\n      isMobile: false,\n      isLandscape: false,\n      touchStartTime: 0,\n      touchStartX: 0,\n      touchStartY: 0,\n      touchMoved: false,\n      lastTapTime: 0,\n      controlsTimeoutDuration: 3500,\n      // 3.5 seconds\n      seekThreshold: 50,\n      // Minimum pixels to trigger seek\n      volumeThreshold: 30,\n      // Minimum pixels to trigger volume change\n      seekRate: 10,\n      // Seconds to seek per swipe,\n      isSeeking: false,\n      hasAutoRotated: false,\n      hasShownRotationHint: false,\n      isLoading: true,\n      loadingTimeout: null,\n      userPaused: false,\n      // Track if the user initiated the pause\n      continuousPlayback: true,\n      // Enable continuous playback mode\n      lastPlayTime: 0,\n      // Track last play time for continuity\n      pauseRecoveryAttempts: 0,\n      // Track recovery attempts\n      wasPlayingBeforeSeek: false,\n      // Track if video was playing before seeking\n\n      // Netflix-style controls data\n      showVolumeSlider: false,\n      showQualityMenu: false,\n      showProgressPreview: false,\n      showProgressHandle: false,\n      progressPreviewPosition: 0,\n      progressPreviewTime: 0,\n      showBackwardIcon: false,\n      showForwardIcon: false,\n      showVolumeGesture: false,\n      showBrightnessGesture: false,\n      brightness: 1,\n      supportsPiP: false,\n      gestureStartX: 0,\n      gestureStartY: 0,\n      isGesturing: false,\n      gestureType: '',\n      // 'volume', 'brightness', 'seek'\n      lastMouseMove: 0,\n      keyboardShortcuts: true\n    };\n  },\n  computed: {\n    volumeIconState() {\n      if (this.isMuted || this.volume === 0) {\n        return 'muted';\n      } else if (this.volume < 0.5) {\n        return 'low';\n      } else {\n        return 'high';\n      }\n    }\n  },\n  mounted() {\n    console.log('ðŸŽ¬ AdvancedVideoPlayer mounted with props:', {\n      src: this.src,\n      title: this.title\n    });\n    this.initializePlayer();\n    this.checkMobileDevice();\n    this.checkOrientation();\n\n    // Initialize mobile audio context\n    this.initializeMobileAudioContext();\n\n    // Add window popstate event listener for handling browser back button\n    window.addEventListener('popstate', this.handleBackNavigation);\n\n    // Add orientation change listeners\n    if (this.isMobile) {\n      window.addEventListener('orientationchange', this.handleOrientationChange);\n      window.addEventListener('resize', this.checkOrientation);\n    }\n\n    // Setup orientation listener\n    this.setupOrientationListener();\n\n    // Check Picture-in-Picture support\n    this.checkPiPSupport();\n\n    // Add keyboard event listeners\n    if (this.keyboardShortcuts) {\n      document.addEventListener('keydown', this.handleKeyDown);\n    }\n  },\n  methods: {\n    checkMobileDevice() {\n      this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && (typeof window.orientation !== 'undefined' || navigator.maxTouchPoints > 0);\n\n      // Add mobile-specific autoplay handling\n      if (this.isMobile && this.autoplay) {\n        // For mobile, we need to handle autoplay differently\n        this.handleMobileAutoplay();\n      }\n    },\n    handleMobileAutoplay() {\n      // Mobile browsers require user interaction for autoplay\n      // We'll start muted and unmute after user interaction\n      if (this.player) {\n        this.player.muted(true);\n        this.player.volume(0.5); // Set volume but keep muted\n        console.log('ðŸŽ¬ Mobile autoplay: Video muted for user interaction');\n      }\n    },\n    // Handle mobile audio permissions and user interaction\n    handleMobileAudioInteraction() {\n      if (this.isMobile && this.player) {\n        try {\n          // Resume audio context if suspended\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n\n          // Unmute video player\n          if (this.player.muted()) {\n            this.player.muted(false);\n            this.player.volume(0.5);\n            console.log('ðŸŽ¬ Mobile: Audio enabled after user interaction');\n          }\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio interaction error:', error);\n        }\n      }\n    },\n    // Mobile-specific audio cleanup\n    handleMobileAudioCleanup() {\n      if (this.isMobile && this.player) {\n        try {\n          // Force stop audio on mobile\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n\n          // For iOS Safari, we need to be more aggressive\n          if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {\n            // Create a silent audio context to stop any background audio\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n            audioContext.close();\n          }\n          console.log('ðŸŽ¬ Mobile audio cleanup completed');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio cleanup error:', error);\n        }\n      }\n    },\n    // Initialize mobile audio context for better audio support\n    initializeMobileAudioContext() {\n      if (this.isMobile) {\n        try {\n          // Create and resume audio context for mobile audio support\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n          console.log('ðŸŽ¬ Mobile audio context initialized');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio context error:', error);\n        }\n      }\n    },\n    setupOrientationListener() {\n      if (this.isMobile && this.enableAutoRotate) {\n        window.addEventListener('orientationchange', this.handleOrientationChange);\n        document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n\n        // Add play state listener\n        this.player.on('play', this.handleFirstPlay);\n      }\n    },\n    async handleFirstPlay() {\n      // Only handle first play\n      if (!this.hasAutoRotated && this.isMobile && this.enableAutoRotate) {\n        this.hasAutoRotated = true;\n        await this.checkAndRotate();\n      }\n      // Remove listener after first play\n      this.player.off('play', this.handleFirstPlay);\n    },\n    async checkAndRotate() {\n      // Multiple ways to detect landscape mode\n      let isLandscape = false;\n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        isLandscape = window.innerWidth > window.innerHeight;\n      }\n      if (!isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      }\n    },\n    async handleOrientationChange() {\n      // Wait for orientation change to complete\n      await new Promise(resolve => setTimeout(resolve, 150));\n      const isLandscape = window.orientation === 90 || window.orientation === -90;\n      if (isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      } else if (!isLandscape && this.isFullscreen) {\n        await this.exitFullscreen();\n      }\n    },\n    async enterFullscreen() {\n      if (!this.isFullscreen) {\n        try {\n          const elem = this.$el;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n\n          // Try to lock orientation to landscape\n          if (this.isMobile && window.screen?.orientation?.lock) {\n            try {\n              await window.screen.orientation.lock('landscape');\n            } catch (e) {\n              console.log('Orientation lock not supported');\n            }\n          }\n        } catch (err) {\n          console.error('Fullscreen error:', err);\n        }\n      }\n    },\n    async exitFullscreen() {\n      if (this.isFullscreen) {\n        try {\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n\n          // Force update fullscreen state\n          this.isFullscreen = false;\n\n          // Unlock orientation\n          if (this.isMobile) {\n            this.tryUnlockOrientation();\n          }\n\n          // Reset page styles after exiting fullscreen\n          this.resetPageStyles();\n        } catch (err) {\n          console.error('Exit fullscreen error:', err);\n          // Force reset even if exit fails\n          this.isFullscreen = false;\n          this.resetPageStyles();\n        }\n      }\n    },\n    async toggleFullscreen() {\n      try {\n        if (!this.isFullscreen) {\n          // Enter fullscreen\n          const elem = this.$refs.videoElement.parentElement;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n        } else {\n          // Exit fullscreen\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n        }\n      } catch (error) {\n        console.error('Fullscreen toggle error:', error);\n      }\n    },\n    handleFullscreenChange() {\n      this.isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);\n\n      // Try to lock orientation to landscape if entering fullscreen on mobile\n      if (this.isFullscreen && this.isMobile) {\n        this.tryLockOrientation();\n      } else if (!this.isFullscreen && this.isMobile) {\n        this.tryUnlockOrientation();\n      }\n    },\n    tryLockOrientation() {\n      if (!this.isMobile) return;\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.lock && typeof window.screen.orientation.lock === 'function') {\n          window.screen.orientation.lock('landscape').catch(err => {\n            console.log('Orientation lock not supported or permission denied:', err);\n          });\n        } else if (window.screen?.lockOrientation) {\n          // Fallback for older browsers\n          try {\n            window.screen.lockOrientation('landscape');\n          } catch (err) {\n            console.log('Legacy orientation lock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation lock not supported:', err);\n      }\n    },\n    tryUnlockOrientation() {\n      if (!this.isMobile) return;\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.unlock && typeof window.screen.orientation.unlock === 'function') {\n          // Use Promise.resolve().catch() to safely handle both Promise and non-Promise returns\n          Promise.resolve(window.screen.orientation.unlock()).catch(err => {\n            console.log('Orientation unlock error:', err);\n          });\n        } else if (window.screen?.unlockOrientation && typeof window.screen.unlockOrientation === 'function') {\n          // Fallback for older browsers\n          try {\n            window.screen.unlockOrientation();\n          } catch (err) {\n            console.log('Legacy orientation unlock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation unlock not supported:', err);\n      }\n    },\n    initializePlayer() {\n      const videoElement = this.$refs.videoElement;\n\n      // Add fullscreen change event listeners\n      document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n      this.player = videojs(videoElement, {\n        controls: false,\n        // We'll use custom controls\n        autoplay: this.autoplay,\n        preload: 'auto',\n        fluid: true,\n        html5: {\n          hls: {\n            enableLowInitialPlaylist: true,\n            smoothQualityChange: true,\n            overrideNative: true,\n            handlePartialData: true,\n            // Add better buffering settings for continuous playback\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000,\n            // 120MB for better buffering\n            maxBufferHole: 0.1,\n            // Smaller buffer holes for smoother playback\n            lowLatencyMode: false,\n            backBufferLength: 60,\n            // Add continuous playback settings\n            limitRenditionByPlayerDimensions: false\n          },\n          vhs: {\n            limitRenditionByPlayerDimensions: false,\n            smoothQualityChange: true,\n            maxPlaylistRetries: 10,\n            // More retries for better reliability\n            bufferSize: 60,\n            enableLowInitialPlaylist: true,\n            allowSeeksWithinUnsafeLiveWindow: true,\n            handlePartialData: true,\n            overrideNative: true,\n            // Add better buffering settings for continuous playback\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000,\n            // 120MB for better buffering\n            maxBufferHole: 0.1,\n            // Smaller buffer holes for smoother playback\n            lowLatencyMode: false,\n            backBufferLength: 60\n          },\n          nativeTextTracks: false,\n          nativeAudioTracks: false,\n          nativeVideoTracks: false\n        },\n        // Add performance options for continuous playback\n        techOrder: ['html5'],\n        playbackRates: [0.5, 1, 1.5, 2],\n        responsive: true,\n        aspectRatio: '16:9',\n        // Add playback optimization for continuous streaming\n        liveui: true,\n        inactivityTimeout: 0,\n        suppressNotSupportedError: true,\n        // Add mobile-specific settings\n        playsinline: true,\n        'webkit-playsinline': true,\n        // Add better error recovery\n        errorDisplay: false,\n        // Add autoplay settings for mobile\n        muted: this.isMobile,\n        // Start muted only on mobile to allow autoplay\n        volume: 0.5,\n        // Add continuous playback settings\n        poster: this.poster\n      });\n\n      // Add loading event listeners\n      this.player.on('loadstart', () => {\n        console.log('ðŸŽ¬ Video loadstart event fired');\n        this.isLoading = true;\n      });\n      this.player.on('loadeddata', () => {\n        console.log('ðŸŽ¬ Video loadeddata event fired');\n        this.isLoading = false;\n      });\n      this.player.on('waiting', () => {\n        console.log('ðŸŽ¬ Video waiting event fired');\n        // Show loading if waiting for more than 500ms\n        this.loadingTimeout = setTimeout(() => {\n          this.isLoading = true;\n        }, 500);\n\n        // Ensure playback continues after buffering\n        if (this.continuousPlayback && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after buffering:', err);\n              });\n            }\n          }, 2000);\n        }\n      });\n      this.player.on('playing', () => {\n        console.log('ðŸŽ¬ Video playing event fired');\n        this.isLoading = false;\n        if (this.loadingTimeout) {\n          clearTimeout(this.loadingTimeout);\n        }\n        // Unmute after playback starts\n        if (this.player.muted()) {\n          this.player.muted(false);\n        }\n      });\n      this.player.on('error', error => {\n        console.log('ðŸŽ¬ Video error event fired:', error);\n        this.isLoading = false;\n        // Try to recover from error\n        this.handleVideoError(error);\n      });\n\n      // Add more event listeners for better control\n      this.player.on('canplay', () => {\n        console.log('ðŸŽ¬ Video canplay event fired');\n        this.isLoading = false;\n      });\n      this.player.on('canplaythrough', () => {\n        console.log('ðŸŽ¬ Video canplaythrough event fired');\n        this.isLoading = false;\n      });\n      this.player.on('stalled', () => {\n        console.log('ðŸŽ¬ Video stalled event fired');\n        // Only try to resume if we're supposed to be playing\n        if (this.isPlaying && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after stall:', err);\n              });\n            }\n          }, 2000); // Longer delay for stall recovery\n        }\n      });\n      this.player.on('suspend', () => {\n        console.log('ðŸŽ¬ Video suspend event fired');\n      });\n      this.player.on('abort', () => {\n        console.log('ðŸŽ¬ Video abort event fired');\n      });\n\n      // Event listeners\n      this.player.on('timeupdate', this.onTimeUpdate);\n      this.player.on('progress', this.onProgress);\n      this.player.on('play', () => {\n        console.log('ðŸŽ¬ Video play event fired');\n        this.isPlaying = true;\n        this.pauseRecoveryAttempts = 0; // Reset recovery attempts on successful play\n\n        // Hide loading indicator when video starts playing\n        this.isLoading = false;\n      });\n      this.player.on('pause', () => {\n        console.log('ðŸŽ¬ Video pause event fired');\n        this.isPlaying = false;\n        this.lastPlayTime = this.player.currentTime();\n\n        // Only auto-resume if it's not user-initiated and continuous playback is enabled\n        if (!this.userPaused && this.continuousPlayback) {\n          this.ensureContinuousPlayback();\n        }\n      });\n      this.player.on('ended', () => {\n        console.log('ðŸŽ¬ Video ended event fired');\n        this.isPlaying = false;\n      });\n      this.player.on('loadedmetadata', () => {\n        this.duration = this.player.duration();\n        console.log('ðŸŽ¬ Video duration:', this.duration);\n        // Get available qualities\n        if (this.player.tech().hls) {\n          const qualities = this.player.tech().hls.representations();\n          if (qualities.length > 0) {\n            this.qualities = ['Auto', ...qualities.map(q => `${q.height}p`)];\n          }\n        }\n      });\n\n      // Add visibility change listener to handle tab switching\n      document.addEventListener('visibilitychange', this.handleVisibilityChange);\n\n      // Add network recovery listener\n      window.addEventListener('online', this.handleNetworkRecovery);\n\n      // Add page unload listener to stop audio\n      window.addEventListener('beforeunload', this.handlePageUnload);\n      window.addEventListener('pagehide', this.handlePageUnload);\n    },\n    handlePageUnload() {\n      // Stop all audio when page is unloading\n      if (this.player) {\n        this.player.pause();\n        this.player.muted(true);\n        this.player.volume(0);\n      }\n    },\n    handleVideoError(error) {\n      console.log('ðŸŽ¬ Handling video error:', error);\n      // Try to reload the video after a short delay\n      setTimeout(() => {\n        if (this.player) {\n          this.player.src(this.src);\n          this.player.load();\n          this.player.play().catch(err => {\n            console.log('Failed to play after error recovery:', err);\n            // Try one more time with a longer delay\n            setTimeout(() => {\n              if (this.player) {\n                this.player.play().catch(err2 => {\n                  console.log('Second attempt to play after error failed:', err2);\n                });\n              }\n            }, 3000);\n          });\n        }\n      }, 2000);\n    },\n    // Add network recovery method\n    handleNetworkRecovery() {\n      if (this.player && !this.isPlaying && !this.userPaused && this.continuousPlayback) {\n        console.log('ðŸŽ¬ Attempting network recovery');\n        this.player.play().catch(err => {\n          console.log('Network recovery failed:', err);\n        });\n      }\n    },\n    // Ensure continuous playback\n    ensureContinuousPlayback() {\n      if (this.continuousPlayback && this.player && !this.isPlaying && !this.userPaused) {\n        console.log('ðŸŽ¬ Ensuring continuous playback');\n        this.pauseRecoveryAttempts++;\n        if (this.pauseRecoveryAttempts <= 3) {\n          // Limit recovery attempts\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Continuous playback recovery failed:', err);\n              });\n            }\n          }, 1500 * this.pauseRecoveryAttempts); // Exponential backoff\n        } else {\n          console.log('ðŸŽ¬ Max recovery attempts reached, resetting');\n          this.pauseRecoveryAttempts = 0;\n        }\n      }\n    },\n    handleUnexpectedPause() {\n      // Only auto-resume if it's not a user-initiated pause\n      if (!this.userPaused && this.player && !this.player.ended()) {\n        console.log('ðŸŽ¬ Auto-resuming video after unexpected pause');\n        // Use a longer delay to prevent rapid pause/resume cycles\n        setTimeout(() => {\n          if (this.player && !this.isPlaying && !this.userPaused) {\n            this.player.play().catch(err => {\n              console.log('Failed to auto-resume:', err);\n              // Try one more time with exponential backoff\n              setTimeout(() => {\n                if (this.player && !this.isPlaying && !this.userPaused) {\n                  this.player.play().catch(err2 => {\n                    console.log('Second auto-resume attempt failed:', err2);\n                  });\n                }\n              }, 1000);\n            });\n          }\n        }, 1000); // Increased delay to prevent flickering\n      }\n    },\n    handleVisibilityChange() {\n      if (document.hidden) {\n        // Page is hidden, stop video and audio completely\n        if (this.player) {\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n        }\n      } else {\n        // Page is visible again, resume if it was playing\n        if (this.player && !this.isPlaying && !this.userPaused) {\n          this.player.muted(false);\n          this.player.volume(0.5);\n          this.player.play().catch(err => {\n            console.log('Failed to resume after visibility change:', err);\n          });\n        }\n      }\n    },\n    showControlsTemporarily() {\n      this.showControls = true;\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          // Only hide if we're not seeking or touching\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, 4000); // Increased to 4 seconds\n      }\n    },\n    hideControls() {\n      if (this.isPlaying) {\n        this.showControls = false;\n      }\n    },\n    togglePlay() {\n      if (!this.player || typeof this.player.paused !== 'function') {\n        return;\n      }\n      if (this.isPlaying) {\n        this.userPaused = true;\n        this.pauseRecoveryAttempts = 0; // Reset recovery attempts on user pause\n        this.player.pause();\n      } else {\n        this.userPaused = false;\n        this.pauseRecoveryAttempts = 0; // Reset recovery attempts on user play\n\n        // Handle mobile audio unmuting when play is pressed\n        this.handleMobileAudioInteraction();\n        this.player.play();\n      }\n      this.showControls = true;\n      this.showControlsTemporarily();\n    },\n    onTimeUpdate() {\n      if (!this.player || typeof this.player.currentTime !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      this.currentTime = this.player.currentTime();\n      this.playedPercent = this.currentTime / this.duration * 100;\n    },\n    onProgress() {\n      if (!this.player || typeof this.player.buffered !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      if (this.player.buffered().length > 0) {\n        this.buffered = this.player.buffered().end(0);\n        this.bufferedPercent = this.buffered / this.duration * 100;\n      }\n    },\n    onProgressChange(event) {\n      if (!this.player || typeof this.player.currentTime !== 'function') {\n        return;\n      }\n      const time = parseFloat(event.target.value);\n      this.player.currentTime(time);\n      this.isSeeking = true;\n    },\n    onVolumeChange(event) {\n      if (!this.player || typeof this.player.volume !== 'function') {\n        return;\n      }\n      const volume = parseFloat(event.target.value);\n      this.volume = volume;\n      this.player.volume(volume);\n      this.isMuted = volume === 0;\n    },\n    toggleMute() {\n      this.isMuted = !this.isMuted;\n      this.player.muted(this.isMuted);\n    },\n    skipForward() {\n      if (!this.player || typeof this.player.currentTime !== 'function') {\n        return;\n      }\n      this.player.currentTime(this.currentTime + 10);\n    },\n    skipBackward() {\n      if (!this.player || typeof this.player.currentTime !== 'function') {\n        return;\n      }\n      this.player.currentTime(this.currentTime - 10);\n    },\n    formatTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = Math.floor(seconds % 60);\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    },\n    beforeDestroy() {\n      console.log('ðŸŽ¬ Component destroying, starting cleanup');\n      this.performFullCleanup();\n    },\n    // For Vue 3 compatibility\n    beforeUnmount() {\n      console.log('ðŸŽ¬ Component unmounting, starting cleanup');\n      this.performFullCleanup();\n    },\n    // Comprehensive cleanup for component destruction\n    async performFullCleanup() {\n      try {\n        // Perform navigation cleanup\n        await this.handleNavigationCleanup();\n\n        // Clean up all event listeners\n        this.removeAllEventListeners();\n        console.log('ðŸŽ¬ Component cleanup completed successfully');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error during component cleanup:', error);\n        // Still try to clean up what we can\n        this.removeAllEventListeners();\n        this.resetPageStyles();\n      }\n    },\n    // Remove all event listeners\n    removeAllEventListeners() {\n      try {\n        // Remove popstate listener\n        window.removeEventListener('popstate', this.handleBackNavigation);\n\n        // Remove orientation and fullscreen listeners\n        if (this.isMobile && this.enableAutoRotate) {\n          window.removeEventListener('orientationchange', this.handleOrientationChange);\n          window.removeEventListener('resize', this.checkOrientation);\n          document.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange);\n        }\n\n        // Remove visibility change listener\n        document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n\n        // Remove network recovery listener\n        window.removeEventListener('online', this.handleNetworkRecovery);\n\n        // Remove page unload listeners\n        window.removeEventListener('beforeunload', this.handlePageUnload);\n        window.removeEventListener('pagehide', this.handlePageUnload);\n\n        // Remove keyboard event listener\n        if (this.keyboardShortcuts) {\n          document.removeEventListener('keydown', this.handleKeyDown);\n        }\n        console.log('ðŸŽ¬ All event listeners removed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error removing event listeners:', error);\n      }\n    },\n    onProgressBarClick(event) {\n      if (!this.player || typeof this.player.currentTime !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      if (!this.isDragging) {\n        const progressBar = event.currentTarget;\n        const clickX = event.clientX - progressBar.getBoundingClientRect().left;\n        const progressBarWidth = progressBar.offsetWidth;\n        const seekTime = clickX / progressBarWidth * this.duration;\n        this.player.currentTime(seekTime);\n      }\n    },\n    onQualityChange() {\n      if (!this.player || !this.player.tech().hls) return;\n      const qualities = this.player.tech().hls.representations();\n      const selectedHeight = parseInt(this.selectedQuality);\n      if (this.selectedQuality === 'Auto') {\n        // Enable auto quality selection\n        qualities.forEach(q => q.enabled(true));\n      } else {\n        // Enable only selected quality\n        qualities.forEach(q => {\n          q.enabled(q.height === selectedHeight);\n        });\n      }\n    },\n    handleTouch(event) {\n      // Store touch start time and position\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n\n      // Show controls on touch\n      this.showControls = true;\n\n      // Clear any existing timeout\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n\n      // Handle double tap\n      const currentTime = Date.now();\n      const tapLength = currentTime - this.lastTapTime;\n      if (tapLength < 300 && tapLength > 0) {\n        // Double tap detected\n        this.togglePlay();\n        event.preventDefault();\n      }\n      this.lastTapTime = currentTime;\n    },\n    handleTouchEnd(event) {\n      const touchDuration = Date.now() - this.touchStartTime;\n\n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.toggleControlsVisibility();\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n\n      // Start hide timer for controls\n      if (this.isPlaying) {\n        this.startHideTimer();\n      }\n\n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    },\n    toggleControlsVisibility() {\n      this.showControls = !this.showControls;\n      if (this.showControls) {\n        this.startHideTimer();\n      }\n    },\n    handleVideoClick(event) {\n      // Prevent click if we were seeking\n      if (this.isSeeking) {\n        this.isSeeking = false;\n        return;\n      }\n\n      // If clicked on controls, don't toggle\n      if (event.target.closest('.custom-controls-overlay')) {\n        return;\n      }\n\n      // Handle mobile autoplay - unmute on first interaction\n      this.handleMobileAudioInteraction();\n      this.toggleControlsVisibility();\n    },\n    handleTouchStart(event) {\n      // Store initial touch data\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n\n      // Show controls immediately on touch\n      this.showControls = true;\n\n      // Handle mobile audio unmuting on first touch\n      this.handleMobileAudioInteraction();\n\n      // Handle double tap\n      const timeSinceLastTap = this.touchStartTime - this.lastTapTime;\n      if (timeSinceLastTap < 300 && timeSinceLastTap > 0) {\n        // Double tap detected\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.togglePlay();\n          event.preventDefault();\n        }\n      }\n      this.lastTapTime = this.touchStartTime;\n    },\n    handleTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n\n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = clampedX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n\n      // Update video time with throttling for smooth performance\n      if (this.player && typeof this.player.currentTime === 'function') {\n        const newTime = Math.max(0, Math.min(seekTime, this.duration));\n\n        // Only update if the time difference is significant to avoid excessive updates\n        if (Math.abs(newTime - this.currentTime) > 0.5) {\n          this.player.currentTime(newTime);\n\n          // Update UI immediately for responsive feel\n          this.currentTime = newTime;\n          this.playedPercent = newTime / this.duration * 100;\n\n          // Show loading indicator while seeking\n          this.isLoading = true;\n        }\n      }\n      this.isSeeking = true;\n    },\n    startHideTimer() {\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, this.controlsTimeoutDuration);\n      }\n    },\n    async handleBackClick() {\n      console.log('ðŸŽ¬ Back button clicked');\n\n      // Use comprehensive navigation cleanup\n      await this.handleNavigationCleanup();\n\n      // Emit close event to parent\n      this.$emit('close');\n    },\n    // Comprehensive video player cleanup\n    cleanupVideoPlayer() {\n      console.log('ðŸŽ¬ Starting video player cleanup');\n      if (this.player) {\n        try {\n          // Stop all playback immediately\n          this.player.pause();\n\n          // Mute to stop audio immediately\n          this.player.muted(true);\n\n          // Set volume to 0\n          this.player.volume(0);\n\n          // Mobile-specific audio cleanup\n          this.handleMobileAudioCleanup();\n\n          // Remove all event listeners to prevent memory leaks\n          this.player.off('timeupdate');\n          this.player.off('progress');\n          this.player.off('play');\n          this.player.off('pause');\n          this.player.off('ended');\n          this.player.off('loadedmetadata');\n          this.player.off('loadstart');\n          this.player.off('loadeddata');\n          this.player.off('waiting');\n          this.player.off('playing');\n          this.player.off('error');\n          this.player.off('canplay');\n          this.player.off('canplaythrough');\n          this.player.off('stalled');\n          this.player.off('suspend');\n          this.player.off('abort');\n\n          // Remove all sources\n          this.player.src('');\n\n          // Reset player state\n          this.player.reset();\n\n          // Dispose the player completely\n          this.player.dispose();\n\n          // Clear the player reference\n          this.player = null;\n          console.log('ðŸŽ¬ Video player disposed successfully');\n        } catch (error) {\n          console.error('ðŸŽ¬ Error disposing video player:', error);\n          // Force clear player reference even if disposal fails\n          this.player = null;\n        }\n      }\n\n      // Clear all timeouts\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n        this.controlsTimeout = null;\n      }\n      if (this.loadingTimeout) {\n        clearTimeout(this.loadingTimeout);\n        this.loadingTimeout = null;\n      }\n\n      // Reset component state\n      this.isPlaying = false;\n      this.currentTime = 0;\n      this.duration = 0;\n      this.isLoading = false;\n      this.isFullscreen = false;\n      this.showControls = true;\n      this.isDragging = false;\n      this.isSeeking = false;\n      this.userPaused = false;\n      this.pauseRecoveryAttempts = 0;\n      console.log('ðŸŽ¬ Video player cleanup completed');\n    },\n    handleBackNavigation() {\n      console.log('ðŸŽ¬ Back navigation detected');\n      // Handle browser/mobile back button\n      this.handleNavigationCleanup();\n    },\n    // Comprehensive cleanup for navigation (mobile back button, browser back, route change)\n    async handleNavigationCleanup() {\n      console.log('ðŸŽ¬ Starting navigation cleanup');\n      try {\n        // Exit fullscreen if active\n        if (this.isFullscreen) {\n          await this.exitFullscreen();\n        }\n\n        // Clean up video player completely\n        this.cleanupVideoPlayer();\n\n        // Reset body and document styles that might block scrolling\n        this.resetPageStyles();\n\n        // Force scroll restoration\n        this.restorePageScroll();\n        console.log('ðŸŽ¬ Navigation cleanup completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Navigation cleanup error:', error);\n        // Still try to reset page styles even if other cleanup fails\n        this.resetPageStyles();\n        this.restorePageScroll();\n      }\n    },\n    // Reset all body/document styles that might interfere with page scrolling\n    resetPageStyles() {\n      try {\n        // Reset body styles\n        document.body.style.overflow = '';\n        document.body.style.position = '';\n        document.body.style.width = '';\n        document.body.style.height = '';\n        document.body.style.touchAction = '';\n        document.body.style.userSelect = '';\n        document.body.style.webkitUserSelect = '';\n        document.body.style.webkitTouchCallout = '';\n        document.body.style.transform = '';\n        document.body.style.transformStyle = '';\n        document.body.style.backfaceVisibility = '';\n        document.body.style.willChange = '';\n        document.body.style.pointerEvents = '';\n        document.body.style.webkitOverflowScrolling = '';\n\n        // Reset html styles  \n        document.documentElement.style.overflow = '';\n        document.documentElement.style.position = '';\n        document.documentElement.style.width = '';\n        document.documentElement.style.height = '';\n        document.documentElement.style.touchAction = '';\n        document.documentElement.style.transform = '';\n        document.documentElement.style.transformStyle = '';\n        document.documentElement.style.backfaceVisibility = '';\n        document.documentElement.style.willChange = '';\n        document.documentElement.style.pointerEvents = '';\n\n        // Remove any fullscreen classes\n        document.body.classList.remove('vjs-fullscreen');\n        document.documentElement.classList.remove('vjs-fullscreen');\n\n        // Add scroll restoration classes\n        document.body.classList.add('scroll-restored', 'force-scrollable', 'video-cleanup-reset');\n        document.documentElement.classList.add('scroll-restored', 'video-cleanup-reset');\n\n        // Remove the classes after a short delay to let styles take effect\n        setTimeout(() => {\n          document.body.classList.remove('scroll-restored', 'force-scrollable', 'video-cleanup-reset');\n          document.documentElement.classList.remove('scroll-restored', 'video-cleanup-reset');\n        }, 100);\n\n        // Reset viewport meta tag if it was modified\n        const viewport = document.querySelector('meta[name=\"viewport\"]');\n        if (viewport) {\n          viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, user-scalable=yes');\n        }\n        console.log('ðŸŽ¬ Page styles reset completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error resetting page styles:', error);\n      }\n    },\n    // Force restore page scrolling capability\n    restorePageScroll() {\n      try {\n        // Force scroll to ensure page is scrollable\n        window.scrollTo(0, window.pageYOffset || 0);\n\n        // Trigger resize event to recalculate page layout\n        window.dispatchEvent(new Event('resize'));\n\n        // Force reflow\n        document.body.offsetHeight;\n\n        // Enable touch events\n        document.body.style.pointerEvents = '';\n        document.documentElement.style.pointerEvents = '';\n        console.log('ðŸŽ¬ Page scroll restored');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error restoring page scroll:', error);\n      }\n    },\n    // ============ NETFLIX-STYLE CONTROLS METHODS ============\n\n    // Check Picture-in-Picture support\n    checkPiPSupport() {\n      this.supportsPiP = document.pictureInPictureEnabled && typeof this.$refs.videoElement?.requestPictureInPicture === 'function';\n    },\n    // Toggle Picture-in-Picture\n    async togglePictureInPicture() {\n      if (!this.supportsPiP || !this.$refs.videoElement) return;\n      try {\n        if (document.pictureInPictureElement) {\n          await document.exitPictureInPicture();\n        } else {\n          await this.$refs.videoElement.requestPictureInPicture();\n        }\n      } catch (error) {\n        console.error('Picture-in-Picture error:', error);\n      }\n    },\n    // Handle mouse movement for auto-hide controls\n    handleMouseMove() {\n      this.lastMouseMove = Date.now();\n      this.showControls = true;\n      this.showProgressHandle = true;\n      this.startAutoHideTimer();\n    },\n    // Start auto-hide timer for controls\n    startAutoHideTimer() {\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          if (Date.now() - this.lastMouseMove > 3000 && this.isPlaying) {\n            this.showControls = false;\n            this.showProgressHandle = false;\n          }\n        }, 3000);\n      }\n    },\n    // Handle progress bar hover for preview\n    handleProgressHover(event) {\n      if (!this.duration || this.isMobile) return;\n      const rect = event.currentTarget.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const percentage = x / rect.width;\n      const time = percentage * this.duration;\n      this.progressPreviewPosition = x;\n      this.progressPreviewTime = time;\n      this.showProgressPreview = true;\n    },\n    // Hide progress preview\n    hideProgressPreview() {\n      this.showProgressPreview = false;\n    },\n    // Handle skip backward with animation\n    handleSkipBackward() {\n      this.skipBackward();\n      this.showBackwardIcon = true;\n      setTimeout(() => {\n        this.showBackwardIcon = false;\n      }, 600);\n    },\n    // Handle skip forward with animation\n    handleSkipForward() {\n      this.skipForward();\n      this.showForwardIcon = true;\n      setTimeout(() => {\n        this.showForwardIcon = false;\n      }, 600);\n    },\n    // Toggle quality menu\n    toggleQualityMenu() {\n      this.showQualityMenu = !this.showQualityMenu;\n      this.showVolumeSlider = false;\n    },\n    // Select quality\n    selectQuality(quality) {\n      this.selectedQuality = quality;\n      this.showQualityMenu = false;\n      this.onQualityChange();\n    },\n    // Handle keyboard shortcuts\n    handleKeyDown(event) {\n      if (!this.keyboardShortcuts) return;\n\n      // Don't handle if user is typing in an input\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {\n        return;\n      }\n      switch (event.code) {\n        case 'Space':\n          event.preventDefault();\n          this.togglePlay();\n          break;\n        case 'ArrowLeft':\n          event.preventDefault();\n          this.skipBackward();\n          break;\n        case 'ArrowRight':\n          event.preventDefault();\n          this.skipForward();\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          this.adjustVolume(0.1);\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          this.adjustVolume(-0.1);\n          break;\n        case 'KeyM':\n          event.preventDefault();\n          this.toggleMute();\n          break;\n        case 'KeyF':\n          event.preventDefault();\n          this.toggleFullscreen();\n          break;\n        case 'Escape':\n          if (this.isFullscreen) {\n            event.preventDefault();\n            this.exitFullscreen();\n          }\n          break;\n      }\n    },\n    // Adjust volume with keyboard\n    adjustVolume(delta) {\n      const newVolume = Math.max(0, Math.min(1, this.volume + delta));\n      this.volume = newVolume;\n      this.player.volume(newVolume);\n      this.isMuted = newVolume === 0;\n\n      // Show volume gesture feedback\n      this.showVolumeGesture = true;\n      setTimeout(() => {\n        this.showVolumeGesture = false;\n      }, 1000);\n    },\n    // Enhanced touch handling for gestures\n    handleProgressTouchStart(event) {\n      this.handleProgressBarTouchStart(event);\n      this.gestureStartX = event.touches[0].clientX;\n      this.gestureStartY = event.touches[0].clientY;\n    },\n    handleProgressTouchMove(event) {\n      this.handleProgressBarTouchMove(event);\n    },\n    handleProgressTouchEnd(event) {\n      this.handleProgressBarTouchEnd(event);\n    },\n    checkOrientation() {\n      // Multiple ways to detect landscape mode\n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        this.isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        this.isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        this.isLandscape = window.innerWidth > window.innerHeight;\n      }\n    },\n    handleProgressBarTouchStart(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n\n      // Show controls when user starts dragging\n      this.showControls = true;\n      this.showControlsTemporarily();\n\n      // Add visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.add('progress-bar-active');\n\n      // Haptic feedback for mobile devices\n      if (navigator.vibrate) {\n        navigator.vibrate(50);\n      }\n\n      // Pause video while seeking for better performance\n      if (this.player && this.isPlaying) {\n        this.player.pause();\n        this.wasPlayingBeforeSeek = true;\n      }\n\n      // Show loading indicator when seeking starts\n      this.isLoading = true;\n    },\n    handleProgressBarTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n\n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = clampedX / progressBarWidth;\n      const seekTime = seekPercent * this.duration;\n\n      // Update video time with throttling for smooth performance\n      if (this.player && typeof this.player.currentTime === 'function') {\n        const newTime = Math.max(0, Math.min(seekTime, this.duration));\n\n        // Only update if the time difference is significant to avoid excessive updates\n        if (Math.abs(newTime - this.currentTime) > 0.5) {\n          this.player.currentTime(newTime);\n\n          // Update UI immediately for responsive feel\n          this.currentTime = newTime;\n          this.playedPercent = newTime / this.duration * 100;\n\n          // Show loading indicator while seeking\n          this.isLoading = true;\n        }\n      }\n      this.isSeeking = true;\n    },\n    handleProgressBarTouchEnd(event) {\n      this.isDragging = false;\n      const touchDuration = Date.now() - this.touchStartTime;\n\n      // Remove visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.remove('progress-bar-active');\n\n      // Resume video if it was playing before\n      if (this.wasPlayingBeforeSeek && this.player) {\n        this.player.play().catch(err => {\n          console.log('Failed to resume after seek:', err);\n        });\n        this.wasPlayingBeforeSeek = false;\n      }\n\n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        // Calculate position for tap\n        const progressBar = event.currentTarget;\n        const rect = progressBar.getBoundingClientRect();\n        const clickX = event.changedTouches[0].clientX - rect.left;\n        const progressBarWidth = rect.width;\n        const seekPercent = clickX / progressBarWidth;\n        const seekTime = seekPercent * this.duration;\n        if (this.player && typeof this.player.currentTime === 'function') {\n          this.player.currentTime(Math.max(0, Math.min(seekTime, this.duration)));\n        }\n\n        // Haptic feedback for tap\n        if (navigator.vibrate) {\n          navigator.vibrate(30);\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n\n      // Hide loading indicator after a short delay if video is ready\n      setTimeout(() => {\n        if (this.player && this.player.readyState() >= 2) {\n          this.isLoading = false;\n        }\n      }, 500);\n\n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    }\n  }\n};","map":{"version":3,"names":["videojs","name","props","src","type","String","required","poster","default","autoplay","Boolean","title","enableAutoRotate","emits","beforeRouteLeave","to","from","next","console","log","handleNavigationCleanup","data","player","isPlaying","currentTime","duration","buffered","isMuted","volume","isFullscreen","showControls","controlsTimeout","qualities","selectedQuality","bufferedPercent","playedPercent","isDragging","isMobile","isLandscape","touchStartTime","touchStartX","touchStartY","touchMoved","lastTapTime","controlsTimeoutDuration","seekThreshold","volumeThreshold","seekRate","isSeeking","hasAutoRotated","hasShownRotationHint","isLoading","loadingTimeout","userPaused","continuousPlayback","lastPlayTime","pauseRecoveryAttempts","wasPlayingBeforeSeek","showVolumeSlider","showQualityMenu","showProgressPreview","showProgressHandle","progressPreviewPosition","progressPreviewTime","showBackwardIcon","showForwardIcon","showVolumeGesture","showBrightnessGesture","brightness","supportsPiP","gestureStartX","gestureStartY","isGesturing","gestureType","lastMouseMove","keyboardShortcuts","computed","volumeIconState","mounted","initializePlayer","checkMobileDevice","checkOrientation","initializeMobileAudioContext","window","addEventListener","handleBackNavigation","handleOrientationChange","setupOrientationListener","checkPiPSupport","document","handleKeyDown","methods","test","navigator","userAgent","orientation","maxTouchPoints","handleMobileAutoplay","muted","handleMobileAudioInteraction","audioContext","AudioContext","webkitAudioContext","state","resume","error","handleMobileAudioCleanup","pause","close","handleFullscreenChange","on","handleFirstPlay","checkAndRotate","off","screen","includes","undefined","Math","abs","innerWidth","innerHeight","enterFullscreen","Promise","resolve","setTimeout","exitFullscreen","elem","$el","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","lock","e","err","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","tryUnlockOrientation","resetPageStyles","toggleFullscreen","$refs","videoElement","parentElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","tryLockOrientation","catch","lockOrientation","unlock","unlockOrientation","controls","preload","fluid","html5","hls","enableLowInitialPlaylist","smoothQualityChange","overrideNative","handlePartialData","maxBufferLength","maxMaxBufferLength","maxBufferSize","maxBufferHole","lowLatencyMode","backBufferLength","limitRenditionByPlayerDimensions","vhs","maxPlaylistRetries","bufferSize","allowSeeksWithinUnsafeLiveWindow","nativeTextTracks","nativeAudioTracks","nativeVideoTracks","techOrder","playbackRates","responsive","aspectRatio","liveui","inactivityTimeout","suppressNotSupportedError","playsinline","errorDisplay","play","clearTimeout","handleVideoError","onTimeUpdate","onProgress","ensureContinuousPlayback","tech","representations","length","map","q","height","handleVisibilityChange","handleNetworkRecovery","handlePageUnload","load","err2","handleUnexpectedPause","ended","hidden","showControlsTemporarily","hideControls","togglePlay","paused","end","onProgressChange","event","time","parseFloat","target","value","onVolumeChange","toggleMute","skipForward","skipBackward","formatTime","seconds","minutes","floor","remainingSeconds","toString","padStart","beforeDestroy","performFullCleanup","beforeUnmount","removeAllEventListeners","removeEventListener","onProgressBarClick","progressBar","currentTarget","clickX","clientX","getBoundingClientRect","left","progressBarWidth","offsetWidth","seekTime","onQualityChange","selectedHeight","parseInt","forEach","enabled","handleTouch","Date","now","touches","clientY","tapLength","preventDefault","handleTouchEnd","touchDuration","closest","toggleControlsVisibility","startHideTimer","handleVideoClick","handleTouchStart","timeSinceLastTap","handleTouchMove","touchX","touchY","deltaX","deltaY","rect","width","clampedX","max","min","seekPercent","newTime","handleBackClick","$emit","cleanupVideoPlayer","reset","dispose","restorePageScroll","body","style","overflow","position","touchAction","userSelect","webkitUserSelect","webkitTouchCallout","transform","transformStyle","backfaceVisibility","willChange","pointerEvents","webkitOverflowScrolling","documentElement","classList","remove","add","viewport","querySelector","setAttribute","scrollTo","pageYOffset","dispatchEvent","Event","offsetHeight","pictureInPictureEnabled","requestPictureInPicture","togglePictureInPicture","pictureInPictureElement","exitPictureInPicture","handleMouseMove","startAutoHideTimer","handleProgressHover","x","percentage","hideProgressPreview","handleSkipBackward","handleSkipForward","toggleQualityMenu","selectQuality","quality","tagName","code","adjustVolume","delta","newVolume","handleProgressTouchStart","handleProgressBarTouchStart","handleProgressTouchMove","handleProgressBarTouchMove","handleProgressTouchEnd","handleProgressBarTouchEnd","vibrate","changedTouches","readyState"],"sources":["D:\\OTT\\ott_frontend\\src\\components\\AdvancedVideoPlayer.vue"],"sourcesContent":["<template>\n  <div class=\"video-wrapper\" \n       @click=\"handleVideoClick\" \n       @touchstart=\"handleTouchStart\" \n       @touchmove=\"handleTouchMove\" \n       @touchend=\"handleTouchEnd\"\n       :class=\"{ 'mobile-view': isMobile }\">\n  <div class=\"video-container\">\n      <video ref=\"videoElement\" class=\"video-js vjs-big-play-centered vjs-theme-ott\" :poster=\"poster\" preload=\"auto\" playsinline webkit-playsinline crossorigin=\"anonymous\" data-setup='{}'>\n      <source :src=\"src\" type=\"application/x-mpegURL\" />\n        <p class=\"vjs-no-js\">To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video</p>\n    </video>\n\n      <!-- Loading Indicator -->\n      <div v-if=\"isLoading\" class=\"loading-overlay\">\n        <div class=\"loading-spinner\">\n          <svg class=\"spinner-svg\" viewBox=\"0 0 50 50\">\n            <circle class=\"spinner-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"4\"></circle>\n          </svg>\n          <span class=\"loading-text\">Loading...</span>\n        </div>\n      </div>\n\n      <!-- Netflix-style Controls Overlay -->\n      <div class=\"netflix-controls-overlay\" :class=\"{ 'controls-hidden': !showControls }\" @mousemove=\"handleMouseMove\">\n        <!-- Top Controls Bar -->\n        <div class=\"top-controls-bar\">\n          <div class=\"top-left-section\">\n            <button @click=\"handleBackClick\" class=\"netflix-back-btn\" aria-label=\"Go back\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"/>\n              </svg>\n            </button>\n            <h2 class=\"netflix-video-title\" v-if=\"title\">{{ title }}</h2>\n          </div>\n          <div class=\"top-right-section\">\n            <button v-if=\"supportsPiP\" @click=\"togglePictureInPicture\" class=\"netflix-control-btn\" aria-label=\"Picture in Picture\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <!-- Center Controls Zone -->\n        <div class=\"center-controls-zone\">\n          <!-- Skip Backward -->\n          <div class=\"seek-zone seek-backward\" @click=\"skipBackward\" @touchend=\"handleSkipBackward\">\n            <div class=\"seek-icon-container\" :class=\"{ 'animate-seek': showBackwardIcon }\">\n              <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M6 6h2v12H6zm3.5 6l8.5 6V6z\"/>\n              </svg>\n              <span class=\"seek-text\">10s</span>\n            </div>\n          </div>\n\n          <!-- Play/Pause Center -->\n          <div class=\"play-pause-zone\" @click=\"togglePlay\">\n            <div class=\"netflix-play-btn\" :class=\"{ 'playing': isPlaying }\">\n              <svg v-if=\"!isPlaying\" width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M8 5v14l11-7z\"/>\n              </svg>\n              <svg v-else width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\n              </svg>\n            </div>\n          </div>\n\n          <!-- Skip Forward -->\n          <div class=\"seek-zone seek-forward\" @click=\"skipForward\" @touchend=\"handleSkipForward\">\n            <div class=\"seek-icon-container\" :class=\"{ 'animate-seek': showForwardIcon }\">\n              <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z\"/>\n              </svg>\n              <span class=\"seek-text\">10s</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Gesture Feedback -->\n        <div v-if=\"showVolumeGesture\" class=\"gesture-feedback volume-gesture\">\n          <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n            <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\n          </svg>\n          <span>{{ Math.round(volume * 100) }}%</span>\n        </div>\n\n        <div v-if=\"showBrightnessGesture\" class=\"gesture-feedback brightness-gesture\">\n          <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n            <path d=\"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z\"/>\n          </svg>\n          <span>{{ Math.round(brightness * 100) }}%</span>\n        </div>\n\n        <!-- Mobile Rotation Hint -->\n        <div v-if=\"isMobile && !isLandscape && !hasShownRotationHint\" class=\"netflix-rotation-hint\">\n          <div class=\"rotation-icon\">\n            <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81.33-.32z\"/>\n            </svg>\n          </div>\n          <span>Rotate for better experience</span>\n        </div>\n\n        <!-- Bottom Controls Bar -->\n        <div class=\"bottom-controls-bar\">\n          <!-- Progress Bar -->\n          <div class=\"netflix-progress-container\" \n               @mousemove=\"handleProgressHover\" \n               @mouseleave=\"hideProgressPreview\">\n            <div class=\"netflix-progress-bar\" \n                 @click=\"onProgressBarClick\"\n                 @touchstart=\"handleProgressTouchStart\"\n                 @touchmove=\"handleProgressTouchMove\"\n                 @touchend=\"handleProgressTouchEnd\">\n              <div class=\"progress-buffer\" :style=\"{ width: bufferedPercent + '%' }\"></div>\n              <div class=\"progress-filled\" :style=\"{ width: playedPercent + '%' }\"></div>\n              <div class=\"progress-handle\" :style=\"{ left: playedPercent + '%' }\" v-show=\"showProgressHandle\"></div>\n            </div>\n            <!-- Progress Preview -->\n            <div v-if=\"showProgressPreview\" class=\"progress-preview\" :style=\"{ left: progressPreviewPosition + 'px' }\">\n              <span class=\"preview-time\">{{ formatTime(progressPreviewTime) }}</span>\n            </div>\n          </div>\n\n          <!-- Bottom Controls Row -->\n          <div class=\"bottom-controls-row\">\n            <div class=\"controls-left\">\n              <button @click=\"togglePlay\" class=\"netflix-control-btn play-toggle\" aria-label=\"Play/Pause\">\n                <svg v-if=\"!isPlaying\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M8 5v14l11-7z\"/>\n                </svg>\n                <svg v-else width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\n                </svg>\n              </button>\n\n              <button @click=\"skipBackward\" class=\"netflix-control-btn\" aria-label=\"Skip backward 10 seconds\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M6 6h2v12H6zm3.5 6l8.5 6V6z\"/>\n                </svg>\n              </button>\n\n              <button @click=\"skipForward\" class=\"netflix-control-btn\" aria-label=\"Skip forward 10 seconds\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z\"/>\n                </svg>\n              </button>\n\n              <div class=\"volume-control-group\" \n                   @mouseenter=\"showVolumeSlider = true\" \n                   @mouseleave=\"showVolumeSlider = false\">\n                <button @click=\"toggleMute\" class=\"netflix-control-btn volume-btn\" aria-label=\"Mute/Unmute\">\n                  <svg v-if=\"isMuted || volume === 0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/>\n                  </svg>\n                  <svg v-else-if=\"volume < 0.5\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>\n                  </svg>\n                  <svg v-else width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\n                  </svg>\n                </button>\n                <div class=\"volume-slider-popup\" :class=\"{ 'show': showVolumeSlider }\">\n                  <input type=\"range\" \n                         min=\"0\" \n                         max=\"1\" \n                         step=\"0.01\" \n                         :value=\"volume\" \n                         @input=\"onVolumeChange\" \n                         class=\"netflix-volume-slider\">\n                </div>\n              </div>\n\n              <div class=\"time-display-netflix\">\n                <span class=\"current-time\">{{ formatTime(currentTime) }}</span>\n                <span class=\"time-separator\">/</span>\n                <span class=\"total-time\">{{ formatTime(duration) }}</span>\n              </div>\n            </div>\n\n            <div class=\"controls-right\">\n              <div class=\"quality-control-group\" @click=\"toggleQualityMenu\">\n                <button class=\"netflix-control-btn quality-btn\" aria-label=\"Quality settings\">\n                  <span class=\"quality-text\">{{ selectedQuality }}</span>\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M7 10l5 5 5-5z\"/>\n                  </svg>\n                </button>\n                <div class=\"quality-menu\" :class=\"{ 'show': showQualityMenu }\">\n                  <div class=\"quality-title\">Quality</div>\n                  <div v-for=\"quality in qualities\" \n                       :key=\"quality\" \n                       @click=\"selectQuality(quality)\"\n                       class=\"quality-option\"\n                       :class=\"{ 'active': selectedQuality === quality }\">\n                    {{ quality }}\n                  </div>\n                </div>\n              </div>\n\n              <button v-if=\"!isMobile\" @click=\"toggleFullscreen\" class=\"netflix-control-btn fullscreen-btn\" aria-label=\"Fullscreen\">\n                <svg v-if=\"!isFullscreen\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/>\n                </svg>\n                <svg v-else width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\n\nexport default {\n  name: 'AdvancedVideoPlayer',\n\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    poster: {\n      type: String,\n      default: ''\n    },\n    autoplay: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    enableAutoRotate: {\n      type: Boolean,\n      default: true\n    },\n\n  },\n  emits: ['close'],\n  // Add navigation guard to detect route leaving\n  beforeRouteLeave(to, from, next) {\n    console.log('ðŸŽ¬ Route leaving detected, cleaning up video player');\n    this.handleNavigationCleanup();\n    next();\n  },\n  data() {\n    return {\n      player: null,\n      isPlaying: false,\n      currentTime: 0,\n      duration: 0,\n      buffered: 0,\n      isMuted: false,\n      volume: 1,\n      isFullscreen: false,\n      showControls: true,\n      controlsTimeout: null,\n      qualities: ['Auto', '1080p', '720p', '480p', '360p'],\n      selectedQuality: 'Auto',\n      bufferedPercent: 0,\n      playedPercent: 0,\n      isDragging: false,\n      isMobile: false,\n      isLandscape: false,\n      touchStartTime: 0,\n      touchStartX: 0,\n      touchStartY: 0,\n      touchMoved: false,\n      lastTapTime: 0,\n      controlsTimeoutDuration: 3500, // 3.5 seconds\n      seekThreshold: 50, // Minimum pixels to trigger seek\n      volumeThreshold: 30, // Minimum pixels to trigger volume change\n      seekRate: 10, // Seconds to seek per swipe,\n      isSeeking: false,\n      hasAutoRotated: false,\n      hasShownRotationHint: false,\n      isLoading: true,\n      loadingTimeout: null,\n      userPaused: false, // Track if the user initiated the pause\n      continuousPlayback: true, // Enable continuous playback mode\n      lastPlayTime: 0, // Track last play time for continuity\n      pauseRecoveryAttempts: 0, // Track recovery attempts\n      wasPlayingBeforeSeek: false, // Track if video was playing before seeking\n      \n      // Netflix-style controls data\n      showVolumeSlider: false,\n      showQualityMenu: false,\n      showProgressPreview: false,\n      showProgressHandle: false,\n      progressPreviewPosition: 0,\n      progressPreviewTime: 0,\n      showBackwardIcon: false,\n      showForwardIcon: false,\n      showVolumeGesture: false,\n      showBrightnessGesture: false,\n      brightness: 1,\n      supportsPiP: false,\n      gestureStartX: 0,\n      gestureStartY: 0,\n      isGesturing: false,\n      gestureType: '', // 'volume', 'brightness', 'seek'\n      lastMouseMove: 0,\n      keyboardShortcuts: true\n    }\n  },\n  computed: {\n    volumeIconState() {\n      if (this.isMuted || this.volume === 0) {\n        return 'muted';\n      } else if (this.volume < 0.5) {\n        return 'low';\n      } else {\n        return 'high';\n      }\n    }\n  },\n      mounted() {\n      console.log('ðŸŽ¬ AdvancedVideoPlayer mounted with props:', {\n        src: this.src,\n        title: this.title\n      })\n      this.initializePlayer();\n      this.checkMobileDevice();\n      this.checkOrientation();\n\n      // Initialize mobile audio context\n      this.initializeMobileAudioContext();\n\n      // Add window popstate event listener for handling browser back button\n      window.addEventListener('popstate', this.handleBackNavigation);\n\n      // Add orientation change listeners\n      if (this.isMobile) {\n        window.addEventListener('orientationchange', this.handleOrientationChange);\n        window.addEventListener('resize', this.checkOrientation);\n      }\n\n      // Setup orientation listener\n      this.setupOrientationListener();\n      \n      // Check Picture-in-Picture support\n      this.checkPiPSupport();\n      \n      // Add keyboard event listeners\n      if (this.keyboardShortcuts) {\n        document.addEventListener('keydown', this.handleKeyDown);\n      }\n    },\n  methods: {\n    checkMobileDevice() {\n      this.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) \n        && (typeof window.orientation !== 'undefined' || navigator.maxTouchPoints > 0);\n      \n      // Add mobile-specific autoplay handling\n      if (this.isMobile && this.autoplay) {\n        // For mobile, we need to handle autoplay differently\n        this.handleMobileAutoplay();\n      }\n    },\n\n    handleMobileAutoplay() {\n      // Mobile browsers require user interaction for autoplay\n      // We'll start muted and unmute after user interaction\n      if (this.player) {\n        this.player.muted(true);\n        this.player.volume(0.5); // Set volume but keep muted\n        console.log('ðŸŽ¬ Mobile autoplay: Video muted for user interaction');\n      }\n    },\n\n    // Handle mobile audio permissions and user interaction\n    handleMobileAudioInteraction() {\n      if (this.isMobile && this.player) {\n        try {\n          // Resume audio context if suspended\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n          \n          // Unmute video player\n          if (this.player.muted()) {\n            this.player.muted(false);\n            this.player.volume(0.5);\n            console.log('ðŸŽ¬ Mobile: Audio enabled after user interaction');\n          }\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio interaction error:', error);\n        }\n      }\n    },\n\n    // Mobile-specific audio cleanup\n    handleMobileAudioCleanup() {\n      if (this.isMobile && this.player) {\n        try {\n          // Force stop audio on mobile\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n          \n          // For iOS Safari, we need to be more aggressive\n          if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {\n            // Create a silent audio context to stop any background audio\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n            audioContext.close();\n          }\n          \n          console.log('ðŸŽ¬ Mobile audio cleanup completed');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio cleanup error:', error);\n        }\n      }\n    },\n\n    // Initialize mobile audio context for better audio support\n    initializeMobileAudioContext() {\n      if (this.isMobile) {\n        try {\n          // Create and resume audio context for mobile audio support\n          const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n          if (audioContext.state === 'suspended') {\n            audioContext.resume();\n          }\n          console.log('ðŸŽ¬ Mobile audio context initialized');\n        } catch (error) {\n          console.error('ðŸŽ¬ Mobile audio context error:', error);\n        }\n      }\n    },\n    \n    setupOrientationListener() {\n      if (this.isMobile && this.enableAutoRotate) {\n        window.addEventListener('orientationchange', this.handleOrientationChange);\n        document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n        document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n        \n        // Add play state listener\n        this.player.on('play', this.handleFirstPlay);\n      }\n    },\n\n    async handleFirstPlay() {\n      // Only handle first play\n      if (!this.hasAutoRotated && this.isMobile && this.enableAutoRotate) {\n        this.hasAutoRotated = true;\n        await this.checkAndRotate();\n      }\n      // Remove listener after first play\n      this.player.off('play', this.handleFirstPlay);\n    },\n\n    async checkAndRotate() {\n      // Multiple ways to detect landscape mode\n      let isLandscape = false;\n      \n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        isLandscape = window.innerWidth > window.innerHeight;\n      }\n\n      if (!isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      }\n    },\n\n    async handleOrientationChange() {\n      // Wait for orientation change to complete\n      await new Promise(resolve => setTimeout(resolve, 150));\n      \n      const isLandscape = window.orientation === 90 || window.orientation === -90;\n      \n      if (isLandscape && !this.isFullscreen) {\n        await this.enterFullscreen();\n      } else if (!isLandscape && this.isFullscreen) {\n        await this.exitFullscreen();\n      }\n    },\n\n    async enterFullscreen() {\n      if (!this.isFullscreen) {\n        try {\n          const elem = this.$el;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n\n          // Try to lock orientation to landscape\n          if (this.isMobile && window.screen?.orientation?.lock) {\n            try {\n              await window.screen.orientation.lock('landscape');\n            } catch (e) {\n              console.log('Orientation lock not supported');\n            }\n          }\n        } catch (err) {\n          console.error('Fullscreen error:', err);\n        }\n      }\n    },\n\n    async exitFullscreen() {\n      if (this.isFullscreen) {\n        try {\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n\n          // Force update fullscreen state\n          this.isFullscreen = false;\n\n          // Unlock orientation\n          if (this.isMobile) {\n            this.tryUnlockOrientation();\n          }\n          \n          // Reset page styles after exiting fullscreen\n          this.resetPageStyles();\n          \n        } catch (err) {\n          console.error('Exit fullscreen error:', err);\n          // Force reset even if exit fails\n          this.isFullscreen = false;\n          this.resetPageStyles();\n        }\n      }\n    },\n\n    async toggleFullscreen() {\n      try {\n        if (!this.isFullscreen) {\n          // Enter fullscreen\n          const elem = this.$refs.videoElement.parentElement;\n          if (elem.requestFullscreen) {\n            await elem.requestFullscreen();\n          } else if (elem.webkitRequestFullscreen) {\n            await elem.webkitRequestFullscreen();\n          } else if (elem.mozRequestFullScreen) {\n            await elem.mozRequestFullScreen();\n          } else if (elem.msRequestFullscreen) {\n            await elem.msRequestFullscreen();\n          }\n        } else {\n          // Exit fullscreen\n          if (document.exitFullscreen) {\n            await document.exitFullscreen();\n          } else if (document.webkitExitFullscreen) {\n            await document.webkitExitFullscreen();\n          } else if (document.mozCancelFullScreen) {\n            await document.mozCancelFullScreen();\n          } else if (document.msExitFullscreen) {\n            await document.msExitFullscreen();\n          }\n        }\n      } catch (error) {\n        console.error('Fullscreen toggle error:', error);\n      }\n    },\n\n    handleFullscreenChange() {\n      this.isFullscreen = !!(\n        document.fullscreenElement ||\n        document.webkitFullscreenElement ||\n        document.mozFullScreenElement ||\n        document.msFullscreenElement\n      );\n\n      // Try to lock orientation to landscape if entering fullscreen on mobile\n      if (this.isFullscreen && this.isMobile) {\n        this.tryLockOrientation();\n      } else if (!this.isFullscreen && this.isMobile) {\n        this.tryUnlockOrientation();\n      }\n    },\n\n    tryLockOrientation() {\n      if (!this.isMobile) return;\n\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.lock && typeof window.screen.orientation.lock === 'function') {\n          window.screen.orientation.lock('landscape')\n            .catch(err => {\n              console.log('Orientation lock not supported or permission denied:', err);\n            });\n        } else if (window.screen?.lockOrientation) {\n          // Fallback for older browsers\n          try {\n            window.screen.lockOrientation('landscape');\n          } catch (err) {\n            console.log('Legacy orientation lock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation lock not supported:', err);\n      }\n    },\n\n    tryUnlockOrientation() {\n      if (!this.isMobile) return;\n\n      try {\n        // Check if screen orientation API is supported\n        if (window.screen?.orientation?.unlock && typeof window.screen.orientation.unlock === 'function') {\n          // Use Promise.resolve().catch() to safely handle both Promise and non-Promise returns\n          Promise.resolve(window.screen.orientation.unlock())\n            .catch(err => {\n              console.log('Orientation unlock error:', err);\n            });\n        } else if (window.screen?.unlockOrientation && typeof window.screen.unlockOrientation === 'function') {\n          // Fallback for older browsers\n          try {\n            window.screen.unlockOrientation();\n          } catch (err) {\n            console.log('Legacy orientation unlock failed:', err);\n          }\n        }\n      } catch (err) {\n        console.log('Orientation unlock not supported:', err);\n      }\n    },\n\n    initializePlayer() {\n      const videoElement = this.$refs.videoElement;\n      \n      // Add fullscreen change event listeners\n      document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n      document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n      \n      this.player = videojs(videoElement, {\n        controls: false, // We'll use custom controls\n        autoplay: this.autoplay,\n        preload: 'auto',\n        fluid: true,\n        html5: {\n          hls: {\n            enableLowInitialPlaylist: true,\n            smoothQualityChange: true,\n            overrideNative: true,\n            handlePartialData: true,\n            // Add better buffering settings for continuous playback\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000, // 120MB for better buffering\n            maxBufferHole: 0.1, // Smaller buffer holes for smoother playback\n            lowLatencyMode: false,\n            backBufferLength: 60,\n            // Add continuous playback settings\n            limitRenditionByPlayerDimensions: false\n          },\n          vhs: {\n            limitRenditionByPlayerDimensions: false,\n            smoothQualityChange: true,\n            maxPlaylistRetries: 10, // More retries for better reliability\n            bufferSize: 60,\n            enableLowInitialPlaylist: true,\n            allowSeeksWithinUnsafeLiveWindow: true,\n            handlePartialData: true,\n            overrideNative: true,\n            // Add better buffering settings for continuous playback\n            maxBufferLength: 60,\n            maxMaxBufferLength: 120,\n            maxBufferSize: 120 * 1000 * 1000, // 120MB for better buffering\n            maxBufferHole: 0.1, // Smaller buffer holes for smoother playback\n            lowLatencyMode: false,\n            backBufferLength: 60\n          },\n          nativeTextTracks: false,\n          nativeAudioTracks: false,\n          nativeVideoTracks: false\n        },\n        // Add performance options for continuous playback\n        techOrder: ['html5'],\n        playbackRates: [0.5, 1, 1.5, 2],\n        responsive: true,\n        aspectRatio: '16:9',\n        // Add playback optimization for continuous streaming\n        liveui: true,\n        inactivityTimeout: 0,\n        suppressNotSupportedError: true,\n        // Add mobile-specific settings\n        playsinline: true,\n        'webkit-playsinline': true,\n        // Add better error recovery\n        errorDisplay: false,\n        // Add autoplay settings for mobile\n        muted: this.isMobile, // Start muted only on mobile to allow autoplay\n        volume: 0.5,\n        // Add continuous playback settings\n        poster: this.poster\n      });\n\n      // Add loading event listeners\n      this.player.on('loadstart', () => {\n        console.log('ðŸŽ¬ Video loadstart event fired')\n        this.isLoading = true;\n      });\n\n      this.player.on('loadeddata', () => {\n        console.log('ðŸŽ¬ Video loadeddata event fired')\n        this.isLoading = false;\n      });\n\n      this.player.on('waiting', () => {\n        console.log('ðŸŽ¬ Video waiting event fired')\n        // Show loading if waiting for more than 500ms\n        this.loadingTimeout = setTimeout(() => {\n          this.isLoading = true;\n        }, 500);\n        \n        // Ensure playback continues after buffering\n        if (this.continuousPlayback && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after buffering:', err);\n              });\n            }\n          }, 2000);\n        }\n      });\n\n      this.player.on('playing', () => {\n        console.log('ðŸŽ¬ Video playing event fired')\n        this.isLoading = false;\n        if (this.loadingTimeout) {\n          clearTimeout(this.loadingTimeout);\n        }\n        // Unmute after playback starts\n        if (this.player.muted()) {\n          this.player.muted(false);\n        }\n      });\n\n      this.player.on('error', (error) => {\n        console.log('ðŸŽ¬ Video error event fired:', error)\n        this.isLoading = false;\n        // Try to recover from error\n        this.handleVideoError(error);\n      });\n\n      // Add more event listeners for better control\n      this.player.on('canplay', () => {\n        console.log('ðŸŽ¬ Video canplay event fired')\n        this.isLoading = false;\n      });\n\n      this.player.on('canplaythrough', () => {\n        console.log('ðŸŽ¬ Video canplaythrough event fired')\n        this.isLoading = false;\n      });\n\n      this.player.on('stalled', () => {\n        console.log('ðŸŽ¬ Video stalled event fired')\n        // Only try to resume if we're supposed to be playing\n        if (this.isPlaying && !this.userPaused) {\n          setTimeout(() => {\n            if (this.player && this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Failed to resume after stall:', err);\n              });\n            }\n          }, 2000); // Longer delay for stall recovery\n        }\n      });\n\n      this.player.on('suspend', () => {\n        console.log('ðŸŽ¬ Video suspend event fired')\n      });\n\n      this.player.on('abort', () => {\n        console.log('ðŸŽ¬ Video abort event fired')\n      });\n\n      // Event listeners\n      this.player.on('timeupdate', this.onTimeUpdate);\n      this.player.on('progress', this.onProgress);\n      this.player.on('play', () => {\n        console.log('ðŸŽ¬ Video play event fired')\n        this.isPlaying = true;\n        this.pauseRecoveryAttempts = 0; // Reset recovery attempts on successful play\n        \n        // Hide loading indicator when video starts playing\n        this.isLoading = false;\n      });\n      this.player.on('pause', () => {\n        console.log('ðŸŽ¬ Video pause event fired')\n        this.isPlaying = false;\n        this.lastPlayTime = this.player.currentTime();\n        \n        // Only auto-resume if it's not user-initiated and continuous playback is enabled\n        if (!this.userPaused && this.continuousPlayback) {\n          this.ensureContinuousPlayback();\n        }\n      });\n      this.player.on('ended', () => {\n        console.log('ðŸŽ¬ Video ended event fired')\n        this.isPlaying = false;\n      });\n      this.player.on('loadedmetadata', () => {\n        this.duration = this.player.duration();\n        console.log('ðŸŽ¬ Video duration:', this.duration)\n        // Get available qualities\n        if (this.player.tech().hls) {\n          const qualities = this.player.tech().hls.representations();\n          if (qualities.length > 0) {\n            this.qualities = ['Auto', ...qualities.map(q => `${q.height}p`)];\n          }\n        }\n      });\n\n      // Add visibility change listener to handle tab switching\n      document.addEventListener('visibilitychange', this.handleVisibilityChange);\n      \n      // Add network recovery listener\n      window.addEventListener('online', this.handleNetworkRecovery);\n      \n      // Add page unload listener to stop audio\n      window.addEventListener('beforeunload', this.handlePageUnload);\n      window.addEventListener('pagehide', this.handlePageUnload);\n    },\n\n    handlePageUnload() {\n      // Stop all audio when page is unloading\n      if (this.player) {\n        this.player.pause();\n        this.player.muted(true);\n        this.player.volume(0);\n      }\n    },\n\n    handleVideoError(error) {\n      console.log('ðŸŽ¬ Handling video error:', error);\n      // Try to reload the video after a short delay\n      setTimeout(() => {\n        if (this.player) {\n          this.player.src(this.src);\n          this.player.load();\n          this.player.play().catch(err => {\n            console.log('Failed to play after error recovery:', err);\n            // Try one more time with a longer delay\n            setTimeout(() => {\n              if (this.player) {\n                this.player.play().catch(err2 => {\n                  console.log('Second attempt to play after error failed:', err2);\n                });\n              }\n            }, 3000);\n          });\n        }\n      }, 2000);\n    },\n\n    // Add network recovery method\n    handleNetworkRecovery() {\n      if (this.player && !this.isPlaying && !this.userPaused && this.continuousPlayback) {\n        console.log('ðŸŽ¬ Attempting network recovery');\n        this.player.play().catch(err => {\n          console.log('Network recovery failed:', err);\n        });\n      }\n    },\n\n    // Ensure continuous playback\n    ensureContinuousPlayback() {\n      if (this.continuousPlayback && this.player && !this.isPlaying && !this.userPaused) {\n        console.log('ðŸŽ¬ Ensuring continuous playback');\n        this.pauseRecoveryAttempts++;\n        \n        if (this.pauseRecoveryAttempts <= 3) { // Limit recovery attempts\n          setTimeout(() => {\n            if (this.player && !this.isPlaying && !this.userPaused) {\n              this.player.play().catch(err => {\n                console.log('Continuous playback recovery failed:', err);\n              });\n            }\n          }, 1500 * this.pauseRecoveryAttempts); // Exponential backoff\n        } else {\n          console.log('ðŸŽ¬ Max recovery attempts reached, resetting');\n          this.pauseRecoveryAttempts = 0;\n        }\n      }\n    },\n\n    handleUnexpectedPause() {\n      // Only auto-resume if it's not a user-initiated pause\n      if (!this.userPaused && this.player && !this.player.ended()) {\n        console.log('ðŸŽ¬ Auto-resuming video after unexpected pause');\n        // Use a longer delay to prevent rapid pause/resume cycles\n        setTimeout(() => {\n          if (this.player && !this.isPlaying && !this.userPaused) {\n            this.player.play().catch(err => {\n              console.log('Failed to auto-resume:', err);\n              // Try one more time with exponential backoff\n              setTimeout(() => {\n                if (this.player && !this.isPlaying && !this.userPaused) {\n                  this.player.play().catch(err2 => {\n                    console.log('Second auto-resume attempt failed:', err2);\n                  });\n                }\n              }, 1000);\n            });\n          }\n        }, 1000); // Increased delay to prevent flickering\n      }\n    },\n\n    handleVisibilityChange() {\n      if (document.hidden) {\n        // Page is hidden, stop video and audio completely\n        if (this.player) {\n          this.player.pause();\n          this.player.muted(true);\n          this.player.volume(0);\n        }\n      } else {\n        // Page is visible again, resume if it was playing\n        if (this.player && !this.isPlaying && !this.userPaused) {\n          this.player.muted(false);\n          this.player.volume(0.5);\n          this.player.play().catch(err => {\n            console.log('Failed to resume after visibility change:', err);\n          });\n        }\n      }\n    },\n\n    showControlsTemporarily() {\n      this.showControls = true;\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          // Only hide if we're not seeking or touching\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, 4000); // Increased to 4 seconds\n      }\n    },\n    \n    hideControls() {\n      if (this.isPlaying) {\n        this.showControls = false;\n      }\n    },\n\n    togglePlay() {\n      if (!this.player || typeof this.player.paused !== 'function') {\n        return;\n      }\n      if (this.isPlaying) {\n        this.userPaused = true;\n        this.pauseRecoveryAttempts = 0; // Reset recovery attempts on user pause\n        this.player.pause();\n      } else {\n        this.userPaused = false;\n        this.pauseRecoveryAttempts = 0; // Reset recovery attempts on user play\n        \n        // Handle mobile audio unmuting when play is pressed\n        this.handleMobileAudioInteraction();\n        \n        this.player.play();\n      }\n      this.showControls = true;\n      this.showControlsTemporarily();\n    },\n\n    onTimeUpdate() {\n      if (!this.player || typeof this.player.currentTime !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      this.currentTime = this.player.currentTime();\n      this.playedPercent = (this.currentTime / this.duration) * 100;\n    },\n\n    onProgress() {\n      if (!this.player || typeof this.player.buffered !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      if (this.player.buffered().length > 0) {\n        this.buffered = this.player.buffered().end(0);\n        this.bufferedPercent = (this.buffered / this.duration) * 100;\n      }\n    },\n\n    onProgressChange(event) {\n      if (!this.player || typeof this.player.currentTime !== 'function') {\n        return;\n      }\n      const time = parseFloat(event.target.value);\n      this.player.currentTime(time);\n      this.isSeeking = true;\n    },\n\n    onVolumeChange(event) {\n      if (!this.player || typeof this.player.volume !== 'function') {\n        return;\n      }\n      const volume = parseFloat(event.target.value);\n      this.volume = volume;\n      this.player.volume(volume);\n      this.isMuted = volume === 0;\n    },\n\n    toggleMute() {\n      this.isMuted = !this.isMuted;\n      this.player.muted(this.isMuted);\n    },\n\n    skipForward() {\n      if (!this.player || typeof this.player.currentTime !== 'function') {\n        return;\n      }\n      this.player.currentTime(this.currentTime + 10);\n    },\n\n    skipBackward() {\n      if (!this.player || typeof this.player.currentTime !== 'function') {\n        return;\n      }\n      this.player.currentTime(this.currentTime - 10);\n    },\n\n    formatTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = Math.floor(seconds % 60);\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    },\n\n    beforeDestroy() {\n      console.log('ðŸŽ¬ Component destroying, starting cleanup');\n      this.performFullCleanup();\n    },\n\n    // For Vue 3 compatibility\n    beforeUnmount() {\n      console.log('ðŸŽ¬ Component unmounting, starting cleanup');\n      this.performFullCleanup();\n    },\n\n    // Comprehensive cleanup for component destruction\n    async performFullCleanup() {\n      try {\n        // Perform navigation cleanup\n        await this.handleNavigationCleanup();\n        \n        // Clean up all event listeners\n        this.removeAllEventListeners();\n        \n        console.log('ðŸŽ¬ Component cleanup completed successfully');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error during component cleanup:', error);\n        // Still try to clean up what we can\n        this.removeAllEventListeners();\n        this.resetPageStyles();\n      }\n    },\n\n    // Remove all event listeners\n    removeAllEventListeners() {\n      try {\n        // Remove popstate listener\n        window.removeEventListener('popstate', this.handleBackNavigation);\n        \n        // Remove orientation and fullscreen listeners\n        if (this.isMobile && this.enableAutoRotate) {\n          window.removeEventListener('orientationchange', this.handleOrientationChange);\n          window.removeEventListener('resize', this.checkOrientation);\n          document.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange);\n          document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange);\n        }\n        \n        // Remove visibility change listener\n        document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n        \n        // Remove network recovery listener\n        window.removeEventListener('online', this.handleNetworkRecovery);\n        \n        // Remove page unload listeners\n        window.removeEventListener('beforeunload', this.handlePageUnload);\n        window.removeEventListener('pagehide', this.handlePageUnload);\n        \n        // Remove keyboard event listener\n        if (this.keyboardShortcuts) {\n          document.removeEventListener('keydown', this.handleKeyDown);\n        }\n        \n        console.log('ðŸŽ¬ All event listeners removed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error removing event listeners:', error);\n      }\n    },\n\n    onProgressBarClick(event) {\n      if (!this.player || typeof this.player.currentTime !== 'function' || typeof this.player.duration !== 'function') {\n        return;\n      }\n      if (!this.isDragging) {\n        const progressBar = event.currentTarget;\n        const clickX = event.clientX - progressBar.getBoundingClientRect().left;\n        const progressBarWidth = progressBar.offsetWidth;\n        const seekTime = (clickX / progressBarWidth) * this.duration;\n        this.player.currentTime(seekTime);\n      }\n    },\n\n    onQualityChange() {\n      if (!this.player || !this.player.tech().hls) return;\n      \n      const qualities = this.player.tech().hls.representations();\n      const selectedHeight = parseInt(this.selectedQuality);\n      \n      if (this.selectedQuality === 'Auto') {\n        // Enable auto quality selection\n        qualities.forEach(q => q.enabled(true));\n      } else {\n        // Enable only selected quality\n        qualities.forEach(q => {\n          q.enabled(q.height === selectedHeight);\n        });\n      }\n    },\n\n    handleTouch(event) {\n      // Store touch start time and position\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n\n      // Show controls on touch\n      this.showControls = true;\n      \n      // Clear any existing timeout\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      // Handle double tap\n      const currentTime = Date.now();\n      const tapLength = currentTime - this.lastTapTime;\n      \n      if (tapLength < 300 && tapLength > 0) {\n        // Double tap detected\n        this.togglePlay();\n        event.preventDefault();\n      }\n      \n      this.lastTapTime = currentTime;\n    },\n\n    handleTouchEnd(event) {\n      const touchDuration = Date.now() - this.touchStartTime;\n      \n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.toggleControlsVisibility();\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n      \n      // Start hide timer for controls\n      if (this.isPlaying) {\n        this.startHideTimer();\n      }\n\n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    },\n\n    toggleControlsVisibility() {\n      this.showControls = !this.showControls;\n      if (this.showControls) {\n        this.startHideTimer();\n      }\n    },\n\n    handleVideoClick(event) {\n      // Prevent click if we were seeking\n      if (this.isSeeking) {\n        this.isSeeking = false;\n        return;\n      }\n\n      // If clicked on controls, don't toggle\n      if (event.target.closest('.custom-controls-overlay')) {\n        return;\n      }\n\n      // Handle mobile autoplay - unmute on first interaction\n      this.handleMobileAudioInteraction();\n\n      this.toggleControlsVisibility();\n    },\n\n    handleTouchStart(event) {\n      // Store initial touch data\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n\n      // Show controls immediately on touch\n      this.showControls = true;\n      \n      // Handle mobile audio unmuting on first touch\n      this.handleMobileAudioInteraction();\n      \n      // Handle double tap\n      const timeSinceLastTap = this.touchStartTime - this.lastTapTime;\n      if (timeSinceLastTap < 300 && timeSinceLastTap > 0) {\n        // Double tap detected\n        if (!event.target.closest('.custom-controls-overlay')) {\n          this.togglePlay();\n          event.preventDefault();\n        }\n      }\n      this.lastTapTime = this.touchStartTime;\n    },\n\n    handleTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n\n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n      \n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = (clampedX / progressBarWidth);\n      const seekTime = seekPercent * this.duration;\n      \n      // Update video time with throttling for smooth performance\n      if (this.player && typeof this.player.currentTime === 'function') {\n        const newTime = Math.max(0, Math.min(seekTime, this.duration));\n        \n        // Only update if the time difference is significant to avoid excessive updates\n        if (Math.abs(newTime - this.currentTime) > 0.5) {\n          this.player.currentTime(newTime);\n          \n          // Update UI immediately for responsive feel\n          this.currentTime = newTime;\n          this.playedPercent = (newTime / this.duration) * 100;\n          \n          // Show loading indicator while seeking\n          this.isLoading = true;\n        }\n      }\n      \n      this.isSeeking = true;\n    },\n\n    startHideTimer() {\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          if (!this.isDragging && !this.isSeeking) {\n            this.showControls = false;\n          }\n        }, this.controlsTimeoutDuration);\n      }\n    },\n\n    async handleBackClick() {\n      console.log('ðŸŽ¬ Back button clicked');\n      \n      // Use comprehensive navigation cleanup\n      await this.handleNavigationCleanup();\n      \n      // Emit close event to parent\n      this.$emit('close');\n    },\n\n    // Comprehensive video player cleanup\n    cleanupVideoPlayer() {\n      console.log('ðŸŽ¬ Starting video player cleanup');\n      \n      if (this.player) {\n        try {\n          // Stop all playback immediately\n          this.player.pause();\n          \n          // Mute to stop audio immediately\n          this.player.muted(true);\n          \n          // Set volume to 0\n          this.player.volume(0);\n          \n          // Mobile-specific audio cleanup\n          this.handleMobileAudioCleanup();\n          \n          // Remove all event listeners to prevent memory leaks\n          this.player.off('timeupdate');\n          this.player.off('progress');\n          this.player.off('play');\n          this.player.off('pause');\n          this.player.off('ended');\n          this.player.off('loadedmetadata');\n          this.player.off('loadstart');\n          this.player.off('loadeddata');\n          this.player.off('waiting');\n          this.player.off('playing');\n          this.player.off('error');\n          this.player.off('canplay');\n          this.player.off('canplaythrough');\n          this.player.off('stalled');\n          this.player.off('suspend');\n          this.player.off('abort');\n          \n          // Remove all sources\n          this.player.src('');\n          \n          // Reset player state\n          this.player.reset();\n          \n          // Dispose the player completely\n          this.player.dispose();\n          \n          // Clear the player reference\n          this.player = null;\n          \n          console.log('ðŸŽ¬ Video player disposed successfully');\n        } catch (error) {\n          console.error('ðŸŽ¬ Error disposing video player:', error);\n          // Force clear player reference even if disposal fails\n          this.player = null;\n        }\n      }\n      \n      // Clear all timeouts\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n        this.controlsTimeout = null;\n      }\n      \n      if (this.loadingTimeout) {\n        clearTimeout(this.loadingTimeout);\n        this.loadingTimeout = null;\n      }\n      \n      // Reset component state\n      this.isPlaying = false;\n      this.currentTime = 0;\n      this.duration = 0;\n      this.isLoading = false;\n      this.isFullscreen = false;\n      this.showControls = true;\n      this.isDragging = false;\n      this.isSeeking = false;\n      this.userPaused = false;\n      this.pauseRecoveryAttempts = 0;\n      \n      console.log('ðŸŽ¬ Video player cleanup completed');\n    },\n\n    handleBackNavigation() {\n      console.log('ðŸŽ¬ Back navigation detected');\n      // Handle browser/mobile back button\n      this.handleNavigationCleanup();\n    },\n\n    // Comprehensive cleanup for navigation (mobile back button, browser back, route change)\n    async handleNavigationCleanup() {\n      console.log('ðŸŽ¬ Starting navigation cleanup');\n      \n      try {\n        // Exit fullscreen if active\n        if (this.isFullscreen) {\n          await this.exitFullscreen();\n        }\n        \n        // Clean up video player completely\n        this.cleanupVideoPlayer();\n        \n        // Reset body and document styles that might block scrolling\n        this.resetPageStyles();\n        \n        // Force scroll restoration\n        this.restorePageScroll();\n        \n        console.log('ðŸŽ¬ Navigation cleanup completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Navigation cleanup error:', error);\n        // Still try to reset page styles even if other cleanup fails\n        this.resetPageStyles();\n        this.restorePageScroll();\n      }\n    },\n\n    // Reset all body/document styles that might interfere with page scrolling\n    resetPageStyles() {\n      try {\n        // Reset body styles\n        document.body.style.overflow = '';\n        document.body.style.position = '';\n        document.body.style.width = '';\n        document.body.style.height = '';\n        document.body.style.touchAction = '';\n        document.body.style.userSelect = '';\n        document.body.style.webkitUserSelect = '';\n        document.body.style.webkitTouchCallout = '';\n        document.body.style.transform = '';\n        document.body.style.transformStyle = '';\n        document.body.style.backfaceVisibility = '';\n        document.body.style.willChange = '';\n        document.body.style.pointerEvents = '';\n        document.body.style.webkitOverflowScrolling = '';\n        \n        // Reset html styles  \n        document.documentElement.style.overflow = '';\n        document.documentElement.style.position = '';\n        document.documentElement.style.width = '';\n        document.documentElement.style.height = '';\n        document.documentElement.style.touchAction = '';\n        document.documentElement.style.transform = '';\n        document.documentElement.style.transformStyle = '';\n        document.documentElement.style.backfaceVisibility = '';\n        document.documentElement.style.willChange = '';\n        document.documentElement.style.pointerEvents = '';\n        \n        // Remove any fullscreen classes\n        document.body.classList.remove('vjs-fullscreen');\n        document.documentElement.classList.remove('vjs-fullscreen');\n        \n        // Add scroll restoration classes\n        document.body.classList.add('scroll-restored', 'force-scrollable', 'video-cleanup-reset');\n        document.documentElement.classList.add('scroll-restored', 'video-cleanup-reset');\n        \n        // Remove the classes after a short delay to let styles take effect\n        setTimeout(() => {\n          document.body.classList.remove('scroll-restored', 'force-scrollable', 'video-cleanup-reset');\n          document.documentElement.classList.remove('scroll-restored', 'video-cleanup-reset');\n        }, 100);\n        \n        // Reset viewport meta tag if it was modified\n        const viewport = document.querySelector('meta[name=\"viewport\"]');\n        if (viewport) {\n          viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, user-scalable=yes');\n        }\n        \n        console.log('ðŸŽ¬ Page styles reset completed');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error resetting page styles:', error);\n      }\n    },\n\n    // Force restore page scrolling capability\n    restorePageScroll() {\n      try {\n        // Force scroll to ensure page is scrollable\n        window.scrollTo(0, window.pageYOffset || 0);\n        \n        // Trigger resize event to recalculate page layout\n        window.dispatchEvent(new Event('resize'));\n        \n        // Force reflow\n        document.body.offsetHeight;\n        \n        // Enable touch events\n        document.body.style.pointerEvents = '';\n        document.documentElement.style.pointerEvents = '';\n        \n        console.log('ðŸŽ¬ Page scroll restored');\n      } catch (error) {\n        console.error('ðŸŽ¬ Error restoring page scroll:', error);\n      }\n    },\n\n    // ============ NETFLIX-STYLE CONTROLS METHODS ============\n\n    // Check Picture-in-Picture support\n    checkPiPSupport() {\n      this.supportsPiP = document.pictureInPictureEnabled && \n                        typeof this.$refs.videoElement?.requestPictureInPicture === 'function';\n    },\n\n    // Toggle Picture-in-Picture\n    async togglePictureInPicture() {\n      if (!this.supportsPiP || !this.$refs.videoElement) return;\n\n      try {\n        if (document.pictureInPictureElement) {\n          await document.exitPictureInPicture();\n        } else {\n          await this.$refs.videoElement.requestPictureInPicture();\n        }\n      } catch (error) {\n        console.error('Picture-in-Picture error:', error);\n      }\n    },\n\n    // Handle mouse movement for auto-hide controls\n    handleMouseMove() {\n      this.lastMouseMove = Date.now();\n      this.showControls = true;\n      this.showProgressHandle = true;\n      this.startAutoHideTimer();\n    },\n\n    // Start auto-hide timer for controls\n    startAutoHideTimer() {\n      if (this.controlsTimeout) {\n        clearTimeout(this.controlsTimeout);\n      }\n      \n      if (this.isPlaying) {\n        this.controlsTimeout = setTimeout(() => {\n          if (Date.now() - this.lastMouseMove > 3000 && this.isPlaying) {\n            this.showControls = false;\n            this.showProgressHandle = false;\n          }\n        }, 3000);\n      }\n    },\n\n    // Handle progress bar hover for preview\n    handleProgressHover(event) {\n      if (!this.duration || this.isMobile) return;\n      \n      const rect = event.currentTarget.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const percentage = (x / rect.width);\n      const time = percentage * this.duration;\n      \n      this.progressPreviewPosition = x;\n      this.progressPreviewTime = time;\n      this.showProgressPreview = true;\n    },\n\n    // Hide progress preview\n    hideProgressPreview() {\n      this.showProgressPreview = false;\n    },\n\n    // Handle skip backward with animation\n    handleSkipBackward() {\n      this.skipBackward();\n      this.showBackwardIcon = true;\n      setTimeout(() => {\n        this.showBackwardIcon = false;\n      }, 600);\n    },\n\n    // Handle skip forward with animation\n    handleSkipForward() {\n      this.skipForward();\n      this.showForwardIcon = true;\n      setTimeout(() => {\n        this.showForwardIcon = false;\n      }, 600);\n    },\n\n    // Toggle quality menu\n    toggleQualityMenu() {\n      this.showQualityMenu = !this.showQualityMenu;\n      this.showVolumeSlider = false;\n    },\n\n    // Select quality\n    selectQuality(quality) {\n      this.selectedQuality = quality;\n      this.showQualityMenu = false;\n      this.onQualityChange();\n    },\n\n    // Handle keyboard shortcuts\n    handleKeyDown(event) {\n      if (!this.keyboardShortcuts) return;\n      \n      // Don't handle if user is typing in an input\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {\n        return;\n      }\n      \n      switch (event.code) {\n        case 'Space':\n          event.preventDefault();\n          this.togglePlay();\n          break;\n        case 'ArrowLeft':\n          event.preventDefault();\n          this.skipBackward();\n          break;\n        case 'ArrowRight':\n          event.preventDefault();\n          this.skipForward();\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          this.adjustVolume(0.1);\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          this.adjustVolume(-0.1);\n          break;\n        case 'KeyM':\n          event.preventDefault();\n          this.toggleMute();\n          break;\n        case 'KeyF':\n          event.preventDefault();\n          this.toggleFullscreen();\n          break;\n        case 'Escape':\n          if (this.isFullscreen) {\n            event.preventDefault();\n            this.exitFullscreen();\n          }\n          break;\n      }\n    },\n\n    // Adjust volume with keyboard\n    adjustVolume(delta) {\n      const newVolume = Math.max(0, Math.min(1, this.volume + delta));\n      this.volume = newVolume;\n      this.player.volume(newVolume);\n      this.isMuted = newVolume === 0;\n      \n      // Show volume gesture feedback\n      this.showVolumeGesture = true;\n      setTimeout(() => {\n        this.showVolumeGesture = false;\n      }, 1000);\n    },\n\n    // Enhanced touch handling for gestures\n    handleProgressTouchStart(event) {\n      this.handleProgressBarTouchStart(event);\n      this.gestureStartX = event.touches[0].clientX;\n      this.gestureStartY = event.touches[0].clientY;\n    },\n\n    handleProgressTouchMove(event) {\n      this.handleProgressBarTouchMove(event);\n    },\n\n    handleProgressTouchEnd(event) {\n      this.handleProgressBarTouchEnd(event);\n    },\n\n    checkOrientation() {\n      // Multiple ways to detect landscape mode\n      if (window.screen?.orientation?.type) {\n        // Modern browsers\n        this.isLandscape = window.screen.orientation.type.includes('landscape');\n      } else if (window.orientation !== undefined) {\n        // Fallback for older devices\n        this.isLandscape = Math.abs(window.orientation) === 90;\n      } else {\n        // Last resort - check window dimensions\n        this.isLandscape = window.innerWidth > window.innerHeight;\n      }\n    },\n\n    handleProgressBarTouchStart(event) {\n      event.preventDefault();\n      this.isDragging = true;\n      this.touchStartTime = Date.now();\n      this.touchStartX = event.touches[0].clientX;\n      this.touchStartY = event.touches[0].clientY;\n      this.touchMoved = false;\n      \n      // Show controls when user starts dragging\n      this.showControls = true;\n      this.showControlsTemporarily();\n      \n      // Add visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.add('progress-bar-active');\n      \n      // Haptic feedback for mobile devices\n      if (navigator.vibrate) {\n        navigator.vibrate(50);\n      }\n      \n      // Pause video while seeking for better performance\n      if (this.player && this.isPlaying) {\n        this.player.pause();\n        this.wasPlayingBeforeSeek = true;\n      }\n      \n      // Show loading indicator when seeking starts\n      this.isLoading = true;\n    },\n\n    handleProgressBarTouchMove(event) {\n      if (!this.touchStartX || !this.touchStartY || !this.isDragging) return;\n      \n      event.preventDefault();\n      const touchX = event.touches[0].clientX;\n      const touchY = event.touches[0].clientY;\n      const deltaX = touchX - this.touchStartX;\n      const deltaY = touchY - this.touchStartY;\n\n      // If movement is significant, mark as moved\n      if (Math.abs(deltaX) > 3 || Math.abs(deltaY) > 3) {\n        this.touchMoved = true;\n      }\n\n      // Calculate new position based on touch with better precision\n      const progressBar = event.currentTarget;\n      const rect = progressBar.getBoundingClientRect();\n      const clickX = touchX - rect.left;\n      const progressBarWidth = rect.width;\n      \n      // Ensure we don't go outside the progress bar bounds\n      const clampedX = Math.max(0, Math.min(clickX, progressBarWidth));\n      const seekPercent = (clampedX / progressBarWidth);\n      const seekTime = seekPercent * this.duration;\n      \n      // Update video time with throttling for smooth performance\n      if (this.player && typeof this.player.currentTime === 'function') {\n        const newTime = Math.max(0, Math.min(seekTime, this.duration));\n        \n        // Only update if the time difference is significant to avoid excessive updates\n        if (Math.abs(newTime - this.currentTime) > 0.5) {\n          this.player.currentTime(newTime);\n          \n          // Update UI immediately for responsive feel\n          this.currentTime = newTime;\n          this.playedPercent = (newTime / this.duration) * 100;\n          \n          // Show loading indicator while seeking\n          this.isLoading = true;\n        }\n      }\n      \n      this.isSeeking = true;\n    },\n\n    handleProgressBarTouchEnd(event) {\n      this.isDragging = false;\n      const touchDuration = Date.now() - this.touchStartTime;\n      \n      // Remove visual feedback\n      const progressBar = event.currentTarget;\n      progressBar.classList.remove('progress-bar-active');\n      \n      // Resume video if it was playing before\n      if (this.wasPlayingBeforeSeek && this.player) {\n        this.player.play().catch(err => {\n          console.log('Failed to resume after seek:', err);\n        });\n        this.wasPlayingBeforeSeek = false;\n      }\n      \n      // Handle tap (quick touch without much movement)\n      if (!this.touchMoved && touchDuration < 200) {\n        // Calculate position for tap\n        const progressBar = event.currentTarget;\n        const rect = progressBar.getBoundingClientRect();\n        const clickX = event.changedTouches[0].clientX - rect.left;\n        const progressBarWidth = rect.width;\n        const seekPercent = (clickX / progressBarWidth);\n        const seekTime = seekPercent * this.duration;\n        \n        if (this.player && typeof this.player.currentTime === 'function') {\n          this.player.currentTime(Math.max(0, Math.min(seekTime, this.duration)));\n        }\n        \n        // Haptic feedback for tap\n        if (navigator.vibrate) {\n          navigator.vibrate(30);\n        }\n      }\n\n      // Reset touch tracking\n      this.touchStartX = null;\n      this.touchStartY = null;\n      this.touchMoved = false;\n      \n      // Hide loading indicator after a short delay if video is ready\n      setTimeout(() => {\n        if (this.player && this.player.readyState() >= 2) {\n          this.isLoading = false;\n        }\n      }, 500);\n      \n      // Reset seeking state after a delay\n      setTimeout(() => {\n        this.isSeeking = false;\n      }, 200);\n    },\n\n\n\n  }\n}\n</script>\n\n<style>\n.video-wrapper {\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  background: #000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  /* Add transform-style for better 3D rendering */\n  transform-style: preserve-3d;\n  /* Add will-change to optimize performance */\n  will-change: transform;\n  /* Force hardware acceleration */\n  -webkit-transform: translateZ(0);\n  -moz-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  -o-transform: translateZ(0);\n  transform: translateZ(0);\n  /* Prevent subpixel rendering */\n  backface-visibility: hidden;\n}\n\n.video-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* Add transform-style for better 3D rendering */\n  transform-style: preserve-3d;\n  /* Force GPU acceleration */\n  -webkit-transform: translateZ(0);\n  -moz-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  -o-transform: translateZ(0);\n  transform: translateZ(0);\n}\n\n.video-js {\n  width: 100% !important;\n  height: 100% !important;\n  position: absolute;\n  top: 0;\n  left: 0;\n  /* Change object-fit to contain for better scaling */\n  object-fit: contain !important;\n  /* Add transform properties for stability */\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  /* Prevent flickering */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.video-js video {\n  /* Change object-fit to contain for better scaling */\n  object-fit: contain !important;\n  width: 100%;\n  height: 100%;\n  /* Add transform properties for stability */\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  /* Force pixel alignment */\n  transform-style: preserve-3d;\n  /* Prevent flickering */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* Add specific styles for 4K displays */\n@media screen and (min-width: 3840px) {\n  .video-js,\n  .video-js video {\n    /* Ensure smooth scaling on 4K */\n    image-rendering: -webkit-optimize-contrast;\n    image-rendering: crisp-edges;\n  }\n}\n\n/* Ensure fullscreen mode works properly */\n.video-js.vjs-fullscreen {\n  width: 100vw !important;\n  height: 100vh !important;\n}\n\n.video-js.vjs-fullscreen video {\n  object-fit: contain;\n}\n\n/* ============ NETFLIX-STYLE CONTROLS ============ */\n\n.netflix-controls-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 0.7) 0%,\n    transparent 25%,\n    transparent 75%,\n    rgba(0, 0, 0, 0.7) 100%\n  );\n  opacity: 1;\n  transition: opacity 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  z-index: 9999;\n  pointer-events: auto;\n  font-family: 'Netflix Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.netflix-controls-overlay.controls-hidden {\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n/* Top Controls Bar */\n.top-controls-bar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, transparent 100%);\n}\n\n.top-left-section {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.top-right-section {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.netflix-back-btn {\n  background: rgba(42, 42, 42, 0.6);\n  border: none;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.netflix-back-btn:hover {\n  background: rgba(42, 42, 42, 0.8);\n  transform: scale(1.05);\n}\n\n.netflix-back-btn svg {\n  color: white;\n  filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.5));\n}\n\n.netflix-video-title {\n  color: white;\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);\n  letter-spacing: -0.5px;\n}\n\n/* Center Controls Zone */\n.center-controls-zone {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n  position: relative;\n  padding: 0 80px;\n}\n\n.seek-zone {\n  flex: 1;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  position: relative;\n}\n\n.seek-backward {\n  justify-content: flex-end;\n  padding-right: 40px;\n}\n\n.seek-forward {\n  justify-content: flex-start;\n  padding-left: 40px;\n}\n\n.play-pause-zone {\n  flex: 0 0 120px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.seek-icon-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  opacity: 0;\n  transform: scale(0.8);\n  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n  background: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  padding: 12px;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.seek-icon-container.animate-seek {\n  opacity: 1;\n  transform: scale(1);\n  animation: seekPulse 0.6s ease-out;\n}\n\n.seek-icon-container svg {\n  color: white;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.8));\n  margin-bottom: 4px;\n}\n\n.seek-text {\n  color: white;\n  font-size: 12px;\n  font-weight: 600;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n}\n\n.netflix-play-btn {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 50%;\n  width: 72px;\n  height: 72px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.netflix-play-btn:hover {\n  background: white;\n  transform: scale(1.1);\n  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);\n}\n\n.netflix-play-btn svg {\n  color: #000;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));\n}\n\n.netflix-play-btn.playing svg {\n  transform: scale(0.9);\n}\n\n/* Gesture Feedback */\n.gesture-feedback {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.8);\n  border-radius: 12px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  color: white;\n  font-weight: 600;\n  font-size: 16px;\n  animation: gestureShow 1s ease-out;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.gesture-feedback svg {\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));\n}\n\n/* Mobile Rotation Hint */\n.netflix-rotation-hint {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.9);\n  border-radius: 12px;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n  color: white;\n  animation: rotationHint 4s ease-out forwards;\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.rotation-icon svg {\n  color: white;\n  animation: rotateIcon 2s infinite;\n}\n\n/* Bottom Controls Bar */\n.bottom-controls-bar {\n  background: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 0%, transparent 100%);\n  padding: 0 24px 20px;\n}\n\n.netflix-progress-container {\n  position: relative;\n  margin-bottom: 16px;\n  padding: 8px 0;\n}\n\n.netflix-progress-bar {\n  height: 4px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 2px;\n  position: relative;\n  cursor: pointer;\n  transition: height 0.2s ease;\n}\n\n.netflix-progress-bar:hover {\n  height: 6px;\n}\n\n.progress-buffer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.4);\n  border-radius: 2px;\n  transition: all 0.2s ease;\n}\n\n.progress-filled {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background: #e50914;\n  border-radius: 2px;\n  transition: all 0.2s ease;\n  box-shadow: 0 0 10px rgba(229, 9, 20, 0.5);\n}\n\n.progress-handle {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 12px;\n  height: 12px;\n  background: #e50914;\n  border-radius: 50%;\n  opacity: 0;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(229, 9, 20, 0.6);\n}\n\n.netflix-progress-bar:hover .progress-handle {\n  opacity: 1;\n}\n\n.progress-preview {\n  position: absolute;\n  bottom: 100%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 6px 10px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  margin-bottom: 8px;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.progress-preview::after {\n  content: '';\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  border: 4px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.9);\n}\n\n/* Bottom Controls Row */\n.bottom-controls-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.controls-left,\n.controls-right {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.netflix-control-btn {\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.netflix-control-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: scale(1.1);\n}\n\n.netflix-control-btn svg {\n  filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.8));\n}\n\n/* Volume Control */\n.volume-control-group {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.volume-slider-popup {\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(42, 42, 42, 0.95);\n  padding: 12px 8px;\n  border-radius: 8px;\n  margin-bottom: 8px;\n  opacity: 0;\n  pointer-events: none;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.volume-slider-popup.show {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.netflix-volume-slider {\n  width: 80px;\n  height: 4px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 2px;\n  outline: none;\n  cursor: pointer;\n  -webkit-appearance: none;\n  appearance: none;\n}\n\n.netflix-volume-slider::-webkit-slider-thumb {\n  width: 12px;\n  height: 12px;\n  background: #e50914;\n  border-radius: 50%;\n  cursor: pointer;\n  -webkit-appearance: none;\n  appearance: none;\n  box-shadow: 0 2px 6px rgba(229, 9, 20, 0.6);\n}\n\n.netflix-volume-slider::-moz-range-thumb {\n  width: 12px;\n  height: 12px;\n  background: #e50914;\n  border-radius: 50%;\n  cursor: pointer;\n  border: none;\n  box-shadow: 0 2px 6px rgba(229, 9, 20, 0.6);\n}\n\n/* Time Display */\n.time-display-netflix {\n  color: white;\n  font-size: 14px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n}\n\n.time-separator {\n  opacity: 0.7;\n}\n\n/* Quality Control */\n.quality-control-group {\n  position: relative;\n}\n\n.quality-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px !important;\n  background: rgba(42, 42, 42, 0.8) !important;\n  border-radius: 6px !important;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n}\n\n.quality-btn:hover {\n  background: rgba(42, 42, 42, 0.9) !important;\n}\n\n.quality-text {\n  font-size: 13px;\n  font-weight: 600;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n}\n\n.quality-menu {\n  position: absolute;\n  bottom: 100%;\n  right: 0;\n  background: rgba(42, 42, 42, 0.95);\n  border-radius: 8px;\n  padding: 8px 0;\n  margin-bottom: 8px;\n  min-width: 120px;\n  opacity: 0;\n  pointer-events: none;\n  transform: translateY(10px);\n  transition: all 0.2s ease;\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n}\n\n.quality-menu.show {\n  opacity: 1;\n  pointer-events: auto;\n  transform: translateY(0);\n}\n\n.quality-title {\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 8px 16px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  margin-bottom: 4px;\n}\n\n.quality-option {\n  color: white;\n  font-size: 13px;\n  padding: 8px 16px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.quality-option:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.quality-option.active {\n  background: rgba(229, 9, 20, 0.2);\n  color: #e50914;\n  font-weight: 600;\n}\n\n.quality-option.active::after {\n  content: 'âœ“';\n  font-weight: bold;\n}\n\n/* Animations */\n@keyframes seekPulse {\n  0% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  20% {\n    opacity: 1;\n    transform: scale(1.1);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes gestureShow {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.8);\n  }\n  20% {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1.05);\n  }\n  100% {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n\n@keyframes rotationHint {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.9);\n  }\n  10% {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n  90% {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.9);\n  }\n}\n\n@keyframes rotateIcon {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(90deg);\n  }\n}\n\n/* Mobile Optimizations */\n@media (max-width: 768px) {\n  .netflix-controls-overlay {\n    font-size: 14px;\n  }\n\n  .top-controls-bar {\n    padding: 16px 20px;\n  }\n\n  .netflix-back-btn {\n    width: 36px;\n    height: 36px;\n  }\n\n  .netflix-video-title {\n    font-size: 18px;\n  }\n\n  .center-controls-zone {\n    padding: 0 40px;\n  }\n\n  .netflix-play-btn {\n    width: 64px;\n    height: 64px;\n  }\n\n  .netflix-play-btn svg {\n    width: 28px;\n    height: 28px;\n  }\n\n  .seek-icon-container {\n    padding: 10px;\n  }\n\n  .seek-icon-container svg {\n    width: 40px;\n    height: 40px;\n  }\n\n  .bottom-controls-bar {\n    padding: 0 20px 16px;\n  }\n\n  .bottom-controls-row {\n    gap: 8px;\n  }\n\n  .controls-left,\n  .controls-right {\n    gap: 8px;\n  }\n\n  .netflix-control-btn {\n    padding: 6px;\n  }\n\n  .time-display-netflix {\n    font-size: 13px;\n  }\n\n  .quality-btn {\n    padding: 6px 10px !important;\n  }\n\n  .quality-text {\n    font-size: 12px;\n  }\n\n  /* Hide volume slider on mobile */\n  .volume-control-group .volume-slider-popup {\n    display: none;\n  }\n\n  /* Progress bar optimizations for mobile */\n  .netflix-progress-bar {\n    height: 6px;\n  }\n\n  .netflix-progress-bar:active {\n    height: 8px;\n  }\n\n  .progress-handle {\n    width: 16px;\n    height: 16px;\n    opacity: 1;\n  }\n\n  .progress-preview {\n    display: none;\n  }\n\n  /* Mobile gesture zones */\n  .seek-zone {\n    min-height: 120px;\n  }\n\n  .play-pause-zone {\n    min-height: 120px;\n  }\n}\n\n/* Landscape mobile optimizations */\n@media (max-width: 768px) and (orientation: landscape) {\n  .top-controls-bar {\n    padding: 12px 20px;\n  }\n\n  .bottom-controls-bar {\n    padding: 0 20px 12px;\n  }\n\n  .netflix-play-btn {\n    width: 56px;\n    height: 56px;\n  }\n\n  .center-controls-zone {\n    padding: 0 60px;\n  }\n\n  .seek-zone {\n    min-height: 100px;\n  }\n\n  .play-pause-zone {\n    min-height: 100px;\n  }\n}\n\n/* Touch device optimizations */\n@media (hover: none) and (pointer: coarse) {\n  .netflix-control-btn:hover {\n    background: rgba(255, 255, 255, 0.1);\n    transform: scale(1);\n  }\n\n  .netflix-control-btn:active {\n    background: rgba(255, 255, 255, 0.2);\n    transform: scale(0.95);\n  }\n\n  .netflix-play-btn:hover {\n    background: rgba(255, 255, 255, 0.9);\n    transform: scale(1);\n  }\n\n  .netflix-play-btn:active {\n    background: white;\n    transform: scale(0.95);\n  }\n\n  .netflix-back-btn:hover {\n    background: rgba(42, 42, 42, 0.6);\n    transform: scale(1);\n  }\n\n  .netflix-back-btn:active {\n    background: rgba(42, 42, 42, 0.8);\n    transform: scale(0.95);\n  }\n\n  /* Make touch targets larger */\n  .netflix-control-btn {\n    min-width: 44px;\n    min-height: 44px;\n  }\n\n  .progress-handle {\n    opacity: 1;\n    width: 20px;\n    height: 20px;\n  }\n}\n\n/* Dark theme for better Netflix feel */\n@media (prefers-color-scheme: dark) {\n  .netflix-controls-overlay {\n    --netflix-red: #e50914;\n    --netflix-dark: #141414;\n    --netflix-gray: #333333;\n  }\n}\n\n/* ============ END OF NETFLIX-STYLE CONTROLS ============ */\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}