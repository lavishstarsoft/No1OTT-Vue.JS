{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-[#121212] text-white\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/70\"\n};\nconst _hoisted_3 = {\n  class: \"px-4 py-6 flex justify-between items-center\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"flex justify-center mb-8\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"max-w-md mx-auto mb-24 sm:mb-0\"\n};\nconst _hoisted_7 = {\n  class: \"bg-[#1d1d1d] rounded-2xl overflow-hidden border border-[#c30059]/20 hover:border-[#c30059]/40 transition-all\"\n};\nconst _hoisted_8 = {\n  class: \"p-6\"\n};\nconst _hoisted_9 = {\n  class: \"flex items-center gap-3 mb-4\"\n};\nconst _hoisted_10 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_11 = {\n  class: \"text-sm text-white/60\"\n};\nconst _hoisted_12 = {\n  class: \"bg-[#c30059]/10 rounded-lg p-4 mb-6\"\n};\nconst _hoisted_13 = {\n  class: \"flex items-baseline gap-2\"\n};\nconst _hoisted_14 = {\n  class: \"text-3xl font-bold text-[#c30059]\"\n};\nconst _hoisted_15 = {\n  class: \"text-sm text-[#c30059]\"\n};\nconst _hoisted_16 = {\n  class: \"text-sm text-white/60 mt-1\"\n};\nconst _hoisted_17 = {\n  class: \"mt-6 border-t border-white/10 pt-6\"\n};\nconst _hoisted_18 = {\n  class: \"grid grid-cols-1 gap-4\"\n};\nconst _hoisted_19 = [\"disabled\"];\nconst _hoisted_20 = {\n  class: \"flex items-center gap-3\"\n};\nconst _hoisted_21 = {\n  class: \"w-10 h-10 rounded-full bg-[#c30059]/10 flex items-center justify-center group-hover:bg-[#c30059]/20\"\n};\nconst _hoisted_22 = {\n  key: 0,\n  class: \"fas fa-credit-card text-[#c30059]\"\n};\nconst _hoisted_23 = {\n  key: 1,\n  class: \"fas fa-spinner fa-spin text-[#c30059]\"\n};\nconst _hoisted_24 = {\n  class: \"text-left\"\n};\nconst _hoisted_25 = {\n  class: \"font-medium\"\n};\nconst _hoisted_26 = {\n  key: 0\n};\nconst _hoisted_27 = {\n  key: 1\n};\nconst _hoisted_28 = {\n  key: 0,\n  class: \"fas fa-chevron-right text-white/40 group-hover:text-[#c30059]\"\n};\nconst _hoisted_29 = {\n  key: 0,\n  class: \"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\"\n};\nconst _hoisted_30 = {\n  class: \"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6\"\n};\nconst _hoisted_31 = {\n  class: \"flex justify-between items-center mb-6\"\n};\nconst _hoisted_32 = {\n  class: \"space-y-4\"\n};\nconst _hoisted_33 = {\n  key: 0,\n  class: \"mt-2 text-sm text-red-500\"\n};\nconst _hoisted_34 = [\"disabled\"];\nconst _hoisted_35 = {\n  key: 2,\n  class: \"fixed bottom-0 left-0 right-0 p-4 bg-[#121212]/95 backdrop-blur-md border-t border-white/10 md:hidden z-50 mb-[72px]\"\n};\nconst _hoisted_36 = {\n  class: \"flex items-center justify-between mb-2\"\n};\nconst _hoisted_37 = {\n  class: \"font-bold text-[#c30059]\"\n};\nconst _hoisted_38 = {\n  class: \"text-right\"\n};\nconst _hoisted_39 = {\n  class: \"font-bold text-[#c30059]\"\n};\nconst _hoisted_40 = {\n  class: \"grid grid-cols-2 gap-2\"\n};\nconst _hoisted_41 = [\"disabled\"];\nconst _hoisted_42 = {\n  key: 0,\n  class: \"fas fa-credit-card\"\n};\nconst _hoisted_43 = {\n  key: 1,\n  class: \"fas fa-spinner fa-spin\"\n};\nconst _hoisted_44 = {\n  key: 2\n};\nconst _hoisted_45 = {\n  key: 3\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Fullscreen Spinner Overlay \"), $setup.isProcessingPayment ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"i\", {\n    class: \"fas fa-spinner fa-spin text-5xl text-[#c30059] mb-4\"\n  }, null, -1 /* HOISTED */)), _cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"text-lg font-semibold text-white\"\n  }, \"Processing Payment...\", -1 /* HOISTED */)), _createCommentVNode(\" Payment Warning Message \"), _cache[12] || (_cache[12] = _createStaticVNode(\"<div class=\\\"mt-6 p-4 bg-yellow-500/20 border border-yellow-500/40 rounded-lg max-w-md text-center\\\" data-v-73a2d3fa><div class=\\\"flex items-center justify-center gap-2 mb-2\\\" data-v-73a2d3fa><i class=\\\"fas fa-exclamation-triangle text-yellow-400\\\" data-v-73a2d3fa></i><span class=\\\"font-semibold text-yellow-400\\\" data-v-73a2d3fa>Important!</span></div><p class=\\\"text-sm text-yellow-300\\\" data-v-73a2d3fa><strong data-v-73a2d3fa>Don&#39;t close this website</strong> while payment is being processed. Your subscription will be activated automatically once payment is complete. </p></div>\", 1))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Back Navigation \"), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"flex items-center gap-2 text-white/80 hover:text-white\"\n  }, {\n    default: _withCtx(() => _cache[13] || (_cache[13] = [_createElementVNode(\"i\", {\n      class: \"fas fa-arrow-left\"\n    }, null, -1 /* HOISTED */), _createElementVNode(\"span\", null, \"Choose a Plan\", -1 /* HOISTED */)])),\n    _: 1 /* STABLE */,\n    __: [13]\n  })]), _createCommentVNode(\" Plan Selector (if multiple plans) \"), $setup.plans.length > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.selectedPlanId = $event),\n    onChange: _cache[1] || (_cache[1] = (...args) => $setup.onPlanChange && $setup.onPlanChange(...args)),\n    class: \"bg-[#1d1d1d] border border-[#c30059]/40 text-white rounded-lg px-4 py-2\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.plans, plan => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: plan.id,\n      value: plan.id\n    }, _toDisplayString(plan.name), 9 /* TEXT, PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedPlanId]])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Single Centered Plan Card \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[14] || (_cache[14] = _createElementVNode(\"div\", {\n    class: \"w-12 h-12 rounded-full bg-gradient-to-r from-[#c30059] to-[#7c1d44] flex items-center justify-center\"\n  }, [_createElementVNode(\"i\", {\n    class: \"fas fa-calendar-check text-2xl text-white\"\n  })], -1 /* HOISTED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"h3\", _hoisted_10, _toDisplayString($setup.selectedPlan?.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_11, _toDisplayString($setup.selectedPlan?.description), 1 /* TEXT */)])]), _createCommentVNode(\" Price Section with Special Highlight \"), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, \"₹\" + _toDisplayString($setup.selectedPlan?.price), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_15, \"/\" + _toDisplayString($setup.selectedPlan?.duration) + \" days\", 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_16, \"Just ₹\" + _toDisplayString($setup.selectedPlan ? ($setup.selectedPlan.price / $setup.selectedPlan.duration).toFixed(2) : '0.00') + \" per day\", 1 /* TEXT */)]), _createCommentVNode(\" Features List \"), _cache[21] || (_cache[21] = _createStaticVNode(\"<div class=\\\"space-y-4 mb-6\\\" data-v-73a2d3fa><div class=\\\"flex items-start gap-3\\\" data-v-73a2d3fa><i class=\\\"fas fa-tv text-[#c30059] mt-1\\\" data-v-73a2d3fa></i><div data-v-73a2d3fa><p class=\\\"font-medium\\\" data-v-73a2d3fa>Watch on 2 Devices</p><p class=\\\"text-sm text-white/60\\\" data-v-73a2d3fa>Stream on TV &amp; Mobile</p></div></div><div class=\\\"flex items-start gap-3\\\" data-v-73a2d3fa><i class=\\\"fas fa-fire text-[#c30059] mt-1\\\" data-v-73a2d3fa></i><div data-v-73a2d3fa><p class=\\\"font-medium\\\" data-v-73a2d3fa>Trending Videos</p><p class=\\\"text-sm text-white/60\\\" data-v-73a2d3fa>Latest &amp; Popular Content</p></div></div><div class=\\\"flex items-start gap-3\\\" data-v-73a2d3fa><i class=\\\"fas fa-star text-[#c30059] mt-1\\\" data-v-73a2d3fa></i><div data-v-73a2d3fa><p class=\\\"font-medium\\\" data-v-73a2d3fa>Popular Shows</p><p class=\\\"text-sm text-white/60\\\" data-v-73a2d3fa>Binge-worthy Series</p></div></div><div class=\\\"flex items-start gap-3\\\" data-v-73a2d3fa><i class=\\\"fas fa-film text-[#c30059] mt-1\\\" data-v-73a2d3fa></i><div data-v-73a2d3fa><p class=\\\"font-medium\\\" data-v-73a2d3fa>No.1 Originals</p><p class=\\\"text-sm text-white/60\\\" data-v-73a2d3fa>Exclusive Content</p></div></div></div>\", 1)), _createCommentVNode(\" Payment Options Section \"), _createElementVNode(\"div\", _hoisted_17, [_cache[17] || (_cache[17] = _createElementVNode(\"h4\", {\n    class: \"text-lg font-semibold mb-4\"\n  }, \"Select Payment Method\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.handlePaymentGateway && $setup.handlePaymentGateway(...args)),\n    disabled: $setup.isProcessingPayment,\n    class: \"bg-[#1a1a1a] p-4 rounded-lg border border-white/10 hover:border-[#c30059] transition-colors flex items-center justify-between group\"\n  }, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"div\", _hoisted_21, [!$setup.isProcessingPayment ? (_openBlock(), _createElementBlock(\"i\", _hoisted_22)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_23))]), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"p\", _hoisted_25, [$setup.isProcessingPayment ? (_openBlock(), _createElementBlock(\"span\", _hoisted_26, \"Processing...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_27, \"Pay Online\"))]), _cache[15] || (_cache[15] = _createElementVNode(\"p\", {\n    class: \"text-sm text-white/60\"\n  }, \"Credit/Debit Card, UPI, Net Banking\", -1 /* HOISTED */))])]), !$setup.isProcessingPayment ? (_openBlock(), _createElementBlock(\"i\", _hoisted_28)) : _createCommentVNode(\"v-if\", true)], 8 /* PROPS */, _hoisted_19), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = $event => $setup.showCodeInput = true),\n    class: \"bg-[#1a1a1a] p-4 rounded-lg border border-white/10 hover:border-[#c30059] transition-colors flex items-center justify-between group\"\n  }, _cache[16] || (_cache[16] = [_createStaticVNode(\"<div class=\\\"flex items-center gap-3\\\" data-v-73a2d3fa><div class=\\\"w-10 h-10 rounded-full bg-[#c30059]/10 flex items-center justify-center group-hover:bg-[#c30059]/20\\\" data-v-73a2d3fa><i class=\\\"fas fa-ticket-alt text-[#c30059]\\\" data-v-73a2d3fa></i></div><div class=\\\"text-left\\\" data-v-73a2d3fa><p class=\\\"font-medium\\\" data-v-73a2d3fa>Use Subscription Code</p><p class=\\\"text-sm text-white/60\\\" data-v-73a2d3fa>Redeem subscription code</p></div></div><i class=\\\"fas fa-chevron-right text-white/40 group-hover:text-[#c30059]\\\" data-v-73a2d3fa></i>\", 2)]))])]), _createCommentVNode(\" Code Input Dialog \"), $setup.showCodeInput ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", {\n    class: \"text-xl font-bold\"\n  }, \"Enter Subscription Code\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = $event => $setup.showCodeInput = false),\n    class: \"text-white/60 hover:text-white\"\n  }, _cache[18] || (_cache[18] = [_createElementVNode(\"i\", {\n    class: \"fas fa-times\"\n  }, null, -1 /* HOISTED */)]))]), _createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"div\", null, [_cache[20] || (_cache[20] = _createElementVNode(\"label\", {\n    class: \"block text-sm text-white/60 mb-2\"\n  }, \"Subscription Code\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.subscriptionCode = $event),\n    type: \"text\",\n    class: \"w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors uppercase\",\n    placeholder: \"Enter your code here\",\n    onInput: _cache[6] || (_cache[6] = (...args) => $setup.validateCode && $setup.validateCode(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.subscriptionCode]]), $setup.codeError ? (_openBlock(), _createElementBlock(\"p\", _hoisted_33, _toDisplayString($setup.codeError), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n    onClick: _cache[7] || (_cache[7] = (...args) => $setup.handleCodeSubmit && $setup.handleCodeSubmit(...args)),\n    disabled: !$setup.isValidCode,\n    class: \"w-full py-3 px-6 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed\"\n  }, \" Activate Subscription \", 8 /* PROPS */, _hoisted_34)])])])) : _createCommentVNode(\"v-if\", true)])])]), _createCommentVNode(\" FAQ Section (unchanged) \"), _cache[25] || (_cache[25] = _createStaticVNode(\"<div class=\\\"mt-16 mb-24 md:mb-8\\\" data-v-73a2d3fa><h2 class=\\\"text-2xl font-bold mb-8 text-center\\\" data-v-73a2d3fa>Frequently Asked Questions</h2><div class=\\\"max-w-3xl mx-auto space-y-4 pb-20 md:pb-0\\\" data-v-73a2d3fa><div class=\\\"bg-[#1d1d1d] rounded-lg p-4\\\" data-v-73a2d3fa><button class=\\\"flex items-center justify-between w-full text-left\\\" data-v-73a2d3fa><span class=\\\"font-semibold\\\" data-v-73a2d3fa>What payment methods do you accept?</span><i class=\\\"fas fa-chevron-down text-[#c30059]\\\" data-v-73a2d3fa></i></button></div><div class=\\\"bg-[#1d1d1d] rounded-lg p-4\\\" data-v-73a2d3fa><button class=\\\"flex items-center justify-between w-full text-left\\\" data-v-73a2d3fa><span class=\\\"font-semibold\\\" data-v-73a2d3fa>Can I cancel my subscription anytime?</span><i class=\\\"fas fa-chevron-down text-[#c30059]\\\" data-v-73a2d3fa></i></button></div><div class=\\\"bg-[#1d1d1d] rounded-lg p-4\\\" data-v-73a2d3fa><button class=\\\"flex items-center justify-between w-full text-left\\\" data-v-73a2d3fa><span class=\\\"font-semibold\\\" data-v-73a2d3fa>How many devices can I watch on simultaneously?</span><i class=\\\"fas fa-chevron-down text-[#c30059]\\\" data-v-73a2d3fa></i></button></div></div></div>\", 1)), _createCommentVNode(\" Mobile Fixed Bottom Bar \"), $setup.selectedPlan ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [_createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"div\", null, [_cache[22] || (_cache[22] = _createElementVNode(\"p\", {\n    class: \"text-sm text-white/60\"\n  }, \"Selected Plan\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_37, _toDisplayString($setup.selectedPlan.name), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_38, [_cache[23] || (_cache[23] = _createElementVNode(\"p\", {\n    class: \"text-sm text-white/60\"\n  }, \"Total Amount\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_39, \"₹\" + _toDisplayString($setup.selectedPlan.price), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_40, [_createElementVNode(\"button\", {\n    onClick: _cache[8] || (_cache[8] = (...args) => $setup.handlePaymentGateway && $setup.handlePaymentGateway(...args)),\n    disabled: $setup.isProcessingPayment,\n    class: \"py-3 px-4 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center gap-2\"\n  }, [!$setup.isProcessingPayment ? (_openBlock(), _createElementBlock(\"i\", _hoisted_42)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_43)), $setup.isProcessingPayment ? (_openBlock(), _createElementBlock(\"span\", _hoisted_44, \"Processing...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_45, \"Pay Online\"))], 8 /* PROPS */, _hoisted_41), _createElementVNode(\"button\", {\n    onClick: _cache[9] || (_cache[9] = $event => $setup.showCodeInput = true),\n    class: \"py-3 px-4 bg-[#1a1a1a] text-white font-bold rounded-lg hover:bg-[#252525] transition-colors flex items-center justify-center gap-2 border border-white/10\"\n  }, _cache[24] || (_cache[24] = [_createElementVNode(\"i\", {\n    class: \"fas fa-ticket-alt\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"span\", null, \"Use Subscription Code\", -1 /* HOISTED */)]))])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","$setup","isProcessingPayment","_hoisted_2","_createElementVNode","_hoisted_3","_createVNode","_component_router_link","to","_cache","plans","length","_hoisted_4","selectedPlanId","$event","onChange","args","onPlanChange","_Fragment","_renderList","plan","key","id","value","name","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","selectedPlan","_hoisted_11","description","_hoisted_12","_hoisted_13","_hoisted_14","price","_hoisted_15","duration","_hoisted_16","toFixed","_hoisted_17","_hoisted_18","onClick","handlePaymentGateway","disabled","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","showCodeInput","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","subscriptionCode","type","placeholder","onInput","validateCode","codeError","_hoisted_33","handleCodeSubmit","isValidCode","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45"],"sources":["D:\\OTT\\ott_frontend\\src\\views\\SubscriptionPlans.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-[#121212] text-white\">\n    <!-- Fullscreen Spinner Overlay -->\n    <div v-if=\"isProcessingPayment\" class=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/70\">\n      <i class=\"fas fa-spinner fa-spin text-5xl text-[#c30059] mb-4\"></i>\n      <div class=\"text-lg font-semibold text-white\">Processing Payment...</div>\n      <!-- Payment Warning Message -->\n      <div class=\"mt-6 p-4 bg-yellow-500/20 border border-yellow-500/40 rounded-lg max-w-md text-center\">\n        <div class=\"flex items-center justify-center gap-2 mb-2\">\n          <i class=\"fas fa-exclamation-triangle text-yellow-400\"></i>\n          <span class=\"font-semibold text-yellow-400\">Important!</span>\n        </div>\n        <p class=\"text-sm text-yellow-300\">\n          <strong>Don't close this website</strong> while payment is being processed. \n          Your subscription will be activated automatically once payment is complete.\n        </p>\n      </div>\n    </div>\n\n\n\n    <!-- Back Navigation -->\n    <div class=\"px-4 py-6 flex justify-between items-center\">\n      <router-link to=\"/\" class=\"flex items-center gap-2 text-white/80 hover:text-white\">\n        <i class=\"fas fa-arrow-left\"></i>\n        <span>Choose a Plan</span>\n      </router-link>\n    </div>\n\n    <!-- Plan Selector (if multiple plans) -->\n    <div v-if=\"plans.length > 1\" class=\"flex justify-center mb-8\">\n      <select v-model=\"selectedPlanId\" @change=\"onPlanChange\" class=\"bg-[#1d1d1d] border border-[#c30059]/40 text-white rounded-lg px-4 py-2\">\n        <option v-for=\"plan in plans\" :key=\"plan.id\" :value=\"plan.id\">{{ plan.name }}</option>\n      </select>\n    </div>\n\n    <!-- Single Centered Plan Card -->\n    <div class=\"max-w-md mx-auto mb-24 sm:mb-0\">\n      <div class=\"bg-[#1d1d1d] rounded-2xl overflow-hidden border border-[#c30059]/20 hover:border-[#c30059]/40 transition-all\">\n        <div class=\"p-6\">\n          <div class=\"flex items-center gap-3 mb-4\">\n            <div class=\"w-12 h-12 rounded-full bg-gradient-to-r from-[#c30059] to-[#7c1d44] flex items-center justify-center\">\n              <i class=\"fas fa-calendar-check text-2xl text-white\"></i>\n            </div>\n            <div>\n              <h3 class=\"text-2xl font-bold\">{{ selectedPlan?.name }}</h3>\n              <p class=\"text-sm text-white/60\">{{ selectedPlan?.description }}</p>\n            </div>\n          </div>\n          <!-- Price Section with Special Highlight -->\n          <div class=\"bg-[#c30059]/10 rounded-lg p-4 mb-6\">\n            <div class=\"flex items-baseline gap-2\">\n              <span class=\"text-3xl font-bold text-[#c30059]\">₹{{ selectedPlan?.price }}</span>\n              <span class=\"text-sm text-[#c30059]\">/{{ selectedPlan?.duration }} days</span>\n            </div>\n            <p class=\"text-sm text-white/60 mt-1\">Just ₹{{ selectedPlan ? (selectedPlan.price / selectedPlan.duration).toFixed(2) : '0.00' }} per day</p>\n          </div>\n          <!-- Features List -->\n          <div class=\"space-y-4 mb-6\">\n            <div class=\"flex items-start gap-3\">\n              <i class=\"fas fa-tv text-[#c30059] mt-1\"></i>\n              <div>\n                <p class=\"font-medium\">Watch on 2 Devices</p>\n                <p class=\"text-sm text-white/60\">Stream on TV & Mobile</p>\n              </div>\n            </div>\n            <div class=\"flex items-start gap-3\">\n              <i class=\"fas fa-fire text-[#c30059] mt-1\"></i>\n              <div>\n                <p class=\"font-medium\">Trending Videos</p>\n                <p class=\"text-sm text-white/60\">Latest & Popular Content</p>\n              </div>\n            </div>\n            <div class=\"flex items-start gap-3\">\n              <i class=\"fas fa-star text-[#c30059] mt-1\"></i>\n              <div>\n                <p class=\"font-medium\">Popular Shows</p>\n                <p class=\"text-sm text-white/60\">Binge-worthy Series</p>\n              </div>\n            </div>\n            <div class=\"flex items-start gap-3\">\n              <i class=\"fas fa-film text-[#c30059] mt-1\"></i>\n              <div>\n                <p class=\"font-medium\">No.1 Originals</p>\n                <p class=\"text-sm text-white/60\">Exclusive Content</p>\n              </div>\n            </div>\n          </div>\n          <!-- Payment Options Section -->\n          <div class=\"mt-6 border-t border-white/10 pt-6\">\n            <h4 class=\"text-lg font-semibold mb-4\">Select Payment Method</h4>\n            <div class=\"grid grid-cols-1 gap-4\">\n              <button \n                @click=\"handlePaymentGateway\"\n                :disabled=\"isProcessingPayment\"\n                class=\"bg-[#1a1a1a] p-4 rounded-lg border border-white/10 hover:border-[#c30059] transition-colors flex items-center justify-between group\"\n              >\n                <div class=\"flex items-center gap-3\">\n                  <div class=\"w-10 h-10 rounded-full bg-[#c30059]/10 flex items-center justify-center group-hover:bg-[#c30059]/20\">\n                    <i class=\"fas fa-credit-card text-[#c30059]\" v-if=\"!isProcessingPayment\"></i>\n                    <i class=\"fas fa-spinner fa-spin text-[#c30059]\" v-else></i>\n                  </div>\n                  <div class=\"text-left\">\n                    <p class=\"font-medium\">\n                      <span v-if=\"isProcessingPayment\">Processing...</span>\n                      <span v-else>Pay Online</span>\n                    </p>\n                    <p class=\"text-sm text-white/60\">Credit/Debit Card, UPI, Net Banking</p>\n                  </div>\n                </div>\n                <i class=\"fas fa-chevron-right text-white/40 group-hover:text-[#c30059]\" v-if=\"!isProcessingPayment\"></i>\n              </button>\n              <button \n                @click=\"showCodeInput = true\"\n                class=\"bg-[#1a1a1a] p-4 rounded-lg border border-white/10 hover:border-[#c30059] transition-colors flex items-center justify-between group\"\n              >\n                <div class=\"flex items-center gap-3\">\n                  <div class=\"w-10 h-10 rounded-full bg-[#c30059]/10 flex items-center justify-center group-hover:bg-[#c30059]/20\">\n                    <i class=\"fas fa-ticket-alt text-[#c30059]\"></i>\n                  </div>\n                  <div class=\"text-left\">\n                    <p class=\"font-medium\">Use Subscription Code</p>\n                    <p class=\"text-sm text-white/60\">Redeem subscription code</p>\n                  </div>\n                </div>\n                <i class=\"fas fa-chevron-right text-white/40 group-hover:text-[#c30059]\"></i>\n              </button>\n            </div>\n          </div>\n          <!-- Code Input Dialog -->\n          <div v-if=\"showCodeInput\" class=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\">\n            <div class=\"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6\">\n              <div class=\"flex justify-between items-center mb-6\">\n                <h3 class=\"text-xl font-bold\">Enter Subscription Code</h3>\n                <button @click=\"showCodeInput = false\" class=\"text-white/60 hover:text-white\">\n                  <i class=\"fas fa-times\"></i>\n                </button>\n              </div>\n              <div class=\"space-y-4\">\n                <div>\n                  <label class=\"block text-sm text-white/60 mb-2\">Subscription Code</label>\n                  <input \n                    v-model=\"subscriptionCode\"\n                    type=\"text\"\n                    class=\"w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors uppercase\"\n                    placeholder=\"Enter your code here\"\n                    @input=\"validateCode\"\n                  />\n                  <p v-if=\"codeError\" class=\"mt-2 text-sm text-red-500\">{{ codeError }}</p>\n                </div>\n                <button \n                  @click=\"handleCodeSubmit\"\n                  :disabled=\"!isValidCode\"\n                  class=\"w-full py-3 px-6 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Activate Subscription\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- FAQ Section (unchanged) -->\n    <div class=\"mt-16 mb-24 md:mb-8\">\n      <h2 class=\"text-2xl font-bold mb-8 text-center\">Frequently Asked Questions</h2>\n      <div class=\"max-w-3xl mx-auto space-y-4 pb-20 md:pb-0\">\n        <div class=\"bg-[#1d1d1d] rounded-lg p-4\">\n          <button class=\"flex items-center justify-between w-full text-left\">\n            <span class=\"font-semibold\">What payment methods do you accept?</span>\n            <i class=\"fas fa-chevron-down text-[#c30059]\"></i>\n          </button>\n        </div>\n        <div class=\"bg-[#1d1d1d] rounded-lg p-4\">\n          <button class=\"flex items-center justify-between w-full text-left\">\n            <span class=\"font-semibold\">Can I cancel my subscription anytime?</span>\n            <i class=\"fas fa-chevron-down text-[#c30059]\"></i>\n          </button>\n        </div>\n        <div class=\"bg-[#1d1d1d] rounded-lg p-4\">\n          <button class=\"flex items-center justify-between w-full text-left\">\n            <span class=\"font-semibold\">How many devices can I watch on simultaneously?</span>\n            <i class=\"fas fa-chevron-down text-[#c30059]\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n    <!-- Mobile Fixed Bottom Bar -->\n    <div v-if=\"selectedPlan\" class=\"fixed bottom-0 left-0 right-0 p-4 bg-[#121212]/95 backdrop-blur-md border-t border-white/10 md:hidden z-50 mb-[72px]\">\n      <div class=\"flex items-center justify-between mb-2\">\n        <div>\n          <p class=\"text-sm text-white/60\">Selected Plan</p>\n          <p class=\"font-bold text-[#c30059]\">{{ selectedPlan.name }}</p>\n        </div>\n        <div class=\"text-right\">\n          <p class=\"text-sm text-white/60\">Total Amount</p>\n          <p class=\"font-bold text-[#c30059]\">₹{{ selectedPlan.price }}</p>\n        </div>\n      </div>\n      <div class=\"grid grid-cols-2 gap-2\">\n        <button \n          @click=\"handlePaymentGateway\"\n          :disabled=\"isProcessingPayment\"\n          class=\"py-3 px-4 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center gap-2\"\n        >\n          <i class=\"fas fa-credit-card\" v-if=\"!isProcessingPayment\"></i>\n          <i class=\"fas fa-spinner fa-spin\" v-else></i>\n          <span v-if=\"isProcessingPayment\">Processing...</span>\n          <span v-else>Pay Online</span>\n        </button>\n        <button \n          @click=\"showCodeInput = true\"\n          class=\"py-3 px-4 bg-[#1a1a1a] text-white font-bold rounded-lg hover:bg-[#252525] transition-colors flex items-center justify-center gap-2 border border-white/10\"\n        >\n          <i class=\"fas fa-ticket-alt\"></i>\n          <span>Use Subscription Code</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useStore } from 'vuex';\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\nexport default {\n  name: 'SubscriptionPlans',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const showCodeInput = ref(false);\n    const subscriptionCode = ref('');\n    const codeError = ref('');\n    const isValidCode = ref(false);\n    const isProcessingPayment = ref(false);\n\n    const plans = ref([]);\n    const selectedPlan = ref(null);\n    const selectedPlanId = ref(null);\n\n    // Use computed properties from store\n    const isAuthenticated = computed(() => store.getters.isAuthenticated);\n    const user = computed(() => store.getters.currentUser);\n    const token = computed(() => store.getters.token);\n\n    // Fetch plans from backend on mount\n    onMounted(async () => {\n      try {\n        const response = await axios.get('/users/api/subscription-plans/');\n        plans.value = response.data.plans;\n        if (plans.value.length > 0) {\n          selectedPlan.value = plans.value[0];\n          selectedPlanId.value = plans.value[0].id;\n        }\n      } catch (error) {\n        console.error('Failed to fetch plans:', error);\n      }\n      store.dispatch('initializeStore');\n      \n      // Check for plan in URL\n      const urlParams = new URLSearchParams(window.location.search);\n      const planType = urlParams.get('plan');\n      if (planType && plans.value.length > 0) {\n        const plan = plans.value.find(p => p.id === planType);\n        if (plan) {\n          selectedPlan.value = plan;\n          selectedPlanId.value = plan.id;\n        }\n      }\n      \n      // Check and clean expired orders on page load\n      checkAndCleanExpiredOrders();\n    });\n\n    // Watch for plan selector change\n    const onPlanChange = () => {\n      const plan = plans.value.find(p => p.id === selectedPlanId.value);\n      if (plan) {\n        selectedPlan.value = plan;\n      }\n    };\n\n    watch(selectedPlanId, onPlanChange);\n\n    // Check for expired orders and clean up\n    const checkAndCleanExpiredOrders = () => {\n      const paymentOrder = localStorage.getItem('payment_order');\n      if (paymentOrder) {\n        try {\n          const orderData = JSON.parse(paymentOrder);\n          const orderTime = orderData.created_at;\n          const currentTime = Date.now();\n          const timeDiff = currentTime - orderTime;\n          \n          // If order is older than 30 minutes, remove it\n          if (timeDiff > 30 * 60 * 1000) { // 30 minutes\n            localStorage.removeItem('payment_order');\n            console.log('Expired payment order removed');\n            return false;\n          }\n          return true;\n        } catch (error) {\n          localStorage.removeItem('payment_order');\n          return false;\n        }\n      }\n      return false;\n    };\n\n    // Create new order function\n    const createNewOrder = async () => {\n      try {\n        const orderResponse = await axios.post('/api/payment/create-order/', {\n          amount: selectedPlan.value.price,\n          currency: 'INR',\n          plan_id: selectedPlan.value.id,\n          phone: user.value.phone\n        });\n\n        console.log('New order created:', orderResponse.data);\n\n        if (!orderResponse.data || !orderResponse.data.key_id) {\n          throw new Error('Invalid order response from server');\n        }\n\n        // Store new order in localStorage with timestamp\n        const orderData = {\n          ...orderResponse.data,\n          created_at: Date.now(),\n          plan_id: selectedPlan.value.id,\n          phone: user.value.phone\n        };\n        localStorage.setItem('payment_order', JSON.stringify(orderData));\n\n        return orderData;\n      } catch (error) {\n        console.error('Error creating new order:', error);\n        throw error;\n      }\n    };\n\n    // Use existing order function\n    const useExistingOrder = (orderData) => {\n      console.log('Using existing order:', orderData.order_id);\n      return orderData;\n    };\n\n    const handlePaymentGateway = async () => {\n      isProcessingPayment.value = true;\n      try {\n        console.log('Payment gateway initiated');\n        console.log('Auth status:', isAuthenticated.value);\n        console.log('User:', user.value);\n        console.log('Token:', token.value);\n\n        // Check authentication and token\n        if (!isAuthenticated.value || !user.value || !token.value) {\n          console.log('User not authenticated or missing token, redirecting to login');\n          router.push({\n            path: '/login',\n            query: { \n              redirect: '/plans',\n              plan: selectedPlan.value.id\n            }\n          });\n          isProcessingPayment.value = false;\n          return;\n        }\n\n        // Check if registration and location details are complete\n        const hasCompletedRegistration = user.value.first_name && \n                                       user.value.last_name && \n                                       user.value.address &&\n                                       user.value.state &&\n                                       user.value.district &&\n                                       user.value.constituency;\n\n        if (!hasCompletedRegistration) {\n          console.log('Registration or location details incomplete, redirecting to profile update');\n          store.dispatch('showToast', {\n            message: 'Please complete your profile with all location details',\n            type: 'warning',\n            duration: 5000\n          });\n          router.push({\n            path: '/profile/update',\n            query: { \n              redirect: '/plans',\n              plan: selectedPlan.value.id\n            }\n          });\n          isProcessingPayment.value = false;\n          return;\n        }\n\n        // Set authorization header\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token.value}`;\n\n        // Show loading state\n        store.commit('setLoading', true);\n        \n        console.log('Creating order for plan:', selectedPlan.value);\n        \n        // Check for existing valid order\n        const hasValidOrder = checkAndCleanExpiredOrders();\n        let orderData;\n        \n        if (hasValidOrder) {\n          // Use existing order\n          const existingOrder = JSON.parse(localStorage.getItem('payment_order'));\n          orderData = useExistingOrder(existingOrder);\n        } else {\n          // Create new order\n          orderData = await createNewOrder();\n        }\n\n        console.log('Order data:', orderData);\n\n        // Hide loading state\n        store.commit('setLoading', false);\n\n        if (!orderData || !orderData.key_id) {\n          throw new Error('Invalid order response from server');\n        }\n\n        try {\n          // Initialize Razorpay\n          const options = {\n            key: orderData.key_id,\n            amount: orderData.amount,\n            currency: orderData.currency,\n            name: 'No1 OTT',\n            description: `${selectedPlan.value.name} Subscription`,\n            order_id: orderData.order_id,\n            prefill: {\n              name: user.value?.first_name || '',\n              email: user.value?.email || '',\n              contact: user.value?.phone || ''\n            },\n            theme: {\n              color: '#c30059'\n            },\n            // Better UPI configuration to prevent app closing\n            config: {\n              display: {\n                blocks: {\n                  upi: {\n                    name: 'Pay using UPI',\n                    instruments: [\n                      { method: 'upi' }\n                    ]\n                  },\n                  card: {\n                    name: 'Credit/Debit Cards',\n                    instruments: [\n                      { method: 'card' }\n                    ]\n                  },\n                  netbanking: {\n                    name: 'Net Banking',\n                    instruments: [\n                      { method: 'netbanking' }\n                    ]\n                  }\n                },\n                sequence: ['upi', 'card', 'netbanking'],\n                preferences: {\n                  show_default_blocks: true\n                }\n              }\n            },\n            // Enhanced retry configuration\n            retry: {\n              enabled: true,\n              max_count: 3\n            },\n            // Better timeout handling\n            timeout: 300, // 5 minutes\n            // Handle modal close (when user cancels or app redirects)\n            modal: {\n              ondismiss: async function() {\n                console.log('Razorpay modal dismissed, starting payment status check');\n                // Start background checking for payment status\n                setTimeout(async () => {\n                  await startPaymentStatusPolling(orderData.order_id, paymentData);\n                }, 2000); // Wait 2 seconds before starting checks\n              },\n              // Handle escape and back button\n              escape: true,\n              backdropclose: false\n            },\n            // Handle different payment methods\n            method: {\n              upi: {\n                // Handle UPI flow completion\n                flow: 'intent' // Use intent-based flow for better UPI handling\n              }\n            },\n            handler: async (response) => {\n              // First define the payment status polling function\n              const startPaymentStatusPolling = async (orderId, storedPaymentData) => {\n                console.log('Starting payment status polling for order:', orderId);\n                let attempts = 0;\n                const maxAttempts = 10; // Check for 5 minutes (30 seconds * 10)\n                \n                const pollInterval = setInterval(async () => {\n                  try {\n                    attempts++;\n                    console.log(`Payment status check attempt ${attempts}/${maxAttempts}`);\n                    \n                    // Check payment status with backend\n                    const statusResponse = await axios.get(`/users/payment/check-status/${orderId}/`);\n                    \n                    if (statusResponse.data.status === 'completed') {\n                      console.log('Payment completed successfully!');\n                      clearInterval(pollInterval);\n                      \n                      // Clear pending payment\n                      localStorage.removeItem('pending_payment');\n                      \n                      // Update store\n                      store.commit('setLoading', false);\n                      store.dispatch('showToast', {\n                        message: 'Payment successful! Your subscription is now active.',\n                        type: 'success'\n                      });\n                      \n                      // Redirect to profile\n                      router.push('/profile');\n                      return;\n                    }\n                    \n                    if (attempts >= maxAttempts) {\n                      console.log('Max polling attempts reached');\n                      clearInterval(pollInterval);\n                      \n                      // Keep payment data for App.vue to handle\n                      console.log('Keeping payment data for later verification');\n                      \n                      store.dispatch('showToast', {\n                        message: 'Payment verification is taking longer than expected. We will notify you once confirmed.',\n                        type: 'warning'\n                      });\n                    }\n                  } catch (error) {\n                    console.error('Payment status check failed:', error);\n                    \n                    if (attempts >= maxAttempts) {\n                      clearInterval(pollInterval);\n                    }\n                  }\n                }, 30000); // Check every 30 seconds\n              };\n              \n              // Now handle the payment success\n              try {\n                store.commit('setLoading', true);\n                console.log('=== PAYMENT SUCCESSFUL ===');\n                console.log('Payment response:', response);\n                \n                // Store payment details in localStorage for backup verification\n                const paymentData = {\n                  payment_id: response.razorpay_payment_id,\n                  order_id: response.razorpay_order_id,\n                  signature: response.razorpay_signature,\n                  plan_id: selectedPlan.value.id,\n                  phone: user.value.phone,\n                  timestamp: Date.now(),\n                  retry_count: 0,\n                  amount: selectedPlan.value.price,\n                  plan_name: selectedPlan.value.name\n                };\n                \n                console.log('Storing payment data in localStorage:', paymentData);\n                localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n\n                // Try immediate verification\n                console.log('Attempting immediate payment verification...');\n                const verifyResponse = await axios.post('/users/verify-payment/', {\n                  razorpay_payment_id: response.razorpay_payment_id,\n                  razorpay_order_id: response.razorpay_order_id,\n                  razorpay_signature: response.razorpay_signature,\n                  plan_id: selectedPlan.value.id,\n                  phone: user.value.phone\n                });\n\n                console.log('Verification response:', verifyResponse.data);\n\n                if (verifyResponse.data.status === 'success') {\n                  // Clear pending payment from localStorage\n                  localStorage.removeItem('pending_payment');\n                  \n                  // Update user subscription in store\n                  store.commit('setSubscription', verifyResponse.data.subscription);\n                  store.dispatch('showToast', {\n                    message: 'Payment successful! Your subscription is now active.',\n                    type: 'success'\n                  });\n                  console.log('Payment verified successfully, redirecting to profile');\n                  router.push('/profile');\n                } else {\n                  throw new Error(verifyResponse.data.message || 'Payment verification failed');\n                }\n              } catch (error) {\n                console.error('=== PAYMENT VERIFICATION FAILED ===');\n                console.error('Error details:', error);\n                console.error('Error response:', error.response?.data);\n                \n                // Don't remove pending_payment from localStorage - let App.vue handle it\n                store.dispatch('showToast', {\n                  message: 'Payment successful! Please wait a moment for verification. You will be notified once your subscription is active.',\n                  type: 'warning'\n                });\n                console.log('Redirecting to profile, payment data stored for retry');\n                router.push('/profile');\n              } finally {\n                store.commit('setLoading', false);\n              }\n            },\n            webview_intent: true\n          };\n\n          // Create and open Razorpay\n          console.log('Opening Razorpay with options:', options);\n          const rzp = new window.Razorpay(options);\n          rzp.on('payment.failed', function (response) {\n            isProcessingPayment.value = false;\n            store.commit('setLoading', false);\n            alert(`Payment failed: ${response.error.description}`);\n          });\n          \n          rzp.open();\n          // Hide loader after a short delay to ensure Razorpay UI is visible\n          setTimeout(() => { isProcessingPayment.value = false; }, 1000);\n        } catch (error) {\n          console.error('Order creation failed:', error);\n          store.commit('setLoading', false);\n          \n          if (error.response) {\n            if (error.response.status === 401) {\n              // Clear invalid session and redirect to login\n              store.dispatch('logout');\n              router.push({\n                path: '/login',\n                query: { \n                  redirect: '/plans',\n                  plan: selectedPlan.value.id\n                }\n              });\n            } else {\n              alert(`Server error: ${error.response.data.message || 'Please try again later'}`);\n            }\n          } else if (error.request) {\n            alert('Network error. Please check your internet connection.');\n          } else {\n            alert('Unable to create order. Please try again.');\n          }\n        }\n      } catch (error) {\n        console.error('Payment gateway error:', error);\n        store.commit('setLoading', false);\n        alert('Something went wrong. Please try again.');\n      }\n    };\n\n    const validateCode = async () => {\n      try {\n        // Show loading state\n        store.commit('setLoading', true);\n        \n        // Basic validation\n        if (!subscriptionCode.value) {\n          codeError.value = 'Please enter a subscription code';\n          isValidCode.value = false;\n          return;\n        }\n\n        // Get user phone from store\n        const phone = store.getters.currentUser?.phone;\n        \n        if (!phone) {\n          store.dispatch('showToast', {\n            message: 'Please login to continue',\n            type: 'error'\n          });\n          router.push({\n            name: 'login',\n            query: { redirect: router.currentRoute.value.fullPath }\n          });\n          return;\n        }\n\n        // Call API to validate code\n        const response = await axios.post('/users/validate-coupon/', {\n          code: subscriptionCode.value,\n          phone: phone,\n          amount: selectedPlan.value.price,\n          plan_id: selectedPlan.value.id\n        });\n\n        if (response.data.status === 'success') {\n          isValidCode.value = true;\n          codeError.value = '';\n          store.dispatch('showToast', {\n            message: 'Code is valid! Click Activate to use it',\n            type: 'success'\n          });\n        } else {\n          isValidCode.value = false;\n          codeError.value = response.data.message || 'Invalid code';\n          store.dispatch('showToast', {\n            message: codeError.value,\n            type: 'error'\n          });\n        }\n      } catch (error) {\n        console.error('Code validation error:', error);\n        isValidCode.value = false;\n        codeError.value = error.response?.data?.message || 'Error validating code. Please try again.';\n        store.dispatch('showToast', {\n          message: codeError.value,\n          type: 'error'\n        });\n      } finally {\n        store.commit('setLoading', false);\n      }\n    };\n\n    const handleCodeSubmit = async () => {\n      if (!isValidCode.value) return;\n\n      try {\n        // Show loading state\n        store.commit('setLoading', true);\n        \n        // Get user from Vuex store\n        const user = store.getters.currentUser;\n        const phone = user?.phone || localStorage.getItem('phone');\n        \n        if (!phone) {\n          store.dispatch('showToast', {\n            message: 'Please login to continue',\n            type: 'error'\n          });\n          router.push({\n            name: 'login',\n            query: { redirect: router.currentRoute.value.fullPath }\n          });\n          store.commit('setLoading', false);\n          return;\n        }\n\n        // Check if registration and location details are complete (same as Pay Online)\n        const hasCompletedRegistration = user && user.first_name && \n                                         user.last_name && \n                                         user.address &&\n                                         user.state &&\n                                         user.district &&\n                                         user.constituency;\n\n        if (!hasCompletedRegistration) {\n          store.dispatch('showToast', {\n            message: 'Please complete your profile with all location details',\n            type: 'warning',\n            duration: 5000\n          });\n          router.push({\n            path: '/profile/update',\n            query: { \n              redirect: router.currentRoute.value.fullPath,\n              code: subscriptionCode.value\n            }\n          });\n          store.commit('setLoading', false);\n          return;\n        }\n        \n        // Call API to activate subscription\n        const response = await axios.post('/users/apply-coupon-subscription/', {\n          code: subscriptionCode.value,\n          phone: phone,\n          plan_id: selectedPlan.value.id\n        });\n\n        if (response.data.status === 'success') {\n          // Update user subscription in store\n          store.commit('setSubscription', response.data.subscription);\n          \n          // Show success message\n          store.dispatch('showToast', {\n            message: 'Subscription activated successfully!',\n            type: 'success'\n          });\n          \n          // Close code input dialog\n          showCodeInput.value = false;\n          \n          // Redirect to profile page\n          router.push('/profile');\n        } else {\n          throw new Error(response.data.message || 'Failed to activate subscription');\n        }\n      } catch (error) {\n        console.error('Code activation error:', error);\n        \n        // Show error message\n        store.dispatch('showToast', {\n          message: error.response?.data?.message || 'Error activating subscription. Please try again.',\n          type: 'error'\n        });\n\n        if (error.response?.status === 404) {\n          // User not found - redirect to login (same as Pay Online)\n          router.push({\n            path: '/login',\n            query: { \n              redirect: router.currentRoute.value.fullPath,\n              phone: localStorage.getItem('phone')\n            }\n          });\n        } else if (!localStorage.getItem('phone')) {\n          // Not logged in - redirect to login\n          router.push({\n            name: 'login',\n            query: { redirect: router.currentRoute.value.fullPath }\n          });\n        }\n      } finally {\n        store.commit('setLoading', false);\n      }\n    };\n\n\n\n    return {\n      plans,\n      selectedPlan,\n      selectedPlanId,\n      showCodeInput,\n      subscriptionCode,\n      codeError,\n      isValidCode,\n      isProcessingPayment,\n      handlePaymentGateway,\n      validateCode,\n      handleCodeSubmit,\n      onPlanChange,\n      checkAndCleanExpiredOrders // Expose order cleanup method\n    };\n  }\n}\n</script>\n\n<style scoped>\n.gradient-text {\n  background: linear-gradient(90deg, #c30059 0%, #7c1d44 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n/* Add these responsive styles */\n@media screen and (max-width: 1024px) {\n  .max-w-7xl {\n    max-width: 100%;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .grid {\n    gap: 1rem;\n  }\n  \n  .px-4 {\n    padding-left: 1rem;\n    padding-right: 1rem;\n  }\n\n  /* Add padding for mobile nav */\n  .pb-32 {\n    padding-bottom: 8rem;\n  }\n}\n\n@media screen and (max-width: 640px) {\n  .grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .overflow-x-auto {\n    -webkit-overflow-scrolling: touch;\n  }\n  \n  .text-2xl {\n    font-size: 1.5rem;\n  }\n  \n  .py-4 {\n    padding-top: 0.75rem;\n    padding-bottom: 0.75rem;\n  }\n  \n  .px-6 {\n    padding-left: 1rem;\n    padding-right: 1rem;\n  }\n\n  /* Add bottom padding to account for fixed button */\n  .pb-24 {\n    padding-bottom: 6rem;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}