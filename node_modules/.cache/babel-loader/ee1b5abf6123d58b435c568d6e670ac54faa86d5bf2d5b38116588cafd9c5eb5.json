{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport axios from 'axios';\n\n// Import CSS files\nimport './assets/main.css';\n\n// Import Font Awesome\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n\n// ==== APP VERSIONING & CACHE CLEAR LOGIC ====\nconst APP_VERSION = '1.0.17'; // Change this on every new deployment\nconst cachedVersion = localStorage.getItem('app_version');\n\n// Clear cache and logout all users if version is different\nif (cachedVersion && cachedVersion !== APP_VERSION) {\n  console.log('App version changed, clearing all data and logging out users');\n\n  // Get current pathname before clearing\n  const currentPath = window.location.pathname;\n\n  // Save important data before clearing\n  const tempVersion = APP_VERSION;\n  const token = localStorage.getItem('token');\n  const user = localStorage.getItem('user');\n  const isAuthenticated = localStorage.getItem('isAuthenticated');\n  const phone = localStorage.getItem('phone');\n\n  // Clear all storage\n  localStorage.clear();\n  sessionStorage.clear();\n\n  // Restore important data if user was logged in\n  if (isAuthenticated === 'true' && token && user) {\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', user);\n    localStorage.setItem('isAuthenticated', isAuthenticated);\n    if (phone) localStorage.setItem('phone', phone);\n  }\n\n  // Always restore new version\n  localStorage.setItem('app_version', tempVersion);\n\n  // Only logout and redirect if version actually changed\n  if (!isAuthenticated || !token || !user) {\n    // Clear Vuex store if available\n    if (store && store.dispatch) {\n      store.dispatch('logout');\n    }\n\n    // Redirect to login only if not already there\n    if (currentPath !== '/login') {\n      window.location.replace('/login');\n    }\n  }\n}\n\n// Configure axios\naxios.defaults.baseURL = 'https://ott.no1news.in/';\naxios.defaults.withCredentials = true;\nconst app = createApp(App);\n\n// Use Vuex store and router\napp.use(store);\napp.use(router);\napp.mount('#app');","map":{"version":3,"names":["createApp","App","router","store","axios","APP_VERSION","cachedVersion","localStorage","getItem","console","log","currentPath","window","location","pathname","tempVersion","token","user","isAuthenticated","phone","clear","sessionStorage","setItem","dispatch","replace","defaults","baseURL","withCredentials","app","use","mount"],"sources":["F:/ott_tv/ott_frontend/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport axios from 'axios'\n\n// Import CSS files\nimport './assets/main.css'\n\n// Import Font Awesome\nimport '@fortawesome/fontawesome-free/css/all.min.css'\n\n// ==== APP VERSIONING & CACHE CLEAR LOGIC ====\nconst APP_VERSION = '1.0.17'; // Change this on every new deployment\nconst cachedVersion = localStorage.getItem('app_version');\n\n// Clear cache and logout all users if version is different\nif (cachedVersion && cachedVersion !== APP_VERSION) {\n  console.log('App version changed, clearing all data and logging out users');\n  \n  // Get current pathname before clearing\n  const currentPath = window.location.pathname;\n  \n  // Save important data before clearing\n  const tempVersion = APP_VERSION;\n  const token = localStorage.getItem('token');\n  const user = localStorage.getItem('user');\n  const isAuthenticated = localStorage.getItem('isAuthenticated');\n  const phone = localStorage.getItem('phone');\n  \n  // Clear all storage\n  localStorage.clear();\n  sessionStorage.clear();\n  \n  // Restore important data if user was logged in\n  if (isAuthenticated === 'true' && token && user) {\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', user);\n    localStorage.setItem('isAuthenticated', isAuthenticated);\n    if (phone) localStorage.setItem('phone', phone);\n  }\n  \n  // Always restore new version\n  localStorage.setItem('app_version', tempVersion);\n  \n  // Only logout and redirect if version actually changed\n  if (!isAuthenticated || !token || !user) {\n    // Clear Vuex store if available\n    if (store && store.dispatch) {\n      store.dispatch('logout');\n    }\n    \n    // Redirect to login only if not already there\n    if (currentPath !== '/login') {\n      window.location.replace('/login');\n    }\n  }\n}\n\n// Configure axios\naxios.defaults.baseURL = 'https://ott.no1news.in/'\naxios.defaults.withCredentials = true\n\nconst app = createApp(App)\n\n// Use Vuex store and router\napp.use(store)\napp.use(router)\n\napp.mount('#app')\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,KAAK;AAC/B,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAO,mBAAmB;;AAE1B;AACA,OAAO,+CAA+C;;AAEtD;AACA,MAAMC,WAAW,GAAG,QAAQ,CAAC,CAAC;AAC9B,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;;AAEzD;AACA,IAAIF,aAAa,IAAIA,aAAa,KAAKD,WAAW,EAAE;EAClDI,OAAO,CAACC,GAAG,CAAC,8DAA8D,CAAC;;EAE3E;EACA,MAAMC,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ;;EAE5C;EACA,MAAMC,WAAW,GAAGV,WAAW;EAC/B,MAAMW,KAAK,GAAGT,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMS,IAAI,GAAGV,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACzC,MAAMU,eAAe,GAAGX,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;EAC/D,MAAMW,KAAK,GAAGZ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;EAE3C;EACAD,YAAY,CAACa,KAAK,CAAC,CAAC;EACpBC,cAAc,CAACD,KAAK,CAAC,CAAC;;EAEtB;EACA,IAAIF,eAAe,KAAK,MAAM,IAAIF,KAAK,IAAIC,IAAI,EAAE;IAC/CV,YAAY,CAACe,OAAO,CAAC,OAAO,EAAEN,KAAK,CAAC;IACpCT,YAAY,CAACe,OAAO,CAAC,MAAM,EAAEL,IAAI,CAAC;IAClCV,YAAY,CAACe,OAAO,CAAC,iBAAiB,EAAEJ,eAAe,CAAC;IACxD,IAAIC,KAAK,EAAEZ,YAAY,CAACe,OAAO,CAAC,OAAO,EAAEH,KAAK,CAAC;EACjD;;EAEA;EACAZ,YAAY,CAACe,OAAO,CAAC,aAAa,EAAEP,WAAW,CAAC;;EAEhD;EACA,IAAI,CAACG,eAAe,IAAI,CAACF,KAAK,IAAI,CAACC,IAAI,EAAE;IACvC;IACA,IAAId,KAAK,IAAIA,KAAK,CAACoB,QAAQ,EAAE;MAC3BpB,KAAK,CAACoB,QAAQ,CAAC,QAAQ,CAAC;IAC1B;;IAEA;IACA,IAAIZ,WAAW,KAAK,QAAQ,EAAE;MAC5BC,MAAM,CAACC,QAAQ,CAACW,OAAO,CAAC,QAAQ,CAAC;IACnC;EACF;AACF;;AAEA;AACApB,KAAK,CAACqB,QAAQ,CAACC,OAAO,GAAG,yBAAyB;AAClDtB,KAAK,CAACqB,QAAQ,CAACE,eAAe,GAAG,IAAI;AAErC,MAAMC,GAAG,GAAG5B,SAAS,CAACC,GAAG,CAAC;;AAE1B;AACA2B,GAAG,CAACC,GAAG,CAAC1B,KAAK,CAAC;AACdyB,GAAG,CAACC,GAAG,CAAC3B,MAAM,CAAC;AAEf0B,GAAG,CAACE,KAAK,CAAC,MAAM,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}