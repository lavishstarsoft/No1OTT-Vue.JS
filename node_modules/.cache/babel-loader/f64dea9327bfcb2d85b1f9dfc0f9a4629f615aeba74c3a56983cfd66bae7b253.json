{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { formatViewCount } from '@/utils/videoTracking';\nexport default {\n  name: 'CategoryVideos',\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const category = ref(null);\n    const categoryVideos = ref([]);\n    const currentPage = ref(1);\n    const hasMoreVideos = ref(true);\n    const pageSize = 20;\n    const fetchVideos = async (page = 1) => {\n      try {\n        const response = await axios.get(`https://ott.no1news.in/api/videos/category/${route.params.id}/?page=${page}&page_size=${pageSize}`);\n        if (response.data.status === 'success') {\n          // Set category name from the response\n          if (response.data.category) {\n            category.value = {\n              ...response.data.category,\n              name: capitalizeText(response.data.category.name)\n            };\n          }\n          const processedVideos = response.data.data.map(video => ({\n            ...video,\n            title: capitalizeText(video.title),\n            description: capitalizeText(video.description)\n          }));\n          if (page === 1) {\n            categoryVideos.value = processedVideos;\n          } else {\n            categoryVideos.value = [...categoryVideos.value, ...processedVideos];\n          }\n          hasMoreVideos.value = response.data.pagination.has_next;\n          currentPage.value = page;\n        }\n      } catch (error) {\n        console.error('Error fetching videos:', error);\n      }\n    };\n    const loadMoreVideos = () => {\n      if (hasMoreVideos.value) {\n        fetchVideos(currentPage.value + 1);\n      }\n    };\n    const playVideo = video => {\n      router.push({\n        name: 'MovieDetails',\n        params: {\n          id: video.id,\n          videoUrl: video.video_url,\n          videoType: 'hls'\n        }\n      });\n    };\n    const capitalizeText = text => {\n      if (!text) return '';\n      return text.split(/[\\s-]+/).map(word => {\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\n        if (specialWords.includes(word.toUpperCase())) {\n          return word.toUpperCase();\n        }\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\n        if (minorWords.includes(word.toLowerCase())) {\n          return word.toLowerCase();\n        }\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n      }).join(' ');\n    };\n    const isNewVideo = createdAt => {\n      const videoDate = new Date(createdAt);\n      const now = new Date();\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24));\n      return diffDays <= 7;\n    };\n    const formatDuration = seconds => {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = seconds % 60;\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    };\n    const formatViews = views => {\n      return formatViewCount(views);\n    };\n    onMounted(() => {\n      fetchVideos();\n    });\n    return {\n      category,\n      categoryVideos,\n      hasMoreVideos,\n      loadMoreVideos,\n      playVideo,\n      isNewVideo,\n      formatDuration,\n      formatViews\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","onMounted","useRoute","useRouter","formatViewCount","name","setup","route","router","category","categoryVideos","currentPage","hasMoreVideos","pageSize","fetchVideos","page","response","get","params","id","data","status","value","capitalizeText","processedVideos","map","video","title","description","pagination","has_next","error","console","loadMoreVideos","playVideo","push","videoUrl","video_url","videoType","text","split","word","specialWords","includes","toUpperCase","minorWords","toLowerCase","charAt","slice","join","isNewVideo","createdAt","videoDate","Date","now","diffDays","Math","ceil","formatDuration","seconds","minutes","floor","remainingSeconds","toString","padStart","formatViews","views"],"sources":["D:\\OTT\\ott_frontend\\src\\views\\CategoryVideos.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-[#121212] text-white py-6\">\n    <div class=\"w-full px-2 md:px-4\">\n      <!-- Back Button and Category Header -->\n      <div class=\"flex items-center mb-8 relative px-2 md:px-6\">\n        <button \n          @click=\"$router.back()\" \n          class=\"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10\"\n        >\n          <i class=\"fas fa-arrow-left text-2xl\"></i>\n        </button>\n        <div class=\"w-full text-center\">\n          <h1 class=\"text-3xl font-bold relative inline-block px-4\">\n            {{ category?.name || 'Loading...' }}\n            <div class=\"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-red-500 to-red-800\"></div>\n          </h1>\n        </div>\n      </div>\n\n      <!-- Loading State -->\n      <div v-if=\"!category\" class=\"flex justify-center items-center py-8\">\n        <div class=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"></div>\n      </div>\n\n      <!-- Videos Grid -->\n      <div v-else class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0\">\n        <!-- Show Coming Soon message if no videos -->\n        <div v-if=\"categoryVideos.length === 0\" class=\"col-span-full flex flex-col items-center justify-center py-16\">\n          <i class=\"fas fa-film text-6xl text-gray-600 mb-4\"></i>\n          <h2 class=\"text-2xl font-bold text-gray-400 mb-2\">Coming Soon</h2>\n          <p class=\"text-gray-500 text-center\">Videos for this category will be available soon.</p>\n        </div>\n        \n        <!-- Show videos if available -->\n        <div \n          v-else\n          v-for=\"video in categoryVideos\" \n          :key=\"video.id\"\n          class=\"cursor-pointer group transform hover:scale-105 transition-transform duration-200\"\n          @click=\"playVideo(video)\"\n        >\n          <!-- 16:9 Aspect Ratio Container -->\n          <div class=\"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2\">\n            <img \n              :src=\"video.thumbnail_url\" \n              :alt=\"video.title\"\n              class=\"w-full h-full object-cover\"\n            >\n            \n            <!-- Video badges -->\n            <div class=\"absolute top-1 left-1 flex gap-1\">\n              <span v-if=\"isNewVideo(video.created_at)\" class=\"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\n                NEW\n              </span>\n              <span v-if=\"video.is_premium\" class=\"bg-purple-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\n                PREMIUM\n              </span>\n              <span v-if=\"video.video_type === 'rental'\" class=\"bg-yellow-600 text-white text-[10px] px-1.5 py-0.5 rounded\">\n                RENTAL\n              </span>\n            </div>\n            \n            <!-- Duration badge -->\n            <div class=\"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white\">\n              {{ formatDuration(video.duration) }}\n            </div>\n            \n            <!-- Play button overlay -->\n            <div class=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50\">\n              <div class=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm\">\n                <i class=\"fas fa-play text-sm text-white\"></i>\n              </div>\n            </div>\n          </div>\n\n          <!-- Video Info -->\n          <div class=\"px-1\">\n            <h3 class=\"text-sm font-medium mb-0.5 line-clamp-2\">{{ video.title }}</h3>\n            <!-- View count -->\n            <div class=\"text-xs text-gray-400 flex items-center\">\n              <i class=\"fas fa-eye mr-1 text-xs\"></i>\n              {{ formatViews(video.views_count) }} views\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Load More Button -->\n      <div v-if=\"hasMoreVideos\" class=\"mt-6 text-center\">\n        <button \n          @click=\"loadMoreVideos\" \n          class=\"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm\"\n        >\n          Load More\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { formatViewCount } from '@/utils/videoTracking'\n\nexport default {\n  name: 'CategoryVideos',\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const category = ref(null)\n    const categoryVideos = ref([])\n    const currentPage = ref(1)\n    const hasMoreVideos = ref(true)\n    const pageSize = 20\n\n    const fetchVideos = async (page = 1) => {\n      try {\n        const response = await axios.get(`https://ott.no1news.in/api/videos/category/${route.params.id}/?page=${page}&page_size=${pageSize}`)\n        if (response.data.status === 'success') {\n          // Set category name from the response\n          if (response.data.category) {\n            category.value = {\n              ...response.data.category,\n              name: capitalizeText(response.data.category.name)\n            }\n          }\n\n          const processedVideos = response.data.data.map(video => ({\n            ...video,\n            title: capitalizeText(video.title),\n            description: capitalizeText(video.description)\n          }))\n\n          if (page === 1) {\n            categoryVideos.value = processedVideos\n          } else {\n            categoryVideos.value = [...categoryVideos.value, ...processedVideos]\n          }\n\n          hasMoreVideos.value = response.data.pagination.has_next\n          currentPage.value = page\n        }\n      } catch (error) {\n        console.error('Error fetching videos:', error)\n      }\n    }\n\n    const loadMoreVideos = () => {\n      if (hasMoreVideos.value) {\n        fetchVideos(currentPage.value + 1)\n      }\n    }\n\n    const playVideo = (video) => {\n      router.push({\n        name: 'MovieDetails',\n        params: { \n          id: video.id,\n          videoUrl: video.video_url,\n          videoType: 'hls'\n        }\n      })\n    }\n\n    const capitalizeText = (text) => {\n      if (!text) return '';\n      return text.split(/[\\s-]+/).map(word => {\n        const specialWords = ['HD', 'UHD', '4K', 'TV', 'II', 'III', 'IV', 'SPY'];\n        if (specialWords.includes(word.toUpperCase())) {\n          return word.toUpperCase();\n        }\n        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'in', 'to', 'on', 'at', 'by', 'of'];\n        if (minorWords.includes(word.toLowerCase())) {\n          return word.toLowerCase();\n        }\n        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n      }).join(' ');\n    }\n\n    const isNewVideo = (createdAt) => {\n      const videoDate = new Date(createdAt)\n      const now = new Date()\n      const diffDays = Math.ceil((now - videoDate) / (1000 * 60 * 60 * 24))\n      return diffDays <= 7\n    }\n\n    const formatDuration = (seconds) => {\n      const minutes = Math.floor(seconds / 60)\n      const remainingSeconds = seconds % 60\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`\n    }\n\n    const formatViews = (views) => {\n      return formatViewCount(views);\n    }\n\n    onMounted(() => {\n      fetchVideos()\n    })\n\n    return {\n      category,\n      categoryVideos,\n      hasMoreVideos,\n      loadMoreVideos,\n      playVideo,\n      isNewVideo,\n      formatDuration,\n      formatViews\n    }\n  }\n}\n</script>\n\n<style scoped>\n.aspect-video {\n  aspect-ratio: 16/9;\n}\n\n/* Add gradient text effect */\nh1 {\n  background: linear-gradient(to right, #ffffff, #cccccc);\n  -webkit-background-clip: text;\n  background-clip: text;\n  display: inline-block;\n  padding-bottom: 4px;\n  margin: 0 auto;\n}\n\n/* Add hover effect on back button */\nbutton:hover i {\n  transform: translateX(-3px);\n  transition: transform 0.2s ease;\n}\n\n/* Add line clamp for title */\n.line-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}