{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport MobileNav from './components/MobileNav.vue';\nimport ToastNotification from '@/components/Toast.vue';\nimport PopupModal from '@/components/PopupModal.vue';\nexport default {\n  name: 'App',\n  components: {\n    MobileNav,\n    ToastNotification,\n    PopupModal\n  },\n  computed: {\n    showMobileNav() {\n      const hideOnRoutes = ['/login', '/register', '/mini-register'];\n      return !hideOnRoutes.includes(this.$route.path);\n    }\n  },\n  mounted() {\n    console.log('App mounted, checking authentication status');\n\n    // Check if user is authenticated\n    const isAuthenticated = this.$store.getters.isAuthenticated;\n    const user = this.$store.getters.currentUser;\n    console.log('Authentication status:', {\n      isAuthenticated,\n      user: user ? 'exists' : 'null'\n    });\n\n    // Check and clean expired orders on page load\n    this.checkAndCleanExpiredOrders();\n\n    // Only check notifications and payments if user is authenticated\n    if (isAuthenticated && user) {\n      // Check for success messages\n      this.checkAndShowToast('registrationSuccess', 'registrationMessage');\n      this.checkAndShowToast('loginSuccess', 'loginMessage');\n      // Check for pending payments on mount\n      this.checkPendingPayments();\n      // Check for user notifications (like account deletion)\n      this.checkUserNotifications();\n      // Listen for app resume/focus\n      window.addEventListener('focus', this.checkPendingPayments);\n      window.addEventListener('focus', this.checkUserNotifications);\n      window.addEventListener('focus', this.checkAndCleanExpiredOrders);\n    } else {\n      console.log('User not authenticated, skipping background checks');\n    }\n  },\n  beforeUnmount() {\n    window.removeEventListener('focus', this.checkPendingPayments);\n    window.removeEventListener('focus', this.checkUserNotifications);\n    window.removeEventListener('focus', this.checkAndCleanExpiredOrders);\n  },\n  methods: {\n    checkAndShowToast(successKey, messageKey) {\n      const isSuccess = localStorage.getItem(successKey);\n      if (isSuccess === 'true') {\n        // Show success toast\n        try {\n          if (this.$toast) {\n            this.$toast.success(localStorage.getItem(messageKey) || 'Operation completed successfully!', {\n              position: 'top-right',\n              duration: 3000\n            });\n          }\n        } catch (error) {\n          console.warn('Toast notification failed:', error);\n        }\n        // Clear the success message\n        localStorage.removeItem(successKey);\n        localStorage.removeItem(messageKey);\n      }\n    },\n    async checkPendingPayments() {\n      const pendingPayment = localStorage.getItem('pending_payment');\n      if (pendingPayment) {\n        try {\n          const paymentData = JSON.parse(pendingPayment);\n          console.log('=== CHECKING PENDING PAYMENT ===');\n          console.log('Payment data:', paymentData);\n\n          // 15 నిమిషాల లోపల payment అయితే మాత్రమే\n          const timeDiff = Date.now() - paymentData.timestamp;\n          console.log('Time difference:', timeDiff, 'ms');\n          if (timeDiff < 15 * 60 * 1000) {\n            console.log('Payment is within time limit, proceeding with verification');\n\n            // Retry count check\n            if (paymentData.retry_count >= 10) {\n              console.log('Max retries reached, removing pending payment');\n              localStorage.removeItem('pending_payment');\n              return;\n            }\n            console.log('Attempting payment verification...');\n            // Backend కి verify-payment API call చేయండి\n            const verifyResponse = await this.$axios.post('/users/verify-payment/', {\n              razorpay_payment_id: paymentData.payment_id,\n              razorpay_order_id: paymentData.order_id,\n              razorpay_signature: paymentData.signature,\n              plan_id: paymentData.plan_id,\n              phone: paymentData.phone || this.$store.getters.currentUser?.phone\n            });\n            console.log('Verification response:', verifyResponse.data);\n            if (verifyResponse.data.status === 'success') {\n              localStorage.removeItem('pending_payment');\n              this.$store.commit('setSubscription', verifyResponse.data.subscription);\n              this.$store.dispatch('showToast', {\n                message: 'Payment successful! Your subscription is now active.',\n                type: 'success'\n              });\n              console.log('Pending payment verified successfully');\n            } else {\n              console.log('Payment verification failed:', verifyResponse.data);\n              // Increment retry count\n              paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n              localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n              console.log('Updated retry count:', paymentData.retry_count);\n            }\n          } else {\n            // Payment చాలా పాతది అయితే, localStorage నుండి తీసేయండి\n            localStorage.removeItem('pending_payment');\n            console.log('Pending payment expired, removed from localStorage');\n          }\n        } catch (error) {\n          console.error('Error checking pending payment:', error);\n          // Increment retry count on error\n          try {\n            const paymentData = JSON.parse(pendingPayment);\n            paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n            localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n            console.log('Error occurred, updated retry count:', paymentData.retry_count);\n          } catch (parseError) {\n            console.error('Error updating retry count:', parseError);\n          }\n        }\n      } else {\n        console.log('No pending payment found in localStorage');\n      }\n\n      // Also check subscription status directly\n      await this.checkSubscriptionStatus();\n    },\n    // Check and clean expired orders\n    checkAndCleanExpiredOrders() {\n      try {\n        const paymentOrder = localStorage.getItem('payment_order');\n        if (paymentOrder) {\n          const orderData = JSON.parse(paymentOrder);\n          const orderTime = orderData.created_at;\n          const currentTime = Date.now();\n          const timeDiff = currentTime - orderTime;\n\n          // If order is older than 30 minutes, remove it\n          if (timeDiff > 30 * 60 * 1000) {\n            // 30 minutes\n            localStorage.removeItem('payment_order');\n            console.log('Expired payment order removed from localStorage');\n          } else {\n            console.log('Valid payment order found, keeping it');\n          }\n        } else {\n          console.log('No payment order found in localStorage');\n        }\n      } catch (error) {\n        console.error('Error checking expired orders:', error);\n        // Remove corrupted data\n        localStorage.removeItem('payment_order');\n      }\n    },\n    async checkSubscriptionStatus() {\n      try {\n        const user = this.$store.getters.currentUser;\n        if (!user || !user.phone) {\n          console.log('No user found, skipping subscription check');\n          return;\n        }\n        console.log('=== CHECKING SUBSCRIPTION STATUS ===');\n        console.log('User phone:', user.phone);\n        const response = await this.$axios.get('/users/check-subscription-status/', {\n          params: {\n            phone: user.phone\n          }\n        });\n        console.log('Subscription status response:', response.data);\n        if (response.data.status === 'success') {\n          if (response.data.is_subscribed) {\n            console.log('User has active subscription:', response.data.subscription);\n            // Update store with subscription data\n            this.$store.commit('setSubscription', response.data.subscription);\n\n            // Clear any pending payments since subscription is active\n            localStorage.removeItem('pending_payment');\n            console.log('Cleared pending payment from localStorage');\n            this.$store.dispatch('showToast', {\n              message: 'Your subscription is active!',\n              type: 'success'\n            });\n          } else {\n            console.log('User has no active subscription');\n            // Check if there's a pending payment\n            const pendingPayment = localStorage.getItem('pending_payment');\n            if (pendingPayment) {\n              console.log('Found pending payment, will retry verification');\n            }\n          }\n        } else {\n          console.log('Subscription status check failed:', response.data);\n        }\n      } catch (error) {\n        console.error('Error checking subscription status:', error);\n        console.error('Error details:', error.response?.data);\n      }\n    },\n    async checkUserNotifications() {\n      try {\n        // Check if user is authenticated\n        const isAuthenticated = this.$store.getters.isAuthenticated;\n        const user = this.$store.getters.currentUser;\n        if (!isAuthenticated || !user || !user.phone) {\n          console.log('User not authenticated, skipping notification check');\n          return;\n        }\n        console.log('Checking notifications for user:', user.phone);\n        const response = await this.$axios.get(`/users/check-notifications/?phone=${user.phone}`);\n        if (response.data.status === 'success') {\n          // Check if user still exists in database\n          if (response.data.user_exists === false) {\n            console.log('User no longer exists in database, logging out');\n\n            // Complete logout process\n            this.performCompleteLogout('Your account has been deleted. You have been logged out.');\n            return;\n          }\n\n          // Check for notifications\n          if (response.data.has_notifications) {\n            console.log('Found notifications:', response.data.notifications);\n\n            // Check for account deletion notification\n            const accountDeletedNotification = response.data.notifications.find(notification => notification.type === 'account_deleted');\n            if (accountDeletedNotification) {\n              console.log('Account deletion notification found, logging out user');\n\n              // Complete logout process\n              this.performCompleteLogout('Your account has been deleted by admin. You have been logged out.');\n            }\n          } else {\n            console.log('No notifications found');\n          }\n        }\n      } catch (error) {\n        console.error('Error checking user notifications:', error);\n      }\n    },\n    performCompleteLogout(message) {\n      console.log('Performing complete logout');\n\n      // Clear all localStorage and sessionStorage\n      localStorage.clear();\n      sessionStorage.clear();\n\n      // Clear specific items to be sure\n      const itemsToRemove = ['user', 'isAuthenticated', 'token', 'subscription', 'csrfToken', 'pending_payment', 'registrationSuccess', 'registrationMessage', 'loginSuccess', 'loginMessage', 'hasCompletedRegistration', 'app_version'];\n      itemsToRemove.forEach(item => {\n        localStorage.removeItem(item);\n        sessionStorage.removeItem(item);\n      });\n\n      // Clear store\n      this.$store.commit('logout');\n\n      // Clear all cookies\n      document.cookie.split(\";\").forEach(function (c) {\n        document.cookie = c.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=\" + new Date().toUTCString() + \";path=/\");\n      });\n\n      // Clear axios default headers\n      if (this.$axios && this.$axios.defaults) {\n        this.$axios.defaults.headers.common['Authorization'] = '';\n        this.$axios.defaults.headers.common['X-CSRFToken'] = '';\n      }\n\n      // Show notification\n      this.$store.dispatch('showToast', {\n        message: message || 'You have been logged out.',\n        type: 'error',\n        duration: 5000\n      });\n\n      // Redirect to login page\n      this.$router.push('/login');\n      console.log('Complete logout finished');\n    },\n    handlePopupAction() {\n      // Handle popup action - you can add custom logic here\n      console.log('Popup action handled');\n    }\n  }\n};","map":{"version":3,"names":["MobileNav","ToastNotification","PopupModal","name","components","computed","showMobileNav","hideOnRoutes","includes","$route","path","mounted","console","log","isAuthenticated","$store","getters","user","currentUser","checkAndCleanExpiredOrders","checkAndShowToast","checkPendingPayments","checkUserNotifications","window","addEventListener","beforeUnmount","removeEventListener","methods","successKey","messageKey","isSuccess","localStorage","getItem","$toast","success","position","duration","error","warn","removeItem","pendingPayment","paymentData","JSON","parse","timeDiff","Date","now","timestamp","retry_count","verifyResponse","$axios","post","razorpay_payment_id","payment_id","razorpay_order_id","order_id","razorpay_signature","signature","plan_id","phone","data","status","commit","subscription","dispatch","message","type","setItem","stringify","parseError","checkSubscriptionStatus","paymentOrder","orderData","orderTime","created_at","currentTime","response","get","params","is_subscribed","user_exists","performCompleteLogout","has_notifications","notifications","accountDeletedNotification","find","notification","clear","sessionStorage","itemsToRemove","forEach","item","document","cookie","split","c","replace","toUTCString","defaults","headers","common","$router","push","handlePopupAction"],"sources":["D:\\OTT\\ott_frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-[#121212] flex flex-col\">\n    <div class=\"flex-grow\">\n      <router-view></router-view>\n      <MobileNav v-if=\"showMobileNav\" />\n      <ToastNotification />\n      <PopupModal @popup-action=\"handlePopupAction\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport MobileNav from './components/MobileNav.vue'\nimport ToastNotification from '@/components/Toast.vue'\nimport PopupModal from '@/components/PopupModal.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    MobileNav,\n    ToastNotification,\n    PopupModal\n  },\n  computed: {\n    showMobileNav() {\n      const hideOnRoutes = ['/login', '/register', '/mini-register'];\n      return !hideOnRoutes.includes(this.$route.path);\n    }\n  },\n  mounted() {\n    console.log('App mounted, checking authentication status');\n    \n    // Check if user is authenticated\n    const isAuthenticated = this.$store.getters.isAuthenticated;\n    const user = this.$store.getters.currentUser;\n    \n    console.log('Authentication status:', { isAuthenticated, user: user ? 'exists' : 'null' });\n    \n    // Check and clean expired orders on page load\n    this.checkAndCleanExpiredOrders();\n    \n    // Only check notifications and payments if user is authenticated\n    if (isAuthenticated && user) {\n    // Check for success messages\n    this.checkAndShowToast('registrationSuccess', 'registrationMessage');\n    this.checkAndShowToast('loginSuccess', 'loginMessage');\n      // Check for pending payments on mount\n      this.checkPendingPayments();\n      // Check for user notifications (like account deletion)\n      this.checkUserNotifications();\n      // Listen for app resume/focus\n      window.addEventListener('focus', this.checkPendingPayments);\n      window.addEventListener('focus', this.checkUserNotifications);\n      window.addEventListener('focus', this.checkAndCleanExpiredOrders);\n    } else {\n      console.log('User not authenticated, skipping background checks');\n    }\n  },\n  beforeUnmount() {\n    window.removeEventListener('focus', this.checkPendingPayments);\n    window.removeEventListener('focus', this.checkUserNotifications);\n    window.removeEventListener('focus', this.checkAndCleanExpiredOrders);\n  },\n  methods: {\n    checkAndShowToast(successKey, messageKey) {\n      const isSuccess = localStorage.getItem(successKey);\n      if (isSuccess === 'true') {\n        // Show success toast\n        try {\n          if (this.$toast) {\n            this.$toast.success(localStorage.getItem(messageKey) || 'Operation completed successfully!', {\n              position: 'top-right',\n              duration: 3000\n            });\n          }\n        } catch (error) {\n          console.warn('Toast notification failed:', error);\n        }\n        // Clear the success message\n        localStorage.removeItem(successKey);\n        localStorage.removeItem(messageKey);\n      }\n    },\n    async checkPendingPayments() {\n      const pendingPayment = localStorage.getItem('pending_payment');\n      if (pendingPayment) {\n        try {\n          const paymentData = JSON.parse(pendingPayment);\n          console.log('=== CHECKING PENDING PAYMENT ===');\n          console.log('Payment data:', paymentData);\n          \n          // 15 నిమిషాల లోపల payment అయితే మాత్రమే\n          const timeDiff = Date.now() - paymentData.timestamp;\n          console.log('Time difference:', timeDiff, 'ms');\n          \n          if (timeDiff < 15 * 60 * 1000) {\n            console.log('Payment is within time limit, proceeding with verification');\n            \n            // Retry count check\n            if (paymentData.retry_count >= 10) {\n              console.log('Max retries reached, removing pending payment');\n              localStorage.removeItem('pending_payment');\n              return;\n            }\n            \n            console.log('Attempting payment verification...');\n            // Backend కి verify-payment API call చేయండి\n            const verifyResponse = await this.$axios.post('/users/verify-payment/', {\n              razorpay_payment_id: paymentData.payment_id,\n              razorpay_order_id: paymentData.order_id,\n              razorpay_signature: paymentData.signature,\n              plan_id: paymentData.plan_id,\n              phone: paymentData.phone || this.$store.getters.currentUser?.phone\n            });\n            \n            console.log('Verification response:', verifyResponse.data);\n            \n            if (verifyResponse.data.status === 'success') {\n              localStorage.removeItem('pending_payment');\n              this.$store.commit('setSubscription', verifyResponse.data.subscription);\n              this.$store.dispatch('showToast', {\n                message: 'Payment successful! Your subscription is now active.',\n                type: 'success'\n              });\n              console.log('Pending payment verified successfully');\n            } else {\n              console.log('Payment verification failed:', verifyResponse.data);\n              // Increment retry count\n              paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n              localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n              console.log('Updated retry count:', paymentData.retry_count);\n            }\n          } else {\n            // Payment చాలా పాతది అయితే, localStorage నుండి తీసేయండి\n            localStorage.removeItem('pending_payment');\n            console.log('Pending payment expired, removed from localStorage');\n          }\n        } catch (error) {\n          console.error('Error checking pending payment:', error);\n          // Increment retry count on error\n          try {\n            const paymentData = JSON.parse(pendingPayment);\n            paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n            localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n            console.log('Error occurred, updated retry count:', paymentData.retry_count);\n          } catch (parseError) {\n            console.error('Error updating retry count:', parseError);\n          }\n        }\n      } else {\n        console.log('No pending payment found in localStorage');\n      }\n      \n      // Also check subscription status directly\n      await this.checkSubscriptionStatus();\n    },\n    \n    // Check and clean expired orders\n    checkAndCleanExpiredOrders() {\n      try {\n        const paymentOrder = localStorage.getItem('payment_order');\n        if (paymentOrder) {\n          const orderData = JSON.parse(paymentOrder);\n          const orderTime = orderData.created_at;\n          const currentTime = Date.now();\n          const timeDiff = currentTime - orderTime;\n          \n          // If order is older than 30 minutes, remove it\n          if (timeDiff > 30 * 60 * 1000) { // 30 minutes\n            localStorage.removeItem('payment_order');\n            console.log('Expired payment order removed from localStorage');\n          } else {\n            console.log('Valid payment order found, keeping it');\n          }\n        } else {\n          console.log('No payment order found in localStorage');\n        }\n      } catch (error) {\n        console.error('Error checking expired orders:', error);\n        // Remove corrupted data\n        localStorage.removeItem('payment_order');\n      }\n    },\n    \n    async checkSubscriptionStatus() {\n      try {\n        const user = this.$store.getters.currentUser;\n        if (!user || !user.phone) {\n          console.log('No user found, skipping subscription check');\n          return;\n        }\n        \n        console.log('=== CHECKING SUBSCRIPTION STATUS ===');\n        console.log('User phone:', user.phone);\n        \n        const response = await this.$axios.get('/users/check-subscription-status/', {\n          params: { phone: user.phone }\n        });\n        \n        console.log('Subscription status response:', response.data);\n        \n        if (response.data.status === 'success') {\n          if (response.data.is_subscribed) {\n            console.log('User has active subscription:', response.data.subscription);\n            // Update store with subscription data\n            this.$store.commit('setSubscription', response.data.subscription);\n            \n            // Clear any pending payments since subscription is active\n            localStorage.removeItem('pending_payment');\n            console.log('Cleared pending payment from localStorage');\n            \n            this.$store.dispatch('showToast', {\n              message: 'Your subscription is active!',\n              type: 'success'\n            });\n          } else {\n            console.log('User has no active subscription');\n            // Check if there's a pending payment\n            const pendingPayment = localStorage.getItem('pending_payment');\n            if (pendingPayment) {\n              console.log('Found pending payment, will retry verification');\n            }\n          }\n        } else {\n          console.log('Subscription status check failed:', response.data);\n        }\n      } catch (error) {\n        console.error('Error checking subscription status:', error);\n        console.error('Error details:', error.response?.data);\n      }\n    },\n    async checkUserNotifications() {\n      try {\n        // Check if user is authenticated\n        const isAuthenticated = this.$store.getters.isAuthenticated;\n        const user = this.$store.getters.currentUser;\n        \n        if (!isAuthenticated || !user || !user.phone) {\n          console.log('User not authenticated, skipping notification check');\n          return;\n        }\n\n        console.log('Checking notifications for user:', user.phone);\n\n        const response = await this.$axios.get(`/users/check-notifications/?phone=${user.phone}`);\n        \n        if (response.data.status === 'success') {\n          // Check if user still exists in database\n          if (response.data.user_exists === false) {\n            console.log('User no longer exists in database, logging out');\n            \n            // Complete logout process\n            this.performCompleteLogout('Your account has been deleted. You have been logged out.');\n            return;\n          }\n\n          // Check for notifications\n          if (response.data.has_notifications) {\n            console.log('Found notifications:', response.data.notifications);\n            \n            // Check for account deletion notification\n            const accountDeletedNotification = response.data.notifications.find(\n              notification => notification.type === 'account_deleted'\n            );\n\n            if (accountDeletedNotification) {\n              console.log('Account deletion notification found, logging out user');\n              \n              // Complete logout process\n              this.performCompleteLogout('Your account has been deleted by admin. You have been logged out.');\n            }\n          } else {\n            console.log('No notifications found');\n          }\n        }\n      } catch (error) {\n        console.error('Error checking user notifications:', error);\n      }\n    },\n    performCompleteLogout(message) {\n      console.log('Performing complete logout');\n      \n      // Clear all localStorage and sessionStorage\n      localStorage.clear();\n      sessionStorage.clear();\n      \n      // Clear specific items to be sure\n      const itemsToRemove = [\n        'user', 'isAuthenticated', 'token', 'subscription', 'csrfToken',\n        'pending_payment', 'registrationSuccess', 'registrationMessage',\n        'loginSuccess', 'loginMessage', 'hasCompletedRegistration', 'app_version'\n      ];\n      \n      itemsToRemove.forEach(item => {\n        localStorage.removeItem(item);\n        sessionStorage.removeItem(item);\n      });\n      \n      // Clear store\n      this.$store.commit('logout');\n      \n      // Clear all cookies\n      document.cookie.split(\";\").forEach(function(c) { \n        document.cookie = c.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=\" + new Date().toUTCString() + \";path=/\"); \n      });\n      \n      // Clear axios default headers\n      if (this.$axios && this.$axios.defaults) {\n        this.$axios.defaults.headers.common['Authorization'] = '';\n        this.$axios.defaults.headers.common['X-CSRFToken'] = '';\n      }\n      \n      // Show notification\n      this.$store.dispatch('showToast', {\n        message: message || 'You have been logged out.',\n        type: 'error',\n        duration: 5000\n      });\n\n      // Redirect to login page\n      this.$router.push('/login');\n      \n      console.log('Complete logout finished');\n    },\n    handlePopupAction() {\n      // Handle popup action - you can add custom logic here\n      console.log('Popup action handled');\n    }\n  }\n}\n</script>\n\n<style>\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background: #121212;\n  color: white;\n}\n\n#app {\n  min-height: 100vh;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}