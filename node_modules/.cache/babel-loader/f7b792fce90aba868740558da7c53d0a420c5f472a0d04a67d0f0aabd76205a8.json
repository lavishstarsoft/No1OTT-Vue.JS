{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport MobileNav from './components/MobileNav.vue';\nimport ToastNotification from '@/components/Toast.vue';\nimport PopupModal from '@/components/PopupModal.vue';\nexport default {\n  name: 'App',\n  components: {\n    MobileNav,\n    ToastNotification,\n    PopupModal\n  },\n  computed: {\n    showMobileNav() {\n      const hideOnRoutes = ['/login', '/register', '/mini-register'];\n      return !hideOnRoutes.includes(this.$route.path);\n    }\n  },\n  mounted() {\n    console.log('App mounted, checking authentication status');\n\n    // Check if user is authenticated\n    const isAuthenticated = this.$store.getters.isAuthenticated;\n    const user = this.$store.getters.currentUser;\n    console.log('Authentication status:', {\n      isAuthenticated,\n      user: user ? 'exists' : 'null'\n    });\n\n    // Check and clean expired orders on page load\n    this.checkAndCleanExpiredOrders();\n\n    // Only check notifications and payments if user is authenticated\n    if (isAuthenticated && user) {\n      // Check for success messages\n      this.checkAndShowToast('registrationSuccess', 'registrationMessage');\n      this.checkAndShowToast('loginSuccess', 'loginMessage');\n      // Check for pending payments on mount\n      this.checkPendingPayments();\n      // Check for user notifications (like account deletion)\n      this.checkUserNotifications();\n      // Listen for app resume/focus\n      window.addEventListener('focus', this.checkPendingPayments);\n      window.addEventListener('focus', this.checkUserNotifications);\n      window.addEventListener('focus', this.checkAndCleanExpiredOrders);\n    } else {\n      console.log('User not authenticated, skipping background checks');\n    }\n  },\n  beforeUnmount() {\n    window.removeEventListener('focus', this.checkPendingPayments);\n    window.removeEventListener('focus', this.checkUserNotifications);\n    window.removeEventListener('focus', this.checkAndCleanExpiredOrders);\n  },\n  methods: {\n    checkAndShowToast(successKey, messageKey) {\n      const isSuccess = localStorage.getItem(successKey);\n      if (isSuccess === 'true') {\n        // Show success toast\n        try {\n          if (this.$toast) {\n            this.$toast.success(localStorage.getItem(messageKey) || 'Operation completed successfully!', {\n              position: 'top-right',\n              duration: 3000\n            });\n          }\n        } catch (error) {\n          console.warn('Toast notification failed:', error);\n        }\n        // Clear the success message\n        localStorage.removeItem(successKey);\n        localStorage.removeItem(messageKey);\n      }\n    },\n    async checkPendingPayments() {\n      const pendingPayment = localStorage.getItem('pending_payment');\n      if (pendingPayment) {\n        try {\n          const paymentData = JSON.parse(pendingPayment);\n          console.log('=== CHECKING PENDING PAYMENT ===');\n          console.log('Payment data:', paymentData);\n\n          // 30 నిమిషాల లోపల payment అయితే మాత్రమే\n          const timeDiff = Date.now() - paymentData.timestamp;\n          console.log('Time difference:', timeDiff, 'ms');\n          if (timeDiff < 30 * 60 * 1000) {\n            // Increased to 30 minutes\n            console.log('Payment is within time limit, proceeding with verification');\n\n            // Retry count check and update\n            const currentRetryCount = paymentData.retry_count || 0;\n            if (currentRetryCount >= 20) {\n              // Increased max retries\n              console.log('Max retries reached, removing pending payment');\n              localStorage.removeItem('pending_payment');\n              return;\n            }\n\n            // Update retry count\n            paymentData.retry_count = currentRetryCount + 1;\n            localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n            console.log('Attempting payment verification...');\n            console.log('Retry count:', paymentData.retry_count);\n\n            // Get fresh token\n            const token = localStorage.getItem('token');\n\n            // Backend కి verify-payment API call చేయండి\n            const verifyResponse = await this.$axios.post('/users/verify-payment/', {\n              razorpay_payment_id: paymentData.payment_id,\n              razorpay_order_id: paymentData.order_id,\n              razorpay_signature: paymentData.signature,\n              plan_id: paymentData.plan_id,\n              phone: paymentData.phone\n            }, {\n              headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            });\n            console.log('Verification response:', verifyResponse.data);\n            if (verifyResponse.data.status === 'success') {\n              localStorage.removeItem('pending_payment');\n              this.$store.commit('setSubscription', verifyResponse.data.subscription);\n              this.$store.dispatch('showToast', {\n                message: 'Payment successful! Your subscription is now active.',\n                type: 'success'\n              });\n              console.log('Pending payment verified successfully');\n            } else {\n              console.log('Payment verification failed:', verifyResponse.data);\n              // Increment retry count\n              paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n              localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n              console.log('Updated retry count:', paymentData.retry_count);\n            }\n          } else {\n            // Payment చాలా పాతది అయితే, localStorage నుండి తీసేయండి\n            localStorage.removeItem('pending_payment');\n            console.log('Pending payment expired, removed from localStorage');\n          }\n        } catch (error) {\n          console.error('Error checking pending payment:', error);\n          // Increment retry count on error\n          try {\n            const paymentData = JSON.parse(pendingPayment);\n            paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n            localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n            console.log('Error occurred, updated retry count:', paymentData.retry_count);\n          } catch (parseError) {\n            console.error('Error updating retry count:', parseError);\n          }\n        }\n      } else {\n        console.log('No pending payment found in localStorage');\n      }\n\n      // Also check subscription status directly\n      await this.checkSubscriptionStatus();\n    },\n    // Check and clean expired orders\n    checkAndCleanExpiredOrders() {\n      try {\n        const paymentOrder = localStorage.getItem('payment_order');\n        if (paymentOrder) {\n          const orderData = JSON.parse(paymentOrder);\n          const orderTime = orderData.created_at;\n          const currentTime = Date.now();\n          const timeDiff = currentTime - orderTime;\n\n          // If order is older than 30 minutes, remove it\n          if (timeDiff > 30 * 60 * 1000) {\n            // 30 minutes\n            localStorage.removeItem('payment_order');\n            console.log('Expired payment order removed from localStorage');\n          } else {\n            console.log('Valid payment order found, keeping it');\n          }\n        } else {\n          console.log('No payment order found in localStorage');\n        }\n      } catch (error) {\n        console.error('Error checking expired orders:', error);\n        // Remove corrupted data\n        localStorage.removeItem('payment_order');\n      }\n    },\n    async checkSubscriptionStatus() {\n      try {\n        const user = this.$store.getters.currentUser;\n        if (!user || !user.phone) {\n          console.log('No user found, skipping subscription check');\n          return;\n        }\n        console.log('=== CHECKING SUBSCRIPTION STATUS ===');\n        console.log('User phone:', user.phone);\n        const response = await this.$axios.get('/users/check-subscription-status/', {\n          params: {\n            phone: user.phone\n          }\n        });\n        console.log('Subscription status response:', response.data);\n        if (response.data.status === 'success') {\n          if (response.data.is_subscribed) {\n            console.log('User has active subscription:', response.data.subscription);\n            // Update store with subscription data\n            this.$store.commit('setSubscription', response.data.subscription);\n\n            // Clear any pending payments since subscription is active\n            localStorage.removeItem('pending_payment');\n            console.log('Cleared pending payment from localStorage');\n            this.$store.dispatch('showToast', {\n              message: 'Your subscription is active!',\n              type: 'success'\n            });\n          } else {\n            console.log('User has no active subscription');\n            // Check if there's a pending payment\n            const pendingPayment = localStorage.getItem('pending_payment');\n            if (pendingPayment) {\n              console.log('Found pending payment, will retry verification');\n            }\n          }\n        } else {\n          console.log('Subscription status check failed:', response.data);\n        }\n      } catch (error) {\n        console.error('Error checking subscription status:', error);\n        console.error('Error details:', error.response?.data);\n      }\n    },\n    async checkUserNotifications() {\n      try {\n        // Check if user is authenticated\n        const isAuthenticated = this.$store.getters.isAuthenticated;\n        const user = this.$store.getters.currentUser;\n        if (!isAuthenticated || !user || !user.phone) {\n          console.log('User not authenticated, skipping notification check');\n          return;\n        }\n        console.log('Checking notifications for user:', user.phone);\n        const response = await this.$axios.get(`/users/check-notifications/?phone=${user.phone}`);\n        if (response.data.status === 'success') {\n          // Check if user still exists in database\n          if (response.data.user_exists === false) {\n            console.log('User no longer exists in database, logging out');\n\n            // Complete logout process\n            this.performCompleteLogout('Your account has been deleted. You have been logged out.');\n            return;\n          }\n\n          // Check for notifications\n          if (response.data.has_notifications) {\n            console.log('Found notifications:', response.data.notifications);\n\n            // Check for account deletion notification\n            const accountDeletedNotification = response.data.notifications.find(notification => notification.type === 'account_deleted');\n            if (accountDeletedNotification) {\n              console.log('Account deletion notification found, logging out user');\n\n              // Complete logout process\n              this.performCompleteLogout('Your account has been deleted by admin. You have been logged out.');\n            }\n          } else {\n            console.log('No notifications found');\n          }\n        }\n      } catch (error) {\n        console.error('Error checking user notifications:', error);\n      }\n    },\n    performCompleteLogout(message) {\n      console.log('Performing complete logout');\n\n      // Clear all localStorage and sessionStorage\n      localStorage.clear();\n      sessionStorage.clear();\n\n      // Clear specific items to be sure\n      const itemsToRemove = ['user', 'isAuthenticated', 'token', 'subscription', 'csrfToken', 'pending_payment', 'registrationSuccess', 'registrationMessage', 'loginSuccess', 'loginMessage', 'hasCompletedRegistration', 'app_version'];\n      itemsToRemove.forEach(item => {\n        localStorage.removeItem(item);\n        sessionStorage.removeItem(item);\n      });\n\n      // Clear store\n      this.$store.commit('logout');\n\n      // Clear all cookies\n      document.cookie.split(\";\").forEach(function (c) {\n        document.cookie = c.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=\" + new Date().toUTCString() + \";path=/\");\n      });\n\n      // Clear axios default headers\n      if (this.$axios && this.$axios.defaults) {\n        this.$axios.defaults.headers.common['Authorization'] = '';\n        this.$axios.defaults.headers.common['X-CSRFToken'] = '';\n      }\n\n      // Show notification\n      this.$store.dispatch('showToast', {\n        message: message || 'You have been logged out.',\n        type: 'error',\n        duration: 5000\n      });\n\n      // Redirect to login page\n      this.$router.push('/login');\n      console.log('Complete logout finished');\n    },\n    handlePopupAction() {\n      // Handle popup action - you can add custom logic here\n      console.log('Popup action handled');\n    }\n  }\n};","map":{"version":3,"names":["MobileNav","ToastNotification","PopupModal","name","components","computed","showMobileNav","hideOnRoutes","includes","$route","path","mounted","console","log","isAuthenticated","$store","getters","user","currentUser","checkAndCleanExpiredOrders","checkAndShowToast","checkPendingPayments","checkUserNotifications","window","addEventListener","beforeUnmount","removeEventListener","methods","successKey","messageKey","isSuccess","localStorage","getItem","$toast","success","position","duration","error","warn","removeItem","pendingPayment","paymentData","JSON","parse","timeDiff","Date","now","timestamp","currentRetryCount","retry_count","setItem","stringify","token","verifyResponse","$axios","post","razorpay_payment_id","payment_id","razorpay_order_id","order_id","razorpay_signature","signature","plan_id","phone","headers","data","status","commit","subscription","dispatch","message","type","parseError","checkSubscriptionStatus","paymentOrder","orderData","orderTime","created_at","currentTime","response","get","params","is_subscribed","user_exists","performCompleteLogout","has_notifications","notifications","accountDeletedNotification","find","notification","clear","sessionStorage","itemsToRemove","forEach","item","document","cookie","split","c","replace","toUTCString","defaults","common","$router","push","handlePopupAction"],"sources":["D:\\OTT\\ott_frontend\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-[#121212] flex flex-col\">\n    <div class=\"flex-grow\">\n      <router-view></router-view>\n      <MobileNav v-if=\"showMobileNav\" />\n      <ToastNotification />\n      <PopupModal @popup-action=\"handlePopupAction\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport MobileNav from './components/MobileNav.vue'\nimport ToastNotification from '@/components/Toast.vue'\nimport PopupModal from '@/components/PopupModal.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    MobileNav,\n    ToastNotification,\n    PopupModal\n  },\n  computed: {\n    showMobileNav() {\n      const hideOnRoutes = ['/login', '/register', '/mini-register'];\n      return !hideOnRoutes.includes(this.$route.path);\n    }\n  },\n  mounted() {\n    console.log('App mounted, checking authentication status');\n    \n    // Check if user is authenticated\n    const isAuthenticated = this.$store.getters.isAuthenticated;\n    const user = this.$store.getters.currentUser;\n    \n    console.log('Authentication status:', { isAuthenticated, user: user ? 'exists' : 'null' });\n    \n    // Check and clean expired orders on page load\n    this.checkAndCleanExpiredOrders();\n    \n    // Only check notifications and payments if user is authenticated\n    if (isAuthenticated && user) {\n    // Check for success messages\n    this.checkAndShowToast('registrationSuccess', 'registrationMessage');\n    this.checkAndShowToast('loginSuccess', 'loginMessage');\n      // Check for pending payments on mount\n      this.checkPendingPayments();\n      // Check for user notifications (like account deletion)\n      this.checkUserNotifications();\n      // Listen for app resume/focus\n      window.addEventListener('focus', this.checkPendingPayments);\n      window.addEventListener('focus', this.checkUserNotifications);\n      window.addEventListener('focus', this.checkAndCleanExpiredOrders);\n    } else {\n      console.log('User not authenticated, skipping background checks');\n    }\n  },\n  beforeUnmount() {\n    window.removeEventListener('focus', this.checkPendingPayments);\n    window.removeEventListener('focus', this.checkUserNotifications);\n    window.removeEventListener('focus', this.checkAndCleanExpiredOrders);\n  },\n  methods: {\n    checkAndShowToast(successKey, messageKey) {\n      const isSuccess = localStorage.getItem(successKey);\n      if (isSuccess === 'true') {\n        // Show success toast\n        try {\n          if (this.$toast) {\n            this.$toast.success(localStorage.getItem(messageKey) || 'Operation completed successfully!', {\n              position: 'top-right',\n              duration: 3000\n            });\n          }\n        } catch (error) {\n          console.warn('Toast notification failed:', error);\n        }\n        // Clear the success message\n        localStorage.removeItem(successKey);\n        localStorage.removeItem(messageKey);\n      }\n    },\n    async checkPendingPayments() {\n      const pendingPayment = localStorage.getItem('pending_payment');\n      if (pendingPayment) {\n        try {\n          const paymentData = JSON.parse(pendingPayment);\n          console.log('=== CHECKING PENDING PAYMENT ===');\n          console.log('Payment data:', paymentData);\n          \n          // 30 నిమిషాల లోపల payment అయితే మాత్రమే\n          const timeDiff = Date.now() - paymentData.timestamp;\n          console.log('Time difference:', timeDiff, 'ms');\n          \n          if (timeDiff < 30 * 60 * 1000) { // Increased to 30 minutes\n            console.log('Payment is within time limit, proceeding with verification');\n            \n            // Retry count check and update\n            const currentRetryCount = paymentData.retry_count || 0;\n            if (currentRetryCount >= 20) { // Increased max retries\n              console.log('Max retries reached, removing pending payment');\n              localStorage.removeItem('pending_payment');\n              return;\n            }\n            \n            // Update retry count\n            paymentData.retry_count = currentRetryCount + 1;\n            localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n            \n            console.log('Attempting payment verification...');\n            console.log('Retry count:', paymentData.retry_count);\n            \n            // Get fresh token\n            const token = localStorage.getItem('token');\n            \n            // Backend కి verify-payment API call చేయండి\n            const verifyResponse = await this.$axios.post('/users/verify-payment/', {\n              razorpay_payment_id: paymentData.payment_id,\n              razorpay_order_id: paymentData.order_id,\n              razorpay_signature: paymentData.signature,\n              plan_id: paymentData.plan_id,\n              phone: paymentData.phone\n            }, {\n              headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            });\n            \n            console.log('Verification response:', verifyResponse.data);\n            \n            if (verifyResponse.data.status === 'success') {\n              localStorage.removeItem('pending_payment');\n              this.$store.commit('setSubscription', verifyResponse.data.subscription);\n              this.$store.dispatch('showToast', {\n                message: 'Payment successful! Your subscription is now active.',\n                type: 'success'\n              });\n              console.log('Pending payment verified successfully');\n            } else {\n              console.log('Payment verification failed:', verifyResponse.data);\n              // Increment retry count\n              paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n              localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n              console.log('Updated retry count:', paymentData.retry_count);\n            }\n          } else {\n            // Payment చాలా పాతది అయితే, localStorage నుండి తీసేయండి\n            localStorage.removeItem('pending_payment');\n            console.log('Pending payment expired, removed from localStorage');\n          }\n        } catch (error) {\n          console.error('Error checking pending payment:', error);\n          // Increment retry count on error\n          try {\n            const paymentData = JSON.parse(pendingPayment);\n            paymentData.retry_count = (paymentData.retry_count || 0) + 1;\n            localStorage.setItem('pending_payment', JSON.stringify(paymentData));\n            console.log('Error occurred, updated retry count:', paymentData.retry_count);\n          } catch (parseError) {\n            console.error('Error updating retry count:', parseError);\n          }\n        }\n      } else {\n        console.log('No pending payment found in localStorage');\n      }\n      \n      // Also check subscription status directly\n      await this.checkSubscriptionStatus();\n    },\n    \n    // Check and clean expired orders\n    checkAndCleanExpiredOrders() {\n      try {\n        const paymentOrder = localStorage.getItem('payment_order');\n        if (paymentOrder) {\n          const orderData = JSON.parse(paymentOrder);\n          const orderTime = orderData.created_at;\n          const currentTime = Date.now();\n          const timeDiff = currentTime - orderTime;\n          \n          // If order is older than 30 minutes, remove it\n          if (timeDiff > 30 * 60 * 1000) { // 30 minutes\n            localStorage.removeItem('payment_order');\n            console.log('Expired payment order removed from localStorage');\n          } else {\n            console.log('Valid payment order found, keeping it');\n          }\n        } else {\n          console.log('No payment order found in localStorage');\n        }\n      } catch (error) {\n        console.error('Error checking expired orders:', error);\n        // Remove corrupted data\n        localStorage.removeItem('payment_order');\n      }\n    },\n    \n    async checkSubscriptionStatus() {\n      try {\n        const user = this.$store.getters.currentUser;\n        if (!user || !user.phone) {\n          console.log('No user found, skipping subscription check');\n          return;\n        }\n        \n        console.log('=== CHECKING SUBSCRIPTION STATUS ===');\n        console.log('User phone:', user.phone);\n        \n        const response = await this.$axios.get('/users/check-subscription-status/', {\n          params: { phone: user.phone }\n        });\n        \n        console.log('Subscription status response:', response.data);\n        \n        if (response.data.status === 'success') {\n          if (response.data.is_subscribed) {\n            console.log('User has active subscription:', response.data.subscription);\n            // Update store with subscription data\n            this.$store.commit('setSubscription', response.data.subscription);\n            \n            // Clear any pending payments since subscription is active\n            localStorage.removeItem('pending_payment');\n            console.log('Cleared pending payment from localStorage');\n            \n            this.$store.dispatch('showToast', {\n              message: 'Your subscription is active!',\n              type: 'success'\n            });\n          } else {\n            console.log('User has no active subscription');\n            // Check if there's a pending payment\n            const pendingPayment = localStorage.getItem('pending_payment');\n            if (pendingPayment) {\n              console.log('Found pending payment, will retry verification');\n            }\n          }\n        } else {\n          console.log('Subscription status check failed:', response.data);\n        }\n      } catch (error) {\n        console.error('Error checking subscription status:', error);\n        console.error('Error details:', error.response?.data);\n      }\n    },\n    async checkUserNotifications() {\n      try {\n        // Check if user is authenticated\n        const isAuthenticated = this.$store.getters.isAuthenticated;\n        const user = this.$store.getters.currentUser;\n        \n        if (!isAuthenticated || !user || !user.phone) {\n          console.log('User not authenticated, skipping notification check');\n          return;\n        }\n\n        console.log('Checking notifications for user:', user.phone);\n\n        const response = await this.$axios.get(`/users/check-notifications/?phone=${user.phone}`);\n        \n        if (response.data.status === 'success') {\n          // Check if user still exists in database\n          if (response.data.user_exists === false) {\n            console.log('User no longer exists in database, logging out');\n            \n            // Complete logout process\n            this.performCompleteLogout('Your account has been deleted. You have been logged out.');\n            return;\n          }\n\n          // Check for notifications\n          if (response.data.has_notifications) {\n            console.log('Found notifications:', response.data.notifications);\n            \n            // Check for account deletion notification\n            const accountDeletedNotification = response.data.notifications.find(\n              notification => notification.type === 'account_deleted'\n            );\n\n            if (accountDeletedNotification) {\n              console.log('Account deletion notification found, logging out user');\n              \n              // Complete logout process\n              this.performCompleteLogout('Your account has been deleted by admin. You have been logged out.');\n            }\n          } else {\n            console.log('No notifications found');\n          }\n        }\n      } catch (error) {\n        console.error('Error checking user notifications:', error);\n      }\n    },\n    performCompleteLogout(message) {\n      console.log('Performing complete logout');\n      \n      // Clear all localStorage and sessionStorage\n      localStorage.clear();\n      sessionStorage.clear();\n      \n      // Clear specific items to be sure\n      const itemsToRemove = [\n        'user', 'isAuthenticated', 'token', 'subscription', 'csrfToken',\n        'pending_payment', 'registrationSuccess', 'registrationMessage',\n        'loginSuccess', 'loginMessage', 'hasCompletedRegistration', 'app_version'\n      ];\n      \n      itemsToRemove.forEach(item => {\n        localStorage.removeItem(item);\n        sessionStorage.removeItem(item);\n      });\n      \n      // Clear store\n      this.$store.commit('logout');\n      \n      // Clear all cookies\n      document.cookie.split(\";\").forEach(function(c) { \n        document.cookie = c.replace(/^ +/, \"\").replace(/=.*/, \"=;expires=\" + new Date().toUTCString() + \";path=/\"); \n      });\n      \n      // Clear axios default headers\n      if (this.$axios && this.$axios.defaults) {\n        this.$axios.defaults.headers.common['Authorization'] = '';\n        this.$axios.defaults.headers.common['X-CSRFToken'] = '';\n      }\n      \n      // Show notification\n      this.$store.dispatch('showToast', {\n        message: message || 'You have been logged out.',\n        type: 'error',\n        duration: 5000\n      });\n\n      // Redirect to login page\n      this.$router.push('/login');\n      \n      console.log('Complete logout finished');\n    },\n    handlePopupAction() {\n      // Handle popup action - you can add custom logic here\n      console.log('Popup action handled');\n    }\n  }\n}\n</script>\n\n<style>\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background: #121212;\n  color: white;\n}\n\n#app {\n  min-height: 100vh;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}